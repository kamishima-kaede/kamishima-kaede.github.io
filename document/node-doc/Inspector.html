<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.14" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.49" />
    <style>
      html {
        background: var(--bg-color, #fff);
      }

      html[data-theme="dark"] {
        background: var(--bg-color, #1d1e1f);
      }

      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta property="og:url" content="https://hanekawa.top/document/node-doc/Inspector.html"><meta property="og:site_name" content="hanekawa-shiki"><meta property="og:title" content="Inspector"><meta property="og:description" content="Inspector Node.js çš„ Inspector æ¨¡å—æä¾›äº†ä¸€ç§æ–¹å¼ï¼Œå¯ä»¥è®©å¼€å‘è€…å¯¹ Node.js åº”ç”¨è¿›è¡Œæ£€æŸ¥å’Œè°ƒè¯•ã€‚å®ƒæ˜¯åŸºäº Chrome DevTools Protocolï¼ˆChrome å¼€å‘è€…å·¥å…·åè®®ï¼‰å®ç°çš„ï¼Œå…è®¸å¼€å‘è€…ä½¿ç”¨ç±»ä¼¼äºåœ¨ Chrome æµè§ˆå™¨ä¸­è°ƒè¯• JavaScript çš„ä½“éªŒæ¥è°ƒè¯• Node.js åº”ç”¨ã€‚ ç®€å•æ¥è¯´ï¼Œè¿™..."><meta property="og:type" content="website"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2024-06-21T09:46:17.000Z"><meta property="article:author" content="hanekawa-shiki"><meta property="article:modified_time" content="2024-06-21T09:46:17.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"WebPage","name":"Inspector","description":"Inspector Node.js çš„ Inspector æ¨¡å—æä¾›äº†ä¸€ç§æ–¹å¼ï¼Œå¯ä»¥è®©å¼€å‘è€…å¯¹ Node.js åº”ç”¨è¿›è¡Œæ£€æŸ¥å’Œè°ƒè¯•ã€‚å®ƒæ˜¯åŸºäº Chrome DevTools Protocolï¼ˆChrome å¼€å‘è€…å·¥å…·åè®®ï¼‰å®ç°çš„ï¼Œå…è®¸å¼€å‘è€…ä½¿ç”¨ç±»ä¼¼äºåœ¨ Chrome æµè§ˆå™¨ä¸­è°ƒè¯• JavaScript çš„ä½“éªŒæ¥è°ƒè¯• Node.js åº”ç”¨ã€‚ ç®€å•æ¥è¯´ï¼Œè¿™..."}</script><meta name="keywords" content="JavaScript,HTML,CSS"><link rel="icon" href="/favicon.ico"><link rel="icon" href="/assets/icons/chrome-192.png" type="image/png" sizes="192x192"><link rel="icon" href="/assets/icons/chrome-512.png" type="image/png" sizes="512x512"><link rel="icon" href="/assets/icons/chrome-mask-192.png" type="image/png" sizes="192x192"><link rel="icon" href="/assets/icons/chrome-mask-512.png" type="image/png" sizes="512x512"><link rel="manifest" href="/manifest.webmanifest" crossorigin="use-credentials"><meta name="theme-color" content="#5c92d1"><link rel="apple-touch-icon" href="/assets/icons/apple-touch-icon.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="white"><meta name="msapplication-TileImage" content="/assets/icons/ms-icon-144.png"><meta name="msapplication-TileColor" content="#ffffff"><title>Inspector | hanekawa-shiki</title><meta name="description" content="Inspector Node.js çš„ Inspector æ¨¡å—æä¾›äº†ä¸€ç§æ–¹å¼ï¼Œå¯ä»¥è®©å¼€å‘è€…å¯¹ Node.js åº”ç”¨è¿›è¡Œæ£€æŸ¥å’Œè°ƒè¯•ã€‚å®ƒæ˜¯åŸºäº Chrome DevTools Protocolï¼ˆChrome å¼€å‘è€…å·¥å…·åè®®ï¼‰å®ç°çš„ï¼Œå…è®¸å¼€å‘è€…ä½¿ç”¨ç±»ä¼¼äºåœ¨ Chrome æµè§ˆå™¨ä¸­è°ƒè¯• JavaScript çš„ä½“éªŒæ¥è°ƒè¯• Node.js åº”ç”¨ã€‚ ç®€å•æ¥è¯´ï¼Œè¿™...">
    <link rel="stylesheet" href="/assets/css/styles.a84c0532.css">
    <link rel="preload" href="/assets/js/runtime~app.8acf974b.js" as="script"><link rel="preload" href="/assets/css/styles.a84c0532.css" as="style"><link rel="preload" href="/assets/js/4485.e6fe7c7b.js" as="script"><link rel="preload" href="/assets/js/app.fff57528.js" as="script">
    
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><!--[--><div class="theme-container external-link-icon has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><!--[--><a class="route-link vp-brand" href="/"><img class="vp-nav-logo light" src="/assets/svg/logo.svg" alt><img class="vp-nav-logo dark" src="/assets/svg/logo.svg" alt><span class="vp-site-name hide-in-pad">hanekawa-shiki</span></a><!--]--><!----></div><div class="vp-navbar-center"><!----><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/" aria-label="åšå®¢ä¸»é¡µ"><!--[--><span class="font-icon icon home" style=""></span><!--]-->åšå®¢ä¸»é¡µ<!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="å­¦ä¹ ç¬”è®°"><!--[--><span class="font-icon icon framework" style=""></span>å­¦ä¹ ç¬”è®°<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">å‰ç«¯æ¡†æ¶</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/framework_front/vue3/" aria-label="Vue3ç¬”è®°"><!--[--><span class="font-icon icon vue" style=""></span><!--]-->Vue3ç¬”è®°<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/framework_front/react/" aria-label="Reactç¬”è®°"><!--[--><span class="font-icon icon react" style=""></span><!--]-->Reactç¬”è®°<!----></a></li></ul></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="æ–‡æ¡£"><!--[--><span class="font-icon icon framework" style=""></span>æ–‡æ¡£<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">æ¬è¿</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link route-link-active auto-link" href="/document/node-doc/" aria-label="Node.jsæ–‡æ¡£"><!--[--><span class="font-icon icon circle-info" style=""></span><!--]-->Node.jsæ–‡æ¡£<!----></a></li></ul></li></ul></button></div></div></nav><!--]--><!----></div><div class="vp-navbar-end"><!----><!--[--><!----><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com/hanekawa-shiki/hanekawa-shiki.github.io" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" name="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-color-mode-switch" id="color-mode-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" name="auto" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" name="dark" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" name="light" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!----><!--]--><!----><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!----><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/" aria-label="Node.jsæ–‡æ¡£"><!--[--><span class="font-icon icon circle-info" style=""></span><!--]-->Node.jsæ–‡æ¡£<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Assert.html" aria-label="Assert"><!---->Assert<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Async%20hooks.html" aria-label="Async hooks"><!---->Async hooks<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Asynchronous%20context%20tracking.html" aria-label="Asynchronous context tracking"><!---->Asynchronous context tracking<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Buffer.html" aria-label="Buffer"><!---->Buffer<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/C__%20addons.html" aria-label="C++ addons"><!---->C++ addons<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/C__%20embedder%20API.html" aria-label="C++ embedder API"><!---->C++ embedder API<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Child%20process.html" aria-label="Child process"><!---->Child process<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Cluster.html" aria-label="Cluster"><!---->Cluster<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Command-line%20API.html" aria-label="Command-line API"><!---->Command-line API<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Console.html" aria-label="Console"><!---->Console<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Corepack.html" aria-label="Corepack"><!---->Corepack<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Crypto.html" aria-label="Crypto"><!---->Crypto<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Debugger.html" aria-label="Debugger"><!---->Debugger<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Deprecated%20APIs.html" aria-label="Deprecated APIs"><!---->Deprecated APIs<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Diagnostic%20report.html" aria-label="Diagnostic report"><!---->Diagnostic report<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Diagnostics%20Channel.html" aria-label="Diagnostics Channel"><!---->Diagnostics Channel<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/DNS.html" aria-label="DNS"><!---->DNS<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Domain.html" aria-label="Domain"><!---->Domain<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Errors.html" aria-label="Errors"><!---->Errors<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Events.html" aria-label="Events"><!---->Events<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/File%20system.html" aria-label="File system"><!---->File system<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Global%20objects.html" aria-label="Global objects"><!---->Global objects<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/HTTP.html" aria-label="HTTP"><!---->HTTP<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/HTTPS.html" aria-label="HTTPS"><!---->HTTPS<!----></a></li><li><a class="route-link route-link-active auto-link vp-sidebar-link active" href="/document/node-doc/Inspector.html" aria-label="Inspector"><!---->Inspector<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Internationalization%20support.html" aria-label="Internationalization support"><!---->Internationalization support<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Modules-CommonJS%20modules.html" aria-label="Modules: CommonJS modules"><!---->Modules: CommonJS modules<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Modules-ECMAScript%20modules.html" aria-label="Modules: ECMAScript modules"><!---->Modules: ECMAScript modules<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Modules-node_module%20API.html" aria-label="Modules: node:module API"><!---->Modules: node:module API<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Modules-Packages.html" aria-label="Modules: Packages"><!---->Modules: Packages<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Net.html" aria-label="Net"><!---->Net<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Node-API.html" aria-label="Node-API"><!---->Node-API<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/OS.html" aria-label="OS"><!---->OS<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Path.html" aria-label="Path"><!---->Path<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Performance%20measurement%20APIs.html" aria-label="Performance measurement APIs"><!---->Performance measurement APIs<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Permissions.html" aria-label="Permissions"><!---->Permissions<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Process.html" aria-label="Process"><!---->Process<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Punycode.html" aria-label="Punycode"><!---->Punycode<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Query%20string.html" aria-label="Query string"><!---->Query string<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Readline.html" aria-label="Readline"><!---->Readline<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/REPL.html" aria-label="REPL"><!---->REPL<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Stream.html" aria-label="Stream"><!---->Stream<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/String%20decoder.html" aria-label="String decoder"><!---->String decoder<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Test%20runner.html" aria-label="Test runner"><!---->Test runner<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Timers.html" aria-label="Timers"><!---->Timers<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/TLS%20(SSL).html" aria-label="TLS (SSL)"><!---->TLS (SSL)<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Trace%20events.html" aria-label="Trace events"><!---->Trace events<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/TTY.html" aria-label="TTY"><!---->TTY<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/URL.html" aria-label="URL"><!---->URL<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Util.html" aria-label="Util"><!---->Util<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/V8.html" aria-label="V8"><!---->V8<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/VM%20(executing%20JavaScript).html" aria-label="VM (executing JavaScript)"><!---->VM (executing JavaScript)<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Web%20Crypto%20API.html" aria-label="Web Crypto API"><!---->Web Crypto API<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Web%20Streams%20API.html" aria-label="Web Streams API"><!---->Web Streams API<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/WebAssembly%20System%20Interface%20(WASI).html" aria-label="WebAssembly System Interface (WASI)"><!---->WebAssembly System Interface (WASI)<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Worker%20threads.html" aria-label="Worker threads"><!---->Worker threads<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Zlib.html" aria-label="Zlib"><!---->Zlib<!----></a></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->Inspector</h1><div class="page-info"><span class="page-author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon" name="author"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://hanekawa.top" target="_blank" rel="noopener noreferrer">hanekawa-shiki</a></span><span property="author" content="hanekawa-shiki"></span></span><!----><span class="page-date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2024-06-21T09:46:17.000Z"></span><!----><!----><span class="page-reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 69 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT69M"></span><span class="page-word-info" aria-label="å­—æ•°ğŸ” " data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon word-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="word icon" name="word"><path d="M518.217 432.64V73.143A73.143 73.143 0 01603.43 1.097a512 512 0 01419.474 419.474 73.143 73.143 0 01-72.046 85.212H591.36a73.143 73.143 0 01-73.143-73.143z"></path><path d="M493.714 566.857h340.297a73.143 73.143 0 0173.143 85.577A457.143 457.143 0 11371.566 117.76a73.143 73.143 0 0185.577 73.143v339.383a36.571 36.571 0 0036.571 36.571z"></path></svg><span>çº¦ 20613 å­—</span><meta property="wordCount" content="20613"></span><!----></div><hr></div><div class="vp-toc-placeholder"><aside id="toc"><!----><div class="vp-toc-header">æ­¤é¡µå†…å®¹<button type="button" class="print-button" title="æ‰“å°"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon" name="print"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button><div class="arrow end"></div></div><div class="vp-toc-wrapper"><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å¦‚ä½•å·¥ä½œ">å¦‚ä½•å·¥ä½œï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…åº”ç”¨ä¾‹å­">å®é™…åº”ç”¨ä¾‹å­</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#æ€»ç»“">æ€»ç»“</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#promises-api">Promises API</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä»€ä¹ˆæ˜¯-promise">ä»€ä¹ˆæ˜¯ Promise?</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#promise-çš„åŸºæœ¬ç”¨æ³•">Promise çš„åŸºæœ¬ç”¨æ³•</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…è¿ç”¨çš„ä¾‹å­">å®é™…è¿ç”¨çš„ä¾‹å­</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ç»“è®º">ç»“è®º</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#class-inspector-session">Class: inspector.Session</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#åˆ›å»ºå’Œä½¿ç”¨-inspector-session">åˆ›å»ºå’Œä½¿ç”¨ inspector.Session</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä¾‹å­">ä¾‹å­</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#new-inspector-session-1">new inspector.Session()</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å¦‚ä½•ä½¿ç”¨">å¦‚ä½•ä½¿ç”¨ï¼š</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#inspector-æ¨¡å—ç®€ä»‹">Inspector æ¨¡å—ç®€ä»‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#session-connecttomainthread-æ–¹æ³•">session.connectToMainThread() æ–¹æ³•</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä½¿ç”¨å®ä¾‹">ä½¿ç”¨å®ä¾‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å…³é”®æ¦‚å¿µ">å…³é”®æ¦‚å¿µ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#session-post-method-params-è§£é‡Š">session.post(method[, params]) è§£é‡Š</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…è¿ç”¨çš„ä¾‹å­-1">å®é™…è¿ç”¨çš„ä¾‹å­</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…è¿ç”¨ç¤ºä¾‹">å®é™…è¿ç”¨ç¤ºä¾‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®ç”¨ç¤ºä¾‹-è°ƒè¯•-express-åº”ç”¨">å®ç”¨ç¤ºä¾‹ï¼šè°ƒè¯• Express åº”ç”¨</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä»€ä¹ˆæ˜¯-cpu-profiler">ä»€ä¹ˆæ˜¯ CPU Profilerï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å¦‚ä½•ä½¿ç”¨-1">å¦‚ä½•ä½¿ç”¨ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…è¿ç”¨ç¤ºä¾‹-1">å®é™…è¿ç”¨ç¤ºä¾‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#heap-profiler-çš„ä½œç”¨">Heap Profiler çš„ä½œç”¨</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…åº”ç”¨ä¾‹å­-1">å®é™…åº”ç”¨ä¾‹å­</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å¦‚ä½•ä½¿ç”¨-2">å¦‚ä½•ä½¿ç”¨</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#callback-api">Callback API</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#callback-api-1">Callback API</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä½¿ç”¨å®ä¾‹-1">ä½¿ç”¨å®ä¾‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#æ€»ç»“-1">æ€»ç»“</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#class-inspector-session-1">Class: inspector.Session</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#åŸºæœ¬æ¦‚å¿µ">åŸºæœ¬æ¦‚å¿µ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#inspector-sessionçš„ä½œç”¨">inspector.Sessionçš„ä½œç”¨</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…è¿ç”¨ç¤ºä¾‹-2">å®é™…è¿ç”¨ç¤ºä¾‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ç»“è®º-1">ç»“è®º</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#åŸºç¡€çŸ¥è¯†">åŸºç¡€çŸ¥è¯†</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#event-inspectornotification-2">Event: &#39;inspectorNotification&#39;</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…åº”ç”¨ä¾‹å­-2">å®é™…åº”ç”¨ä¾‹å­</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å°ç»“">å°ç»“</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#äº‹ä»¶-lt-inspector-protocol-method-gt">äº‹ä»¶ï¼š&amp;lt;inspector-protocol-method&amp;gt;</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-node-js-ç®€ä»‹">1. Node.js ç®€ä»‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-inspector-æ¨¡å—">2. Inspector æ¨¡å—</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3-ä¼šè¯-session">3. ä¼šè¯ï¼ˆSessionï¼‰</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#session-connect-2">session.connect()</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…åº”ç”¨ç¤ºä¾‹">å®é™…åº”ç”¨ç¤ºä¾‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å°ç»“-1">å°ç»“</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#åŸºç¡€æ¦‚å¿µ">åŸºç¡€æ¦‚å¿µ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#session-connecttomainthread-2">session.connectToMainThread()</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…è¿ç”¨ä¾‹å­-1">å®é™…è¿ç”¨ä¾‹å­</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…è¿ç”¨ç¤ºä¾‹-3">å®é™…è¿ç”¨ç¤ºä¾‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä½¿ç”¨ä»£ç ç¤ºä¾‹">ä½¿ç”¨ä»£ç ç¤ºä¾‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#åŸºæœ¬è¯­æ³•">åŸºæœ¬è¯­æ³•</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…è¿ç”¨ç¤ºä¾‹-4">å®é™…è¿ç”¨ç¤ºä¾‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#åŸºæœ¬æ¦‚å¿µ-1">åŸºæœ¬æ¦‚å¿µ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä½¿ç”¨å®ä¾‹-2">ä½¿ç”¨å®ä¾‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#heap-profiler-ç®€ä»‹">Heap Profiler ç®€ä»‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…è¿ç”¨ä¸¾ä¾‹">å®é™…è¿ç”¨ä¸¾ä¾‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#æ€æ ·ä½¿ç”¨">æ€æ ·ä½¿ç”¨ï¼Ÿ</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#common-objects">Common Objects</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä»€ä¹ˆæ˜¯inspectoræ¨¡å—">ä»€ä¹ˆæ˜¯inspectoræ¨¡å—ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#common-objectsçš„æ¦‚å¿µ">Common Objectsçš„æ¦‚å¿µ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#æ€»ç»“-2">æ€»ç»“</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#inspector-close">inspector.close()</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…åº”ç”¨ä¾‹å­-4">å®é™…åº”ç”¨ä¾‹å­</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#inspector-console">inspector.console</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…è¿ç”¨ç¤ºä¾‹-5">å®é™…è¿ç”¨ç¤ºä¾‹ï¼š</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å¦‚ä½•ä½¿ç”¨-3">å¦‚ä½•ä½¿ç”¨ï¼š</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#inspector-open-port-host-wait">inspector.open([port[, host[, wait]]])</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å‚æ•°è§£é‡Š">å‚æ•°è§£é‡Š</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…è¿ç”¨ç¤ºä¾‹-6">å®é™…è¿ç”¨ç¤ºä¾‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#inspector-url">inspector.url()</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…è¿ç”¨ä¾‹å­-2">å®é™…è¿ç”¨ä¾‹å­</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä½¿ç”¨-inspector-url-çš„æ³¨æ„äº‹é¡¹">ä½¿ç”¨ inspector.url() çš„æ³¨æ„äº‹é¡¹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#inspector-waitfordebugger">inspector.waitForDebugger()</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…è¿ç”¨ä¾‹å­-3">å®é™…è¿ç”¨ä¾‹å­</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#support-of-breakpoints">Support of breakpoints</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#node-js-ä¸­çš„æ–­ç‚¹æ”¯æŒ">Node.js ä¸­çš„æ–­ç‚¹æ”¯æŒ</a></li><!----><!--]--></ul></li><!--]--></ul><div class="vp-toc-marker" style="top:-1.7rem;"></div></div><!----></aside></div><!----><div class="theme-hope-content"><h1 id="inspector" tabindex="-1"><a class="header-anchor" href="#inspector"><span><a href="https://nodejs.org/docs/latest/api/inspector.html#inspector" target="_blank" rel="noopener noreferrer">Inspector</a></span></a></h1><p>Node.js çš„ Inspector æ¨¡å—æä¾›äº†ä¸€ç§æ–¹å¼ï¼Œå¯ä»¥è®©å¼€å‘è€…å¯¹ Node.js åº”ç”¨è¿›è¡Œæ£€æŸ¥å’Œè°ƒè¯•ã€‚å®ƒæ˜¯åŸºäº Chrome DevTools Protocolï¼ˆChrome å¼€å‘è€…å·¥å…·åè®®ï¼‰å®ç°çš„ï¼Œå…è®¸å¼€å‘è€…ä½¿ç”¨ç±»ä¼¼äºåœ¨ Chrome æµè§ˆå™¨ä¸­è°ƒè¯• JavaScript çš„ä½“éªŒæ¥è°ƒè¯• Node.js åº”ç”¨ã€‚</p><p>ç®€å•æ¥è¯´ï¼Œè¿™ä¸ªæ¨¡å—ä½¿å¾—ä½ å¯ä»¥æ·±å…¥åˆ°ä½ çš„åº”ç”¨è¿è¡Œæ—¶çš„å†…éƒ¨æœºåˆ¶ï¼Œå¸®åŠ©ä½ æ£€æµ‹é—®é¢˜ã€ç›‘æ§æ€§èƒ½ã€æŸ¥çœ‹å˜é‡å€¼ç­‰ç­‰ã€‚</p><h3 id="å¦‚ä½•å·¥ä½œ" tabindex="-1"><a class="header-anchor" href="#å¦‚ä½•å·¥ä½œ"><span>å¦‚ä½•å·¥ä½œï¼Ÿ</span></a></h3><p>å½“ä½ å¯åŠ¨ Node.js åº”ç”¨æ—¶ï¼Œå¯ä»¥é€šè¿‡ä¸€äº›ç‰¹å®šå‚æ•°ï¼ˆä¾‹å¦‚ <code>--inspect</code> æˆ– <code>--inspect-brk</code>ï¼‰æ¥æ¿€æ´» Inspectorã€‚è¿™æ ·åšä¼šæ‰“å¼€ä¸€ä¸ª WebSocket æœåŠ¡å™¨ï¼Œç­‰å¾…è°ƒè¯•å®¢æˆ·ç«¯ï¼ˆå¦‚ Chrome æµè§ˆå™¨æˆ– VS Codeï¼‰çš„è¿æ¥ã€‚</p><ul><li>ä½¿ç”¨ <code>--inspect</code> å‚æ•°å¯åŠ¨æ—¶ï¼Œä½ çš„åº”ç”¨ä¼šæ­£å¸¸è¿è¡Œï¼Œä½ å¯ä»¥åœ¨ä»»ä½•æ—¶å€™è¿æ¥è°ƒè¯•å™¨ã€‚</li><li>è€Œä½¿ç”¨ <code>--inspect-brk</code> å‚æ•°ï¼Œåˆ™ä¼šåœ¨ç¨‹åºçš„æœ€å¼€å§‹å¤„æ‰“ä¸Šä¸€ä¸ªæ–­ç‚¹ï¼Œç­‰å¾…è°ƒè¯•å™¨è¿æ¥åå†ç»§ç»­æ‰§è¡Œã€‚</li></ul><p>ä¸€æ—¦è°ƒè¯•å®¢æˆ·ç«¯è¿æ¥ä¸Šäº†ï¼Œä½ å°±å¯ä»¥å¼€å§‹è°ƒè¯•ä½ çš„ä»£ç äº†ï¼šè®¾ç½®æ–­ç‚¹ã€å•æ­¥æ‰§è¡Œä»£ç ã€æŸ¥çœ‹å’Œä¿®æ”¹å˜é‡å€¼ç­‰ã€‚</p><h3 id="å®é™…åº”ç”¨ä¾‹å­" tabindex="-1"><a class="header-anchor" href="#å®é™…åº”ç”¨ä¾‹å­"><span>å®é™…åº”ç”¨ä¾‹å­</span></a></h3><ol><li><p><strong>è°ƒè¯•æ­£åœ¨è¿è¡Œçš„æœåŠ¡</strong></p><p>å‡è®¾ä½ æœ‰ä¸€ä¸ª Node.js å†™çš„ web æœåŠ¡ï¼Œå®ƒå¶å°”ä¼šå‡ºç°ä¸€äº›é¢„æ–™ä¹‹å¤–çš„é”™è¯¯ã€‚ä½ å¯ä»¥é‡å¯ä½ çš„æœåŠ¡ï¼Œå¹¶åŠ ä¸Š <code>--inspect</code> å‚æ•°æ¥å¯åŠ¨å®ƒã€‚ç„¶åæ‰“å¼€ Chrome æµè§ˆå™¨ï¼Œè¾“å…¥ <code>chrome://inspect</code>ï¼Œæ‰¾åˆ°ä½ çš„æœåŠ¡å¹¶è¿›è¡Œè°ƒè¯•ã€‚</p></li><li><p><strong>æ€§èƒ½åˆ†æ</strong></p><p>ä½ å¯èƒ½æƒ³çŸ¥é“ä½ çš„åº”ç”¨åœ¨å¤„ç†è¯·æ±‚æ—¶æ¶ˆè€—äº†å¤šå°‘æ—¶é—´ï¼Œæˆ–è€…å“ªä¸€éƒ¨åˆ†ä»£ç å¯¼è‡´äº†æ€§èƒ½ç“¶é¢ˆã€‚é€šè¿‡ Inspectorï¼Œä½ å¯ä»¥è·å–åˆ°è¯¦ç»†çš„æ€§èƒ½æŠ¥å‘Šï¼Œæ‰¾åˆ°ä¼˜åŒ–çš„æ–¹å‘ã€‚</p></li><li><p><strong>å†…å­˜æ³„æ¼è¯Šæ–­</strong></p><p>å½“ä½ çš„åº”ç”¨è¿è¡Œä¸€æ®µæ—¶é—´åï¼Œå¦‚æœå‘ç°å®ƒå ç”¨çš„å†…å­˜åªå¢ä¸å‡ï¼Œå¾ˆå¯èƒ½é‡åˆ°äº†å†…å­˜æ³„æ¼çš„é—®é¢˜ã€‚ä½¿ç”¨ Inspector å¯ä»¥å¸®åŠ©ä½ ç”Ÿæˆå’Œåˆ†æå †å¿«ç…§ï¼Œæ‰¾åˆ°æ³„æ¼çš„æ ¹æºã€‚</p></li></ol><h3 id="æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#æ€»ç»“"><span>æ€»ç»“</span></a></h3><p>Node.js çš„ Inspector æ¨¡å—æ˜¯å¼ºå¤§çš„è°ƒè¯•å·¥å…·ï¼Œä¸ä»…å¯ä»¥å¸®åŠ©å¼€å‘è€…å‘ç°å’Œè§£å†³ä»£ç ä¸­çš„é”™è¯¯ï¼Œè¿˜èƒ½å¯¹åº”ç”¨çš„æ€§èƒ½è¿›è¡Œåˆ†æã€‚å³ä½¿ä½ æ˜¯ç¼–ç¨‹æ–°æ‰‹ï¼Œåˆ©ç”¨è¿™ä¸ªå·¥å…·ä¹Ÿå¯ä»¥å¤§å¤§æé«˜ä½ è§£å†³é—®é¢˜çš„æ•ˆç‡ã€‚é€šè¿‡å®è·µå’Œåº”ç”¨è¿™äº›æŠ€å·§ï¼Œä½ å°†èƒ½æ›´æ·±å…¥åœ°ç†è§£ä½ çš„åº”ç”¨åŠå…¶è¿è¡Œæœºåˆ¶ã€‚</p><h2 id="promises-api" tabindex="-1"><a class="header-anchor" href="#promises-api"><span><a href="https://nodejs.org/docs/latest/api/inspector.html#promises-api" target="_blank" rel="noopener noreferrer">Promises API</a></span></a></h2><p>Node.js çš„ Promises API æ˜¯ä¸€ä¸ªç”¨äºå¤„ç† JavaScript å¼‚æ­¥æ“ä½œçš„å·¥å…·ã€‚åœ¨ Node.js v21.7.1 çš„æ–‡æ¡£ä¸­ï¼Œæåˆ°çš„â€œPromises APIâ€å®é™…ä¸Šå¯èƒ½æ˜¯ä¸€ä¸ªè¯¯è§£æˆ–è€…æ··æ·†ï¼Œå› ä¸ºç›´æ¥åœ¨ Node.js æ–‡æ¡£ä¸­æœç´¢è¿™ä¸€èŠ‚å¹¶ä¸å®¹æ˜“æ‰¾åˆ°ç‰¹å®šçš„â€œPromises APIâ€éƒ¨åˆ†ã€‚æ›´å¯èƒ½çš„æ˜¯ï¼Œè¿™é‡ŒæŒ‡çš„æ˜¯åœ¨ Node.js ä¸­ä½¿ç”¨ Promise ç›¸å…³åŠŸèƒ½å’Œæ”¹è¿›ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå•ç‹¬çš„ API éƒ¨åˆ†ã€‚Node.js å†…ç½®æ”¯æŒ Promiseï¼Œè¿™æ˜¯ ECMAScript æ ‡å‡†çš„ä¸€éƒ¨åˆ†ï¼ŒNode.js éšç‰ˆæœ¬æ›´æ–°è€Œä¸æ–­åŠ å¼ºå¯¹ Promise çš„æ”¯æŒã€‚</p><h3 id="ä»€ä¹ˆæ˜¯-promise" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯-promise"><span>ä»€ä¹ˆæ˜¯ Promise?</span></a></h3><p>åœ¨æ·±å…¥è§£é‡Šä¹‹å‰ï¼Œè®©æˆ‘ä»¬å…ˆäº†è§£ä¸€ä¸‹ Promise æ˜¯ä»€ä¹ˆã€‚Promise æ˜¯ JavaScript ä¸­ç”¨äºå¤„ç†å¼‚æ­¥æ“ä½œçš„å¯¹è±¡ã€‚å®ƒä»£è¡¨äº†æŸä¸ªå°šæœªå®Œæˆä½†é¢„æœŸå°†æ¥ä¼šå®Œæˆçš„æ“ä½œçš„ç»“æœã€‚Promise æœ‰ä¸‰ç§çŠ¶æ€ï¼š</p><ul><li>Pendingï¼ˆè¿›è¡Œä¸­ï¼‰: åˆå§‹çŠ¶æ€ï¼Œæ—¢ä¸æ˜¯æˆåŠŸï¼Œä¹Ÿä¸æ˜¯å¤±è´¥ã€‚</li><li>Fulfilledï¼ˆå·²æˆåŠŸï¼‰: è¡¨ç¤ºæ“ä½œæˆåŠŸå®Œæˆã€‚</li><li>Rejectedï¼ˆå·²å¤±è´¥ï¼‰: è¡¨ç¤ºæ“ä½œå¤±è´¥ã€‚</li></ul><h3 id="promise-çš„åŸºæœ¬ç”¨æ³•" tabindex="-1"><a class="header-anchor" href="#promise-çš„åŸºæœ¬ç”¨æ³•"><span>Promise çš„åŸºæœ¬ç”¨æ³•</span></a></h3><p>åˆ›å»ºä¸€ä¸ª Promise:</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> promise</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#8FBCBB;"> Promise</span><span style="color:#D8DEE9FF;">(</span><span style="color:#81A1C1;">function</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">resolve</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> reject</span><span style="color:#ECEFF4;">)</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#616E88;">    // å¼‚æ­¥æ“ä½œä»£ç </span></span>
<span class="line"><span style="color:#81A1C1;">    if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#616E88;">/* æ“ä½œæˆåŠŸ */</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#88C0D0;">        resolve</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">value</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // æˆåŠŸæ—¶è°ƒç”¨</span></span>
<span class="line"><span style="color:#ECEFF4;">    }</span><span style="color:#81A1C1;"> else</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#88C0D0;">        reject</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">error</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // å¤±è´¥æ—¶è°ƒç”¨</span></span>
<span class="line"><span style="color:#ECEFF4;">    }</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä½¿ç”¨ Promise:</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#D8DEE9;">promise</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">then</span><span style="color:#D8DEE9FF;">(</span></span>
<span class="line"><span style="color:#81A1C1;">  function</span><span style="color:#ECEFF4;"> (</span><span style="color:#D8DEE9;">result</span><span style="color:#ECEFF4;">)</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#616E88;">    /* å¤„ç†æˆåŠŸçš„ç»“æœ */</span></span>
<span class="line"><span style="color:#ECEFF4;">  },</span></span>
<span class="line"><span style="color:#81A1C1;">  function</span><span style="color:#ECEFF4;"> (</span><span style="color:#D8DEE9;">error</span><span style="color:#ECEFF4;">)</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#616E88;">    /* å¤„ç†å¤±è´¥çš„æƒ…å†µ */</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span></span>
<span class="line"><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="å®é™…è¿ç”¨çš„ä¾‹å­" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨çš„ä¾‹å­"><span>å®é™…è¿ç”¨çš„ä¾‹å­</span></a></h3><h4 id="ä¾‹å­-1-è¯»å–æ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#ä¾‹å­-1-è¯»å–æ–‡ä»¶"><span>ä¾‹å­ 1: è¯»å–æ–‡ä»¶</span></a></h4><p>å‡è®¾ä½ æƒ³å¼‚æ­¥è¯»å–ä¸€ä¸ªæ–‡ä»¶çš„å†…å®¹ï¼Œåœ¨ Node.js ä¸­å¯ä»¥ä½¿ç”¨<code>fs.promises.readFile</code>ï¼Œè¿™ä¼šè¿”å›ä¸€ä¸ª Promiseï¼Œå½“æ–‡ä»¶è¯»å–å®Œæˆæ—¶ä¼šè¢« resolveã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> fs</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">fs</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">promises</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">async</span><span style="color:#81A1C1;"> function</span><span style="color:#88C0D0;"> readFile</span><span style="color:#ECEFF4;">()</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  try</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">    const</span><span style="color:#D8DEE9;"> content</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> await</span><span style="color:#D8DEE9;"> fs</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">readFile</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">example.txt</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">utf8</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">content</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span><span style="color:#81A1C1;"> catch</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">error</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">error</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">è¯»å–æ–‡ä»¶å‡ºé”™:</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> error</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88C0D0;">readFile</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="ä¾‹å­-2-ç½‘ç»œè¯·æ±‚" tabindex="-1"><a class="header-anchor" href="#ä¾‹å­-2-ç½‘ç»œè¯·æ±‚"><span>ä¾‹å­ 2: ç½‘ç»œè¯·æ±‚</span></a></h4><p>å‘é€ç½‘ç»œè¯·æ±‚æ˜¯å¦ä¸€ä¸ªå¸¸è§çš„å¼‚æ­¥æ“ä½œã€‚ä½¿ç”¨<code>fetch</code>ï¼ˆæ³¨æ„ï¼š<code>fetch</code>åœ¨ Node.js ä¸­éœ€è¦é¢å¤–å®‰è£…ç›¸åº”çš„åº“ï¼Œå¦‚<code>node-fetch</code>ï¼‰è¿”å›ä¸€ä¸ª Promise å¯¹è±¡ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> fetch</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">node-fetch</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">async</span><span style="color:#81A1C1;"> function</span><span style="color:#88C0D0;"> getUser</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">userId</span><span style="color:#ECEFF4;">)</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  try</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">    const</span><span style="color:#D8DEE9;"> response</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> await</span><span style="color:#88C0D0;"> fetch</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">`</span><span style="color:#A3BE8C;">https://api.example.com/users/</span><span style="color:#81A1C1;">${</span><span style="color:#D8DEE9;">userId</span><span style="color:#81A1C1;">}</span><span style="color:#ECEFF4;">`</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">    const</span><span style="color:#D8DEE9;"> userData</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> await</span><span style="color:#D8DEE9;"> response</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">json</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">userData</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span><span style="color:#81A1C1;"> catch</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">error</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">error</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">è·å–ç”¨æˆ·æ•°æ®å¤±è´¥:</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> error</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88C0D0;">getUser</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">1</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ç»“è®º" tabindex="-1"><a class="header-anchor" href="#ç»“è®º"><span>ç»“è®º</span></a></h3><p>Promise æ˜¯å¤„ç† JavaScript å¼‚æ­¥æ“ä½œçš„å¼ºå¤§å·¥å…·ï¼Œé€šè¿‡å°†å›è°ƒå‡½æ•°è½¬æ¢æˆé“¾å¼è°ƒç”¨ï¼Œä½¿å¾—å¼‚æ­¥ä»£ç æ›´å®¹æ˜“ç†è§£å’Œç»´æŠ¤ã€‚Node.js ä½œä¸ºä¸€ä¸ª JavaScript è¿è¡Œæ—¶ï¼Œå……åˆ†åˆ©ç”¨ Promise æ¥æ”¯æŒéé˜»å¡ I/O æ“ä½œï¼Œä»è€Œæé«˜æ€§èƒ½å’Œæ•ˆç‡ã€‚</p><h3 id="class-inspector-session" tabindex="-1"><a class="header-anchor" href="#class-inspector-session"><span><a href="https://nodejs.org/docs/latest/api/inspector.html#class-inspectorsession" target="_blank" rel="noopener noreferrer">Class: inspector.Session</a></span></a></h3><p>Node.js çš„ <code>inspector.Session</code> ç±»æ˜¯ Node.js æä¾›çš„ä¸€ä¸ªé«˜çº§åŠŸèƒ½ï¼Œå…è®¸å¼€å‘äººå‘˜ä¸ V8 å¼•æ“å†…ç½®çš„æ£€æŸ¥å™¨è¿›è¡Œäº¤äº’ã€‚è¿™ä¸ªåŠŸèƒ½ä¸»è¦ç”¨äºè°ƒè¯•å’Œæ€§èƒ½åˆ†æã€‚ç®€å•æ¥è¯´ï¼Œä½ å¯ä»¥é€šè¿‡è¿™ä¸ªæ¥å£ï¼Œä»¥ç¼–ç¨‹æ–¹å¼æ§åˆ¶å’ŒæŸ¥è¯¢ä½ çš„ Node.js åº”ç”¨ç¨‹åºçš„å†…éƒ¨è¿ä½œã€‚</p><p>è¦ç†è§£ <code>inspector.Session</code>ï¼Œé¦–å…ˆè¦çŸ¥é“ Node.js æ˜¯åŸºäº Chrome çš„ V8 å¼•æ“æ„å»ºçš„ã€‚V8 å¼•æ“æœ‰ä¸€ä¸ªå¼ºå¤§çš„ç‰¹æ€§ï¼Œé‚£å°±æ˜¯å†…ç½®çš„è°ƒè¯•å™¨å’Œåˆ†æå·¥å…·ï¼Œé€šå¸¸æˆ‘ä»¬åœ¨æµè§ˆå™¨ä¸­å¯¹ JavaScript è¿›è¡Œè°ƒè¯•æ—¶ä½¿ç”¨çš„å·¥å…·ã€‚Node.js é€šè¿‡ <code>inspector</code> æ¨¡å—æš´éœ²äº†è¿™äº›åŠŸèƒ½ï¼Œä½¿å¾—æˆ‘ä»¬å¯ä»¥åœ¨æœåŠ¡å™¨ç«¯ä»£ç ä¸­å®ç°ç±»ä¼¼çš„è°ƒè¯•å’Œæ€§èƒ½åˆ†æã€‚</p><h3 id="åˆ›å»ºå’Œä½¿ç”¨-inspector-session" tabindex="-1"><a class="header-anchor" href="#åˆ›å»ºå’Œä½¿ç”¨-inspector-session"><span>åˆ›å»ºå’Œä½¿ç”¨ <code>inspector.Session</code></span></a></h3><p>è¦ä½¿ç”¨ <code>inspector.Session</code>ï¼Œé¦–å…ˆéœ€è¦å¼•å…¥ <code>inspector</code> æ¨¡å—å¹¶åˆ›å»ºä¸€ä¸ª <code>Session</code> å®ä¾‹ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> inspector</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">inspecto</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// åˆ›å»ºä¸€ä¸ªæ–°çš„Sessionå®ä¾‹</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> session</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#D8DEE9;"> inspector</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">Session</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸€æ—¦ä½ æœ‰äº†ä¸€ä¸ª <code>Session</code> å®ä¾‹ï¼Œä½ å¯ä»¥é€šè¿‡å®ƒå‘é€å‘½ä»¤æˆ–è€…æ³¨å†Œäº‹ä»¶ç›‘å¬å™¨æ¥ä¸ Node.js çš„è¿è¡Œæ—¶è¿›è¡Œäº¤äº’ã€‚</p><h3 id="ä¾‹å­" tabindex="-1"><a class="header-anchor" href="#ä¾‹å­"><span>ä¾‹å­</span></a></h3><h4 id="å¼€å¯å’Œå…³é—­-session" tabindex="-1"><a class="header-anchor" href="#å¼€å¯å’Œå…³é—­-session"><span>å¼€å¯å’Œå…³é—­ Session</span></a></h4><p>åœ¨å¼€å§‹å’Œç»“æŸè°ƒè¯•ä¼šè¯æ—¶ï¼Œéœ€è¦å¼€å¯å’Œå…³é—­ <code>Session</code>ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#616E88;">// å¼€å¯ä¼šè¯</span></span>
<span class="line"><span style="color:#D8DEE9;">session</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">connect</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// ä½ çš„è°ƒè¯•ä»£ç ...</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// ç»“æŸä¼šè¯</span></span>
<span class="line"><span style="color:#D8DEE9;">session</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">disconnect</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="ç›‘å¬æ§åˆ¶å°è¾“å‡º" tabindex="-1"><a class="header-anchor" href="#ç›‘å¬æ§åˆ¶å°è¾“å‡º"><span>ç›‘å¬æ§åˆ¶å°è¾“å‡º</span></a></h4><p>å‡è®¾ä½ æƒ³åœ¨ Node.js åº”ç”¨ä¸­æ•è·æ‰€æœ‰çš„æ§åˆ¶å°è¾“å‡ºï¼ˆä¾‹å¦‚ï¼Œ<code>console.log</code> è°ƒç”¨ï¼‰ï¼Œä½ å¯ä»¥è¿™æ ·åšï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#616E88;">// é¦–å…ˆï¼Œè¿æ¥åˆ°ä¼šè¯</span></span>
<span class="line"><span style="color:#D8DEE9;">session</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">connect</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// ç›‘å¬æ§åˆ¶å°æ¶ˆæ¯äº‹ä»¶</span></span>
<span class="line"><span style="color:#D8DEE9;">session</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">on</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Runtime.consoleAPICalled</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> (</span><span style="color:#D8DEE9;">params</span><span style="color:#ECEFF4;">)</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">params</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // æ‰“å°å‡ºæ§åˆ¶å°è°ƒç”¨çš„è¯¦ç»†ä¿¡æ¯</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// ç„¶åï¼Œå‘Šè¯‰ V8 å¼•æ“æˆ‘ä»¬æƒ³è¦ç›‘å¬æ§åˆ¶å°æ¶ˆæ¯</span></span>
<span class="line"><span style="color:#D8DEE9;">session</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">post</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Runtime.enable</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ä¸ªä¾‹å­å±•ç¤ºäº†å¦‚ä½•è®©ä½ çš„ä»£ç â€œç›‘å¬â€åº”ç”¨ç¨‹åºä¸­çš„æ§åˆ¶å°è°ƒç”¨ã€‚è¿™å¯¹äºè¿œç¨‹è°ƒè¯•æˆ–å°†æ—¥å¿—è®°å½•åˆ°ä¸åŒçš„åœ°æ–¹éå¸¸æœ‰ç”¨ã€‚</p><h4 id="æ€§èƒ½åˆ†æ" tabindex="-1"><a class="header-anchor" href="#æ€§èƒ½åˆ†æ"><span>æ€§èƒ½åˆ†æ</span></a></h4><p>ä½ è¿˜å¯ä»¥é€šè¿‡ <code>inspector.Session</code> æ¥æ”¶é›†æ€§èƒ½å‰–ææ•°æ®ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹ä»£ç æ®µå±•ç¤ºäº†å¦‚ä½•å¯åŠ¨å’Œåœæ­¢ CPU æ€§èƒ½å‰–æï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#616E88;">// å¼€å§‹CPUæ€§èƒ½åˆ†æ</span></span>
<span class="line"><span style="color:#D8DEE9;">session</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">post</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Profiler.enable</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> ()</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">  session</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">post</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Profiler.start</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> ()</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#616E88;">    // å‡è®¾è¿™é‡Œæ˜¯ä½ æƒ³è¦åˆ†æçš„ä»£ç ...</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">    // åœ¨ä¸€æ®µæ—¶é—´åï¼Œåœæ­¢åˆ†æå¹¶è·å–ç»“æœ</span></span>
<span class="line"><span style="color:#88C0D0;">    setTimeout</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">()</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">      session</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">post</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Profiler.stop</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> (</span><span style="color:#D8DEE9;">err</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> {</span><span style="color:#D8DEE9;"> profile</span><span style="color:#ECEFF4;"> })</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#616E88;">        // ç°åœ¨ä½ å¯ä»¥å¤„ç† profile å¯¹è±¡ï¼Œä¾‹å¦‚ä¿å­˜åˆ°æ–‡ä»¶æˆ–åˆ†æç“¶é¢ˆ</span></span>
<span class="line"><span style="color:#ECEFF4;">      }</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">    },</span><span style="color:#B48EAD;"> 10000</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // ä¾‹å¦‚ï¼Œ10ç§’å</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™åªæ˜¯ <code>inspector.Session</code> åŠŸèƒ½çš„å†°å±±ä¸€è§’ã€‚é€šè¿‡æ·±å…¥å­¦ä¹ å’Œå®è·µï¼Œä½ å¯ä»¥åˆ©ç”¨è¿™ä¸ªå¼ºå¤§çš„æ¥å£æ‰§è¡Œå¤æ‚çš„è°ƒè¯•ä»»åŠ¡ã€æ€§èƒ½åˆ†æå’Œæ›´å¤šã€‚</p><p>è®°ä½ï¼Œè™½ç„¶ <code>inspector.Session</code> æä¾›äº†å¼ºå¤§çš„èƒ½åŠ›ï¼Œä½†ä¹Ÿéœ€è¦è°¨æ…ä½¿ç”¨ï¼Œå°¤å…¶æ˜¯åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå› ä¸ºå®ƒå¯èƒ½ä¼šå½±å“åº”ç”¨çš„æ€§èƒ½ã€‚</p><h4 id="new-inspector-session" tabindex="-1"><a class="header-anchor" href="#new-inspector-session"><span><a href="https://nodejs.org/docs/latest/api/inspector.html#new-inspectorsession" target="_blank" rel="noopener noreferrer">new inspector.Session()</a></span></a></h4><p>ç†è§£ <code>Node.js</code> å’Œå…¶ä¸­çš„ <code>inspector.Session()</code> ä¹‹å‰ï¼Œè®©æˆ‘ä»¬å…ˆæ¢³ç†ä¸€ä¸‹å‡ ä¸ªåŸºæœ¬æ¦‚å¿µã€‚</p><p><strong>Node.js æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p><p>Node.js ä¸æ˜¯ä¸€é—¨ç¼–ç¨‹è¯­è¨€ï¼Œè€Œæ˜¯ä¸€ä¸ªè¿è¡Œæ—¶ç¯å¢ƒï¼Œå®ƒå…è®¸ä½ ä½¿ç”¨ JavaScript ç¼–å†™æœåŠ¡å™¨ç«¯ä»£ç ã€‚è¿™æ„å‘³ç€ä½ å¯ä»¥ä½¿ç”¨ JavaScript æ¥å¼€å‘åç«¯æœåŠ¡ï¼Œå¤„ç†æ•°æ®åº“æ“ä½œï¼Œæ–‡ä»¶ç³»ç»Ÿæ“ä½œç­‰åç«¯å¸¸è§ä»»åŠ¡ã€‚</p><p><strong>ä»€ä¹ˆæ˜¯ Inspector?</strong></p><p>Inspector æ˜¯ Node.js æä¾›çš„ä¸€ä¸ªæ¨¡å—ï¼Œç”¨äºæä¾›ä¸€ä¸ªä¸ V8 å¼•æ“å†…ç½®çš„è°ƒè¯•å™¨é€šä¿¡çš„æ¥å£ã€‚ç®€å•æ¥è¯´ï¼Œå®ƒå…è®¸ä½ è°ƒè¯•å’Œåˆ†æ Node.js åº”ç”¨ç¨‹åºçš„æ€§èƒ½ã€‚</p><h3 id="new-inspector-session-1" tabindex="-1"><a class="header-anchor" href="#new-inspector-session-1"><span><code>new inspector.Session()</code></span></a></h3><p>å½“ä½ çœ‹åˆ° <code>new inspector.Session()</code>ï¼Œè¿™é‡Œå®é™…ä¸Šæ˜¯åœ¨åˆ›å»ºä¸€ä¸ªæ–°çš„ Inspector ä¼šè¯ã€‚è¿™ä¸ªä¼šè¯å…è®¸ä½ ä¸ Node.js åº”ç”¨ç¨‹åºæ­£åœ¨è¿è¡Œçš„ V8 å¼•æ“è¿›è¡Œäº¤äº’ï¼Œä½¿ä½ èƒ½å¤Ÿè°ƒè¯•ä»£ç ã€æ£€æŸ¥å˜é‡çŠ¶æ€ã€åˆ†ææ€§èƒ½ç­‰ã€‚</p><p><strong>å®é™…åº”ç”¨çš„ä¾‹å­ï¼š</strong></p><ol><li><p><strong>è°ƒè¯•åº”ç”¨ï¼š</strong> å‡è®¾ä½ æ­£åœ¨å¼€å‘ä¸€ä¸ª Node.js åº”ç”¨ç¨‹åºï¼Œå¹¶ä¸”å‘ç°æŸäº›åœ°æ–¹çš„è¡¨ç°å¹¶ä¸æ˜¯ä½ é¢„æœŸçš„ã€‚é€šè¿‡ä½¿ç”¨ Inspector çš„ä¼šè¯ï¼Œä½ å¯ä»¥é€æ­¥æ‰§è¡Œä»£ç ï¼Œè§‚å¯Ÿå˜é‡åœ¨ä¸åŒæ—¶é—´ç‚¹çš„çŠ¶æ€ï¼Œä»è€Œå¸®åŠ©ä½ æ‰¾åˆ°é—®é¢˜æ‰€åœ¨ã€‚</p></li><li><p><strong>æ€§èƒ½åˆ†æï¼š</strong> å¦‚æœä½ æƒ³è¦ä¼˜åŒ–ä½ çš„åº”ç”¨æ€§èƒ½ï¼Œäº†è§£å“ªäº›å‡½æ•°è°ƒç”¨æœ€é¢‘ç¹æˆ–è€…è€—æ—¶æœ€é•¿éå¸¸é‡è¦ã€‚é€šè¿‡å¯åŠ¨ä¸€ä¸ª Inspector ä¼šè¯ï¼Œä½ å¯ä»¥æ”¶é›†å’Œåˆ†ææ€§èƒ½æ•°æ®ï¼Œè¯†åˆ«å‡ºéœ€è¦ä¼˜åŒ–çš„çƒ­ç‚¹ã€‚</p></li><li><p><strong>å†…å­˜æ³„æ¼å®šä½ï¼š</strong> å¯¹äºé•¿æ—¶é—´è¿è¡Œçš„ Node.js åº”ç”¨æ¥è¯´ï¼Œå†…å­˜æ³„æ¼å¯èƒ½ä¼šå¯¼è‡´ä¸¥é‡é—®é¢˜ã€‚é€šè¿‡ Inspector ä¼šè¯ï¼Œä½ å¯ä»¥é‡‡é›†å †å¿«ç…§(heap snapshots)å’Œè¿›è¡Œå †æ¯”è¾ƒï¼Œå¸®åŠ©ä½ è¯†åˆ«å’Œä¿®å¤å†…å­˜æ³„æ¼çš„é—®é¢˜ã€‚</p></li></ol><h3 id="å¦‚ä½•ä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#å¦‚ä½•ä½¿ç”¨"><span>å¦‚ä½•ä½¿ç”¨ï¼š</span></a></h3><ol><li><strong>å¯åŠ¨ä¸€ä¸ª Sessionï¼š</strong></li></ol><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> inspector</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">inspector</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> session</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#D8DEE9;"> inspector</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">Session</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li><strong>è¿æ¥ä¼šè¯ï¼š</strong> åœ¨å¼€å§‹ä½¿ç”¨ä¹‹å‰ï¼Œä½ éœ€è¦è¿æ¥ä¼šè¯ã€‚</li></ol><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#D8DEE9;">session</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">connect</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ol start="3"><li><strong>ä½¿ç”¨äº‹ä»¶ç›‘å¬å’Œå‘½ä»¤å‘é€è¿›è¡Œäº¤äº’ï¼š</strong> ä½ å¯ä»¥ä¸ºç‰¹å®šäº‹ä»¶æ³¨å†Œç›‘å¬å™¨ï¼Œæˆ–è€…å‘ Inspector å‘é€å‘½ä»¤æ¥æ§åˆ¶è°ƒè¯•æµç¨‹ã€‚</li></ol><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#616E88;">// ç›‘å¬ Inspector çš„ Console API è°ƒç”¨</span></span>
<span class="line"><span style="color:#D8DEE9;">session</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">on</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Runtime.consoleAPICalled</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> (</span><span style="color:#D8DEE9;">message</span><span style="color:#ECEFF4;">)</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">message</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å¯åŠ¨ JavaScript åˆ†æå™¨</span></span>
<span class="line"><span style="color:#D8DEE9;">session</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">post</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Profiler.enable</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> ()</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">  session</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">post</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Profiler.start</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> ()</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#616E88;">    // åœ¨è¿™é‡Œæ‰§è¡Œä½ çš„åº”ç”¨ä»£ç ï¼Œç„¶ååœæ­¢åˆ†æå™¨å¹¶è·å–æŠ¥å‘Š...</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li><strong>ç»“æŸä¼šè¯ï¼š</strong> å®Œæˆæ‰€æœ‰æ“ä½œåï¼Œä¸è¦å¿˜è®°æ–­å¼€ä¼šè¯è¿æ¥ã€‚</li></ol><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#D8DEE9;">session</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">disconnect</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>é€šè¿‡ä»¥ä¸Šæ­¥éª¤ï¼Œä½ å°±å¯ä»¥å¼€å§‹ä½¿ç”¨ <code>inspector.Session()</code> æ¥åˆ†æå’Œè°ƒè¯•ä½ çš„ Node.js åº”ç”¨ç¨‹åºäº†ã€‚å¸Œæœ›è¿™äº›ä¿¡æ¯å¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼</p><h4 id="event-inspectornotification" tabindex="-1"><a class="header-anchor" href="#event-inspectornotification"><span><a href="https://nodejs.org/docs/latest/api/inspector.html#event-inspectornotification" target="_blank" rel="noopener noreferrer">Event: &#39;inspectorNotification&#39;</a></span></a></h4><p>Node.js çš„ <code>inspector</code> æ¨¡å—å¯ä»¥è®©å¼€å‘è€…è¿æ¥åˆ°ä¸€ä¸ªè¿è¡Œä¸­çš„ Node.js è¿›ç¨‹æ¥æ‰§è¡Œè°ƒè¯•ä»»åŠ¡ã€‚è¿™æ ·å¼€å‘è€…å¯ä»¥æ£€æŸ¥åº”ç”¨ç¨‹åºçš„ä»£ç ã€è®¾ç½®æ–­ç‚¹ã€è§‚å¯Ÿå˜é‡çš„å€¼ç­‰ã€‚</p><p>åœ¨ Node.js v21.7.1 ä¸­ï¼Œ<code>Event: &#39;inspectorNotification&#39;</code> æ˜¯ <code>inspector</code> æ¨¡å—å‘å‡ºçš„ä¸€ä¸ªäº‹ä»¶ã€‚å½“ä½ å¯ç”¨äº† <code>inspector</code> å¹¶ä¸” Node.js çš„è¿è¡Œç¯å¢ƒæ”¶åˆ°äº†æ¥è‡ªè°ƒè¯•å®¢æˆ·ç«¯ï¼ˆæ¯”å¦‚ Chrome å¼€å‘è€…å·¥å…·ï¼‰çš„ä¸€äº›é€šçŸ¥æ—¶ï¼Œè¿™ä¸ªäº‹ä»¶ä¼šè¢«è§¦å‘ã€‚</p><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ç®€å•çš„ä¾‹å­æ¥ç†è§£å®ƒçš„ç”¨é€”ï¼š</p><p>æƒ³è±¡ä¸€ä¸‹ï¼Œä½ æ­£åœ¨å¼€å‘ä¸€ä¸ª Web æœåŠ¡å™¨ï¼Œå¹¶ä¸”ä½ æƒ³è°ƒè¯•ä¸€äº›å¼‚æ­¥æ“ä½œã€‚ä¸ºæ­¤ï¼Œä½ å¯èƒ½éœ€è¦ä½¿ç”¨ <code>inspector</code> æ¥æ£€æŸ¥æŸäº›ç½‘ç»œè¯·æ±‚æˆ–è€…å®šæ—¶å™¨ç­‰å¼‚æ­¥æ“ä½œã€‚</p><p>ä»¥ä¸‹æ˜¯å¦‚ä½•ç›‘å¬ <code>inspectorNotification</code> äº‹ä»¶çš„ä¸€ä¸ªåŸºæœ¬ä¾‹å­ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#616E88;">// é¦–å…ˆï¼Œä½ éœ€è¦å¼•å…¥ inspector æ¨¡å—</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> inspector</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">inspector</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// åˆ›å»ºä¸€ä¸ª inspector ä¼šè¯</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> session</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#D8DEE9;"> inspector</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">Session</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å¯åŠ¨ä¼šè¯</span></span>
<span class="line"><span style="color:#D8DEE9;">session</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">connect</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// ç›‘å¬ &#39;inspectorNotification&#39; äº‹ä»¶</span></span>
<span class="line"><span style="color:#D8DEE9;">session</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">on</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">inspectorNotification</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> (</span><span style="color:#D8DEE9;">message</span><span style="color:#ECEFF4;">)</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#616E88;">  // è¿™é‡Œçš„ message å¯¹è±¡åŒ…å«äº†ä»è°ƒè¯•å®¢æˆ·ç«¯æ”¶åˆ°çš„é€šçŸ¥ä¿¡æ¯</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">æ”¶åˆ°è°ƒè¯•é€šçŸ¥ï¼š</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> message</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ª setTimeout è°ƒç”¨ï¼Œæˆ‘ä»¬æƒ³è¦è°ƒè¯•è¿™ä¸ªå¼‚æ­¥æ“ä½œ</span></span>
<span class="line"><span style="color:#88C0D0;">setTimeout</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">()</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">è¿™æ˜¯ä¸€ä¸ªå®šæ—¶å™¨å›è°ƒï¼</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">},</span><span style="color:#B48EAD;"> 1000</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// æ³¨æ„ï¼Œä¸ºäº†å®é™…çœ‹åˆ° &#39;inspectorNotification&#39; äº‹ä»¶ï¼Œ</span></span>
<span class="line"><span style="color:#616E88;">// ä½ éœ€è¦ä½¿ç”¨æ”¯æŒ Node.js è°ƒè¯•åè®®çš„å·¥å…·æ¥å‘é€è°ƒè¯•å‘½ä»¤ã€‚</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆå¯¼å…¥äº† <code>inspector</code> æ¨¡å—å¹¶åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„ä¼šè¯ã€‚ç„¶åæˆ‘ä»¬è¿æ¥åˆ°è¿™ä¸ªä¼šè¯å¹¶å¼€å§‹ç›‘å¬ <code>inspectorNotification</code> äº‹ä»¶ã€‚æ¯å½“è°ƒè¯•å®¢æˆ·ç«¯å‘èŠ‚ç‚¹è¿›ç¨‹å‘é€é€šçŸ¥æ—¶ï¼Œæˆ‘ä»¬å°±ä¼šåœ¨æ§åˆ¶å°æ‰“å°è¿™ä¸ªé€šçŸ¥æ¶ˆæ¯ã€‚</p><p>æ³¨æ„ï¼Œè¿™ä¸ªäº‹ä»¶ä¸»è¦æ˜¯ä¾›é«˜çº§ç”¨æˆ·æˆ–è€…å·¥å…·ä½œè€…ä½¿ç”¨ï¼Œæ™®é€šç”¨æˆ·å¾ˆå°‘éœ€è¦ç›´æ¥å¤„ç†è¿™äº›ä½çº§åˆ«çš„ APIã€‚å¤§å¤šæ•°æ—¥å¸¸è°ƒè¯•ä»»åŠ¡éƒ½å¯ä»¥é€šè¿‡åƒ Chrome å¼€å‘è€…å·¥å…·è¿™æ ·çš„å‰ç«¯æ¥æ›´æ–¹ä¾¿åœ°å®Œæˆã€‚</p><p>å¦‚æœä½ æ˜¯ç¼–ç¨‹æ–°æ‰‹ï¼Œä½ å¯èƒ½ä¸éœ€è¦ç«‹å³æ·±å…¥å­¦ä¹  <code>inspector</code> æ¨¡å—ã€‚ä½†äº†è§£å®ƒçš„å­˜åœ¨å’Œä½œç”¨å¯¹äºå°†æ¥è¿›è¡Œå¤æ‚è°ƒè¯•ä»»åŠ¡æ—¶ä¼šå¾ˆæœ‰å¸®åŠ©ã€‚éšç€ä½ çš„ç¼–ç¨‹æŠ€èƒ½æå‡ï¼Œä½ å¯èƒ½ä¼šéœ€è¦æ›´å¼ºå¤§çš„è°ƒè¯•å·¥å…·æ¥å¸®åŠ©ä½ ç†è§£å’Œä¿®å¤ä»£ç ä¸­çš„é—®é¢˜ï¼Œè¿™æ—¶å€™ <code>inspector</code> å°±èƒ½æ´¾ä¸Šç”¨åœºäº†ã€‚</p><h4 id="event-inspector-protocol-method" tabindex="-1"><a class="header-anchor" href="#event-inspector-protocol-method"><span><a href="https://nodejs.org/docs/latest/api/inspector.html#event-inspector-protocol-method" target="_blank" rel="noopener noreferrer">Event: &lt;inspector-protocol-method&gt;;</a></span></a></h4><p>Node.js ä¸­çš„ <code>inspector</code> æ¨¡å—æ˜¯ç”¨äºä¸ Node.js çš„å†…ç½®æ£€æŸ¥å™¨äº¤äº’çš„ï¼Œå®ƒå¯ä»¥è®©ä½ è°ƒè¯•å’Œåˆ†æ Node.js åº”ç”¨ç¨‹åºã€‚é€šå¸¸ï¼Œè¿™ä¸ªæ¨¡å—ä¸ä¼šåœ¨æ—¥å¸¸çš„åº”ç”¨ç¨‹åºå¼€å‘ä¸­ç›´æ¥ä½¿ç”¨ï¼Œè€Œæ˜¯é€šè¿‡åƒ Chrome DevToolsã€Visual Studio Code è¿™æ ·çš„å¼€å‘å·¥å…·æ¥é—´æ¥ä½¿ç”¨ã€‚</p><p>å½“æˆ‘ä»¬è°ˆåˆ° <code>Event: &amp;lt;inspector-protocol-method&amp;gt;;</code> æ—¶ï¼Œæˆ‘ä»¬å®é™…ä¸Šåœ¨è¯´çš„æ˜¯ä¸€ä¸ªäº‹ä»¶ï¼Œåœ¨ Node.js çš„ inspector API ä¸­ï¼Œæ¯å½“æœ‰ä¸€ä¸ª Inspector åè®®çš„æ–¹æ³•è¢«è§¦å‘æ—¶ï¼Œéƒ½ä¼šæ´¾å‘è¿™ä¸ªäº‹ä»¶ã€‚Inspector åè®®æ˜¯ä¸€ç»„ç”¨äºè°ƒè¯•å’Œåˆ†æçš„æ ‡å‡†åŒ–å‘½ä»¤é›†åˆï¼Œå®ƒä»¬å…è®¸å¼€å‘å·¥å…·å‘é€æŒ‡ä»¤ç»™ Node.jsï¼ˆæ¯”å¦‚æŸ¥çœ‹å½“å‰æ‰§è¡Œçš„ä»£ç ã€è®¾ç½®æ–­ç‚¹æˆ–è€…è·å–æ€§èƒ½æ•°æ®ç­‰ï¼‰ã€‚</p><p>ç°åœ¨æ¥ç”¨ä¸€ä¸ªä¾‹å­æ¥è¯´æ˜ï¼š</p><p>å‡è®¾ä½ æ­£åœ¨ä½¿ç”¨ Chrome DevTools å¯¹ Node.js åº”ç”¨ç¨‹åºè¿›è¡Œè°ƒè¯•ã€‚å½“ä½ åœ¨ DevTools ä¸­ç‚¹å‡»ä¸€ä¸ªæŒ‰é’®æ¥è¯·æ±‚ Node.js åº”ç”¨çš„å½“å‰å†…å­˜å¿«ç…§æ—¶ï¼ŒChrome DevTools ä¼šé€šè¿‡ Inspector åè®®å‘ Node.js å‘é€ä¸€ä¸ªå«åš <code>HeapProfiler.takeHeapSnapshot</code> çš„æ–¹æ³•ã€‚Node.js æ”¶åˆ°è¿™ä¸ªè¯·æ±‚åï¼Œä¼šæ¿€å‘ä¸€ä¸ª <code>HeapProfiler.takeHeapSnapshot</code> äº‹ä»¶ã€‚</p><p>å¦‚æœä½ ç›‘å¬äº†è¿™ä¸ªäº‹ä»¶ï¼Œä½ å°±å¯ä»¥å¾—çŸ¥ä½•æ—¶æœ‰ä¸€ä¸ªå †å†…å­˜å¿«ç…§è¯·æ±‚å‘ç”Ÿï¼Œå¹¶ä¸”å¯ä»¥åœ¨è¿™ä¸ªæ—¶åˆ»åšä¸€äº›é¢å¤–çš„æ“ä½œã€‚è¿™é‡Œæœ‰ä¸€ä¸ªç®€åŒ–çš„ä»£ç ç¤ºä¾‹ï¼Œå±•ç¤ºäº†å¦‚ä½•ç›‘å¬è¯¥åè®®æ–¹æ³•äº‹ä»¶ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> inspector</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">inspector</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> session</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#D8DEE9;"> inspector</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">Session</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">session</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">connect</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// ç›‘å¬ç‰¹å®šçš„ inspector åè®®æ–¹æ³•äº‹ä»¶</span></span>
<span class="line"><span style="color:#D8DEE9;">session</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">on</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">HeapProfiler.takeHeapSnapshot</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> ()</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Heap snapshot has been requested!</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// è§¦å‘ä¸€ä¸ªå †å†…å­˜å¿«ç…§ï¼ˆé€šå¸¸æ˜¯ç”±å¤–éƒ¨çš„å¼€å‘å·¥å…·è§¦å‘ï¼‰</span></span>
<span class="line"><span style="color:#D8DEE9;">session</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">post</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">HeapProfiler.takeHeapSnapshot</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆå¯¼å…¥äº† <code>inspector</code> æ¨¡å—ï¼Œå¹¶åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„ <code>Session</code> å®ä¾‹æ¥ä¸ Node.js çš„å†…ç½®æ£€æŸ¥å™¨è¿›è¡Œé€šä¿¡ã€‚ç„¶åæˆ‘ä»¬è¿æ¥åˆ°äº†ä¼šè¯ï¼Œå¹¶ç›‘å¬äº† <code>HeapProfiler.takeHeapSnapshot</code> äº‹ä»¶ã€‚ä¸ºäº†æ¼”ç¤ºå¦‚ä½•è§¦å‘æ­¤äº‹ä»¶ï¼Œæˆ‘ä»¬æ‰‹åŠ¨å‘é€äº†ä¸€ä¸ª <code>takeHeapSnapshot</code> å‘½ä»¤ã€‚</p><p>åœ¨å®è·µä¸­ï¼Œä½ å¯èƒ½ä¸ä¼šç›´æ¥ç¼–å†™è¿™ç§ä»£ç ï¼Œå› ä¸ºå¤§å¤šæ•°æ—¶å€™è¿™äº›éƒ½æ˜¯ç”±ä½ çš„å¼€å‘ç¯å¢ƒï¼ˆåƒ VS Code æˆ– Web æµè§ˆå™¨ï¼‰è‡ªåŠ¨å¤„ç†çš„ã€‚ä½†æ˜¯ï¼Œç†è§£ Node.js çš„ Inspector æ˜¯æ€ä¹ˆå·¥ä½œçš„ï¼Œå¯¹äºæ·±å…¥å­¦ä¹  Node.js çš„è°ƒè¯•å’Œæ€§èƒ½ä¼˜åŒ–æ¥è¯´æ˜¯éå¸¸é‡è¦çš„ã€‚</p><h4 id="session-connect" tabindex="-1"><a class="header-anchor" href="#session-connect"><span><a href="https://nodejs.org/docs/latest/api/inspector.html#sessionconnect" target="_blank" rel="noopener noreferrer">session.connect()</a></span></a></h4><p>å½“æˆ‘ä»¬è°ˆè®º Node.js ä¸­çš„ <code>inspector</code> æ¨¡å—æ—¶ï¼Œæˆ‘ä»¬åœ¨è®¨è®ºçš„æ˜¯ä¸€å¥—ç”¨äºä¸ V8 JavaScript å¼•æ“å†…ç½®çš„è°ƒè¯•å™¨è¿›è¡Œé€šä¿¡çš„ APIã€‚è¿™ä¸ªå¼•æ“æ˜¯ Node.js ä¹‹æ‰€ä»¥èƒ½å¤Ÿæ‰§è¡Œ JavaScript ä»£ç çš„å…³é”®ç»„ä»¶ã€‚<code>inspector</code> æ¨¡å—å…è®¸ä½ ä» JavaScript ä»£ç ä¸­å¯åŠ¨ä¸€ä¸ªè°ƒè¯•ä¼šè¯ï¼Œè¿›è€Œå¯ä»¥æ£€æŸ¥ä»£ç ã€è®¾ç½®æ–­ç‚¹ã€è§‚å¯Ÿå˜é‡ç­‰ã€‚</p><p>åœ¨ Node.js çš„ <code>inspector</code> æ¨¡å—ä¸­ï¼Œ<code>session.connect()</code> æ–¹æ³•ç”¨äºè¿æ¥åˆ°è°ƒè¯•å™¨å¹¶å¼€å§‹ä¸€ä¸ªä¼šè¯ã€‚è¿™é‡Œçš„â€œä¼šè¯â€æŒ‡çš„æ˜¯ä¸¤æ–¹â€”â€”Node.js è¿›ç¨‹å’Œè°ƒè¯•å®¢æˆ·ç«¯ï¼ˆæ¯”å¦‚ Chrome å¼€å‘è€…å·¥å…·ï¼‰ä¹‹é—´æ²Ÿé€šçš„æ¡¥æ¢ã€‚</p><p>è¿™æ˜¯æ€æ ·å·¥ä½œçš„å‘¢ï¼Ÿé¦–å…ˆï¼ŒNode.js è¿›ç¨‹éœ€è¦ä»¥è°ƒè¯•æ¨¡å¼å¯åŠ¨ï¼Œè¿™æ ·å®ƒå°±å¯ä»¥ç›‘å¬è°ƒè¯•æ¶ˆæ¯ã€‚ç„¶åï¼Œä½ å¯ä»¥åˆ›å»ºä¸€ä¸ª <code>InspectorSession</code> å¯¹è±¡ï¼Œå¹¶é€šè¿‡è°ƒç”¨ <code>session.connect()</code> æ¥å¯å»ºç«‹ä¸€ä¸ªè¿æ¥ã€‚è¿æ¥å»ºç«‹åï¼Œä½ å°±å¯ä»¥å‘é€å’Œæ¥æ”¶è°ƒè¯•ä¿¡æ¯äº†ã€‚</p><p>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­æ¥å±•ç¤ºå¦‚ä½•ä½¿ç”¨ <code>session.connect()</code>ï¼š</p><ol><li><p><strong>å¯åŠ¨ Node.js è¿›ç¨‹</strong>ï¼šå‡è®¾ä½ çš„æ–‡ä»¶æ˜¯ <code>app.js</code>ï¼Œä½ éœ€è¦ä»¥è°ƒè¯•æ¨¡å¼å¯åŠ¨å®ƒã€‚åœ¨å‘½ä»¤è¡Œä¸­è¿è¡Œï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span>node --inspect app.js</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p><strong>ç¼–å†™ä»£ç è¿æ¥åˆ°è°ƒè¯•å™¨</strong>ï¼šåœ¨ä½ çš„ <code>app.js</code> æ–‡ä»¶æˆ–å…¶ä»– JavaScript æ–‡ä»¶ä¸­ï¼Œä½ å¯ä»¥ç¼–å†™ä»¥ä¸‹ä»£ç æ¥è¿æ¥åˆ°è°ƒè¯•å™¨ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#616E88;">// å¼•å…¥ inspector æ¨¡å—</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> inspector</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">inspector</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#616E88;">// åˆ›å»ºä¸€ä¸ªè°ƒè¯•ä¼šè¯</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> session</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#D8DEE9;"> inspector</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">Session</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#616E88;">// è¿æ¥åˆ°è°ƒè¯•å™¨ï¼Œè¿™ä¸ªæ“ä½œæ˜¯å¿…é¡»çš„æ‰èƒ½å¼€å§‹å‘é€å’Œæ¥æ”¶è°ƒè¯•ä¿¡æ¯</span></span>
<span class="line"><span style="color:#D8DEE9;">session</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">connect</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// ä½ ç°åœ¨å¯ä»¥ä½¿ç”¨ session.post() æ¥å‘é€æŒ‡ä»¤ï¼Œæˆ–ç›‘å¬äº‹ä»¶</span></span>
<span class="line"><span style="color:#616E88;">// ä¾‹å¦‚ï¼Œç›‘å¬ Console API è°ƒç”¨</span></span>
<span class="line"><span style="color:#D8DEE9;">session</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">on</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">ConsoleAPICalled</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> (</span><span style="color:#D8DEE9;">message</span><span style="color:#ECEFF4;">)</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Console API called:</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> message</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// è®°å¾—åœ¨ä½ å®Œæˆè°ƒè¯•æ´»åŠ¨åæ–­å¼€ä¼šè¯</span></span>
<span class="line"><span style="color:#616E88;">// session.disconnect();</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>è°ƒè¯•ä½ çš„ç¨‹åº</strong>ï¼šä¸€æ—¦ä½ çš„ Node.js ç¨‹åºä»¥è°ƒè¯•æ¨¡å¼è¿è¡Œï¼Œå¹¶ä¸”ä½¿ç”¨ä¸Šè¿°ä»£ç å»ºç«‹äº†è°ƒè¯•ä¼šè¯ï¼Œä½ å°±å¯ä»¥æ‰“å¼€æµè§ˆå™¨çš„å¼€å‘è€…å·¥å…·æ¥è¿æ¥åˆ°ä½ çš„ Node.js åº”ç”¨å¹¶å¼€å§‹è°ƒè¯•äº†ã€‚åœ¨ Chrome æµè§ˆå™¨ä¸­ï¼Œä½ å¯ä»¥è®¿é—® <code>chrome://inspect</code> å¹¶æ‰¾åˆ°ä½ æ­£åœ¨è¿è¡Œçš„ Node.js è¿›ç¨‹ï¼Œç„¶åç‚¹å‡» &quot;inspect&quot;ã€‚</p></li><li><p><strong>äº’åŠ¨å¼è°ƒè¯•</strong>ï¼šç°åœ¨ï¼Œä½ å¯ä»¥åƒè°ƒè¯•å®¢æˆ·ç«¯ç«¯ä»£ç ä¸€æ ·è°ƒè¯•ä½ çš„ Node.js ä»£ç ã€‚è®¾ç½®æ–­ç‚¹ã€å•æ­¥æ‰§è¡Œä»£ç ã€æŸ¥çœ‹å˜é‡çš„å€¼ï¼Œç­‰ç­‰ã€‚</p></li></ol><p>è®°ä½ï¼Œå®é™…åº”ç”¨ä¸­ï¼Œé€šå¸¸ä¸ä¼šåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ç›´æ¥ä½¿ç”¨ <code>inspector</code> æ¨¡å—ï¼Œå› ä¸ºå®ƒæ›´å¤šçš„æ˜¯åœ¨å¼€å‘é˜¶æ®µç”¨äºè°ƒè¯•ç›®çš„ã€‚å¦å¤–ï¼Œåœ¨ä½¿ç”¨ <code>inspector</code> æ¨¡å—æ—¶è¦æ³¨æ„èµ„æºç®¡ç†ï¼Œç¡®ä¿åœ¨ç»“æŸè°ƒè¯•åæ­£ç¡®åœ°æ–­å¼€ä¼šè¯ä»¥é‡Šæ”¾èµ„æºã€‚</p><h4 id="session-connecttomainthread" tabindex="-1"><a class="header-anchor" href="#session-connecttomainthread"><span><a href="https://nodejs.org/docs/latest/api/inspector.html#sessionconnecttomainthread" target="_blank" rel="noopener noreferrer">session.connectToMainThread()</a></span></a></h4><p>Node.js çš„ <code>session.connectToMainThread()</code> æ–¹æ³•æ˜¯åœ¨ Node.js v21.7.1 å¼•å…¥çš„ï¼Œå®ƒå±äº Inspector æ¨¡å—ã€‚ä¸ºäº†ç†è§£è¿™ä¸ªæ–¹æ³•ï¼Œé¦–å…ˆæˆ‘ä»¬éœ€è¦äº†è§£ä¸€ä¸‹ Inspector æ¨¡å—å’Œå®ƒçš„ç”¨é€”ã€‚</p><h3 id="inspector-æ¨¡å—ç®€ä»‹" tabindex="-1"><a class="header-anchor" href="#inspector-æ¨¡å—ç®€ä»‹"><span>Inspector æ¨¡å—ç®€ä»‹</span></a></h3><p>Inspector æ¨¡å—å…è®¸ç”¨æˆ·é€šè¿‡ WebSocket æˆ–è€…å…¶ä»–æ–¹å¼è¿æ¥åˆ° Node.js å®ä¾‹è¿›è¡Œè°ƒè¯•æˆ–è€…æ£€æŸ¥è¿è¡Œä¸­çš„ä»£ç ã€‚è¿™å¯¹äºå¼€å‘å¤§å‹åº”ç”¨éå¸¸æœ‰å¸®åŠ©ï¼Œå› ä¸ºå®ƒå…è®¸å¼€å‘è€…åœ¨ä»£ç æ‰§è¡Œè¿‡ç¨‹ä¸­æ£€æŸ¥å˜é‡çš„çŠ¶æ€ã€è°ƒç”¨å †æ ˆï¼Œä»¥åŠä½¿ç”¨æ–­ç‚¹æ¥æš‚åœä»£ç çš„æ‰§è¡Œç­‰ã€‚</p><h3 id="session-connecttomainthread-æ–¹æ³•" tabindex="-1"><a class="header-anchor" href="#session-connecttomainthread-æ–¹æ³•"><span>session.connectToMainThread() æ–¹æ³•</span></a></h3><p><code>session.connectToMainThread()</code> æ˜¯åœ¨ Inspector API ä¸­ä½¿ç”¨çš„ä¸€ä¸ªæ–¹æ³•ï¼Œç›®çš„æ˜¯è¿æ¥åˆ° Node.js ä¸»çº¿ç¨‹å¹¶å¯åŠ¨ä¼šè¯ï¼Œè¿™æ ·å°±å¯ä»¥å¯¹å…¶è¿›è¡Œè°ƒæŸ¥æˆ–è°ƒè¯•ã€‚åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼ˆä¾‹å¦‚ä½¿ç”¨ Worker çº¿ç¨‹ï¼‰ï¼Œè¿™ä¸ªæ–¹æ³•ç‰¹åˆ«æœ‰ç”¨ï¼Œå› ä¸ºå®ƒå¯ä»¥å¸®åŠ©ä½ æŠŠè°ƒè¯•ä¼šè¯ä»å½“å‰çº¿ç¨‹ï¼ˆå¯èƒ½æ˜¯ä¸€ä¸ªå·¥ä½œçº¿ç¨‹ï¼‰è¿æ¥å›ä¸»çº¿ç¨‹ã€‚</p><h3 id="ä½¿ç”¨å®ä¾‹" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨å®ä¾‹"><span>ä½¿ç”¨å®ä¾‹</span></a></h3><p>å‡è®¾ä½ æ­£åœ¨å¼€å‘ä¸€ä¸ª Node.js åº”ç”¨ï¼Œè¯¥åº”ç”¨ä½¿ç”¨äº† Worker çº¿ç¨‹æ¥å¤„ç†ä¸€äº›è®¡ç®—å¯†é›†å‹çš„ä»»åŠ¡ï¼Œæ¯”å¦‚å›¾åƒå¤„ç†æˆ–è€…å¤§æ•°æ®åˆ†æã€‚ä½†æ˜¯ï¼Œåœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œä½ é‡åˆ°äº†ä¸€ä¸ªé—®é¢˜ï¼šä½ æ— æ³•ç›´æ¥åœ¨å·¥ä½œçº¿ç¨‹ä¸Šè°ƒè¯•ä½ çš„ä»£ç ï¼Œå› ä¸ºä¸»è¦çš„è°ƒè¯•å·¥å…·å’Œç¯å¢ƒéƒ½é›†ä¸­åœ¨ä¸»çº¿ç¨‹ã€‚</p><p>è¿™æ—¶å€™ï¼Œ<code>session.connectToMainThread()</code> å°±æ˜¾å¾—éå¸¸é‡è¦äº†ã€‚ä½ å¯ä»¥åœ¨ä½ çš„å·¥ä½œçº¿ç¨‹ä¸­åˆ›å»ºä¸€ä¸ª Inspector ä¼šè¯ï¼Œå¹¶ä½¿ç”¨è¿™ä¸ªæ–¹æ³•å°†è¿™ä¸ªä¼šè¯è¿æ¥åˆ°ä¸»çº¿ç¨‹ã€‚è¿™æ ·ï¼Œä½ å°±èƒ½åˆ©ç”¨ Node.js æä¾›çš„æ‰€æœ‰è°ƒè¯•å·¥å…·æ¥è°ƒè¯•è¿è¡Œåœ¨å·¥ä½œçº¿ç¨‹ä¸Šçš„ä»£ç äº†ã€‚</p><h4 id="ç¤ºä¾‹ä»£ç " tabindex="-1"><a class="header-anchor" href="#ç¤ºä¾‹ä»£ç "><span>ç¤ºä¾‹ä»£ç </span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#616E88;">// å‡è®¾è¿™æ®µä»£ç è¿è¡Œåœ¨ä¸€ä¸ª Worker çº¿ç¨‹é‡Œ</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> inspector</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">inspector</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> session</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#D8DEE9;"> inspector</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">Session</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// è¿æ¥åˆ°ä¸»çº¿ç¨‹</span></span>
<span class="line"><span style="color:#D8DEE9;">session</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">connectToMainThread</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// ç°åœ¨ï¼Œsession å·²ç»è¿æ¥åˆ°ä¸»çº¿çº¿ç¨‹ï¼Œ</span></span>
<span class="line"><span style="color:#616E88;">// å¯ä»¥å¼€å§‹ç›‘å¬äº‹ä»¶æˆ–å‘é€å‘½ä»¤è¿›è¡Œè°ƒè¯•äº†ã€‚</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨å®é™…åº”ç”¨åœºæ™¯ä¸­ï¼Œä½ å¯èƒ½ä¼šç»“åˆä½¿ç”¨ <code>session.post()</code> æ–¹æ³•æ¥å‘é€è°ƒè¯•å‘½ä»¤ï¼Œæˆ–æ˜¯ç›‘å¬ä¸€äº›è°ƒè¯•äº‹ä»¶æ¥è·å–æ‰§è¡Œæ—¶çš„ä¿¡æ¯ã€‚è¿™å¯¹äºå¼€å‘å¤æ‚çš„å¤šçº¿ç¨‹åº”ç”¨æ¥è¯´æ˜¯ä¸€ä¸ªæå¥½çš„è¾…åŠ©åŠŸèƒ½ã€‚</p><p>æ€»ä¹‹ï¼Œ<code>session.connectToMainThread()</code> æ–¹æ³•ä¸º Node.js åº”ç”¨æä¾›äº†æ›´çµæ´»çš„è°ƒè¯•èƒ½åŠ›ï¼Œå°¤å…¶æ˜¯åœ¨æ¶‰åŠå¤šçº¿ç¨‹å¤„ç†æ—¶ã€‚é€šè¿‡ä½¿å·¥ä½œçº¿ç¨‹ä¸­çš„ä»£ç å¯ä»¥è¢«ä¸»çº¿ç¨‹çš„è°ƒè¯•å™¨æ£€æŸ¥ï¼Œå¼€å‘è€…å¯ä»¥æ›´å®¹æ˜“åœ°æ‰¾åˆ°å¹¶ä¿®å¤éš¾ä»¥è¿½è¸ªçš„é”™è¯¯ã€‚</p><h4 id="session-disconnect" tabindex="-1"><a class="header-anchor" href="#session-disconnect"><span><a href="https://nodejs.org/docs/latest/api/inspector.html#sessiondisconnect" target="_blank" rel="noopener noreferrer">session.disconnect()</a></span></a></h4><p>Node.js çš„ <code>inspector</code> æ¨¡å—ç”¨äºä¸º Node.js åº”ç”¨ç¨‹åºæä¾›è°ƒè¯•å’Œåˆ†æåŠŸèƒ½ã€‚å®ƒå¯ä»¥è®©å¼€å‘è€…åƒåœ¨æµè§ˆå™¨ä¸­è°ƒè¯• JavaScript ä»£ç ä¸€æ ·ï¼Œå¯¹æœåŠ¡ç«¯çš„ Node.js ä»£ç è¿›è¡Œæ£€æŸ¥å’Œè°ƒè¯•ã€‚</p><p><code>session.disconnect()</code> æ˜¯ <code>inspector</code> æ¨¡å—ä¸­çš„ä¸€ä¸ªæ–¹æ³•ï¼Œå®ƒç”¨äºæ–­å¼€ Inspector å®¢æˆ·ç«¯ï¼ˆæ¯”å¦‚ Chrome å¼€å‘è€…å·¥å…·ï¼‰å’Œ Node.js åº”ç”¨ç¨‹åºä¹‹é—´çš„è¿æ¥ã€‚å½“ä½ ä¸å†éœ€è¦è°ƒè¯•æˆ–è€…åˆ†æåº”ç”¨ç¨‹åºæ—¶ï¼Œå°±å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ–¹æ³•æ¥æ–­å¼€è¿æ¥ã€‚</p><p>è¿™é‡Œæ˜¯ä¸€ä¸ªå…³äºå¦‚ä½•ä½¿ç”¨ <code>session.disconnect()</code> æ–¹æ³•çš„ä¾‹å­ï¼š</p><p>é¦–å…ˆï¼Œä½ éœ€è¦å¼•å…¥ <code>inspector</code> æ¨¡å—å¹¶åˆ›å»ºä¸€ä¸ªæ–°çš„ <code>Session</code> å¯¹è±¡ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> inspector</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">inspector</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> session</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#D8DEE9;"> inspector</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">Session</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>ç„¶åï¼Œä½ å¯ä»¥æ‰“å¼€ä¼šè¯ä»¥å¼€å§‹ä¸ Node.js è¿›è¡Œé€šä¿¡ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#D8DEE9;">session</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">connect</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¼šè¯ä¸­ï¼Œä½ å¯ä»¥å‘é€å‘½ä»¤å»è®¾ç½®æ–­ç‚¹ã€è·å–æ€§èƒ½åˆ†ææ•°æ®ç­‰ã€‚å½“ä½ å®Œæˆè°ƒè¯•ä»»åŠ¡åï¼Œå°±å¯ä»¥æ–­å¼€ä¼šè¯ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#D8DEE9;">session</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">disconnect</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>ä¸‹é¢æ˜¯ä¸€ä¸ªå®é™…è¿ç”¨çš„ç®€å•ä¾‹å­ï¼š</p><p>å‡è®¾ä½ æ­£åœ¨ç¼–å†™ä¸€ä¸ª Node.js åº”ç”¨ç¨‹åºï¼Œå¹¶ä¸”é‡åˆ°äº†ä¸€äº›éš¾ä»¥è¿½è¸ªçš„é”™è¯¯ã€‚ä½ å†³å®šä½¿ç”¨ Node.js çš„å†…ç½®è°ƒè¯•å·¥å…·æ¥å¸®åŠ©è§£å†³é—®é¢˜ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#616E88;">// å¼•å…¥ inspector æ¨¡å—</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> inspector</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">inspector</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#616E88;">// åˆ›å»ºä¸€ä¸ªæ–°çš„è°ƒè¯•ä¼šè¯</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> session</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#D8DEE9;"> inspector</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">Session</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// è¿æ¥åˆ° Node.js çš„è°ƒè¯•ç«¯å£</span></span>
<span class="line"><span style="color:#D8DEE9;">session</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">connect</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// ç°åœ¨ä½ å¯ä»¥ä½¿ç”¨ Chrome æµè§ˆå™¨çš„ DevTools æ¥è°ƒè¯•ä½ çš„åº”ç”¨ç¨‹åºäº†</span></span>
<span class="line"><span style="color:#616E88;">// è®¾ç½®ä¸€äº›æ–­ç‚¹ï¼ŒæŸ¥çœ‹å˜é‡çŠ¶æ€ï¼Œè·Ÿè¸ªè°ƒç”¨æ ˆç­‰</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å‡è®¾ä½ ç°åœ¨è°ƒè¯•å®Œæ¯•ï¼Œæƒ³è¦ç»§ç»­æ‰§è¡Œç¨‹åºï¼Œæˆ–è€…å®Œå…¨åœæ­¢è°ƒè¯•</span></span>
<span class="line"><span style="color:#616E88;">// æ–­å¼€ä¸è°ƒè¯•ç«¯å£çš„è¿æ¥</span></span>
<span class="line"><span style="color:#D8DEE9;">session</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">disconnect</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// ä½ çš„åº”ç”¨ç¨‹åºå°†ç»§ç»­æ‰§è¡Œï¼Œè€Œ DevTools å°†æ— æ³•ç»§ç»­è®¿é—® Node.js å®ä¾‹</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä½¿ç”¨ <code>session.disconnect()</code> ä¹‹åï¼Œä½ çš„ Node.js åº”ç”¨ç¨‹åºä¼šç»§ç»­è¿è¡Œï¼Œåªæ˜¯ä¸å†å¤„äºå¯è¢«è°ƒè¯•çš„çŠ¶æ€ã€‚è¿™æ˜¯ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„æ–¹æ³•ï¼Œç‰¹åˆ«æ˜¯åœ¨è‡ªåŠ¨åŒ–æµ‹è¯•æˆ–è€…é•¿æ—¶é—´è¿è¡Œçš„ç¨‹åºä¸­ï¼Œä½ å¯èƒ½éœ€è¦åœ¨æŸäº›é˜¶æ®µå¯ç”¨è°ƒè¯•ï¼Œè€Œåœ¨å…¶ä»–é˜¶æ®µå…³é—­è°ƒè¯•ã€‚</p><h4 id="session-post-method-params" tabindex="-1"><a class="header-anchor" href="#session-post-method-params"><span><a href="https://nodejs.org/docs/latest/api/inspector.html#sessionpostmethod-params" target="_blank" rel="noopener noreferrer">session.post(method[, params])</a></span></a></h4><p>å¥½çš„ï¼Œè®©æˆ‘ä»¬æ·±å…¥æ¢è®¨ Node.js ä¸­çš„ <code>session.post(method[, params])</code> æ–¹æ³•ï¼Œè¿™æ˜¯åœ¨ Node.js çš„ Inspector API é‡Œé¢çš„ä¸€éƒ¨åˆ†ã€‚Inspector API å…è®¸ä½ ä¸ Node.js è¿è¡Œæ—¶è¿›è¡Œäº¤äº’ï¼Œä¸»è¦ç”¨äºè°ƒè¯•å’Œæ€§èƒ½åˆ†æç­‰ä»»åŠ¡ã€‚è¦ç†è§£è¿™ä¸ªæ–¹æ³•ï¼Œé¦–å…ˆå¾—äº†è§£å‡ ä¸ªå…³é”®æ¦‚å¿µã€‚</p><h3 id="å…³é”®æ¦‚å¿µ" tabindex="-1"><a class="header-anchor" href="#å…³é”®æ¦‚å¿µ"><span>å…³é”®æ¦‚å¿µ</span></a></h3><ol><li><p><strong>Node.js Inspector API</strong>ï¼šè¿™æ˜¯ä¸€ä¸ªè®©å¼€å‘è€…å¯ä»¥ä»å¤–éƒ¨ç¨‹åºï¼ˆæ¯”å¦‚è°ƒè¯•å·¥å…·ï¼‰æ¥æ£€æŸ¥å’Œè°ƒè¯• Node.js åº”ç”¨ç¨‹åºçš„æ¥å£ã€‚å®ƒéµå¾ª Chrome DevTools Protocolï¼Œæ„å‘³ç€ä½ å¯ä»¥ä½¿ç”¨ç±»ä¼¼ Chrome æµè§ˆå™¨å¼€å‘è€…å·¥å…·çš„æ–¹å¼æ¥è°ƒè¯• Node.js åº”ç”¨ã€‚</p></li><li><p><strong>ä¼šè¯ï¼ˆSessionï¼‰</strong>ï¼šåœ¨ Inspector API ä¸­ï¼Œä¼šè¯æ˜¯ä¸ Node.js è¿è¡Œæ—¶çš„ä¸€æ¬¡è¿æ¥è¿‡ç¨‹ã€‚é€šè¿‡è¿™ä¸ªä¼šè¯ï¼Œä½ å¯ä»¥å‘é€å‘½ä»¤ã€æ¥æ”¶äº‹ä»¶æ•°æ®ç­‰ã€‚åˆ›å»ºä¸€ä¸ªä¼šè¯é€šå¸¸æ˜¯ä¸ºäº†å¼€å§‹ä¸€ä¸ªè°ƒè¯•æˆ–æ€§èƒ½åˆ†ææµç¨‹ã€‚</p></li><li><p><strong>æ–¹æ³•å’Œå‚æ•°ï¼ˆMethod and Paramsï¼‰</strong>ï¼šå½“ä½ é€šè¿‡ä¼šè¯ä¸ Node.js äº¤äº’æ—¶ï¼Œä½ å‘é€çš„æ¯æ¡æ¶ˆæ¯åŒ…å«ä¸€ä¸ªâ€œæ–¹æ³•â€å’Œè¯¥æ–¹æ³•ç›¸å…³çš„å‚æ•°ã€‚â€œæ–¹æ³•â€æŒ‡çš„æ˜¯ä½ æƒ³è¦æ‰§è¡Œçš„æ“ä½œï¼ˆæ¯”å¦‚è·å– CPU çš„ä½¿ç”¨æƒ…å†µï¼‰ï¼Œè€Œâ€œå‚æ•°â€åˆ™æä¾›äº†æ‰§è¡Œè¿™ä¸ªæ“ä½œæ‰€éœ€çš„é¢å¤–ä¿¡æ¯ã€‚</p></li></ol><h3 id="session-post-method-params-è§£é‡Š" tabindex="-1"><a class="header-anchor" href="#session-post-method-params-è§£é‡Š"><span><code>session.post(method[, params])</code> è§£é‡Š</span></a></h3><p>ç°åœ¨æˆ‘ä»¬æ¥çœ‹ <code>session.post(method[, params])</code> è¿™ä¸ªæ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•ç”¨äºå‘ Node.js çš„ Inspector å‘é€ä¸€ä¸ªå¼‚æ­¥è¯·æ±‚ï¼Œæ‰§è¡Œä¸€ä¸ªç‰¹å®šçš„æ“ä½œï¼ˆ&quot;method&quot;ï¼‰ï¼Œå¹¶ä¸”å¯ä»¥é€‰æ‹©æ€§åœ°é™„å¸¦ä¸€äº›å‚æ•°ï¼ˆ&quot;params&quot;ï¼‰ã€‚</p><ul><li><strong>method</strong>ï¼šè¿™æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºä½ æƒ³è¦æ‰§è¡Œçš„ Inspector åè®®ä¸­å®šä¹‰çš„æ–¹æ³•ã€‚</li><li><strong>params</strong>ï¼šè¿™æ˜¯ä¸€ä¸ªå¯é€‰å‚æ•°ï¼Œä¸ºä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…æ‹¬äº†æ‰§è¡Œä¸Šè¿°æ–¹æ³•æ‰€éœ€è¦çš„å‚æ•°ä¿¡æ¯ã€‚</li></ul><p>ç®€å•æ¥è¯´ï¼Œå½“ä½ è°ƒç”¨ <code>session.post()</code> æ–¹æ³•æ—¶ï¼Œä½ å®é™…ä¸Šæ˜¯åœ¨è¯´ï¼šâ€œå˜¿ï¼ŒNode.jsï¼Œæˆ‘æƒ³è¦æ‰§è¡Œè¿™ä¸ªæ“ä½œï¼Œè¯·ç»™æˆ‘ç»“æœã€‚â€ç„¶å Node.js ä¼šå»å¤„ç†è¿™ä¸ªè¯·æ±‚ï¼Œå¹¶ä¸”å›ä¼ ç»“æœã€‚</p><h3 id="å®é™…è¿ç”¨çš„ä¾‹å­-1" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨çš„ä¾‹å­-1"><span>å®é™…è¿ç”¨çš„ä¾‹å­</span></a></h3><p>æƒ³è±¡ä¸€ä¸‹ï¼Œä½ æ­£åœ¨å¼€å‘ä¸€ä¸ª Node.js åº”ç”¨ç¨‹åºï¼Œå¹¶ä¸”ä½ æƒ³è¦è°ƒè¯•ä¸€æ®µä»£ç æ¥çœ‹çœ‹å“ªé‡Œå‡ºäº†é—®é¢˜ï¼Œæˆ–è€…è¯„ä¼°å®ƒçš„æ€§èƒ½ã€‚</p><ol><li><p><strong>å¯åŠ¨è°ƒè¯•ä¼šè¯</strong>ï¼šé¦–å…ˆï¼Œä½ ä¼šåˆ›å»ºä¸€ä¸ª Inspector ä¼šè¯ï¼Œè¿™ä¸ªä¼šè¯è®©ä½ èƒ½å¤Ÿå‘é€å‘½ä»¤ç»™ Node.js çš„è¿è¡Œæ—¶ç¯å¢ƒã€‚</p></li><li><p><strong>æ‰§è¡Œä¸€ä¸ªå‘½ä»¤</strong>ï¼šå‡è®¾ä½ æƒ³è¦è·å–å½“å‰æ‰€æœ‰æ´»è·ƒçš„ JavaScript è°ƒç”¨æ ˆçš„ä¿¡æ¯ã€‚ä½ å¯ä»¥è°ƒç”¨ <code>session.post(&#39;Debugger.getStackTrace&#39;, {maxDepth: 10})</code>ï¼Œè¿™é‡Œ <code>&#39;Debugger.getStackTrace&#39;</code> æ˜¯ä½ æƒ³è¦æ‰§è¡Œçš„æ–¹æ³•ï¼Œè€Œ <code>{maxDepth: 10}</code> æ˜¯ä¸€ä¸ªå‚æ•°ï¼Œå‘Šè¯‰ Node.js ä½ åªå¯¹æœ€æ·± 10 å±‚çš„è°ƒç”¨æ ˆæ„Ÿå…´è¶£ã€‚</p></li><li><p><strong>å¤„ç†è¿”å›çš„æ•°æ®</strong>ï¼šä¸€æ—¦ Node.js å¤„ç†äº†ä½ çš„è¯·æ±‚ï¼Œå®ƒä¼šå›ä¼ è°ƒç”¨æ ˆçš„ä¿¡æ¯ã€‚ç„¶åä½ å¯ä»¥åˆ©ç”¨è¿™äº›ä¿¡æ¯æ¥åˆ†æä½ çš„åº”ç”¨ç¨‹åºçš„è¡Œä¸ºï¼Œæ‰¾åˆ°æ€§èƒ½ç“¶é¢ˆæˆ–æ˜¯é”™è¯¯æºå¤´ã€‚</p></li></ol><p>é€šè¿‡è¿™æ ·çš„äº¤äº’ï¼Œä½ å¯ä»¥æ·±å…¥äº†è§£ä½ çš„ Node.js åº”ç”¨æ˜¯å¦‚ä½•è¿è¡Œçš„ï¼Œä»¥åŠå¦‚ä½•ä¼˜åŒ–å®ƒçš„æ€§èƒ½æˆ–ä¿®å¤å­˜åœ¨çš„é—®é¢˜ã€‚è¿™åªæ˜¯ Inspector API æä¾›åŠŸèƒ½çš„å†°å±±ä¸€è§’ï¼Œä½†å¸Œæœ›è¿™èƒ½ç»™ä½ ä¸€ä¸ªåŸºæœ¬çš„ç†è§£ï¼Œä»¥åŠå¦‚ä½•å¼€å§‹ä½¿ç”¨å®ƒæ¥è°ƒè¯•å’Œä¼˜åŒ–ä½ çš„ Node.js åº”ç”¨ã€‚</p><h4 id="example-usage" tabindex="-1"><a class="header-anchor" href="#example-usage"><span><a href="https://nodejs.org/docs/latest/api/inspector.html#example-usage" target="_blank" rel="noopener noreferrer">Example usage</a></span></a></h4><p>Node.js æ˜¯ä¸€ä¸ªéå¸¸å¼ºå¤§çš„ JavaScript ç¯å¢ƒï¼Œå…è®¸ä½ åœ¨æœåŠ¡å™¨ç«¯è¿è¡Œ JavaScript ä»£ç ã€‚è¿™æ„å‘³ç€ä½ å¯ä»¥ç”¨å®ƒæ¥å¼€å‘æœåŠ¡å™¨åº”ç”¨ç¨‹åºï¼Œå¤„ç†ç½‘é¡µåç«¯é€»è¾‘ï¼Œç”šè‡³æ“ä½œæ•°æ®åº“ç­‰ç­‰ã€‚å…¶ä¸­ä¸€ä¸ªå¼ºå¤§çš„åŠŸèƒ½æ˜¯å®ƒçš„<code>inspector</code>æ¨¡å—ï¼Œè¿™ä¸ªæ¨¡å—å¯ä»¥è®©ä½ è°ƒè¯• Node.js åº”ç”¨ç¨‹åºï¼Œå°±åƒä½ åœ¨æµè§ˆå™¨ä¸­è°ƒè¯•å‰ç«¯ä»£ç ä¸€æ ·ã€‚</p><p>åœ¨ Node.js v21.7.1 ç‰ˆæœ¬ä¸­ï¼Œ<code>inspector</code>æ¨¡å—æä¾›äº†ä¸€ç§æ–¹å¼ï¼Œä½¿å¾—æˆ‘ä»¬å¯ä»¥å¯åŠ¨å’Œåœæ­¢æ£€æŸ¥å™¨ï¼Œå¹¶è¿›è¡Œé€šä¿¡ï¼Œä»¥ä¾¿äºè°ƒè¯•ã€‚ä¸‹é¢æˆ‘ä¼šé€šè¿‡ä¸€ä¸ªå®ä¾‹æ¥è§£é‡Šè¿™ä¸ªåŠŸèƒ½çš„åŸºæœ¬ä½¿ç”¨æ–¹æ³•ã€‚</p><h3 id="å®é™…è¿ç”¨ç¤ºä¾‹" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨ç¤ºä¾‹"><span>å®é™…è¿ç”¨ç¤ºä¾‹</span></a></h3><p>å‡è®¾ä½ æ­£åœ¨å¼€å‘ä¸€ä¸ª Node.js åº”ç”¨ç¨‹åºï¼Œå¹¶ä¸”é‡åˆ°äº†ä¸€ä¸ªéš¾ä»¥è¿½è¸ªçš„é”™è¯¯ã€‚ä¸ºäº†æ·±å…¥äº†è§£å‘ç”Ÿäº†ä»€ä¹ˆï¼Œä½ å†³å®šä½¿ç”¨<code>inspector</code>æ¨¡å—æ¥å¸®åŠ©è°ƒè¯•ã€‚</p><p>é¦–å…ˆï¼Œä½ éœ€è¦å¯¼å…¥<code>inspector</code>æ¨¡å—ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> inspector</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">inspector</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>æ¥ä¸‹æ¥ï¼Œå¦‚æœä½ æƒ³è¦å¼€å¯ä¸€ä¸ªè°ƒè¯•ä¼šè¯ï¼Œä½ å¯ä»¥è¿™æ ·åšï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#616E88;">// æ‰“å¼€inspectorä¼šè¯</span></span>
<span class="line"><span style="color:#D8DEE9;">inspector</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">open</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ä¸ªå‘½ä»¤ä¼šå¼€å¯ä¸€ä¸ªè°ƒè¯•ä¼šè¯ï¼Œå…è®¸è°ƒè¯•å®¢æˆ·ç«¯ï¼ˆæ¯”å¦‚ Chrome å¼€å‘è€…å·¥å…·ï¼‰è¿æ¥åˆ°æ­£åœ¨è¿è¡Œçš„ Node.js è¿›ç¨‹ã€‚è¿™æ ·ï¼Œä½ å°±å¯ä»¥è®¾ç½®æ–­ç‚¹ã€æŸ¥çœ‹å †æ ˆè·Ÿè¸ªã€ç›‘è§†å˜é‡ç­‰ç­‰ï¼Œå°±åƒåœ¨æµè§ˆå™¨ä¸­è°ƒè¯• JavaScript ä¸€æ ·ã€‚</p><p>å½“ä½ å®Œæˆè°ƒè¯•å¹¶æƒ³è¦å…³é—­è°ƒè¯•ä¼šè¯æ—¶ï¼Œå¯ä»¥è¿™æ ·æ“ä½œï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#616E88;">// å…³é—­inspectorä¼šè¯</span></span>
<span class="line"><span style="color:#D8DEE9;">inspector</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">close</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™å°†ç»“æŸå½“å‰çš„è°ƒè¯•ä¼šè¯ï¼Œå…è®¸ä½ çš„åº”ç”¨ç¨‹åºç»§ç»­è¿è¡Œæˆ–é€€å‡ºã€‚</p><h3 id="å®ç”¨ç¤ºä¾‹-è°ƒè¯•-express-åº”ç”¨" tabindex="-1"><a class="header-anchor" href="#å®ç”¨ç¤ºä¾‹-è°ƒè¯•-express-åº”ç”¨"><span>å®ç”¨ç¤ºä¾‹ï¼šè°ƒè¯• Express åº”ç”¨</span></a></h3><p>å‡è®¾ä½ æ­£åœ¨ä½¿ç”¨ Express æ¡†æ¶å¼€å‘ä¸€ä¸ª Web åº”ç”¨ç¨‹åºï¼Œçªç„¶å‘ç°æœ‰äº›è¯·æ±‚çš„å“åº”æ—¶é—´å¼‚å¸¸é•¿ã€‚ä¸ºäº†æ‰¾å‡ºåŸå› ï¼Œä½ å†³å®šç”¨<code>inspector</code>æ¨¡å—è¿›è¡Œè°ƒè¯•ã€‚</p><p>é¦–å…ˆï¼Œåœ¨ä½ çš„åº”ç”¨ç¨‹åºä¸­å¯¼å…¥<code>inspector</code>æ¨¡å—ï¼Œå¹¶åœ¨æŸä¸ªç‰¹å®šçš„è¯·æ±‚å¤„ç†ä¸­å¼€å¯è°ƒè¯•ä¼šè¯ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> express</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">express</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> inspector</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">inspector</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> app</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> express</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">app</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">get</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">/debug</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> (</span><span style="color:#D8DEE9;">req</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> res</span><span style="color:#ECEFF4;">)</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#616E88;">  // å¼€å¯è°ƒè¯•ä¼šè¯</span></span>
<span class="line"><span style="color:#D8DEE9;">  inspector</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">open</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">  // æˆ‘ä»¬å‡è®¾è¿™é‡Œæœ‰å¤æ‚çš„é€»è¾‘</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">  // å“åº”è¯·æ±‚</span></span>
<span class="line"><span style="color:#D8DEE9;">  res</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">send</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Debugging session started.</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">  // å¦‚æœéœ€è¦ï¼Œåœ¨æ­¤å¤„å…³é—­è°ƒè¯•ä¼šè¯ï¼Œæˆ–è€…ä¹Ÿå¯ä»¥åœ¨å…¶ä»–åœ°æ–¹å…³é—­</span></span>
<span class="line"><span style="color:#616E88;">  // inspector.close();</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">app</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">listen</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">3000</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> ()</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">App listening on port 3000!</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å½“ä½ å‘<code>/debug</code>è·¯å¾„å‘é€è¯·æ±‚æ—¶ï¼Œä½ çš„åº”ç”¨ç¨‹åºä¼šå¼€å¯ä¸€ä¸ªè°ƒè¯•ä¼šè¯ã€‚è¿™æ—¶ï¼Œä½ å°±å¯ä»¥ä½¿ç”¨æ”¯æŒ Node.js è°ƒè¯•åè®®çš„å·¥å…·ï¼ˆå¦‚ Chrome å¼€å‘è€…å·¥å…·ï¼‰è¿æ¥åˆ°ä½ çš„åº”ç”¨ç¨‹åºï¼Œå¹¶å¼€å§‹è°ƒè¯•äº†ã€‚</p><p>æ€»ä¹‹ï¼Œ<code>inspector</code>æ¨¡å—æ˜¯ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„å·¥å…·ï¼Œå¯ä»¥å¸®åŠ©ä½ ç†è§£å’Œè°ƒè¯•ä½ çš„ Node.js åº”ç”¨ç¨‹åºçš„è¡Œä¸ºã€‚é€šè¿‡å¼€å¯å’Œå…³é—­è°ƒè¯•ä¼šè¯ï¼Œä½ å¯ä»¥æ›´ç²¾ç¡®åœ°æ§åˆ¶è°ƒè¯•è¿‡ç¨‹ï¼Œå¹¶ä¸“æ³¨äºé‚£äº›çœŸæ­£éœ€è¦æ·±å…¥äº†è§£çš„éƒ¨åˆ†ã€‚</p><h5 id="cpu-profiler" tabindex="-1"><a class="header-anchor" href="#cpu-profiler"><span><a href="https://nodejs.org/docs/latest/api/inspector.html#cpu-profiler" target="_blank" rel="noopener noreferrer">CPU profiler</a></span></a></h5><p>Node.js æ˜¯ä¸€ä¸ªåŸºäº Chrome V8 å¼•æ“çš„ JavaScript è¿è¡Œç¯å¢ƒï¼Œå®ƒè®©å¼€å‘è€…å¯ä»¥ä½¿ç”¨ JavaScript æ¥ç¼–å†™æœåŠ¡å™¨ç«¯çš„è½¯ä»¶ã€‚åœ¨ Node.js ä¸­æœ‰å¾ˆå¤šå·¥å…·å’Œæ¨¡å—æ¥å¸®åŠ©å¼€å‘è€…æ›´æœ‰æ•ˆåœ°è¿›è¡Œç¼–ç¨‹å’Œè°ƒè¯•ï¼ŒCPU profiler æ˜¯å…¶ä¸­å¼ºå¤§çš„å·¥å…·ä¹‹ä¸€ã€‚</p><h3 id="ä»€ä¹ˆæ˜¯-cpu-profiler" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯-cpu-profiler"><span>ä»€ä¹ˆæ˜¯ CPU Profilerï¼Ÿ</span></a></h3><p>CPU Profiler æ˜¯ä¸€ä¸ªæ€§èƒ½åˆ†æå·¥å…·ï¼Œå®ƒå¯ä»¥å¸®åŠ©ä½ äº†è§£ä½ çš„ Node.js åº”ç”¨ç¨‹åºä¸­çš„å“ªäº›æ“ä½œå ç”¨äº†æœ€å¤šçš„ CPU æ—¶é—´ã€‚ç®€è€Œè¨€ä¹‹ï¼Œå®ƒè®©ä½ çŸ¥é“ä½ çš„ä»£ç ä¸­å“ªéƒ¨åˆ†åœ¨â€œåƒåŠ›â€å·¥ä½œï¼Œä»è€Œå¯èƒ½æˆä¸ºä¼˜åŒ–çš„ç›®æ ‡ã€‚</p><h3 id="å¦‚ä½•ä½¿ç”¨-1" tabindex="-1"><a class="header-anchor" href="#å¦‚ä½•ä½¿ç”¨-1"><span>å¦‚ä½•ä½¿ç”¨ï¼Ÿ</span></a></h3><p>Node.js é€šè¿‡ <code>inspector</code> æ¨¡å—æš´éœ²å‡º CPU Profiler çš„åŠŸèƒ½ã€‚è¦ä½¿ç”¨ CPU Profilerï¼Œä½ éœ€è¦åˆ›å»ºä¸€ä¸ª Inspector ä¼šè¯ï¼Œå¹¶é€šè¿‡å®ƒå‘é€å‘½ä»¤æ¥æ§åˆ¶ Profiler çš„å¯åŠ¨å’Œåœæ­¢ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> inspector</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">inspector</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> fs</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">fs</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// æ‰“å¼€ inspector ä¼šè¯</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> session</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#D8DEE9;"> inspector</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">Session</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">session</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">connect</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// ç›‘å¬ Profiler ç»“æœå¹¶å†™å…¥æ–‡ä»¶</span></span>
<span class="line"><span style="color:#D8DEE9;">session</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">post</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Profiler.enable</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> ()</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">  session</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">post</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Profiler.start</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> ()</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#616E88;">    // è®©ç¨‹åºè¿è¡Œä¸€æ®µæ—¶é—´ï¼Œè¿™é‡Œå‡è®¾æ˜¯ä½ æƒ³è¦ profile çš„ä»£ç åŒºåŸŸ</span></span>
<span class="line"><span style="color:#616E88;">    // ä¾‹å¦‚:</span></span>
<span class="line"><span style="color:#88C0D0;">    setTimeout</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">()</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">      session</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">post</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Profiler.stop</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> (</span><span style="color:#D8DEE9;">err</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> {</span><span style="color:#D8DEE9;"> profile</span><span style="color:#ECEFF4;"> })</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#616E88;">        // å½“ Profiler åœæ­¢æ—¶ï¼Œç»“æœä¼šä»¥ JSON å½¢å¼è¿”å›</span></span>
<span class="line"><span style="color:#81A1C1;">        if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#81A1C1;">!</span><span style="color:#D8DEE9;">err</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#616E88;">          // å°†ç»“æœå†™å…¥æ–‡ä»¶</span></span>
<span class="line"><span style="color:#D8DEE9;">          fs</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">writeFileSync</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">profile.cpuprofile</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> JSON</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">stringify</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">profile</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">        }</span></span>
<span class="line"><span style="color:#D8DEE9;">        session</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">disconnect</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">      }</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">    },</span><span style="color:#B48EAD;"> 10000</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // å‡è®¾æˆ‘ä»¬è¿™é‡Œprofile 10ç§’</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆå¼•å…¥äº† <code>inspector</code> å’Œ <code>fs</code> æ¨¡å—ã€‚æ¥ç€ï¼Œåˆ›å»ºä¸€ä¸ª Inspector ä¼šè¯ï¼Œå¹¶é€šè¿‡ <code>session.connect()</code> å»ºç«‹è¿æ¥ã€‚ç„¶åï¼Œæˆ‘ä»¬å¯ç”¨å¹¶å¼€å§‹ Profilerï¼Œè¿è¡Œä¸€æ®µæŒ‡å®šæ—¶é—´çš„ä»£ç ï¼ˆåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œä¸º 10 ç§’ï¼‰ã€‚å®Œæˆåï¼Œåœæ­¢ Profiler å¹¶å°†ç»“æœä¿å­˜åˆ°æ–‡ä»¶ä¸­ã€‚</p><h3 id="å®é™…è¿ç”¨ç¤ºä¾‹-1" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨ç¤ºä¾‹-1"><span>å®é™…è¿ç”¨ç¤ºä¾‹</span></a></h3><ol><li><p><strong>æ€§èƒ½è°ƒä¼˜</strong>ï¼šå‡è®¾ä½ çš„ Node.js åº”ç”¨å“åº”å˜æ…¢ï¼Œç”¨æˆ·æŠ±æ€¨å»¶è¿Ÿå¢åŠ ã€‚ä½ å¯ä»¥ä½¿ç”¨ CPU Profiler æ¥æ‰¾å‡ºæ˜¯å“ªéƒ¨åˆ†ä»£ç é€ æˆäº†æ€§èƒ½ç“¶é¢ˆï¼Œç„¶åé’ˆå¯¹æ€§åœ°è¿›è¡Œä¼˜åŒ–ã€‚</p></li><li><p><strong>æ£€æµ‹æ— æ•ˆå¾ªç¯æˆ–è®¡ç®—</strong>ï¼šå¦‚æœä½ æ€€ç–‘æŸä¸ªå¤æ‚å‡½æ•°æˆ–é€»è¾‘é€ æˆäº†æ— æ•ˆçš„èµ„æºæ¶ˆè€—ï¼Œè¿ç”¨ CPU Profiler å°†å¸®åŠ©ä½ å¿«é€Ÿå®šä½é—®é¢˜ä»£ç ã€‚</p></li><li><p><strong>æœåŠ¡å™¨è´Ÿè½½åˆ†æ</strong>ï¼šåœ¨é«˜è´Ÿè½½æƒ…å†µä¸‹ï¼Œç†è§£æœåŠ¡å™¨èµ„æºå—é™çš„åŸå› è‡³å…³é‡è¦ã€‚ä½¿ç”¨ CPU Profiler å¯ä»¥å¸®åŠ©ä½ åˆ†æå’Œç†è§£åœ¨é«˜è´Ÿè½½æ—¶å“ªäº›æ“ä½œæœ€è€—è´¹ CPU èµ„æºï¼Œè¿›è€Œé‡‡å–æªæ–½ä¼˜åŒ–ã€‚</p></li></ol><p>æ€»ç»“è€Œè¨€ï¼ŒCPU Profiler æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å·¥å…·ï¼Œå®ƒå¯ä»¥å¸®åŠ©ä½ åˆ†æå’Œä¼˜åŒ–ä½ çš„ Node.js åº”ç”¨ã€‚é€šè¿‡ç†è§£ä½ çš„åº”ç”¨å¦‚ä½•ä½¿ç”¨ CPU èµ„æºï¼Œä½ å¯ä»¥æ›´æœ‰æ•ˆåœ°æå‡æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒã€‚</p><h5 id="heap-profiler" tabindex="-1"><a class="header-anchor" href="#heap-profiler"><span><a href="https://nodejs.org/docs/latest/api/inspector.html#heap-profiler" target="_blank" rel="noopener noreferrer">Heap profiler</a></span></a></h5><p>Node.js çš„ Heap Profiler æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å·¥å…·ï¼Œç”¨äºå¸®åŠ©å¼€å‘è€…ç†è§£å’Œä¼˜åŒ–ä»–ä»¬çš„åº”ç”¨ç¨‹åºåœ¨å†…å­˜ä½¿ç”¨æ–¹é¢çš„è¡Œä¸ºã€‚åœ¨ Node.js ä¸­ï¼Œ&quot;heap&quot;æŒ‡çš„æ˜¯ä¸€å—å†…å­˜åŒºåŸŸï¼Œè¢«ç”¨æ¥å­˜å‚¨å¯¹è±¡å’Œå…¶ä»–åŠ¨æ€åˆ†é…çš„æ•°æ®ç±»å‹ã€‚è¿‡åº¦çš„å†…å­˜ä½¿ç”¨æˆ–æ³„æ¼å¯èƒ½ä¼šå¯¼è‡´åº”ç”¨ç¨‹åºè¿è¡Œç¼“æ…¢ï¼Œç”šè‡³å´©æºƒã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆå†…å­˜ç®¡ç†å’Œä¼˜åŒ–å˜å¾—éå¸¸é‡è¦ã€‚</p><h3 id="heap-profiler-çš„ä½œç”¨" tabindex="-1"><a class="header-anchor" href="#heap-profiler-çš„ä½œç”¨"><span>Heap Profiler çš„ä½œç”¨</span></a></h3><p>Heap Profiler å…è®¸ä½ ç›‘æ§å’Œåˆ†æä½ çš„ Node.js åº”ç”¨çš„å†…å­˜ä½¿ç”¨æƒ…å†µã€‚é€šè¿‡å®ƒï¼Œä½ å¯ä»¥åˆ›å»ºå †å¿«ç…§ï¼ˆheap snapshotsï¼‰ã€è®°å½•å †åˆ†é…æ—¶é—´çº¿ï¼ˆheap allocation timelinesï¼‰å’Œæ‰§è¡Œå †æ¯”è¾ƒï¼ˆheap comparisonï¼‰ã€‚è¿™äº›åŠŸèƒ½å…è®¸ä½ è¯†åˆ«å†…å­˜æ³„æ¼ã€é¢‘ç¹åˆ†é…å’Œé‡Šæ”¾å†…å­˜çš„ä½ç½®ä»¥åŠå…¶ä»–å¯èƒ½å½±å“åº”ç”¨æ€§èƒ½çš„å†…å­˜é—®é¢˜ã€‚</p><h3 id="å®é™…åº”ç”¨ä¾‹å­-1" tabindex="-1"><a class="header-anchor" href="#å®é™…åº”ç”¨ä¾‹å­-1"><span>å®é™…åº”ç”¨ä¾‹å­</span></a></h3><ol><li><p><strong>æ£€æµ‹å’Œè§£å†³å†…å­˜æ³„æ¼</strong></p><p>å‡è®¾ä½ çš„ Node.js åº”ç”¨åœ¨è¿è¡Œä¸€æ®µæ—¶é—´åå¼€å§‹å˜å¾—éå¸¸ç¼“æ…¢ï¼Œæœ€ç»ˆç”šè‡³å´©æºƒã€‚ä½¿ç”¨ Heap Profilerï¼Œä½ å¯ä»¥å®šæœŸç”Ÿæˆå †å¿«ç…§å¹¶è¿›è¡Œå¯¹æ¯”ã€‚è¿™æ ·ï¼Œä½ å¯ä»¥è§‚å¯Ÿåˆ°éšæ—¶é—´å¢é•¿çš„å¯¹è±¡ï¼Œè¿›è€Œæ‰¾åˆ°å¯èƒ½çš„å†…å­˜æ³„æ¼æºå¤´ã€‚</p></li><li><p><strong>ä¼˜åŒ–å†…å­˜ä½¿ç”¨</strong></p><p>å¦‚æœä½ æ­£åœ¨å¼€å‘ä¸€ä¸ªå¤§å‹çš„ Node.js åº”ç”¨ï¼Œå¹¶ä¸”æ³¨æ„åˆ°æŸäº›æ“ä½œå ç”¨äº†å¤§é‡å†…å­˜ï¼Œä½†ä¸ç¡®å®šå…·ä½“åŸå› ã€‚é€šè¿‡è®°å½•å’Œåˆ†æå †åˆ†é…æ—¶é—´çº¿ï¼Œä½ å¯ä»¥çœ‹åˆ°å“ªäº›æ“ä½œå¯¼è‡´äº†å†…å­˜çš„å¿«é€Ÿå¢é•¿ã€‚æœ‰äº†è¿™äº›ä¿¡æ¯ï¼Œä½ å¯ä»¥å¯¹ä»£ç è¿›è¡Œä¼˜åŒ–ï¼Œæ¯”å¦‚é‡ç”¨å¯¹è±¡æˆ–å‡å°‘ä¸å¿…è¦çš„æ•°æ®å¤åˆ¶ã€‚</p></li><li><p><strong>æé«˜æ€§èƒ½</strong></p><p>åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå³ä½¿æ²¡æœ‰æ˜æ˜¾çš„å†…å­˜æ³„æ¼ï¼Œå†…å­˜çš„ä¸å½“ä½¿ç”¨ä¹Ÿå¯èƒ½å¯¼è‡´æ€§èƒ½é—®é¢˜ã€‚ä¾‹å¦‚ï¼Œé¢‘ç¹åœ°åˆ›å»ºå’Œé”€æ¯å¤§é‡çš„å°å¯¹è±¡å¯èƒ½ä¼šå¯¼è‡´åƒåœ¾å›æ”¶å™¨è¿‡åº¦å·¥ä½œï¼Œå½±å“åº”ç”¨æ€§èƒ½ã€‚é€šè¿‡å †æ¯”è¾ƒåˆ†æï¼Œåœ¨ä¸¤ä¸ªä¸åŒæ—¶é—´ç‚¹æ•è·çš„å †å¿«ç…§ä¹‹é—´æ¯”è¾ƒï¼Œå¯ä»¥å¸®åŠ©ä½ è¯†åˆ«å‡ºè¿™ç±»æ¨¡å¼ï¼Œå¹¶è¿›è¡Œé€‚å½“çš„è°ƒæ•´ã€‚</p></li></ol><h3 id="å¦‚ä½•ä½¿ç”¨-2" tabindex="-1"><a class="header-anchor" href="#å¦‚ä½•ä½¿ç”¨-2"><span>å¦‚ä½•ä½¿ç”¨</span></a></h3><p>ä½¿ç”¨ Node.js çš„<code>inspector</code>æ¨¡å—ï¼Œä½ å¯ä»¥ç¼–ç¨‹æ–¹å¼å¯ç”¨å’Œæ“ä½œ Heap Profilerã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> inspector</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">inspector</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> fs</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">fs</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> session</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#D8DEE9;"> inspector</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">Session</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">session</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">connect</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å¯ç”¨Heap Profiler</span></span>
<span class="line"><span style="color:#D8DEE9;">session</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">post</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">HeapProfiler.enable</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> ()</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#616E88;">  // å¼€å§‹è·Ÿè¸ªæ‰€æœ‰çš„å †åˆ†é…</span></span>
<span class="line"><span style="color:#D8DEE9;">  session</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">post</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">HeapProfiler.startTrackingHeapObjects</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> ()</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#616E88;">    // åœ¨è¿™é‡Œæ‰§è¡Œä½ çš„åº”ç”¨ä»£ç ...</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">    // åœæ­¢è·Ÿè¸ªï¼Œå¹¶ä¸”è·å–å †å¿«ç…§</span></span>
<span class="line"><span style="color:#D8DEE9;">    session</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">post</span><span style="color:#D8DEE9FF;">(</span></span>
<span class="line"><span style="color:#ECEFF4;">      &quot;</span><span style="color:#A3BE8C;">HeapProfiler.stopTrackingHeapObjects</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#ECEFF4;">      {</span><span style="color:#88C0D0;"> reportProgress</span><span style="color:#ECEFF4;">:</span><span style="color:#81A1C1;"> false</span><span style="color:#ECEFF4;">,</span><span style="color:#88C0D0;"> treatGlobalObjectsAsRoots</span><span style="color:#ECEFF4;">:</span><span style="color:#81A1C1;"> true</span><span style="color:#ECEFF4;"> },</span></span>
<span class="line"><span style="color:#ECEFF4;">      (</span><span style="color:#D8DEE9;">err</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> params</span><span style="color:#ECEFF4;">)</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">        if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">err</span><span style="color:#D8DEE9FF;">) </span><span style="color:#81A1C1;">throw</span><span style="color:#D8DEE9;"> err</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">        // å¯ä»¥å°†å¿«ç…§ä¿å­˜åˆ°æ–‡ä»¶è¿›è¡Œåˆ†æ</span></span>
<span class="line"><span style="color:#D8DEE9;">        fs</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">writeFileSync</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">heapSnapshot.heapsnapshot</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> params</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">profile</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">        console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Heap snapshot saved</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">        // å…³é—­session</span></span>
<span class="line"><span style="color:#D8DEE9;">        session</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">disconnect</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">      }</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    )</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä»¥ä¸Šä»£ç å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ Heap Profiler æ¥æ•è·å †å¿«ç…§ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦å¼•å…¥<code>inspector</code>æ¨¡å—å¹¶åˆ›å»ºä¸€ä¸ª sessionï¼Œç„¶åå¯ç”¨ Heap Profiler å¹¶å¼€å§‹è·Ÿè¸ªå †åˆ†é…ã€‚ä¹‹åï¼Œä½ å¯ä»¥åœ¨åˆé€‚çš„æ—¶å€™åœæ­¢è·Ÿè¸ªï¼Œå¹¶è·å–å½“å‰çš„å †çŠ¶æ€å¿«ç…§ï¼Œæœ€åå°†å…¶ä¿å­˜æˆæ–‡ä»¶ä¾›åç»­åˆ†æã€‚</p><p>é€šè¿‡æ·±å…¥å­¦ä¹ å’Œä½¿ç”¨ Heap Profilerï¼Œä½ å°†èƒ½æ›´å¥½åœ°æŒæ¡ Node.js åº”ç”¨çš„å†…å­˜ä½¿ç”¨æƒ…å†µï¼Œä»è€Œç¼–å†™æ›´é«˜æ•ˆã€æ›´ç¨³å®šçš„ä»£ç ã€‚</p><h2 id="callback-api" tabindex="-1"><a class="header-anchor" href="#callback-api"><span><a href="https://nodejs.org/docs/latest/api/inspector.html#callback-api" target="_blank" rel="noopener noreferrer">Callback API</a></span></a></h2><p>Node.js æ˜¯ä¸€ä¸ªåŸºäº Chrome V8 å¼•æ“çš„ JavaScript è¿è¡Œç¯å¢ƒï¼Œå®ƒè®©ä½ èƒ½å¤Ÿåœ¨æœåŠ¡å™¨ç«¯è¿è¡Œ JavaScriptã€‚è¿™æ„å‘³ç€ä½ å¯ä»¥ç”¨ JavaScript æ¥ç¼–å†™åç«¯ä»£ç ï¼Œå°±åƒä½ åœ¨æµè§ˆå™¨ä¸­ç¼–å†™å‰ç«¯ä»£ç ä¸€æ ·ã€‚</p><p>Node.js ä¸­æœ‰ä¸€é¡¹é‡è¦çš„æ¦‚å¿µå«åšâ€œå›è°ƒï¼ˆCallbackï¼‰â€ã€‚ç®€å•æ¥è¯´ï¼Œå›è°ƒæ˜¯ä¸€ç§åœ¨æŸä¸ªå‡½æ•°æ‰§è¡Œå®Œåå†æ‰§è¡Œçš„å‡½æ•°ã€‚è¿™å¯¹äºå¤„ç†å¼‚æ­¥æ“ä½œéå¸¸æœ‰ç”¨ï¼Œæ¯”å¦‚è¯»å–æ–‡ä»¶ã€æŸ¥è¯¢æ•°æ®åº“æˆ–å‘èµ·ç½‘ç»œè¯·æ±‚ï¼Œå› ä¸ºè¿™äº›æ“ä½œé€šå¸¸éœ€è¦ä¸€æ®µæ—¶é—´æ‰èƒ½å®Œæˆï¼Œè€Œæˆ‘ä»¬å¹¶ä¸æƒ³é˜»å¡ç¨‹åºçš„å…¶ä»–éƒ¨åˆ†ç­‰å¾…è¿™äº›æ“ä½œçš„å®Œæˆã€‚</p><h3 id="callback-api-1" tabindex="-1"><a class="header-anchor" href="#callback-api-1"><span>Callback API</span></a></h3><p>åœ¨ Node.js v21.7.1 çš„æ–‡æ¡£ä¸­æåˆ°çš„ Callback APIï¼Œç‰¹åˆ«æŒ‡çš„æ˜¯ä¸ Node.js çš„ <code>inspector</code> æ¨¡å—ç›¸å…³çš„å›è°ƒæ¥å£ã€‚<code>inspector</code> æ¨¡å—å…è®¸ä½ ä» Node.js ç¨‹åºä¸­å¯ç”¨æ£€æŸ¥åŠŸèƒ½ï¼Œç±»ä¼¼äºæµè§ˆå™¨å¼€å‘è€…å·¥å…·ä¸­çš„ JavaScript è°ƒè¯•å·¥å…·ã€‚ä½¿ç”¨è¿™ä¸ªæ¨¡å—ï¼Œä½ å¯ä»¥æ£€æŸ¥å’Œè°ƒè¯•æ­£åœ¨è¿è¡Œçš„ Node.js åº”ç”¨ã€‚</p><h3 id="ä½¿ç”¨å®ä¾‹-1" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨å®ä¾‹-1"><span>ä½¿ç”¨å®ä¾‹</span></a></h3><p>å‡è®¾ä½ æ­£åœ¨å¼€å‘ä¸€ä¸ª Node.js åº”ç”¨ï¼Œå¹¶ä¸”ä½ é‡åˆ°äº†ä¸€ä¸ªå›°éš¾çš„ bugï¼Œéœ€è¦æ·±å…¥ç†è§£ä»£ç çš„è¿è¡Œæƒ…å†µæ‰èƒ½è§£å†³ã€‚è¿™æ—¶å€™ï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>inspector</code> æ¨¡å—ä¸­çš„ Callback API æ¥å¸®åŠ©ä½ è°ƒè¯•ã€‚</p><p><strong>æ­¥éª¤ 1</strong>: å¯¼å…¥ <code>inspector</code> æ¨¡å—ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> inspector</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">inspector</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>æ­¥éª¤ 2</strong>: ä½¿ç”¨ <code>inspector.open</code> æ–¹æ³•æ‰“å¼€ inspector ä¼šè¯ã€‚è¿™ä¸ªæ–¹æ³•å¯ä»¥æ¥å—å‡ ä¸ªå‚æ•°ï¼Œä½†æœ€ç®€å•çš„ç”¨æ³•åªéœ€æŒ‡å®šç«¯å£å·ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#616E88;">// æ‰“å¼€ä¸€ä¸ªç›‘å¬äº 9229 ç«¯å£çš„ inspector ä¼šè¯</span></span>
<span class="line"><span style="color:#D8DEE9;">inspector</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">open</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">9229</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>æ­¤æ—¶ï¼Œä½ å¯ä»¥ä½¿ç”¨ Chrome æµè§ˆå™¨è®¿é—® <code>chrome://inspect</code> å¹¶è¿æ¥åˆ°ä½ çš„ Node.js åº”ç”¨è¿›è¡Œè°ƒè¯•ã€‚</p><p><strong>å›è°ƒçš„åº”ç”¨</strong>: å‡è®¾ä½ è¿˜æƒ³åœ¨æˆåŠŸæ‰“å¼€ inspector ä¼šè¯ååœ¨æ§åˆ¶å°è¾“å‡ºä¸€æ¡æ¶ˆæ¯ã€‚<code>inspector.open</code> æ–¹æ³•å¹¶ä¸ç›´æ¥æ”¯æŒå›è°ƒå‡½æ•°ï¼Œä½†ä½ å¯ä»¥é€šè¿‡æ£€æµ‹ inspector ä¼šè¯çŠ¶æ€çš„å˜åŒ–æ¥å®ç°ä¸€ä¸ªç®€å•çš„å›è°ƒæœºåˆ¶ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#D8DEE9;">inspector</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">open</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">9229</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">inspector</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">url</span><span style="color:#D8DEE9FF;">()) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Inspector session started!</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æ²¡æœ‰ç›´æ¥ä½¿ç”¨ä¸€ä¸ªä¼ ç»Ÿçš„å›è°ƒå‡½æ•°ï¼Œä½†æ˜¯é€šè¿‡æ£€æŸ¥ <code>inspector.url()</code> çš„è¿”å›å€¼æ¥ç¡®å®š inspector ä¼šè¯æ˜¯å¦å·²ç»å¼€å§‹ï¼Œé—´æ¥å®ç°äº†å›è°ƒé€»è¾‘ã€‚</p><h3 id="æ€»ç»“-1" tabindex="-1"><a class="header-anchor" href="#æ€»ç»“-1"><span>æ€»ç»“</span></a></h3><p>è™½ç„¶è¿™ä¸ªä¾‹å­ä¸æ˜¯ä¸€ä¸ªå…¸å‹çš„å›è°ƒåº”ç”¨åœºæ™¯ï¼Œå› ä¸º <code>inspector</code> æ¨¡å—çš„ä½¿ç”¨æ¯”è¾ƒç‰¹æ®Šä¸”é«˜çº§ï¼Œä½†å®ƒå±•ç¤ºäº†åœ¨ Node.js ä¸­å¦‚ä½•ä½¿ç”¨æ¨¡å—å’ŒåŸºæœ¬çš„å›è°ƒæœºåˆ¶æ¥å®ç°æ›´å¤æ‚çš„åŠŸèƒ½ã€‚è®°ä½ï¼Œåœ¨ Node.js ä¸­ï¼Œå›è°ƒä¸»è¦ç”¨äºå¤„ç†å¼‚æ­¥æ“ä½œï¼Œä½¿ä½ çš„åº”ç”¨èƒ½å¤Ÿåœ¨ç­‰å¾…æ“ä½œå®Œæˆçš„åŒæ—¶ç»§ç»­æ‰§è¡Œå…¶ä»–ä»»åŠ¡ã€‚</p><h3 id="class-inspector-session-1" tabindex="-1"><a class="header-anchor" href="#class-inspector-session-1"><span><a href="https://nodejs.org/docs/latest/api/inspector.html#class-inspectorsession_1" target="_blank" rel="noopener noreferrer">Class: inspector.Session</a></span></a></h3><p>å½“æˆ‘ä»¬è°ˆè®º Node.js ä¸­çš„<code>inspector.Session</code>ï¼Œæˆ‘ä»¬å®é™…ä¸Šæ˜¯åœ¨è®¨è®º Node.js æä¾›çš„ä¸€ä¸ªéå¸¸å¼ºå¤§çš„åŠŸèƒ½ï¼Œå³å…è®¸å¼€å‘è€…èƒ½å¤Ÿæ£€æŸ¥å’Œè°ƒè¯•æ­£åœ¨è¿è¡Œçš„ Node.js ä»£ç ã€‚è¿™ä¸ªåŠŸèƒ½æ˜¯é€šè¿‡ Node.js çš„<code>inspector</code>æ¨¡å—æ¥å®ç°çš„ã€‚<code>inspector.Session</code>ç±»æ˜¯è¿™ä¸ªæ¨¡å—ä¸­çš„æ ¸å¿ƒéƒ¨åˆ†ä¹‹ä¸€ï¼Œå®ƒç”¨äºåˆ›å»ºä¸€ä¸ªæ£€æŸ¥ä¼šè¯ï¼ˆinspection sessionï¼‰ã€‚è¿™æ„å‘³ç€ä½ å¯ä»¥ç”¨å®ƒæ¥åŠ¨æ€åœ°æŸ¥è¯¢å’Œæ§åˆ¶ Node.js åº”ç”¨çš„å†…éƒ¨çŠ¶æ€ã€‚</p><h3 id="åŸºæœ¬æ¦‚å¿µ" tabindex="-1"><a class="header-anchor" href="#åŸºæœ¬æ¦‚å¿µ"><span>åŸºæœ¬æ¦‚å¿µ</span></a></h3><p>åœ¨æ·±å…¥äº†è§£<code>inspector.Session</code>ä¹‹å‰ï¼Œæœ‰å‡ ä¸ªåŸºæœ¬æ¦‚å¿µéœ€è¦å…ˆç†è§£ï¼š</p><ul><li><strong>Node.js Inspector</strong>ï¼šNode.js Inspector æ˜¯ä¸€ä¸ªåŸºäº Chrome DevTools Protocol çš„è°ƒè¯•æ¥å£ã€‚å®ƒå…è®¸å¼€å‘è€…è¿æ¥åˆ°è¿è¡Œä¸­çš„ Node.js è¿›ç¨‹ï¼Œä»¥ä¾¿å¯ä»¥è¿›è¡Œè°ƒè¯•æˆ–æ€§èƒ½åˆ†æã€‚</li><li><strong>ä¼šè¯ï¼ˆSessionï¼‰</strong>ï¼šä¸€ä¸ªâ€œä¼šè¯â€ä»£è¡¨ä¸ Node.js Inspector ä¹‹é—´çš„ä¸€ä¸ªè¿æ¥ã€‚é€šè¿‡è¿™ä¸ªè¿æ¥ï¼Œå¼€å‘è€…å¯ä»¥å‘é€å‘½ä»¤å’Œæ¥æ”¶äº‹ä»¶ã€‚</li></ul><h3 id="inspector-sessionçš„ä½œç”¨" tabindex="-1"><a class="header-anchor" href="#inspector-sessionçš„ä½œç”¨"><span><code>inspector.Session</code>çš„ä½œç”¨</span></a></h3><ol><li><strong>å¯åŠ¨å’Œåœæ­¢æ£€æŸ¥å™¨ï¼ˆInspectorï¼‰</strong>ï¼šè™½ç„¶ Node.js å¯ä»¥è‡ªåŠ¨å¯åŠ¨ inspector ç›‘å¬ç«¯å£ï¼Œä½¿ç”¨<code>inspector.Session</code>å¯ä»¥æ›´ç»†ç²’åº¦åœ°æ§åˆ¶æ£€æŸ¥å™¨çš„ç”Ÿå‘½å‘¨æœŸã€‚</li><li><strong>ä¸è¿è¡Œä¸­çš„ Node.js ä»£ç äº¤äº’</strong>ï¼šä½ å¯ä»¥å‘é€æŒ‡ä»¤ç»™ Node.js è¿›ç¨‹ï¼Œæ¯”å¦‚è·å–å †æ ˆè·Ÿè¸ªã€è§‚å¯Ÿä»£ç æ‰§è¡Œã€ä¿®æ”¹å˜é‡çš„å€¼ç­‰ã€‚</li><li><strong>ç›‘å¬è¿è¡Œæ—¶äº‹ä»¶</strong>ï¼šæ¯”å¦‚å¼‚å¸¸æŠ›å‡ºã€æ–­ç‚¹å‘½ä¸­ç­‰ã€‚</li></ol><h3 id="å®é™…è¿ç”¨ç¤ºä¾‹-2" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨ç¤ºä¾‹-2"><span>å®é™…è¿ç”¨ç¤ºä¾‹</span></a></h3><h4 id="ç¤ºä¾‹-1-å¯åŠ¨ä¸€ä¸ªæ£€æŸ¥ä¼šè¯" tabindex="-1"><a class="header-anchor" href="#ç¤ºä¾‹-1-å¯åŠ¨ä¸€ä¸ªæ£€æŸ¥ä¼šè¯"><span>ç¤ºä¾‹ 1ï¼šå¯åŠ¨ä¸€ä¸ªæ£€æŸ¥ä¼šè¯</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> inspector</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">inspector</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> session</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#D8DEE9;"> inspector</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">Session</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">session</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">connect</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// ä»è¿™ä¸€åˆ»èµ·ï¼Œä½ å¯ä»¥å¼€å§‹ä¸Node.jsè¿›è¡Œäº¤äº’ï¼Œæ¯”å¦‚è¯·æ±‚CPUçš„Profileræ•°æ®ç­‰ã€‚</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å¯¼å…¥äº†<code>inspector</code>æ¨¡å—ï¼Œå¹¶åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„<code>Session</code>å®ä¾‹ã€‚é€šè¿‡è°ƒç”¨<code>.connect()</code>æ–¹æ³•ï¼Œæˆ‘ä»¬å¯åŠ¨äº†ä¸ Node&#39;s Inspector çš„è¿æ¥ã€‚</p><h4 id="ç¤ºä¾‹-2-æ•è·æ§åˆ¶å°è¾“å‡º" tabindex="-1"><a class="header-anchor" href="#ç¤ºä¾‹-2-æ•è·æ§åˆ¶å°è¾“å‡º"><span>ç¤ºä¾‹ 2ï¼šæ•è·æ§åˆ¶å°è¾“å‡º</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#D8DEE9;">session</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">post</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Runtime.enable</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> ()</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">  session</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">post</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Runtime.evaluate</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#88C0D0;">    expression</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &#39;</span><span style="color:#A3BE8C;">console.log(&quot;Hello, world!&quot;)</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œé¦–å…ˆæˆ‘ä»¬å¯ç”¨äº†è¿è¡Œæ—¶ï¼Œç„¶åé€šè¿‡å‘ Node.js çš„è¿è¡Œç¯å¢ƒå‘é€ä¸€ä¸ª<code>Runtime.evaluate</code>å‘½ä»¤ï¼Œæ‰§è¡Œäº†ä¸€ä¸ªç®€å•çš„ JavaScript è¯­å¥ï¼š<code>console.log(&quot;Hello, world!&quot;)</code>ã€‚è¿™å°†åœ¨ Node.js åº”ç”¨çš„æ§åˆ¶å°ä¸Šæ‰“å°å‡º&quot;Hello, world!&quot;ã€‚</p><h4 id="ç¤ºä¾‹-3-ç›‘å¬æœªæ•è·çš„å¼‚å¸¸" tabindex="-1"><a class="header-anchor" href="#ç¤ºä¾‹-3-ç›‘å¬æœªæ•è·çš„å¼‚å¸¸"><span>ç¤ºä¾‹ 3ï¼šç›‘å¬æœªæ•è·çš„å¼‚å¸¸</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#D8DEE9;">session</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">post</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Debugger.enable</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> ()</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">  session</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">on</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Debugger.paused</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> (</span><span style="color:#D8DEE9;">params</span><span style="color:#ECEFF4;">)</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Uncaught exception:</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> params</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">  session</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">post</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Debugger.setPauseOnExceptions</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> {</span><span style="color:#88C0D0;"> state</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">uncaught</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;"> }</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆå¯ç”¨äº†è°ƒè¯•å™¨ï¼Œæ¥ç€æ³¨å†Œäº†ä¸€ä¸ªç›‘å¬å™¨æ¥ç›‘å¬<code>Debugger.paused</code>äº‹ä»¶ï¼Œè¿™ä¸ªäº‹ä»¶åœ¨æœªæ•è·å¼‚å¸¸å‘ç”Ÿæ—¶è§¦å‘ã€‚æœ€åï¼Œæˆ‘ä»¬é€šè¿‡è®¾ç½®<code>setPauseOnExceptions</code>ä¸º<code>uncaught</code>ï¼Œè®©è°ƒè¯•å™¨ä»…åœ¨å‡ºç°æœªæ•è·å¼‚å¸¸æ—¶æš‚åœã€‚</p><h3 id="ç»“è®º-1" tabindex="-1"><a class="header-anchor" href="#ç»“è®º-1"><span>ç»“è®º</span></a></h3><p>æ€»ç»“æ¥è¯´ï¼Œ<code>inspector.Session</code>ä¸º Node.js å¼€å‘è€…æä¾›äº†ä¸€ç§å¼ºå¤§çš„æ–¹å¼æ¥åŠ¨æ€åœ°æ£€æŸ¥å’Œæ“ä½œæ­£åœ¨è¿è¡Œçš„ Node.js åº”ç”¨ï¼Œæ— è®ºæ˜¯å¯¹äºè°ƒè¯•é—®é¢˜ã€æ€§èƒ½åˆ†æè¿˜æ˜¯ç†è§£åº”ç”¨çš„å†…éƒ¨è¡Œä¸ºï¼Œéƒ½æ˜¯ä¸€ä¸ªæå…·ä»·å€¼çš„å·¥å…·ã€‚é€šè¿‡ä¸Šè¿°ä¾‹å­ï¼Œä½ å¯ä»¥çœ‹åˆ°<code>inspector.Session</code>å¦‚ä½•è¢«ç”¨æ¥å®ç°ä¸åŒçš„è°ƒè¯•å’Œæ£€æŸ¥ä»»åŠ¡ã€‚</p><h4 id="new-inspector-session-2" tabindex="-1"><a class="header-anchor" href="#new-inspector-session-2"><span><a href="https://nodejs.org/docs/latest/api/inspector.html#new-inspectorsession_1" target="_blank" rel="noopener noreferrer">new inspector.Session()</a></span></a></h4><p>Node.js çš„ <code>inspector</code> æ¨¡å—æ˜¯ä¸€ä¸ªå®ç”¨çš„è°ƒè¯•å·¥å…·ï¼Œå®ƒæä¾›äº†ä¸€ç§æ–¹å¼æ¥ç›‘æ§å’Œæ£€æŸ¥ Node.js åº”ç”¨ç¨‹åºçš„è¿è¡ŒçŠ¶æ€ã€‚è¿™ä¸ªæ¨¡å—ä½¿ç”¨äº†ä¸ Chrome DevTools ç›¸åŒçš„åè®®ï¼Œå› æ­¤ä½ å¯ä»¥ä½¿ç”¨ç±»ä¼¼äºæµè§ˆå™¨ä¸­å¼€å‘è€…å·¥å…·çš„åŠŸèƒ½æ¥è°ƒè¯•ä½ çš„ Node.js ç¨‹åºã€‚</p><p>å½“ä½ åˆ›å»ºä¸€ä¸ªæ–°çš„ <code>inspector.Session</code> å®ä¾‹æ—¶ï¼Œä½ åŸºæœ¬ä¸Šæ˜¯åœ¨å¯åŠ¨ä¸€ä¸ªè°ƒè¯•ä¼šè¯ã€‚é€šè¿‡è¿™ä¸ªä¼šè¯ï¼Œä½ å¯ä»¥å‘é€å‘½ä»¤ç»™ Node.js çš„å†…ç½®è°ƒè¯•å™¨ï¼Œæ¥æ”¶äº‹ä»¶é€šçŸ¥ï¼Œä»¥åŠè·å–ç¨‹åºæ‰§è¡Œçš„å„ç§ä¿¡æ¯ã€‚</p><p>ä»¥ä¸‹æ˜¯å¦‚ä½•ä½¿ç”¨ <code>inspector.Session</code> çš„ç®€å•æ­¥éª¤ï¼š</p><ol><li>å¼•å…¥ <code>inspector</code> æ¨¡å—ã€‚</li><li>åˆ›å»ºä¸€ä¸ªæ–°çš„ <code>Session</code> å¯¹è±¡ã€‚</li><li>è¿æ¥åˆ°è°ƒè¯•å™¨ã€‚</li><li>äº¤äº’å¼åœ°å‘é€å‘½ä»¤å’Œç›‘å¬äº‹ä»¶ã€‚</li></ol><p>è®©æˆ‘ä»¬ç”¨ä¸€ä¸ªä¾‹å­æ¥è¯´æ˜è¿™äº›æ­¥éª¤ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#616E88;">// å¼•å…¥ Node.js çš„ inspector æ¨¡å—</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> inspector</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">inspector</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// åˆ›å»ºä¸€ä¸ªæ–°çš„è°ƒè¯•ä¼šè¯</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> session</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#D8DEE9;"> inspector</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">Session</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// è¿æ¥ä¼šè¯åˆ°è°ƒè¯•å™¨</span></span>
<span class="line"><span style="color:#D8DEE9;">session</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">connect</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// ä¸€æ—¦è¿æ¥äº†è°ƒè¯•ä¼šè¯ï¼Œä½ å¯ä»¥ä½¿ç”¨äº‹ä»¶ç›‘å¬</span></span>
<span class="line"><span style="color:#D8DEE9;">session</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">on</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Debugger.scriptParsed</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> (</span><span style="color:#D8DEE9;">script</span><span style="color:#ECEFF4;">)</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">`</span><span style="color:#A3BE8C;">Script was parsed: </span><span style="color:#81A1C1;">${</span><span style="color:#D8DEE9;">script</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">url</span><span style="color:#81A1C1;">}</span><span style="color:#ECEFF4;">`</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å‘é€ä¸€ä¸ªå‘½ä»¤ï¼šå¯åŠ¨è°ƒè¯•å™¨</span></span>
<span class="line"><span style="color:#D8DEE9;">session</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">post</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Debugger.enable</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> (</span><span style="color:#D8DEE9;">err</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> result</span><span style="color:#ECEFF4;">)</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">err</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">error</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Debugger cannot be enabled:</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> err</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">    return;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Debugger was enabled successfully</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// ... åœ¨è¿™é‡Œä½ å¯ä»¥ç»§ç»­å‘é€æ›´å¤šå‘½ä»¤æˆ–è®¾ç½®æ–­ç‚¹ç­‰ ...</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å®Œæˆåï¼Œå¿…é¡»æ–­å¼€ä¼šè¯</span></span>
<span class="line"><span style="color:#D8DEE9;">session</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">disconnect</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆå¯¼å…¥äº† <code>inspector</code> æ¨¡å—ï¼Œå¹¶ä¸”åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„ <code>Session</code> å¯¹è±¡ã€‚ç„¶åï¼Œæˆ‘ä»¬é€šè¿‡ <code>session.connect()</code> å‘½ä»¤è¿æ¥åˆ° Node.js çš„å†…ç½®è°ƒè¯•å™¨ã€‚é€šè¿‡æ³¨å†Œäº‹ä»¶ç›‘å¬å™¨ï¼Œæˆ‘ä»¬å¯ä»¥æ¥æ”¶å…³äºè„šæœ¬è§£æçš„é€šçŸ¥ã€‚é€šè¿‡ <code>session.post</code> æ–¹æ³•ï¼Œæˆ‘ä»¬å‘è°ƒè¯•å™¨å‘é€äº†ä¸€ä¸ªå‘½ä»¤æ¥å¯åŠ¨å®ƒï¼ˆåœ¨è¿™ä¸ªä¾‹å­ä¸­æ˜¯ &#39;Debugger.enable&#39;ï¼‰ã€‚æœ€åï¼Œåœ¨æˆ‘ä»¬å®Œæˆæ‰€æœ‰è°ƒè¯•ä»»åŠ¡åï¼Œæˆ‘ä»¬é€šè¿‡ <code>session.disconnect()</code> æ–­å¼€äº†ä¼šè¯è¿æ¥ã€‚</p><p>è¯·æ³¨æ„ï¼Œè¿™ä¸ª API ä¸»è¦æ˜¯ä¸ºå·¥å…·å’Œé«˜çº§ç”¨æˆ·è®¾è®¡çš„ã€‚å¦‚æœä½ åªæ˜¯éœ€è¦æ™®é€šçš„è°ƒè¯•ï¼Œå¯èƒ½ä½¿ç”¨åƒ <code>node --inspect</code> æˆ–é›†æˆå¼€å‘ç¯å¢ƒï¼ˆIDEï¼‰ä¸­çš„è°ƒè¯•å·¥å…·ä¼šæ›´æ–¹ä¾¿ã€‚</p><p>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œä¸€ä¸ª <code>inspector.Session</code> å¯èƒ½ç”¨äºç¼–å†™è‡ªåŠ¨åŒ–æµ‹è¯•è„šæœ¬ï¼Œæ€§èƒ½ç›‘è§†å·¥å…·ï¼Œæˆ–æ˜¯åœ¨ç”Ÿäº§ç¯å¢ƒä¸­å¯¹æœåŠ¡è¿›è¡Œè¯Šæ–­ã€‚ä¾‹å¦‚ï¼Œä½ å¯èƒ½æœ‰ä¸€ä¸ª Node.js æœåŠ¡æ­£åœ¨çº¿ä¸Šè¿è¡Œï¼Œè€Œä½ å¸Œæœ›èƒ½å¤Ÿåœ¨ä¸åœæ­¢æœåŠ¡çš„æƒ…å†µä¸‹ï¼ŒåŠ¨æ€åœ°è·å–æœ‰å…³å…¶æ€§èƒ½çš„æ•°æ®ã€‚è¿™æ—¶å€™ï¼Œä½ å¯ä»¥åˆ©ç”¨ <code>inspector.Session</code> æ¥åŠ¨æ€åœ°é™„åŠ åˆ°è¿™ä¸ªè¿›ç¨‹ä¸Šï¼Œå¹¶è·å–ä½ éœ€è¦çš„ä¿¡æ¯ã€‚</p><h4 id="event-inspectornotification-1" tabindex="-1"><a class="header-anchor" href="#event-inspectornotification-1"><span><a href="https://nodejs.org/docs/latest/api/inspector.html#event-inspectornotification_1" target="_blank" rel="noopener noreferrer">Event: &#39;inspectorNotification&#39;</a></span></a></h4><p>ç†è§£ Node.js ä¸­çš„<code>Event: &#39;inspectorNotification&#39;</code>ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆäº†è§£å‡ ä¸ªåŸºæœ¬æ¦‚å¿µï¼šNode.jsã€äº‹ä»¶ã€ä»¥åŠ Node.js çš„<code>inspector</code>æ¨¡å—ã€‚</p><h3 id="åŸºç¡€çŸ¥è¯†" tabindex="-1"><a class="header-anchor" href="#åŸºç¡€çŸ¥è¯†"><span>åŸºç¡€çŸ¥è¯†</span></a></h3><ol><li><strong>Node.js</strong> æ˜¯ä¸€ä¸ªå…è®¸ä½ ä½¿ç”¨ JavaScript æ¥ç¼–å†™åç«¯ä»£ç çš„è¿è¡Œæ—¶ç¯å¢ƒã€‚å®ƒéå¸¸é€‚åˆäºæ„å»ºå¿«é€Ÿçš„ã€å¯æ‰©å±•çš„ç½‘ç»œåº”ç”¨ç¨‹åºã€‚</li><li><strong>äº‹ä»¶</strong> åœ¨ Node.js ä¸­æ˜¯ä¸€ä¸ªå…³é”®æ¦‚å¿µã€‚Node.js æœ‰ä¸€ä¸ªå†…å»ºçš„<code>events</code>æ¨¡å—ï¼Œå…è®¸ä½ åˆ›å»ºã€è§¦å‘å’Œç›‘å¬è‡ªå®šä¹‰äº‹ä»¶ã€‚è¿™ä¸º Node.js çš„å¼‚æ­¥ç¼–ç¨‹é£æ ¼æä¾›äº†åŸºç¡€ã€‚</li><li><strong>Inspector æ¨¡å—</strong> æä¾›äº†ä¸€ç§æ–¹å¼æ¥è°ƒè¯•å’Œåˆ†æ Node.js åº”ç”¨ç¨‹åºã€‚é€šè¿‡è¿™ä¸ªæ¨¡å—ï¼Œä½ å¯ä»¥æ£€æŸ¥åº”ç”¨ç¨‹åºçš„å†…éƒ¨çŠ¶æ€ï¼Œæ¯”å¦‚è°ƒç”¨æ ˆã€å†…å­˜åˆ†é…ç­‰ç­‰ï¼Œå°±åƒåœ¨æµè§ˆå™¨ä¸­è°ƒè¯• JavaScript é‚£æ ·ã€‚</li></ol><h3 id="event-inspectornotification-2" tabindex="-1"><a class="header-anchor" href="#event-inspectornotification-2"><span>Event: &#39;inspectorNotification&#39;</span></a></h3><p>å½“æˆ‘ä»¬è°ˆåˆ°<code>Event: &#39;inspectorNotification&#39;</code>ï¼Œæˆ‘ä»¬æŒ‡çš„æ˜¯åœ¨ Node.js çš„<code>inspector</code>æ¨¡å—ä¸­è§¦å‘çš„ä¸€ä¸ªç‰¹å®šäº‹ä»¶ã€‚è¿™ä¸ªäº‹ä»¶ä¼šåœ¨ Inspector åè®®çš„é€šçŸ¥è¢«æ¥æ”¶æ—¶è§¦å‘ã€‚</p><h4 id="ä»€ä¹ˆæ˜¯-inspector-åè®®" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯-inspector-åè®®"><span>ä»€ä¹ˆæ˜¯ Inspector åè®®?</span></a></h4><p>Inspector åè®®æ˜¯ä¸€ç»„åº•å±‚è°ƒè¯•å’Œåˆ†æå‘½ä»¤ï¼ŒNode.js çš„<code>inspector</code>æ¨¡å—åŸºäºå®ƒæ¥å…è®¸å¼€å‘è€…ä¸æ­£åœ¨è¿è¡Œçš„ Node.js è¿›ç¨‹è¿›è¡Œäº¤äº’ï¼Œä»¥ä¾¿è¿›è¡Œè°ƒè¯•å’Œæ€§èƒ½åˆ†æã€‚</p><h4 id="å¦‚ä½•åˆ©ç”¨-inspectornotification" tabindex="-1"><a class="header-anchor" href="#å¦‚ä½•åˆ©ç”¨-inspectornotification"><span>å¦‚ä½•åˆ©ç”¨&#39;inspectorNotification&#39;?</span></a></h4><p>å‡è®¾ä½ æ­£åœ¨å¼€å‘ä¸€ä¸ª Node.js çš„ Web åº”ç”¨ï¼Œå¹¶ä¸”ä½ æ€€ç–‘æŸä¸ªç‰¹å®šçš„è¯·æ±‚å¯èƒ½å¯¼è‡´äº†å†…å­˜æ³„éœ²ã€‚ä½¿ç”¨<code>inspector</code>æ¨¡å—å’Œç›‘å¬<code>&#39;inspectorNotification&#39;</code>äº‹ä»¶ï¼Œä½ å¯ä»¥ç¼–å†™ä»£ç æ¥ç›‘è§†å’Œè®°å½•æ‰€æœ‰ä¸å†…å­˜ç›¸å…³çš„æ´»åŠ¨ï¼Œç„¶ååˆ†æé‚£äº›åœ¨å¤„ç†ç‰¹å®šè¯·æ±‚æ—¶æ¥æ”¶åˆ°çš„é€šçŸ¥ã€‚</p><h3 id="å®é™…åº”ç”¨ä¾‹å­-2" tabindex="-1"><a class="header-anchor" href="#å®é™…åº”ç”¨ä¾‹å­-2"><span>å®é™…åº”ç”¨ä¾‹å­</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> inspector</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">inspector</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> session</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#D8DEE9;"> inspector</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">Session</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// ä½¿ç”¨sessionè¿æ¥åˆ°Node.jsçš„Inspector API</span></span>
<span class="line"><span style="color:#D8DEE9;">session</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">connect</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// ç›‘å¬&#39;inspectorNotification&#39;äº‹ä»¶</span></span>
<span class="line"><span style="color:#D8DEE9;">session</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">on</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">inspectorNotification</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> (</span><span style="color:#D8DEE9;">message</span><span style="color:#ECEFF4;">)</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#616E88;">  // å‡è®¾æˆ‘ä»¬åªå¯¹â€œHeapâ€ç›¸å…³çš„é€šçŸ¥æ„Ÿå…´è¶£</span></span>
<span class="line"><span style="color:#81A1C1;">  if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">message</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">method</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">startsWith</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Heap</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Heap notification received:</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> message</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å¼€å¯Heapåˆ†æ</span></span>
<span class="line"><span style="color:#D8DEE9;">session</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">post</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">HeapProfiler.enable</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> ()</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Heap Profiler enabled</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#616E88;">  // è¿™é‡Œä½ å¯ä»¥ç»§ç»­ç¼–å†™ä»£ç æ¥è§¦å‘ä½ æƒ³è¦åˆ†æçš„æ“ä½œ</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆå¼•å…¥äº†<code>inspector</code>æ¨¡å—å¹¶åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„<code>Session</code>ã€‚é€šè¿‡ç›‘å¬<code>&#39;inspectorNotification&#39;</code>äº‹ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥è¿‡æ»¤å¹¶æ‰“å°å‡ºæ‰€æœ‰ç›¸å…³çš„ Heapï¼ˆå †ï¼‰é€šçŸ¥ï¼Œè¿™å¯¹äºè¯Šæ–­å†…å­˜é—®é¢˜éå¸¸æœ‰ç”¨ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œå¦‚æœä½ çš„åº”ç”¨å­˜åœ¨å†…å­˜æ³„æ¼ï¼Œä½ å¯ä»¥æ›´å®¹æ˜“åœ°è¯†åˆ«å‡ºé—®é¢˜çš„æ ¹æºã€‚</p><h3 id="å°ç»“" tabindex="-1"><a class="header-anchor" href="#å°ç»“"><span>å°ç»“</span></a></h3><p><code>Event: &#39;inspectorNotification&#39;</code>æ˜¯ Node.js<code>inspector</code>æ¨¡å—çš„ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„äº‹ä»¶ï¼Œä½¿å¾—å¼€å‘è€…å¯ä»¥åœ¨æ›´ç»†ç²’åº¦çš„çº§åˆ«ä¸Šè¿›è¡Œåº”ç”¨ç¨‹åºçš„è°ƒè¯•å’Œåˆ†æã€‚é€šè¿‡ç›‘å¬è¿™ä¸ªäº‹ä»¶ï¼Œä½ å¯ä»¥æ•è·åˆ°å„ç§å†…éƒ¨é€šçŸ¥ï¼Œå¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£ä½ çš„åº”ç”¨ç¨‹åºçš„è¡Œä¸ºå’Œæ€§èƒ½ç“¶é¢ˆã€‚</p><h4 id="event-inspector-protocol-method-1" tabindex="-1"><a class="header-anchor" href="#event-inspector-protocol-method-1"><span><a href="https://nodejs.org/docs/latest/api/inspector.html#event-inspector-protocol-method_1" target="_blank" rel="noopener noreferrer">Event: &lt;inspector-protocol-method&gt;;</a></span></a></h4><p>åœ¨ Node.js ä¸­ï¼Œ<code>inspector</code>æ¨¡å—æä¾›äº†ä¸€ç§ä¸ V8 å¼•æ“å†…ç½®çš„æ£€æŸ¥å™¨äº¤äº’çš„æ–¹å¼ã€‚è¿™ä¸ªæ£€æŸ¥å™¨å…è®¸ä½ è°ƒè¯•ä½ çš„ Node.js åº”ç”¨ç¨‹åºï¼Œå°±åƒåœ¨æµè§ˆå™¨ä¸­è°ƒè¯• JavaScript é‚£æ ·ã€‚</p><h3 id="äº‹ä»¶-lt-inspector-protocol-method-gt" tabindex="-1"><a class="header-anchor" href="#äº‹ä»¶-lt-inspector-protocol-method-gt"><span>äº‹ä»¶ï¼š<code>&amp;lt;inspector-protocol-method&amp;gt;</code></span></a></h3><p>è¦ç†è§£è¿™ä¸ªç‰¹å®šçš„äº‹ä»¶ï¼Œé¦–å…ˆæˆ‘ä»¬éœ€è¦æŒæ¡å‡ ä¸ªå…³é”®ç‚¹ï¼š</p><ol><li><p><strong>Inspector Protocolï¼ˆæ£€æŸ¥å™¨åè®®ï¼‰</strong>ï¼šè¿™æ˜¯ä¸€ä¸ªç½‘ç»œåè®®ï¼Œé€šè¿‡å®ƒä½ å¯ä»¥å‘é€å‘½ä»¤ç»™ V8 å¼•æ“çš„æ£€æŸ¥å™¨ï¼Œå¹¶æ¥æ”¶å“åº”ã€‚è¿™ä½¿å¾—è¿œç¨‹è°ƒè¯•æˆä¸ºå¯èƒ½ã€‚</p></li><li><p><strong>Methodï¼ˆæ–¹æ³•ï¼‰</strong>ï¼šåœ¨ Inspector Protocol ä¸­ï¼Œä¸€ä¸ªâ€œæ–¹æ³•â€ä»£è¡¨ä¸€ä¸ªå¯ä»¥è¢«è°ƒç”¨çš„å‘½ä»¤ï¼Œæ¯”å¦‚è·å–å½“å‰æ‰€æœ‰æ´»è·ƒçš„ JavaScript è„šæœ¬ã€æš‚åœæ‰§è¡Œçº¿ç¨‹ç­‰ã€‚</p></li></ol><p>å½“ä½ ä½¿ç”¨ Node.js çš„<code>inspector</code>æ¨¡å—å’Œå®ƒçš„ API æ¥è¿›è¡Œç¨‹åºçš„è°ƒè¯•æˆ–åˆ†ææ—¶ï¼Œä½ ä¼šé‡åˆ°å¾ˆå¤šè¿™æ ·çš„æ–¹æ³•è°ƒç”¨ã€‚æ¯å½“ä¸€ä¸ªè¿™æ ·çš„æ–¹æ³•è¢« Inspector å‘å‡ºæ—¶ï¼Œå°±ä¼šè§¦å‘ç›¸åº”çš„äº‹ä»¶ã€‚</p><h4 id="å®é™…è¿ç”¨ä¾‹å­" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨ä¾‹å­"><span>å®é™…è¿ç”¨ä¾‹å­</span></a></h4><p>å‡è®¾æˆ‘ä»¬æ­£åœ¨å¼€å‘ä¸€ä¸ª Node.js åº”ç”¨ç¨‹åºï¼Œå¹¶ä¸”åœ¨æŸä¸ªåœ°æ–¹ï¼Œæˆ‘ä»¬çš„ä»£ç ä¸è¡¨ç°å¦‚é¢„æœŸã€‚æˆ‘ä»¬å†³å®šä½¿ç”¨ Inspector æ¥è°ƒè¯•ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> inspector</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">inspector</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> session</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#D8DEE9;"> inspector</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">Session</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">session</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">connect</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// ç›‘å¬ä¸€ä¸ªç‰¹å®šçš„Inspectoråè®®æ–¹æ³•</span></span>
<span class="line"><span style="color:#D8DEE9;">session</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">on</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Debugger.paused</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> ()</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Debugger paused!</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// æ¿€æ´»è°ƒè¯•å™¨å¹¶æš‚åœæ‰§è¡Œ</span></span>
<span class="line"><span style="color:#D8DEE9;">session</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">post</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Debugger.enable</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> ()</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#616E88;">  // æ‰§è¡Œä¸€äº›ä»£ç </span></span>
<span class="line"><span style="color:#81A1C1;">  for</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> i</span><span style="color:#81A1C1;"> =</span><span style="color:#B48EAD;"> 0</span><span style="color:#81A1C1;">;</span><span style="color:#D8DEE9;"> i</span><span style="color:#ECEFF4;"> `</span><span style="color:#A3BE8C;">&lt;</span><span style="color:#ECEFF4;">`</span><span style="color:#B48EAD;"> 5</span><span style="color:#81A1C1;">;</span><span style="color:#D8DEE9;"> i</span><span style="color:#81A1C1;">++</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">i</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">  // ç¨‹åºæ‰§è¡Œåˆ°æ­¤å¤„ä¼šæš‚åœï¼Œå› ä¸ºè°ƒè¯•å™¨å·²ç»å¯ç”¨</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å¦ä¸€ä¸ªInspectoråè®®æ–¹æ³•çš„ä¾‹å­</span></span>
<span class="line"><span style="color:#D8DEE9;">session</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">on</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Runtime.consoleAPICalled</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> (</span><span style="color:#D8DEE9;">params</span><span style="color:#ECEFF4;">)</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Console method called:</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> params</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼š</p><ul><li>æˆ‘ä»¬å¯¼å…¥äº†<code>inspector</code>æ¨¡å—å¹¶åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„<code>Session</code>å®ä¾‹ã€‚</li><li>æˆ‘ä»¬ç›‘å¬äº†<code>Debugger.paused</code>äº‹ä»¶ï¼Œè¿™æ„å‘³ç€æ¯å½“è°ƒè¯•å™¨æš‚åœæ‰§è¡Œæ—¶ï¼Œæˆ‘ä»¬éƒ½ä¼šå¾—åˆ°é€šçŸ¥ã€‚</li><li>æˆ‘ä»¬é€šè¿‡è°ƒç”¨<code>session.post()</code>æ–¹æ³•å¹¶ä¼ é€’<code>Debugger.enable</code>ï¼Œå¯ç”¨äº†è°ƒè¯•å™¨ã€‚è¿™å‘Šè¯‰ V8 å¼•æ“çš„æ£€æŸ¥å™¨æˆ‘ä»¬æƒ³è¦å¼€å§‹è°ƒè¯•äº†ã€‚</li><li>å½“æˆ‘ä»¬çš„ç¨‹åºæ‰§è¡Œåˆ°<code>session.post(&#39;Debugger.enable&#39;, ...)</code>ä¹‹åï¼Œè°ƒè¯•å™¨ä¼šæš‚åœæ‰§è¡Œï¼Œå› ä¸ºæˆ‘ä»¬å·²ç»å‘é€äº†ä¸€ä¸ªæš‚åœçš„è¯·æ±‚ã€‚</li><li>æœ€åï¼Œæˆ‘ä»¬è¿˜ç›‘å¬äº†<code>Runtime.consoleAPICalled</code>äº‹ä»¶ï¼Œè¿™å¯ä»¥è®©æˆ‘ä»¬çŸ¥é“æ¯å½“æœ‰ console APIï¼ˆå¦‚<code>console.log</code>ï¼‰è¢«è°ƒç”¨æ—¶ã€‚</li></ul><p>é€šè¿‡è¿™ç§æ–¹å¼ï¼ŒNode.js çš„<code>inspector</code>æ¨¡å—å…è®¸æˆ‘ä»¬æ·±å…¥äº†è§£å’Œæ§åˆ¶æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºçš„æ‰§è¡Œï¼Œä¸ºæˆ‘ä»¬æä¾›äº†å¼ºå¤§çš„è°ƒè¯•èƒ½åŠ›ã€‚</p><h4 id="session-connect-1" tabindex="-1"><a class="header-anchor" href="#session-connect-1"><span><a href="https://nodejs.org/docs/latest/api/inspector.html#sessionconnect_1" target="_blank" rel="noopener noreferrer">session.connect()</a></span></a></h4><p>è¦è¯¦ç»†è€Œé€šä¿—åœ°äº†è§£<code>session.connect()</code>æ–¹æ³•åŠå…¶åœ¨ Node.js ä¸­çš„ä½¿ç”¨ï¼Œé¦–å…ˆæˆ‘ä»¬éœ€è¦æ˜ç™½å‡ ä¸ªå…³é”®æ¦‚å¿µï¼šNode.jsã€Inspector æ¨¡å—å’Œä¼šè¯ï¼ˆSessionï¼‰ã€‚</p><h3 id="_1-node-js-ç®€ä»‹" tabindex="-1"><a class="header-anchor" href="#_1-node-js-ç®€ä»‹"><span>1. Node.js ç®€ä»‹</span></a></h3><p>Node.js æ˜¯ä¸€ä¸ªå¼€æºä¸”è·¨å¹³å°çš„ JavaScript è¿è¡Œç¯å¢ƒï¼Œå®ƒå…è®¸ä½ åœ¨æœåŠ¡å™¨ç«¯è¿è¡Œ JavaScript ä»£ç ã€‚è¿™æ„å‘³ç€ä½ å¯ä»¥ç”¨ JavaScript åšå¾ˆå¤šäº‹æƒ…ï¼Œä¸ä»…ä»…æ˜¯ç½‘é¡µäº¤äº’ï¼Œè¿˜åŒ…æ‹¬è®¿é—®æ–‡ä»¶ç³»ç»Ÿã€åˆ›å»º HTTP æœåŠ¡ç­‰ã€‚</p><h3 id="_2-inspector-æ¨¡å—" tabindex="-1"><a class="header-anchor" href="#_2-inspector-æ¨¡å—"><span>2. Inspector æ¨¡å—</span></a></h3><p>Inspector æ¨¡å—æ˜¯ Node.js çš„ä¸€éƒ¨åˆ†ï¼Œå®ƒæä¾›äº†ä¸€ç§æ–¹å¼æ¥æ£€æŸ¥å’Œè°ƒè¯•æ­£åœ¨è¿è¡Œçš„ Node.js åº”ç”¨ç¨‹åºã€‚ä½ å¯ä»¥æƒ³è±¡å®ƒåƒæ˜¯ä¸€ä¸ªå†…ç½®çš„â€œæ£€æŸ¥å‘˜â€ï¼Œå…è®¸å¼€å‘è€…â€œæŸ¥çœ‹â€å…¶ Node.js åº”ç”¨ç¨‹åºçš„å†…éƒ¨æƒ…å†µï¼Œæ¯”å¦‚æŸ¥çœ‹å˜é‡å€¼ã€ç›‘æ§æ€§èƒ½æˆ–æ£€æµ‹å†…å­˜ä½¿ç”¨æƒ…å†µã€‚</p><h3 id="_3-ä¼šè¯-session" tabindex="-1"><a class="header-anchor" href="#_3-ä¼šè¯-session"><span>3. ä¼šè¯ï¼ˆSessionï¼‰</span></a></h3><p>åœ¨ Inspector æ¨¡å—çš„ä¸Šä¸‹æ–‡ä¸­ï¼Œä¸€ä¸ª<code>Session</code>æ˜¯ä¸ Node.js è¿›ç¨‹çš„ä¸€ä¸ªæ´»åŠ¨è¿æ¥çš„ä»£è¡¨ã€‚æ¯å½“ä½ æƒ³è¦å¼€å§‹ç›‘æ§æˆ–æ“ä½œä½ çš„åº”ç”¨ç¨‹åºï¼Œä½ éœ€è¦åˆ›å»ºå¹¶å¯åŠ¨ä¸€ä¸ªä¼šè¯ã€‚</p><h3 id="session-connect-2" tabindex="-1"><a class="header-anchor" href="#session-connect-2"><span>session.connect()</span></a></h3><p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬æ·±å…¥åˆ°<code>session.connect()</code>ã€‚è¿™ä¸ªæ–¹æ³•æ˜¯<code>Session</code>ç±»çš„ä¸€éƒ¨åˆ†ï¼Œå½“ä½ åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„ä¼šè¯å®ä¾‹åï¼Œéœ€è¦è°ƒç”¨<code>session.connect()</code>æ¥å®é™…å»ºç«‹è¿æ¥åˆ° Node.js åº”ç”¨ç¨‹åºçš„ Inspector æ¥å£ã€‚</p><p>ç®€å•æ¥è¯´ï¼Œ<code>session.connect()</code>å¼€å¯äº†ä¸€ä¸ªæ¡¥æ¢ï¼Œè®©ä½ é€šè¿‡è¿™ä¸ªä¼šè¯ä¸ Node.js åº”ç”¨ç¨‹åºè¿›è¡Œäº¤äº’ï¼Œæ— è®ºæ˜¯ä¸ºäº†è°ƒè¯•ä»£ç ã€æ”¶é›†æ€§èƒ½æ•°æ®ã€è¿˜æ˜¯å…¶ä»–ç›®çš„ã€‚</p><h3 id="å®é™…åº”ç”¨ç¤ºä¾‹" tabindex="-1"><a class="header-anchor" href="#å®é™…åº”ç”¨ç¤ºä¾‹"><span>å®é™…åº”ç”¨ç¤ºä¾‹</span></a></h3><h4 id="ç¤ºä¾‹-1-è°ƒè¯•åº”ç”¨" tabindex="-1"><a class="header-anchor" href="#ç¤ºä¾‹-1-è°ƒè¯•åº”ç”¨"><span>ç¤ºä¾‹ 1: è°ƒè¯•åº”ç”¨</span></a></h4><p>å‡è®¾ä½ æ­£åœ¨å¼€å‘ä¸€ä¸ª Node.js åº”ç”¨ï¼Œä½ æƒ³è¦æ£€æŸ¥æŸä¸ªç‰¹å®šæ‰§è¡Œç‚¹çš„å˜é‡çŠ¶æ€ã€‚</p><ol><li>ä½ ä¼šé¦–å…ˆåˆ›å»ºä¸€ä¸ª<code>Inspector Session</code>ã€‚</li><li>ä½¿ç”¨<code>session.connect()</code>è¿æ¥åˆ°ä½ çš„ Node.js åº”ç”¨ã€‚</li><li>åˆ©ç”¨ Inspector æä¾›çš„å…¶ä»– API æ¥æŸ¥è¯¢æˆ–ä¿®æ”¹åº”ç”¨çŠ¶æ€ï¼Œæ¯”å¦‚è®¾ç½®æ–­ç‚¹ã€æŸ¥çœ‹å˜é‡å€¼ç­‰ã€‚</li></ol><h4 id="ç¤ºä¾‹-2-æ€§èƒ½ç›‘æ§" tabindex="-1"><a class="header-anchor" href="#ç¤ºä¾‹-2-æ€§èƒ½ç›‘æ§"><span>ç¤ºä¾‹ 2: æ€§èƒ½ç›‘æ§</span></a></h4><p>å¦‚æœä½ æƒ³è¦åˆ†æä½ çš„ Node.js åº”ç”¨çš„æ€§èƒ½ï¼Œå¦‚å“åº”æ—¶é—´æˆ–å†…å­˜ä½¿ç”¨ï¼š</p><ol><li>åŒæ ·åœ°ï¼Œåˆ›å»ºä¸€ä¸ª<code>Inspector Session</code>ã€‚</li><li>è°ƒç”¨<code>session.connect()</code>å»ºç«‹è¿æ¥ã€‚</li><li>ä½¿ç”¨ç›¸å…³ API æ”¶é›†æ€§èƒ½æŒ‡æ ‡ï¼Œå¯èƒ½æ¶‰åŠå¯åŠ¨æ€§èƒ½åˆ†æå™¨ã€æ”¶é›† CPU æˆ–å†…å­˜ä½¿ç”¨æ•°æ®ç­‰ã€‚</li></ol><h3 id="å°ç»“-1" tabindex="-1"><a class="header-anchor" href="#å°ç»“-1"><span>å°ç»“</span></a></h3><p>æ€»ç»“èµ·æ¥ï¼Œ<code>session.connect()</code>åœ¨ Node.js çš„ Inspector æ¨¡å—ä¸­æ‰®æ¼”ç€é‡è¦è§’è‰²ï¼Œå®ƒæ˜¯å®ç°ç¨‹åºæ£€æŸ¥å’Œè°ƒè¯•çš„åŸºç¡€ã€‚é€šè¿‡å»ºç«‹ä¸€ä¸ªä¼šè¯ï¼Œå¼€å‘è€…å¯ä»¥æ·±å…¥äº†è§£å’Œæ§åˆ¶ä»–ä»¬çš„ Node.js åº”ç”¨ï¼Œå¸®åŠ©ä¼˜åŒ–æ€§èƒ½å¹¶æ’é™¤ Bugã€‚</p><h4 id="session-connecttomainthread-1" tabindex="-1"><a class="header-anchor" href="#session-connecttomainthread-1"><span><a href="https://nodejs.org/docs/latest/api/inspector.html#sessionconnecttomainthread_1" target="_blank" rel="noopener noreferrer">session.connectToMainThread()</a></span></a></h4><p>Node.js ä¸­çš„<code>session.connectToMainThread()</code>å‡½æ•°æ˜¯ä¸ Node.js Inspector åè®®ç›¸å…³çš„ä¸€ä¸ªåŠŸèƒ½ã€‚ä¸ºäº†æ›´å¥½åœ°è§£é‡Šè¿™ä¸ªå‡½æ•°ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦äº†è§£å‡ ä¸ªåŸºç¡€æ¦‚å¿µã€‚</p><h3 id="åŸºç¡€æ¦‚å¿µ" tabindex="-1"><a class="header-anchor" href="#åŸºç¡€æ¦‚å¿µ"><span>åŸºç¡€æ¦‚å¿µ</span></a></h3><ol><li><p><strong>Node.js Inspector</strong>: è¿™æ˜¯ Node.js æä¾›çš„ä¸€ä¸ªå†…ç½®è°ƒè¯•å™¨å·¥å…·ï¼Œç”¨äºè°ƒè¯• JavaScript ä»£ç ã€‚å®ƒéµå¾ª Chrome DevTools Protocolï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä½ å¯ä»¥ä½¿ç”¨åƒ Chrome æµè§ˆå™¨å¼€å‘è€…å·¥å…·é‚£æ ·çš„æ¥å£æ¥è°ƒè¯• Node.js è¿è¡Œçš„åº”ç”¨ã€‚</p></li><li><p><strong>Session</strong>: åœ¨ Node.js Inspector API ä¸­ï¼Œ<code>Session</code>æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä»£è¡¨äº†ä¸€ä¸ªä¸ Inspector çš„ä¼šè¯ã€‚é€šè¿‡è¿™ä¸ªä¼šè¯ï¼Œä½ å¯ä»¥å‘é€å‘½ä»¤å¹¶æ¥æ”¶äº‹ä»¶ã€‚</p></li><li><p><strong>ä¸»çº¿ç¨‹(Main Thread)</strong>: å¯¹äºå¤§å¤šæ•° Node.js åº”ç”¨è€Œè¨€ï¼Œä¸»çº¿ç¨‹å°±æ˜¯æ‰§è¡Œä½ çš„ JavaScript ä»£ç çš„çº¿ç¨‹ã€‚è™½ç„¶ Node.js æ”¯æŒé€šè¿‡ Worker Threads æ¥å®ç°å¤šçº¿ç¨‹ï¼Œä½†æ˜¯ä¸»çº¿ç¨‹é€šå¸¸æ˜¯æŒ‡å¯åŠ¨åº”ç”¨å¹¶æ‰§è¡Œåˆå§‹è„šæœ¬çš„é‚£ä¸ªçº¿ç¨‹ã€‚</p></li></ol><h3 id="session-connecttomainthread-2" tabindex="-1"><a class="header-anchor" href="#session-connecttomainthread-2"><span><code>session.connectToMainThread()</code></span></a></h3><p>åœ¨ Node.js v21.7.1 ç‰ˆæœ¬ä¸­ï¼Œ<code>session.connectToMainThread()</code>æ˜¯<code>Session</code>å¯¹è±¡çš„ä¸€ä¸ªæ–¹æ³•ï¼Œå…è®¸ä½ å°†å½“å‰çš„ Inspector ä¼šè¯è¿æ¥åˆ°ä¸»çº¿ç¨‹ã€‚è¿™æ„å‘³ç€ï¼Œé€šè¿‡è¿™ä¸ªä¼šè¯ï¼Œä½ å¯ä»¥å‘é€æŒ‡ä»¤ç»™ä¸»çº¿ç¨‹ï¼Œæ¯”å¦‚æ–­ç‚¹ã€æ­¥è¿›æ‰§è¡Œç­‰è°ƒè¯•æŒ‡ä»¤ï¼Œæˆ–è€…è·å–ä¸»çº¿ç¨‹çš„è¿è¡Œæ—¶ä¿¡æ¯ã€‚</p><h3 id="å®é™…è¿ç”¨ä¾‹å­-1" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨ä¾‹å­-1"><span>å®é™…è¿ç”¨ä¾‹å­</span></a></h3><p>å‡è®¾ä½ æ­£åœ¨å¼€å‘ä¸€ä¸ª Node.js åº”ç”¨ï¼Œå¹¶ä¸”é‡åˆ°äº†ä¸€ä¸ªéš¾ä»¥è¿½è¸ªçš„ bugã€‚ä½ æƒ³è¦æ·±å…¥äº†è§£é—®é¢˜çš„æ ¹æºï¼Œæ‰€ä»¥å†³å®šä½¿ç”¨ Node.js çš„è°ƒè¯•å·¥å…·ã€‚</p><ol><li><p><strong>å¯åŠ¨ Inspector ä¼šè¯</strong>: é¦–å…ˆï¼Œä½ éœ€è¦åˆ›å»ºå¹¶å¯åŠ¨ä¸€ä¸ª Inspector ä¼šè¯ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#616E88;">  // The document is from Ying Chao Tea.Do not use for commercial purposes.</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> inspector</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">inspector</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> session</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#D8DEE9;"> inspector</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">Session</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">session</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">connect</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>è¿æ¥åˆ°ä¸»çº¿ç¨‹</strong>: æ¥ä¸‹æ¥ï¼Œä½¿ç”¨<code>session.connectToMainThread()</code>æ¥ç¡®ä¿ä½ çš„ä¼šè¯è¿æ¥åˆ°äº† Node.js åº”ç”¨çš„ä¸»çº¿ç¨‹ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#D8DEE9;">session</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">connectToMainThread</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p><strong>è®¾ç½®æ–­ç‚¹å¹¶è°ƒè¯•</strong>: ç°åœ¨ï¼Œä½ å¯ä»¥é€šè¿‡ä¼šè¯å‘é€è°ƒè¯•æŒ‡ä»¤ï¼Œæ¯”å¦‚è®¾ç½®æ–­ç‚¹ï¼Œç„¶åä½¿ç”¨åƒ Chrome DevTools é‚£æ ·çš„ç•Œé¢æ¥é€æ­¥è·Ÿè¸ªä½ çš„ä»£ç æ‰§è¡Œæƒ…å†µã€‚</p><p>ä¾‹å¦‚ï¼Œä½ å¯èƒ½æƒ³è¦åœ¨æŸä¸ªç‰¹å®šçš„å‡½æ•°è°ƒç”¨å‰æš‚åœæ‰§è¡Œï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#616E88;">// å‡è®¾æˆ‘ä»¬æƒ³åœ¨è¿™ä¸ªå‡½æ•°è°ƒç”¨å‰æš‚åœ</span></span>
<span class="line"><span style="color:#81A1C1;">function</span><span style="color:#88C0D0;"> suspectFunction</span><span style="color:#ECEFF4;">()</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">This might be where things go wrong...</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä½ å¯ä»¥é€šè¿‡ Inspector API å‘é€ä¸€ä¸ªè®¾ç½®æ–­ç‚¹çš„å‘½ä»¤ï¼Œç„¶åå½“ç¨‹åºæ‰§è¡Œåˆ°è¿™é‡Œæ—¶ï¼Œå®ƒä¼šæš‚åœï¼Œè®©ä½ æœ‰æœºä¼šæ£€æŸ¥ç¨‹åºçš„çŠ¶æ€ã€‚</p></li></ol><p>é€šè¿‡è¿™ç§æ–¹å¼ï¼Œ<code>session.connectToMainThread()</code>æˆä¸ºä½ åœ¨è°ƒè¯• Node.js åº”ç”¨æ—¶çš„å¼ºå¤§å·¥å…·ï¼Œå¸®åŠ©ä½ è¯¦ç»†åœ°äº†è§£ç¨‹åºçš„æ‰§è¡Œæµç¨‹å’ŒçŠ¶æ€ï¼Œè¿›è€Œæ‰¾åˆ°å¹¶ä¿®å¤ bugã€‚</p><h4 id="session-disconnect-1" tabindex="-1"><a class="header-anchor" href="#session-disconnect-1"><span><a href="https://nodejs.org/docs/latest/api/inspector.html#sessiondisconnect_1" target="_blank" rel="noopener noreferrer">session.disconnect()</a></span></a></h4><p>åœ¨ Node.js ä¸­ï¼Œ<code>session.disconnect()</code>æ–¹æ³•æ˜¯ Inspector æ¨¡å—çš„ä¸€éƒ¨åˆ†ã€‚Inspector æ¨¡å—å…è®¸ä½ ä¸ Node.js çš„å†…ç½®è°ƒè¯•å™¨è¿›è¡Œäº¤äº’ï¼Œè¿™å¯¹äºå¼€å‘å’Œè°ƒè¯• Node.js åº”ç”¨æ¥è¯´éå¸¸æœ‰ç”¨ã€‚é€šè¿‡è¿™ä¸ªæ¨¡å—ï¼Œä½ å¯ä»¥æ£€æŸ¥å’Œæ§åˆ¶ Node.js è¿è¡Œæ—¶çš„å†…éƒ¨æ“ä½œï¼Œæ¯”å¦‚è®¾ç½®æ–­ç‚¹ã€ç›‘è§†å˜é‡ç­‰ã€‚</p><p><code>session.disconnect()</code>æ–¹æ³•çš„ä½œç”¨æ˜¯æ–­å¼€å½“å‰ Inspector ä¼šè¯çš„è¿æ¥ã€‚å½“ä½ åœ¨è°ƒè¯•åº”ç”¨æ—¶ï¼Œå¯èƒ½éœ€è¦æš‚æ—¶åœæ­¢æ¥æ”¶è°ƒè¯•ä¿¡æ¯æˆ–ç»“æŸå½“å‰çš„è°ƒè¯•ä¼šè¯ï¼Œè¿™æ—¶å°±å¯ä»¥ä½¿ç”¨<code>session.disconnect()</code>æ–¹æ³•ã€‚</p><h3 id="å®é™…è¿ç”¨ç¤ºä¾‹-3" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨ç¤ºä¾‹-3"><span>å®é™…è¿ç”¨ç¤ºä¾‹</span></a></h3><ol><li><p><strong>åŠ¨æ€è°ƒè¯•åº”ç”¨ï¼š</strong> å½“ä½ çš„ Node.js åº”ç”¨æ­£åœ¨è¿è¡Œï¼Œå¹¶ä¸”ä½ æƒ³è¦åŠ¨æ€åœ°è¿æ¥è°ƒè¯•å™¨è¿›è¡Œé—®é¢˜è¯Šæ–­æ—¶ï¼Œä½ å¯ä»¥åˆ›å»ºä¸€ä¸ª Inspector ä¼šè¯ï¼Œè¿›è¡Œè°ƒè¯•æ“ä½œï¼Œä¹‹åé€šè¿‡<code>session.disconnect()</code>æ¥æ–­å¼€ä¼šè¯ã€‚è¿™å…è®¸ä½ ä¸ä¸­æ–­åº”ç”¨çš„è¿è¡Œè€Œè¿›è¡Œè°ƒè¯•ã€‚</p></li><li><p><strong>è‡ªåŠ¨åŒ–æµ‹è¯•è„šæœ¬ï¼š</strong> å¦‚æœä½ åœ¨ç¼–å†™è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œå¯èƒ½éœ€è¦åœ¨æµ‹è¯•è¿‡ç¨‹ä¸­å¯åŠ¨å’Œå…³é—­è°ƒè¯•ä¼šè¯ï¼Œä»¥æ£€æŸ¥ç‰¹å®šçš„æ‰§è¡Œè·¯å¾„æˆ–å˜é‡çŠ¶æ€ã€‚åœ¨æµ‹è¯•ç»“æŸæˆ–è¾¾åˆ°æŸä¸ªæ¡ä»¶æ—¶ï¼Œä½¿ç”¨<code>session.disconnect()</code>æ¥æ¸…ç†å’Œç»“æŸè°ƒè¯•ä¼šè¯ã€‚</p></li><li><p><strong>æ¡ä»¶æ–­å¼€è¿æ¥ï¼š</strong> ä½ çš„åº”ç”¨å¯èƒ½åŒ…å«æŸäº›æ¡ä»¶ï¼Œåªæœ‰åœ¨è¿™äº›æ¡ä»¶æ»¡è¶³æ—¶æ‰éœ€è¦è°ƒè¯•ã€‚ä½ å¯ä»¥æ ¹æ®è¿™äº›æ¡ä»¶åŠ¨æ€åœ°è¿æ¥å’Œæ–­å¼€ Inspector ä¼šè¯ï¼Œä½¿ç”¨<code>session.disconnect()</code>æ¥ç®¡ç†è¿™ç§åŠ¨æ€è¿æ¥çš„ç”Ÿå‘½å‘¨æœŸã€‚</p></li></ol><h3 id="ä½¿ç”¨ä»£ç ç¤ºä¾‹" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨ä»£ç ç¤ºä¾‹"><span>ä½¿ç”¨ä»£ç ç¤ºä¾‹</span></a></h3><p>é¦–å…ˆï¼Œä½ éœ€è¦å¼•å…¥ Inspector æ¨¡å—å¹¶åˆ›å»ºä¸€ä¸ªæ–°çš„ä¼šè¯ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> inspector</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">inspector</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> session</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#D8DEE9;"> inspector</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">Session</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">session</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">connect</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ®µä»£ç åˆ›å»ºäº†ä¸€ä¸ª Inspector ä¼šè¯å¹¶è¿æ¥åˆ°äº† Node.js çš„è°ƒè¯•å™¨ã€‚åœ¨å®Œæˆè°ƒè¯•ä»»åŠ¡åï¼Œä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼æ–­å¼€ä¼šè¯ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#D8DEE9;">session</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">disconnect</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>è¿™æ ·å°±å¯ä»¥å®‰å…¨åœ°ç»“æŸè°ƒè¯•ä¼šè¯ï¼Œè€Œä¸ä¼šå½±å“åˆ° Node.js åº”ç”¨çš„å…¶ä½™éƒ¨åˆ†ã€‚è¿™åœ¨è¿›è¡Œæ€§èƒ½åˆ†ææˆ–è°ƒè¯•æ—¶éå¸¸æœ‰ç”¨ï¼Œå°¤å…¶æ˜¯åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œä½ å¸Œæœ›æœ€å°åŒ–å¯¹åº”ç”¨æ€§èƒ½çš„å½±å“ã€‚</p><h4 id="session-post-method-params-callback" tabindex="-1"><a class="header-anchor" href="#session-post-method-params-callback"><span><a href="https://nodejs.org/docs/latest/api/inspector.html#sessionpostmethod-params-callback" target="_blank" rel="noopener noreferrer">session.post(method[, params][, callback])</a></span></a></h4><p>Node.js çš„ <code>inspector</code> æ¨¡å—æä¾›äº†ä¸€ç§ç”¨äºä¸ V8 å¼•æ“å†…ç½®çš„æ£€æŸ¥å™¨äº¤äº’çš„æ–¹å¼ï¼Œè¿™å¯ä»¥è®©ä½ è°ƒè¯•å’Œåˆ†æ Node.js åº”ç”¨ç¨‹åºã€‚<code>session.post</code> æ–¹æ³•æ˜¯è¿™ä¸ªæ¨¡å—ä¸­çš„ä¸€ä¸ªæ ¸å¿ƒåŠŸèƒ½ï¼Œå®ƒå…è®¸ä½ å‘é€å‘½ä»¤åˆ° V8 çš„æ£€æŸ¥å™¨ï¼Œä»¥ä¾¿æ‰§è¡Œå„ç§è°ƒè¯•ä»»åŠ¡ã€‚</p><h3 id="åŸºæœ¬è¯­æ³•" tabindex="-1"><a class="header-anchor" href="#åŸºæœ¬è¯­æ³•"><span>åŸºæœ¬è¯­æ³•</span></a></h3><p><code>session.post</code> æ–¹æ³•çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#D8DEE9;">session</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">post</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">method</span><span style="color:#D8DEE9FF;">[</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> params</span><span style="color:#D8DEE9FF;">][</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> callback</span><span style="color:#D8DEE9FF;">])</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><strong>method</strong>: è¿™æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼ŒæŒ‡å®šäº†è¦å‘é€ç»™ V8 æ£€æŸ¥å™¨çš„å‘½ä»¤ã€‚</li><li><strong>params</strong>: (å¯é€‰) ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«å‘½ä»¤éœ€è¦çš„å‚æ•°ã€‚</li><li><strong>callback</strong>: (å¯é€‰) å½“å‘½ä»¤çš„æ‰§è¡Œç»“æœè¿”å›æ—¶ï¼Œè¿™ä¸ªå›è°ƒå‡½æ•°è¢«è°ƒç”¨ã€‚å®ƒæœ‰ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯é”™è¯¯ä¿¡æ¯ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰ï¼Œç¬¬äºŒä¸ªæ˜¯å‘½ä»¤çš„æ‰§è¡Œç»“æœã€‚</li></ul><h3 id="å®é™…è¿ç”¨ç¤ºä¾‹-4" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨ç¤ºä¾‹-4"><span>å®é™…è¿ç”¨ç¤ºä¾‹</span></a></h3><h4 id="_1-æŸ¥çœ‹å½“å‰çš„è°ƒç”¨å †æ ˆ" tabindex="-1"><a class="header-anchor" href="#_1-æŸ¥çœ‹å½“å‰çš„è°ƒç”¨å †æ ˆ"><span>1. æŸ¥çœ‹å½“å‰çš„è°ƒç”¨å †æ ˆ</span></a></h4><p>å‡è®¾ä½ æƒ³è¦åœ¨è°ƒè¯•è¿‡ç¨‹ä¸­æŸ¥çœ‹å½“å‰çš„è°ƒç”¨å †æ ˆï¼Œå¯ä»¥è¿™æ ·ä½¿ç”¨ <code>session.post</code> æ–¹æ³•ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> inspector</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">inspector</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> session</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#D8DEE9;"> inspector</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">Session</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">session</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">connect</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">session</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">post</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Runtime.getStackTrace</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> {},</span><span style="color:#ECEFF4;"> (</span><span style="color:#D8DEE9;">err</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> {</span><span style="color:#D8DEE9;"> stackTrace</span><span style="color:#ECEFF4;"> })</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">err</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">error</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">err</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span><span style="color:#81A1C1;"> else</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">stackTrace</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨äº† <code>Runtime.getStackTrace</code> å‘½ä»¤æ¥è·å–å½“å‰çš„è°ƒç”¨å †æ ˆä¿¡æ¯ï¼Œå¹¶é€šè¿‡å›è°ƒå‡½æ•°æ¥å¤„ç†è¿™äº›ä¿¡æ¯ã€‚</p><h4 id="_2-è®¾ç½®æ–­ç‚¹" tabindex="-1"><a class="header-anchor" href="#_2-è®¾ç½®æ–­ç‚¹"><span>2. è®¾ç½®æ–­ç‚¹</span></a></h4><p>å¦‚æœä½ æƒ³åœ¨ç‰¹å®šçš„æºä»£ç ä½ç½®è®¾ç½®ä¸€ä¸ªæ–­ç‚¹ï¼Œå¯ä»¥è¿™æ ·åšï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#D8DEE9;">session</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">post</span><span style="color:#D8DEE9FF;">(</span></span>
<span class="line"><span style="color:#ECEFF4;">  &quot;</span><span style="color:#A3BE8C;">Debugger.setBreakpoint</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#ECEFF4;">  {</span></span>
<span class="line"><span style="color:#88C0D0;">    location</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#88C0D0;">      scriptId</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">yourScriptId</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#616E88;"> // è„šæœ¬ID</span></span>
<span class="line"><span style="color:#88C0D0;">      lineNumber</span><span style="color:#ECEFF4;">:</span><span style="color:#B48EAD;"> 10</span><span style="color:#ECEFF4;">,</span><span style="color:#616E88;"> // è¡Œå·</span></span>
<span class="line"><span style="color:#88C0D0;">      columnNumber</span><span style="color:#ECEFF4;">:</span><span style="color:#B48EAD;"> 0</span><span style="color:#ECEFF4;">,</span><span style="color:#616E88;"> // åˆ—å·ï¼ˆå¯é€‰ï¼‰</span></span>
<span class="line"><span style="color:#ECEFF4;">    },</span></span>
<span class="line"><span style="color:#ECEFF4;">  },</span></span>
<span class="line"><span style="color:#ECEFF4;">  (</span><span style="color:#D8DEE9;">err</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> result</span><span style="color:#ECEFF4;">)</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">    if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">err</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">      console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">error</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">err</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">    }</span><span style="color:#81A1C1;"> else</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">      console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">æ–­ç‚¹è®¾ç½®æˆåŠŸ</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> result</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">    }</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span></span>
<span class="line"><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ä¸ªä¾‹å­å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ <code>Debugger.setBreakpoint</code> å‘½ä»¤å’Œç›¸åº”çš„å‚æ•°æ¥è®¾ç½®ä¸€ä¸ªæ–­ç‚¹ã€‚</p><h4 id="_3-ç›‘å¬-console-log" tabindex="-1"><a class="header-anchor" href="#_3-ç›‘å¬-console-log"><span>3. ç›‘å¬ console.log</span></a></h4><p>è¿˜å¯ä»¥é€šè¿‡ç›‘å¬ <code>Runtime.consoleAPICalled</code> äº‹ä»¶æ¥è·å– <code>console.log</code> è°ƒç”¨çš„ä¿¡æ¯ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#D8DEE9;">session</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">connect</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">session</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">post</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Runtime.enable</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> ()</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">  session</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">on</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Runtime.consoleAPICalled</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> ({</span><span style="color:#D8DEE9;"> args</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> type</span><span style="color:#ECEFF4;"> })</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">`</span><span style="color:#81A1C1;">${</span><span style="color:#D8DEE9;">type</span><span style="color:#81A1C1;">}</span><span style="color:#A3BE8C;">:</span><span style="color:#ECEFF4;">`</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> args</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">map</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">arg</span><span style="color:#ECEFF4;">)</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#D8DEE9;"> arg</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">value</span><span style="color:#D8DEE9FF;">)</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">join</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">  // è§¦å‘ console.log</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Hello, world!</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ®µä»£ç å…ˆå¯ç”¨äº† Runtimeï¼Œç„¶åç›‘å¬ <code>Runtime.consoleAPICalled</code> äº‹ä»¶ã€‚å½“æœ‰ <code>console.log</code> è¢«è°ƒç”¨æ—¶ï¼Œå°±ä¼šè§¦å‘è¿™ä¸ªäº‹ä»¶ï¼Œå¹¶ä¸”å¯ä»¥è·å–åˆ°ä¼ é€’ç»™ <code>console.log</code> çš„å‚æ•°ã€‚</p><p>ä»¥ä¸Šä¾‹å­ä»…æ˜¯ <code>session.post</code> æ–¹æ³•åœ¨ Node.js åº”ç”¨ç¨‹åºè°ƒè¯•å’Œåˆ†æä¸­åº”ç”¨çš„å†°å±±ä¸€è§’ã€‚é€šè¿‡ç†Ÿæ‚‰ <code>inspector</code> æ¨¡å—æä¾›çš„ä¸åŒå‘½ä»¤å’Œäº‹ä»¶ï¼Œä½ å¯ä»¥å¯¹åº”ç”¨ç¨‹åºè¿›è¡Œæ·±å…¥çš„è°ƒè¯•å’Œæ€§èƒ½åˆ†æã€‚</p><h4 id="example-usage-1" tabindex="-1"><a class="header-anchor" href="#example-usage-1"><span><a href="https://nodejs.org/docs/latest/api/inspector.html#example-usage_1" target="_blank" rel="noopener noreferrer">Example usage</a></span></a></h4><p>Node.js æ˜¯ä¸€ä¸ªåŸºäº Chrome V8 å¼•æ“çš„ JavaScript è¿è¡Œç¯å¢ƒï¼Œè®©å¼€å‘è€…å¯ä»¥ä½¿ç”¨ JavaScript æ¥ç¼–å†™æœåŠ¡å™¨ç«¯çš„ä»£ç ã€‚Node.js éå¸¸é€‚åˆå¤„ç†é«˜å¹¶å‘ã€I/O å¯†é›†å‹çš„ç½‘ç»œåº”ç”¨ç¨‹åºã€‚</p><p>åœ¨ Node.js v21.7.1 çš„æ–‡æ¡£ä¸­æåˆ°äº†<code>inspector</code>æ¨¡å—çš„ä¸€äº›ç”¨æ³•ã€‚<code>inspector</code>æ¨¡å—å…è®¸ä½ ä» Node.js ç¨‹åºä¸­å¯åŠ¨ä¸€ä¸ª Inspector ä¼šè¯ã€‚è¿™ä¸ªåŠŸèƒ½ä¸»è¦è¢«ç”¨äºè°ƒè¯•å’Œæ€§èƒ½åˆ†æã€‚</p><h3 id="åŸºæœ¬æ¦‚å¿µ-1" tabindex="-1"><a class="header-anchor" href="#åŸºæœ¬æ¦‚å¿µ-1"><span>åŸºæœ¬æ¦‚å¿µ</span></a></h3><p>ä¸ºäº†ç†è§£å¦‚ä½•ä½¿ç”¨<code>inspector</code>æ¨¡å—ï¼Œé¦–å…ˆéœ€è¦çŸ¥é“å‡ ä¸ªé‡è¦æ¦‚å¿µï¼š</p><ul><li><strong>Inspector ä¼šè¯ï¼ˆSessionï¼‰</strong>ï¼šå½“ä½ æƒ³è¦å¯¹ä½ çš„ Node.js ç¨‹åºè¿›è¡Œè°ƒè¯•æˆ–æ”¶é›†æ€§èƒ½æ•°æ®æ—¶ï¼Œä½ ä¼šåˆ›å»ºä¸€ä¸ª Inspector ä¼šè¯ã€‚è¿™ä¸ªä¼šè¯å¯ä»¥é€šè¿‡ç‰¹å®šçš„åè®®ä¸ Node.js è¿›ç¨‹é€šä¿¡ã€‚</li><li><strong>è°ƒè¯•å™¨å®¢æˆ·ç«¯ï¼ˆDebugger Clientï¼‰</strong>ï¼šè¿™æ˜¯è¿æ¥åˆ° Node.js è¿›ç¨‹çš„å¤–éƒ¨å·¥å…·ï¼Œä¾‹å¦‚æµè§ˆå™¨å¼€å‘è€…å·¥å…·æˆ–å…¶ä»–æ”¯æŒç›¸åŒåè®®çš„è°ƒè¯•å·¥å…·ã€‚</li></ul><h3 id="ä½¿ç”¨å®ä¾‹-2" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨å®ä¾‹-2"><span>ä½¿ç”¨å®ä¾‹</span></a></h3><p>ä»¥ä¸‹æ˜¯å¦‚ä½•ä½¿ç”¨ Node.js <code>inspector</code>æ¨¡å—çš„ä¸€ä¸ªç®€å•ä¾‹å­ï¼š</p><h4 id="_1-å¯åŠ¨-inspector-ä¼šè¯" tabindex="-1"><a class="header-anchor" href="#_1-å¯åŠ¨-inspector-ä¼šè¯"><span>1. å¯åŠ¨ Inspector ä¼šè¯</span></a></h4><p>é¦–å…ˆï¼Œä½ éœ€è¦å¯¼å…¥<code>inspector</code>æ¨¡å—ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªæ–°çš„ä¼šè¯ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> inspector</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">inspector</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> session</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#D8DEE9;"> inspector</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">Session</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-å¼€å§‹ä¼šè¯" tabindex="-1"><a class="header-anchor" href="#_2-å¼€å§‹ä¼šè¯"><span>2. å¼€å§‹ä¼šè¯</span></a></h4><p>æ¥ä¸‹æ¥ï¼Œä½ éœ€è¦å¯åŠ¨ä¼šè¯ä»¥ä¾¿å¼€å§‹ä¸ Node.js è¿›ç¨‹äº¤äº’ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#D8DEE9;">session</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">connect</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="_3-ä½¿ç”¨ä¼šè¯" tabindex="-1"><a class="header-anchor" href="#_3-ä½¿ç”¨ä¼šè¯"><span>3. ä½¿ç”¨ä¼šè¯</span></a></h4><p>ç°åœ¨ä¼šè¯å·²ç»å¼€å§‹ï¼Œä½ å¯ä»¥ä½¿ç”¨å®ƒæ¥æ‰§è¡Œå„ç§æ“ä½œï¼Œæ¯”å¦‚å¯ç”¨ Debuggerã€æ”¶é›† CPU é…ç½®æ–‡ä»¶ç­‰ã€‚è¿™é‡Œä¸¾ä¸€ä¸ªå¯ç”¨ Debugger çš„ä¾‹å­ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#616E88;">// å¯ç”¨Debugger</span></span>
<span class="line"><span style="color:#D8DEE9;">session</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">post</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Debugger.enable</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> (</span><span style="color:#D8DEE9;">err</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> params</span><span style="color:#ECEFF4;">)</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">err</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">error</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">err</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">    return;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Debugger enabled</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="å®é™…åº”ç”¨ä¾‹å­-3" tabindex="-1"><a class="header-anchor" href="#å®é™…åº”ç”¨ä¾‹å­-3"><span>å®é™…åº”ç”¨ä¾‹å­</span></a></h4><p>è®©æˆ‘ä»¬çœ‹çœ‹åœ¨å®é™…å¼€å‘ä¸­<code>inspector</code>æ¨¡å—å¯èƒ½çš„åº”ç”¨åœºæ™¯ï¼š</p><ul><li><p><strong>è°ƒè¯•åº”ç”¨ç¨‹åº</strong>ï¼šå½“ä½ çš„ Node.js åº”ç”¨ç¨‹åºè¡¨ç°å‡ºæ„æ–™ä¹‹å¤–çš„è¡Œä¸ºæˆ–æ€§èƒ½é—®é¢˜æ—¶ï¼Œä½ å¯ä»¥ä½¿ç”¨<code>inspector</code>æ¨¡å—æ¥å¯åŠ¨ä¸€ä¸ªè°ƒè¯•ä¼šè¯ï¼Œç„¶åä½¿ç”¨ Chrome å¼€å‘è€…å·¥å…·ï¼ˆæˆ–å…¶ä»–æ”¯æŒçš„è°ƒè¯•å®¢æˆ·ç«¯ï¼‰è¿æ¥åˆ°è¿™ä¸ªä¼šè¯ã€‚è¿™æ ·ï¼Œä½ å°±å¯ä»¥åƒè°ƒè¯•å‰ç«¯ JavaScript ä»£ç ä¸€æ ·è°ƒè¯•ä½ çš„æœåŠ¡ç«¯ä»£ç ï¼ŒåŒ…æ‹¬è®¾ç½®æ–­ç‚¹ã€æ£€æŸ¥å˜é‡ç­‰ã€‚</p></li><li><p><strong>æ€§èƒ½åˆ†æ</strong>ï¼šå¦‚æœä½ æƒ³è¦åˆ†æä½ çš„ Node.js åº”ç”¨çš„æ€§èƒ½ç“¶é¢ˆï¼Œä½ å¯ä»¥ä½¿ç”¨<code>inspector</code>æ¨¡å—æ¥æ”¶é›†æ€§èƒ½é…ç½®æ–‡ä»¶ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥æ”¶é›† CPU å’Œå†…å­˜ä½¿ç”¨æƒ…å†µçš„ä¿¡æ¯ï¼Œç„¶åä½¿ç”¨ä¸“é—¨çš„å·¥å…·æ¥åˆ†æè¿™äº›ä¿¡æ¯ï¼Œæ‰¾åˆ°ä¼˜åŒ–ç‚¹ã€‚</p></li></ul><p>ä½¿ç”¨<code>inspector</code>æ¨¡å—ä½¿å¾— Node.js çš„è°ƒè¯•å’Œæ€§èƒ½åˆ†æå˜å¾—æ›´åŠ çµæ´»å’Œå¼ºå¤§ã€‚å¸Œæœ›è¿™ä¸ªè§£é‡Šå’Œä¾‹å­èƒ½å¤Ÿå¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å¦‚ä½•ä½¿ç”¨ Node.js çš„<code>inspector</code>æ¨¡å—ã€‚</p><h5 id="cpu-profiler-1" tabindex="-1"><a class="header-anchor" href="#cpu-profiler-1"><span><a href="https://nodejs.org/docs/latest/api/inspector.html#cpu-profiler_1" target="_blank" rel="noopener noreferrer">CPU profiler</a></span></a></h5><p>Node.js çš„ CPU profiler ä¸»è¦ç”¨äºåˆ†æå’Œä¼˜åŒ–åº”ç”¨ç¨‹åºçš„æ€§èƒ½ã€‚åœ¨ Node.js v21.7.1 ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨å†…ç½®çš„ <code>inspector</code> æ¨¡å—æ¥è®¿é—® CPU profilerã€‚</p><p>ä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨ CPU profiler çš„ç®€å•ä¾‹å­ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#616E88;">// å¼•å…¥ inspector æ¨¡å—</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> inspector</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">inspector</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// åˆ›å»ºä¸€ä¸ªæ–°çš„ Session</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> session</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#D8DEE9;"> inspector</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">Session</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// è¿æ¥åˆ° V8 å¼•æ“</span></span>
<span class="line"><span style="color:#D8DEE9;">session</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">connect</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å¯åŠ¨ CPU profiler</span></span>
<span class="line"><span style="color:#D8DEE9;">session</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">post</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Profiler.enable</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> ()</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">  session</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">post</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Profiler.start</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> ()</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#616E88;">    // è¿™é‡Œæ˜¯ä½ çš„åº”ç”¨ç¨‹åºä»£ç ï¼Œä¾‹å¦‚ï¼š</span></span>
<span class="line"><span style="color:#81A1C1;">    for</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> i</span><span style="color:#81A1C1;"> =</span><span style="color:#B48EAD;"> 0</span><span style="color:#81A1C1;">;</span><span style="color:#D8DEE9;"> i</span><span style="color:#ECEFF4;"> `</span><span style="color:#A3BE8C;">&lt;</span><span style="color:#ECEFF4;">`</span><span style="color:#B48EAD;"> 100000</span><span style="color:#81A1C1;">;</span><span style="color:#D8DEE9;"> i</span><span style="color:#81A1C1;">++</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">      console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">i</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">    // åœæ­¢ CPU profiler</span></span>
<span class="line"><span style="color:#D8DEE9;">    session</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">post</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Profiler.stop</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> (</span><span style="color:#D8DEE9;">err</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> {</span><span style="color:#D8DEE9;"> profile</span><span style="color:#ECEFF4;"> })</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#616E88;">      // è¾“å‡º CPU profiler çš„ç»“æœ</span></span>
<span class="line"><span style="color:#D8DEE9;">      console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">profile</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">      // æ–­å¼€ä¸ V8 å¼•æ“çš„è¿æ¥</span></span>
<span class="line"><span style="color:#D8DEE9;">      session</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">disconnect</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">    }</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆå¼•å…¥äº† <code>inspector</code> æ¨¡å—å¹¶åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„ <code>Session</code>ã€‚ç„¶åï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>session.connect()</code> æ–¹æ³•è¿æ¥åˆ° V8 å¼•æ“ã€‚æ¥ç€ï¼Œæˆ‘ä»¬é€šè¿‡è°ƒç”¨ <code>Profiler.enable</code> å’Œ <code>Profiler.start</code> å‘½ä»¤æ¥å¯åŠ¨ CPU profilerã€‚</p><p>åœ¨ <code>Profiler.start</code> å›è°ƒå‡½æ•°ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ”¾ç½®æˆ‘ä»¬æƒ³è¦åˆ†æçš„ä»£ç ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ç®€å•åœ°å¾ªç¯æ‰“å°äº†ä¸€äº›æ•°å­—ã€‚å®é™…åº”ç”¨ä¸­ï¼Œè¿™é‡Œå¯ä»¥æ˜¯ä½ çš„åº”ç”¨ç¨‹åºçš„ä¸»è¦é€»è¾‘ã€‚</p><p>å½“æˆ‘ä»¬æƒ³è¦åœæ­¢åˆ†ææ—¶ï¼Œæˆ‘ä»¬è°ƒç”¨ <code>Profiler.stop</code> å‘½ä»¤ã€‚è¿™å°†è¿”å›ä¸€ä¸ªåŒ…å«åˆ†æç»“æœçš„ <code>profile</code> å¯¹è±¡ã€‚æˆ‘ä»¬å¯ä»¥å°†è¿™ä¸ªå¯¹è±¡è¾“å‡ºåˆ°æ§åˆ¶å°æˆ–ä¿å­˜åˆ°æ–‡ä»¶ä¸­ä»¥ä¾›è¿›ä¸€æ­¥åˆ†æã€‚</p><p>æœ€åï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>session.disconnect()</code> æ–¹æ³•æ–­å¼€ä¸ V8 å¼•æ“çš„è¿æ¥ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒCPU profiler çš„ä½¿ç”¨ä¼šå¯¹åº”ç”¨ç¨‹åºçš„æ€§èƒ½äº§ç”Ÿä¸€å®šçš„å½±å“ï¼Œå› æ­¤é€šå¸¸å»ºè®®ä»…åœ¨å¼€å‘å’Œè°ƒè¯•é˜¶æ®µä½¿ç”¨å®ƒã€‚åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œåº”è°¨æ…ä½¿ç”¨ï¼Œå¹¶ç¡®ä¿åœ¨ä¸éœ€è¦æ—¶åŠæ—¶å…³é—­ profilerã€‚</p><h5 id="heap-profiler-1" tabindex="-1"><a class="header-anchor" href="#heap-profiler-1"><span><a href="https://nodejs.org/docs/latest/api/inspector.html#heap-profiler_1" target="_blank" rel="noopener noreferrer">Heap profiler</a></span></a></h5><p>Node.js ä¸­çš„ Heap profiler æ˜¯ä¸€ä¸ªç”¨äºåˆ†æå’Œä¼˜åŒ–å†…å­˜ä½¿ç”¨çš„å·¥å…·ã€‚é€šè¿‡å®ƒï¼Œå¼€å‘è€…å¯ä»¥ç†è§£åº”ç”¨ç¨‹åºåœ¨è¿è¡Œæ—¶å¦‚ä½•æ¶ˆè€—å†…å­˜èµ„æºï¼Œå¹¶æ‰¾å‡ºæ½œåœ¨çš„å†…å­˜æ³„éœ²æˆ–è¿‡åº¦å ç”¨å†…å­˜çš„åœ°æ–¹ã€‚åœ¨ Node.js v21.7.1 ç‰ˆæœ¬ä¸­ï¼ŒHeap profiler ä½œä¸º Node.js Inspector æ¨¡å—çš„ä¸€éƒ¨åˆ†æä¾›ã€‚</p><h3 id="heap-profiler-ç®€ä»‹" tabindex="-1"><a class="header-anchor" href="#heap-profiler-ç®€ä»‹"><span>Heap Profiler ç®€ä»‹</span></a></h3><p>é¦–å…ˆï¼ŒHeapï¼ˆå †ï¼‰æ˜¯æŒ‡åŠ¨æ€åˆ†é…çš„å†…å­˜åŒºåŸŸï¼ŒJavaScript å¯¹è±¡å’Œå‡½æ•°è°ƒç”¨æ—¶çš„ä¸Šä¸‹æ–‡å°±æ˜¯å­˜å‚¨åœ¨è¿™é‡Œã€‚éšç€åº”ç”¨ç¨‹åºçš„è¿è¡Œï¼Œå †å†…å­˜çš„ä½¿ç”¨ä¼šä¸æ–­å˜åŒ–ï¼Œå¯èƒ½å‡ºç°å†…å­˜æ³„éœ²ï¼ˆå†…å­˜è¢«æ— æ•ˆæˆ–ä¸å†éœ€è¦çš„å¯¹è±¡å ç”¨è€Œä¸èƒ½é‡Šæ”¾ï¼‰ï¼Œå¯¼è‡´åº”ç”¨æ€§èƒ½ä¸‹é™æˆ–å´©æºƒã€‚</p><p>Heap profiler ä½¿å¾—å¼€å‘è€…èƒ½å¤Ÿç”Ÿæˆå †å†…å­˜å¿«ç…§ï¼ˆheap snapshotï¼‰ã€è®°å½•å †åˆ†é…æ—¶é—´çº¿ï¼ˆheap allocation timelineï¼‰å’Œè¿›è¡Œå †æ¯”è¾ƒåˆ†æï¼ˆheap comparisonï¼‰ã€‚é€šè¿‡è¿™äº›ä¿¡æ¯ï¼Œå¯ä»¥è¯†åˆ«å‡ºå“ªäº›å¯¹è±¡å ç”¨äº†è¿‡å¤šå†…å­˜ã€å†…å­˜ä½•æ—¶è¢«åˆ†é…ä»¥åŠæ˜¯å¦å­˜åœ¨æ³„éœ²ã€‚</p><h3 id="å®é™…è¿ç”¨ä¸¾ä¾‹" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨ä¸¾ä¾‹"><span>å®é™…è¿ç”¨ä¸¾ä¾‹</span></a></h3><h4 id="ä¾‹å­-1-æŸ¥æ‰¾å†…å­˜æ³„æ¼" tabindex="-1"><a class="header-anchor" href="#ä¾‹å­-1-æŸ¥æ‰¾å†…å­˜æ³„æ¼"><span>ä¾‹å­ 1ï¼šæŸ¥æ‰¾å†…å­˜æ³„æ¼</span></a></h4><p>å‡è®¾ä½ æ­£åœ¨å¼€å‘ä¸€ä¸ª Node.js æœåŠ¡å™¨ï¼Œéšç€è¿è¡Œæ—¶é—´çš„å¢é•¿ï¼Œä½ å‘ç°æœåŠ¡å™¨å˜å¾—è¶Šæ¥è¶Šæ…¢ï¼Œæœ€ç»ˆç”šè‡³å“åº”è¯·æ±‚å¤±è´¥ã€‚ä½¿ç”¨ Heap profiler ç”Ÿæˆå †å¿«ç…§ï¼Œä½ å¯ä»¥è§‚å¯Ÿåˆ°æŸäº›å¯¹è±¡å³ä½¿å®ƒä»¬ä¸å†éœ€è¦ï¼Œä»ç„¶å ç”¨å¤§é‡å†…å­˜ã€‚é€šè¿‡æ¯”è¾ƒä¸åŒæ—¶é—´ç‚¹çš„å †å¿«ç…§ï¼Œä½ å¯ä»¥è¿½è¸ªåˆ°å¯¼è‡´å†…å­˜æ³„æ¼çš„ä»£ç è·¯å¾„ï¼Œè¿›è€Œä¿®å¤é—®é¢˜ã€‚</p><h4 id="ä¾‹å­-2-æ€§èƒ½ä¼˜åŒ–" tabindex="-1"><a class="header-anchor" href="#ä¾‹å­-2-æ€§èƒ½ä¼˜åŒ–"><span>ä¾‹å­ 2ï¼šæ€§èƒ½ä¼˜åŒ–</span></a></h4><p>å¼€å‘ä¸€ä¸ªå›¾ç‰‡å¤„ç†çš„ Web æœåŠ¡æ—¶ï¼Œä½ æ³¨æ„åˆ°å¤„ç†å¤§é‡å›¾ç‰‡æ—¶æœåŠ¡çš„å“åº”æ—¶é—´å˜é•¿ã€‚ä½¿ç”¨ Heap profiler è®°å½•å †åˆ†é…æ—¶é—´çº¿ï¼Œä½ å¯èƒ½å‘ç°åœ¨å¤„ç†å›¾ç‰‡æ—¶æœ‰å¤§é‡çš„å†…å­˜åˆ†é…æ“ä½œã€‚è¿›ä¸€æ­¥åˆ†æåï¼Œä½ å¯èƒ½å†³å®šå¯¹å›¾ç‰‡å¤„ç†åº“è¿›è¡Œæ›¿æ¢æˆ–è€…å¯¹å›¾ç‰‡æ•°æ®è¿›è¡Œæ›´æœ‰æ•ˆçš„ç®¡ç†ç­–ç•¥ï¼Œä»è€Œå‡å°‘å†…å­˜çš„åˆ†é…å’Œå›æ”¶ï¼Œæå‡åº”ç”¨æ€§èƒ½ã€‚</p><h4 id="ä¾‹å­-3-ç†è§£å†…å­˜ä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#ä¾‹å­-3-ç†è§£å†…å­˜ä½¿ç”¨"><span>ä¾‹å­ 3ï¼šç†è§£å†…å­˜ä½¿ç”¨</span></a></h4><p>å½“ä½ åœ¨å¼€å‘ä¸€ä¸ªå¤æ‚çš„ Node.js åº”ç”¨æ—¶ï¼Œæƒ³è¦ä¼˜åŒ–å…¶å†…å­˜ä½¿ç”¨ï¼Œä½†å´ä¸çŸ¥é“ä»å“ªé‡Œå¼€å§‹ã€‚é€šè¿‡ç”Ÿæˆå’Œåˆ†æå †å¿«ç…§ï¼Œä½ å¯ä»¥è·å¾—å½“å‰æ‰€æœ‰æ´»è·ƒå¯¹è±¡çš„å†…å­˜å¸ƒå±€ã€‚è¿™æœ‰åŠ©äºä½ ç†è§£ä¸åŒæ¨¡å—ã€ç±»æˆ–åŠŸèƒ½å¦‚ä½•æ¶ˆè€—å†…å­˜ï¼Œä»è€Œæœ‰é’ˆå¯¹æ€§åœ°è¿›è¡Œä»£ç ä¼˜åŒ–ã€‚</p><h3 id="æ€æ ·ä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#æ€æ ·ä½¿ç”¨"><span>æ€æ ·ä½¿ç”¨ï¼Ÿ</span></a></h3><p>Node.js Inspector å¯ä»¥é€šè¿‡å‘½ä»¤è¡Œå¯åŠ¨ Node.js åº”ç”¨æ¥å¼€å¯ï¼Œä¾‹å¦‚ä½¿ç”¨<code>node --inspect your_script.js</code>å‘½ä»¤ï¼Œç„¶ååœ¨ Chrome æµè§ˆå™¨ä¸­æ‰“å¼€<code>chrome://inspect</code>è¿æ¥åˆ° Node.js åº”ç”¨ã€‚åœ¨ DevTools ä¸­ï¼ŒMemory é€‰é¡¹å¡æä¾›äº† Heap profiler ç›¸å…³çš„åŠŸèƒ½ã€‚</p><p>æ€»ä¹‹ï¼ŒHeap profiler æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å·¥å…·ï¼Œå¯ä»¥å¸®åŠ©å¼€å‘è€…æ›´å¥½åœ°ç†è§£å’Œä¼˜åŒ– Node.js åº”ç”¨çš„å†…å­˜ä½¿ç”¨æƒ…å†µã€‚</p><h2 id="common-objects" tabindex="-1"><a class="header-anchor" href="#common-objects"><span><a href="https://nodejs.org/docs/latest/api/inspector.html#common-objects" target="_blank" rel="noopener noreferrer">Common Objects</a></span></a></h2><p>Node.js çš„<code>inspector</code>æ¨¡å—æä¾›äº†ä¸€ç§ä¸ V8 å¼•æ“å†…ç½®çš„è°ƒè¯•å™¨è¿›è¡Œé€šä¿¡çš„æ–¹å¼ã€‚è¿™ä½¿å¾—å¼€å‘è€…å¯ä»¥å¯¹è¿è¡Œä¸­çš„ Node.js ç¨‹åºè¿›è¡Œæ£€æŸ¥å’Œè°ƒè¯•ï¼Œå°±åƒæµè§ˆå™¨ä¸­çš„ JavaScript é‚£æ ·ã€‚åœ¨ Node.js ç‰ˆæœ¬ 21.7.1 çš„æ–‡æ¡£ä¸­ï¼Œâ€œCommon Objectsâ€éƒ¨åˆ†æè¿°äº†åœ¨ä½¿ç”¨<code>inspector</code>æ¨¡å—æ—¶å¯èƒ½ä¼šé‡åˆ°çš„ä¸€äº›å¸¸è§å¯¹è±¡ç±»å‹ã€‚</p><p>ä¸ºäº†è®©ä½ æ›´å¥½åœ°ç†è§£ï¼Œæˆ‘ä»¬éœ€è¦å…ˆç®€è¦ä»‹ç»ä¸€ä¸‹ä»€ä¹ˆæ˜¯<code>inspector</code>æ¨¡å—ä»¥åŠå®ƒçš„ç”¨é€”ã€‚</p><h3 id="ä»€ä¹ˆæ˜¯inspectoræ¨¡å—" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯inspectoræ¨¡å—"><span>ä»€ä¹ˆæ˜¯<code>inspector</code>æ¨¡å—ï¼Ÿ</span></a></h3><p><code>inspector</code>æ¨¡å—å…è®¸ä½ ä» Node.js ä»£ç å†…éƒ¨å¯åŠ¨æˆ–è¿æ¥åˆ°ä¸€ä¸ªè°ƒè¯•å™¨ã€‚è¿™æ„å‘³ç€ä½ å¯ä»¥åœ¨ç¨‹åºæ‰§è¡Œæ—¶æš‚åœä»£ç ã€æŸ¥çœ‹å˜é‡çš„å€¼ã€å•æ­¥æ‰§è¡Œä»£ç ç­‰ç­‰ï¼Œè¿™å¯¹äºè¯Šæ–­å¤æ‚é—®é¢˜éå¸¸æœ‰å¸®åŠ©ã€‚</p><h3 id="common-objectsçš„æ¦‚å¿µ" tabindex="-1"><a class="header-anchor" href="#common-objectsçš„æ¦‚å¿µ"><span><code>Common Objects</code>çš„æ¦‚å¿µ</span></a></h3><p>â€œCommon Objectsâ€æŒ‡çš„æ˜¯å½“ä½¿ç”¨<code>inspector</code>æ¨¡å—ä¸ Node.js çš„è°ƒè¯• API äº¤äº’æ—¶ï¼Œå¸¸è§çš„å‡ ç§å¯¹è±¡ç±»å‹ã€‚è¿™äº›å¯¹è±¡ç±»å‹ä»£è¡¨äº†è°ƒè¯•è¿‡ç¨‹ä¸­çš„æ ¸å¿ƒæ¦‚å¿µï¼Œä¾‹å¦‚æ–­ç‚¹ï¼ˆBreakpointsï¼‰ã€è„šæœ¬ï¼ˆScriptsï¼‰ã€è°ƒç”¨æ ˆï¼ˆCall Framesï¼‰ç­‰ã€‚</p><p>ä»¥ä¸‹æ˜¯ä¸€äº›å…·ä½“çš„å®ä¾‹å’Œå®ƒä»¬åœ¨å®é™…ç¼–ç¨‹ä¸­å¦‚ä½•è¢«åˆ©ç”¨ï¼š</p><h4 id="_1-è°ƒç”¨æ ˆ-call-frames" tabindex="-1"><a class="header-anchor" href="#_1-è°ƒç”¨æ ˆ-call-frames"><span>1. è°ƒç”¨æ ˆï¼ˆCall Framesï¼‰</span></a></h4><ul><li><p><strong>æ¦‚å¿µ</strong>: è°ƒç”¨æ ˆå¯¹è±¡ä»£è¡¨äº†å½“å‰ä»£ç æ‰§è¡Œçš„ç²¾ç¡®ç‚¹ï¼Œåœ¨è°ƒè¯•æ—¶éå¸¸é‡è¦ï¼Œå› ä¸ºå®ƒå¯ä»¥å‘Šè¯‰ä½ æ˜¯æ€ä¹ˆåˆ°è¾¾å½“å‰ä»£ç æ‰§è¡Œç‚¹çš„ã€‚</p></li><li><p><strong>å®é™…è¿ç”¨</strong>: å‡è®¾ä½ çš„ Node.js åº”ç”¨çªç„¶å´©æºƒæˆ–å‡ºç°äº†ä¸æœŸæœ›çš„è¡Œä¸ºï¼Œä½ å¯ä»¥ä½¿ç”¨<code>inspector</code>æ¨¡å—æš‚åœæ‰§è¡Œï¼Œå¹¶æ£€æŸ¥è°ƒç”¨æ ˆã€‚è¿™èƒ½è®©ä½ çœ‹åˆ°å‡½æ•°è°ƒç”¨çš„é¡ºåºï¼Œå¸®åŠ©ä½ å®šä½é—®é¢˜æºå¤´ã€‚</p></li></ul><h4 id="_2-æ–­ç‚¹-breakpoints" tabindex="-1"><a class="header-anchor" href="#_2-æ–­ç‚¹-breakpoints"><span>2. æ–­ç‚¹ï¼ˆBreakpointsï¼‰</span></a></h4><ul><li><p><strong>æ¦‚å¿µ</strong>: æ–­ç‚¹å…è®¸ä½ æŒ‡å®šç¨‹åºä¸­çš„ä¸€ä¸ªç‚¹ï¼Œåœ¨é‚£é‡Œä»£ç æ‰§è¡Œå°†ä¼šæš‚åœï¼Œè¿™è®©ä½ æœ‰æœºä¼šæ£€æŸ¥æ­¤æ—¶ç¨‹åºçš„çŠ¶æ€ã€‚</p></li><li><p><strong>å®é™…è¿ç”¨</strong>: å¦‚æœä½ æ­£åœ¨å¼€å‘ä¸€ä¸ª Web æœåŠ¡å™¨ï¼Œè€ŒæŸä¸ªç‰¹å®šè¯·æ±‚çš„å“åº”æ—¶é—´è¿‡é•¿ï¼Œä½ å¯èƒ½ä¼šåœ¨å¤„ç†è¯¥è¯·æ±‚çš„å‡½æ•°å¼€å§‹å¤„è®¾ç½®ä¸€ä¸ªæ–­ç‚¹ã€‚å½“å†æ¬¡æ”¶åˆ°è¯¥è¯·æ±‚æ—¶ï¼Œç¨‹åºä¼šåœ¨æ–­ç‚¹å¤„æš‚åœï¼Œè®©ä½ èƒ½å¤Ÿé€æ­¥è·Ÿè¸ªä»£ç çš„æ‰§è¡Œå’Œæ£€æŸ¥å˜é‡çŠ¶æ€ï¼Œä»¥æ‰¾å‡ºæ€§èƒ½ç“¶é¢ˆã€‚</p></li></ul><h4 id="_3-è„šæœ¬-scripts" tabindex="-1"><a class="header-anchor" href="#_3-è„šæœ¬-scripts"><span>3. è„šæœ¬ï¼ˆScriptsï¼‰</span></a></h4><ul><li><p><strong>æ¦‚å¿µ</strong>: åœ¨<code>inspector</code>æ¨¡å—çš„ä¸Šä¸‹æ–‡ä¸­ï¼Œè„šæœ¬å¯¹è±¡ä»£è¡¨äº†è¢«åŠ è½½çš„ JavaScript æ–‡ä»¶ã€‚</p></li><li><p><strong>å®é™…è¿ç”¨</strong>: å½“ä½ æƒ³è¦ç†è§£ç¨‹åºæ˜¯å¦‚ä½•ç»„ç»‡çš„ï¼Œæˆ–è€…å½“ä½ æƒ³è¦äº†è§£æŸä¸ªç‰¹å®šçš„è„šæœ¬æ˜¯å¦è¢«åŠ è½½æ—¶ï¼Œä½ å¯ä»¥æŸ¥è¯¢å½“å‰åŠ è½½çš„è„šæœ¬åˆ—è¡¨ã€‚è¿™å¯¹äºå¤§å‹é¡¹ç›®ï¼Œç‰¹åˆ«æ˜¯ä½¿ç”¨äº†è®¸å¤šå¤–éƒ¨æ¨¡å—å’Œåº“çš„æƒ…å†µä¸‹å°¤å…¶æœ‰ç”¨ã€‚</p></li></ul><h3 id="æ€»ç»“-2" tabindex="-1"><a class="header-anchor" href="#æ€»ç»“-2"><span>æ€»ç»“</span></a></h3><p><code>inspector</code>æ¨¡å—æä¾›çš„å·¥å…·å’Œæ¥å£ï¼Œç‰¹åˆ«æ˜¯å…¶ä¸­æåˆ°çš„â€œCommon Objectsâ€ï¼Œè®©å¼€å‘è€…èƒ½å¤Ÿä»¥å‰æ‰€æœªæœ‰çš„æ–¹å¼æ·±å…¥äº†è§£å’Œæ§åˆ¶ä»–ä»¬çš„ Node.js åº”ç”¨ã€‚æ— è®ºæ˜¯è°ƒè¯•å¤æ‚çš„é—®é¢˜è¿˜æ˜¯ä¼˜åŒ–æ€§èƒ½ï¼Œç†è§£è¿™äº›åŸºç¡€æ¦‚å¿µéƒ½æ˜¯è‡³å…³é‡è¦çš„ç¬¬ä¸€æ­¥ã€‚</p><h3 id="inspector-close" tabindex="-1"><a class="header-anchor" href="#inspector-close"><span><a href="https://nodejs.org/docs/latest/api/inspector.html#inspectorclose" target="_blank" rel="noopener noreferrer">inspector.close()</a></span></a></h3><p>å¥½çš„ï¼Œæˆ‘ä»¬æ¥æ·±å…¥äº†è§£ä¸€ä¸‹ Node.js ä¸­çš„ <code>inspector.close()</code> æ–¹æ³•ã€‚</p><p>é¦–å…ˆï¼Œä¸ºäº†ç†è§£è¿™ä¸ªæ–¹æ³•ï¼Œä½ éœ€è¦çŸ¥é“ Node.js Inspector æ˜¯ä»€ä¹ˆã€‚Node.js æä¾›äº†ä¸€ä¸ªéå¸¸å¼ºå¤§çš„å·¥å…·ï¼Œå«åš Inspectorï¼Œå®ƒç”¨äºè°ƒè¯•å’Œåˆ†æ Node.js åº”ç”¨ç¨‹åºã€‚é€šè¿‡ Inspectorï¼Œå¼€å‘è€…å¯ä»¥æ£€æŸ¥ä»£ç ä¸­çš„å˜é‡ï¼Œè®¾ç½®æ–­ç‚¹ï¼ŒæŸ¥çœ‹è°ƒç”¨å †æ ˆï¼Œè¿›è¡Œæ€§èƒ½åˆ†æç­‰ç­‰ï¼Œå°±åƒåœ¨æµè§ˆå™¨ä¸­è°ƒè¯•å‰ç«¯ JavaScript ä»£ç é‚£æ ·æ–¹ä¾¿ã€‚</p><p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬è°ˆè°ˆ <code>inspector.close()</code> è¿™ä¸ªç‰¹å®šçš„æ–¹æ³•ã€‚å½“ä½ å¯åŠ¨äº† Inspector å¹¶ä¸ä¹‹å»ºç«‹äº†è¿æ¥ï¼ˆæ¯”å¦‚é€šè¿‡ Chrome DevTools æˆ–å…¶ä»–æ”¯æŒçš„è°ƒè¯•å®¢æˆ·ç«¯ï¼‰ï¼Œ<code>inspector.close()</code> æ–¹æ³•å…è®¸ä½ ä» Node.js ç¨‹åºé‡Œé¢å…³é—­è¿™ä¸ªè¿æ¥ã€‚æ¢å¥è¯è¯´ï¼Œå½“ä½ ä¸å†éœ€è¦è°ƒè¯•æˆ–åˆ†æè¿è¡Œä¸­çš„ Node.js ç¨‹åºæ—¶ï¼Œä½ å¯ä»¥è°ƒç”¨è¿™ä¸ªæ–¹æ³•æ¥åœæ­¢ Inspector ä¼šè¯ã€‚</p><h3 id="å®é™…åº”ç”¨ä¾‹å­-4" tabindex="-1"><a class="header-anchor" href="#å®é™…åº”ç”¨ä¾‹å­-4"><span>å®é™…åº”ç”¨ä¾‹å­</span></a></h3><h4 id="ç¤ºä¾‹-1-ç®€å•çš„ä½¿ç”¨åœºæ™¯" tabindex="-1"><a class="header-anchor" href="#ç¤ºä¾‹-1-ç®€å•çš„ä½¿ç”¨åœºæ™¯"><span>ç¤ºä¾‹ 1ï¼šç®€å•çš„ä½¿ç”¨åœºæ™¯</span></a></h4><p>å‡è®¾ä½ æ­£åœ¨å¼€å‘ä¸€ä¸ª Node.js åº”ç”¨ï¼Œå¹¶ä¸”åœ¨æŸä¸ªç‰¹å®šçš„åœ°æ–¹æƒ³è¦å¯åŠ¨è°ƒè¯•ä¼šè¯ã€‚ä½ å¯ä»¥è¿™æ ·åšï¼š</p><ol><li>é¦–å…ˆï¼Œå¯åŠ¨ Inspectorã€‚</li><li>ç„¶åï¼Œåœ¨ä»£ç çš„é€‚å½“ä½ç½®ä½¿ç”¨ <code>inspector.open()</code> æ‰“å¼€è°ƒè¯•ä¼šè¯ï¼ˆæ³¨æ„ï¼Œ<code>inspector.open()</code> å’Œ <code>inspector.close()</code> æ˜¯æˆå¯¹å‡ºç°çš„ï¼‰ã€‚</li><li>åœ¨å®Œæˆè°ƒè¯•åï¼Œè°ƒç”¨ <code>inspector.close()</code> æ¥ç»“æŸè°ƒè¯•ä¼šè¯ã€‚</li></ol><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> inspector</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">inspector</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// æŸäº›æ¡ä»¶è¾¾æˆï¼Œå†³å®šå¯åŠ¨è°ƒè¯•ä¼šè¯</span></span>
<span class="line"><span style="color:#81A1C1;">if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">needDebug</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">  inspector</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">open</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">9229</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">localhost</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#81A1C1;"> true</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // æ‰“å¼€ Inspector ä¼šè¯</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">è°ƒè¯•å¼€å§‹ï¼Œè¯·è¿æ¥åˆ° Chrome DevTools...</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">  // å‡è®¾åœ¨è¿™é‡Œä½ å®Œæˆäº†è°ƒåº¦ä»»åŠ¡...</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">  inspector</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">close</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // å…³é—­ Inspector ä¼šè¯</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">è°ƒè¯•ç»“æŸ</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="ç¤ºä¾‹-2-ç»“åˆå¼‚æ­¥æ“ä½œ" tabindex="-1"><a class="header-anchor" href="#ç¤ºä¾‹-2-ç»“åˆå¼‚æ­¥æ“ä½œ"><span>ç¤ºä¾‹ 2ï¼šç»“åˆå¼‚æ­¥æ“ä½œ</span></a></h4><p>å¦‚æœä½ çš„ Node.js åº”ç”¨æ˜¯åŸºäºäº‹ä»¶æˆ–å¼‚æ­¥æ“ä½œçš„ï¼Œå¯èƒ½éœ€è¦åœ¨æŸä¸ªå¼‚æ­¥æ“ä½œå®Œæˆåå…³é—­ Inspectorã€‚å¯ä»¥åœ¨å¼‚æ­¥å›è°ƒæˆ– Promise å®Œæˆåï¼Œè°ƒç”¨ <code>inspector.close()</code>ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> inspector</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">inspector</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> fs</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">fs</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">promises</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">async</span><span style="color:#81A1C1;"> function</span><span style="color:#88C0D0;"> debugAsyncOperation</span><span style="color:#ECEFF4;">()</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">  inspector</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">open</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">å¼€å§‹å¼‚æ­¥æ“ä½œè°ƒè¯•</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">  try</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">    await</span><span style="color:#D8DEE9;"> fs</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">writeFile</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">/path/to/file</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">data</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // å‡è®¾è¿™æ˜¯éœ€è¦è°ƒè¯•çš„å¼‚æ­¥æ“ä½œ</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">å¼‚æ­¥æ“ä½œå®Œæˆ</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span><span style="color:#81A1C1;"> catch</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">error</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">error</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">å¼‚æ­¥æ“ä½œå‡ºé”™</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> error</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">  inspector</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">close</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">è°ƒè¯•ç»“æŸ</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88C0D0;">debugAsyncOperation</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ€»çš„æ¥è¯´ï¼Œ<code>inspector.close()</code> æ˜¯ Node.js Inspector API çš„ä¸€éƒ¨åˆ†ï¼Œç”¨äºç»“æŸè°ƒè¯•æˆ–åˆ†æä¼šè¯ã€‚è¿™åœ¨ä½ éœ€è¦ç²¾ç¡®æ§åˆ¶ä½•æ—¶å¼€å§‹å’Œç»“æŸè°ƒè¯•ä¼šè¯çš„åœºæ™¯ä¸‹éå¸¸æœ‰ç”¨ï¼Œå°¤å…¶æ˜¯åœ¨å¤„ç†å¤æ‚çš„å¼‚æ­¥é€»è¾‘æˆ–æ€§èƒ½åˆ†ææ—¶ã€‚å¸Œæœ›è¿™äº›ä¾‹å­èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å¦‚ä½•åœ¨å®è·µä¸­ä½¿ç”¨å®ƒã€‚</p><h3 id="inspector-console" tabindex="-1"><a class="header-anchor" href="#inspector-console"><span><a href="https://nodejs.org/docs/latest/api/inspector.html#inspectorconsole" target="_blank" rel="noopener noreferrer">inspector.console</a></span></a></h3><p>Node.js çš„ <code>inspector</code> æ¨¡å—æ˜¯ä¸€ä¸ªéå¸¸æœ‰åŠ›çš„å·¥å…·ï¼Œå®ƒå…è®¸å¼€å‘è€…èƒ½å¤Ÿè°ƒè¯•å’Œä¼˜åŒ–ä»–ä»¬çš„åº”ç”¨ã€‚è€Œ <code>inspector.console</code> åˆ™æä¾›äº†ä¸€ä¸ªç‰¹æ®Šçš„æ§åˆ¶å°ï¼Œé€šè¿‡å®ƒï¼Œä½ å¯ä»¥åœ¨ Node.js åº”ç”¨çš„è¿è¡Œæ—¶ç›´æ¥ä¸ V8 å¼•æ“çš„è°ƒè¯•å™¨è¿›è¡Œäº¤äº’ã€‚è¿™æ„å‘³ç€ä½ å¯ä»¥åœ¨åº”ç”¨æ‰§è¡Œè¿‡ç¨‹ä¸­æŸ¥çœ‹ã€ä¿®æ”¹å˜é‡ï¼Œæˆ–æ˜¯è¯„ä¼°ä¸€äº›ä»£ç ç‰‡æ®µï¼Œè¿™å¯¹äºè°ƒè¯•å’Œæ€§èƒ½åˆ†ææ¥è¯´éå¸¸æœ‰ç”¨ã€‚</p><h3 id="å®é™…è¿ç”¨ç¤ºä¾‹-5" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨ç¤ºä¾‹-5"><span>å®é™…è¿ç”¨ç¤ºä¾‹ï¼š</span></a></h3><ol><li><p><strong>è°ƒè¯•æ­£åœ¨è¿è¡Œçš„ Node.js åº”ç”¨</strong>ï¼šå‡è®¾ä½ çš„ Node.js åº”ç”¨åœ¨ç”Ÿäº§ç¯å¢ƒä¸­é‡åˆ°äº†ä¸€ä¸ªéš¾ä»¥è¿½è¸ªçš„é”™è¯¯ã€‚é€šè¿‡å¯ç”¨ <code>inspector</code> å¹¶ä½¿ç”¨ <code>inspector.console</code>ï¼Œä½ å¯ä»¥åœ¨ä¸åœæ­¢åº”ç”¨çš„æƒ…å†µä¸‹åŠ¨æ€åœ°è¿›è¡Œè°ƒè¯•ï¼Œè§‚å¯Ÿå’Œä¿®æ”¹åº”ç”¨çš„çŠ¶æ€æ¥å®šä½é—®é¢˜çš„æ ¹æºã€‚</p></li><li><p><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šå¦‚æœä½ æƒ³è¦åˆ†æä½ çš„ Node.js åº”ç”¨çš„æ€§èƒ½ï¼Œ<code>inspector.console</code> å¯ä»¥å¸®åŠ©ä½ å®æ—¶åœ°ç›‘æ§å’Œè¯„ä¼°ä»£ç çš„æ‰§è¡Œã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥ä½¿ç”¨å®ƒæ¥æ£€æŸ¥å“ªäº›å‡½æ•°è°ƒç”¨æœ€é¢‘ç¹ï¼Œæˆ–è€…å“ªäº›æ“ä½œæ¶ˆè€—çš„æ—¶é—´æœ€å¤šï¼Œä»è€Œä¼˜åŒ–è¿™äº›æ€§èƒ½ç“¶é¢ˆã€‚</p></li><li><p><strong>å®æ—¶äº¤äº’æ‰§è¡Œä»£ç </strong>ï¼šåœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæœ‰æ—¶ä½ å¯èƒ½æƒ³è¦å¿«é€Ÿæµ‹è¯•ä¸€æ®µä»£ç ç‰‡æ®µè€Œä¸æƒ³é‡æ–°å¯åŠ¨æ•´ä¸ªåº”ç”¨ã€‚<code>inspector.console</code> å…è®¸ä½ åšåˆ°è¿™ä¸€ç‚¹ï¼Œä½ å¯ä»¥ç›´æ¥åœ¨æ§åˆ¶å°ä¸­è¾“å…¥å¹¶æ‰§è¡Œä»£ç ï¼Œç«‹å³çœ‹åˆ°æ‰§è¡Œç»“æœã€‚</p></li></ol><h3 id="å¦‚ä½•ä½¿ç”¨-3" tabindex="-1"><a class="header-anchor" href="#å¦‚ä½•ä½¿ç”¨-3"><span>å¦‚ä½•ä½¿ç”¨ï¼š</span></a></h3><p>è¦å¼€å§‹ä½¿ç”¨ <code>inspector.console</code>ï¼Œä½ é¦–å…ˆéœ€è¦åœ¨ä½ çš„ Node.js åº”ç”¨ä¸­å¼•å…¥ <code>inspector</code> æ¨¡å—å¹¶å¯åŠ¨å®ƒã€‚è¿™é€šå¸¸æ¶‰åŠåˆ°ä¸€äº›ç¼–ç¨‹ä¸Šçš„é…ç½®å’Œä¸€äº›å‘½ä»¤è¡Œå‚æ•°çš„è°ƒæ•´ã€‚ä¸€æ—¦å¯åŠ¨ï¼Œä½ å°±å¯ä»¥é€šè¿‡ Chrome DevTools æˆ–å…¶ä»–æ”¯æŒ Node.js è°ƒè¯•åè®®çš„å·¥å…·æ¥è¿æ¥åˆ°ä½ çš„åº”ç”¨ï¼Œå¹¶å¼€å§‹ä½¿ç”¨ <code>inspector.console</code> è¿›è¡Œè°ƒè¯•å’Œæ€§èƒ½åˆ†æäº†ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<code>inspector</code> æ¨¡å—çš„ä½¿ç”¨å¯èƒ½ä¼šå¯¹åº”ç”¨çš„æ€§èƒ½äº§ç”Ÿä¸€å®šå½±å“ï¼Œç‰¹åˆ«æ˜¯åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå› æ­¤å»ºè®®è°¨æ…ä½¿ç”¨ï¼Œå¹¶ä¸”åœ¨ä¸éœ€è¦æ—¶å…³é—­å®ƒã€‚</p><p>ä»¥ä¸Šå°±æ˜¯ <code>inspector.console</code> åœ¨ Node.js ä¸­çš„ç®€ä»‹å’Œä¸€äº›å®é™…çš„è¿ç”¨åœºæ™¯ã€‚å¸Œæœ›è¿™èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œåˆ©ç”¨è¿™ä¸€å·¥å…·æ¥å¼€å‘å’Œä¼˜åŒ–ä½ çš„ Node.js åº”ç”¨ã€‚</p><h3 id="inspector-open-port-host-wait" tabindex="-1"><a class="header-anchor" href="#inspector-open-port-host-wait"><span><a href="https://nodejs.org/docs/latest/api/inspector.html#inspectoropenport-host-wait" target="_blank" rel="noopener noreferrer">inspector.open([port[, host[, wait]]])</a></span></a></h3><p>Node.js ä¸­çš„ <code>inspector</code> æ¨¡å—å…è®¸ä½ ä» Node.js è¿›ç¨‹ä¸­å¯åŠ¨ä¸€ä¸ªæ£€æŸ¥å™¨ï¼ˆinspectorï¼‰ï¼Œè¿™ä¸ªæ£€æŸ¥å™¨å¯ä»¥è®©å¼€å‘è€…è¿æ¥ä¸€äº›å·¥å…·ï¼ˆæ¯”å¦‚ Chrome DevToolsï¼‰åˆ° Node.js åº”ç”¨ç¨‹åºä¸Šï¼Œä»¥ä¾¿è¿›è¡Œè°ƒè¯•å’Œæ€§èƒ½åˆ†æã€‚å½“ä½ è°ƒç”¨ <code>inspector.open</code> æ–¹æ³•æ—¶ï¼Œå®ƒå°±ä¼šæ‰“å¼€ä¸€ä¸ªæ£€æŸ¥å™¨çš„ä¼šè¯ã€‚</p><h3 id="å‚æ•°è§£é‡Š" tabindex="-1"><a class="header-anchor" href="#å‚æ•°è§£é‡Š"><span>å‚æ•°è§£é‡Š</span></a></h3><ul><li><strong>port (å¯é€‰)</strong>: æŒ‡å®šæ£€æŸ¥å™¨ç›‘å¬çš„ç«¯å£ã€‚å¦‚æœæ²¡æœ‰æŒ‡å®šï¼Œæˆ–è€…æŒ‡å®šä¸º <code>0</code>ï¼ŒNode.js ä¼šè‡ªåŠ¨é€‰æ‹©ä¸€ä¸ªå¯ç”¨ç«¯å£ã€‚</li><li><strong>host (å¯é€‰)</strong>: æŒ‡å®šæ£€æŸ¥å™¨ç»‘å®šçš„ä¸»æœºåã€‚å¦‚æœæ²¡æœ‰æä¾›ï¼Œæ£€æŸ¥å™¨å°†ä¼šç»‘å®šåˆ°é»˜è®¤çš„ <code>127.0.0.1</code>ï¼Œæ„å‘³ç€å®ƒåªèƒ½é€šè¿‡æœ¬æœºè®¿é—®ã€‚</li><li><strong>wait (å¯é€‰)</strong>: è¿™æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼ŒæŒ‡å®š Node.js æ˜¯å¦åº”è¯¥åœ¨æ£€æŸ¥å™¨å®¢æˆ·ç«¯è¿æ¥ä¹‹å‰æš‚åœæ‰§è¡Œã€‚è¿™å¯¹äºåœ¨è„šæœ¬å¼€å§‹æ‰§è¡Œä¹‹å‰å¯åŠ¨è°ƒè¯•å¾ˆæœ‰ç”¨ã€‚</li></ul><h3 id="å®é™…è¿ç”¨ç¤ºä¾‹-6" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨ç¤ºä¾‹-6"><span>å®é™…è¿ç”¨ç¤ºä¾‹</span></a></h3><ol><li><p><strong>è°ƒè¯•æœ¬åœ°å¼€å‘ä¸­çš„ Node.js åº”ç”¨</strong>: å½“ä½ åœ¨å¼€å‘ä¸€ä¸ª Node.js åº”ç”¨æ—¶ï¼Œå¯èƒ½ä¼šé‡åˆ°ä¸€äº› bug æˆ–è€…æ€§èƒ½é—®é¢˜ï¼Œéœ€è¦æ·±å…¥äº†è§£ä»£ç çš„è¿è¡Œæƒ…å†µã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ å¯ä»¥å¯åŠ¨ä¸€ä¸ªæ£€æŸ¥å™¨ä¼šè¯ï¼Œå¹¶ä½¿ç”¨ Chrome DevTools è¿æ¥åˆ°ä½ çš„åº”ç”¨ä¸Šï¼Œè¿™æ ·ä½ å°±å¯ä»¥è®¾ç½®æ–­ç‚¹ã€æŸ¥çœ‹å˜é‡çš„å€¼ã€å•æ­¥æ‰§è¡Œä»£ç ç­‰ç­‰ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#616E88;">// åœ¨ä½ çš„ Node.js åº”ç”¨ä¸­æ·»åŠ è¿™è¡Œä»£ç </span></span>
<span class="line"><span style="color:#88C0D0;">require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">inspector</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">open</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">9229</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">127.0.0.1</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#81A1C1;"> true</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ ·ï¼Œä½ å°±å¯ä»¥åœ¨å¯åŠ¨ä½ çš„åº”ç”¨æ—¶æ‰“å¼€ä¸€ä¸ªæ£€æŸ¥å™¨ä¼šè¯ï¼Œç„¶åæ‰“å¼€ Chromeï¼Œè®¿é—® <code>chrome://inspect</code>ï¼Œæ‰¾åˆ°ä½ çš„ Node.js åº”ç”¨ï¼Œå¹¶å¼€å§‹è°ƒè¯•ã€‚</p></li><li><p><strong>è¿œç¨‹è°ƒè¯•ç”Ÿäº§ç¯å¢ƒä¸­çš„ Node.js åº”ç”¨</strong>: å‡è®¾ä½ çš„ Node.js åº”ç”¨éƒ¨ç½²åœ¨ä¸€å°è¿œç¨‹æœåŠ¡å™¨ä¸Šï¼Œçªç„¶å‡ºç°äº†ä¸€äº›ç”Ÿäº§é—®é¢˜ï¼Œä½ éœ€è¦å¿«é€Ÿåœ°è¿›è¡Œè°ƒè¯•ã€‚ä½ å¯ä»¥åœ¨å¯åŠ¨ Node.js åº”ç”¨æ—¶æŒ‡å®šæ£€æŸ¥å™¨ç›‘å¬çš„ç«¯å£å’Œä¸»æœºåï¼Œç„¶åä½¿ç”¨ SSH éš§é“æˆ–å…¶ä»–æ–¹æ³•å°†è¿™ä¸ªç«¯å£æ˜ å°„åˆ°ä½ çš„æœ¬åœ°æœºå™¨ä¸Šã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#616E88;">// åœ¨è¿œç¨‹æœåŠ¡å™¨ä¸Šçš„ Node.js åº”ç”¨ä¸­æ·»åŠ </span></span>
<span class="line"><span style="color:#88C0D0;">require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">inspector</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">open</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">9229</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">0.0.0.0</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>ç„¶åï¼Œä½ å¯ä»¥è®¾ç½®ä¸€ä¸ª SSH éš§é“ï¼Œå°†è¿œç¨‹æœåŠ¡å™¨ä¸Šçš„ 9229 ç«¯å£æ˜ å°„åˆ°æœ¬åœ°çš„åŒä¸€ä¸ªç«¯å£ï¼Œè¿™æ ·ä½ å°±å¯ä»¥åƒè°ƒè¯•æœ¬åœ°åº”ç”¨ä¸€æ ·è°ƒè¯•è¿œç¨‹åº”ç”¨äº†ã€‚</p></li></ol><p>ä»¥ä¸Šä¾‹å­å±•ç¤ºäº† <code>inspector.open</code> æ–¹æ³•çš„å‡ ç§å®ç”¨åœºæ™¯ã€‚åœ¨å¼€å‘å’Œç»´æŠ¤ Node.js åº”ç”¨æ—¶ï¼Œäº†è§£å’Œåˆ©ç”¨è¿™ä¸ªåŠŸèƒ½ï¼Œå¯ä»¥æå¤§åœ°æé«˜ä½ çš„è°ƒè¯•æ•ˆç‡å’Œåº”ç”¨çš„ç¨³å®šæ€§ã€‚</p><h3 id="inspector-url" tabindex="-1"><a class="header-anchor" href="#inspector-url"><span><a href="https://nodejs.org/docs/latest/api/inspector.html#inspectorurl" target="_blank" rel="noopener noreferrer">inspector.url()</a></span></a></h3><p>Node.js çš„ <code>inspector.url()</code> å‡½æ•°æ˜¯ Node.js Inspector æ¨¡å—çš„ä¸€éƒ¨åˆ†ã€‚è¿™ä¸ªæ¨¡å—ä¸»è¦ç”¨äºæä¾›ä¸€ä¸ªç•Œé¢ï¼Œè®©å¼€å‘è€…å¯ä»¥è°ƒè¯•å’Œæ£€æŸ¥æ­£åœ¨è¿è¡Œçš„ Node.js åº”ç”¨ã€‚<code>inspector.url()</code> å‡½æ•°ç‰¹åˆ«çš„ç”¨é€”æ˜¯è·å– Inspector çš„ WebSocket URLï¼Œè¿™ä¸ª URL å…è®¸å¼€å‘è€…é€šè¿‡ WebSocket åè®®è¿æ¥åˆ°æ­£åœ¨è¿è¡Œçš„ Node.js è¿›ç¨‹è¿›è¡Œè°ƒè¯•ã€‚è¿™æ˜¯ä¸€ä¸ªéå¸¸å®ç”¨çš„åŠŸèƒ½ï¼Œå°¤å…¶æ˜¯åœ¨è¿›è¡Œåº”ç”¨å¼€å‘å’Œé—®é¢˜æ’æŸ¥æ—¶ã€‚</p><p>å½“ä½ å¯åŠ¨ Node.js åº”ç”¨æ—¶ï¼Œå¯ä»¥é€šè¿‡å‘½ä»¤è¡Œå‚æ•°ï¼ˆæ¯”å¦‚ <code>--inspect</code> æˆ– <code>--inspect-brk</code>ï¼‰å¼€å¯è°ƒè¯•æ¨¡å¼ã€‚å¼€å¯åï¼ŒNode.js ä¼šæš´éœ²ä¸€ä¸ª WebSocket æ¥å£ï¼Œå…è®¸è°ƒè¯•å®¢æˆ·ç«¯è¿æ¥è¿›æ¥ã€‚ä½¿ç”¨ <code>inspector.url()</code> å°±å¯ä»¥è·å–åˆ°è¿™ä¸ªæ¥å£çš„ URLã€‚</p><h3 id="å®é™…è¿ç”¨ä¾‹å­-2" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨ä¾‹å­-2"><span>å®é™…è¿ç”¨ä¾‹å­</span></a></h3><ol><li><p><strong>æœ¬åœ°å¼€å‘è°ƒè¯•</strong>ï¼š<br> å‡è®¾ä½ æ­£åœ¨å¼€å‘ä¸€ä¸ª Node.js åº”ç”¨ï¼Œå¹¶ä¸”æƒ³è¦è°ƒè¯•ä¸€æ®µå¤æ‚çš„é€»è¾‘ã€‚ä½ å¯ä»¥å¯åŠ¨åº”ç”¨æ—¶åŠ ä¸Š <code>--inspect</code> å‚æ•°ï¼Œç„¶ååœ¨ä½ çš„ä»£ç ä¸­è°ƒç”¨ <code>inspector.url()</code> æ¥è·å– WebSocket URLã€‚ä¹‹åï¼Œä½ å¯ä»¥ä½¿ç”¨ Chrome DevTools æˆ–å…¶ä»–æ”¯æŒ Node.js è°ƒè¯•çš„å·¥å…·ï¼Œé€šè¿‡è¿™ä¸ª URL è¿æ¥åˆ°ä½ çš„åº”ç”¨è¿›è¡Œè°ƒè¯•ã€‚</p></li><li><p><strong>è¿œç¨‹è°ƒè¯•</strong>ï¼š<br> å¦‚æœä½ çš„ Node.js åº”ç”¨éƒ¨ç½²åœ¨è¿œç¨‹æœåŠ¡å™¨ä¸Šï¼Œè€Œä½ éœ€è¦å¯¹å…¶è¿›è¡Œè°ƒè¯•ï¼Œå¯ä»¥åœ¨å¯åŠ¨åº”ç”¨æ—¶åŠ ä¸Š <code>--inspect=0.0.0.0:9229</code> ï¼ˆè¿™é‡Œçš„ IP åœ°å€å’Œç«¯å£å¯ä»¥æ ¹æ®éœ€è¦è¿›è¡Œæ›´æ”¹ï¼‰ï¼Œä½¿å¾—è°ƒè¯•æ¥å£åœ¨ç½‘ç»œä¸Šå¯è®¿é—®ã€‚ç„¶åï¼Œä½ å¯ä»¥åœ¨æœåŠ¡å™¨ä¸Šè¿è¡Œçš„ä»£ç ä¸­è°ƒç”¨ <code>inspector.url()</code> è·å–åˆ° WebSocket URLï¼Œå¹¶ä½¿ç”¨è¿™ä¸ª URL ä»ä½ çš„æœ¬åœ°æœºå™¨è¿æ¥åˆ°è¿œç¨‹åº”ç”¨è¿›è¡Œè°ƒè¯•ã€‚</p></li></ol><h3 id="ä½¿ç”¨-inspector-url-çš„æ³¨æ„äº‹é¡¹" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨-inspector-url-çš„æ³¨æ„äº‹é¡¹"><span>ä½¿ç”¨ <code>inspector.url()</code> çš„æ³¨æ„äº‹é¡¹</span></a></h3><ul><li>åœ¨è°ƒç”¨ <code>inspector.url()</code> å‰ï¼Œç¡®ä¿ä½ çš„åº”ç”¨å·²ç»ä»¥è°ƒè¯•æ¨¡å¼å¯åŠ¨ï¼Œå¹¶ä¸” Inspector ä¼šè¯å·²ç»å¼€å¯ã€‚å¦åˆ™ï¼Œè¿™ä¸ªå‡½æ•°å¯èƒ½è¿”å› <code>undefined</code>ã€‚</li><li>è·å–åˆ°çš„ WebSocket URL åŒ…å«äº†ä¸€ä¸ªå”¯ä¸€çš„ session IDï¼Œç¡®ä¿ä½ çš„è°ƒè¯•ä¼šè¯æ˜¯å®‰å…¨çš„ï¼Œå¹¶ä¸”åªæœ‰æˆæƒçš„è°ƒè¯•å®¢æˆ·ç«¯å¯ä»¥è¿æ¥ã€‚</li><li>ä½¿ç”¨ <code>inspector.url()</code> éœ€è¦å¯¹ Node.js çš„è°ƒè¯•å’Œæ£€æŸ¥æµç¨‹æœ‰ä¸€å®šäº†è§£ï¼Œå°¤å…¶æ˜¯å¦‚ä½•ä½¿ç”¨è°ƒè¯•å®¢æˆ·ç«¯è¿æ¥åˆ° Node.js åº”ç”¨ã€‚</li></ul><p>é€šè¿‡è¿™ç§æ–¹å¼ï¼Œ<code>inspector.url()</code> æˆä¸ºäº† Node.js å¼€å‘è€…å·¥å…·ç®±ä¸­çš„ä¸€ä¸ªé‡è¦å·¥å…·ï¼Œç‰¹åˆ«æ˜¯åœ¨éœ€è¦ç²¾ç»†æ§åˆ¶å’Œè°ƒè¯•æ­£åœ¨è¿è¡Œçš„ Node.js åº”ç”¨æ—¶ã€‚</p><h3 id="inspector-waitfordebugger" tabindex="-1"><a class="header-anchor" href="#inspector-waitfordebugger"><span><a href="https://nodejs.org/docs/latest/api/inspector.html#inspectorwaitfordebugger" target="_blank" rel="noopener noreferrer">inspector.waitForDebugger()</a></span></a></h3><p>åœ¨ Node.js ä¸­ï¼Œ<code>inspector</code>æ¨¡å—æä¾›äº†ä¸€ç§ä¸ V8 å¼•æ“å†…ç½®çš„è°ƒè¯•å™¨è¿›è¡Œäº¤äº’çš„æ–¹å¼ã€‚è¿™å¯ä»¥è®©ä½ æ£€æŸ¥æ­£åœ¨è¿è¡Œçš„ Node.js ç¨‹åºçš„å†…éƒ¨çŠ¶æ€ï¼Œä¾‹å¦‚æŸ¥çœ‹å˜é‡å€¼ã€è®¾ç½®æ–­ç‚¹ã€ä»¥åŠå•æ­¥æ‰§è¡Œä»£ç ç­‰ã€‚<code>inspector.waitForDebugger()</code>æ˜¯<code>inspector</code>æ¨¡å—ä¸­ä¸€ä¸ªç‰¹åˆ«çš„å‡½æ•°ï¼Œå®ƒçš„ä½œç”¨æ˜¯è®© Node.js ç¨‹åºåœ¨å¯åŠ¨æ—¶è‡ªåŠ¨æš‚åœæ‰§è¡Œï¼Œç›´åˆ°ä¸€ä¸ªè°ƒè¯•å™¨è¿æ¥ä¸Šã€‚</p><p>ä¸¾ä¸ªä¾‹å­æ¥è¯´ï¼Œå‡è®¾ä½ æ­£åœ¨å¼€å‘ä¸€ä¸ª Web æœåŠ¡å™¨ï¼Œä½†æ˜¯ä½ æ³¨æ„åˆ°å®ƒåœ¨å¤„ç†ç‰¹å®šçš„è¯·æ±‚æ—¶è¡Œä¸ºå¼‚å¸¸ã€‚ä¸ºäº†è°ƒæŸ¥è¿™ä¸ªé—®é¢˜ï¼Œä½ å¯èƒ½æƒ³è¦åœ¨å¤„ç†è¿™ç§è¯·æ±‚çš„ä»£ç å¼€å§‹å¤„æš‚åœæ‰§è¡Œï¼Œè¿™æ ·ä½ å°±å¯ä»¥é€æ­¥æ‰§è¡Œä»£ç ï¼ŒæŸ¥çœ‹å˜é‡çš„çŠ¶æ€ï¼Œäº†è§£æ˜¯ä»€ä¹ˆå¯¼è‡´äº†å¼‚å¸¸è¡Œä¸ºã€‚</p><p>ä½¿ç”¨<code>inspector.waitForDebugger()</code>çš„æ­¥éª¤å¤§è‡´å¦‚ä¸‹ï¼š</p><ol><li><p><strong>å¼•å…¥<code>inspector</code>æ¨¡å—</strong>ï¼šåœ¨ä½ çš„ Node.js ä»£ç ä¸­ï¼Œé¦–å…ˆéœ€è¦é€šè¿‡<code>require</code>å‡½æ•°å¼•å…¥<code>inspector</code>æ¨¡å—ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> inspector</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">inspector</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p><strong>è°ƒç”¨<code>waitForDebugger</code></strong>ï¼šåœ¨ä½ å¸Œæœ›ç¨‹åºæš‚åœç­‰å¾…è°ƒè¯•å™¨è¿æ¥çš„åœ°æ–¹ï¼Œè°ƒç”¨<code>inspector.waitForDebugger()</code>å‡½æ•°ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#D8DEE9;">inspector</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">waitForDebugger</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p><strong>å¯åŠ¨ä½ çš„ Node.js ç¨‹åº</strong>ï¼šæ­£å¸¸å¯åŠ¨ä½ çš„ Node.js åº”ç”¨ç¨‹åºã€‚ç¨‹åºä¼šåœ¨è°ƒç”¨äº†<code>inspector.waitForDebugger()</code>çš„åœ°æ–¹æš‚åœæ‰§è¡Œã€‚</p></li><li><p><strong>è¿æ¥è°ƒè¯•å™¨</strong>ï¼šä½¿ç”¨ä¸€ä¸ªæ”¯æŒ Node.js è°ƒè¯•çš„å·¥å…·ï¼ˆå¦‚ Chrome DevTools, Visual Studio Code ç­‰ï¼‰è¿æ¥åˆ°ä½ çš„ç¨‹åºã€‚ä¸€æ—¦è°ƒè¯•å™¨è¿æ¥ä¸Šï¼Œç¨‹åºä¼šä»æš‚åœçš„åœ°æ–¹ç»§ç»­æ‰§è¡Œï¼Œä½ å¯ä»¥å¼€å§‹è°ƒè¯•äº†ã€‚</p></li></ol><h3 id="å®é™…è¿ç”¨ä¾‹å­-3" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨ä¾‹å­-3"><span>å®é™…è¿ç”¨ä¾‹å­</span></a></h3><p>å‡è®¾ä½ æœ‰ä»¥ä¸‹çš„ç®€å• Node.js è„šæœ¬ï¼Œå®ƒå¯åŠ¨äº†ä¸€ä¸ª HTTP æœåŠ¡å™¨ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> http</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">http</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> inspector</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">inspector</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// åœ¨HTTPæœåŠ¡å™¨å¼€å§‹ç›‘å¬ä¹‹å‰ï¼Œç­‰å¾…è°ƒè¯•å™¨è¿æ¥</span></span>
<span class="line"><span style="color:#D8DEE9;">inspector</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">waitForDebugger</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> server</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> http</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">createServer</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">req</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> res</span><span style="color:#ECEFF4;">)</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">  res</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">writeHead</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">200</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> {</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">Content-Type</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">text/plain</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;"> }</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">  res</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">end</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Hello World</span><span style="color:#EBCB8B;">\n</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">server</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">listen</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">3000</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> ()</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Server running at http://localhost:3000/</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼ŒæœåŠ¡å™¨å¯åŠ¨å‰ä¼šè°ƒç”¨<code>inspector.waitForDebugger()</code>ï¼Œè¿™æ„å‘³ç€ç¨‹åºä¼šåœ¨å¼€å§‹ç›‘å¬ç«¯å£ä¹‹å‰æš‚åœæ‰§è¡Œã€‚è¿™æ ·ä½ å°±æœ‰æœºä¼šåœ¨æœåŠ¡å™¨å¤„ç†ä»»ä½•è¯·æ±‚ä¹‹å‰è¿æ¥è°ƒè¯•å™¨ï¼Œè®¾ç½®æ–­ç‚¹ï¼Œæˆ–è€…æ‰§è¡Œå…¶ä»–è°ƒè¯•æ“ä½œã€‚</p><p>é€šè¿‡è¿™ç§æ–¹å¼ï¼Œ<code>inspector.waitForDebugger()</code>ä¸ºå¼€å‘è€…æä¾›äº†ä¸€ç§çµæ´»çš„æ–¹å¼æ¥è°ƒè¯•å¯åŠ¨é˜¶æ®µçš„ä»£ç ï¼Œæˆ–è€…æ˜¯åœ¨æŸä¸ªç‰¹å®šæ—¶åˆ»æ·±å…¥äº†è§£ç¨‹åºçš„å†…éƒ¨çŠ¶æ€ã€‚</p><h2 id="support-of-breakpoints" tabindex="-1"><a class="header-anchor" href="#support-of-breakpoints"><span><a href="https://nodejs.org/docs/latest/api/inspector.html#support-of-breakpoints" target="_blank" rel="noopener noreferrer">Support of breakpoints</a></span></a></h2><p>é¦–å…ˆï¼Œè®©æˆ‘ä»¬ä¸€æ­¥ä¸€æ­¥æ¥ç†è§£ Node.js ä¸­çš„<code>Support of Breakpoints</code>è¿™ä¸€ç‰¹æ€§æ˜¯ä»€ä¹ˆæ„æ€ã€‚åœ¨ç¼–ç¨‹ä¸­ï¼Œæ–­ç‚¹ï¼ˆBreakpointï¼‰æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„è°ƒè¯•å·¥å…·ï¼Œå®ƒå…è®¸ä½ æš‚åœä»£ç çš„æ‰§è¡Œåœ¨æŸä¸ªç‰¹å®šçš„ä½ç½®ï¼Œè¿™æ ·ä½ å°±å¯ä»¥æŸ¥çœ‹æ­¤æ—¶ç¨‹åºçš„çŠ¶æ€ï¼Œæ¯”å¦‚å˜é‡çš„å€¼ç­‰ä¿¡æ¯ã€‚è¿™å¯¹äºæŸ¥æ‰¾å’Œä¿®å¤ä»£ç ä¸­çš„ bug è‡³å…³é‡è¦ã€‚</p><h3 id="node-js-ä¸­çš„æ–­ç‚¹æ”¯æŒ" tabindex="-1"><a class="header-anchor" href="#node-js-ä¸­çš„æ–­ç‚¹æ”¯æŒ"><span>Node.js ä¸­çš„æ–­ç‚¹æ”¯æŒ</span></a></h3><p>Node.js ä½œä¸ºä¸€ä¸ªåŸºäº Chrome V8 å¼•æ“çš„ JavaScript è¿è¡Œç¯å¢ƒï¼Œæä¾›äº†å¯¹æ–­ç‚¹çš„åŸç”Ÿæ”¯æŒï¼Œä½¿å¾—å¼€å‘è€…èƒ½å¤Ÿæ›´æ–¹ä¾¿åœ°è°ƒè¯•åŸºäº Node.js çš„åº”ç”¨ã€‚ä» Node.js v21.7.1 ç‰ˆæœ¬å¼€å§‹ï¼ŒNode.js å¢å¼ºäº†å®ƒä¸å†…ç½®<code>inspector</code>æ¨¡å—çš„é›†æˆï¼Œå³ Node.js çš„è°ƒè¯•å™¨ï¼Œä»¥æä¾›æ›´ä¸°å¯Œã€æ›´çµæ´»çš„æ–­ç‚¹æ”¯æŒã€‚</p><h4 id="å¦‚ä½•ä½¿ç”¨æ–­ç‚¹" tabindex="-1"><a class="header-anchor" href="#å¦‚ä½•ä½¿ç”¨æ–­ç‚¹"><span>å¦‚ä½•ä½¿ç”¨æ–­ç‚¹ï¼Ÿ</span></a></h4><p>ä½¿ç”¨ Node.js è°ƒè¯•åŠŸèƒ½æ—¶ï¼Œä½ é€šå¸¸æœ‰å‡ ç§æ–¹å¼è®¾ç½®æ–­ç‚¹ï¼š</p><ol><li><p><strong>é€šè¿‡ä»£ç </strong>ï¼šåœ¨ä½ æƒ³è¦ç¨‹åºæš‚åœçš„åœ°æ–¹æ·»åŠ <code>debugger;</code>è¯­å¥ã€‚å½“ä½ ç”¨<code>--inspect</code>æˆ–<code>--inspect-brk</code>æ ‡å¿—è¿è¡Œ Node.js åº”ç”¨æ—¶ï¼Œæ¯å½“æ‰§è¡Œåˆ°<code>debugger;</code>è¯­å¥ï¼Œç¨‹åºå°±ä¼šæš‚åœã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">function</span><span style="color:#88C0D0;"> myFunction</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">param</span><span style="color:#ECEFF4;">)</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  let</span><span style="color:#D8DEE9;"> result</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> param</span><span style="color:#81A1C1;"> +</span><span style="color:#B48EAD;"> 1</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">  debugger;</span><span style="color:#616E88;"> // ç¨‹åºå°†åœ¨è¿™é‡Œæš‚åœã€‚</span></span>
<span class="line"><span style="color:#81A1C1;">  return</span><span style="color:#D8DEE9;"> result</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>ä½¿ç”¨ Inspector å®¢æˆ·ç«¯</strong>ï¼šè¿™åŒ…æ‹¬ Chrome æµè§ˆå™¨çš„å¼€å‘è€…å·¥å…·ã€Visual Studio Code ç­‰ IDE çš„å†…ç½®è°ƒè¯•å™¨ï¼Œæˆ–å…¶ä»–æ”¯æŒ Node.js è°ƒè¯•åè®®çš„å·¥å…·ã€‚ä½ å¯ä»¥åœ¨è¿™äº›å·¥å…·ä¸­ç›´æ¥è®¾ç½®æ–­ç‚¹ï¼Œè€Œä¸éœ€è¦ä¿®æ”¹ä»£ç ã€‚</p></li><li><p><strong>å‘½ä»¤è¡Œç•Œé¢ï¼ˆCLIï¼‰</strong>ï¼šNode.js çš„<code>inspector</code>æ¨¡å—ä¹Ÿæä¾›äº†ä¸€ä¸ª CLIï¼Œå…è®¸ä½ åœ¨ç¨‹åºè¿è¡Œæ—¶åŠ¨æ€åœ°è®¾ç½®æ–­ç‚¹ã€‚</p></li></ol><h4 id="å®é™…è¿ç”¨ä¾‹å­-4" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨ä¾‹å­-4"><span>å®é™…è¿ç”¨ä¾‹å­</span></a></h4><ol><li><p><strong>è°ƒè¯• API æœåŠ¡å™¨</strong>ï¼šå‡è®¾ä½ æ­£åœ¨å¼€å‘ä¸€ä¸ªåŸºäº Express çš„ REST APIï¼Œçªç„¶å‘ç°æŸä¸ªç‰¹å®šçš„è¯·æ±‚è¿”å›äº†é”™è¯¯ã€‚ä½ å¯ä»¥åœ¨å¤„ç†è¯¥è¯·æ±‚çš„å‡½æ•°ä¸­æ·»åŠ ä¸€ä¸ª<code>debugger;</code>è¯­å¥ï¼Œç„¶åé‡æ–°è¿è¡Œä½ çš„æœåŠ¡å™¨ã€‚å½“å†æ¬¡å‘é€è§¦å‘é”™è¯¯çš„è¯·æ±‚æ—¶ï¼Œä½ çš„æœåŠ¡å™¨å°†åœ¨<code>debugger;</code>å¤„æš‚åœï¼Œå…è®¸ä½ æ£€æŸ¥ç›¸å…³å˜é‡çš„å€¼ï¼Œä»è€Œå¸®åŠ©ä½ æ‰¾åˆ°é—®é¢˜æ‰€åœ¨ã€‚</p></li><li><p><strong>è§£å†³å¼‚æ­¥ä»£ç é—®é¢˜</strong>ï¼šåœ¨å¤„ç† Node.js ä¸­çš„å¼‚æ­¥æ“ä½œæ—¶ï¼Œå¯èƒ½ä¼šé‡åˆ°æ‰§è¡Œé¡ºåºä¸å¦‚é¢„æœŸçš„æƒ…å†µã€‚é€šè¿‡åœ¨å›è°ƒå‡½æ•°æˆ– Promise é“¾ä¸­è®¾ç½®æ–­ç‚¹ï¼Œä½ å¯ä»¥é€æ­¥è·Ÿè¸ªå¼‚æ­¥ä»£ç çš„æ‰§è¡Œæµç¨‹ï¼Œç¡®ä¿æ¯ä¸€æ­¥éƒ½æŒ‰ç…§é¢„æœŸè¿›è¡Œã€‚</p></li><li><p><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šå¦‚æœä½ çš„ Node.js åº”ç”¨è¡¨ç°å‡ºæ€§èƒ½é—®é¢˜ï¼Œé€šè¿‡åœ¨å…³é”®ä»£ç æ®µå‰åè®¾ç½®æ–­ç‚¹ï¼Œå¹¶æ£€æŸ¥ç¨‹åºçŠ¶æ€ï¼Œå¯ä»¥å¸®åŠ©ä½ è¯†åˆ«å¯¼è‡´æ€§èƒ½ç“¶é¢ˆçš„ä»£ç éƒ¨åˆ†ã€‚</p></li></ol><p>æ€»ç»“èµ·æ¥ï¼ŒNode.js ä¸­å¯¹æ–­ç‚¹çš„æ”¯æŒè®©å¼€å‘è€…èƒ½å¤Ÿæœ‰æ•ˆåœ°æ§åˆ¶å’Œè§‚å¯Ÿä»£ç çš„æ‰§è¡Œè¿‡ç¨‹ï¼Œæ˜¯è¯Šæ–­å’Œä¿®æ­£é—®é¢˜çš„å¼ºå¤§å·¥å…·ã€‚éšç€ Node.js ç‰ˆæœ¬çš„æ›´æ–°ï¼Œè¿™äº›å·¥å…·å’Œ APIs å˜å¾—æ›´åŠ å¼ºå¤§å’Œæ˜“ç”¨ï¼Œæå¤§åœ°æé«˜äº†å¼€å‘è€…çš„ç”Ÿäº§æ•ˆç‡ã€‚</p></div><!----><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="update-time"><span class="vp-meta-label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><!----></div><div class="contributors"><span class="vp-meta-label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="vp-meta-info" title="email: kamiacgxu@gmail.com">kamishima-kaede</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><a class="route-link auto-link prev" href="/document/node-doc/HTTPS.html" aria-label="HTTPS"><div class="hint"><span class="arrow start"></span>ä¸Šä¸€é¡µ</div><div class="link"><!---->HTTPS</div></a><a class="route-link auto-link next" href="/document/node-doc/Internationalization%20support.html" aria-label="Internationalization support"><div class="hint">ä¸‹ä¸€é¡µ<span class="arrow end"></span></div><div class="link">Internationalization support<!----></div></a></nav><!----><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper"><!----><div class="vp-copyright">Copyright Â© 2018-present hanekawa-shiki</div></footer></div><!--]--><!--]--><!--[--><!----><!----><!--]--><!--]--></div>
    <script src="/assets/js/runtime~app.8acf974b.js" defer></script><script src="/assets/js/4485.e6fe7c7b.js" defer></script><script src="/assets/js/app.fff57528.js" defer></script>
  </body>
</html>
