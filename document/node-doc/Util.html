<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.14" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.49" />
    <style>
      html {
        background: var(--bg-color, #fff);
      }

      html[data-theme="dark"] {
        background: var(--bg-color, #1d1e1f);
      }

      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta property="og:url" content="https://hanekawa.top/document/node-doc/Util.html"><meta property="og:site_name" content="hanekawa-shiki"><meta property="og:title" content="Util"><meta property="og:description" content="Util äº†è§£ Node.js ä¸­çš„utilæ¨¡å—æ˜¯ç¼–ç¨‹ä¹‹æ—…çš„ä¸€éƒ¨åˆ†ã€‚è¿™ä¸ªæ¨¡å—æä¾›äº†ä¸€ç³»åˆ—å®ç”¨å‡½æ•°ï¼Œç”¨äºæ‰§è¡Œå„ç§ä¸ JavaScript ç¼–ç¨‹ç›¸å…³çš„ä»»åŠ¡ã€‚å®ƒæ˜¯ Node.js æ ¸å¿ƒåº“çš„ä¸€éƒ¨åˆ†ï¼Œä¸éœ€è¦å®‰è£…é¢å¤–çš„åŒ…å°±å¯ä»¥ä½¿ç”¨ã€‚ä¸‹é¢ï¼Œæˆ‘ä»¬å°†æ¢è®¨utilæ¨¡å—çš„å‡ ä¸ªå¸¸ç”¨åŠŸèƒ½ï¼Œå¹¶é€šè¿‡å®é™…ä¾‹å­æ¥è¯´æ˜å®ƒä»¬çš„åº”ç”¨ã€‚ 1. util.promisify åœ¨ Node.js ..."><meta property="og:type" content="website"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2024-06-21T09:46:17.000Z"><meta property="article:author" content="hanekawa-shiki"><meta property="article:modified_time" content="2024-06-21T09:46:17.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"WebPage","name":"Util","description":"Util äº†è§£ Node.js ä¸­çš„utilæ¨¡å—æ˜¯ç¼–ç¨‹ä¹‹æ—…çš„ä¸€éƒ¨åˆ†ã€‚è¿™ä¸ªæ¨¡å—æä¾›äº†ä¸€ç³»åˆ—å®ç”¨å‡½æ•°ï¼Œç”¨äºæ‰§è¡Œå„ç§ä¸ JavaScript ç¼–ç¨‹ç›¸å…³çš„ä»»åŠ¡ã€‚å®ƒæ˜¯ Node.js æ ¸å¿ƒåº“çš„ä¸€éƒ¨åˆ†ï¼Œä¸éœ€è¦å®‰è£…é¢å¤–çš„åŒ…å°±å¯ä»¥ä½¿ç”¨ã€‚ä¸‹é¢ï¼Œæˆ‘ä»¬å°†æ¢è®¨utilæ¨¡å—çš„å‡ ä¸ªå¸¸ç”¨åŠŸèƒ½ï¼Œå¹¶é€šè¿‡å®é™…ä¾‹å­æ¥è¯´æ˜å®ƒä»¬çš„åº”ç”¨ã€‚ 1. util.promisify åœ¨ Node.js ..."}</script><meta name="keywords" content="JavaScript,HTML,CSS"><link rel="icon" href="/favicon.ico"><link rel="icon" href="/assets/icons/chrome-192.png" type="image/png" sizes="192x192"><link rel="icon" href="/assets/icons/chrome-512.png" type="image/png" sizes="512x512"><link rel="icon" href="/assets/icons/chrome-mask-192.png" type="image/png" sizes="192x192"><link rel="icon" href="/assets/icons/chrome-mask-512.png" type="image/png" sizes="512x512"><link rel="manifest" href="/manifest.webmanifest" crossorigin="use-credentials"><meta name="theme-color" content="#5c92d1"><link rel="apple-touch-icon" href="/assets/icons/apple-touch-icon.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="white"><meta name="msapplication-TileImage" content="/assets/icons/ms-icon-144.png"><meta name="msapplication-TileColor" content="#ffffff"><title>Util | hanekawa-shiki</title><meta name="description" content="Util äº†è§£ Node.js ä¸­çš„utilæ¨¡å—æ˜¯ç¼–ç¨‹ä¹‹æ—…çš„ä¸€éƒ¨åˆ†ã€‚è¿™ä¸ªæ¨¡å—æä¾›äº†ä¸€ç³»åˆ—å®ç”¨å‡½æ•°ï¼Œç”¨äºæ‰§è¡Œå„ç§ä¸ JavaScript ç¼–ç¨‹ç›¸å…³çš„ä»»åŠ¡ã€‚å®ƒæ˜¯ Node.js æ ¸å¿ƒåº“çš„ä¸€éƒ¨åˆ†ï¼Œä¸éœ€è¦å®‰è£…é¢å¤–çš„åŒ…å°±å¯ä»¥ä½¿ç”¨ã€‚ä¸‹é¢ï¼Œæˆ‘ä»¬å°†æ¢è®¨utilæ¨¡å—çš„å‡ ä¸ªå¸¸ç”¨åŠŸèƒ½ï¼Œå¹¶é€šè¿‡å®é™…ä¾‹å­æ¥è¯´æ˜å®ƒä»¬çš„åº”ç”¨ã€‚ 1. util.promisify åœ¨ Node.js ...">
    <link rel="stylesheet" href="/assets/css/styles.a84c0532.css">
    <link rel="preload" href="/assets/js/runtime~app.be370b10.js" as="script"><link rel="preload" href="/assets/css/styles.a84c0532.css" as="style"><link rel="preload" href="/assets/js/4485.e6fe7c7b.js" as="script"><link rel="preload" href="/assets/js/app.bf6f64e3.js" as="script">
    
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><!--[--><div class="theme-container external-link-icon has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><!--[--><a class="route-link vp-brand" href="/"><img class="vp-nav-logo light" src="/assets/svg/logo.svg" alt><img class="vp-nav-logo dark" src="/assets/svg/logo.svg" alt><span class="vp-site-name hide-in-pad">hanekawa-shiki</span></a><!--]--><!----></div><div class="vp-navbar-center"><!----><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/" aria-label="åšå®¢ä¸»é¡µ"><!--[--><span class="font-icon icon home" style=""></span><!--]-->åšå®¢ä¸»é¡µ<!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="å­¦ä¹ ç¬”è®°"><!--[--><span class="font-icon icon framework" style=""></span>å­¦ä¹ ç¬”è®°<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">å‰ç«¯æ¡†æ¶</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/framework_front/vue3/" aria-label="Vue3ç¬”è®°"><!--[--><span class="font-icon icon vue" style=""></span><!--]-->Vue3ç¬”è®°<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/framework_front/react/" aria-label="Reactç¬”è®°"><!--[--><span class="font-icon icon react" style=""></span><!--]-->Reactç¬”è®°<!----></a></li></ul></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="æ–‡æ¡£"><!--[--><span class="font-icon icon framework" style=""></span>æ–‡æ¡£<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">æ¬è¿</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link route-link-active auto-link" href="/document/node-doc/" aria-label="Node.jsæ–‡æ¡£"><!--[--><span class="font-icon icon circle-info" style=""></span><!--]-->Node.jsæ–‡æ¡£<!----></a></li></ul></li></ul></button></div></div></nav><!--]--><!----></div><div class="vp-navbar-end"><!----><!--[--><!----><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com/hanekawa-shiki/hanekawa-shiki.github.io" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" name="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-color-mode-switch" id="color-mode-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" name="auto" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" name="dark" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" name="light" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!----><!--]--><!----><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!----><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/" aria-label="Node.jsæ–‡æ¡£"><!--[--><span class="font-icon icon circle-info" style=""></span><!--]-->Node.jsæ–‡æ¡£<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Assert.html" aria-label="Assert"><!---->Assert<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Async%20hooks.html" aria-label="Async hooks"><!---->Async hooks<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Asynchronous%20context%20tracking.html" aria-label="Asynchronous context tracking"><!---->Asynchronous context tracking<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Buffer.html" aria-label="Buffer"><!---->Buffer<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/C__%20addons.html" aria-label="C++ addons"><!---->C++ addons<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/C__%20embedder%20API.html" aria-label="C++ embedder API"><!---->C++ embedder API<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Child%20process.html" aria-label="Child process"><!---->Child process<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Cluster.html" aria-label="Cluster"><!---->Cluster<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Command-line%20API.html" aria-label="Command-line API"><!---->Command-line API<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Console.html" aria-label="Console"><!---->Console<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Corepack.html" aria-label="Corepack"><!---->Corepack<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Crypto.html" aria-label="Crypto"><!---->Crypto<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Debugger.html" aria-label="Debugger"><!---->Debugger<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Deprecated%20APIs.html" aria-label="Deprecated APIs"><!---->Deprecated APIs<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Diagnostic%20report.html" aria-label="Diagnostic report"><!---->Diagnostic report<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Diagnostics%20Channel.html" aria-label="Diagnostics Channel"><!---->Diagnostics Channel<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/DNS.html" aria-label="DNS"><!---->DNS<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Domain.html" aria-label="Domain"><!---->Domain<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Errors.html" aria-label="Errors"><!---->Errors<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Events.html" aria-label="Events"><!---->Events<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/File%20system.html" aria-label="File system"><!---->File system<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Global%20objects.html" aria-label="Global objects"><!---->Global objects<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/HTTP.html" aria-label="HTTP"><!---->HTTP<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/HTTPS.html" aria-label="HTTPS"><!---->HTTPS<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Inspector.html" aria-label="Inspector"><!---->Inspector<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Internationalization%20support.html" aria-label="Internationalization support"><!---->Internationalization support<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Net.html" aria-label="Net"><!---->Net<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Node-API.html" aria-label="Node-API"><!---->Node-API<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/OS.html" aria-label="OS"><!---->OS<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Path.html" aria-label="Path"><!---->Path<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Performance%20measurement%20APIs.html" aria-label="Performance measurement APIs"><!---->Performance measurement APIs<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Permissions.html" aria-label="Permissions"><!---->Permissions<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Process.html" aria-label="Process"><!---->Process<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Punycode.html" aria-label="Punycode"><!---->Punycode<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Query%20string.html" aria-label="Query string"><!---->Query string<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Readline.html" aria-label="Readline"><!---->Readline<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/REPL.html" aria-label="REPL"><!---->REPL<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Stream.html" aria-label="Stream"><!---->Stream<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/String%20decoder.html" aria-label="String decoder"><!---->String decoder<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Test%20runner.html" aria-label="Test runner"><!---->Test runner<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Timers.html" aria-label="Timers"><!---->Timers<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/TLS%20(SSL).html" aria-label="TLS (SSL)"><!---->TLS (SSL)<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Trace%20events.html" aria-label="Trace events"><!---->Trace events<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/TTY.html" aria-label="TTY"><!---->TTY<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/URL.html" aria-label="URL"><!---->URL<!----></a></li><li><a class="route-link route-link-active auto-link vp-sidebar-link active" href="/document/node-doc/Util.html" aria-label="Util"><!---->Util<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/V8.html" aria-label="V8"><!---->V8<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/VM%20(executing%20JavaScript).html" aria-label="VM (executing JavaScript)"><!---->VM (executing JavaScript)<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Web%20Crypto%20API.html" aria-label="Web Crypto API"><!---->Web Crypto API<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Web%20Streams%20API.html" aria-label="Web Streams API"><!---->Web Streams API<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/WebAssembly%20System%20Interface%20(WASI).html" aria-label="WebAssembly System Interface (WASI)"><!---->WebAssembly System Interface (WASI)<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Worker%20threads.html" aria-label="Worker threads"><!---->Worker threads<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Zlib.html" aria-label="Zlib"><!---->Zlib<!----></a></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->Util</h1><div class="page-info"><span class="page-author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon" name="author"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://hanekawa.top" target="_blank" rel="noopener noreferrer">hanekawa-shiki</a></span><span property="author" content="hanekawa-shiki"></span></span><!----><span class="page-date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2024-06-21T09:46:17.000Z"></span><!----><!----><span class="page-reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 272 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT272M"></span><span class="page-word-info" aria-label="å­—æ•°ğŸ” " data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon word-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="word icon" name="word"><path d="M518.217 432.64V73.143A73.143 73.143 0 01603.43 1.097a512 512 0 01419.474 419.474 73.143 73.143 0 01-72.046 85.212H591.36a73.143 73.143 0 01-73.143-73.143z"></path><path d="M493.714 566.857h340.297a73.143 73.143 0 0173.143 85.577A457.143 457.143 0 11371.566 117.76a73.143 73.143 0 0185.577 73.143v339.383a36.571 36.571 0 0036.571 36.571z"></path></svg><span>çº¦ 81670 å­—</span><meta property="wordCount" content="81670"></span><!----></div><hr></div><div class="vp-toc-placeholder"><aside id="toc"><!----><div class="vp-toc-header">æ­¤é¡µå†…å®¹<button type="button" class="print-button" title="æ‰“å°"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon" name="print"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button><div class="arrow end"></div></div><div class="vp-toc-wrapper"><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-util-promisify">1. util.promisify</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-util-inherits">2. util.inherits</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3-util-format">3. util.format</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ç»“è®º">ç»“è®º</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#util-callbackify-original">util.callbackify(original)</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#åŸºæœ¬æ¦‚å¿µ">åŸºæœ¬æ¦‚å¿µ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä»€ä¹ˆæ˜¯-util-callbackify-original">ä»€ä¹ˆæ˜¯ util.callbackify(original)ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å¦‚ä½•ä½¿ç”¨å’Œä¾‹å­">å¦‚ä½•ä½¿ç”¨å’Œä¾‹å­</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…è¿ç”¨">å®é™…è¿ç”¨</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#util-debuglog-section-callback">util.debuglog(section[, callback])</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å‚æ•°è§£é‡Š">å‚æ•°è§£é‡Š</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å¦‚ä½•ä½¿ç”¨">å¦‚ä½•ä½¿ç”¨</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…åº”ç”¨ä¾‹å­">å®é™…åº”ç”¨ä¾‹å­</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#debuglog-enabled">debuglog().enabled</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ç†è§£-debuglog-enabled">ç†è§£ debuglog().enabled</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…è¿ç”¨-1">å®é™…è¿ç”¨</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#util-debug-section">util.debug(section)</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ç®€å•æ¦‚è¿°">ç®€å•æ¦‚è¿°</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-debuglog-section">util.debuglog(section)</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#util-deprecate-fn-msg-code">util.deprecate(fn, msg[, code])</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#è§£é‡Š">è§£é‡Š</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä½¿ç”¨æ–¹å¼">ä½¿ç”¨æ–¹å¼</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…è¿ç”¨çš„ä¾‹å­-1">å®é™…è¿ç”¨çš„ä¾‹å­</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#util-format-format-args">util.format(format[, ...args])</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#åŸºæœ¬ç†è§£">åŸºæœ¬ç†è§£</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#æ ¼å¼å­—ç¬¦ä¸²è§„åˆ™">æ ¼å¼å­—ç¬¦ä¸²è§„åˆ™</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…è¿ç”¨ä¾‹å­">å®é™…è¿ç”¨ä¾‹å­</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å°ç»“">å°ç»“</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#util-formatwithoptions-inspectoptions-format-args">util.formatWithOptions(inspectOptions, format[, ...args])</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#åŸºç¡€çŸ¥è¯†">åŸºç¡€çŸ¥è¯†</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-formatwithoptions">util.formatWithOptions</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ç¤ºä¾‹">ç¤ºä¾‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#æ€»ç»“">æ€»ç»“</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#util-getsystemerrorname-err">util.getSystemErrorName(err)</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#åŸºæœ¬æ¦‚å¿µ-1">åŸºæœ¬æ¦‚å¿µ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä½¿ç”¨æ–¹æ³•">ä½¿ç”¨æ–¹æ³•</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…è¿ç”¨çš„ä¾‹å­-2">å®é™…è¿ç”¨çš„ä¾‹å­</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ç»“è®º-1">ç»“è®º</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#util-getsystemerrormap">util.getSystemErrorMap()</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä¸ºä»€ä¹ˆéœ€è¦-util-getsystemerrormap">ä¸ºä»€ä¹ˆéœ€è¦ util.getSystemErrorMap()?</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å¦‚ä½•ä½¿ç”¨-util-getsystemerrormap">å¦‚ä½•ä½¿ç”¨ util.getSystemErrorMap()?</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…è¿ç”¨ç¤ºä¾‹">å®é™…è¿ç”¨ç¤ºä¾‹</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#util-inherits-constructor-superconstructor">util.inherits(constructor, superConstructor)</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä»€ä¹ˆæ˜¯-util-inherits">ä»€ä¹ˆæ˜¯ util.inherits?</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å¦‚ä½•ä½¿ç”¨-1">å¦‚ä½•ä½¿ç”¨ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…è¿ç”¨-2">å®é™…è¿ç”¨</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#æ³¨æ„ç‚¹">æ³¨æ„ç‚¹</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#util-inspect-object-options">util.inspect(object[, options])</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å‚æ•°-1">å‚æ•°</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å¸¸ç”¨é€‰é¡¹">å¸¸ç”¨é€‰é¡¹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…ä¾‹å­">å®é™…ä¾‹å­</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#æ€»ç»“-1">æ€»ç»“</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#util-inspect-object-showhidden-depth-colors">util.inspect(object[, showHidden[, depth[, colors]]])</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#åŸºæœ¬ä½¿ç”¨">åŸºæœ¬ä½¿ç”¨</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å‚æ•°è¯¦è§£">å‚æ•°è¯¦è§£</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…è¿ç”¨ä¾‹å­-1">å®é™…è¿ç”¨ä¾‹å­</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#æ€»ç»“-2">æ€»ç»“</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#customizing-util-inspect-colors">Customizing util.inspect colors</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ç¤ºä¾‹-1">ç¤ºä¾‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å°ç»“-1">å°ç»“</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å¦‚ä½•ä½¿ç”¨-2">å¦‚ä½•ä½¿ç”¨</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…åº”ç”¨ç¤ºä¾‹">å®é™…åº”ç”¨ç¤ºä¾‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#åŸºæœ¬æ¦‚å¿µ-2">åŸºæœ¬æ¦‚å¿µ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…è¿ç”¨ä¾‹å­-2">å®é™…è¿ç”¨ä¾‹å­</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#æ€»ç»“-3">æ€»ç»“</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#custom-inspection-functions-on-objects">Custom inspection functions on objects</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#åŸºæœ¬æ¦‚å¿µ-3">åŸºæœ¬æ¦‚å¿µ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å¦‚ä½•å®ç°">å¦‚ä½•å®ç°</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…ä¾‹å­-1">å®é™…ä¾‹å­</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä½¿ç”¨åœºæ™¯">ä½¿ç”¨åœºæ™¯</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#æ€»ç»“-4">æ€»ç»“</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-inspect-custom">util.inspect.custom</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-util-æ¨¡å—">1. util æ¨¡å—</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-inspect-æ–¹æ³•">2. inspect æ–¹æ³•</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3-symbol-ç±»å‹">3. Symbol ç±»å‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-inspect-custom-1">util.inspect.custom</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…è¿ç”¨ä¾‹å­-3">å®é™…è¿ç”¨ä¾‹å­</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-inspect-defaultoptions">util.inspect.defaultOptions</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…åº”ç”¨ä¸¾ä¾‹">å®é™…åº”ç”¨ä¸¾ä¾‹</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#util-isdeepstrictequal-val1-val2">util.isDeepStrictEqual(val1, val2)</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å·¥ä½œåŸç†">å·¥ä½œåŸç†ï¼š</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä½¿ç”¨åœºæ™¯ç¤ºä¾‹">ä½¿ç”¨åœºæ™¯ç¤ºä¾‹ï¼š</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#class-util-mimetype">Class: util.MIMEType</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä»€ä¹ˆæ˜¯util-mimetype">ä»€ä¹ˆæ˜¯util.MIMETypeï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å¦‚ä½•ä½¿ç”¨util-mimetype">å¦‚ä½•ä½¿ç”¨util.MIMETypeï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…è¿ç”¨ä¾‹å­-4">å®é™…è¿ç”¨ä¾‹å­</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#constructor-new-mimetype-input">Constructor: new MIMEType(input)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#åŸºæœ¬ä½¿ç”¨-1">åŸºæœ¬ä½¿ç”¨</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…åº”ç”¨ä¸¾ä¾‹-1">å®é™…åº”ç”¨ä¸¾ä¾‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#mime-type">mime.type</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä»€ä¹ˆæ˜¯-mime-ç±»å‹">ä»€ä¹ˆæ˜¯ MIME ç±»å‹ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#åœ¨-node-js-ä¸­å¤„ç†-mime-ç±»å‹">åœ¨ Node.js ä¸­å¤„ç† MIME ç±»å‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#mime-subtype">mime.subtype</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#è¯¦è§£-mime-subtype">è¯¦è§£ mime.subtype()</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä½¿ç”¨åœºæ™¯ä¸¾ä¾‹">ä½¿ç”¨åœºæ™¯ä¸¾ä¾‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#mime-essence">mime.essence</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ç¤ºä¾‹-2">ç¤ºä¾‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…åº”ç”¨åœºæ™¯">å®é™…åº”ç”¨åœºæ™¯</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#mime-params">mime.params</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#mime-ç±»å‹ç®€ä»‹">MIME ç±»å‹ç®€ä»‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#mime-params-è§£é‡Š">mime.params è§£é‡Š</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…è¿ç”¨çš„ä¾‹å­-3">å®é™…è¿ç”¨çš„ä¾‹å­</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ç¤ºä¾‹ä»£ç -1">ç¤ºä¾‹ä»£ç </a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#mime-tostring">mime.toString()</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#mime-ç±»å‹ç®€ä»‹-1">MIME ç±»å‹ç®€ä»‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#node-js-ä¸­çš„-mime-ç±»å‹å¤„ç†">Node.js ä¸­çš„ MIME ç±»å‹å¤„ç†</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#mime-tostring-æ–¹æ³•ç®€ä»‹">mime.toString() æ–¹æ³•ç®€ä»‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…åº”ç”¨ç¤ºä¾‹-1">å®é™…åº”ç”¨ç¤ºä¾‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#mime-tojson">mime.toJSON()</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä»€ä¹ˆæ˜¯-mime-ç±»å‹-1">ä»€ä¹ˆæ˜¯ MIME ç±»å‹ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#node-js-ä¸­çš„-mime-ç±»å‹å¤„ç†-1">Node.js ä¸­çš„ mime ç±»å‹å¤„ç†</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#mime-tojson-æ–¹æ³•ä»‹ç»">mime.toJSON()æ–¹æ³•ä»‹ç»</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…åº”ç”¨ä¸¾ä¾‹-2">å®é™…åº”ç”¨ä¸¾ä¾‹</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#class-util-mimeparams">Class: util.MIMEParams</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ç†è§£-mime-ç±»å‹">ç†è§£ MIME ç±»å‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#mime-ç±»å‹ä¸­çš„å‚æ•°">MIME ç±»å‹ä¸­çš„å‚æ•°</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-mimeparams-ç±»">util.MIMEParams ç±»</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…åº”ç”¨ç¤ºä¾‹-2">å®é™…åº”ç”¨ç¤ºä¾‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#constructor-new-mimeparams">Constructor: new MIMEParams()</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä»€ä¹ˆæ˜¯-mime-ç±»å‹-2">ä»€ä¹ˆæ˜¯ MIME ç±»å‹ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#mimeparams-æ„é€ å‡½æ•°">MIMEParams æ„é€ å‡½æ•°</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#mimeparams-delete-name">mimeParams.delete(name)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#mime-ç±»å‹">MIME ç±»å‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#urlsearchparams-å¯¹è±¡">URLSearchParams å¯¹è±¡</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#mimeparams-delete-name-1">mimeParams.delete(name)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#mimeparams-entries">mimeParams.entries()</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#mime-ç±»å‹-1">MIME ç±»å‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#mime-ç±»å‹å‚æ•°">MIME ç±»å‹å‚æ•°</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#mimeparams-entries-1">mimeParams.entries()</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…è¿ç”¨ç¤ºä¾‹-2">å®é™…è¿ç”¨ç¤ºä¾‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#mimeparams-get-name">mimeParams.get(name)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å¦‚ä½•ç†è§£-mimeparams-get-name">å¦‚ä½•ç†è§£ mimeParams.get(name)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…è¿ç”¨ç¤ºä¾‹-3">å®é™…è¿ç”¨ç¤ºä¾‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#mimeparams-has-name">mimeParams.has(name)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä»€ä¹ˆæ˜¯-mime">ä»€ä¹ˆæ˜¯ MIMEï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#äº†è§£-mimeparams-has-name">äº†è§£ mimeParams.has(name)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#mimeparams-keys">mimeParams.keys()</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…åº”ç”¨ä¾‹å­-1">å®é™…åº”ç”¨ä¾‹å­</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#mimeparams-set-name-value">mimeParams.set(name, value)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#mimeparams-set-name-value-1">mimeParams.set(name, value)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…åº”ç”¨ä¾‹å­-2">å®é™…åº”ç”¨ä¾‹å­</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#mimeparams-values">mimeParams.values()</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#mime-ç±»å‹-2">MIME ç±»å‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å‚æ•°-2">å‚æ•°</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#values-æ–¹æ³•">.values() æ–¹æ³•</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…è¿ç”¨ä¾‹å­-5">å®é™…è¿ç”¨ä¾‹å­</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#mimeparams-iterator-https-nodejs-org-docs-latest-api-util-html-mimeparamsiterator">[mimeParams@@iterator](https://nodejs.org/docs/latest/api/util.html#mimeparamsiterator)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#åŸºç¡€çŸ¥è¯†-1">åŸºç¡€çŸ¥è¯†</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#mimeparams-iterator">mimeParams@@iterator</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…è¿ç”¨ç¤ºä¾‹-4">å®é™…è¿ç”¨ç¤ºä¾‹</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#util-parseargs-config">util.parseArgs([config])</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#åŸºæœ¬æ¦‚å¿µ-4">åŸºæœ¬æ¦‚å¿µ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä½¿ç”¨-util-parseargs-config">ä½¿ç”¨ util.parseArgs([config])</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å°ç»“-2">å°ç»“</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#parseargs-tokens">parseArgs tokens</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#åŸºæœ¬æ¦‚å¿µ-5">åŸºæœ¬æ¦‚å¿µ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…è¿ç”¨-3">å®é™…è¿ç”¨</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#util-parseenv-content">util.parseEnv(content)</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å¦‚ä½•ä½¿ç”¨-util-parseenv-content">å¦‚ä½•ä½¿ç”¨ util.parseEnv(content)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…åº”ç”¨ä¾‹å­-3">å®é™…åº”ç”¨ä¾‹å­</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#util-promisify-original">util.promisify(original)</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä½¿ç”¨util-promisify">ä½¿ç”¨util.promisify()</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…è¿ç”¨åœºæ™¯">å®é™…è¿ç”¨åœºæ™¯</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#custom-promisified-functions">Custom promisified functions</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä¸ºä»€ä¹ˆéœ€è¦-custom-promisified-functions">ä¸ºä»€ä¹ˆéœ€è¦ Custom Promisified Functions</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å¦‚ä½•ä½¿ç”¨-3">å¦‚ä½•ä½¿ç”¨</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#è‡ªå®šä¹‰-promisify-å‡½æ•°">è‡ªå®šä¹‰ Promisify å‡½æ•°</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-promisify-custom">util.promisify.custom</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä»€ä¹ˆæ˜¯-util-promisify-custom">ä»€ä¹ˆæ˜¯ util.promisify.custom?</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…è¿ç”¨-4">å®é™…è¿ç”¨</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#util-stripvtcontrolcharacters-str">util.stripVTControlCharacters(str)</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä»€ä¹ˆæ˜¯-vt-æ§åˆ¶å­—ç¬¦">ä»€ä¹ˆæ˜¯ VT æ§åˆ¶å­—ç¬¦ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-stripvtcontrolcharacters-str-çš„ä½œç”¨">util.stripVTControlCharacters(str)çš„ä½œç”¨</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…è¿ç”¨ä¾‹å­-6">å®é™…è¿ç”¨ä¾‹å­</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#util-styletext-format-text">util.styleText(format, text)</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-styletext-format-text-ç®€ä»‹">util.styleText(format, text) ç®€ä»‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å‚æ•°è¯¦è§£-1">å‚æ•°è¯¦è§£</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…è¿ç”¨ä¾‹å­-7">å®é™…è¿ç”¨ä¾‹å­</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#æ³¨æ„ç‚¹-1">æ³¨æ„ç‚¹</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#class-util-textdecoder">Class: util.TextDecoder</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ç®€å•ä»‹ç»">ç®€å•ä»‹ç»</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä½¿ç”¨ä¾‹å­-1">ä½¿ç”¨ä¾‹å­</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#æ€»ç»“-5">æ€»ç»“</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#whatwg-supported-encodings">WHATWG supported encodings</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#whatwg-supported-encodings-1">WHATWG Supported Encodings</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ç¼–ç -encoding">ç¼–ç ï¼ˆEncodingï¼‰</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#icu-international-components-for-unicode">ICUï¼ˆInternational Components for Unicodeï¼‰</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#encodings-supported-by-default-with-full-icu-data-1">Encodings supported by default with full ICU data</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä¾‹å­">ä¾‹å­</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#new-textdecoder-encoding-options">new TextDecoder([encoding[, options]])</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å‚æ•°-3">å‚æ•°</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…åº”ç”¨ä¾‹å­-4">å®é™…åº”ç”¨ä¾‹å­</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#textdecoder-decode-input-options">textDecoder.decode([input[, options]])</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#åŸºç¡€ç”¨æ³•">åŸºç¡€ç”¨æ³•</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å‚æ•°è¯¦è§£-2">å‚æ•°è¯¦è§£</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…è¿ç”¨ç¤ºä¾‹-5">å®é™…è¿ç”¨ç¤ºä¾‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#textdecoder-encoding">textDecoder.encoding</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ç†è§£-textdecoder-encoding">ç†è§£ textDecoder.encoding</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…åº”ç”¨ä¾‹å­-5">å®é™…åº”ç”¨ä¾‹å­</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#æ€»ç»“-6">æ€»ç»“</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#textdecoder-fatal">textDecoder.fatal</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#æ–‡æœ¬ç¼–ç ç®€ä»‹">æ–‡æœ¬ç¼–ç ç®€ä»‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#è§£ç è¿‡ç¨‹åŠé—®é¢˜">è§£ç è¿‡ç¨‹åŠé—®é¢˜</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#textdecoder-ç±»ä¸-fatal-å±æ€§">TextDecoder ç±»ä¸ fatal å±æ€§</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®ä¾‹æ¼”ç¤º">å®ä¾‹æ¼”ç¤º</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#åº”ç”¨åœºæ™¯">åº”ç”¨åœºæ™¯</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#textdecoder-ignorebom">textDecoder.ignoreBOM</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä»€ä¹ˆæ˜¯-bom">ä»€ä¹ˆæ˜¯ BOMï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ignorebom-å±æ€§">ignoreBOM å±æ€§</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…è¿ç”¨ä¾‹å­-8">å®é™…è¿ç”¨ä¾‹å­</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#class-util-textencoder">Class: util.TextEncoder</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#åŸºæœ¬æ¦‚å¿µ-6">åŸºæœ¬æ¦‚å¿µ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä½¿ç”¨-textencoder">ä½¿ç”¨ TextEncoder</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…åº”ç”¨ç¤ºä¾‹-3">å®é™…åº”ç”¨ç¤ºä¾‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#æ€»ç»“-7">æ€»ç»“</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#textencoder-encode-input">textEncoder.encode([input])</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å¦‚ä½•ç†è§£-textencoder-encode-input">å¦‚ä½•ç†è§£ textEncoder.encode([input])</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä½¿ç”¨åœºæ™¯ä¸¾ä¾‹-1">ä½¿ç”¨åœºæ™¯ä¸¾ä¾‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#textencoder-encodeinto-src-dest">textEncoder.encodeInto(src, dest)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#åŸºç¡€æ¦‚å¿µ">åŸºç¡€æ¦‚å¿µ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#textencoder-encodeinto-src-dest-1">textEncoder.encodeInto(src, dest)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…åº”ç”¨ä¾‹å­-6">å®é™…åº”ç”¨ä¾‹å­</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å°ç»“-3">å°ç»“</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#textencoder-encoding">textEncoder.encoding</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#util-tousvstring-string">util.toUSVString(string)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#util-transferableabortcontroller">util.transferableAbortController()</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#åŸºæœ¬æ¦‚å¿µ-7">åŸºæœ¬æ¦‚å¿µ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-transferableabortcontroller-1">util.transferableAbortController()</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…åº”ç”¨ç¤ºä¾‹-4">å®é™…åº”ç”¨ç¤ºä¾‹</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#util-transferableabortsignal-signal">util.transferableAbortSignal(signal)</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#åŸºç¡€æ¦‚å¿µ-1">åŸºç¡€æ¦‚å¿µ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-transferableabortsignal-signal-1">util.transferableAbortSignal(signal)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…åº”ç”¨ç¤ºä¾‹-5">å®é™…åº”ç”¨ç¤ºä¾‹</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#util-aborted-signal-resource">util.aborted(signal, resource)</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å‚æ•°è§£é‡Š-1">å‚æ•°è§£é‡Šï¼š</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…è¿ç”¨ä¾‹å­-9">å®é™…è¿ç”¨ä¾‹å­ï¼š</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#util-types">util.types</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä¸ºä»€ä¹ˆéœ€è¦util-types">ä¸ºä»€ä¹ˆéœ€è¦util.types</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-typesçš„ä¸€äº›å®ç”¨æ–¹æ³•">util.typesçš„ä¸€äº›å®ç”¨æ–¹æ³•</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…åº”ç”¨åœºæ™¯-1">å®é™…åº”ç”¨åœºæ™¯</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-types-isanyarraybuffer-value">util.types.isAnyArrayBuffer(value)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä»€ä¹ˆæ˜¯-arraybuffer">ä»€ä¹ˆæ˜¯ ArrayBufferï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä¸ºä»€ä¹ˆè¦ä½¿ç”¨-util-types-isanyarraybuffer">ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ util.types.isAnyArrayBuffer()ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å¦‚ä½•ä½¿ç”¨-util-types-isanyarraybuffer">å¦‚ä½•ä½¿ç”¨ util.types.isAnyArrayBuffer()ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…ä¾‹å­-3">å®é™…ä¾‹å­</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#æ€»ç»“-8">æ€»ç»“</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-types-isarraybufferview-value">util.types.isArrayBufferView(value)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä»€ä¹ˆæ˜¯-arraybuffer-1">ä»€ä¹ˆæ˜¯ ArrayBuffer?</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä»€ä¹ˆæ˜¯-arraybuffer-è§†å›¾">ä»€ä¹ˆæ˜¯ ArrayBuffer è§†å›¾ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-types-isarraybufferview-value-1">util.types.isArrayBufferView(value)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…è¿ç”¨ç¤ºä¾‹-6">å®é™…è¿ç”¨ç¤ºä¾‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#æ€»ç»“-9">æ€»ç»“</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-types-isargumentsobject-value">util.types.isArgumentsObject(value)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä¾‹å­-1-åˆ¤æ–­æ™®é€šå‡½æ•°ä¸­çš„-arguments">ä¾‹å­ 1: åˆ¤æ–­æ™®é€šå‡½æ•°ä¸­çš„ arguments</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä¾‹å­-2-é-arguments-å¯¹è±¡çš„æƒ…å†µ">ä¾‹å­ 2: é arguments å¯¹è±¡çš„æƒ…å†µ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#æ€»ç»“-10">æ€»ç»“</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-types-isarraybuffer-value">util.types.isArrayBuffer(value)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä»€ä¹ˆæ˜¯-arraybuffer-2">ä»€ä¹ˆæ˜¯ ArrayBufferï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-types-isarraybuffer-value-1">util.types.isArrayBuffer(value)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…ä¾‹å­-4">å®é™…ä¾‹å­</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-types-isasyncfunction-value">util.types.isAsyncFunction(value)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä»€ä¹ˆæ˜¯å¼‚æ­¥å‡½æ•°">ä»€ä¹ˆæ˜¯å¼‚æ­¥å‡½æ•°ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-types-isasyncfunction-value-1">util.types.isAsyncFunction(value)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…è¿ç”¨çš„ä¾‹å­-6">å®é™…è¿ç”¨çš„ä¾‹å­</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#æ€»ç»“-11">æ€»ç»“</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-types-isbigint64array-value">util.types.isBigInt64Array(value)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#node-js-ç®€ä»‹">Node.js ç®€ä»‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-æ¨¡å—">util æ¨¡å—</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#bigint64array">BigInt64Array</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-types-isbigint64array-value-1">util.types.isBigInt64Array(value)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-types-isbiguint64array-value">util.types.isBigUint64Array(value)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä»€ä¹ˆæ˜¯-biguint64array">ä»€ä¹ˆæ˜¯ BigUint64Arrayï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä½¿ç”¨-util-types-isbiguint64array-value">ä½¿ç”¨ util.types.isBigUint64Array(value)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…è¿ç”¨-5">å®é™…è¿ç”¨</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#æ€»ç»“-12">æ€»ç»“</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-types-isbooleanobject-value">util.types.isBooleanObject(value)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#è§£é‡Š-1">è§£é‡Š</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä½¿ç”¨åœºæ™¯-1">ä½¿ç”¨åœºæ™¯</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä¾‹å­-1">ä¾‹å­</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-types-isboxedprimitive-value">util.types.isBoxedPrimitive(value)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#åŸå§‹ç±»å‹">åŸå§‹ç±»å‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#åŒ…è£…åçš„åŸå§‹ç±»å‹">åŒ…è£…åçš„åŸå§‹ç±»å‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-types-isboxedprimitive-value-1">util.types.isBoxedPrimitive(value)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…è¿ç”¨ç¤ºä¾‹-7">å®é™…è¿ç”¨ç¤ºä¾‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-types-iscryptokey-value">util.types.isCryptoKey(value)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-types-æ¨¡å—">util.types æ¨¡å—</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#åŠ å¯†å¯†é’¥-cryptokey">åŠ å¯†å¯†é’¥ï¼ˆCryptoKeyï¼‰</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-types-iscryptokey-value-1">util.types.isCryptoKey(value)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…è¿ç”¨ä¾‹å­-10">å®é™…è¿ç”¨ä¾‹å­</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-types-isdataview-value">util.types.isDataView(value)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä½¿ç”¨util-types-isdataview-value">ä½¿ç”¨util.types.isDataView(value)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…è¿ç”¨çš„ä¾‹å­-7">å®é™…è¿ç”¨çš„ä¾‹å­</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-types-isdate-value">util.types.isDate(value)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä½¿ç”¨-util-types-isdate-value-çš„ä¾‹å­">ä½¿ç”¨ util.types.isDate(value) çš„ä¾‹å­ï¼š</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-types-isexternal-value">util.types.isExternal(value)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä»€ä¹ˆæ˜¯å¤–éƒ¨ç±»å‹">ä»€ä¹ˆæ˜¯å¤–éƒ¨ç±»å‹ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-types-isexternal-value-çš„ä½¿ç”¨">util.types.isExternal(value)çš„ä½¿ç”¨</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…è¿ç”¨ä¾‹å­-11">å®é™…è¿ç”¨ä¾‹å­</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#æ€»ç»“-13">æ€»ç»“</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-types-isfloat32array-value">util.types.isFloat32Array(value)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä»€ä¹ˆæ˜¯-float32array">ä»€ä¹ˆæ˜¯ Float32Arrayï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-types-isfloat32array-value-æ˜¯ä»€ä¹ˆ">util.types.isFloat32Array(value) æ˜¯ä»€ä¹ˆï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å¦‚ä½•ä½¿ç”¨-4">å¦‚ä½•ä½¿ç”¨ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…è¿ç”¨çš„ä¾‹å­-8">å®é™…è¿ç”¨çš„ä¾‹å­</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-types-isfloat64array-value">util.types.isFloat64Array(value)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä»€ä¹ˆæ˜¯ç±»å‹åŒ–æ•°ç»„-typed-arrays">ä»€ä¹ˆæ˜¯ç±»å‹åŒ–æ•°ç»„ï¼ˆTyped Arraysï¼‰ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä»€ä¹ˆæ˜¯-float64array">ä»€ä¹ˆæ˜¯ Float64Arrayï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-types-isfloat64array-value-1">util.types.isFloat64Array(value)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…è¿ç”¨çš„ä¾‹å­-9">å®é™…è¿ç”¨çš„ä¾‹å­</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-types-isgeneratorfunction-value">util.types.isGeneratorFunction(value)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä»€ä¹ˆæ˜¯ç”Ÿæˆå™¨å‡½æ•°">ä»€ä¹ˆæ˜¯ç”Ÿæˆå™¨å‡½æ•°</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-types-isgeneratorfunction-value-1">util.types.isGeneratorFunction(value)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…åº”ç”¨ç¤ºä¾‹-6">å®é™…åº”ç”¨ç¤ºä¾‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-types-isgeneratorobject-value">util.types.isGeneratorObject(value)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#åŠŸèƒ½">åŠŸèƒ½</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸ªæ–¹æ³•">ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸ªæ–¹æ³•ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…ä¾‹å­-5">å®é™…ä¾‹å­</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å°ç»“-4">å°ç»“</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-types-isint8array-value">util.types.isInt8Array(value)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä»€ä¹ˆæ˜¯int8array">ä»€ä¹ˆæ˜¯Int8Arrayï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-types-isint8array-value-å¦‚ä½•å·¥ä½œ">util.types.isInt8Array(value)å¦‚ä½•å·¥ä½œï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…è¿ç”¨ç¤ºä¾‹-8">å®é™…è¿ç”¨ç¤ºä¾‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-types-isint16array-value">util.types.isInt16Array(value)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ç®€å•ç†è§£">ç®€å•ç†è§£</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä½¿ç”¨åœºæ™¯-2">ä½¿ç”¨åœºæ™¯</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…ä¾‹å­-6">å®é™…ä¾‹å­</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ç»“è®º-2">ç»“è®º</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-types-isint32array-value">util.types.isInt32Array(value)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å¦‚ä½•ä½¿ç”¨util-types-isint32array-value">å¦‚ä½•ä½¿ç”¨util.types.isInt32Array(value)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ç¤ºä¾‹-3">ç¤ºä¾‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…åº”ç”¨åœºæ™¯-2">å®é™…åº”ç”¨åœºæ™¯</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-types-iskeyobject-value">util.types.isKeyObject(value)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å¦‚ä½•ä½¿ç”¨-util-types-iskeyobject-value">å¦‚ä½•ä½¿ç”¨ util.types.isKeyObject(value)ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ç¤ºä¾‹ä»£ç -3">ç¤ºä¾‹ä»£ç </a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…åº”ç”¨åœºæ™¯-3">å®é™…åº”ç”¨åœºæ™¯</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-types-ismap-value">util.types.isMap(value)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä»€ä¹ˆæ˜¯-map-å¯¹è±¡">ä»€ä¹ˆæ˜¯ Map å¯¹è±¡ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-types-ismap-value-1">util.types.isMap(value)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…è¿ç”¨ç¤ºä¾‹-9">å®é™…è¿ç”¨ç¤ºä¾‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-types-ismapiterator-value">util.types.isMapIterator(value)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#node-js-æ˜¯ä»€ä¹ˆ">Node.js æ˜¯ä»€ä¹ˆï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä»€ä¹ˆæ˜¯-util-æ¨¡å—">ä»€ä¹ˆæ˜¯ util æ¨¡å—ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-types-ismapiterator-value-å‡½æ•°">util.types.isMapIterator(value) å‡½æ•°</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…åº”ç”¨ç¤ºä¾‹-7">å®é™…åº”ç”¨ç¤ºä¾‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#æ€»ç»“-14">æ€»ç»“</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-types-ismodulenamespaceobject-value">util.types.isModuleNamespaceObject(value)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…è¿ç”¨ç¤ºä¾‹-10">å®é™…è¿ç”¨ç¤ºä¾‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-types-isnativeerror-value">util.types.isNativeError(value)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä¸ºä»€ä¹ˆéœ€è¦-isnativeerror">ä¸ºä»€ä¹ˆéœ€è¦ isNativeError?</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…è¿ç”¨ç¤ºä¾‹-11">å®é™…è¿ç”¨ç¤ºä¾‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-types-isnumberobject-value">util.types.isNumberObject(value)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä»€ä¹ˆæ˜¯-number-å¯¹è±¡">ä»€ä¹ˆæ˜¯ Number å¯¹è±¡ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-types-isnumberobject-value-çš„ä½œç”¨">util.types.isNumberObject(value)çš„ä½œç”¨</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä½¿ç”¨å®ä¾‹">ä½¿ç”¨å®ä¾‹ï¼š</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…åº”ç”¨åœºæ™¯-4">å®é™…åº”ç”¨åœºæ™¯</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-types-ispromise-value">util.types.isPromise(value)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…è¿ç”¨ä¾‹å­-12">å®é™…è¿ç”¨ä¾‹å­</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-types-isproxy-value">util.types.isProxy(value)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…è¿ç”¨-6">å®é™…è¿ç”¨</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#æ€»ç»“-15">æ€»ç»“</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-types-isregexp-value">util.types.isRegExp(value)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä»€ä¹ˆæ˜¯-regexp">ä»€ä¹ˆæ˜¯ RegExpï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-types-isregexp-value-æ˜¯ä»€ä¹ˆ">util.types.isRegExp(value) æ˜¯ä»€ä¹ˆï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å¦‚ä½•ä½¿ç”¨-5">å¦‚ä½•ä½¿ç”¨?</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…è¿ç”¨ä¸¾ä¾‹-1">å®é™…è¿ç”¨ä¸¾ä¾‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-types-isset-value">util.types.isSet(value)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä»€ä¹ˆæ˜¯-util-types-isset-value">ä»€ä¹ˆæ˜¯ util.types.isSet(value)ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å¦‚ä½•ä½¿ç”¨-util-types-isset-value">å¦‚ä½•ä½¿ç”¨ util.types.isSet(value)ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…è¿ç”¨ç¤ºä¾‹-12">å®é™…è¿ç”¨ç¤ºä¾‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-types-issetiterator-value">util.types.isSetIterator(value)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…è¿ç”¨ç¤ºä¾‹-13">å®é™…è¿ç”¨ç¤ºä¾‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-types-issharedarraybuffer-value">util.types.isSharedArrayBuffer(value)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#sharedarraybuffer-ç®€ä»‹">SharedArrayBuffer ç®€ä»‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-types-çš„ä½œç”¨">util.types çš„ä½œç”¨</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-types-issharedarraybuffer-value-çš„ä½¿ç”¨">util.types.isSharedArrayBuffer(value)çš„ä½¿ç”¨</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…è¿ç”¨ä¾‹å­-13">å®é™…è¿ç”¨ä¾‹å­</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-types-isstringobject-value">util.types.isStringObject(value)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#è§£é‡Š-util-types-isstringobject-value">è§£é‡Š util.types.isStringObject(value)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…è¿ç”¨ä¾‹å­-14">å®é™…è¿ç”¨ä¾‹å­</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#æ€»ç»“-16">æ€»ç»“</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-types-issymbolobject-value">util.types.isSymbolObject(value)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä»€ä¹ˆæ˜¯-symbol">ä»€ä¹ˆæ˜¯ Symbolï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-types-issymbolobject-value-1">util.types.isSymbolObject(value)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…ä¾‹å­-7">å®é™…ä¾‹å­</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#æ€»ç»“-17">æ€»ç»“</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-types-istypedarray-value">util.types.isTypedArray(value)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä»€ä¹ˆæ˜¯ç±»å‹åŒ–æ•°ç»„">ä»€ä¹ˆæ˜¯ç±»å‹åŒ–æ•°ç»„ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-types-istypedarray-value-1">util.types.isTypedArray(value)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…è¿ç”¨ä¾‹å­-15">å®é™…è¿ç”¨ä¾‹å­</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-types-isuint8array-value">util.types.isUint8Array(value)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#åŸºç¡€çŸ¥è¯†-2">åŸºç¡€çŸ¥è¯†</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-types-isuint8array-value-1">util.types.isUint8Array(value)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å‚æ•°-6">å‚æ•°</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä½¿ç”¨åœºæ™¯ä¸¾ä¾‹-2">ä½¿ç”¨åœºæ™¯ä¸¾ä¾‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å°ç»“-5">å°ç»“</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-types-isuint8clampedarray-value">util.types.isUint8ClampedArray(value)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#åŸºæœ¬æ¦‚å¿µ-8">åŸºæœ¬æ¦‚å¿µ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä»€ä¹ˆæ˜¯util-types-isuint8clampedarray-value">ä»€ä¹ˆæ˜¯util.types.isUint8ClampedArray(value)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…åº”ç”¨çš„ä¾‹å­">å®é™…åº”ç”¨çš„ä¾‹å­</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#æ€»ç»“-18">æ€»ç»“</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-types-isuint16array-value">util.types.isUint16Array(value)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä»€ä¹ˆæ˜¯-uint16array">ä»€ä¹ˆæ˜¯ Uint16Arrayï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä¸ºä»€ä¹ˆéœ€è¦-util-types-isuint16array-value">ä¸ºä»€ä¹ˆéœ€è¦ util.types.isUint16Array(value)ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å¦‚ä½•ä½¿ç”¨-util-types-isuint16array-value">å¦‚ä½•ä½¿ç”¨ util.types.isUint16Array(value)ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…è¿ç”¨ç¤ºä¾‹-14">å®é™…è¿ç”¨ç¤ºä¾‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#æ€»ç»“-19">æ€»ç»“</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-types-isuint32array-value">util.types.isUint32Array(value)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä»€ä¹ˆæ˜¯util-types-isuint32array-value">ä»€ä¹ˆæ˜¯util.types.isUint32Array(value)ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä½¿ç”¨åœºæ™¯ç¤ºä¾‹-1">ä½¿ç”¨åœºæ™¯ç¤ºä¾‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ç»“è®º-3">ç»“è®º</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-types-isweakmap-value">util.types.isWeakMap(value)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#åŸºç¡€æ¦‚å¿µ-2">åŸºç¡€æ¦‚å¿µ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…è¿ç”¨ç¤ºä¾‹-15">å®é™…è¿ç”¨ç¤ºä¾‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ç»“è®º-4">ç»“è®º</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-types-isweakset-value">util.types.isWeakSet(value)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä¸¾ä¾‹è¯´æ˜">ä¸¾ä¾‹è¯´æ˜</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#æ€»ç»“-20">æ€»ç»“</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#deprecated-apis">Deprecated APIs</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-util-puts-util-print-å’Œ-util-debug">1. util.puts(), util.print(), å’Œ util.debug()</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-util-extend">2. util._extend()</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ç»“è®º-5">ç»“è®º</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-extend-target-source">util._extend(target, source)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-extend-target-source-1">util._extend(target, source)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…åº”ç”¨ä¾‹å­-7">å®é™…åº”ç”¨ä¾‹å­</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-isarray-object">util.isArray(object)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å¦‚ä½•ä½¿ç”¨-util-isarray">å¦‚ä½•ä½¿ç”¨ util.isArray()</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…è¿ç”¨ä¾‹å­-16">å®é™…è¿ç”¨ä¾‹å­</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ç°ä»£æ›¿ä»£æ–¹æ¡ˆ">ç°ä»£æ›¿ä»£æ–¹æ¡ˆ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-isboolean-object">util.isBoolean(object)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å¦‚ä½•ä½¿ç”¨-util-isboolean-object">å¦‚ä½•ä½¿ç”¨ util.isBoolean(object)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…è¿ç”¨ç¤ºä¾‹-16">å®é™…è¿ç”¨ç¤ºä¾‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-isbuffer-object">util.isBuffer(object)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä»€ä¹ˆæ˜¯-buffer">ä»€ä¹ˆæ˜¯ Bufferï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-isbuffer-object-çš„ä½œç”¨">util.isBuffer(object)çš„ä½œç”¨</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å‚æ•°-7">å‚æ•°</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#è¿”å›å€¼-2">è¿”å›å€¼</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…åº”ç”¨ç¤ºä¾‹-8">å®é™…åº”ç”¨ç¤ºä¾‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-isdate-object">util.isDate(object)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä»€ä¹ˆæ˜¯util-isdate-object">ä»€ä¹ˆæ˜¯util.isDate(object)?</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å¦‚ä½•ä½¿ç”¨util-isdate-object">å¦‚ä½•ä½¿ç”¨util.isDate(object)?</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…åº”ç”¨åœºæ™¯-5">å®é™…åº”ç”¨åœºæ™¯</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-iserror-object">util.isError(object)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#è§£é‡Š-2">è§£é‡Š</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…åº”ç”¨ä¾‹å­-8">å®é™…åº”ç”¨ä¾‹å­</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#æ€»ç»“-21">æ€»ç»“</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-isfunction-object">util.isFunction(object)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ç¤ºä¾‹-1-åŸºæœ¬æ£€æŸ¥">ç¤ºä¾‹ 1: åŸºæœ¬æ£€æŸ¥</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ç¤ºä¾‹-2-å°†å‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’">ç¤ºä¾‹ 2: å°†å‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ç¤ºä¾‹-3-åœ¨å›è°ƒæ¨¡å¼ä¸­ä½¿ç”¨">ç¤ºä¾‹ 3: åœ¨å›è°ƒæ¨¡å¼ä¸­ä½¿ç”¨</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-isnull-object">util.isNull(object)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…ä¾‹å­-8">å®é™…ä¾‹å­</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ç›´æ¥ä½¿ç”¨-null-æ£€æŸ¥">ç›´æ¥ä½¿ç”¨ null æ£€æŸ¥</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-isnullorundefined-object">util.isNullOrUndefined(object)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…è¿ç”¨çš„ä¾‹å­-10">å®é™…è¿ç”¨çš„ä¾‹å­</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-isnumber-object">util.isNumber(object)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å¦‚ä½•åœ¨-node-js-ä¸­æ£€æŸ¥ä¸€ä¸ªå€¼æ˜¯å¦ä¸ºæ•°å­—">å¦‚ä½•åœ¨ Node.js ä¸­æ£€æŸ¥ä¸€ä¸ªå€¼æ˜¯å¦ä¸ºæ•°å­—</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…è¿ç”¨ç¤ºä¾‹-17">å®é™…è¿ç”¨ç¤ºä¾‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-isobject-object">util.isObject(object)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…è¿ç”¨çš„ä¾‹å­-11">å®é™…è¿ç”¨çš„ä¾‹å­</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-isprimitive-object">util.isPrimitive(object)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…è¿ç”¨ç¤ºä¾‹-18">å®é™…è¿ç”¨ç¤ºä¾‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-isregexp-object">util.isRegExp(object)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä½¿ç”¨util-isregexp-object">ä½¿ç”¨util.isRegExp(object)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-isstring-object">util.isString(object)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å¦‚ä½•æ£€æµ‹å­—ç¬¦ä¸²">å¦‚ä½•æ£€æµ‹å­—ç¬¦ä¸²</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…åº”ç”¨ä¾‹å­-9">å®é™…åº”ç”¨ä¾‹å­</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ç»“è®º-6">ç»“è®º</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-issymbol-object">util.isSymbol(object)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#è§£é‡Š-util-issymbol-object">è§£é‡Š util.isSymbol(object)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…åº”ç”¨ä¾‹å­-10">å®é™…åº”ç”¨ä¾‹å­</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#æ€»ç»“-22">æ€»ç»“</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-isundefined-object">util.isUndefined(object)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#è§£é‡Š-util-isundefined-object">è§£é‡Š util.isUndefined(object)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å¦‚ä½•ä½¿ç”¨-6">å¦‚ä½•ä½¿ç”¨</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…è¿ç”¨ä¾‹å­-17">å®é™…è¿ç”¨ä¾‹å­</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#util-log-string">util.log(string)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä»€ä¹ˆæ˜¯-util-log-string">ä»€ä¹ˆæ˜¯ util.log(string)ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å¦‚ä½•ä½¿ç”¨-7">å¦‚ä½•ä½¿ç”¨ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…åº”ç”¨ä¾‹å­-11">å®é™…åº”ç”¨ä¾‹å­</a></li><!----><!--]--></ul></li><!--]--></ul><div class="vp-toc-marker" style="top:-1.7rem;"></div></div><!----></aside></div><!----><div class="theme-hope-content"><h1 id="util" tabindex="-1"><a class="header-anchor" href="#util"><span><a href="https://nodejs.org/docs/latest/api/util.html#util" target="_blank" rel="noopener noreferrer">Util</a></span></a></h1><p>äº†è§£ Node.js ä¸­çš„<code>util</code>æ¨¡å—æ˜¯ç¼–ç¨‹ä¹‹æ—…çš„ä¸€éƒ¨åˆ†ã€‚è¿™ä¸ªæ¨¡å—æä¾›äº†ä¸€ç³»åˆ—å®ç”¨å‡½æ•°ï¼Œç”¨äºæ‰§è¡Œå„ç§ä¸ JavaScript ç¼–ç¨‹ç›¸å…³çš„ä»»åŠ¡ã€‚å®ƒæ˜¯ Node.js æ ¸å¿ƒåº“çš„ä¸€éƒ¨åˆ†ï¼Œä¸éœ€è¦å®‰è£…é¢å¤–çš„åŒ…å°±å¯ä»¥ä½¿ç”¨ã€‚ä¸‹é¢ï¼Œæˆ‘ä»¬å°†æ¢è®¨<code>util</code>æ¨¡å—çš„å‡ ä¸ªå¸¸ç”¨åŠŸèƒ½ï¼Œå¹¶é€šè¿‡å®é™…ä¾‹å­æ¥è¯´æ˜å®ƒä»¬çš„åº”ç”¨ã€‚</p><h3 id="_1-util-promisify" tabindex="-1"><a class="header-anchor" href="#_1-util-promisify"><span>1. <code>util.promisify</code></span></a></h3><p>åœ¨ Node.js ä¸­ï¼Œå¾ˆå¤š API æœ€åˆéƒ½æ˜¯åŸºäºå›è°ƒå‡½æ•°çš„è®¾è®¡ã€‚ä½†éšç€<code>Promise</code>å’Œ<code>async/await</code>çš„æ™®åŠï¼Œä½¿ç”¨åŸºäº promise çš„å¼‚æ­¥ä»£ç å˜å¾—æ›´åŠ æµè¡Œå’Œæ˜“äºç®¡ç†ã€‚<code>util.promisify</code>å‡½æ•°å…è®¸ä½ å°†éµå¾ªä¼ ç»Ÿ Node.js callback é£æ ¼çš„å‡½æ•°ï¼ˆå³æ¥å—ä¸€ä¸ª<code>(err, value) =&gt; ...</code>å›è°ƒä½œä¸ºæœ€åä¸€ä¸ªå‚æ•°çš„å‡½æ•°ï¼‰è½¬æ¢æˆè¿”å› promise çš„å‡½æ•°ã€‚è¿™åœ¨æ‚¨æƒ³è¦ä½¿ç”¨<code>async/await</code>è¯­æ³•æ—¶éå¸¸æœ‰ç”¨ã€‚</p><p><strong>ä¾‹å­</strong>: å°†<code>fs.readFile</code>ï¼ˆç”¨äºè¯»å–æ–‡ä»¶å†…å®¹çš„å‡½æ•°ï¼‰ä»ä½¿ç”¨å›è°ƒåˆ°è¿”å›<code>Promise</code>ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> fs</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">fs</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// è½¬æ¢fs.readFileä¸ºpromiseç‰ˆæœ¬</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> readFile</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">promisify</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">fs</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">readFile</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">async</span><span style="color:#81A1C1;"> function</span><span style="color:#88C0D0;"> readConfig</span><span style="color:#ECEFF4;">()</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  try</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">    const</span><span style="color:#D8DEE9;"> data</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> await</span><span style="color:#88C0D0;"> readFile</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">/path/to/config.json</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">utf8</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">data</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span><span style="color:#81A1C1;"> catch</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">error</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">error</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">error</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88C0D0;">readConfig</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-util-inherits" tabindex="-1"><a class="header-anchor" href="#_2-util-inherits"><span>2. <code>util.inherits</code></span></a></h3><p>åœ¨ ES6 å¼•å…¥<code>class</code>å’Œ<code>extends</code>ä¹‹å‰ï¼ŒNode.js ä½¿ç”¨åŸå‹ç»§æ‰¿æ¥å®ç°å¯¹è±¡ä¹‹é—´çš„ç»§æ‰¿ã€‚<code>util.inherits</code>å‡½æ•°æ˜¯æ­¤è¿‡ç¨‹çš„å¸®æ‰‹ï¼Œå®ƒå¸®åŠ©ä¸€ä¸ªæ„é€ å‡½æ•°ç»§æ‰¿å¦ä¸€ä¸ªæ„é€ å‡½æ•°çš„åŸå‹ã€‚å°½ç®¡ç°ä»£ JavaScript å¼€å‘ä¸­æ¨èä½¿ç”¨<code>class</code>å’Œ<code>extends</code>ï¼Œäº†è§£<code>util.inherits</code>ä»ç„¶å¯¹ç†è§£è€ä»£ç æœ‰å¸®åŠ©ã€‚</p><p><strong>ä¾‹å­</strong>: åˆ›å»º<code>EventEmitter</code>çš„å­ç±»ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> EventEmitter</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">events</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">function</span><span style="color:#88C0D0;"> MyEmitter</span><span style="color:#ECEFF4;">()</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">  EventEmitter</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">call</span><span style="color:#D8DEE9FF;">(</span><span style="color:#81A1C1;">this</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">inherits</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">MyEmitter</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> EventEmitter</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> myEmitter</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> MyEmitter</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">myEmitter</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">on</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">event</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> ()</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">äº‹ä»¶è§¦å‘ï¼</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">myEmitter</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">emit</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">event</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-util-format" tabindex="-1"><a class="header-anchor" href="#_3-util-format"><span>3. <code>util.format</code></span></a></h3><p><code>util.format</code>æ–¹æ³•æä¾›äº†ä¸€ä¸ªç®€å•çš„å­—ç¬¦ä¸²æ ¼å¼åŒ–æœºåˆ¶ï¼Œç±»ä¼¼äº C è¯­è¨€ä¸­çš„<code>sprintf</code>å‡½æ•°ã€‚å®ƒæ”¯æŒå ä½ç¬¦ï¼Œå¦‚<code>%s</code>ï¼ˆå­—ç¬¦ä¸²ï¼‰ï¼Œ<code>%d</code>ï¼ˆæ•°å­—ï¼‰ï¼Œ<code>%j</code>ï¼ˆJSONï¼‰ï¼Œç­‰ç­‰ã€‚è¿™åœ¨åˆ›å»ºæ¶ˆæ¯æˆ–æ—¥å¿—è¾“å‡ºæ—¶ç‰¹åˆ«æœ‰ç”¨ã€‚</p><p><strong>ä¾‹å­</strong>: ä½¿ç”¨<code>util.format</code>æ ¼å¼åŒ–å­—ç¬¦ä¸²ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> message</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">format</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">My %s has %d years</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">cat</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 2</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">message</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡º: My cat has 2 years</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ç»“è®º" tabindex="-1"><a class="header-anchor" href="#ç»“è®º"><span>ç»“è®º</span></a></h3><p><code>util</code>æ¨¡å—æä¾›äº†è®¸å¤šå…¶ä»–æœ‰ç”¨çš„å·¥å…·å’Œå‡½æ•°ï¼Œå¦‚<code>util.debuglog</code>ç”¨äºåˆ›å»ºæ¡ä»¶æ€§è°ƒè¯•æ—¥å¿—ï¼Œ<code>util.deprecate</code>ç”¨äºæ ‡è®°å‡½æ•°ä¸ºå·²å¼ƒç”¨ç­‰ã€‚è™½ç„¶åœ¨ä»‹ç»æ¯ä¸ªåŠŸèƒ½çš„è¯¦ç»†ä¿¡æ¯è¶…å‡ºäº†æœ¬ç­”æ¡ˆçš„èŒƒå›´ï¼Œä½†ä»¥ä¸Šä¾‹å­å±•ç¤ºäº†å®ƒåœ¨æ—¥å¸¸ Node.js ç¼–ç¨‹ä¸­çš„å®ç”¨æ€§å’Œçµæ´»æ€§ã€‚éšç€æ‚¨å¯¹ Node.js çš„è¿›ä¸€æ­¥å­¦ä¹ ï¼Œæ‚¨ä¼šå‘ç°<code>util</code>æ¨¡å—æ˜¯ä¸€ä¸ªåœ¨å¤„ç†æŸäº›ç¼–ç¨‹é—®é¢˜æ—¶å¾ˆæœ‰å¸®åŠ©çš„å·¥å…·ç®±ã€‚</p><h2 id="util-callbackify-original" tabindex="-1"><a class="header-anchor" href="#util-callbackify-original"><span><a href="https://nodejs.org/docs/latest/api/util.html#utilcallbackifyoriginal" target="_blank" rel="noopener noreferrer">util.callbackify(original)</a></span></a></h2><p>ç†è§£ <code>util.callbackify(original)</code> çš„æœ€å¥½æ–¹æ³•æ˜¯é¦–å…ˆäº†è§£ Node.js ä¸­çš„ä¸¤ç§å¸¸ç”¨ç¼–ç¨‹é£æ ¼ï¼šåŸºäº Promise çš„å¼‚æ­¥ç¼–ç¨‹å’ŒåŸºäºå›è°ƒ(callback)çš„å¼‚æ­¥ç¼–ç¨‹ã€‚</p><h3 id="åŸºæœ¬æ¦‚å¿µ" tabindex="-1"><a class="header-anchor" href="#åŸºæœ¬æ¦‚å¿µ"><span>åŸºæœ¬æ¦‚å¿µ</span></a></h3><p><strong>Promise</strong> æ˜¯ç°ä»£ JavaScript çš„ä¸€ä¸ªç‰¹æ€§ï¼Œå®ƒæä¾›äº†ä¸€ç§å¤„ç†å¼‚æ­¥æ“ä½œçš„æ–°æ–¹å¼ã€‚ä¸€ä¸ª Promise å¯¹è±¡ä»£è¡¨äº†ä¸€ä¸ªå¯èƒ½ç°åœ¨ã€ä¹Ÿå¯èƒ½å°†æ¥æ‰ä¼šå®Œæˆçš„æ“ä½œçš„ç»“æœã€‚</p><p><strong>å›è°ƒï¼ˆCallbackï¼‰</strong> åˆ™æ˜¯æ›´æ—©æœŸçš„å¤„ç†å¼‚æ­¥æ“ä½œçš„æ–¹æ³•ã€‚ä½ å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œç„¶åä½œä¸ºå‚æ•°ä¼ é€’ç»™å¦ä¸€ä¸ªå‡½æ•°ã€‚å½“é‚£ä¸ªå¼‚æ­¥æ“ä½œå®Œæˆæ—¶ï¼Œè¿™ä¸ªä¼ é€’çš„å‡½æ•°å°±ä¼šè¢«è°ƒç”¨ã€‚</p><h3 id="ä»€ä¹ˆæ˜¯-util-callbackify-original" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯-util-callbackify-original"><span>ä»€ä¹ˆæ˜¯ <code>util.callbackify(original)</code>ï¼Ÿ</span></a></h3><p>åœ¨ Node.js ä¸­ï¼Œ<code>util.callbackify(original)</code> æ˜¯ä¸€ä¸ªå®ç”¨å·¥å…·å‡½æ•°ï¼Œå®ƒå¯ä»¥æŠŠè¿”å› Promise çš„å‡½æ•°è½¬æ¢æˆéµå¾ªä¼ ç»Ÿ Node.js é£æ ¼çš„å›è°ƒé£æ ¼çš„å‡½æ•°ã€‚è¿™æ„å‘³ç€ï¼Œå¦‚æœä½ æœ‰ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒè¿”å›ä¸€ä¸ª Promiseï¼Œè€Œä½ éœ€è¦åœ¨æŸäº›æƒ…å†µä¸‹ä»¥å›è°ƒå½¢å¼ä½¿ç”¨å®ƒï¼Œ<code>util.callbackify</code> å¯ä»¥å¸®ä½ å®ç°è¿™ä¸€è½¬æ¢ã€‚</p><h3 id="å¦‚ä½•ä½¿ç”¨å’Œä¾‹å­" tabindex="-1"><a class="header-anchor" href="#å¦‚ä½•ä½¿ç”¨å’Œä¾‹å­"><span>å¦‚ä½•ä½¿ç”¨å’Œä¾‹å­</span></a></h3><p>å‡è®¾ä½ æœ‰ä¸€ä¸ªè¿”å› Promise çš„ç®€å•å¼‚æ­¥å‡½æ•°ï¼Œæ¯”å¦‚ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">async</span><span style="color:#81A1C1;"> function</span><span style="color:#88C0D0;"> fetchData</span><span style="color:#ECEFF4;">()</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#616E88;">  // æ¨¡æ‹Ÿå¼‚æ­¥æ•°æ®è·å–</span></span>
<span class="line"><span style="color:#81A1C1;">  return</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">Data from somewhere</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç°åœ¨ï¼Œå¦‚æœä½ æƒ³è¦å°†è¿™ä¸ªå‡½æ•°è½¬æ¢ä¸ºä¼ ç»Ÿçš„ Node.js å›è°ƒé£æ ¼ï¼ˆå³é”™è¯¯ä¼˜å…ˆçš„å›è°ƒå‡½æ•°ï¼‰ï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>util.callbackify</code>ã€‚é¦–å…ˆï¼Œç¡®ä¿å¼•å…¥äº† <code>util</code> æ¨¡å—ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>ç„¶åï¼Œä½¿ç”¨ <code>util.callbackify</code> è½¬æ¢è¯¥å‡½æ•°ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> callbackifiedFetchData</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">callbackify</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">fetchData</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>ç°åœ¨ï¼Œ<code>callbackifiedFetchData</code> æ˜¯ä¸€ä¸ªæ¥å—å›è°ƒå‡½æ•°ä½œä¸ºæœ€åä¸€ä¸ªå‚æ•°çš„å‡½æ•°ã€‚å½“åŸå§‹çš„ Promise è§£ææ—¶ï¼Œè¿™ä¸ªå›è°ƒä¼šè¢«è°ƒç”¨ï¼Œå¹¶ä¸”ä»»ä½•å¼‚å¸¸ï¼ˆæˆ–è€… <code>reject</code>ed promiseï¼‰éƒ½ä¼šä½œä¸ºå›è°ƒçš„ç¬¬ä¸€ä¸ªå‚æ•°ä¼ é€’ï¼ŒæˆåŠŸè§£æçš„å€¼å°†ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ä¼ é€’ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#88C0D0;">callbackifiedFetchData</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">err</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> result</span><span style="color:#ECEFF4;">)</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">err</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">error</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">An error occurred:</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> err</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">    return;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Received data:</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> result</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="å®é™…è¿ç”¨" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨"><span>å®é™…è¿ç”¨</span></a></h3><p>è™½ç„¶ç°ä»£ Node.js å’Œå‰ç«¯å¼€å‘æ™®éé‡‡ç”¨ Promise å’Œ async/await è¯­æ³•ï¼Œä½†åœ¨ä¸€äº›è€æ—§ä»£ç åº“æˆ–éœ€è¦ä¸éµå¾ª Node.js å›è°ƒé£æ ¼çš„åº“äº¤äº’æ—¶ï¼Œ<code>util.callbackify</code> å°±æ˜¾å¾—éå¸¸æœ‰ç”¨ã€‚ä¾‹å¦‚ï¼Œå½“ä¸€ä¸ªæ–°çš„åº“æˆ–ä½ è‡ªå·±ç¼–å†™çš„å‡½æ•°è¿”å› Promiseï¼Œä½†ä½ éœ€è¦åœ¨éµå¾ªä¼ ç»Ÿ Node.js é£æ ¼çš„ä»£ç ä¸­ä½¿ç”¨å®ƒæ—¶ï¼Œä½ å°±å¯ä»¥åˆ©ç”¨ <code>util.callbackify</code> æ¥è¿›è¡Œé€‚é…ã€‚</p><h2 id="util-debuglog-section-callback" tabindex="-1"><a class="header-anchor" href="#util-debuglog-section-callback"><span><a href="https://nodejs.org/docs/latest/api/util.html#utildebuglogsection-callback" target="_blank" rel="noopener noreferrer">util.debuglog(section[, callback])</a></span></a></h2><p>å¥½çš„ï¼Œè®©æˆ‘ä»¬è¯¦ç»†æ¢è®¨ Node.js ä¸­çš„ <code>util.debuglog</code> åŠŸèƒ½ï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„å·¥å…·ï¼Œç‰¹åˆ«æ˜¯åœ¨è°ƒè¯•å¤§å‹åº”ç”¨ç¨‹åºæ—¶ã€‚</p><p>é¦–å…ˆï¼Œ<code>util.debuglog(section[, callback])</code> æ˜¯ Node.js çš„ä¸€ä¸ªå®ç”¨å·¥å…·ï¼ˆutilï¼‰æ¨¡å—ä¸­çš„æ–¹æ³•ã€‚å®ƒç”¨äºåˆ›å»ºä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°å¯ä»¥ä½œä¸ºè°ƒè¯•æ—¥å¿—çš„è®°å½•å™¨ã€‚ä½ å¯ä»¥åˆ©ç”¨å®ƒæ¥è¾“å‡ºä¸€äº›åœ¨æ­£å¸¸æƒ…å†µä¸‹ä¸éœ€è¦æ˜¾ç¤ºï¼Œä½†åœ¨è°ƒè¯•æ—¶å¾ˆæœ‰ç”¨çš„ä¿¡æ¯ã€‚</p><h3 id="å‚æ•°è§£é‡Š" tabindex="-1"><a class="header-anchor" href="#å‚æ•°è§£é‡Š"><span>å‚æ•°è§£é‡Š</span></a></h3><ul><li><strong>section</strong>: è¿™æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²å‚æ•°ï¼Œä»£è¡¨ä½ æƒ³è¦è¿›è¡Œè°ƒè¯•çš„åº”ç”¨ç¨‹åºçš„éƒ¨åˆ†æˆ–æ¨¡å—ã€‚å½“ä½ è®¾ç½®äº†ç¯å¢ƒå˜é‡ <code>NODE_DEBUG</code>ï¼Œå¹¶ä¸”å…¶ä¸­åŒ…å«äº†è¿™ä¸ª <code>section</code> åç§°æ—¶ï¼Œ<code>util.debuglog</code> åˆ›å»ºçš„å‡½æ•°æ‰ä¼šè¾“å‡ºä¿¡æ¯ã€‚</li><li><strong>callback</strong>: è¿™æ˜¯ä¸€ä¸ªå¯é€‰å‚æ•°ï¼Œåœ¨ Node.js v15.3.0 å¼•å…¥ã€‚å¦‚æœæä¾›ï¼Œå½“ debug æ—¥å¿—è¢«æ¿€æ´»æ—¶ï¼Œè¿™ä¸ªå›è°ƒå‡½æ•°ä¼šè¢«è°ƒç”¨ã€‚è¿™å¯¹äºåœ¨æ—¥å¿—ä¿¡æ¯äº§ç”Ÿæ—¶åŠ¨æ€æ‰§è¡Œä»£ç å¾ˆæœ‰ç”¨ã€‚</li></ul><h3 id="å¦‚ä½•ä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#å¦‚ä½•ä½¿ç”¨"><span>å¦‚ä½•ä½¿ç”¨</span></a></h3><ol><li><p><strong>åŸºæœ¬ä½¿ç”¨</strong></p><p>å‡è®¾ä½ æ­£åœ¨ç¼–å†™ä¸€ä¸ªåä¸º &quot;myApp&quot; çš„åº”ç”¨ç¨‹åºï¼Œå¹¶ä¸”ä½ æƒ³è¦è°ƒè¯•å…¶ä¸­çš„ &quot;database&quot; éƒ¨åˆ†ã€‚ä½ å¯ä»¥è¿™æ ·ä½¿ç”¨ <code>util.debuglog</code>:</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> debuglog</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">debuglog</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">database</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88C0D0;">debuglog</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">è¿™æ˜¯æ•°æ®åº“æ¨¡å—çš„ä¸€æ¡è°ƒè¯•ä¿¡æ¯</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šè¿°ä»£ç ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆå¯¼å…¥äº† <code>util</code> æ¨¡å—ã€‚ç„¶åï¼Œæˆ‘ä»¬é€šè¿‡ <code>util.debuglog(&#39;database&#39;)</code> åˆ›å»ºäº†ä¸€ä¸ªä¸“é—¨ç”¨äº &quot;database&quot; éƒ¨åˆ†çš„è°ƒè¯•æ—¥å¿—è®°å½•å™¨ <code>debuglog</code>ã€‚æœ€åï¼Œæˆ‘ä»¬ä½¿ç”¨è¿™ä¸ªè®°å½•å™¨è¾“å‡ºäº†ä¸€æ¡ä¿¡æ¯ã€‚</p><p>è¦æŸ¥çœ‹è¿™æ¡è°ƒè¯•ä¿¡æ¯ï¼Œä½ éœ€è¦åœ¨è¿è¡Œåº”ç”¨ç¨‹åºæ—¶è®¾ç½® <code>NODE_DEBUG</code> ç¯å¢ƒå˜é‡ï¼Œå¹¶åŒ…å« &quot;database&quot;ï¼š</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#D8DEE9;">NODE_DEBUG</span><span style="color:#81A1C1;">=</span><span style="color:#A3BE8C;">database</span><span style="color:#88C0D0;"> node</span><span style="color:#A3BE8C;"> app.js</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p><strong>ä½¿ç”¨å›è°ƒ</strong></p><p>å¦‚æœä½ æƒ³åœ¨æ—¥å¿—ä¿¡æ¯äº§ç”Ÿæ—¶æ‰§è¡Œä¸€äº›é™„åŠ æ“ä½œï¼Œå¯ä»¥ä¼ é€’ä¸€ä¸ªå›è°ƒå‡½æ•°ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> debuglog</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">debuglog</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">database</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> (</span><span style="color:#D8DEE9;">msg</span><span style="color:#ECEFF4;">)</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#616E88;">  // å½“æ—¥å¿—ä¿¡æ¯äº§ç”Ÿæ—¶ï¼Œè¿™é‡Œçš„ä»£ç ä¼šè¢«æ‰§è¡Œ</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">`</span><span style="color:#A3BE8C;">æ—¥å¿—æ—¶é—´: </span><span style="color:#81A1C1;">${</span><span style="color:#81A1C1;">new</span><span style="color:#88C0D0;"> Date</span><span style="color:#ECEFF4;">().</span><span style="color:#88C0D0;">toISOString</span><span style="color:#ECEFF4;">()</span><span style="color:#81A1C1;">}</span><span style="color:#ECEFF4;">`</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88C0D0;">debuglog</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">è¿™æ˜¯æ•°æ®åº“æ¨¡å—çš„ä¸€æ¡è°ƒè¯•ä¿¡æ¯</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ®µä»£ç é™¤äº†æ‰“å°å‡ºè°ƒè¯•ä¿¡æ¯å¤–ï¼Œè¿˜ä¼šæ‰“å°å‡ºå½“å‰çš„æ—¶é—´æˆ³ï¼Œè¿™åœ¨è·Ÿè¸ªäº‹ä»¶å‘ç”Ÿçš„æ—¶é—´é¡ºåºæ—¶éå¸¸æœ‰ç”¨ã€‚</p></li></ol><h3 id="å®é™…åº”ç”¨ä¾‹å­" tabindex="-1"><a class="header-anchor" href="#å®é™…åº”ç”¨ä¾‹å­"><span>å®é™…åº”ç”¨ä¾‹å­</span></a></h3><p>å‡è®¾ä½ åœ¨å¼€å‘ä¸€ä¸ª Web åº”ç”¨ï¼Œå¹¶ä¸”ä½ çš„åº”ç”¨åˆ†ä¸ºå‡ ä¸ªæ¨¡å—ï¼šç”¨æˆ·è®¤è¯ï¼ˆ&quot;auth&quot;ï¼‰ã€æ•°æ®åº“æ“ä½œï¼ˆ&quot;database&quot;ï¼‰ã€ç½‘ç»œè¯·æ±‚å¤„ç†ï¼ˆ&quot;network&quot;ï¼‰ã€‚éšç€åº”ç”¨å¤æ‚åº¦çš„å¢åŠ ï¼Œä½ å¯èƒ½åªå¸Œæœ›å…³æ³¨æŸä¸€ç‰¹å®šéƒ¨åˆ†çš„è°ƒè¯•ä¿¡æ¯ï¼š</p><ul><li>å¯¹äºç”¨æˆ·è®¤è¯æ¨¡å—ï¼Œä½ å¯ä»¥è®¾ç½® <code>NODE_DEBUG=auth</code>ï¼Œç„¶ååœ¨è®¤è¯æ¨¡å—çš„ä»£ç ä¸­ä½¿ç”¨ <code>util.debuglog(&#39;auth&#39;)</code> è®°å½•ç›¸å…³çš„è°ƒè¯•ä¿¡æ¯ã€‚</li><li>ç±»ä¼¼åœ°ï¼Œä½¿ç”¨ <code>util.debuglog(&#39;database&#39;)</code> å’Œ <code>util.debuglog(&#39;network&#39;)</code> åˆ†åˆ«åœ¨æ•°æ®åº“å’Œç½‘ç»œè¯·æ±‚å¤„ç†æ¨¡å—ä¸­è®°å½•è°ƒè¯•ä¿¡æ¯ã€‚</li></ul><p>é€šè¿‡è¿™ç§æ–¹å¼ï¼Œä½ å¯ä»¥çµæ´»åœ°å¼€å¯æˆ–å…³é—­ç‰¹å®šæ¨¡å—çš„è°ƒè¯•æ—¥å¿—ï¼Œè€Œä¸å¿…åœ¨ä»£ç ä¸­ç•™ä¸‹å¤§é‡çš„ <code>console.log()</code> è¯­å¥ï¼Œè¿™ä½¿å¾—ä½ çš„åº”ç”¨æ›´åŠ å¹²å‡€ã€æ˜“äºç»´æŠ¤ã€‚</p><h3 id="debuglog-enabled" tabindex="-1"><a class="header-anchor" href="#debuglog-enabled"><span><a href="https://nodejs.org/docs/latest/api/util.html#debuglogenabled" target="_blank" rel="noopener noreferrer">debuglog().enabled</a></span></a></h3><p>äº†è§£ Node.js ä¸­çš„ <code>debuglog().enabled</code> åŠŸèƒ½ï¼Œæˆ‘ä»¬é¦–å…ˆå¾—çŸ¥é“ Node.js çš„ <code>util.debuglog</code> æ–¹æ³•æ˜¯ç”¨æ¥å¸®åŠ©å¼€å‘è€…è¿›è¡Œè°ƒè¯•çš„ã€‚è¿™ä¸ªæ–¹æ³•å…è®¸ä½ åˆ›å»ºä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°å¯ä»¥ä½œä¸ºè°ƒè¯•æ—¥å¿—çš„è¾“å‡ºï¼Œä½†å®ƒåªä¼šåœ¨ç¯å¢ƒå˜é‡ä¸­ç‰¹å®šåœ°è®¾ç½®äº† DEBUG æ ‡è®°æ—¶æ‰ç”Ÿæ•ˆã€‚æ¢è¨€ä¹‹ï¼Œä½ å¯ä»¥ä½¿ç”¨è¿™ä¸ªåŠŸèƒ½è¾“å‡ºè°ƒè¯•ä¿¡æ¯ï¼Œè€Œè¿™äº›ä¿¡æ¯åœ¨æ­£å¸¸è¿è¡Œæ—¶ä¸ä¼šæ‰“æ‰°åˆ°ç”¨æˆ·ï¼Œåªæœ‰å½“ä½ æƒ³è¦è°ƒè¯•ç¨‹åºæ—¶æ‰ä¼šæ˜¾ç¤ºã€‚</p><h3 id="ç†è§£-debuglog-enabled" tabindex="-1"><a class="header-anchor" href="#ç†è§£-debuglog-enabled"><span>ç†è§£ <code>debuglog().enabled</code></span></a></h3><p>åœ¨ Node.js v21.7.1 çš„æ–‡æ¡£ä¸­ï¼Œ<code>debuglog().enabled</code> æ˜¯ä¸€ä¸ªå±æ€§ï¼Œå®ƒå‘Šè¯‰ä½ è¯¥ debuglog å‡½æ•°æ˜¯å¦è¢«æ¿€æ´»ï¼ˆå³æ˜¯å¦åº”è¯¥è¾“å‡ºè°ƒè¯•ä¿¡æ¯ï¼‰ã€‚è¿™ä¸»è¦å–å†³äºç¯å¢ƒå˜é‡ <code>NODE_DEBUG</code> æ˜¯å¦åŒ…å«äº†ä½ åœ¨ä½¿ç”¨ <code>util.debuglog</code> æ–¹æ³•æ—¶æŒ‡å®šçš„æ ‡è®°ã€‚</p><p>å¦‚æœ <code>debuglog().enabled</code> ä¸º <code>true</code>ï¼Œæ„å‘³ç€æ ¹æ®å½“å‰çš„ <code>NODE_DEBUG</code> ç¯å¢ƒå˜é‡è®¾ç½®ï¼Œä½ çš„æ—¥å¿—è®°å½•åŠŸèƒ½æ˜¯å¼€å¯çš„ï¼Œä½ é€šè¿‡è¿™ä¸ª debuglog å‡½æ•°äº§ç”Ÿçš„æ‰€æœ‰è°ƒè¯•ä¿¡æ¯éƒ½ä¼šè¢«è¾“å‡ºï¼›å¦‚æœä¸º <code>false</code>ï¼Œåˆ™è¡¨ç¤ºè¿™äº›è°ƒè¯•ä¿¡æ¯ä¸ä¼šè¢«è¾“å‡ºã€‚</p><h3 id="å®é™…è¿ç”¨-1" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨-1"><span>å®é™…è¿ç”¨</span></a></h3><p>å‡è®¾ä½ æ­£åœ¨å¼€å‘ä¸€ä¸ªåº”ç”¨ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªæ¨¡å—è´Ÿè´£å¤„ç†ç”¨æˆ·çš„æ–‡ä»¶ä¸Šä¼ ã€‚åœ¨è¿™ä¸ªæ¨¡å—ä¸­ï¼Œä½ å¯èƒ½éœ€è¦è°ƒè¯•ç›¸å…³çš„ä¿¡æ¯ï¼Œæ¯”å¦‚æ–‡ä»¶çš„å¤§å°ï¼Œç±»å‹ï¼Œä¸Šä¼ æ—¶é—´ç­‰ã€‚ä¸ºäº†ä¸åœ¨ç”Ÿäº§ç¯å¢ƒä¸­è¾“å‡ºè¿™äº›ä¿¡æ¯ï¼ˆå¯èƒ½ä¼šæ±¡æŸ“æ—¥å¿—æ–‡ä»¶æˆ–æš´éœ²æ•æ„Ÿä¿¡æ¯ï¼‰ï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>util.debuglog</code> æ¥è¾“å‡ºè¿™äº›ä¿¡æ¯ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#616E88;">// è®¾ç½® debug namespace ä¸º &#39;upload&#39;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> debuglog</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">debuglog</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">upload</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">let</span><span style="color:#88C0D0;"> fileHandler</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> (</span><span style="color:#D8DEE9;">file</span><span style="color:#ECEFF4;">)</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#616E88;">  // æ£€æŸ¥ debuglog æ˜¯å¦è¢«æ¿€æ´»</span></span>
<span class="line"><span style="color:#81A1C1;">  if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">debuglog</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">enabled</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#88C0D0;">    debuglog</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">`</span><span style="color:#A3BE8C;">Processing file: </span><span style="color:#81A1C1;">${</span><span style="color:#D8DEE9;">file</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">name</span><span style="color:#81A1C1;">}</span><span style="color:#ECEFF4;">`</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#88C0D0;">    debuglog</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">`</span><span style="color:#A3BE8C;">File size: </span><span style="color:#81A1C1;">${</span><span style="color:#D8DEE9;">file</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">size</span><span style="color:#81A1C1;">}</span><span style="color:#ECEFF4;">`</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#616E88;">    // ... æ›´å¤šå…³äºæ–‡ä»¶çš„è°ƒè¯•ä¿¡æ¯</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span></span>
<span class="line"><span style="color:#616E88;">  // æ­£å¸¸çš„æ–‡ä»¶å¤„ç†é€»è¾‘</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ª debuglog å‡½æ•°å¹¶å°†å…¶å‘½åç©ºé—´è®¾ç½®ä¸º &#39;upload&#39;ã€‚åœ¨å¤„ç†æ–‡ä»¶æ—¶ï¼Œæˆ‘ä»¬æ£€æŸ¥ <code>debuglog.enabled</code> ä»¥ç¡®å®šæ˜¯å¦åº”è¯¥è¾“å‡ºè°ƒè¯•ä¿¡æ¯ã€‚</p><p>å¦‚æœæˆ‘ä»¬æƒ³è¦çœ‹åˆ°è¿™äº›è°ƒè¯•ä¿¡æ¯ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿è¡Œåº”ç”¨å‰è®¾ç½®ç¯å¢ƒå˜é‡ <code>NODE_DEBUG=upload</code>ï¼š</p><ul><li>åœ¨ Linux/macOS ä¸Šï¼Œå¯ä»¥åœ¨å‘½ä»¤è¡Œä¸Šæ‰§è¡Œ <code>export NODE_DEBUG=upload</code>ï¼›</li><li>åœ¨ Windows ä¸Šï¼Œå¯ä»¥ä½¿ç”¨ <code>set NODE_DEBUG=upload</code>ã€‚</li></ul><p>ç„¶åè¿è¡Œä½ çš„åº”ç”¨ï¼Œä½ ä¼šçœ‹åˆ°æ‰€æœ‰çš„è°ƒè¯•ä¿¡æ¯è¢«è¾“å‡ºã€‚è¿™æ ·ï¼Œä½ å°±å¯ä»¥åœ¨ä¸æ”¹å˜ä»£ç ä¸”ä¸å½±å“ç”Ÿäº§ç¯å¢ƒçš„æƒ…å†µä¸‹ï¼Œæ ¹æ®éœ€è¦å¼€å¯æˆ–å…³é—­è°ƒè¯•ä¿¡æ¯çš„è¾“å‡ºï¼Œè¿™æå¤§åœ°æ–¹ä¾¿äº†å¼€å‘å’Œè°ƒè¯•è¿‡ç¨‹ã€‚</p><h2 id="util-debug-section" tabindex="-1"><a class="header-anchor" href="#util-debug-section"><span><a href="https://nodejs.org/docs/latest/api/util.html#utildebugsection" target="_blank" rel="noopener noreferrer">util.debug(section)</a></span></a></h2><p>å½“æˆ‘ä»¬è°ˆè®º Node.js ä¸­çš„ <code>util.debug(section)</code>ï¼Œæˆ‘ä»¬å®é™…ä¸Šæ˜¯åœ¨è®¨è®ºä¸€ä¸ªè¾ƒä¸ºé«˜çº§ä¸”æ¯”è¾ƒå°‘è§çš„åŠŸèƒ½ã€‚ä¸è¿‡ï¼Œè¯·æ”¾å¿ƒï¼Œæˆ‘å°†å°½å¯èƒ½åœ°å°†å…¶ç®€åŒ–ï¼Œå¹¶ç»“åˆä¸€äº›å®é™…ä¾‹å­æ¥è¯´æ˜ã€‚</p><h3 id="ç®€å•æ¦‚è¿°" tabindex="-1"><a class="header-anchor" href="#ç®€å•æ¦‚è¿°"><span>ç®€å•æ¦‚è¿°</span></a></h3><p>é¦–å…ˆï¼Œäº†è§£ Node.js æ˜¯ä»€ä¹ˆå¾ˆé‡è¦ã€‚Node.js æ˜¯ä¸€ä¸ªåŸºäº Chrome V8 å¼•æ“çš„ JavaScript è¿è¡Œç¯å¢ƒï¼Œå®ƒå…è®¸åœ¨æœåŠ¡å™¨ç«¯è¿è¡Œ JavaScriptã€‚è¿™æ„å‘³ç€ä½ å¯ä»¥ç”¨ JavaScript æ¥ç¼–å†™åç«¯ä»£ç ï¼Œè€Œä¸ä»…ä»…æ˜¯å‰ç«¯è„šæœ¬ã€‚</p><p><code>util</code> æ¨¡å—æ˜¯ Node.js çš„ä¸€éƒ¨åˆ†ï¼Œæä¾›äº†ä¸€ç³»åˆ—å®ç”¨å‡½æ•°ï¼Œç”¨äºå¤„ç†å„ç§å¸¸è§çš„ä»»åŠ¡ã€‚å®ƒæ˜¯ Node.js æ ‡å‡†åº“çš„ä¸€éƒ¨åˆ†ï¼Œæ‰€ä»¥ä½ ä¸éœ€è¦å®‰è£…ä»»ä½•é¢å¤–çš„åŒ…å°±å¯ä»¥ä½¿ç”¨å®ƒã€‚</p><p><code>util.debug(section)</code> å®é™…ä¸Šå¹¶ä¸æ˜¯ Node.js v21.7.1 æ–‡æ¡£ä¸­ç›´æ¥æåˆ°çš„æ–¹æ³•ã€‚çœ‹èµ·æ¥å¯èƒ½æ˜¯ä¸€ä¸ªç†è§£ä¸Šçš„è¯¯å·®æˆ–æ˜¯å¯¹æ–‡æ¡£çš„æ›´æ–°å˜åŒ–ã€‚é€šå¸¸ï¼ŒNode.js çš„ <code>util</code> æ¨¡å—ç”¨äºè°ƒè¯•å’ŒæŸäº›ç‰¹æ®Šæƒ…å†µä¸‹çš„å®ç”¨å·¥å…·æ–¹æ³•é›†åˆï¼Œä¾‹å¦‚æ—¥å¿—ã€æ£€æŸ¥å¯¹è±¡çš„ç±»å‹ç­‰ã€‚æ¯”è¾ƒè¿‘ä¼¼çš„æ–¹æ³•å¯èƒ½æ˜¯ <code>util.debuglog(section)</code>ï¼Œè¿™ä¸ªæ–¹æ³•ç”¨äºåˆ›å»ºä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°ä½œä¸ºä¸€ä¸ªè°ƒè¯•è®°å½•å™¨ï¼Œåªæœ‰åœ¨ç¯å¢ƒå˜é‡ NODE_DEBUG ä¸­è®¾ç½®äº†ç‰¹å®šçš„éƒ¨åˆ†åç§°æ—¶æ‰ä¼šæ‰“å°æ¶ˆæ¯ã€‚</p><h3 id="util-debuglog-section" tabindex="-1"><a class="header-anchor" href="#util-debuglog-section"><span>util.debuglog(section)</span></a></h3><p><code>util.debuglog(section)</code> æ–¹æ³•çš„ä½œç”¨æ˜¯åŸºäºç»™å®šçš„ <code>section</code> åç§°åˆ›å»ºä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°å¯ä»¥è¢«ç”¨æ¥æ‰“å°è°ƒè¯•ä¿¡æ¯ã€‚è¿™äº›ä¿¡æ¯åªæœ‰åœ¨å¯åŠ¨ Node.js åº”ç”¨ç¨‹åºæ—¶é€šè¿‡ç¯å¢ƒå˜é‡ <code>NODE_DEBUG</code> è®¾ç½®äº†ç›¸åº”çš„ <code>section</code> åç§°æ—¶æ‰ä¼šæ˜¾ç¤ºã€‚</p><h4 id="å®é™…è¿ç”¨çš„ä¾‹å­" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨çš„ä¾‹å­"><span>å®é™…è¿ç”¨çš„ä¾‹å­</span></a></h4><p>å‡è®¾ä½ æ­£åœ¨å¼€å‘ä¸€ä¸ªåº”ç”¨ç¨‹åºï¼Œå¹¶æƒ³è¦åœ¨è°ƒè¯•æ—¶è·Ÿè¸ªä¸ HTTP è¯·æ±‚ç›¸å…³çš„ä¿¡æ¯ã€‚ä½ å¯ä»¥è¿™æ ·åšï¼š</p><ol><li><p><strong>åˆ›å»ºä¸€ä¸ªè°ƒè¯•è®°å½•å™¨</strong></p><p>é¦–å…ˆï¼Œåœ¨ä½ çš„åº”ç”¨ç¨‹åºä¸­å¼•å…¥ <code>util</code> æ¨¡å—å¹¶åˆ›å»ºä¸€ä¸ªé’ˆå¯¹ HTTP éƒ¨åˆ†çš„è°ƒè¯•è®°å½•å™¨ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> debuglog</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">debuglog</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">http</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>ä½¿ç”¨æ­¤è®°å½•å™¨æ‰“å°è°ƒè¯•ä¿¡æ¯</strong></p><p>åœ¨å¤„ç† HTTP è¯·æ±‚çš„ä»£ç åŒºåŸŸï¼Œä½¿ç”¨ä¹‹å‰åˆ›å»ºçš„ <code>debuglog</code> å‡½æ•°æ¥è®°å½•ä¿¡æ¯ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#88C0D0;">debuglog</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">HTTP è¯·æ±‚å¼€å§‹å¤„ç†...</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#616E88;">// å‡è®¾è¿™é‡Œæœ‰ä¸€äº›å¤„ç† HTTP è¯·æ±‚çš„ä»£ç </span></span>
<span class="line"><span style="color:#88C0D0;">debuglog</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">HTTP è¯·æ±‚å¤„ç†å®Œæˆã€‚</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>å¯ç”¨è°ƒè¯•è¾“å‡º</strong></p><p>å½“ä½ æƒ³è¦çœ‹åˆ°è¿™äº›è°ƒè¯•ä¿¡æ¯æ—¶ï¼Œä½ éœ€è¦åœ¨å¯åŠ¨ä½ çš„ Node.js åº”ç”¨æ—¶è®¾ç½®ç¯å¢ƒå˜é‡ <code>NODE_DEBUG</code>ã€‚åœ¨ UNIX ç±»ç³»ç»Ÿï¼ˆå¦‚ Linux æˆ– macOSï¼‰ä¸Šï¼Œå¯ä»¥é€šè¿‡åœ¨å‘½ä»¤è¡Œä¸­è®¾ç½®ç¯å¢ƒå˜é‡æ¥å¯åŠ¨åº”ç”¨ï¼š</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#D8DEE9;">NODE_DEBUG</span><span style="color:#81A1C1;">=</span><span style="color:#A3BE8C;">http</span><span style="color:#88C0D0;"> node</span><span style="color:#A3BE8C;"> your-app.js</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>åœ¨ Windows ä¸Šï¼Œè®¾ç½®ç¯å¢ƒå˜é‡çš„æ–¹å¼å¯èƒ½ç•¥æœ‰ä¸åŒã€‚</p></li></ol><p>åªæœ‰å½“ç¯å¢ƒå˜é‡ <code>NODE_DEBUG</code> åŒ…å«äº†ä½ ä½¿ç”¨ <code>util.debuglog</code> åˆ›å»ºè®°å½•å™¨æ—¶æŒ‡å®šçš„ <code>section</code> åç§°ï¼ˆåœ¨è¿™ä¸ªä¾‹å­ä¸­æ˜¯ &quot;http&quot;ï¼‰æ—¶ï¼Œä¸Šé¢çš„è°ƒè¯•ä¿¡æ¯æ‰ä¼šæ‰“å°å‡ºæ¥ã€‚è¿™ä½¿å¾—æ§åˆ¶åœ¨ç”Ÿäº§ç¯å¢ƒå’Œå¼€å‘ç¯å¢ƒä¸­å“ªäº›è°ƒè¯•ä¿¡æ¯è¢«è¾“å‡ºå˜å¾—éå¸¸çµæ´»å’Œæ–¹ä¾¿ã€‚</p><p>å¸Œæœ›è¿™èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£ <code>util.debuglog(section)</code> å’Œå®ƒå¦‚ä½•åœ¨ Node.js ä¸­ä½¿ç”¨ï¼å¦‚æœè¿˜æœ‰å…¶ä»–é—®é¢˜ï¼Œéšæ—¶é—®æˆ‘ã€‚</p><h2 id="util-deprecate-fn-msg-code" tabindex="-1"><a class="header-anchor" href="#util-deprecate-fn-msg-code"><span><a href="https://nodejs.org/docs/latest/api/util.html#utildeprecatefn-msg-code" target="_blank" rel="noopener noreferrer">util.deprecate(fn, msg[, code])</a></span></a></h2><p>Node.js æ˜¯ä¸€ä¸ªéå¸¸æµè¡Œçš„ JavaScript è¿è¡Œæ—¶ç¯å¢ƒï¼Œå®ƒè®©ä½ å¯ä»¥åœ¨æœåŠ¡å™¨ç«¯è¿è¡Œ JavaScript ä»£ç ã€‚åœ¨ Node.js ä¸­ï¼Œæœ‰ä¸€ä¸ªæ¨¡å—å«åš <code>util</code>ï¼Œå®ƒæä¾›äº†ä¸€ç³»åˆ—å®ç”¨å·¥å…·ï¼Œå…¶ä¸­ä¹‹ä¸€å°±æ˜¯ <code>util.deprecate()</code> æ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•çš„ä¸»è¦ç›®çš„æ˜¯ç»™å¼€å‘è€…ä¸€ç§æ ‡è®°å‡½æ•°æˆ–æ¨¡å—ä¸ºâ€œä¸æ¨èä½¿ç”¨ï¼ˆdeprecatedï¼‰â€çš„æ‰‹æ®µï¼ŒåŒæ—¶ä¹Ÿå…è®¸ä»–ä»¬ç»™å‡ºæ›¿ä»£æ–¹æ¡ˆçš„å»ºè®®ã€‚</p><h3 id="è§£é‡Š" tabindex="-1"><a class="header-anchor" href="#è§£é‡Š"><span>è§£é‡Š</span></a></h3><p>å½“ä½ åœ¨å¼€å‘ä¸€ä¸ªåº“æˆ–è€…åº”ç”¨æ—¶ï¼Œéšç€éœ€æ±‚çš„å˜åŒ–å’ŒæŠ€æœ¯çš„è¿›æ­¥ï¼Œæœ‰æ—¶å€™ä½ éœ€è¦æ”¹å˜ API çš„è®¾è®¡æˆ–è€…åºŸå¼ƒä¸€äº›ä¸å†é€‚ç”¨çš„åŠŸèƒ½ã€‚ä½†æ˜¯ï¼Œç›´æ¥ç§»é™¤è¿™äº›æ—§çš„åŠŸèƒ½å¯èƒ½ä¼šç ´åä¾èµ–ä½ çš„åº“æˆ–åº”ç”¨çš„å…¶ä»–é¡¹ç›®ã€‚æ‰€ä»¥ï¼Œæ›´æ¸©å’Œçš„æ–¹å¼æ˜¯å…ˆæ ‡è®°è¿™äº›åŠŸèƒ½ä¸ºâ€œä¸æ¨èä½¿ç”¨â€ï¼Œç„¶ååœ¨æœªæ¥çš„æŸä¸ªç‰ˆæœ¬ä¸­ç§»é™¤å®ƒä»¬ã€‚è¿™å°±æ˜¯ <code>util.deprecate()</code> æ–¹æ³•çš„ç”¨å¤„ã€‚</p><h3 id="ä½¿ç”¨æ–¹å¼" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨æ–¹å¼"><span>ä½¿ç”¨æ–¹å¼</span></a></h3><p><code>util.deprecate()</code> æ–¹æ³•æ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼š</p><ul><li><code>fn</code>: è¦è¢«æ ‡è®°ä¸ºä¸æ¨èä½¿ç”¨çš„å‡½æ•°ã€‚</li><li><code>msg</code>: å½“è¿™ä¸ªå‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œä¼šåœ¨æ§åˆ¶å°è¾“å‡ºçš„è­¦å‘Šä¿¡æ¯ï¼Œé€šçŸ¥å¼€å‘è€…è¿™ä¸ªå‡½æ•°ä¸åº”è¯¥ç»§ç»­ä½¿ç”¨ï¼Œå¹¶æä¾›æ›¿ä»£æ–¹æ¡ˆã€‚</li><li><code>code</code>: ï¼ˆå¯é€‰ï¼‰ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä»£è¡¨è¿™ä¸ªåºŸå¼ƒè­¦å‘Šçš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œæœ‰åˆ©äºåŒºåˆ†ä¸åŒçš„è­¦å‘Šä¿¡æ¯ã€‚</li></ul><h3 id="å®é™…è¿ç”¨çš„ä¾‹å­-1" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨çš„ä¾‹å­-1"><span>å®é™…è¿ç”¨çš„ä¾‹å­</span></a></h3><p>å‡è®¾ä½ å¼€å‘äº†ä¸€ä¸ªåº“ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªåä¸º <code>oldFunction</code> çš„å‡½æ•°ï¼Œç°åœ¨ä½ æœ‰äº†ä¸€ä¸ªæ›´å¥½çš„æ›¿ä»£æ–¹æ¡ˆ <code>newFunction</code>ï¼Œä½ å¸Œæœ›å¼€å‘è€…å¼€å§‹ä½¿ç”¨æ–°çš„å‡½æ•°è€Œä¸æ˜¯æ—§çš„ã€‚ä½ å¯ä»¥è¿™æ ·åšï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// æ–°çš„æ¨èä½¿ç”¨çš„å‡½æ•°</span></span>
<span class="line"><span style="color:#81A1C1;">function</span><span style="color:#88C0D0;"> newFunction</span><span style="color:#ECEFF4;">()</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">è¿™æ˜¯æ–°çš„ã€æ›´å¥½çš„å‡½æ•°ã€‚</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// æ—§çš„ã€å°†è¢«åºŸå¼ƒçš„å‡½æ•°</span></span>
<span class="line"><span style="color:#81A1C1;">function</span><span style="color:#88C0D0;"> oldFunction</span><span style="color:#ECEFF4;">()</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">è¿™æ˜¯æ—§çš„ã€ä¸æ¨èä½¿ç”¨çš„å‡½æ•°ã€‚</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// ä½¿ç”¨ util.deprecate æ¥åŒ…è£… oldFunctionï¼Œæ·»åŠ åºŸå¼ƒè­¦å‘Š</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> deprecatedOldFunction</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">deprecate</span><span style="color:#D8DEE9FF;">(</span></span>
<span class="line"><span style="color:#D8DEE9;">  oldFunction</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#ECEFF4;">  &quot;</span><span style="color:#A3BE8C;">oldFunction() å·²ç»è¢«åºŸå¼ƒï¼Œè¯·ä½¿ç”¨ newFunction()ã€‚</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#ECEFF4;">  &quot;</span><span style="color:#A3BE8C;">DEP0001</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#616E88;"> // å‡è®¾çš„åºŸå¼ƒä»£ç </span></span>
<span class="line"><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// è°ƒç”¨æµ‹è¯•</span></span>
<span class="line"><span style="color:#88C0D0;">deprecatedOldFunction</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è°ƒç”¨æ—¶ä¼šåœ¨æ§åˆ¶å°çœ‹åˆ°è­¦å‘Šä¿¡æ¯</span></span>
<span class="line"><span style="color:#88C0D0;">newFunction</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // æ¨èä½¿ç”¨çš„æ–¹å¼ï¼Œä¸ä¼šæœ‰è­¦å‘Š</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå½“å¼€å‘è€…å°è¯•è°ƒç”¨ <code>deprecatedOldFunction()</code> æ—¶ï¼Œä»–ä»¬ä¼šåœ¨æ§åˆ¶å°çœ‹åˆ°ä¸€ä¸ªè­¦å‘Šæ¶ˆæ¯ï¼Œå‘Šè¯‰ä»–ä»¬åº”è¯¥ä½¿ç”¨ <code>newFunction()</code> è€Œä¸æ˜¯ <code>oldFunction()</code>ã€‚é€šè¿‡è¿™æ ·çš„æ–¹å¼ï¼Œä½ å¯ä»¥å¾ªåºæ¸è¿›åœ°å¼•å¯¼å¼€å‘è€…å‘æ–°çš„ API è¿‡æ¸¡ï¼Œè€Œä¸æ˜¯çªç„¶é—´æ–­å¼€æ—§çš„åŠŸèƒ½ï¼Œè¿™å¯¹äºç»´æŠ¤å¤§å‹é¡¹ç›®æˆ–åº“æ¥è¯´éå¸¸é‡è¦ã€‚</p><p>æ€»ä¹‹ï¼Œ<code>util.deprecate()</code> æ˜¯ Node.js æä¾›çš„ä¸€ä¸ªä¼˜é›…çš„å‡½æ•°åºŸå¼ƒæ ‡è®°å·¥å…·ï¼Œå¯¹äºç®¡ç†å’Œç»´æŠ¤é•¿æœŸé¡¹ç›®éå¸¸æœ‰ç”¨ã€‚</p><h2 id="util-format-format-args" tabindex="-1"><a class="header-anchor" href="#util-format-format-args"><span><a href="https://nodejs.org/docs/latest/api/util.html#utilformatformat-args" target="_blank" rel="noopener noreferrer">util.format(format[, ...args])</a></span></a></h2><p>å¥½çš„ï¼Œè®©æˆ‘ä»¬æ·±å…¥äº†è§£ä¸€ä¸‹ <code>util.format(format[, ...args])</code> è¿™ä¸ªæ–¹æ³•åœ¨ Node.js ä¸­çš„ä½œç”¨å’Œç”¨æ³•ã€‚è¿™ä¸ªæ–¹æ³•ä¸»è¦æ¥æºäº Node.js çš„ <code>util</code> æ¨¡å—ï¼Œå®ƒæ˜¯ä¸€ä¸ªç”¨äºå­—ç¬¦ä¸²æ ¼å¼åŒ–ã€æ£€æŸ¥ã€è°ƒè¯•ç­‰çš„å®ç”¨å·¥å…·æ¨¡å—ã€‚</p><h3 id="åŸºæœ¬ç†è§£" tabindex="-1"><a class="header-anchor" href="#åŸºæœ¬ç†è§£"><span>åŸºæœ¬ç†è§£</span></a></h3><p><code>util.format(format[, ...args])</code> æ–¹æ³•å¯ä»¥å°†å¤šä¸ªå‚æ•°æŒ‰ç…§ç¬¬ä¸€ä¸ªå‚æ•°ï¼ˆå³æ ¼å¼å­—ç¬¦ä¸²ï¼‰æ‰€æŒ‡å®šçš„æ ¼å¼è¿›è¡Œæ ¼å¼åŒ–ã€‚è¿™åœ¨å¤„ç†å­—ç¬¦ä¸²è¾“å‡ºã€æ—¥å¿—è®°å½•æˆ–è€…ä»»ä½•éœ€è¦åŠ¨æ€ç”Ÿæˆå­—ç¬¦ä¸²çš„åœºæ™¯ä¸­éå¸¸æœ‰ç”¨ã€‚</p><h3 id="æ ¼å¼å­—ç¬¦ä¸²è§„åˆ™" tabindex="-1"><a class="header-anchor" href="#æ ¼å¼å­—ç¬¦ä¸²è§„åˆ™"><span>æ ¼å¼å­—ç¬¦ä¸²è§„åˆ™</span></a></h3><p><code>format</code> å­—ç¬¦ä¸²æ”¯æŒå‡ ç§ç‰¹å®šçš„å ä½ç¬¦ï¼š</p><ul><li><code>%s</code> - å­—ç¬¦ä¸²</li><li><code>%d</code> - æ•°å€¼ï¼ˆæ•´æ•°æˆ–æµ®ç‚¹æ•°ï¼‰</li><li><code>%i</code> - æ•´æ•°</li><li><code>%f</code> - æµ®ç‚¹æ•°</li><li><code>%j</code> - JSONã€‚å¦‚æœå¯¹è±¡å«æœ‰å¾ªç¯å¼•ç”¨ï¼Œåˆ™ä¼šè¢«æ›¿æ¢æˆå­—ç¬¦ä¸² <code>&#39;[Circular]&#39;</code></li><li><code>%%</code> - ç™¾åˆ†å·ï¼ˆ&#39;%&#39;ï¼‰ã€‚è¿™ä¸ä¼šæ¶ˆè€—å‚æ•°</li><li><code>%o</code> or <code>%O</code> - å¯¹è±¡</li></ul><p>å¦‚æœä¼ å…¥çš„å‚æ•°æ•°é‡å¤šäºå ä½ç¬¦çš„æ•°é‡ï¼Œå¤šä½™çš„å‚æ•°å°†ç›´æ¥æ‹¼æ¥åˆ°ç»“æœå­—ç¬¦ä¸²çš„æœ«å°¾ï¼Œå„å‚æ•°ä¹‹é—´ç”¨ç©ºæ ¼éš”å¼€ã€‚</p><h3 id="å®é™…è¿ç”¨ä¾‹å­" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨ä¾‹å­"><span>å®é™…è¿ç”¨ä¾‹å­</span></a></h3><h4 id="_1-åŸºç¡€ä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#_1-åŸºç¡€ä½¿ç”¨"><span>1. åŸºç¡€ä½¿ç”¨</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">format</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">%s:%s</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">Server</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">8080</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#616E88;">// è¾“å‡º: Server:8080</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™é‡Œï¼Œ<code>%s</code> è¢«æ›¿æ¢ä¸º &#39;Server&#39;ï¼Œç¬¬äºŒä¸ª <code>%s</code> è¢«æ›¿æ¢ä¸º &#39;8080&#39;ã€‚</p><h4 id="_2-ç»“åˆå„ç±»æ•°æ®ç±»å‹" tabindex="-1"><a class="header-anchor" href="#_2-ç»“åˆå„ç±»æ•°æ®ç±»å‹"><span>2. ç»“åˆå„ç±»æ•°æ®ç±»å‹</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">format</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">%s %d %j</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">Score</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 100</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> {</span><span style="color:#88C0D0;"> name</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">Alex</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;"> }</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#616E88;">// è¾“å‡º: Score 100 {&quot;name&quot;:&quot;Alex&quot;}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<code>%s</code>ã€<code>%d</code> å’Œ <code>%j</code> åˆ†åˆ«è¢«å­—ç¬¦ä¸² &#39;Score&#39;ã€æ•°å­— 100 å’Œ JSON å¯¹è±¡ <code>{name: &quot;Alex&quot;}</code> æ›¿æ¢ã€‚</p><h4 id="_3-å¤šä½™å‚æ•°å¤„ç†" tabindex="-1"><a class="header-anchor" href="#_3-å¤šä½™å‚æ•°å¤„ç†"><span>3. å¤šä½™å‚æ•°å¤„ç†</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">format</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Hello</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">World</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 123</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> {</span><span style="color:#88C0D0;"> foo</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">bar</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;"> }</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#616E88;">// è¾“å‡º: Hello World 123 { foo: &#39;bar&#39; }</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è™½ç„¶æ ¼å¼å­—ç¬¦ä¸²ä¸­æ²¡æœ‰å®šä¹‰ä»»ä½•å ä½ç¬¦ï¼Œä½†æ˜¯æ‰€æœ‰å‚æ•°éƒ½è¢«é€ä¸ªä»¥ç©ºæ ¼åˆ†éš”çš„æ–¹å¼è¾“å‡ºäº†ã€‚</p><h4 id="_4-è°ƒè¯•å¯¹è±¡" tabindex="-1"><a class="header-anchor" href="#_4-è°ƒè¯•å¯¹è±¡"><span>4. è°ƒè¯•å¯¹è±¡</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">format</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">%o</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> {</span><span style="color:#88C0D0;"> foo</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">bar</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#88C0D0;"> baz</span><span style="color:#ECEFF4;">:</span><span style="color:#B48EAD;"> 123</span><span style="color:#ECEFF4;"> }</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#616E88;">// è¾“å‡ºç±»ä¼¼: { foo: &#39;bar&#39;, baz: 123 }</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä½¿ç”¨ <code>%o</code> å ä½ç¬¦å¯ä»¥æ–¹ä¾¿åœ°è¾“å‡ºå¯¹è±¡ç»“æ„ï¼Œè¿™åœ¨è°ƒè¯•æ—¶éå¸¸æœ‰ç”¨ã€‚</p><h3 id="å°ç»“" tabindex="-1"><a class="header-anchor" href="#å°ç»“"><span>å°ç»“</span></a></h3><p><code>util.format()</code> æ˜¯ä¸€ä¸ªéå¸¸çµæ´»ä¸”å®ç”¨çš„æ–¹æ³•ï¼Œç‰¹åˆ«é€‚ç”¨äºéœ€è¦æ ¼å¼åŒ–å­—ç¬¦ä¸²çš„åœºæ™¯ã€‚é€šè¿‡ç»„åˆä¸åŒçš„å ä½ç¬¦å’Œå‚æ•°ï¼Œä½ å¯ä»¥è½»æ¾åœ°ç”Ÿæˆå„ç§æ ¼å¼çš„å­—ç¬¦ä¸²ï¼Œä»è€Œæé«˜ä»£ç çš„å¯è¯»æ€§å’Œç»´æŠ¤æ€§ã€‚</p><h2 id="util-formatwithoptions-inspectoptions-format-args" tabindex="-1"><a class="header-anchor" href="#util-formatwithoptions-inspectoptions-format-args"><span><a href="https://nodejs.org/docs/latest/api/util.html#utilformatwithoptionsinspectoptions-format-args" target="_blank" rel="noopener noreferrer">util.formatWithOptions(inspectOptions, format[, ...args])</a></span></a></h2><p>Node.js ä¸­çš„<code>util.formatWithOptions(inspectOptions, format[, ...args])</code>æ˜¯ä¸€ä¸ªç”¨äºæ ¼å¼åŒ–å­—ç¬¦ä¸²çš„åŠŸèƒ½å¼ºå¤§çš„æ–¹æ³•ã€‚æƒ³è¦ç†è§£å®ƒï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦äº†è§£ä¸€ä¸‹èƒŒæ™¯å’ŒåŸºæœ¬æ¦‚å¿µã€‚</p><h3 id="åŸºç¡€çŸ¥è¯†" tabindex="-1"><a class="header-anchor" href="#åŸºç¡€çŸ¥è¯†"><span>åŸºç¡€çŸ¥è¯†</span></a></h3><ul><li><strong>util æ¨¡å—</strong>: Node.js æä¾›çš„ä¸€ä¸ªæ ¸å¿ƒæ¨¡å—ï¼ŒåŒ…å«äº†ä¸€ç³»åˆ—ç”¨äºå¤„ç†å­—ç¬¦ä¸²ã€å¯¹è±¡ç­‰çš„å®ç”¨å‡½æ•°ã€‚</li><li><strong>å­—ç¬¦ä¸²æ ¼å¼åŒ–</strong>: å°±æ˜¯æŒ‰ç…§ç‰¹å®šçš„æ ¼å¼å°†å˜é‡æˆ–è¡¨è¾¾å¼åµŒå…¥åˆ°å­—ç¬¦ä¸²ä¸­çš„è¿‡ç¨‹ã€‚</li></ul><h3 id="util-formatwithoptions" tabindex="-1"><a class="header-anchor" href="#util-formatwithoptions"><span>util.formatWithOptions</span></a></h3><p>è¿™ä¸ªæ–¹æ³•å…è®¸ä½ è‡ªå®šä¹‰æ ¼å¼åŒ–é€‰é¡¹ï¼ˆ<code>inspectOptions</code>ï¼‰ï¼Œè¿›è€Œæ§åˆ¶å¦‚ä½•æ ¼å¼åŒ–ç»™å®šçš„å‚æ•°ï¼ˆ<code>format[, ...args]</code>ï¼‰ã€‚è¿™åœ¨å¤„ç†å¤æ‚å¯¹è±¡æˆ–å¸Œæœ›ä»¥ç‰¹å®šæ–¹å¼å±•ç¤ºä¿¡æ¯æ—¶éå¸¸æœ‰ç”¨ã€‚</p><h4 id="å‚æ•°" tabindex="-1"><a class="header-anchor" href="#å‚æ•°"><span>å‚æ•°</span></a></h4><ul><li><code>inspectOptions</code>: ä¸€ä¸ªå¯¹è±¡ï¼ŒæŒ‡å®šå¦‚ä½•æ˜¾ç¤º<code>format</code>é‡Œçš„å˜é‡ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥è®¾å®šå¯¹è±¡å±•å¼€çš„æ·±åº¦ç­‰ã€‚</li><li><code>format</code>: å­—ç¬¦ä¸²ï¼Œå…¶ä¸­å¯ä»¥åŒ…å«å ä½ç¬¦ï¼Œåé¢è·Ÿç€çš„<code>...args</code>ä¼šè¢«ä¾æ¬¡æ›¿æ¢è¿›è¿™äº›å ä½ç¬¦ä½ç½®ã€‚</li><li><code>...args</code>: æ ¹æ®<code>format</code>å­—ç¬¦ä¸²ä¸­çš„å ä½ç¬¦ï¼Œè¿™äº›æ˜¯å°†è¦è¢«æ›¿æ¢è¿›å»çš„å€¼ã€‚</li></ul><h4 id="å ä½ç¬¦" tabindex="-1"><a class="header-anchor" href="#å ä½ç¬¦"><span>å ä½ç¬¦</span></a></h4><ul><li><code>%s</code> - å­—ç¬¦ä¸²</li><li><code>%d</code> - æ•°å­—ï¼ˆæ•´æ•°æˆ–æµ®ç‚¹æ•°ï¼‰</li><li><code>%j</code> - JSON</li><li><code>%o</code>|<code>%O</code> - å¯¹è±¡ï¼ˆä½¿ç”¨<code>inspectOptions</code>æ¥å®šåˆ¶æ˜¾ç¤ºæ–¹å¼ï¼‰</li></ul><h3 id="ç¤ºä¾‹" tabindex="-1"><a class="header-anchor" href="#ç¤ºä¾‹"><span>ç¤ºä¾‹</span></a></h3><p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬é€šè¿‡ä¸€äº›ç¤ºä¾‹æ¥çœ‹çœ‹å¦‚ä½•ä½¿ç”¨<code>util.formatWithOptions</code>ã€‚</p><ol><li><strong>åŸºæœ¬å­—ç¬¦ä¸²æ ¼å¼åŒ–</strong></li></ol><p>å‡è®¾ä½ æƒ³è¦æ ¼å¼åŒ–ä¸€ä¸ªç®€å•çš„é—®å€™è¯­å¥ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> name</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">Alice</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> formattedString</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">formatWithOptions</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">{},</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">Hello, %s!</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> name</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">formattedString</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡º: Hello, Alice!</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æ²¡æœ‰ä¼ é€’ä»»ä½•ç‰¹æ®Šçš„<code>inspectOptions</code>ï¼Œåªæ˜¯ä½¿ç”¨<code>%s</code>å ä½ç¬¦æ¥æ’å…¥åå­—ã€‚</p><ol start="2"><li><strong>æ ¼å¼åŒ–å¯¹è±¡ä¸æ·±åº¦é™åˆ¶</strong></li></ol><p>å¦‚æœä½ æƒ³è¦æ ¼å¼åŒ–ä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶ä¸”ä»…é™åˆ¶åˆ°å¯¹è±¡çš„ç¬¬ä¸€å±‚ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> obj</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> {</span><span style="color:#88C0D0;"> person</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> {</span><span style="color:#88C0D0;"> name</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">Bob</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#88C0D0;"> age</span><span style="color:#ECEFF4;">:</span><span style="color:#B48EAD;"> 30</span><span style="color:#ECEFF4;"> },</span><span style="color:#88C0D0;"> hobby</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">painting</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;"> }</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> formattedString</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">formatWithOptions</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">{</span><span style="color:#88C0D0;"> depth</span><span style="color:#ECEFF4;">:</span><span style="color:#B48EAD;"> 1</span><span style="color:#ECEFF4;"> },</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">Details: %o</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> obj</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">formattedString</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™é‡Œï¼Œ<code>%o</code>è®©æˆ‘ä»¬å°†å¯¹è±¡<code>obj</code>æ ¼å¼åŒ–ä¸ºå­—ç¬¦ä¸²ï¼Œå¹¶é€šè¿‡<code>{ depth: 1 }</code>åªå±•ç¤ºåˆ°å¯¹è±¡çš„ç¬¬ä¸€å±‚ã€‚è¿™æ„å‘³ç€<code>person</code>å¯¹è±¡ä¸ä¼šè¢«å®Œå…¨å±•å¼€æ˜¾ç¤ºå…¶å†…éƒ¨å±æ€§ã€‚</p><ol start="3"><li><strong>è‡ªå®šä¹‰é¢œè‰²</strong></li></ol><p><code>util.formatWithOptions</code>è¿˜å…è®¸ä½ é€šè¿‡<code>colors</code>å±æ€§æ·»åŠ é¢œè‰²ï¼ˆåœ¨æ”¯æŒé¢œè‰²çš„ç»ˆç«¯ä¸­ï¼‰ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> error</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> Error</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Something went wrong</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> formattedString</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">formatWithOptions</span><span style="color:#D8DEE9FF;">(</span></span>
<span class="line"><span style="color:#ECEFF4;">  {</span><span style="color:#88C0D0;"> colors</span><span style="color:#ECEFF4;">:</span><span style="color:#81A1C1;"> true</span><span style="color:#ECEFF4;"> },</span></span>
<span class="line"><span style="color:#ECEFF4;">  &quot;</span><span style="color:#A3BE8C;">Error: %O</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#D8DEE9;">  error</span></span>
<span class="line"><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">formattedString</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œé”™è¯¯å¯¹è±¡ä¼šä»¥æ›´æ˜“äºé˜…è¯»çš„æ–¹å¼æ‰“å°å‡ºæ¥ï¼Œå…³é”®ä¿¡æ¯ï¼ˆå¦‚é”™è¯¯æ¶ˆæ¯ï¼‰å¯èƒ½ä¼šä»¥ä¸åŒçš„é¢œè‰²æ˜¾ç¤ºã€‚</p><h3 id="æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#æ€»ç»“"><span>æ€»ç»“</span></a></h3><p><code>util.formatWithOptions</code>æ˜¯ä¸€ä¸ªåŠŸèƒ½ä¸°å¯Œçš„å·¥å…·ï¼Œéå¸¸é€‚åˆåœ¨éœ€è¦ç²¾ç¡®æ§åˆ¶è¾“å‡ºæ ¼å¼çš„æƒ…å†µä¸‹ä½¿ç”¨ï¼Œæ¯”å¦‚è°ƒè¯•å¤æ‚çš„æ•°æ®ç»“æ„æˆ–å‘æ—¥å¿—æ–‡ä»¶å†™å…¥ç‰¹å®šæ ¼å¼çš„ä¿¡æ¯ã€‚é€šè¿‡åˆç†è®¾ç½®<code>inspectOptions</code>ï¼Œä½ å¯ä»¥å¾—åˆ°é«˜åº¦å®šåˆ¶åŒ–çš„è¾“å‡ºç»“æœã€‚</p><h2 id="util-getsystemerrorname-err" tabindex="-1"><a class="header-anchor" href="#util-getsystemerrorname-err"><span><a href="https://nodejs.org/docs/latest/api/util.html#utilgetsystemerrornameerr" target="_blank" rel="noopener noreferrer">util.getSystemErrorName(err)</a></span></a></h2><p>Node.js çš„ <code>util.getSystemErrorName(err)</code> æ˜¯ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„åŠŸèƒ½ï¼Œå®ƒä½¿ä½ èƒ½å¤Ÿå°†ç³»ç»Ÿé”™è¯¯ä»£ç è½¬æ¢ä¸ºæ›´æ˜“äºç†è§£çš„é”™è¯¯åç§°ã€‚äº†è§£è¿™ä¸ªåŠŸèƒ½å¦‚ä½•å·¥ä½œä»¥åŠå¦‚ä½•ä½¿ç”¨å®ƒå¯ä»¥å¸®åŠ©ä½ æ›´å¥½åœ°å¤„ç†å’Œè°ƒè¯•åœ¨ Node.js åº”ç”¨ç¨‹åºä¸­é‡åˆ°çš„ç³»ç»Ÿçº§é”™è¯¯ã€‚</p><h3 id="åŸºæœ¬æ¦‚å¿µ-1" tabindex="-1"><a class="header-anchor" href="#åŸºæœ¬æ¦‚å¿µ-1"><span>åŸºæœ¬æ¦‚å¿µ</span></a></h3><p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦æ˜ç™½ä»€ä¹ˆæ˜¯ç³»ç»Ÿé”™è¯¯ä»£ç ã€‚åœ¨ç¼–å†™å’Œè¿è¡Œç¨‹åºæ—¶ï¼Œæ“ä½œç³»ç»Ÿï¼ˆæ¯”å¦‚ Windowsã€Linux æˆ– macOSï¼‰ä¼šé€šè¿‡ç‰¹å®šçš„é”™è¯¯ä»£ç å‘ä½ çš„ç¨‹åºæŠ¥å‘Šå„ç§ç¡¬ä»¶æˆ–è½¯ä»¶å¼‚å¸¸ã€‚ä¾‹å¦‚ï¼Œå°è¯•è¯»å–ä¸€ä¸ªä¸å­˜åœ¨çš„æ–‡ä»¶ä¼šäº§ç”Ÿä¸€ä¸ªé”™è¯¯ä»£ç ï¼Œè¡¨æ˜æ–‡ä»¶æœªæ‰¾åˆ°ã€‚</p><p>åœ¨ä¸åŒçš„æ“ä½œç³»ç»Ÿä¸­ï¼Œç›¸åŒçš„é”™è¯¯å¯èƒ½ä¼šæœ‰ä¸åŒçš„é”™è¯¯ä»£ç ã€‚è¿™å°±æ˜¯ <code>util.getSystemErrorName</code> å‡½æ•°å‘æŒ¥ä½œç”¨çš„åœ°æ–¹ã€‚å®ƒå¸®åŠ©ä½ å°†è¿™äº›é€šå¸¸æ˜¯æ•°å­—çš„é”™è¯¯ä»£ç è½¬æ¢æˆæ›´å…·å¯è¯»æ€§çš„å­—ç¬¦ä¸²å½¢å¼çš„é”™è¯¯åç§°ï¼Œè¿™æ ·ä½ å°±å¯ä»¥æ›´å®¹æ˜“åœ°äº†è§£å¹¶å¤„ç†è¿™äº›é”™è¯¯äº†ã€‚</p><h3 id="ä½¿ç”¨æ–¹æ³•" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨æ–¹æ³•"><span>ä½¿ç”¨æ–¹æ³•</span></a></h3><p>å‡è®¾ä½ åœ¨æ‰§è¡Œä¸€äº›æ–‡ä»¶æ“ä½œæˆ–ç½‘ç»œè¯·æ±‚æ—¶é‡åˆ°äº†ä¸€ä¸ªé”™è¯¯ï¼Œå¹¶ä¸”ä½ å¾—åˆ°äº†ä¸€ä¸ªç³»ç»Ÿé”™è¯¯ä»£ç ã€‚ä½ å¯ä»¥ä½¿ç”¨ <code>util.getSystemErrorName</code> æ¥è·å–è¯¥é”™è¯¯ä»£ç å¯¹åº”çš„é”™è¯¯åç§°ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å‡è®¾ä½ ä»æŸå¤„è·å–åˆ°äº†ä¸€ä¸ªç³»ç»Ÿé”™è¯¯ä»£ç </span></span>
<span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> errorCode</span><span style="color:#81A1C1;"> =</span><span style="color:#B48EAD;"> 404</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¿™é‡Œåªæ˜¯ä¸¾ä¾‹ï¼Œå®é™…çš„é”™è¯¯ä»£ç å¯èƒ½ä¸æ­¤ä¸åŒ</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å°†é”™è¯¯ä»£ç è½¬æ¢ä¸ºé”™è¯¯åç§°</span></span>
<span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> errorName</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">getSystemErrorName</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">errorCode</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">errorName</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡ºé”™è¯¯åç§°</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="å®é™…è¿ç”¨çš„ä¾‹å­-2" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨çš„ä¾‹å­-2"><span>å®é™…è¿ç”¨çš„ä¾‹å­</span></a></h3><ol><li><p><strong>æ–‡ä»¶æ“ä½œé”™è¯¯å¤„ç†</strong>ï¼šå½“ä½ å°è¯•è¯»å–æˆ–å†™å…¥æ–‡ä»¶æ—¶ï¼Œå¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œæˆ–è€…æ²¡æœ‰è¶³å¤Ÿçš„æƒé™ï¼ŒNode.js å°†é€šè¿‡é”™è¯¯ä»£ç é€šçŸ¥ä½ ã€‚ä½ å¯ä»¥ä½¿ç”¨ <code>util.getSystemErrorName</code> æ¥è½¬æ¢è¿™ä¸ªé”™è¯¯ä»£ç ï¼Œä»¥ä¾¿æ›´æ¸…æ¥šåœ°çŸ¥é“å‘ç”Ÿäº†ä»€ä¹ˆé—®é¢˜ã€‚</p></li><li><p><strong>ç½‘ç»œè¯·æ±‚å¤±è´¥</strong>ï¼šåœ¨è¿›è¡Œç½‘ç»œè¯·æ±‚æ—¶ï¼Œæ¯”å¦‚ä½¿ç”¨ HTTP æ¨¡å—å‘èµ·è¯·æ±‚ï¼Œå¦‚æœå‡ºç°è¿æ¥å¤±è´¥ç­‰é—®é¢˜ï¼Œç³»ç»ŸåŒæ ·ä¼šè¿”å›é”™è¯¯ä»£ç ã€‚ä½¿ç”¨ <code>util.getSystemErrorName</code> èƒ½å¸®åŠ©ä½ è¯†åˆ«å…·ä½“æ˜¯å“ªç§ç±»å‹çš„è¿æ¥é”™è¯¯ï¼Œä»è€Œé‡‡å–ç›¸åº”çš„è§£å†³æªæ–½ã€‚</p></li><li><p><strong>è¿›ç¨‹é—´é€šä¿¡(IPC)é”™è¯¯</strong>ï¼šåœ¨ä½¿ç”¨ Node.js è¿›è¡Œè¿›ç¨‹é—´é€šä¿¡æ—¶ï¼Œå¯èƒ½ä¼šé‡åˆ°ç®¡é“ç ´è£‚ã€æ¶ˆæ¯é˜Ÿåˆ—æ»¡ç­‰é”™è¯¯ï¼Œè¿™äº›ä¹Ÿä¼šé€šè¿‡é”™è¯¯ä»£ç å½¢å¼è¿”å›ã€‚åˆ©ç”¨ <code>util.getSystemErrorName</code> å¯ä»¥è®©ä½ æ›´æ¸…æ™°åœ°ç†è§£é€šä¿¡è¿‡ç¨‹ä¸­é‡åˆ°çš„å…·ä½“é—®é¢˜ã€‚</p></li></ol><h3 id="ç»“è®º-1" tabindex="-1"><a class="header-anchor" href="#ç»“è®º-1"><span>ç»“è®º</span></a></h3><p>é€šè¿‡ä¸Šè¿°è§£é‡Šå’Œä¾‹å­ï¼Œä½ åº”è¯¥èƒ½ç†è§£ <code>util.getSystemErrorName</code> åœ¨ Node.js ä¸­çš„ä½œç”¨å’Œä½¿ç”¨æ–¹å¼äº†ã€‚è¿™ä¸ªåŠŸèƒ½è™½ç„¶ç®€å•ï¼Œä½†å®ƒåœ¨è°ƒè¯•å’Œå¤„ç†ç³»ç»Ÿçº§é”™è¯¯æ—¶éå¸¸æœ‰ç”¨ï¼Œèƒ½å¤Ÿè®©ä½ æ›´å¿«åœ°å®šä½é—®é¢˜ï¼Œå†™å‡ºæ›´å¥å£¯çš„ä»£ç ã€‚</p><h2 id="util-getsystemerrormap" tabindex="-1"><a class="header-anchor" href="#util-getsystemerrormap"><span><a href="https://nodejs.org/docs/latest/api/util.html#utilgetsystemerrormap" target="_blank" rel="noopener noreferrer">util.getSystemErrorMap()</a></span></a></h2><p>Node.js çš„ <code>util.getSystemErrorMap()</code> å‡½æ•°æ˜¯ä¸€ä¸ªç”¨äºè·å–ç³»ç»Ÿçº§é”™è¯¯ä»£ç åŠå…¶è¯´æ˜çš„å·¥å…·ã€‚åœ¨ Node.js v21.7.1 ä¸­ï¼Œè¿™ä¸ªå‡½æ•°æä¾›äº†ä¸€ä¸ªæ˜ å°„ï¼ˆå³ä¸€ä¸ª Map å¯¹è±¡ï¼‰ï¼Œå®ƒå°†æ¯ä¸ªç³»ç»Ÿé”™è¯¯ä»£ç ï¼ˆé€šå¸¸æ˜¯ç”±åº•å±‚æ“ä½œç³»ç»Ÿäº§ç”Ÿçš„æ•°å­—ä»£ç ï¼‰å…³è”åˆ°ä¸€ä¸ªå…·ä½“çš„é”™è¯¯å¯¹è±¡ä¸Šã€‚è¿™äº›é”™è¯¯å¯¹è±¡åŒ…å«äº†é”™è¯¯ä»£ç ã€é”™è¯¯æ¶ˆæ¯ç­‰ä¿¡æ¯ã€‚</p><h3 id="ä¸ºä»€ä¹ˆéœ€è¦-util-getsystemerrormap" tabindex="-1"><a class="header-anchor" href="#ä¸ºä»€ä¹ˆéœ€è¦-util-getsystemerrormap"><span>ä¸ºä»€ä¹ˆéœ€è¦ <code>util.getSystemErrorMap()</code>?</span></a></h3><p>åœ¨è¿›è¡Œç³»ç»Ÿçº§ç¼–ç¨‹æˆ–è€…å¤„ç†å’Œæ“ä½œç³»ç»Ÿäº¤äº’æ—¶ï¼Œç»å¸¸ä¼šé‡åˆ°ç”±æ“ä½œç³»ç»Ÿäº§ç”Ÿçš„é”™è¯¯ã€‚è¿™äº›é”™è¯¯é€šå¸¸é€šè¿‡é”™è¯¯ç ï¼ˆæ•´æ•°ï¼‰æ¥è¡¨ç¤ºã€‚å¯¹äºå¼€å‘è€…è€Œè¨€ï¼Œç›´æ¥å¤„ç†è¿™äº›é”™è¯¯ç å¹¶ä¸å‹å¥½ï¼Œå› ä¸ºå®ƒä»¬ä¸å®¹æ˜“è®°å¿†ï¼Œä¹Ÿä¸æ˜“äºç†è§£ã€‚<code>util.getSystemErrorMap()</code> æä¾›äº†ä¸€ç§å°†è¿™äº›é”™è¯¯ç è½¬æ¢ä¸ºæ›´åŠ äººç±»å¯è¯»å½¢å¼çš„æ–¹æ³•ï¼Œé€šè¿‡è¿™ä¸ªæ˜ å°„ï¼Œå¼€å‘è€…å¯ä»¥æ¸…æ¥šåœ°çŸ¥é“é”™è¯¯ç ä»£è¡¨çš„å…·ä½“é”™è¯¯ä¿¡æ¯ï¼Œä»è€Œæ›´æœ‰æ•ˆåœ°è¿›è¡Œè°ƒè¯•å’Œé”™è¯¯å¤„ç†ã€‚</p><h3 id="å¦‚ä½•ä½¿ç”¨-util-getsystemerrormap" tabindex="-1"><a class="header-anchor" href="#å¦‚ä½•ä½¿ç”¨-util-getsystemerrormap"><span>å¦‚ä½•ä½¿ç”¨ <code>util.getSystemErrorMap()</code>?</span></a></h3><p>é¦–å…ˆï¼Œä½ éœ€è¦åœ¨ä½ çš„ Node.js åº”ç”¨ç¨‹åºä¸­å¼•å…¥ <code>util</code> æ¨¡å—ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>éšåï¼Œä½ å¯ä»¥è°ƒç”¨ <code>util.getSystemErrorMap()</code> è·å–é”™è¯¯ç æ˜ å°„ï¼Œè¿™ä¸ªæ˜ å°„æ˜¯ä¸€ä¸ª Map å¯¹è±¡ï¼Œé”®ï¼ˆkeyï¼‰æ˜¯é”™è¯¯ç ï¼ˆæ•´æ•°ï¼‰ï¼Œå€¼ï¼ˆvalueï¼‰æ˜¯å¯¹åº”çš„é”™è¯¯å¯¹è±¡ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> errorMap</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">getSystemErrorMap</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">errorMap</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ®µä»£ç å°†æ‰“å°å‡ºæ‰€æœ‰ç³»ç»Ÿé”™è¯¯ç åŠå…¶å¯¹åº”çš„é”™è¯¯å¯¹è±¡ã€‚æ¯ä¸ªé”™è¯¯å¯¹è±¡è‡³å°‘åŒ…å«ä¸¤ä¸ªå±æ€§ï¼š<code>code</code> å’Œ <code>message</code>ã€‚<code>code</code> æ˜¯é”™è¯¯çš„å­—ç¬¦ä¸²è¡¨ç¤ºï¼Œè€Œ <code>message</code> åˆ™æ˜¯å¯¹è¿™ä¸ªé”™è¯¯çš„æè¿°ã€‚</p><h3 id="å®é™…è¿ç”¨ç¤ºä¾‹" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨ç¤ºä¾‹"><span>å®é™…è¿ç”¨ç¤ºä¾‹</span></a></h3><p>å‡è®¾ä½ æ­£åœ¨ç¼–å†™ä¸€ä¸ª Node.js åº”ç”¨ï¼Œè¯¥åº”ç”¨éœ€è¦è®¿é—®æ–‡ä»¶ç³»ç»Ÿè¿›è¡ŒæŸäº›æ“ä½œã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œå¾ˆå¯èƒ½ä¼šé‡åˆ°æ–‡ä»¶ä¸å­˜åœ¨ã€æƒé™ä¸è¶³ç­‰é—®é¢˜ï¼Œè¿™äº›éƒ½ä¼šå¯¼è‡´ç³»ç»Ÿçº§é”™è¯¯ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> fs</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">fs</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å°è¯•è¯»å–ä¸€ä¸ªä¸å­˜åœ¨çš„æ–‡ä»¶</span></span>
<span class="line"><span style="color:#D8DEE9;">fs</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">readFile</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">/path/to/nonexistent/file</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> (</span><span style="color:#D8DEE9;">err</span><span style="color:#ECEFF4;">)</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">err</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#616E88;">    // è·å–ç³»ç»Ÿé”™è¯¯æ˜ å°„</span></span>
<span class="line"><span style="color:#81A1C1;">    const</span><span style="color:#D8DEE9;"> errorMap</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">getSystemErrorMap</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">    // è·å–å…·ä½“çš„é”™è¯¯å¯¹è±¡</span></span>
<span class="line"><span style="color:#81A1C1;">    const</span><span style="color:#D8DEE9;"> errorObj</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> errorMap</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">get</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">err</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">errno</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">`</span><span style="color:#A3BE8C;">Error occured: </span><span style="color:#81A1C1;">${</span><span style="color:#D8DEE9;">errorObj</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">code</span><span style="color:#81A1C1;">}</span><span style="color:#ECEFF4;">`</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">`</span><span style="color:#A3BE8C;">Error message: </span><span style="color:#81A1C1;">${</span><span style="color:#D8DEE9;">errorObj</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">message</span><span style="color:#81A1C1;">}</span><span style="color:#ECEFF4;">`</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span><span style="color:#81A1C1;"> else</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">File read successfully.</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå¦‚æœå°è¯•è¯»å–çš„æ–‡ä»¶ä¸å­˜åœ¨ï¼Œ<code>fs.readFile</code> æ–¹æ³•å°†å›è°ƒä¸€ä¸ªé”™è¯¯å¯¹è±¡ <code>err</code>ã€‚é€šè¿‡ <code>err.errno</code> æˆ‘ä»¬è·å¾—é”™è¯¯ç ï¼Œå¹¶åˆ©ç”¨ <code>util.getSystemErrorMap()</code> æŸ¥è¯¢å¯¹åº”çš„é”™è¯¯å¯¹è±¡ï¼Œæœ€ç»ˆä»¥æ›´åŠ å‹å¥½çš„æ–¹å¼è¾“å‡ºé”™è¯¯ä¿¡æ¯ã€‚</p><p>é€šè¿‡è¿™æ ·çš„æ–¹å¼ï¼Œ<code>util.getSystemErrorMap()</code> ä½¿å¾—å¤„ç†å’Œç†è§£ç³»ç»Ÿçº§é”™è¯¯å˜å¾—æ›´åŠ ç®€å•ç›´æ¥ï¼Œæœ‰åŠ©äºæé«˜å¼€å‘æ•ˆç‡å’Œæ”¹å–„ç”¨æˆ·ä½“éªŒã€‚</p><h2 id="util-inherits-constructor-superconstructor" tabindex="-1"><a class="header-anchor" href="#util-inherits-constructor-superconstructor"><span><a href="https://nodejs.org/docs/latest/api/util.html#utilinheritsconstructor-superconstructor" target="_blank" rel="noopener noreferrer">util.inherits(constructor, superConstructor)</a></span></a></h2><p>å¥½çš„ï¼Œè®©æˆ‘ä»¬æ·±å…¥äº†è§£ <code>util.inherits(constructor, superConstructor)</code> è¿™ä¸ªæ–¹æ³•åœ¨ Node.js ä¸­çš„ä½œç”¨å’Œåº”ç”¨ï¼Œå°¤å…¶æ˜¯å¦‚ä½•åœ¨ Node.js v21.7.1 ç‰ˆæœ¬ä¸­ä½¿ç”¨å®ƒã€‚</p><h3 id="ä»€ä¹ˆæ˜¯-util-inherits" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯-util-inherits"><span>ä»€ä¹ˆæ˜¯ util.inherits?</span></a></h3><p>åœ¨ JavaScript ä¸­ï¼Œç»§æ‰¿æ˜¯ä¸€ç§åˆ›å»ºæ–°å¯¹è±¡æ—¶ï¼Œèƒ½å¤Ÿä»å…¶ä»–å¯¹è±¡æ¥æ”¶å±æ€§å’Œæ–¹æ³•çš„æœºåˆ¶ã€‚Node.js çš„ <code>util.inherits</code> æ–¹æ³•æ˜¯ä¸“é—¨ä¸ºäº†å®ç°è¿™ä¸€ç›®çš„è€Œç”Ÿçš„å·¥å…·ä¹‹ä¸€ã€‚è¿™ä¸ªæ–¹æ³•å…è®¸ä½ åœ¨ä¸¤ä¸ªæ„é€ å‡½æ•°ä¹‹é—´å»ºç«‹ä¸€ä¸ªç»§æ‰¿å…³ç³»ï¼Œå³ä¸€ä¸ª&quot;å­ç±»&quot;å¯ä»¥ç»§æ‰¿å¦ä¸€ä¸ª&quot;çˆ¶ç±»&quot;çš„å±æ€§å’Œæ–¹æ³•ã€‚</p><h3 id="å¦‚ä½•ä½¿ç”¨-1" tabindex="-1"><a class="header-anchor" href="#å¦‚ä½•ä½¿ç”¨-1"><span>å¦‚ä½•ä½¿ç”¨ï¼Ÿ</span></a></h3><p>é¦–å…ˆï¼Œä½ éœ€è¦äº†è§£ä»€ä¹ˆæ˜¯æ„é€ å‡½æ•°ã€‚æ„é€ å‡½æ•°å°±æ˜¯ç”¨æ¥åˆ›å»ºç‰¹å®šç±»å‹å¯¹è±¡çš„å‡½æ•°ï¼Œæ¯”å¦‚ç”¨æ¥åˆ›å»ºç”¨æˆ·ã€æ¶ˆæ¯æˆ–ä»»ä½•å…¶ä»–å¯¹è±¡ã€‚</p><p>è®©æˆ‘ä»¬ä¸¾ä¸ªå…·ä½“çš„ä¾‹å­ï¼š</p><p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªè¡¨ç¤ºâ€œäººâ€çš„æ„é€ å‡½æ•°å’Œä¸€ä¸ªè¡¨ç¤ºâ€œå­¦ç”Ÿâ€çš„æ„é€ å‡½æ•°ã€‚æ˜¾ç„¶ï¼Œå­¦ç”Ÿä¹Ÿæ˜¯äººï¼Œå› æ­¤â€œå­¦ç”Ÿâ€åº”è¯¥ç»§æ‰¿â€œäººâ€çš„ä¸€äº›ç‰¹æ€§ï¼ˆå±æ€§å’Œæ–¹æ³•ï¼‰ã€‚è¿™å°±æ˜¯ <code>util.inherits</code> èƒ½å¸®åŠ©æˆ‘ä»¬åšåˆ°çš„ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// çˆ¶ç±»æ„é€ å‡½æ•°</span></span>
<span class="line"><span style="color:#81A1C1;">function</span><span style="color:#88C0D0;"> Person</span><span style="color:#ECEFF4;">()</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  this</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">name</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">John Doe</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">  this</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">gender</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">Male</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8FBCBB;">Person</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9FF;">prototype</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">sayHello</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> function</span><span style="color:#ECEFF4;"> ()</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">`</span><span style="color:#A3BE8C;">Hello! My name is </span><span style="color:#81A1C1;">${</span><span style="color:#81A1C1;">this</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">name</span><span style="color:#81A1C1;">}</span><span style="color:#A3BE8C;"> and I am a </span><span style="color:#81A1C1;">${</span><span style="color:#81A1C1;">this</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">gender</span><span style="color:#81A1C1;">}</span><span style="color:#A3BE8C;">.</span><span style="color:#ECEFF4;">`</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å­ç±»æ„é€ å‡½æ•°</span></span>
<span class="line"><span style="color:#81A1C1;">function</span><span style="color:#88C0D0;"> Student</span><span style="color:#ECEFF4;">()</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#616E88;">  // è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°</span></span>
<span class="line"><span style="color:#D8DEE9;">  Person</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">call</span><span style="color:#D8DEE9FF;">(</span><span style="color:#81A1C1;">this</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">  this</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">role</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">Student</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// åœ¨Studentå’ŒPersonä¹‹é—´å»ºç«‹ç»§æ‰¿å…³ç³»</span></span>
<span class="line"><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">inherits</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">Student</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> Person</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// ç°åœ¨Studentå¯ä»¥è®¿é—®sayHelloæ–¹æ³•äº†</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> student1</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> Student</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">student1</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">name</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">Jane Doe</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // ä¿®æ”¹åå­—å±æ€§</span></span>
<span class="line"><span style="color:#D8DEE9;">student1</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">sayHello</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡º: Hello! My name is Jane Doe and I am a Male.</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="å®é™…è¿ç”¨-2" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨-2"><span>å®é™…è¿ç”¨</span></a></h3><ul><li><p><strong>åˆ›å»ºåŸºç¡€å¯¹è±¡å’Œç‰¹åŒ–å¯¹è±¡</strong>ï¼šåœ¨å®é™…å¼€å‘ä¸­ï¼Œç»å¸¸ä¼šé‡åˆ°ä¸€äº›åŸºç¡€å¯¹è±¡æ‹¥æœ‰å…±åŒçš„å±æ€§å’Œæ–¹æ³•ï¼Œè€Œç‰¹åŒ–å¯¹è±¡åˆ™åŸºäºåŸºç¡€å¯¹è±¡ä½†æ·»åŠ äº†æ›´å…·ä½“çš„åŠŸèƒ½ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸€ä¸ªæ¸¸æˆåº”ç”¨ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½æœ‰ä¸€ä¸ªåŸºç¡€çš„è§’è‰²ï¼ˆCharacterï¼‰æ„é€ å‡½æ•°ï¼Œä»¥åŠç‰¹åŒ–çš„è§’è‰²ï¼Œå¦‚æˆ˜å£«ï¼ˆWarriorï¼‰ã€æ³•å¸ˆï¼ˆMageï¼‰ç­‰ã€‚</p></li><li><p><strong>æ’ä»¶ç³»ç»Ÿ</strong>ï¼šå¦‚æœä½ æ­£åœ¨æ„å»ºä¸€ä¸ªæ”¯æŒæ’ä»¶çš„åº”ç”¨ï¼Œ<code>util.inherits</code> å¯ä»¥å¸®åŠ©ä½ å®šä¹‰ä¸€ä¸ªåŸºç¡€æ’ä»¶ç±»ï¼Œæ‰€æœ‰ç‰¹å®šåŠŸèƒ½çš„æ’ä»¶éƒ½ç»§æ‰¿è‡ªè¿™ä¸ªåŸºç¡€ç±»ã€‚</p></li></ul><h3 id="æ³¨æ„ç‚¹" tabindex="-1"><a class="header-anchor" href="#æ³¨æ„ç‚¹"><span>æ³¨æ„ç‚¹</span></a></h3><p>è™½ç„¶ <code>util.inherits</code> æ˜¯ä¸€ç§å®ç°ç»§æ‰¿çš„æ–¹å¼ï¼Œä½†åœ¨ ES6 å¼•å…¥ <code>class</code> å’Œ <code>extends</code> å…³é”®å­—åï¼Œæ›´ç°ä»£å’Œæ¨èçš„åšæ³•æ˜¯ä½¿ç”¨è¿™äº›æ–°çš„è¯­æ³•ç‰¹æ€§æ¥å®ç°ç»§æ‰¿ï¼Œå› ä¸ºå®ƒä»¬æ›´ç®€æ´ï¼Œæ›´æ˜“äºç†è§£å’Œç»´æŠ¤ã€‚</p><p>ä¾‹å¦‚ï¼Œä¸Šè¿°ä¾‹å­ä½¿ç”¨ ES6 ç±»çš„å†™æ³•ä¼šæ˜¯è¿™æ ·ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">class</span><span style="color:#8FBCBB;"> Person</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  constructor</span><span style="color:#ECEFF4;">()</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">    this</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">name</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">John Doe</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">    this</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">gender</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">Male</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88C0D0;">  sayHello</span><span style="color:#ECEFF4;">()</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">`</span><span style="color:#A3BE8C;">Hello! My name is </span><span style="color:#81A1C1;">${</span><span style="color:#81A1C1;">this</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">name</span><span style="color:#81A1C1;">}</span><span style="color:#A3BE8C;"> and I am a </span><span style="color:#81A1C1;">${</span><span style="color:#81A1C1;">this</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">gender</span><span style="color:#81A1C1;">}</span><span style="color:#A3BE8C;">.</span><span style="color:#ECEFF4;">`</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">class</span><span style="color:#8FBCBB;"> Student</span><span style="color:#81A1C1;"> extends</span><span style="color:#8FBCBB;font-weight:bold;"> Person</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  constructor</span><span style="color:#ECEFF4;">()</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">    super</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è°ƒç”¨çˆ¶ç±»çš„constructor</span></span>
<span class="line"><span style="color:#81A1C1;">    this</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">role</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">Student</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> student1</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> Student</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">student1</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">name</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">Jane Doe</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">student1</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">sayHello</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¸Œæœ›è¿™ä¸ªè§£é‡Šå’Œä¾‹å­èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£ <code>util.inherits</code> ä»¥åŠå¦‚ä½•åœ¨ Node.js ä¸­å®ç°ç»§æ‰¿ï¼</p><h2 id="util-inspect-object-options" tabindex="-1"><a class="header-anchor" href="#util-inspect-object-options"><span><a href="https://nodejs.org/docs/latest/api/util.html#utilinspectobject-options" target="_blank" rel="noopener noreferrer">util.inspect(object[, options])</a></span></a></h2><p>ç†è§£ <code>util.inspect</code> åŠŸèƒ½å‰ï¼Œå…ˆæ¥ç®€å•äº†è§£ä¸€ä¸‹ Node.jsã€‚Node.js æ˜¯ä¸€ä¸ªèƒ½è®© JavaScript è¿è¡Œåœ¨æœåŠ¡å™¨ç«¯çš„å¹³å°ï¼Œå¸¸ç”¨äºåˆ›å»ºé«˜æ€§èƒ½çš„ç½‘ç»œå’ŒæœåŠ¡å™¨åº”ç”¨ã€‚</p><p>å¥½ï¼Œç°åœ¨æˆ‘ä»¬èŠèŠ <code>util.inspect</code> è¿™ä¸ªæ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•æ¥è‡ª Node.js çš„ <code>util</code> æ¨¡å—ï¼Œå®ƒæ˜¯ä¸€ä¸ªç”¨äºå°†ä»»ä½• JavaScript å¯¹è±¡è½¬æ¢ä¸ºå­—ç¬¦ä¸²çš„å·¥å…·ï¼Œä¸»è¦ç”¨äºè°ƒè¯•å’Œé”™è¯¯è¾“å‡ºã€‚ç®€è€Œè¨€ä¹‹ï¼Œå½“ä½ æƒ³æ›´æ¸…æ¥šåœ°äº†è§£ä¸€ä¸ªå¯¹è±¡çš„è¯¦ç»†ä¿¡æ¯æ—¶ï¼Œå°±å¯ä»¥ä½¿ç”¨ <code>util.inspect</code>ã€‚</p><h3 id="å‚æ•°-1" tabindex="-1"><a class="header-anchor" href="#å‚æ•°-1"><span>å‚æ•°</span></a></h3><ul><li><code>object</code>: è¦è¢«è½¬æ¢æˆå­—ç¬¦ä¸²çš„å¯¹è±¡ã€‚</li><li><code>options</code>ï¼ˆå¯é€‰ï¼‰: ä¸€ä¸ªé…ç½®å¯¹è±¡ï¼Œå¯ä»¥æ§åˆ¶è¾“å‡ºç»“æœçš„å„ç§ç»†èŠ‚ï¼Œå¦‚æ·±åº¦ã€é¢œè‰²ç­‰ã€‚</li></ul><h3 id="å¸¸ç”¨é€‰é¡¹" tabindex="-1"><a class="header-anchor" href="#å¸¸ç”¨é€‰é¡¹"><span>å¸¸ç”¨é€‰é¡¹</span></a></h3><ul><li><code>showHidden</code>: å¦‚æœè®¾ç½®ä¸º <code>true</code>ï¼Œå¯¹è±¡çš„ä¸å¯æšä¸¾å±æ€§ä¹Ÿä¼šè¢«åŒ…å«åœ¨ç»“æœä¸­ã€‚</li><li><code>depth</code>: æŒ‡å®šæ ¼å¼åŒ–æ—¶é€’å½’å¤šå°‘å±‚å¯¹è±¡ã€‚è®¾ç½®ä¸º <code>null</code> è¡¨ç¤ºæ— é™å±‚ã€‚</li><li><code>colors</code>: è®¾ç½®ä¸º <code>true</code> å¯ä»¥åœ¨æ§åˆ¶å°ä¸­è¾“å‡ºå½©è‰²æ–‡æœ¬ï¼Œå¢åŠ å¯è¯»æ€§ã€‚</li><li><code>customInspect</code>: å½“è®¾ç½®ä¸º <code>false</code> æ—¶ï¼Œå¯¹è±¡ä¸Šçš„ <code>inspect(depth, opts)</code> å‡½æ•°ä¸ä¼šè¢«è°ƒç”¨ã€‚</li></ul><h3 id="å®é™…ä¾‹å­" tabindex="-1"><a class="header-anchor" href="#å®é™…ä¾‹å­"><span>å®é™…ä¾‹å­</span></a></h3><p>å‡è®¾ä½ æ­£åœ¨å¼€å‘ä¸€ä¸ªå°å‹çš„ç½‘ç»œæœåŠ¡å™¨ï¼Œå¹¶ä¸”æƒ³æŸ¥çœ‹è¯·æ±‚å¯¹è±¡ï¼ˆrequest objectï¼‰é‡Œé¢æœ‰å“ªäº›å†…å®¹ï¼Œè¿™æ—¶ <code>util.inspect</code> å°±éå¸¸æœ‰ç”¨äº†ã€‚</p><h4 id="ç¤ºä¾‹-1-åŸºæœ¬ä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#ç¤ºä¾‹-1-åŸºæœ¬ä½¿ç”¨"><span>ç¤ºä¾‹ 1ï¼šåŸºæœ¬ä½¿ç”¨</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> obj</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> {</span><span style="color:#88C0D0;"> name</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">John</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#88C0D0;"> age</span><span style="color:#ECEFF4;">:</span><span style="color:#B48EAD;"> 30</span><span style="color:#ECEFF4;">,</span><span style="color:#88C0D0;"> features</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> {</span><span style="color:#88C0D0;"> hair</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">brown</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#88C0D0;"> eyes</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">blue</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;"> }</span><span style="color:#ECEFF4;"> }</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">inspect</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">obj</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ®µä»£ç ä¼šè¾“å‡º <code>obj</code> å¯¹è±¡çš„å†…å®¹ï¼Œä½†å¦‚æœå¯¹è±¡éå¸¸å¤æ‚ï¼Œçœ‹èµ·æ¥å¯èƒ½ä¼šå¾ˆä¹±ã€‚</p><h4 id="ç¤ºä¾‹-2-ä½¿ç”¨é€‰é¡¹æ”¹è¿›è¾“å‡º" tabindex="-1"><a class="header-anchor" href="#ç¤ºä¾‹-2-ä½¿ç”¨é€‰é¡¹æ”¹è¿›è¾“å‡º"><span>ç¤ºä¾‹ 2ï¼šä½¿ç”¨é€‰é¡¹æ”¹è¿›è¾“å‡º</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">inspect</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">obj</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> {</span><span style="color:#88C0D0;"> depth</span><span style="color:#ECEFF4;">:</span><span style="color:#81A1C1;"> null</span><span style="color:#ECEFF4;">,</span><span style="color:#88C0D0;"> colors</span><span style="color:#ECEFF4;">:</span><span style="color:#81A1C1;"> true</span><span style="color:#ECEFF4;"> }</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>é€šè¿‡è®¾ç½® <code>depth</code> ä¸º <code>null</code> å’Œ <code>colors</code> ä¸º <code>true</code>ï¼Œè¾“å‡ºçš„å†…å®¹ä¼šæ›´å®¹æ˜“é˜…è¯»ï¼Œå°¤å…¶æ˜¯å¯¹äºæ·±å±‚æ¬¡çš„å¯¹è±¡ç»“æ„ã€‚</p><h4 id="ç¤ºä¾‹-3-éšè—ä¸å¯æšä¸¾å±æ€§" tabindex="-1"><a class="header-anchor" href="#ç¤ºä¾‹-3-éšè—ä¸å¯æšä¸¾å±æ€§"><span>ç¤ºä¾‹ 3ï¼šéšè—ä¸å¯æšä¸¾å±æ€§</span></a></h4><p>æœ‰æ—¶å€™ï¼Œå¯¹è±¡ä¸­å¯èƒ½åŒ…å«ä¸€äº›ä¸å¸Œæœ›è¢«è½»æ˜“çœ‹åˆ°çš„å±æ€§ï¼ˆæ¯”å¦‚å‡½æ•°å†…éƒ¨çš„å˜é‡æˆ–è€…æ•æ„Ÿä¿¡æ¯ï¼‰ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> objWithHiddenProps</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> Object</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">create</span><span style="color:#D8DEE9FF;">(</span><span style="color:#81A1C1;">null</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#88C0D0;">  visibleProp</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> {</span><span style="color:#88C0D0;"> value</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">I am visible</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#88C0D0;"> enumerable</span><span style="color:#ECEFF4;">:</span><span style="color:#81A1C1;"> true</span><span style="color:#ECEFF4;"> },</span></span>
<span class="line"><span style="color:#88C0D0;">  hiddenProp</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> {</span><span style="color:#88C0D0;"> value</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">I am hidden</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#88C0D0;"> enumerable</span><span style="color:#ECEFF4;">:</span><span style="color:#81A1C1;"> false</span><span style="color:#ECEFF4;"> },</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">inspect</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">objWithHiddenProps</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> {</span><span style="color:#88C0D0;"> showHidden</span><span style="color:#ECEFF4;">:</span><span style="color:#81A1C1;"> true</span><span style="color:#ECEFF4;"> }</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é€šè¿‡è®¾ç½® <code>showHidden</code> ä¸º <code>true</code>ï¼Œå³ä½¿æ˜¯ä¸å¯æšä¸¾çš„å±æ€§ä¹Ÿä¼šè¢«æ˜¾ç¤ºå‡ºæ¥ã€‚</p><h3 id="æ€»ç»“-1" tabindex="-1"><a class="header-anchor" href="#æ€»ç»“-1"><span>æ€»ç»“</span></a></h3><p><code>util.inspect</code> æ˜¯ Node.js ä¸­ä¸€ä¸ªç›¸å½“å®ç”¨çš„åŠŸèƒ½ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤„ç†è°ƒè¯•å’Œå±•ç¤ºå¤æ‚å¯¹è±¡æ—¶ã€‚é€šè¿‡çµæ´»è¿ç”¨å…¶æä¾›çš„é€‰é¡¹ï¼Œå¯ä»¥æ›´åŠ æœ‰æ•ˆåœ°è¾“å‡ºå’Œç†è§£æ•°æ®ç»“æ„ï¼Œä»è€Œæå‡å¼€å‘å’Œè°ƒè¯•çš„æ•ˆç‡ã€‚</p><h2 id="util-inspect-object-showhidden-depth-colors" tabindex="-1"><a class="header-anchor" href="#util-inspect-object-showhidden-depth-colors"><span><a href="https://nodejs.org/docs/latest/api/util.html#utilinspectobject-showhidden-depth-colors" target="_blank" rel="noopener noreferrer">util.inspect(object[, showHidden[, depth[, colors]]])</a></span></a></h2><p>Node.js ä¸­çš„<code>util.inspect()</code>å‡½æ•°æ˜¯ä¸€ä¸ªéå¸¸å®ç”¨çš„å·¥å…·ï¼Œå®ƒå…è®¸ä½ å°†ä»»ä½• JavaScript å¯¹è±¡è½¬æ¢ä¸ºå­—ç¬¦ä¸²å½¢å¼ï¼Œè¿™æ ·å°±å¯ä»¥æ›´å®¹æ˜“åœ°ç†è§£å’Œè°ƒè¯•è¯¥å¯¹è±¡ã€‚ç°åœ¨ï¼Œæˆ‘å°†è¯¦ç»†åœ°è§£é‡Š<code>util.inspect()</code>å‡½æ•°ï¼Œå¹¶ç»™å‡ºä¸€äº›å®é™…è¿ç”¨çš„ä¾‹å­ã€‚</p><h3 id="åŸºæœ¬ä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#åŸºæœ¬ä½¿ç”¨"><span>åŸºæœ¬ä½¿ç”¨</span></a></h3><p>é¦–å…ˆï¼Œ<code>util.inspect()</code>å‡½æ•°æ˜¯ Node.js çš„ util æ¨¡å—çš„ä¸€éƒ¨åˆ†ï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨ä¹‹å‰éœ€è¦å¼•å…¥è¿™ä¸ªæ¨¡å—ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>ç„¶åï¼ŒåŸºæœ¬çš„ä½¿ç”¨æ–¹æ³•æ˜¯å°†ä½ è¦æ£€æŸ¥çš„å¯¹è±¡ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ä¼ é€’ç»™<code>util.inspect()</code>å‡½æ•°ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> obj</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> {</span><span style="color:#88C0D0;"> name</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">John</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#88C0D0;"> age</span><span style="color:#ECEFF4;">:</span><span style="color:#B48EAD;"> 30</span><span style="color:#ECEFF4;"> }</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">inspect</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">obj</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#616E88;">// è¾“å‡ºï¼š&#39;{ name: &#39;John&#39;, age: 30 }&#39;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ä¸ªä¾‹å­å±•ç¤ºäº†å¦‚ä½•å°†ä¸€ä¸ªç®€å•å¯¹è±¡è½¬æ¢ä¸ºå­—ç¬¦ä¸²å¹¶æ‰“å°å‡ºæ¥ã€‚</p><h3 id="å‚æ•°è¯¦è§£" tabindex="-1"><a class="header-anchor" href="#å‚æ•°è¯¦è§£"><span>å‚æ•°è¯¦è§£</span></a></h3><p><code>util.inspect()</code>å‡½æ•°å¯ä»¥æ¥å—å‡ ä¸ªå¯é€‰å‚æ•°æ¥å®šåˆ¶åŒ–è¾“å‡ºçš„æ ¼å¼ï¼š</p><ol><li><code>object</code>: è¦è¢«è½¬æ¢æˆå­—ç¬¦ä¸²çš„å¯¹è±¡ã€‚</li><li><code>showHidden</code> (å¯é€‰): å¦‚æœè®¾ä¸º<code>true</code>ï¼Œå¯¹è±¡çš„ä¸å¯æšä¸¾å±æ€§å’Œ Symbol ç±»å‹çš„å±æ€§ä¹Ÿä¼šè¢«åŒ…å«åœ¨è¾“å‡ºä¸­ã€‚</li><li><code>depth</code> (å¯é€‰): è¡¨ç¤ºå¯¹è±¡åµŒå¥—ç»“æ„çš„é€’å½’æ·±åº¦ï¼Œè¶…è¿‡æŒ‡å®šæ·±åº¦çš„éƒ¨åˆ†å°†è¢«çœç•¥ã€‚é»˜è®¤å€¼é€šå¸¸ä¸º<code>2</code>ã€‚</li><li><code>colors</code> (å¯é€‰): å¦‚æœè®¾ä¸º<code>true</code>ï¼Œè¾“å‡ºå°†åŒ…å« ANSI é¢œè‰²ä»£ç ï¼Œä½¿å…¶åœ¨æ§åˆ¶å°ä¸­å‘ˆç°ä¸åŒçš„é¢œè‰²ã€‚</li></ol><h3 id="å®é™…è¿ç”¨ä¾‹å­-1" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨ä¾‹å­-1"><span>å®é™…è¿ç”¨ä¾‹å­</span></a></h3><p><strong>æ˜¾ç¤ºéšè—å±æ€§</strong></p><p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥å¯¹è±¡æ‹¥æœ‰ä¸€äº›ä¸å¯æšä¸¾çš„å±æ€§ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> person</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> {}</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">Object</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">defineProperty</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">person</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">age</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#88C0D0;">  value</span><span style="color:#ECEFF4;">:</span><span style="color:#B48EAD;"> 30</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#88C0D0;">  enumerable</span><span style="color:#ECEFF4;">:</span><span style="color:#81A1C1;"> false</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">inspect</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">person</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> {</span><span style="color:#88C0D0;"> showHidden</span><span style="color:#ECEFF4;">:</span><span style="color:#81A1C1;"> true</span><span style="color:#ECEFF4;"> }</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#616E88;">// è¾“å‡ºï¼š&#39;{ [age]: 30 }&#39;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œè™½ç„¶<code>age</code>å±æ€§ä¸å¯æšä¸¾ï¼Œä½†é€šè¿‡è®¾ç½®<code>showHidden: true</code>ï¼Œæˆ‘ä»¬ä¾ç„¶å¯ä»¥çœ‹åˆ°è¿™ä¸ªå±æ€§ã€‚</p><p><strong>é™åˆ¶é€’å½’æ·±åº¦</strong></p><p>å¯¹äºä¸€ä¸ªæ·±å±‚åµŒå¥—çš„å¯¹è±¡ï¼Œæˆ‘ä»¬å¯èƒ½ä¸å¸Œæœ›é€’å½’éå†æ‰€æœ‰å±‚çº§ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> nestedObj</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> {</span><span style="color:#88C0D0;"> a</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> {</span><span style="color:#88C0D0;"> b</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> {</span><span style="color:#88C0D0;"> c</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> {</span><span style="color:#88C0D0;"> d</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> {}</span><span style="color:#ECEFF4;"> }</span><span style="color:#ECEFF4;"> }</span><span style="color:#ECEFF4;"> }</span><span style="color:#ECEFF4;"> }</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">inspect</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">nestedObj</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> {</span><span style="color:#88C0D0;"> depth</span><span style="color:#ECEFF4;">:</span><span style="color:#B48EAD;"> 2</span><span style="color:#ECEFF4;"> }</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#616E88;">// è¾“å‡ºï¼š&#39;{ a: { b: { c: [Object] } } }&#39;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é€šè¿‡è®¾ç½®<code>depth: 2</code>ï¼Œåªæ˜¾ç¤ºåˆ°ç¬¬äºŒå±‚çš„å†…å®¹ï¼Œæ›´æ·±å±‚æ¬¡çš„å¯¹è±¡è¢«ç®€åŒ–ä¸º<code>[Object]</code>ã€‚</p><p><strong>å¯ç”¨é¢œè‰²</strong></p><p>å½“ç›´æ¥åœ¨æ§åˆ¶å°ä¸­æŸ¥çœ‹è¾“å‡ºæ—¶ï¼Œå¯ç”¨é¢œè‰²å¯ä»¥æé«˜å¯è¯»æ€§ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">inspect</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">nestedObj</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> {</span><span style="color:#88C0D0;"> depth</span><span style="color:#ECEFF4;">:</span><span style="color:#B48EAD;"> 2</span><span style="color:#ECEFF4;">,</span><span style="color:#88C0D0;"> colors</span><span style="color:#ECEFF4;">:</span><span style="color:#81A1C1;"> true</span><span style="color:#ECEFF4;"> }</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>å¦‚æœåœ¨æ”¯æŒé¢œè‰²çš„ç»ˆç«¯ä¸­è¿è¡Œè¿™æ®µä»£ç ï¼Œä½ ä¼šçœ‹åˆ°æŒ‰ç…§æ•°æ®ç±»å‹ç€è‰²çš„è¾“å‡ºï¼Œè¿™å¯ä»¥å¸®åŠ©åŒºåˆ†ä¸åŒç±»å‹çš„æ•°æ®ã€‚</p><h3 id="æ€»ç»“-2" tabindex="-1"><a class="header-anchor" href="#æ€»ç»“-2"><span>æ€»ç»“</span></a></h3><p><code>util.inspect()</code>æ˜¯ Node.js ä¸­ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„å‡½æ•°ï¼Œç‰¹åˆ«æ˜¯åœ¨å¼€å‘å’Œè°ƒè¯•é˜¶æ®µã€‚é€šè¿‡åˆç†åœ°ä½¿ç”¨å…¶å‚æ•°ï¼Œä½ å¯ä»¥è·å¾—å…³äºä»»ä½• JavaScript å¯¹è±¡æ›´ä¸°å¯Œã€æ›´æ˜“äºç†è§£çš„ä¿¡æ¯ã€‚æ— è®ºæ˜¯æŸ¥çœ‹ä¸€ä¸ªå¤æ‚å¯¹è±¡çš„ç»“æ„ï¼Œè¿˜æ˜¯ä»…ä»…æ˜¯å¿«é€Ÿäº†è§£ä¸€ä¸ªå¯¹è±¡çš„æ¦‚è²Œï¼Œ<code>util.inspect()</code>éƒ½èƒ½æ´¾ä¸Šç”¨åœºã€‚</p><h3 id="customizing-util-inspect-colors" tabindex="-1"><a class="header-anchor" href="#customizing-util-inspect-colors"><span><a href="https://nodejs.org/docs/latest/api/util.html#customizing-utilinspect-colors" target="_blank" rel="noopener noreferrer">Customizing util.inspect colors</a></span></a></h3><p>ç†è§£ Node.js ä¸­ <code>util.inspect</code> æ–¹æ³•çš„è‡ªå®šä¹‰é¢œè‰²åŠŸèƒ½ä¹‹å‰ï¼Œæˆ‘ä»¬é¦–å…ˆå¾—çŸ¥é“ <code>util.inspect</code> æ˜¯ä»€ä¹ˆã€‚åœ¨ Node.js ä¸­ï¼Œ<code>util</code> æ¨¡å—æä¾›äº†ä¸€ç³»åˆ—å®ç”¨å°å·¥å…·ï¼Œè€Œ <code>util.inspect</code> æ–¹æ³•æ˜¯è¿™äº›å·¥å…·ä¹‹ä¸€ï¼Œå®ƒèƒ½å¤Ÿè®©ä½ å°†ä»»ä½• JavaScript å¯¹è±¡è½¬æ¢ä¸ºå­—ç¬¦ä¸²å½¢å¼ï¼Œè¿™å¯¹äºè°ƒè¯•å’Œæ§åˆ¶å°è¾“å‡ºéå¸¸æœ‰ç”¨ã€‚</p><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>util.inspect</code> ä¼šä»¥ä¸åŒçš„é¢œè‰²é«˜äº®æ˜¾ç¤ºå¯¹è±¡çš„ä¸åŒéƒ¨åˆ†ï¼Œæ¯”å¦‚ï¼šåœ¨æ§åˆ¶å°ä¸­ï¼Œæ•°å­—å¯èƒ½æ˜¾ç¤ºä¸ºè“è‰²ï¼Œå­—ç¬¦ä¸²æ˜¾ç¤ºä¸ºçº¢è‰²ç­‰ï¼Œè¿™ç§å½©è‰²é«˜äº®å¯ä»¥å¸®åŠ©å¼€å‘è€…æ›´å¿«åœ°åŒºåˆ†å’Œè¯†åˆ«æ•°æ®ç±»å‹å’Œç»“æ„ã€‚</p><p>ä½†æ˜¯ï¼Œä» Node.js ç‰ˆæœ¬ 21.7.1 å¼€å§‹ï¼Œä½ å¯ä»¥è‡ªå®šä¹‰è¿™äº›é¢œè‰²ï¼è¿™æ„å‘³ç€ä½ å¯ä»¥æ ¹æ®è‡ªå·±çš„åå¥½æˆ–éœ€æ±‚ï¼Œæ”¹å˜ä¸åŒæ•°æ®ç±»å‹åœ¨æ§åˆ¶å°è¾“å‡ºæ—¶çš„é¢œè‰²ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘å°†é€šè¿‡ä¸€ä¸ªç®€å•çš„ä¾‹å­æ¥å±•ç¤ºå¦‚ä½•ä½¿ç”¨è¿™ä¸ªåŠŸèƒ½ã€‚</p><h3 id="ç¤ºä¾‹-1" tabindex="-1"><a class="header-anchor" href="#ç¤ºä¾‹-1"><span>ç¤ºä¾‹</span></a></h3><p>å‡è®¾ä½ æ­£åœ¨ç¼–å†™ä¸€ä¸ª Node.js åº”ç”¨ï¼Œå¹¶ä¸”ä½ é¢‘ç¹åœ°ä½¿ç”¨ <code>console.log(util.inspect(object))</code> æ¥è°ƒè¯•ä½ çš„å¯¹è±¡ï¼Œç°åœ¨ä½ æƒ³è¦è‡ªå®šä¹‰è¿™äº›è¾“å‡ºçš„é¢œè‰²ã€‚</p><p>é¦–å…ˆï¼Œä½ éœ€è¦å¯¼å…¥ <code>util</code> æ¨¡å—å¹¶è·å–åˆ° <code>inspect</code> æ–¹æ³•ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>ç„¶åï¼Œä½ å¯ä»¥è®¾ç½® <code>util.inspect</code> çš„é¢œè‰²ã€‚è¿™å¯ä»¥é€šè¿‡ä¿®æ”¹ <code>util.inspect.styles</code> å’Œ <code>util.inspect.colors</code> å±æ€§æ¥å®ç°ã€‚å‡è®¾æˆ‘ä»¬æƒ³è¦å°†æ•°å­—çš„é¢œè‰²ä»é»˜è®¤çš„ï¼ˆé€šå¸¸æ˜¯è“è‰²ï¼‰æ”¹ä¸ºé»„è‰²ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·åšï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#616E88;">// è®¾ç½®æ ·å¼</span></span>
<span class="line"><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">inspect</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">styles</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">number</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">yellow</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// æŸ¥çœ‹æˆ–è®¾ç½®é¢œè‰²ä»£ç </span></span>
<span class="line"><span style="color:#616E88;">// æ³¨æ„ï¼šè¿™å¯èƒ½ä¸æ˜¯å¿…éœ€çš„ï¼Œå› ä¸ºå†…ç½®çš„é¢œè‰²å·²ç»é¢„è®¾äº†ANSIé¢œè‰²ä»£ç ã€‚</span></span>
<span class="line"><span style="color:#616E88;">// util.inspect.colors.yellow = [&#39;\x1b[33m&#39;, &#39;\x1b[39m&#39;];</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç°åœ¨ï¼Œæ¯å½“ä½ ä½¿ç”¨ <code>util.inspect</code> æ¥è¾“å‡ºæ•°å­—æ—¶ï¼Œå®ƒä»¬éƒ½å°†ä»¥é»„è‰²æ˜¾ç¤ºï¼Œè¿™å¯ä»¥ä½¿å¾—æ•°å­—åœ¨å¤§é‡æ–‡æœ¬ä¿¡æ¯ä¸­æ›´åŠ çªå‡ºï¼Œä»è€Œæå‡è°ƒè¯•æ•ˆç‡ã€‚</p><p>æœ€åï¼Œè®©æˆ‘ä»¬æ¥å®é™…ä½¿ç”¨ä¸€ä¸‹ <code>util.inspect</code>ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> obj</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#88C0D0;">  name</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">Node.js</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#88C0D0;">  version</span><span style="color:#ECEFF4;">:</span><span style="color:#B48EAD;"> 21.7</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#88C0D0;">  features</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> [</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">JavaScript</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">Event-driven</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">Non-blocking I/O</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">]</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">inspect</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">obj</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> {</span><span style="color:#88C0D0;"> colors</span><span style="color:#ECEFF4;">:</span><span style="color:#81A1C1;"> true</span><span style="color:#ECEFF4;"> }</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ä¸Šé¢çš„ä»£ç ç¤ºä¾‹ä¸­ï¼Œç”±äºæˆ‘ä»¬ä¹‹å‰å·²ç»å°†æ•°å­—é¢œè‰²è®¾ç½®ä¸ºé»„è‰²ï¼Œæ‰€ä»¥å¯¹è±¡ <code>obj</code> ä¸­çš„ <code>version</code> å±æ€§å€¼â€œ21.7â€åœ¨æ§åˆ¶å°è¾“å‡ºæ—¶å°†æ˜¾ç¤ºä¸ºé»„è‰²ã€‚</p><h3 id="å°ç»“-1" tabindex="-1"><a class="header-anchor" href="#å°ç»“-1"><span>å°ç»“</span></a></h3><p>è‡ªå®šä¹‰ <code>util.inspect</code> çš„é¢œè‰²å…è®¸ä½ æŒ‰ç…§ä¸ªäººå–œå¥½æˆ–é¡¹ç›®éœ€æ±‚è°ƒæ•´æ§åˆ¶å°è¾“å‡ºçš„è§†è§‰æ ·å¼ï¼Œè¿™ä¸ä»…å¯ä»¥æå‡ä»£ç çš„å¯è¯»æ€§ï¼Œè¿˜èƒ½ä½¿è°ƒè¯•è¿‡ç¨‹æ›´ä¸ºç›´è§‚å’Œé«˜æ•ˆã€‚è®°ä½ï¼Œè™½ç„¶é¢œè‰²å¯ä»¥å¸®åŠ©åŒºåˆ†å’Œçªå‡ºæ˜¾ç¤ºï¼Œä½†è¿‡å¤šä½¿ç”¨ä¹Ÿå¯èƒ½å¯¼è‡´è¾“å‡ºå˜å¾—æ··ä¹±ï¼Œå› æ­¤è¯·é€‚åº¦è°ƒæ•´ã€‚</p><h4 id="modifiers" tabindex="-1"><a class="header-anchor" href="#modifiers"><span><a href="https://nodejs.org/docs/latest/api/util.html#modifiers" target="_blank" rel="noopener noreferrer">Modifiers</a></span></a></h4><p>Node.js v21.7.1 ä¸­çš„<a href="https://nodejs.org/docs/latest/api/util.html#modifiers" target="_blank" rel="noopener noreferrer">Modifiers</a>æ˜¯æŒ‡åœ¨ä½¿ç”¨<code>util.format()</code>æ–¹æ³•æˆ–è€…<code>console.log()</code>ç­‰æ‰“å°å‡½æ•°æ—¶å¯ä»¥ç”¨äºæ ¼å¼åŒ–å­—ç¬¦ä¸²çš„ç‰¹æ®Šå­—ç¬¦ã€‚ç®€å•æ¥è¯´ï¼Œå°±åƒä½ åœ¨å†™ä¸€ä¸ªå¥å­æ—¶ç”¨ä¸åŒçš„æ ‡ç‚¹ç¬¦å·æ¥æ”¹å˜å¥å­çš„æ„æ€ä¸€æ ·ï¼Œè¿™äº›ä¿®é¥°ç¬¦å¯ä»¥å¸®åŠ©æˆ‘ä»¬ä»¥ä¸åŒçš„æ–¹å¼å±•ç¤ºæ•°æ®ã€‚</p><p>ä¸‹é¢æˆ‘ä»¬é€ä¸ªæ¥è®²è§£è¿™äº›ä¿®é¥°ç¬¦ï¼Œå¹¶ç»™å‡ºä¸€äº›å®é™…çš„ä¾‹å­ï¼š</p><ol><li><p><strong>%s</strong> - å­—ç¬¦ä¸²æ ¼å¼åŒ–ã€‚</p><ul><li>ä¸¾ä¾‹ï¼šå‡è®¾ä½ æƒ³è¾“å‡ºä¸€ä¸ªå­—ç¬¦ä¸²è¡¨ç¤ºä½ çš„åå­—ï¼Œä½ å¯ä»¥è¿™æ ·åšï¼š<div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">æˆ‘çš„åå­—æ˜¯ %s</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">å¼ ä¸‰</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#616E88;">// è¾“å‡ºï¼šæˆ‘çš„åå­—æ˜¯ å¼ ä¸‰</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li><li><p><strong>%d</strong> æˆ– <strong>%i</strong> - æ•´æ•°æ ¼å¼åŒ–ã€‚</p><ul><li>ä¸¾ä¾‹ï¼šè¡¨è¾¾å¹´é¾„æˆ–æ•°é‡æ—¶ï¼Œä½ éœ€è¦æ•´æ•°æ ¼å¼åŒ–ã€‚<div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">æˆ‘ä»Šå¹´ %d å²ã€‚</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 25</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#616E88;">// è¾“å‡ºï¼šæˆ‘ä»Šå¹´ 25 å²ã€‚</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li><li><p><strong>%f</strong> - æµ®ç‚¹æ•°ï¼ˆå°æ•°ï¼‰æ ¼å¼åŒ–ã€‚</p><ul><li>ä¸¾ä¾‹ï¼šå½“ä½ è°ˆè®ºä»·æ ¼æˆ–è€…ä½“ç§¯ç­‰éœ€è¦ç²¾ç¡®åˆ°å°æ•°çš„æƒ…å†µæ—¶ï¼Œæµ®ç‚¹æ•°æ ¼å¼åŒ–éå¸¸æœ‰ç”¨ã€‚<div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">è¿™æœ¬ä¹¦çš„ä»·æ ¼æ˜¯ %f å…ƒã€‚</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 299.99</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#616E88;">// è¾“å‡ºï¼šè¿™æœ¬ä¹¦çš„ä»·æ ¼æ˜¯ 299.990000 å…ƒã€‚</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li><li><p><strong>%o</strong> - å¯¹è±¡çš„ç®€æ´å¯è§†åŒ–ï¼ˆæ²¡æœ‰æ–¹æ³•çš„å¯¹è±¡ï¼‰ã€‚</p></li><li><p><strong>%O</strong> - å¯¹è±¡çš„å®Œæ•´å¯è§†åŒ–ï¼ˆåŒ…æ‹¬å¯¹è±¡çš„æ–¹æ³•ï¼‰ã€‚</p><ul><li><p>ä¸¾ä¾‹ï¼šå½“ä½ æƒ³æ‰“å°å‡ºä¸€ä¸ªå¯¹è±¡çš„è¯¦ç»†ä¿¡æ¯æ—¶ï¼Œå¯ä»¥ç”¨è¿™ä¸¤ä¸ªä¿®é¥°ç¬¦ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> person</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> {</span><span style="color:#88C0D0;"> name</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">æå››</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#88C0D0;"> age</span><span style="color:#ECEFF4;">:</span><span style="color:#B48EAD;"> 30</span><span style="color:#ECEFF4;"> }</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">ç®€æ´çš„å¯¹è±¡ä¿¡æ¯ï¼š%o</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> person</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#616E88;">// è¾“å‡ºåŒ…å«å¯¹è±¡å±æ€§ä½†ä¸åŒ…æ‹¬æ–¹æ³•çš„ä¿¡æ¯</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">å®Œæ•´çš„å¯¹è±¡ä¿¡æ¯ï¼š%O</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> person</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#616E88;">// è¾“å‡ºå®Œæ•´çš„å¯¹è±¡ä¿¡æ¯ï¼ŒåŒ…æ‹¬å…¶æ–¹æ³•ï¼ˆå¦‚æœæœ‰ï¼‰</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li><li><p><strong>%c</strong> - CSS æ ·å¼ä¿®é¥°ç¬¦ï¼ˆä»…åœ¨ Web æµè§ˆå™¨ç¯å¢ƒä¸‹çš„ console å¯¹è±¡æœ‰æ•ˆï¼ŒNode.js ä¸­æ— æ•ˆï¼‰ã€‚</p></li></ol><p>æ¥ä¸‹æ¥æ˜¯ä¸€äº› Node.js ç¯å¢ƒä¸­ä¸å¸¸è§æˆ–ä¸æ”¯æŒçš„ä¿®é¥°ç¬¦ï¼Œä½†äº†è§£å®ƒä»¬å¯¹äºå…¨é¢æŒæ¡æ ¼å¼åŒ–æŠ€å·§ä¹Ÿå¾ˆæœ‰å¸®åŠ©ï¼š</p><ul><li><strong>%j</strong> - JSONã€‚å°†ç»™å®šçš„ JavaScript å¯¹è±¡åºåˆ—åŒ–æˆä¸€ä¸ª JSON å­—ç¬¦ä¸²ã€‚ <ul><li>ä¸¾ä¾‹ï¼š<div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">ç”¨æˆ·ä¿¡æ¯ï¼š%j</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> {</span><span style="color:#88C0D0;"> name</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">ç‹äº”</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#88C0D0;"> age</span><span style="color:#ECEFF4;">:</span><span style="color:#B48EAD;"> 28</span><span style="color:#ECEFF4;"> }</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#616E88;">// è¾“å‡ºï¼šç”¨æˆ·ä¿¡æ¯ï¼š{&quot;name&quot;:&quot;ç‹äº”&quot;,&quot;age&quot;:28}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li><li>åœ¨æŸäº›ç¯å¢ƒä¸‹å¯èƒ½è¿˜ä¼šçœ‹åˆ° <strong>%%</strong> è¿™æ ·çš„è¡¨ç¤ºæ³•ï¼Œå®ƒç”¨æ¥è¾“å‡ºç™¾åˆ†å·æœ¬èº«ã€‚</li></ul><p>é€šè¿‡ä¸Šè¿°ä¾‹å­ï¼Œä½ å¯ä»¥çœ‹åˆ°ä¸åŒçš„ä¿®é¥°ç¬¦æ˜¯å¦‚ä½•åœ¨å®é™…ç¼–ç¨‹ä¸­è¢«åº”ç”¨çš„ã€‚ç†è§£å’Œç†Ÿç»ƒè¿ç”¨è¿™äº›ä¿®é¥°ç¬¦å¯ä»¥è®©ä½ æ›´åŠ çµæ´»åœ°å¤„ç†å„ç§æ•°æ®çš„è¾“å‡ºå’Œå±•ç¤ºã€‚</p><h4 id="foreground-colors" tabindex="-1"><a class="header-anchor" href="#foreground-colors"><span><a href="https://nodejs.org/docs/latest/api/util.html#foreground-colors" target="_blank" rel="noopener noreferrer">Foreground colors</a></span></a></h4><p>Node.js æ˜¯ä¸€ä¸ªå¼ºå¤§çš„ JavaScript è¿è¡Œæ—¶ç¯å¢ƒï¼Œå…è®¸ä½ åœ¨æœåŠ¡å™¨ç«¯è¿è¡Œ JavaScript ä»£ç ã€‚å®ƒåŒ…å«ä¸€å¥—å†…ç½®æ¨¡å—ï¼Œç”¨äºæ‰§è¡Œå„ç§ä»»åŠ¡ï¼Œæ¯”å¦‚æ–‡ä»¶ç³»ç»Ÿæ“ä½œã€ç½‘ç»œè¯·æ±‚ç­‰ã€‚<code>util</code> æ˜¯ Node.js ä¸­çš„ä¸€ä¸ªæ ¸å¿ƒæ¨¡å—ï¼Œæä¾›äº†ä¸€ç³»åˆ—å®ç”¨åŠŸèƒ½ï¼Œæ¯”å¦‚å­—ç¬¦ä¸²æ ¼å¼åŒ–ã€è°ƒè¯•å·¥å…·ï¼Œä»¥åŠä¸€äº›ç”¨äºæ§åˆ¶å°è¾“å‡ºçš„å®ç”¨åŠŸèƒ½ã€‚</p><p>åœ¨ Node.js v21.7.1 çš„æ–‡æ¡£ä¸­ï¼Œ<code>Foreground colors</code> æ˜¯æŒ‡åœ¨ä½¿ç”¨ <code>util</code> æ¨¡å—çš„ <code>inspect.styles</code> å’Œ <code>inspect.colors</code> å¯¹è±¡æ—¶ï¼Œå¯ä»¥ç”¨æ¥æ”¹å˜æ§åˆ¶å°ï¼ˆç»ˆç«¯æˆ–å‘½ä»¤è¡Œç•Œé¢ï¼‰ä¸­æ–‡æœ¬çš„å‰æ™¯è‰²ï¼ˆå³æ–‡å­—é¢œè‰²ï¼‰ã€‚è¿™å¯¹äºå¢å¼ºæ—¥å¿—ä¿¡æ¯çš„å¯è¯»æ€§ï¼Œæˆ–è€…åœ¨è¾“å‡ºè°ƒè¯•ä¿¡æ¯æ—¶è¿›è¡Œè§†è§‰åŒºåˆ†éå¸¸æœ‰ç”¨ã€‚</p><h3 id="å¦‚ä½•ä½¿ç”¨-2" tabindex="-1"><a class="header-anchor" href="#å¦‚ä½•ä½¿ç”¨-2"><span>å¦‚ä½•ä½¿ç”¨</span></a></h3><p>é¦–å…ˆï¼Œç¡®ä¿ä½ å·²ç»å®‰è£…äº† Node.jsã€‚æ¥ç€ï¼Œä½ å¯ä»¥åˆ›å»ºä¸€ä¸ª JavaScript æ–‡ä»¶ï¼Œä¾‹å¦‚ <code>colorDemo.js</code>ï¼Œå¹¶ä¸”ä½¿ç”¨ Node.js æ¥è¿è¡Œå®ƒã€‚</p><p>è¿™é‡Œæ˜¯å¦‚ä½•åœ¨ä»£ç ä¸­ä½¿ç”¨å‰æ™¯è‰²çš„åŸºæœ¬ç¤ºä¾‹ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">inspect</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">styles</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#616E88;">// è¾“å‡º inspect çš„æ ·å¼é…ç½®ï¼Œå¯ä»¥çœ‹åˆ°é»˜è®¤çš„é…ç½®ï¼Œæ¯”å¦‚ï¼š{ number: &#39;yellow&#39;, boolean: &#39;yellow&#39;, ... }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å¦‚æœæƒ³è¦æ”¹å˜ç‰¹å®šç±»å‹çš„é¢œè‰²ï¼Œå¯ä»¥ç›´æ¥ä¿®æ”¹</span></span>
<span class="line"><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">inspect</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">styles</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">number</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">blue</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#616E88;">// ç°åœ¨æ‰€æœ‰è¢« `inspect` æ ¼å¼åŒ–çš„æ•°å­—éƒ½å°†æ˜¾ç¤ºä¸ºè“è‰²</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// ä½¿ç”¨ inspect.colors æ¥æŸ¥çœ‹æˆ–å®šä¹‰æ›´å¤šé¢œè‰²</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">inspect</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">colors</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#616E88;">// è¾“å‡ºé¢œè‰²å’Œå¯¹åº”çš„æ§åˆ¶å°é¢œè‰²ä»£ç </span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// ä¸ºäº†å±•ç¤ºé¢œè‰²æ•ˆæœï¼Œå¯ä»¥é€šè¿‡ util.inspect è‡ªå®šä¹‰å¯¹è±¡è¾“å‡º</span></span>
<span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> testObject</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#88C0D0;">  name</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">Node.js</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#88C0D0;">  version</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">v21.7.1</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#88C0D0;">  feature</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">Foreground colors</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">inspect</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">testObject</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> {</span><span style="color:#88C0D0;"> colors</span><span style="color:#ECEFF4;">:</span><span style="color:#81A1C1;"> true</span><span style="color:#ECEFF4;"> }</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#616E88;">// è¿™ä¼šæ ¹æ®ä½ è®¾ç½®çš„ styles é¢œè‰²è¾“å‡º testObject çš„å†…å®¹</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="å®é™…åº”ç”¨ç¤ºä¾‹" tabindex="-1"><a class="header-anchor" href="#å®é™…åº”ç”¨ç¤ºä¾‹"><span>å®é™…åº”ç”¨ç¤ºä¾‹</span></a></h3><ul><li><strong>ç¾åŒ–æ—¥å¿—è¾“å‡º</strong>ï¼šåœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œä½ å¯èƒ½éœ€è¦æ‰“å°å¾ˆå¤šæ—¥å¿—ä¿¡æ¯åˆ°æ§åˆ¶å°ã€‚ä½¿ç”¨ä¸åŒçš„å‰æ™¯è‰²æ¥åŒºåˆ†æ—¥å¿—çº§åˆ«ï¼ˆå¦‚é”™è¯¯ã€è­¦å‘Šã€ä¿¡æ¯ï¼‰å¯ä»¥å¸®åŠ©ä½ æ›´å¿«åœ°è¯†åˆ«é—®é¢˜ã€‚</li><li><strong>è°ƒè¯•ä»£ç </strong>ï¼šå½“ä½ åœ¨è°ƒè¯•å¤æ‚çš„æ•°æ®ç»“æ„æ—¶ï¼Œä½¿ç”¨é¢œè‰²æ¥åŒºåˆ†ä¸åŒç±»å‹çš„æ•°æ®ï¼ˆå¦‚æ•°å­—ã€å­—ç¬¦ä¸²ã€å¸ƒå°”å€¼ç­‰ï¼‰å¯ä»¥è®©è°ƒè¯•è¿‡ç¨‹æ›´åŠ ç›´è§‚ã€‚</li><li><strong>å‘½ä»¤è¡Œå·¥å…·</strong>ï¼šå¦‚æœä½ æ­£åœ¨å¼€å‘ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·ï¼Œä½¿ç”¨ä¸åŒçš„é¢œè‰²æ¥é«˜äº®é‡è¦çš„è¾“å‡ºä¿¡æ¯ï¼Œå¯ä»¥æå‡ç”¨æˆ·ä½“éªŒã€‚</li></ul><p>è®°ä½ï¼Œåœ¨æŸäº›ç»ˆç«¯ä¸­ï¼Œé¢œè‰²æ˜¾ç¤ºå¯èƒ½å—é™äºç»ˆç«¯è‡ªèº«çš„æ”¯æŒå’Œé…ç½®ã€‚æ­¤å¤–ï¼Œè¿‡åº¦ä½¿ç”¨é¢œè‰²å¯èƒ½å¯¼è‡´è¾“å‡ºç»“æœéš¾ä»¥é˜…è¯»ï¼Œå› æ­¤å»ºè®®é€‚åº¦ä½¿ç”¨é¢œè‰²æ¥å¢å¼ºä¿¡æ¯çš„è¡¨ç°åŠ›ã€‚</p><h4 id="background-colors" tabindex="-1"><a class="header-anchor" href="#background-colors"><span><a href="https://nodejs.org/docs/latest/api/util.html#background-colors" target="_blank" rel="noopener noreferrer">Background colors</a></span></a></h4><p>å½“æˆ‘ä»¬è°ˆè®º Node.js ä¸­çš„èƒŒæ™¯é¢œè‰²ï¼ˆBackground colorsï¼‰ï¼Œæˆ‘ä»¬å®é™…ä¸Šæ˜¯åœ¨è®¨è®º<code>console.log</code>è¾“å‡ºæ—¶ï¼Œå¦‚ä½•åˆ©ç”¨ Node.js çš„<code>util</code>æ¨¡å—æ¥ç»™æ–‡æœ¬æ·»åŠ èƒŒæ™¯é¢œè‰²ï¼Œä»¥ä¾¿ä½¿å¾—æ§åˆ¶å°ï¼ˆTerminal æˆ–è€… Command Promptï¼‰ä¸­çš„è¾“å‡ºæ›´åŠ å®¹æ˜“åŒºåˆ†å’Œé˜…è¯»ã€‚</p><p>åœ¨ Node.js çš„<code>util</code>æ¨¡å—ä¸­ï¼Œç‰¹åˆ«æ˜¯ä» v21.7.1 ç‰ˆæœ¬å¼€å§‹ï¼Œå®ƒæä¾›äº†ä¸€ç§æœºåˆ¶ï¼Œå…è®¸å¼€å‘è€…ä½¿ç”¨ç‰¹å®šçš„ä»£ç æ¥æ”¹å˜æ–‡æœ¬çš„èƒŒæ™¯é¢œè‰²ã€‚è¿™æ˜¯é€šè¿‡æ‰€è°“çš„ ANSI è½¬ä¹‰ç æ¥å®ç°çš„ï¼Œè¿™äº›è½¬ä¹‰ç æ˜¯ä¸€ç³»åˆ—çš„æ§åˆ¶å­—ç¬¦ï¼Œç”¨äºåœ¨æ–‡æœ¬ç»ˆç«¯ä¸­æ§åˆ¶é¢œè‰²ã€å…‰æ ‡ä½ç½®ç­‰ã€‚</p><h3 id="åŸºæœ¬æ¦‚å¿µ-2" tabindex="-1"><a class="header-anchor" href="#åŸºæœ¬æ¦‚å¿µ-2"><span>åŸºæœ¬æ¦‚å¿µ</span></a></h3><p>é¦–å…ˆï¼Œæ˜ç™½ ANSI è½¬ä¹‰ç åŸºç¡€å¾ˆé‡è¦ã€‚ANSI è½¬ä¹‰åºåˆ—é€šå¸¸ä»¥<code>\x1b[</code>å¼€å¤´ï¼Œåæ¥å…·ä½“çš„æ•°å­—ä»£ç å’Œå­—æ¯<code>m</code>ç»“æŸã€‚æ¯”å¦‚ï¼Œ<code>\x1b[31m</code>ä¼šå°†æ–‡æœ¬é¢œè‰²è®¾ç½®ä¸ºçº¢è‰²ã€‚å¯¹äºèƒŒæ™¯é¢œè‰²ï¼Œç›¸åº”çš„ä»£ç ä¼šæœ‰æ‰€ä¸åŒã€‚</p><h3 id="å®é™…è¿ç”¨ä¾‹å­-2" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨ä¾‹å­-2"><span>å®é™…è¿ç”¨ä¾‹å­</span></a></h3><p>å‡è®¾ä½ æ­£åœ¨å†™ä¸€ä¸ª Node.js ç¨‹åºï¼Œä½ æƒ³åœ¨æ§åˆ¶å°ä¸­é«˜äº®æ˜¾ç¤ºç‰¹å®šçš„é”™è¯¯ä¿¡æ¯ï¼Œä½¿å…¶åœ¨èƒŒæ™¯ä¸ºçº¢è‰²çš„æƒ…å†µä¸‹å±•ç¤ºï¼Œé‚£ä¹ˆä½ å¯ä»¥è¿™æ ·åšï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å®šä¹‰ä¸€ä¸ªå¸¦æœ‰çº¢è‰²èƒŒæ™¯çš„é”™è¯¯æ¶ˆæ¯</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> errorMsg</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">inspect</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">ERROR: Something went wrong!</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#88C0D0;">  colors</span><span style="color:#ECEFF4;">:</span><span style="color:#81A1C1;"> true</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#88C0D0;">  backgroundColor</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">red</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">errorMsg</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†<code>util.inspect()</code>æ–¹æ³•ï¼Œå¹¶é€šè¿‡å…¶é€‰é¡¹å¼€å¯äº†é¢œè‰²ï¼ˆ<code>colors: true</code>ï¼‰ï¼Œå¹¶æŒ‡å®šäº†èƒŒæ™¯é¢œè‰²ä¸ºçº¢è‰²ï¼ˆ<code>backgroundColor: &#39;red&#39;</code>ï¼‰ã€‚è¿™ä¼šä½¿<code>&#39;ERROR: Something went wrong!&#39;</code>è¿™æ¡ä¿¡æ¯åœ¨æ§åˆ¶å°ä¸­ä»¥çº¢è‰²èƒŒæ™¯å±•ç¤ºå‡ºæ¥ã€‚</p><p>è¯·æ³¨æ„ï¼Œç›´åˆ°æˆ‘å†™è¿™ç¯‡æ–‡ç« æ—¶ï¼Œ<code>util.inspect</code>çš„<code>backgroundColor</code>é€‰é¡¹å¹¶ä¸å­˜åœ¨äº Node.js çš„å®˜æ–¹æ–‡æ¡£ä¸­ã€‚å› è€Œï¼Œä¸Šè¿°ä»£ç ä¸»è¦æ—¨åœ¨è¯´æ˜å¦‚ä½•é€šè¿‡ ANSI è½¬ä¹‰ç ç†è§£å’Œåº”ç”¨èƒŒæ™¯è‰²çš„æ¦‚å¿µã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œä½ å¯èƒ½éœ€è¦ç›´æ¥ä½¿ç”¨ ANSI è½¬ä¹‰ç æ¥å®ç°ç±»ä¼¼çš„æ•ˆæœï¼Œåƒè¿™æ ·ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#EBCB8B;">\x1b</span><span style="color:#A3BE8C;">[41m%s</span><span style="color:#EBCB8B;">\x1b</span><span style="color:#A3BE8C;">[0m</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">ERROR: Something went wrong!</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>è¿™é‡Œï¼Œ<code>\x1b[41m</code>æ˜¯å°†èƒŒæ™¯è‰²è®¾ç½®ä¸ºçº¢è‰²çš„ ANSI è½¬ä¹‰ç ï¼Œ<code>\x1b[0m</code>åˆ™æ˜¯å°†æ ¼å¼é‡ç½®çš„è½¬ä¹‰ç ï¼Œç¡®ä¿ä¹‹åçš„æ–‡æœ¬ä¸ä¼šè¢«å½±å“ã€‚</p><h3 id="æ€»ç»“-3" tabindex="-1"><a class="header-anchor" href="#æ€»ç»“-3"><span>æ€»ç»“</span></a></h3><p>é€šè¿‡ä½¿ç”¨ Node.js ä¸­<code>util</code>æ¨¡å—ï¼ˆæˆ–ç›´æ¥ä½¿ç”¨ ANSI è½¬ä¹‰ç ï¼‰ï¼Œä½ å¯ä»¥åœ¨æ§åˆ¶å°è¾“å‡ºä¸­æ·»åŠ èƒŒæ™¯é¢œè‰²ï¼Œä»è€Œä½¿å¾—ä¿¡æ¯åˆ†ç±»æ›´åŠ ç›´è§‚ã€‚è¿™å¯¹äºè°ƒè¯•åº”ç”¨ã€çªå‡ºé‡è¦ä¿¡æ¯æˆ–ç®€å•åœ°ç¾åŒ–æ§åˆ¶å°è¾“å‡ºéƒ½éå¸¸æœ‰ç”¨ã€‚å°½ç®¡åœ¨å®é™…å¼€å‘ä¸­ç›´æ¥æ“ä½œ ANSI è½¬ä¹‰ç å¯èƒ½è¾ƒä¸ºå°‘è§ï¼Œäº†è§£å®ƒä»¬çš„å·¥ä½œåŸç†ä»ç„¶å¾ˆæœ‰å¸®åŠ©ã€‚</p><h3 id="custom-inspection-functions-on-objects" tabindex="-1"><a class="header-anchor" href="#custom-inspection-functions-on-objects"><span><a href="https://nodejs.org/docs/latest/api/util.html#custom-inspection-functions-on-objects" target="_blank" rel="noopener noreferrer">Custom inspection functions on objects</a></span></a></h3><p>Node.js ä¸­çš„â€œCustom inspection functions on objectsâ€æ˜¯ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„ç‰¹æ€§ï¼Œå®ƒå…è®¸ä½ è‡ªå®šä¹‰å½“ä½¿ç”¨<code>console.log</code>æˆ–å…¶ä»–è°ƒè¯•è¾“å‡ºæ–¹æ³•æ—¶ï¼Œå¯¹è±¡å¦‚ä½•å±•ç¤ºã€‚è¿™å¯¹äºæé«˜å¼€å‘è°ƒè¯•æ•ˆç‡å…·æœ‰é‡è¦æ„ä¹‰ï¼Œå°¤å…¶æ˜¯åœ¨å¤„ç†å¤æ‚å¯¹è±¡æ—¶ã€‚</p><h3 id="åŸºæœ¬æ¦‚å¿µ-3" tabindex="-1"><a class="header-anchor" href="#åŸºæœ¬æ¦‚å¿µ-3"><span>åŸºæœ¬æ¦‚å¿µ</span></a></h3><p>åœ¨ Node.js ä¸­ï¼Œ<code>util</code>æ¨¡å—æä¾›äº†ä¸€ç§æ–¹å¼ï¼Œå…è®¸ä½ ä¸ºå¯¹è±¡å®šä¹‰ä¸€ä¸ª<code>[util.inspect.custom]</code>å‡½æ•°ã€‚è¿™ä¸ªå‡½æ•°å†³å®šäº†å½“å¯¹è±¡éœ€è¦è¢«è½¬æ¢æˆå­—ç¬¦ä¸²å½¢å¼ï¼ˆä¾‹å¦‚ï¼Œæ‰“å°åˆ°æ§åˆ¶å°ï¼‰æ—¶ï¼Œå…¶å±•ç¤ºçš„æ ·å¼ã€‚</p><h3 id="å¦‚ä½•å®ç°" tabindex="-1"><a class="header-anchor" href="#å¦‚ä½•å®ç°"><span>å¦‚ä½•å®ç°</span></a></h3><p>é¦–å…ˆï¼Œä½ éœ€è¦å¯¼å…¥<code>util</code>æ¨¡å—ï¼Œå¹¶è·å–<code>util.inspect.custom</code>ç¬¦å·ï¼Œå› ä¸ºè¿™æ˜¯å®šä¹‰è‡ªå®šä¹‰æ£€æŸ¥å‡½æ•°çš„å…³é”®ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>ç„¶åï¼Œä½ å¯ä»¥ä¸ºä½ çš„å¯¹è±¡å®šä¹‰ä¸€ä¸ª<code>[util.inspect.custom]</code>å‡½æ•°ã€‚è¿™ä¸ªå‡½æ•°åº”è¯¥è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºå½“å¯¹è±¡è¢«æ£€æŸ¥æ—¶ä½ å¸Œæœ›å±•ç¤ºçš„å†…å®¹ã€‚</p><h3 id="å®é™…ä¾‹å­-1" tabindex="-1"><a class="header-anchor" href="#å®é™…ä¾‹å­-1"><span>å®é™…ä¾‹å­</span></a></h3><p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªåä¸º<code>Person</code>çš„ç±»ï¼Œè¿™ä¸ªç±»æœ‰ä¸¤ä¸ªå±æ€§ï¼š<code>name</code>å’Œ<code>age</code>ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">class</span><span style="color:#8FBCBB;"> Person</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  constructor</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">name</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> age</span><span style="color:#ECEFF4;">)</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">    this</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">name</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> name</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">    this</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">age</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> age</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9FF;">  [</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">inspect</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">custom</span><span style="color:#D8DEE9FF;">]</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">depth</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> opts</span><span style="color:#ECEFF4;">)</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">    return</span><span style="color:#ECEFF4;"> `</span><span style="color:#A3BE8C;">Person { name: &quot;</span><span style="color:#81A1C1;">${</span><span style="color:#81A1C1;">this</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">name</span><span style="color:#81A1C1;">}</span><span style="color:#A3BE8C;">&quot;, age: </span><span style="color:#81A1C1;">${</span><span style="color:#81A1C1;">this</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">age</span><span style="color:#81A1C1;">}</span><span style="color:#A3BE8C;"> }</span><span style="color:#ECEFF4;">`</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†<code>[util.inspect.custom]</code>å‡½æ•°ã€‚å½“æˆ‘ä»¬å°è¯•ä½¿ç”¨<code>console.log</code>æ‰“å°ä¸€ä¸ª<code>Person</code>å¯¹è±¡çš„å®ä¾‹æ—¶ï¼Œè¿™ä¸ªå‡½æ•°ä¼šè¢«è°ƒç”¨ï¼Œè¿”å›æˆ‘ä»¬æƒ³è¦çš„æ ¼å¼åŒ–å­—ç¬¦ä¸²ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> person</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> Person</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Alice</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 30</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">person</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡º: Person { name: &quot;Alice&quot;, age: 30 }</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ä½¿ç”¨åœºæ™¯" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨åœºæ™¯"><span>ä½¿ç”¨åœºæ™¯</span></a></h3><ol><li><p><strong>è°ƒè¯•:</strong> å½“ä½ åœ¨å¼€å‘ä¸­é‡åˆ°ä¸€ä¸ªå¤æ‚çš„å¯¹è±¡ï¼Œè€Œé»˜è®¤çš„<code>toString()</code>æ–¹æ³•è¾“å‡ºç»“æœä¸å¤Ÿæ¸…æ™°æˆ–æœ‰ç”¨æ—¶ï¼Œè‡ªå®šä¹‰æ£€æŸ¥å‡½æ•°èƒ½å¤Ÿå¸®åŠ©ä½ æ›´å®¹æ˜“åœ°ç†è§£å¯¹è±¡çš„çŠ¶æ€ã€‚</p></li><li><p><strong>æ—¥å¿—è®°å½•:</strong> åœ¨å‘æ—¥å¿—æ–‡ä»¶è®°å½•ä¿¡æ¯æ—¶ï¼Œç‰¹å®šå¯¹è±¡å¯èƒ½éœ€è¦ä»¥ç‰¹å®šæ ¼å¼è®°å½•ã€‚é€šè¿‡è‡ªå®šä¹‰è¿™äº›å¯¹è±¡çš„å±•ç¤ºï¼Œå¯ä»¥ä½¿æ—¥å¿—æ›´åŠ æ¸…æ™°ã€æœ‰ç”¨ã€‚</p></li><li><p><strong>API å“åº”:</strong> å¦‚æœä½ çš„åº”ç”¨ç¨‹åºä½¿ç”¨ Node.js ä½œä¸ºåç«¯ï¼Œè¿”å›ç‰¹å®šæ ¼å¼çš„å¯¹è±¡ç»™å‰ç«¯æ—¶ï¼Œè‡ªå®šä¹‰å±•ç¤ºæ–¹æ³•å¯ä»¥å¸®åŠ©ä½ ç®€åŒ–åºåˆ—åŒ–é€»è¾‘ã€‚</p></li></ol><h3 id="æ€»ç»“-4" tabindex="-1"><a class="header-anchor" href="#æ€»ç»“-4"><span>æ€»ç»“</span></a></h3><p>é€šè¿‡ä½¿ç”¨ Node.js çš„<code>[util.inspect.custom]</code>åŠŸèƒ½ï¼Œä½ å¯ä»¥æ›´ç»†è‡´ä¸”çµæ´»åœ°æ§åˆ¶å¯¹è±¡åœ¨è¢«æ£€æŸ¥æ—¶çš„å±•ç¤ºæ–¹å¼ã€‚è¿™åœ¨å¼€å‘è°ƒè¯•ã€æ—¥å¿—è®°å½•ç­‰å¤šä¸ªæ–¹é¢éƒ½éå¸¸æœ‰ç”¨ï¼Œå°¤å…¶æ˜¯å¤„ç†é‚£äº›å…·æœ‰å¤æ‚ç»“æ„çš„å¯¹è±¡æ—¶ã€‚</p><h3 id="util-inspect-custom" tabindex="-1"><a class="header-anchor" href="#util-inspect-custom"><span><a href="https://nodejs.org/docs/latest/api/util.html#utilinspectcustom" target="_blank" rel="noopener noreferrer">util.inspect.custom</a></span></a></h3><p>Node.js ä¸­çš„ <code>util.inspect.custom</code> æ¶‰åŠåˆ°ä¸‰ä¸ªå…³é”®æ¦‚å¿µï¼š<code>util</code> æ¨¡å—ã€<code>inspect</code> æ–¹æ³•å’Œ Symbol ç±»å‹ã€‚æˆ‘å°†é€ä¸€ä¸ºä½ è§£é‡Šè¿™äº›æ¦‚å¿µï¼Œå¹¶é€šè¿‡ä¾‹å­æ¥å±•ç¤º <code>util.inspect.custom</code> çš„å®é™…åº”ç”¨ã€‚</p><h3 id="_1-util-æ¨¡å—" tabindex="-1"><a class="header-anchor" href="#_1-util-æ¨¡å—"><span>1. <code>util</code> æ¨¡å—</span></a></h3><p>åœ¨ Node.js ä¸­ï¼Œ<code>util</code> æ˜¯ä¸€ä¸ªæ ¸å¿ƒæ¨¡å—ï¼Œæä¾›äº†ä¸€ç³»åˆ—å®ç”¨å·¥å…·å‡½æ•°ï¼Œä»¥ä¾¿æ›´æ–¹ä¾¿åœ°è¿›è¡Œç¼–ç¨‹ã€‚æ¯”å¦‚ï¼Œè½¬æ¢æ•°æ®ç±»å‹ã€ç»§æ‰¿å¯¹è±¡ç­‰ã€‚ä½ ä¸éœ€è¦å®‰è£…å°±å¯ä»¥ç›´æ¥ä½¿ç”¨å®ƒï¼Œåªéœ€é€šè¿‡ <code>require(&#39;util&#39;)</code> å¼•å…¥åˆ°ä½ çš„é¡¹ç›®ä¸­ã€‚</p><h3 id="_2-inspect-æ–¹æ³•" tabindex="-1"><a class="header-anchor" href="#_2-inspect-æ–¹æ³•"><span>2. <code>inspect</code> æ–¹æ³•</span></a></h3><p><code>inspect</code> æ–¹æ³•æ˜¯ <code>util</code> æ¨¡å—ä¸­çš„ä¸€ä¸ªæ–¹æ³•ï¼Œä¸»è¦ç”¨äºå°†ä»»ä½• JavaScript å¯¹è±¡è½¬æ¢ä¸ºå­—ç¬¦ä¸²å½¢å¼ï¼Œè¿™å¯¹äºè°ƒè¯•å’Œé”™è¯¯è¾“å‡ºéå¸¸æœ‰å¸®åŠ©ã€‚å½“ä½ æƒ³æŸ¥çœ‹ä¸€ä¸ªå¤æ‚å¯¹è±¡å†…éƒ¨ç»“æ„æ—¶ï¼Œ<code>inspect</code> æ–¹æ³•å¯ä»¥å¸®ä½ æ›´æ¸…æ™°åœ°çœ‹åˆ°å¯¹è±¡çš„è¯¦ç»†ä¿¡æ¯ã€‚</p><h3 id="_3-symbol-ç±»å‹" tabindex="-1"><a class="header-anchor" href="#_3-symbol-ç±»å‹"><span>3. Symbol ç±»å‹</span></a></h3><p>åœ¨ ES6 (ECMAScript 2015) å¼•å…¥äº†ä¸€ç§æ–°çš„åŸå§‹æ•°æ®ç±»å‹ Symbolã€‚Symbol å¯ä»¥åˆ›å»ºä¸€ä¸ªå…¨å±€å”¯ä¸€çš„å€¼ï¼ˆå³ä½¿ä½ ä½¿ç”¨ç›¸åŒçš„æè¿°ï¼Œåˆ›å»ºçš„ Symbol ä¹Ÿæ˜¯ä¸åŒçš„ï¼‰ã€‚å®ƒç»å¸¸ç”¨ä½œå¯¹è±¡å±æ€§çš„é”®ï¼Œä»¥ç¡®ä¿å±æ€§åçš„å”¯ä¸€æ€§ï¼Œé¿å…å‘½åå†²çªã€‚</p><h3 id="util-inspect-custom-1" tabindex="-1"><a class="header-anchor" href="#util-inspect-custom-1"><span><code>util.inspect.custom</code></span></a></h3><p><code>util.inspect.custom</code> æ˜¯ä¸€ä¸ª Symbolï¼Œå®ƒå…è®¸è‡ªå®šä¹‰ <code>inspect</code> æ–¹æ³•åœ¨è¢«è°ƒç”¨æ—¶å¯¹è±¡çš„æ˜¾ç¤ºè¾“å‡ºã€‚å¦‚æœä½ çš„å¯¹è±¡å®šä¹‰äº†ä¸€ä¸ªä»¥ <code>util.inspect.custom</code> ä¸ºé”®çš„æ–¹æ³•ï¼Œå½“ <code>util.inspect</code> è¢«è°ƒç”¨æ¥æ£€æŸ¥è¯¥å¯¹è±¡æ—¶ï¼Œä¼šä¼˜å…ˆè°ƒç”¨ä½ è‡ªå®šä¹‰çš„æ–¹æ³•ã€‚</p><h3 id="å®é™…è¿ç”¨ä¾‹å­-3" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨ä¾‹å­-3"><span>å®é™…è¿ç”¨ä¾‹å­</span></a></h3><p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªç±» <code>Person</code>ï¼Œè¡¨ç¤ºäººï¼Œæˆ‘ä»¬æƒ³è‡ªå®šä¹‰è¿™ä¸ªç±»å®ä¾‹åœ¨ä½¿ç”¨ <code>util.inspect</code> æ—¶çš„è¾“å‡ºï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">class</span><span style="color:#8FBCBB;"> Person</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  constructor</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">name</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> age</span><span style="color:#ECEFF4;">)</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">    this</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">name</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> name</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">    this</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">age</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> age</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">  // å®šä¹‰ util.inspect.custom æ–¹æ³•</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  [</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">inspect</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">custom</span><span style="color:#D8DEE9FF;">]</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">depth</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> opts</span><span style="color:#ECEFF4;">)</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">    return</span><span style="color:#ECEFF4;"> `</span><span style="color:#A3BE8C;">Person { name: &quot;</span><span style="color:#81A1C1;">${</span><span style="color:#81A1C1;">this</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">name</span><span style="color:#81A1C1;">}</span><span style="color:#A3BE8C;">&quot;, age: </span><span style="color:#81A1C1;">${</span><span style="color:#81A1C1;">this</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">age</span><span style="color:#81A1C1;">}</span><span style="color:#A3BE8C;"> }</span><span style="color:#ECEFF4;">`</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> person</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> Person</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Alice</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 30</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">inspect</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">person</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#616E88;">// è¾“å‡ºï¼šPerson { name: &quot;Alice&quot;, age: 30 }</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ª <code>Person</code> ç±»å¹¶ä¸ºå…¶å®ä¾‹åŒ–äº†ä¸€ä¸ªå¯¹è±¡ <code>person</code>ã€‚ç„¶åï¼Œæˆ‘ä»¬å®šä¹‰äº† <code>[util.inspect.custom]</code> æ–¹æ³•ï¼Œåœ¨è¯¥æ–¹æ³•å†…ï¼Œæˆ‘ä»¬è¿”å›äº†è‡ªå®šä¹‰çš„å­—ç¬¦ä¸²æ ¼å¼ã€‚æœ€åï¼Œå½“æˆ‘ä»¬è°ƒç”¨ <code>console.log(util.inspect(person))</code>ï¼Œæ§åˆ¶å°è¾“å‡ºçš„æ˜¯æˆ‘ä»¬è‡ªå®šä¹‰çš„å­—ç¬¦ä¸²ï¼Œè€Œä¸æ˜¯ <code>person</code> å¯¹è±¡é»˜è®¤çš„å­—ç¬¦ä¸²è¡¨ç¤ºã€‚</p><p>è¿™ç§æ–¹å¼æå¤§å¢åŠ äº†è¾“å‡ºè°ƒè¯•ä¿¡æ¯çš„çµæ´»æ€§ï¼Œç‰¹åˆ«æ˜¯å½“ä½ çš„å¯¹è±¡ç»“æ„æ¯”è¾ƒå¤æ‚æˆ–æœ‰ç‰¹å®šçš„å±•ç¤ºéœ€æ±‚æ—¶ã€‚</p><h3 id="util-inspect-defaultoptions" tabindex="-1"><a class="header-anchor" href="#util-inspect-defaultoptions"><span><a href="https://nodejs.org/docs/latest/api/util.html#utilinspectdefaultoptions" target="_blank" rel="noopener noreferrer">util.inspect.defaultOptions</a></span></a></h3><p>Node.js æ˜¯ä¸€ä¸ªéå¸¸å¼ºå¤§çš„ JavaScript è¿è¡Œç¯å¢ƒï¼Œå®ƒå…è®¸ä½ åœ¨æœåŠ¡å™¨ç«¯è¿è¡Œ JavaScriptã€‚è¿™æ„å‘³ç€ä½ å¯ä»¥ä½¿ç”¨ JavaScript æ¥ç¼–å†™å¤„ç† HTTP è¯·æ±‚ã€è®¿é—®æ•°æ®åº“å’Œæ–‡ä»¶ç³»ç»Ÿç­‰åç«¯ç¨‹åºã€‚Node.js å†…éƒ¨æœ‰å¾ˆå¤šæ¨¡å—å¸®åŠ©ä½ å®Œæˆå„ç§ä»»åŠ¡ï¼Œ<code>util</code>æ¨¡å—å°±æ˜¯å…¶ä¸­ä¹‹ä¸€ã€‚<code>util</code>æ¨¡å—æä¾›äº†ä¸€ç³»åˆ—å®ç”¨å°å·¥å…·ï¼Œä¾‹å¦‚æ ¼å¼åŒ–å­—ç¬¦ä¸²ã€æ£€æŸ¥å˜é‡ç±»å‹ç­‰ã€‚</p><p>åœ¨ Node.js çš„<code>util</code>æ¨¡å—ä¸­ï¼Œ<code>util.inspect</code>æ˜¯ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„åŠŸèƒ½ï¼Œå®ƒå¯ä»¥è®©ä½ è½¬æ¢ä»»ä½• JavaScript å¯¹è±¡æˆå­—ç¬¦ä¸²å½¢å¼ï¼Œè¿™æ ·ä¾¿äºè°ƒè¯•å’Œäº†è§£å¯¹è±¡ç»“æ„ã€‚è€Œ<code>util.inspect.defaultOptions</code>æ˜¯<code>util.inspect</code>å‡½æ•°çš„é»˜è®¤é…ç½®é€‰é¡¹ï¼Œä½ å¯ä»¥é€šè¿‡ä¿®æ”¹è¿™äº›é€‰é¡¹æ¥æ”¹å˜<code>util.inspect</code>çš„è¡Œä¸ºã€‚</p><h3 id="å®é™…åº”ç”¨ä¸¾ä¾‹" tabindex="-1"><a class="header-anchor" href="#å®é™…åº”ç”¨ä¸¾ä¾‹"><span>å®é™…åº”ç”¨ä¸¾ä¾‹</span></a></h3><p>å‡è®¾ä½ æ­£åœ¨å¼€å‘ä¸€ä¸ª Node.js åº”ç”¨ï¼Œå¹¶ä¸”ä½ æƒ³è¦è¯¦ç»†åœ°äº†è§£æŸä¸ªå¤æ‚å¯¹è±¡çš„ç»“æ„å’Œå†…å®¹ã€‚æ¯”å¦‚è¯´ï¼Œä½ æœ‰ä¸€ä¸ªå¤æ‚çš„ç”¨æˆ·å¯¹è±¡ï¼ŒåŒ…å«ç”¨æˆ·åã€å¹´é¾„ã€è”ç³»æ–¹å¼ç­‰ä¿¡æ¯ã€‚ç›´æ¥ä½¿ç”¨<code>console.log</code>æ‰“å°è¿™ä¸ªå¯¹è±¡æ—¶ï¼Œå¯èƒ½å› ä¸ºå¯¹è±¡å¤ªå¤æ‚è€Œä¸å®¹æ˜“çœ‹æ¸…æ¥šã€‚è¿™æ—¶ï¼Œ<code>util.inspect</code>å°±å¯ä»¥æ´¾ä¸Šç”¨åœºã€‚</p><h4 id="ä¾‹-1-åŸºæœ¬ä½¿ç”¨util-inspect" tabindex="-1"><a class="header-anchor" href="#ä¾‹-1-åŸºæœ¬ä½¿ç”¨util-inspect"><span>ä¾‹ 1ï¼šåŸºæœ¬ä½¿ç”¨<code>util.inspect</code></span></a></h4><p>é¦–å…ˆï¼Œä½ éœ€è¦å¼•å…¥<code>util</code>æ¨¡å—ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>ç„¶åï¼Œå‡è®¾æˆ‘ä»¬æœ‰è¿™æ ·ä¸€ä¸ªå¤æ‚çš„å¯¹è±¡ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> user</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#88C0D0;">  name</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">John Doe</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#88C0D0;">  age</span><span style="color:#ECEFF4;">:</span><span style="color:#B48EAD;"> 30</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#88C0D0;">  contact</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#88C0D0;">    email</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">john@example.com</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#88C0D0;">    phone</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">123-456-7890</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#ECEFF4;">  },</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä½ å¯ä»¥ä½¿ç”¨<code>util.inspect</code>æ¥æ›´å¥½åœ°äº†è§£è¿™ä¸ªå¯¹è±¡ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">inspect</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">user</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="ä¾‹-2-ä¿®æ”¹é»˜è®¤é€‰é¡¹" tabindex="-1"><a class="header-anchor" href="#ä¾‹-2-ä¿®æ”¹é»˜è®¤é€‰é¡¹"><span>ä¾‹ 2ï¼šä¿®æ”¹é»˜è®¤é€‰é¡¹</span></a></h4><p>ä½†æ˜¯ï¼Œå¦‚æœä½ è§‰å¾—é»˜è®¤çš„æ‰“å°æ·±åº¦ï¼ˆå¯¹è±¡é‡Œé¢åµŒå¥—å¯¹è±¡çš„çº§æ•°ï¼‰ä¸å¤Ÿï¼Œæˆ–è€…è¾“å‡ºçš„å­—ç¬¦ä¸²å¤ªé•¿ä¸æ˜“äºé˜…è¯»ï¼Œä½ å¯ä»¥ä¿®æ”¹<code>util.inspect.defaultOptions</code>æ¥å®šåˆ¶è¾“å‡ºã€‚</p><p>ä¾‹å¦‚ï¼Œå¢åŠ æ‰“å°æ·±åº¦ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">inspect</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">defaultOptions</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">depth</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> null;</span><span style="color:#616E88;"> // nullè¡¨ç¤ºæ— é™æ·±åº¦</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">inspect</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">user</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ–è€…ï¼Œé™åˆ¶è¾“å‡ºå­—ç¬¦ä¸²çš„é•¿åº¦ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">inspect</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">defaultOptions</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">maxStringLength</span><span style="color:#81A1C1;"> =</span><span style="color:#B48EAD;"> 100</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // æœ€å¤§å­—ç¬¦ä¸²é•¿åº¦</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">inspect</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">user</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>é€šè¿‡è¿™ç§æ–¹å¼ï¼Œä½ å¯ä»¥æ ¹æ®éœ€è¦è‡ªç”±åœ°å®šåˆ¶<code>util.inspect</code>çš„è¡Œä¸ºï¼Œä»¥ä¾¿æ›´æœ‰æ•ˆåœ°è¿›è¡Œè°ƒè¯•å’Œæ•°æ®å±•ç¤ºã€‚</p><p>æ€»ä¹‹ï¼Œ<code>util.inspect.defaultOptions</code>æä¾›äº†ä¸€ç§çµæ´»çš„æ–¹æ³•æ¥æ§åˆ¶<code>util.inspect</code>çš„è¾“å‡ºï¼Œè®©å¼€å‘è€…èƒ½å¤Ÿæ ¹æ®å®é™…éœ€æ±‚æ›´æœ‰æ•ˆåœ°å±•ç¤ºå’Œåˆ†ææ•°æ®ç»“æ„ï¼Œè¿™åœ¨å¼€å‘è¿‡ç¨‹ä¸­å°¤ä¸ºé‡è¦ï¼Œç‰¹åˆ«æ˜¯å½“å¤„ç†å¤æ‚çš„æ•°æ®ç»“æ„å’Œè°ƒè¯•é—®é¢˜æ—¶ã€‚</p><h2 id="util-isdeepstrictequal-val1-val2" tabindex="-1"><a class="header-anchor" href="#util-isdeepstrictequal-val1-val2"><span><a href="https://nodejs.org/docs/latest/api/util.html#utilisdeepstrictequalval1-val2" target="_blank" rel="noopener noreferrer">util.isDeepStrictEqual(val1, val2)</a></span></a></h2><p><code>util.isDeepStrictEqual(val1, val2)</code> æ˜¯ Node.js ä¸­çš„ä¸€ç§æ–¹æ³•ï¼Œå®ƒç”¨äºæ¯”è¾ƒä¸¤ä¸ªå˜é‡æˆ–å¯¹è±¡ï¼ˆæˆ‘ä»¬è¿™é‡Œçš„ <code>val1</code> å’Œ <code>val2</code>ï¼‰æ˜¯å¦æ·±åº¦ç›¸ç­‰ã€‚åœ¨äº†è§£è¿™ä¸ªæ–¹æ³•ä¹‹å‰ï¼Œæœ‰å‡ ä¸ªå…³é”®ç‚¹éœ€è¦å…ˆæ¸…æ¥šï¼š</p><ol><li><strong>æµ…æ¯”è¾ƒï¼ˆShallow Comparisonï¼‰</strong>ï¼šä»…æ¯”è¾ƒå¯¹è±¡çš„ç¬¬ä¸€å±‚å±æ€§ã€‚</li><li><strong>æ·±æ¯”è¾ƒï¼ˆDeep Comparisonï¼‰</strong>ï¼šé€’å½’åœ°æ¯”è¾ƒå¯¹è±¡çš„æ‰€æœ‰å±‚çº§ï¼Œç›´åˆ°æœ€å†…å±‚ã€‚</li></ol><p><code>util.isDeepStrictEqual</code> æ‰§è¡Œçš„æ˜¯æ·±æ¯”è¾ƒã€‚å®ƒä¸ä»…æ£€æŸ¥ä¸¤ä¸ªå¯¹è±¡çš„ç»“æ„æ˜¯å¦ç›¸åŒï¼Œè¿˜ä¼šæ¯”è¾ƒå¯¹è±¡ä¸­ç›¸åº”ä½ç½®çš„å€¼æ˜¯å¦ä¹Ÿå®Œå…¨ç›¸åŒã€‚è¿™åŒ…æ‹¬å¯¹è±¡çš„ç±»å‹ã€å…·ä½“çš„å€¼ï¼Œä»¥åŠæ•°ç»„æˆ–å¯¹è±¡å†…éƒ¨åµŒå¥—çš„å…¶ä»–å¯¹è±¡æˆ–æ•°ç»„ã€‚</p><h3 id="å·¥ä½œåŸç†" tabindex="-1"><a class="header-anchor" href="#å·¥ä½œåŸç†"><span>å·¥ä½œåŸç†ï¼š</span></a></h3><ul><li>å¯¹äºåŸºæœ¬æ•°æ®ç±»å‹ï¼ˆå¦‚æ•°å­—ã€å­—ç¬¦ä¸²ï¼‰ï¼Œç›´æ¥æ¯”è¾ƒå®ƒä»¬çš„å€¼å’Œç±»å‹ã€‚</li><li>å¯¹äºå¤æ‚æ•°æ®ç±»å‹ï¼ˆå¦‚å¯¹è±¡ã€æ•°ç»„ï¼‰ï¼Œé€’å½’åœ°æ¯”è¾ƒå®ƒä»¬åŒ…å«çš„æ¯ä¸€ä¸ªé¡¹æˆ–å±æ€§ï¼Œç¡®ä¿ç»“æ„ç›¸åŒä¸”å¯¹åº”ä½ç½®çš„å€¼ä¹Ÿç›¸åŒã€‚</li></ul><h3 id="ä½¿ç”¨åœºæ™¯ç¤ºä¾‹" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨åœºæ™¯ç¤ºä¾‹"><span>ä½¿ç”¨åœºæ™¯ç¤ºä¾‹ï¼š</span></a></h3><ol><li><strong>æµ‹è¯•ä»£ç æ—¶éªŒè¯å¯¹è±¡çš„è¾“å‡º</strong>ï¼šåœ¨è‡ªåŠ¨åŒ–æµ‹è¯•ä¸­ï¼Œå½“ä½ æƒ³éªŒè¯ä¸€ä¸ªå‡½æ•°è¿”å›çš„å¤æ‚å¯¹è±¡æ˜¯å¦ç¬¦åˆé¢„æœŸæ—¶ï¼Œå¯ä»¥ä½¿ç”¨ <code>util.isDeepStrictEqual</code> æ¥ç¡®ä¿è¿”å›å€¼çš„æ¯ä¸€éƒ¨åˆ†éƒ½æŒ‰ç…§é¢„æœŸæ­£ç¡®æ— è¯¯ã€‚</li></ol><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> assert</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">assert</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> expected</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> {</span><span style="color:#88C0D0;"> a</span><span style="color:#ECEFF4;">:</span><span style="color:#B48EAD;"> 1</span><span style="color:#ECEFF4;">,</span><span style="color:#88C0D0;"> b</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> {</span><span style="color:#88C0D0;"> c</span><span style="color:#ECEFF4;">:</span><span style="color:#B48EAD;"> 2</span><span style="color:#ECEFF4;"> }</span><span style="color:#ECEFF4;"> }</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> actual</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> someFunctionYouAreTesting</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// æ£€æŸ¥ someFunctionYouAreTesting æ˜¯å¦è¿”å›äº†é¢„æœŸå¯¹è±¡</span></span>
<span class="line"><span style="color:#88C0D0;">assert</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isDeepStrictEqual</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">actual</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> expected</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li><strong>ç¡®å®šä¸¤ä¸ªå¤æ‚é…ç½®å¯¹è±¡æ˜¯å¦ç›¸åŒ</strong>ï¼šåœ¨å¤„ç†é…ç½®æ–‡ä»¶æˆ–çŠ¶æ€å¯¹è±¡æ—¶ï¼Œä½ å¯èƒ½æƒ³æ£€æŸ¥ä¸¤ä¸ªé…ç½®æˆ–çŠ¶æ€å¯¹è±¡åœ¨æŸä¸ªæ—¶é—´ç‚¹æ˜¯å¦å®Œå…¨ç›¸åŒï¼Œè¿™å¯¹äºè°ƒè¯•æˆ–éªŒè¯ç¨‹åºå½“å‰çŠ¶æ€éå¸¸æœ‰ç”¨ã€‚</li></ol><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> configVersionA</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#88C0D0;">  server</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#88C0D0;">    host</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">localhost</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#88C0D0;">    port</span><span style="color:#ECEFF4;">:</span><span style="color:#B48EAD;"> 8080</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#ECEFF4;">  },</span></span>
<span class="line"><span style="color:#88C0D0;">  database</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#88C0D0;">    user</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">admin</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#88C0D0;">    password</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">secret</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#ECEFF4;">  },</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> configVersionB</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#88C0D0;">  server</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#88C0D0;">    host</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">localhost</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#88C0D0;">    port</span><span style="color:#ECEFF4;">:</span><span style="color:#B48EAD;"> 8080</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#ECEFF4;">  },</span></span>
<span class="line"><span style="color:#88C0D0;">  database</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#88C0D0;">    user</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">admin</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#88C0D0;">    password</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">secret</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#ECEFF4;">  },</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isDeepStrictEqual</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">configVersionA</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> configVersionB</span><span style="color:#D8DEE9FF;">)) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">é…ç½®æ–‡ä»¶ A å’Œ B å®Œå…¨ç›¸åŒã€‚</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;"> else</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">é…ç½®æ–‡ä»¶æœ‰å·®å¼‚ã€‚</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é€šè¿‡ä»¥ä¸Šä¾‹å­ï¼Œä½ å¯ä»¥çœ‹å‡º <code>util.isDeepStrictEqual</code> åœ¨å¤„ç†éœ€è¦ç²¾ç¡®åŒ¹é…æ•°æ®ç»“æ„å’Œå†…å®¹çš„æƒ…å†µä¸‹ï¼Œæ˜¯ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„å·¥å…·ã€‚æ— è®ºæ˜¯åœ¨è‡ªåŠ¨åŒ–æµ‹è¯•ã€é…ç½®ç®¡ç†ï¼Œè¿˜æ˜¯åœ¨ä»»ä½•éœ€è¦æ·±åº¦æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡çš„åœºæ™¯ä¸­ï¼Œè¿™ä¸ªæ–¹æ³•éƒ½èƒ½å¸®åŠ©ä½ æœ‰æ•ˆåœ°å®Œæˆä»»åŠ¡ã€‚</p><h2 id="class-util-mimetype" tabindex="-1"><a class="header-anchor" href="#class-util-mimetype"><span><a href="https://nodejs.org/docs/latest/api/util.html#class-utilmimetype" target="_blank" rel="noopener noreferrer">Class: util.MIMEType</a></span></a></h2><p>åœ¨ Node.js v21.7.1 ä¸­ï¼Œ<code>util.MIMEType</code> æ˜¯ä¸€ä¸ªç›¸å¯¹è¾ƒæ–°çš„ç±»ï¼Œå®ƒç”¨äºè§£æå’Œæ“ä½œ MIME ç±»å‹ã€‚MIME ç±»å‹ï¼Œå…¨ç§°â€œå¤šç”¨é€”äº’è”ç½‘é‚®ä»¶æ‰©å±•â€ç±»å‹ï¼Œæ˜¯ä¸€ç§æ ‡å‡†ï¼Œç”¨æ¥è¡¨ç¤ºæ–‡æ¡£ã€æ–‡ä»¶æˆ–å­—èŠ‚æµçš„æ€§è´¨å’Œæ ¼å¼ã€‚åœ¨ Web å¼€å‘ä¸­ï¼Œç†è§£å’Œä½¿ç”¨ MIME ç±»å‹æ˜¯éå¸¸é‡è¦çš„ï¼Œå› ä¸ºå®ƒä»¬å¸®åŠ©æµè§ˆå™¨ç†è§£åº”è¯¥å¦‚ä½•å¤„ç†ä¸åŒçš„æ•°æ®ã€‚</p><h3 id="ä»€ä¹ˆæ˜¯util-mimetype" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯util-mimetype"><span>ä»€ä¹ˆæ˜¯<code>util.MIMEType</code>ï¼Ÿ</span></a></h3><p>ç®€å•æ¥è¯´ï¼Œ<code>util.MIMEType</code>ç±»æä¾›äº†ä¸€ç§æ–¹æ³•æ¥è§£æ MIME ç±»å‹å­—ç¬¦ä¸²ï¼Œå¹¶æå–å‡ºæœ‰ç”¨çš„ä¿¡æ¯ï¼Œæ¯”å¦‚ä¸»ç±»å‹ï¼ˆtypeï¼‰ã€å­ç±»å‹ï¼ˆsubtypeï¼‰ä»¥åŠå‚æ•°ï¼ˆparametersï¼‰ã€‚æœ‰äº†è¿™äº›ä¿¡æ¯ï¼Œä½ å°±å¯ä»¥æ›´ç²¾ç¡®åœ°æ§åˆ¶å’Œç†è§£æ•°æ®çš„å†…å®¹å’Œé¢„æœŸçš„å¤„ç†æ–¹å¼ã€‚</p><h3 id="å¦‚ä½•ä½¿ç”¨util-mimetype" tabindex="-1"><a class="header-anchor" href="#å¦‚ä½•ä½¿ç”¨util-mimetype"><span>å¦‚ä½•ä½¿ç”¨<code>util.MIMEType</code>ï¼Ÿ</span></a></h3><p>é¦–å…ˆï¼Œä½ éœ€è¦äº†è§£çš„æ˜¯ï¼Œä½¿ç”¨<code>util.MIMEType</code>éœ€è¦åœ¨ä½ çš„ Node.js ä»£ç ä¸­å¼•å…¥<code>util</code>æ¨¡å—ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªåŸºæœ¬ç¤ºä¾‹ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// åˆ›å»ºä¸€ä¸ªMIMETypeå®ä¾‹</span></span>
<span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> mimeType</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#D8DEE9;"> util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">MIMEType</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">text/html; charset=UTF-8</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">mimeType</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">type</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡º: text</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">mimeType</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">subtype</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡º: html</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">mimeType</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">parameters</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">get</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">charset</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡º: UTF-8</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ª<code>util.MIMEType</code>çš„å®ä¾‹ï¼Œå…¶ä»£è¡¨äº†ä¸€ä¸ªå¸¸è§çš„ MIME ç±»å‹ï¼š<code>text/html</code>ï¼Œè¿™é€šå¸¸ç”¨äºæ ‡è®° HTML æ–‡æ¡£ã€‚é€šè¿‡è®¿é—®<code>type</code>å’Œ<code>subtype</code>å±æ€§ï¼Œæˆ‘ä»¬å¯ä»¥è·å¾—ä¸»ç±»å‹å’Œå­ç±»å‹ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡<code>parameters.get()</code>æ–¹æ³•è·å–åˆ°å‚æ•°åˆ—è¡¨ä¸­ç‰¹å®šçš„å€¼ï¼Œæ¯”å¦‚<code>charset</code>ã€‚</p><h3 id="å®é™…è¿ç”¨ä¾‹å­-4" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨ä¾‹å­-4"><span>å®é™…è¿ç”¨ä¾‹å­</span></a></h3><ol><li><strong>Web æœåŠ¡å™¨è®¾ç½® Content-Type</strong>ï¼šå½“ä½ æ„å»ºä¸€ä¸ª Web æœåŠ¡å™¨æ—¶ï¼Œæ­£ç¡®è®¾ç½®å“åº”çš„<code>Content-Type</code>å¤´éƒ¨æ˜¯å¾ˆé‡è¦çš„ã€‚ä½¿ç”¨<code>util.MIMEType</code>å¯ä»¥å¸®åŠ©ä½ è§£æè¯·æ±‚ä¸­çš„å†…å®¹ç±»å‹ï¼Œå¹¶æ®æ­¤è®¾ç½®æ­£ç¡®çš„å“åº”ç±»å‹ã€‚</li></ol><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> http</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">http</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">http</span></span>
<span class="line"><span style="color:#ECEFF4;">  .</span><span style="color:#88C0D0;">createServer</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">req</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> res</span><span style="color:#ECEFF4;">)</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">    let</span><span style="color:#D8DEE9;"> contentType</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> req</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">headers</span><span style="color:#D8DEE9FF;">[</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">content-type</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">]</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">    let</span><span style="color:#D8DEE9;"> mimeType</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#D8DEE9;"> util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">MIMEType</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">contentType</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">    // å‡è®¾æˆ‘ä»¬åªå¤„ç†JSON</span></span>
<span class="line"><span style="color:#81A1C1;">    if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">mimeType</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">type</span><span style="color:#81A1C1;"> ===</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">application</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;"> &amp;&amp;</span><span style="color:#D8DEE9;"> mimeType</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">subtype</span><span style="color:#81A1C1;"> ===</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">json</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">      res</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">writeHead</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">200</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> {</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">Content-Type</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">application/json</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;"> }</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">      res</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">end</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">JSON</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">stringify</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">{</span><span style="color:#88C0D0;"> message</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">å¤„ç†JSONæ•°æ®</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;"> }</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">    }</span><span style="color:#81A1C1;"> else</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">      res</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">writeHead</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">400</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> {</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">Content-Type</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">text/plain</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;"> }</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">      res</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">end</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">ä»…æ”¯æŒapplication/jsonç±»å‹</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">    }</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#ECEFF4;">  .</span><span style="color:#88C0D0;">listen</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">3000</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li><strong>æ–‡ä»¶ä¸Šä¼ </strong>ï¼šåœ¨å¤„ç†æ–‡ä»¶ä¸Šä¼ æ—¶ï¼Œæ£€æŸ¥ä¸Šä¼ çš„æ–‡ä»¶ç±»å‹æ˜¯å¦ç¬¦åˆæˆ‘ä»¬å…è®¸çš„ç±»å‹é›†æ˜¯éå¸¸æœ‰ç”¨çš„ã€‚é€šè¿‡è§£æä¸Šä¼ æ–‡ä»¶çš„ MIME ç±»å‹ï¼Œæˆ‘ä»¬å¯ä»¥å†³å®šæ¥å—æˆ–æ‹’ç»è¯¥æ–‡ä»¶ã€‚</li></ol><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">function</span><span style="color:#88C0D0;"> checkFileType</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">file</span><span style="color:#ECEFF4;">)</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  let</span><span style="color:#D8DEE9;"> mimeType</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#D8DEE9;"> util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">MIMEType</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">file</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">type</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">  // åªå…è®¸å›¾ç‰‡ä¸Šä¼ </span></span>
<span class="line"><span style="color:#81A1C1;">  if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">mimeType</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">type</span><span style="color:#81A1C1;"> ===</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">image</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#81A1C1;">    return</span><span style="color:#81A1C1;"> true;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span><span style="color:#81A1C1;"> else</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">    return</span><span style="color:#81A1C1;"> false;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li><strong>API å“åº”</strong>ï¼šå½“ä½ æ„å»º REST API æ—¶ï¼Œç¡®ä¿ä½ çš„ API èƒ½å¤Ÿè¿”å›å®¢æˆ·ç«¯æ‰€æœŸæœ›çš„æ•°æ®æ ¼å¼æ˜¯éå¸¸é‡è¦çš„ã€‚ä¾‹å¦‚ï¼Œå®¢æˆ·ç«¯å¯èƒ½æœŸæœ›ä»¥ JSON æˆ– XML æ ¼å¼æ¥æ”¶æ•°æ®ã€‚é€šè¿‡æ£€æŸ¥<code>Accept</code>å¤´éƒ¨ä¸­çš„ MIME ç±»å‹ï¼Œä½ å¯ä»¥å†³å®šè¿”å›å“ªç§æ ¼å¼çš„å“åº”ã€‚</li></ol><p>æ€»ä¹‹ï¼Œ<code>util.MIMEType</code>ç±»æ˜¯ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„å·¥å…·ï¼Œå®ƒå¯ä»¥å¸®åŠ©ä½ åœ¨ Node.js åº”ç”¨ç¨‹åºä¸­æ›´æœ‰æ•ˆåœ°å¤„ç† MIME ç±»å‹ç›¸å…³çš„ä»»åŠ¡ã€‚é€šè¿‡ç†Ÿæ‚‰å’Œåˆ©ç”¨è¿™ä¸ªç±»ï¼Œä½ å¯ä»¥æ›´å¥½åœ°æ§åˆ¶æ•°æ®æ ¼å¼å’Œå†…å®¹ç±»å‹ï¼Œä»è€Œæé«˜ä½ çš„ Web åº”ç”¨ç¨‹åºçš„è´¨é‡å’Œç”¨æˆ·ä½“éªŒã€‚</p><h3 id="constructor-new-mimetype-input" tabindex="-1"><a class="header-anchor" href="#constructor-new-mimetype-input"><span><a href="https://nodejs.org/docs/latest/api/util.html#constructor-new-mimetypeinput" target="_blank" rel="noopener noreferrer">Constructor: new MIMEType(input)</a></span></a></h3><p>Node.js ä¸­çš„ <code>MIMEType</code> ç±»æ˜¯ç”¨æ¥è§£æå’Œæ“ä½œ MIME ç±»å‹å­—ç¬¦ä¸²çš„ã€‚MIME ç±»å‹ï¼Œå…¨ç§°ä¸ºâ€œå¤šç”¨é€”äº’è”ç½‘é‚®ä»¶æ‰©å±•ç±»å‹â€ï¼ˆMultipurpose Internet Mail Extensionsï¼‰ï¼Œå¹¿æ³›åº”ç”¨äºæ ‡è¯†æ–‡ä»¶çš„æ ¼å¼å’Œæ€§è´¨ã€‚æ¯”å¦‚ï¼Œä¸€ä¸ªå¸¸è§çš„ MIME ç±»å‹ <code>text/html</code> è¡¨ç¤º HTML æ–‡æ¡£ï¼Œè€Œ <code>image/jpeg</code> è¡¨ç¤º JPEG æ ¼å¼çš„å›¾ç‰‡ã€‚</p><p>åœ¨ Node.js v21.7.1 çš„æ–‡æ¡£ä¸­æåˆ°çš„ <code>new MIMEType(input)</code> æ„é€ å‡½æ•°ï¼Œå°±æ˜¯ç”¨æ¥åˆ›å»ºä¸€ä¸ª <code>MIMEType</code> å®ä¾‹çš„æ–¹æ³•ã€‚è¿™é‡Œçš„ <code>input</code> å‚æ•°éœ€è¦æ˜¯ä¸€ä¸ªåˆæ³•çš„ MIME ç±»å‹å­—ç¬¦ä¸²ã€‚</p><h3 id="åŸºæœ¬ä½¿ç”¨-1" tabindex="-1"><a class="header-anchor" href="#åŸºæœ¬ä½¿ç”¨-1"><span>åŸºæœ¬ä½¿ç”¨</span></a></h3><p>æƒ³è¦ä½¿ç”¨ <code>MIMEType</code>ï¼Œé¦–å…ˆç¡®ä¿ä½ çš„ Node.js ç‰ˆæœ¬æ”¯æŒå®ƒã€‚ç„¶åï¼Œå¯ä»¥æŒ‰ç…§ä¸‹é¢çš„æ­¥éª¤æ“ä½œï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#ECEFF4;"> {</span><span style="color:#D8DEE9;"> MIMEType</span><span style="color:#ECEFF4;"> }</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // å¼•å…¥ MIMEType ç±»</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> mimeType</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> MIMEType</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">text/html</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // ä½¿ç”¨æ„é€ å‡½æ•°åˆ›å»ºå®ä¾‹</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">mimeType</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">toString</span><span style="color:#D8DEE9FF;">())</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡º: text/html</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªè¡¨ç¤º HTML æ–‡æ¡£çš„ MIME ç±»å‹å®ä¾‹ï¼Œå¹¶é€šè¿‡ <code>toString()</code> æ–¹æ³•å°†å…¶è½¬æ¢å›å­—ç¬¦ä¸²å½¢å¼ã€‚</p><h3 id="å®é™…åº”ç”¨ä¸¾ä¾‹-1" tabindex="-1"><a class="header-anchor" href="#å®é™…åº”ç”¨ä¸¾ä¾‹-1"><span>å®é™…åº”ç”¨ä¸¾ä¾‹</span></a></h3><h4 id="_1-åˆ¤æ–­æ–‡ä»¶ç±»å‹" tabindex="-1"><a class="header-anchor" href="#_1-åˆ¤æ–­æ–‡ä»¶ç±»å‹"><span>1. åˆ¤æ–­æ–‡ä»¶ç±»å‹</span></a></h4><p>å‡è®¾ä½ æ­£åœ¨å¼€å‘ä¸€ä¸ª web åº”ç”¨ï¼Œéœ€è¦æ ¹æ®ä¸Šä¼ çš„æ–‡ä»¶ç±»å‹æ¥å†³å®šå¦‚ä½•å¤„ç†è¿™äº›æ–‡ä»¶ã€‚ä½¿ç”¨ <code>MIMEType</code> å¯ä»¥è®©è¿™ä¸ªä»»åŠ¡å˜å¾—ç®€å•ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#ECEFF4;"> {</span><span style="color:#D8DEE9;"> MIMEType</span><span style="color:#ECEFF4;"> }</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">function</span><span style="color:#88C0D0;"> handleFileUpload</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">file</span><span style="color:#ECEFF4;">)</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  const</span><span style="color:#D8DEE9;"> mimeType</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> MIMEType</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">file</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">mimeType</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">  if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">mimeType</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">essence</span><span style="color:#81A1C1;"> ===</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">image/jpeg</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">å¤„ç† JPEG å›¾ç‰‡</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#616E88;">    // è¿™é‡Œæ·»åŠ å¤„ç†å›¾ç‰‡çš„ä»£ç </span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span><span style="color:#81A1C1;"> else</span><span style="color:#81A1C1;"> if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">mimeType</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">essence</span><span style="color:#81A1C1;"> ===</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">text/html</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">å¤„ç† HTML æ–‡ä»¶</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#616E88;">    // æ·»åŠ å¤„ç† HTML çš„ä»£ç </span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span><span style="color:#81A1C1;"> else</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">ä¸æ”¯æŒçš„æ–‡ä»¶ç±»å‹</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å‡è®¾è¿™æ˜¯ä»å‰ç«¯ä¸Šä¼ è¿‡æ¥çš„æ–‡ä»¶ä¿¡æ¯</span></span>
<span class="line"><span style="color:#88C0D0;">handleFileUpload</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">{</span><span style="color:#88C0D0;"> mimeType</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">image/jpeg</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;"> }</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡º: å¤„ç† JPEG å›¾ç‰‡</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-è®¾ç½®-http-å“åº”çš„-content-type" tabindex="-1"><a class="header-anchor" href="#_2-è®¾ç½®-http-å“åº”çš„-content-type"><span>2. è®¾ç½® HTTP å“åº”çš„ Content-Type</span></a></h4><p>å½“ä½ çš„ Node.js åº”ç”¨éœ€è¦å“åº”ä¸åŒç±»å‹çš„å†…å®¹æ—¶ï¼Œæ­£ç¡®è®¾ç½® <code>Content-Type</code> æ˜¯å¾ˆé‡è¦çš„ã€‚è¿™æœ‰åŠ©äºæµè§ˆå™¨æˆ–å®¢æˆ·ç«¯æ­£ç¡®åœ°è§£æå’Œæ˜¾ç¤ºè¿”å›çš„æ•°æ®ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> http</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">http</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#ECEFF4;"> {</span><span style="color:#D8DEE9;"> MIMEType</span><span style="color:#ECEFF4;"> }</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">http</span></span>
<span class="line"><span style="color:#ECEFF4;">  .</span><span style="color:#88C0D0;">createServer</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">req</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> res</span><span style="color:#ECEFF4;">)</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">    if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">req</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">url</span><span style="color:#81A1C1;"> ===</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">/image</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#81A1C1;">      const</span><span style="color:#D8DEE9;"> mimeType</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> MIMEType</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">image/png</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">      res</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">setHeader</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Content-Type</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> mimeType</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">toString</span><span style="color:#D8DEE9FF;">())</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">      res</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">end</span><span style="color:#D8DEE9FF;">(</span><span style="color:#616E88;">/* è¿™é‡Œæ˜¯å›¾ç‰‡æ•°æ® */</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">    }</span><span style="color:#81A1C1;"> else</span><span style="color:#81A1C1;"> if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">req</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">url</span><span style="color:#81A1C1;"> ===</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">/text</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#81A1C1;">      const</span><span style="color:#D8DEE9;"> mimeType</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> MIMEType</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">text/plain</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">      res</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">setHeader</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Content-Type</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> mimeType</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">toString</span><span style="color:#D8DEE9FF;">())</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">      res</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">end</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Hello, World!</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">    }</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#ECEFF4;">  .</span><span style="color:#88C0D0;">listen</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">8080</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">æœåŠ¡å™¨è¿è¡Œåœ¨ http://localhost:8080/</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæ ¹æ®è¯·æ±‚çš„ URLï¼ŒæœåŠ¡å™¨ä¼šè¿”å›ä¸åŒç±»å‹çš„å“åº”ã€‚é€šè¿‡ <code>MIMEType</code> ç±»ï¼Œæˆ‘ä»¬èƒ½è½»æ¾æ„å»ºå‡ºæ­£ç¡®çš„ <code>Content-Type</code> å¤´éƒ¨ï¼Œå¹¶ç¡®ä¿å®¢æˆ·ç«¯èƒ½ä»¥é€‚å½“çš„æ–¹å¼å¤„ç†æ”¶åˆ°çš„æ•°æ®ã€‚</p><p>é€šè¿‡ä¸Šè¿°ä¾‹å­ï¼Œä½ å¯ä»¥çœ‹åˆ° <code>MIMEType</code> çš„å®ç”¨æ€§å’Œæ–¹ä¾¿ä¹‹å¤„ã€‚åœ¨å¤„ç†æ–‡ä»¶ç±»å‹ã€ç½‘ç»œé€šä¿¡ç­‰åœºæ™¯ä¸­ï¼Œå®ƒéƒ½èƒ½å¤§æ”¾å¼‚å½©ã€‚</p><h3 id="mime-type" tabindex="-1"><a class="header-anchor" href="#mime-type"><span><a href="https://nodejs.org/docs/latest/api/util.html#mimetype" target="_blank" rel="noopener noreferrer">mime.type</a></span></a></h3><p>Node.js çš„ <code>mime.type</code> å¹¶ä¸æ˜¯ç›´æ¥ä½äº Node.js v21.7.1 å®˜æ–¹æ–‡æ¡£ä¸­çš„ä¸€ä¸ªç‰¹æ€§æˆ– APIã€‚çœ‹èµ·æ¥ä½ å¯èƒ½æ˜¯æŒ‡åœ¨å¤„ç† MIME ç±»å‹æ—¶ä½¿ç”¨çš„åŠŸèƒ½ï¼Œæˆ–è€…æ˜¯ä¸ä¹‹ç›¸å…³çš„åº“ã€‚è®©æˆ‘å…ˆè§£é‡Šä¸€ä¸‹ MIME ç±»å‹å’Œ Node.js ä¸­å¦‚ä½•å¤„ç†å®ƒä»¬ï¼Œè¿™æ ·å¯ä»¥å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£ã€‚</p><h3 id="ä»€ä¹ˆæ˜¯-mime-ç±»å‹" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯-mime-ç±»å‹"><span>ä»€ä¹ˆæ˜¯ MIME ç±»å‹ï¼Ÿ</span></a></h3><p>MIME ç±»å‹ï¼ˆå¤šç”¨é€”äº’è”ç½‘é‚®ä»¶æ‰©å±•ç±»å‹ï¼‰æ˜¯ä¸€ç§æ ‡å‡†ï¼Œç”¨äºè¡¨ç¤ºæ–‡æ¡£ã€æ–‡ä»¶æˆ–å­—èŠ‚æµçš„æ€§è´¨å’Œæ ¼å¼ã€‚ä¾‹å¦‚ï¼Œåœ¨ Web å¼€å‘ä¸­ï¼Œå½“æµè§ˆå™¨è¯·æ±‚ä¸€ä¸ªèµ„æºæ—¶ï¼ŒæœåŠ¡å™¨ä¼šé€šè¿‡ MIME ç±»å‹å‘Šè¯‰æµè§ˆå™¨èµ„æºçš„ç±»å‹ï¼Œæ¯”å¦‚æ˜¯å¦æ˜¯ HTML æ–‡æ¡£ã€CSS æ–‡ä»¶ã€JavaScript æ–‡ä»¶ã€å›¾åƒæ–‡ä»¶ç­‰ã€‚è¿™äº› MIME ç±»å‹é€šå¸¸å½¢å¼ä¸º <code>type/subtype</code>ï¼Œä¾‹å¦‚ï¼š</p><ul><li><code>text/html</code> è¡¨ç¤º HTML æ–‡æ¡£</li><li><code>text/css</code> è¡¨ç¤º CSS æ–‡ä»¶</li><li><code>application/javascript</code> è¡¨ç¤º JavaScript æ–‡ä»¶</li><li><code>image/png</code> è¡¨ç¤º PNG å›¾åƒ</li></ul><h3 id="åœ¨-node-js-ä¸­å¤„ç†-mime-ç±»å‹" tabindex="-1"><a class="header-anchor" href="#åœ¨-node-js-ä¸­å¤„ç†-mime-ç±»å‹"><span>åœ¨ Node.js ä¸­å¤„ç† MIME ç±»å‹</span></a></h3><p>åœ¨ Node.js ä¸­ï¼Œå¤„ç† MIME ç±»å‹é€šå¸¸æ˜¯æŒ‡è¯†åˆ«æˆ–è®¾ç½®ç‰¹å®šæ–‡ä»¶æˆ–æ•°æ®æµçš„æ­£ç¡® MIME ç±»å‹ã€‚è™½ç„¶ Node.js æ ¸å¿ƒ API è‡ªèº«ä¸ç›´æ¥æä¾›åä¸º <code>mime.type</code> çš„åŠŸèƒ½ï¼Œä½†ä½ å¯ä»¥é€šè¿‡ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“æ¥ç®¡ç†å’Œæ“ä½œ MIME ç±»å‹ã€‚æœ€æµè¡Œçš„åº“ä¹‹ä¸€æ˜¯ <code>mime-types</code>ã€‚</p><h4 id="å®‰è£…-mime-types-åº“" tabindex="-1"><a class="header-anchor" href="#å®‰è£…-mime-types-åº“"><span>å®‰è£… mime-types åº“</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#88C0D0;">npm</span><span style="color:#A3BE8C;"> install</span><span style="color:#A3BE8C;"> mime-types</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="ä½¿ç”¨ä¾‹å­" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨ä¾‹å­"><span>ä½¿ç”¨ä¾‹å­</span></a></h4><ol><li><strong>æŸ¥æ‰¾æ–‡ä»¶çš„ MIME ç±»å‹</strong></li></ol><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> mime</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">mime-types</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// è·å– CSS æ–‡ä»¶çš„ MIME ç±»å‹</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> cssMimeType</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> mime</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">lookup</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">style.css</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">cssMimeType</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡º: text/css</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// è·å– PNG å›¾åƒçš„ MIME ç±»å‹</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> pngMimeType</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> mime</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">lookup</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">image.png</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">pngMimeType</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡º: image/png</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li><strong>è·å– MIME ç±»å‹çš„æ‰©å±•å</strong></li></ol><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> mime</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">mime-types</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// è·å– MIME ç±»å‹ text/html å¯¹åº”çš„æ‰©å±•å</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> htmlExtension</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> mime</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">extension</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">text/html</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">htmlExtension</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡º: html</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// è·å– MIME ç±»å‹ application/javascript å¯¹åº”çš„æ‰©å±•å</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> jsExtension</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> mime</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">extension</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">application/javascript</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">jsExtension</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡º: js</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™äº›åŠŸèƒ½å¯¹äºå¼€å‘ Web æœåŠ¡å™¨æˆ–éœ€è¦å¤„ç†ä¸åŒç±»å‹æ–‡ä»¶çš„åº”ç”¨ç¨‹åºå°¤å…¶æœ‰ç”¨ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœä½ æ­£åœ¨ç¼–å†™ä¸€ä¸ªé™æ€æ–‡ä»¶æœåŠ¡å™¨ï¼Œä½ éœ€è¦æ ¹æ®è¯·æ±‚çš„æ–‡ä»¶ç±»å‹è®¾ç½®æ­£ç¡®çš„ <code>Content-Type</code> å“åº”å¤´ã€‚é€šè¿‡ä½¿ç”¨ <code>mime-types</code> åº“ï¼Œä½ å¯ä»¥è½»æ¾åœ°æ ¹æ®æ–‡ä»¶æ‰©å±•åæŸ¥æ‰¾æ­£ç¡®çš„ MIME ç±»å‹ï¼Œå¹¶å°†å…¶åŒ…å«åœ¨å“åº”ä¸­ã€‚</p><p>æ€»ç»“ä¸€ä¸‹ï¼Œè™½ç„¶ Node.js çš„å®˜æ–¹æ–‡æ¡£ä¸­æ²¡æœ‰ç›´æ¥æåˆ° <code>mime.type</code>ï¼Œä½†é€šè¿‡ä½¿ç”¨è¯¸å¦‚ <code>mime-types</code> è¿™æ ·çš„ç¬¬ä¸‰æ–¹åº“ï¼Œæˆ‘ä»¬å¯ä»¥æ–¹ä¾¿åœ°åœ¨ Node.js åº”ç”¨ç¨‹åºä¸­å¤„ç†å’Œåˆ©ç”¨ MIME ç±»å‹ã€‚</p><h3 id="mime-subtype" tabindex="-1"><a class="header-anchor" href="#mime-subtype"><span><a href="https://nodejs.org/docs/latest/api/util.html#mimesubtype" target="_blank" rel="noopener noreferrer">mime.subtype</a></span></a></h3><p>Node.js v21.7.1 ä¸­çš„ <code>mime.subtype</code> æ–¹æ³•æ˜¯ä¸€ä¸ªå·¥å…·ï¼Œå®ƒå¸®åŠ©ä½ å¤„ç† MIME ç±»å‹ã€‚MIME ç±»å‹ï¼Œå…¨ç§°ä¸ºâ€œMultipurpose Internet Mail Extensionsâ€ç±»å‹ï¼Œæ˜¯ä¸€ç§æ ‡å‡†ï¼Œç”¨æ¥è¡¨ç¤ºæ–‡æ¡£ã€æ–‡ä»¶æˆ–å­—èŠ‚æµçš„æ€§è´¨å’Œæ ¼å¼ã€‚ç®€å•åœ°è¯´ï¼ŒMIME ç±»å‹å°±åƒæ˜¯æ–‡ä»¶çš„èº«ä»½è¯ï¼Œå‘Šè¯‰è®¡ç®—æœºæˆ–è€…äº’è”ç½‘ä¸Šçš„åº”ç”¨è¿™ä¸ªæ–‡ä»¶æ˜¯ä»€ä¹ˆç±»å‹çš„ï¼Œæ¯”å¦‚å®ƒæ˜¯ä¸€ä¸ª HTML æ–‡æ¡£ã€ä¸€ä¸ª JPEG å›¾ç‰‡è¿˜æ˜¯ä¸€ä¸ª PDF æ–‡æ¡£ç­‰ã€‚</p><p>åœ¨ Node.js ä¸­ï¼Œ<code>mime.subtype()</code> æ–¹æ³•ç”¨äºä» MIME ç±»å‹å­—ç¬¦ä¸²ä¸­æå–å­ç±»å‹ã€‚MIME ç±»å‹é€šå¸¸ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼šä¸»ç±»å‹å’Œå­ç±»å‹ï¼Œå®ƒä»¬é€šè¿‡æ–œæ ï¼ˆ<code>/</code>ï¼‰åˆ†éš”ã€‚ä¾‹å¦‚ï¼Œåœ¨ MIME ç±»å‹<code>image/jpeg</code>ä¸­ï¼Œ<code>image</code>æ˜¯ä¸»ç±»å‹ï¼Œ<code>jpeg</code>æ˜¯å­ç±»å‹ã€‚</p><h3 id="è¯¦è§£-mime-subtype" tabindex="-1"><a class="header-anchor" href="#è¯¦è§£-mime-subtype"><span>è¯¦è§£ <code>mime.subtype()</code></span></a></h3><p><code>mime.subtype()</code> æ–¹æ³•æ¥æ”¶ä¸€ä¸ª MIME ç±»å‹å­—ç¬¦ä¸²ä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›è¯¥ MIME ç±»å‹çš„å­ç±»å‹éƒ¨åˆ†ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ ä¼ å…¥<code>&quot;text/html&quot;</code>ä½œä¸ºå‚æ•°ï¼Œè¿™ä¸ªæ–¹æ³•å°†ä¼šè¿”å›<code>&quot;html&quot;</code>ï¼Œå› ä¸º<code>&quot;html&quot;</code>æ˜¯<code>&quot;text/html&quot;</code>ä¸­çš„å­ç±»å‹ã€‚</p><h3 id="ä½¿ç”¨åœºæ™¯ä¸¾ä¾‹" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨åœºæ™¯ä¸¾ä¾‹"><span>ä½¿ç”¨åœºæ™¯ä¸¾ä¾‹</span></a></h3><p><strong>1. æ–‡ä»¶ä¸Šä¼ æ ¡éªŒ</strong></p><p>å‡è®¾ä½ æ­£åœ¨å¼€å‘ä¸€ä¸ª Web åº”ç”¨ï¼Œå…è®¸ç”¨æˆ·ä¸Šä¼ å›¾ç‰‡ï¼Œä½†ä½ åªæƒ³æ”¯æŒ JPEG å’Œ PNG æ ¼å¼çš„å›¾ç‰‡ã€‚å½“ç”¨æˆ·å°è¯•ä¸Šä¼ æ–‡ä»¶æ—¶ï¼Œä½ å¯ä»¥ä½¿ç”¨<code>mime.subtype()</code>æ–¹æ³•æ¥æ£€æŸ¥ä¸Šä¼ æ–‡ä»¶çš„ MIME ç±»å‹æ˜¯å¦ä¸º<code>&quot;image/jpeg&quot;</code>æˆ–<code>&quot;image/png&quot;</code>ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> uploadedFileType</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">image/jpeg</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // å‡è®¾è¿™æ˜¯ä¸Šä¼ æ–‡ä»¶çš„MIMEç±»å‹</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> subtype</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> mime</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">subtype</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">uploadedFileType</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">subtype</span><span style="color:#81A1C1;"> ===</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">jpeg</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;"> ||</span><span style="color:#D8DEE9;"> subtype</span><span style="color:#81A1C1;"> ===</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">png</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">æ–‡ä»¶æ ¼å¼æ”¯æŒï¼Œå¯ä»¥ä¸Šä¼ ã€‚</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;"> else</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">ä¸æ”¯æŒçš„æ–‡ä»¶æ ¼å¼ã€‚</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>2. å†…å®¹åå•†</strong></p><p>åœ¨ Web æœåŠ¡å™¨å¤„ç† HTTP è¯·æ±‚æ—¶ï¼ŒæœåŠ¡å™¨éœ€è¦å†³å®šä»¥ä½•ç§æ ¼å¼è¿”å›å†…å®¹ç»™å®¢æˆ·ç«¯ï¼ˆä¾‹å¦‚ï¼ŒåŒä¸€æ•°æ®å¯ä»¥è¿”å› JSON æ ¼å¼æˆ–è€… XML æ ¼å¼ï¼‰ã€‚æœåŠ¡å™¨å¯ä»¥æ ¹æ®è¯·æ±‚å¤´<code>Accept</code>å­—æ®µä¸­çš„ MIME ç±»å‹æ¥å†³å®šã€‚ä½¿ç”¨<code>mime.subtype()</code>æ–¹æ³•ï¼ŒæœåŠ¡å™¨èƒ½å¤Ÿæ›´å®¹æ˜“åœ°å¤„ç†å’Œå“åº”ä¸åŒçš„ MIME ç±»å‹è¦æ±‚ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> acceptHeader</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">application/json</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // å‡è®¾è¿™æ˜¯HTTPè¯·æ±‚å¤´ä¸­çš„Acceptå­—æ®µå€¼</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> preferredFormat</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> mime</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">subtype</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">acceptHeader</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">preferredFormat</span><span style="color:#81A1C1;"> ===</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">json</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#616E88;">  // è¿”å›JSONæ ¼å¼çš„å“åº”</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;"> else</span><span style="color:#81A1C1;"> if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">preferredFormat</span><span style="color:#81A1C1;"> ===</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">xml</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#616E88;">  // è¿”å›XMLæ ¼å¼çš„å“åº”</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;"> else</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#616E88;">  // è¿”å›é»˜è®¤æˆ–ä¸æ”¯æŒçš„å“åº”æ ¼å¼</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ€»ä¹‹ï¼Œ<code>mime.subtype()</code>æ–¹æ³•åœ¨å¤„ç†åŸºäº MIME ç±»å‹çš„é€»è¾‘æ—¶éå¸¸æœ‰ç”¨ï¼Œæ— è®ºæ˜¯è¿›è¡Œæ–‡ä»¶æ ¼å¼æ ¡éªŒã€å†…å®¹åå•†è¿˜æ˜¯å…¶ä»–éœ€è¦åŒºåˆ†ä¸åŒç±»å‹æœåŠ¡çš„åœºæ™¯ä¸­ã€‚</p><h3 id="mime-essence" tabindex="-1"><a class="header-anchor" href="#mime-essence"><span><a href="https://nodejs.org/docs/latest/api/util.html#mimeessence" target="_blank" rel="noopener noreferrer">mime.essence</a></span></a></h3><p>åœ¨è§£é‡Š Node.js v21.7.1 ä¸­çš„ <code>mime.essence()</code> ä¹‹å‰ï¼Œè®©æˆ‘ä»¬å…ˆäº†è§£ä¸€ä¸‹ MIME ç±»å‹å’Œå®ƒåœ¨ Web å¼€å‘ä¸­çš„ä½œç”¨ã€‚</p><p><strong>MIME ç±»å‹</strong>æ˜¯ä¸€ç§æ ‡å‡†ï¼Œç”¨äºæŒ‡ç¤ºæ–‡æ¡£ã€æ–‡ä»¶æˆ–å­—èŠ‚æµçš„æ€§è´¨å’Œæ ¼å¼ã€‚å®ƒåœ¨äº’è”ç½‘ä¸Šä¼ è¾“æ•°æ®æ—¶æ‰®æ¼”ç€é‡è¦è§’è‰²ï¼Œå‘Šè¯‰æµè§ˆå™¨æˆ–æ¥æ”¶åº”ç”¨å¦‚ä½•å¤„ç†ä¼ å…¥çš„æ•°æ®ã€‚ä¾‹å¦‚ï¼Œå½“ä½ è®¿é—®ä¸€ä¸ªç½‘é¡µï¼ŒæœåŠ¡å™¨ä¼šå‘é€ HTML æ–‡ä»¶ï¼Œå¹¶é€šè¿‡ HTTP å¤´ä¿¡æ¯ä¸­çš„ <code>Content-Type</code> å­—æ®µå‘Šè¯‰æµè§ˆå™¨è¿™æ˜¯ <code>text/html</code> ç±»å‹çš„å†…å®¹ï¼Œæµè§ˆå™¨å°±çŸ¥é“åº”è¯¥å¦‚ä½•è§£æè¿™ä¸ªæ–‡ä»¶äº†ã€‚</p><p><strong>Node.js ä¸­çš„ <code>mime.essence()</code> æ–¹æ³•</strong>æ˜¯åœ¨ Node.js çš„ <code>util</code> æ¨¡å—ä¸­å¼•å…¥çš„ä¸€ä¸ªåŠŸèƒ½ï¼Œå®ƒç”¨æ¥ä» MIME ç±»å‹å­—ç¬¦ä¸²ä¸­æå–â€œæœ¬è´¨â€éƒ¨åˆ†ã€‚ç®€å•æ¥è¯´ï¼Œå®ƒå¯ä»¥å¸®åŠ©ä½ ä»åŒ…å«å‚æ•°çš„ MIME ç±»å‹å­—ç¬¦ä¸²ä¸­ï¼Œåªè·å–åŸºæœ¬çš„ç±»å‹ä¿¡æ¯ï¼Œè€Œå¿½ç•¥å…¶ä»–å‚æ•°ã€‚</p><h3 id="ç¤ºä¾‹-2" tabindex="-1"><a class="header-anchor" href="#ç¤ºä¾‹-2"><span>ç¤ºä¾‹</span></a></h3><p>å‡è®¾ä½ æ­£åœ¨å¼€å‘ä¸€ä¸ª Web åº”ç”¨ï¼Œéœ€è¦å¤„ç†å„ç§ç±»å‹çš„ä¸Šä¼ æ–‡ä»¶ã€‚ä¸ºäº†æ­£ç¡®å¤„ç†è¿™äº›æ–‡ä»¶ï¼Œä½ éœ€è¦è¯†åˆ«å¹¶éªŒè¯å®ƒä»¬çš„ MIME ç±»å‹ã€‚åœ¨ä¸€äº›æƒ…å†µä¸‹ï¼ŒMIME ç±»å‹å¯èƒ½ä¼šé™„å¸¦é¢å¤–çš„å‚æ•°ï¼Œæ¯”å¦‚å­—ç¬¦é›†ç¼–ç ã€‚åœ¨è¿™äº›æƒ…å†µä¸‹ï¼Œ<code>mime.essence()</code> æ–¹æ³•å°±æ˜¾å¾—éå¸¸æœ‰ç”¨äº†ã€‚</p><h4 id="ç¤ºä¾‹ä»£ç " tabindex="-1"><a class="header-anchor" href="#ç¤ºä¾‹ä»£ç "><span>ç¤ºä¾‹ä»£ç ï¼š</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// ä¸€ä¸ªå¸¦æœ‰å‚æ•°çš„ MIME ç±»å‹å­—ç¬¦ä¸²</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> mimeTypeWithParams</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">text/html; charset=UTF-8</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// ä½¿ç”¨ mime.essence() æå– MIME ç±»å‹çš„æœ¬è´¨éƒ¨åˆ†</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> essence</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">mime</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">essence</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">mimeTypeWithParams</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">essence</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡º: text/html</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ª MIME ç±»å‹å­—ç¬¦ä¸² <code>&#39;text/html; charset=UTF-8&#39;</code>ï¼Œå®ƒè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ª HTML æ–‡æ¡£ï¼Œå¹¶ä¸”å­—ç¬¦é›†ï¼ˆcharsetï¼‰æ˜¯ UTF-8ã€‚ä½¿ç”¨ <code>mime.essence()</code> æ–¹æ³•ï¼Œæˆ‘ä»¬èƒ½å¤Ÿæå–å‡º <code>&#39;text/html&#39;</code> è¿™ä¸ªæœ€åŸºæœ¬çš„ MIME ç±»å‹ä¿¡æ¯ï¼Œå¿½ç•¥äº†åé¢çš„å‚æ•°éƒ¨åˆ†ã€‚è¿™å¯¹äºå¾ˆå¤šéœ€è¦æ ¹æ® MIME ç±»å‹è¿›è¡Œé€»è¾‘å¤„ç†çš„æƒ…å†µéå¸¸æœ‰ç”¨ã€‚</p><h3 id="å®é™…åº”ç”¨åœºæ™¯" tabindex="-1"><a class="header-anchor" href="#å®é™…åº”ç”¨åœºæ™¯"><span>å®é™…åº”ç”¨åœºæ™¯</span></a></h3><ol><li><p><strong>æ–‡ä»¶ä¸Šä¼ éªŒè¯</strong>ï¼šå½“ç”¨æˆ·å°è¯•ä¸Šä¼ æ–‡ä»¶åˆ°ä½ çš„æœåŠ¡å™¨æ—¶ï¼Œä½ å¯èƒ½éœ€è¦æ£€æŸ¥è¿™ä¸ªæ–‡ä»¶æ˜¯å¦æ˜¯è¢«å…è®¸çš„ç±»å‹ã€‚ä½¿ç”¨ <code>mime.essence()</code> å¯ä»¥å¸®åŠ©ä½ ä»…ä»…é€šè¿‡åŸºç¡€ MIME ç±»å‹æ¥åˆ¤æ–­ï¼Œè€Œä¸å—å¯èƒ½é™„åŠ çš„å‚æ•°å½±å“ã€‚</p></li><li><p><strong>å†…å®¹åå•†</strong>ï¼šåœ¨æ„å»º API æ—¶ï¼Œå®¢æˆ·ç«¯å¯èƒ½ä¼šé€šè¿‡ Accept å¤´è¯·æ±‚ç‰¹å®šç±»å‹çš„å†…å®¹ã€‚æœåŠ¡å™¨å¯ä»¥è§£æè¿™äº›å¤´ä¿¡æ¯ï¼Œå¹¶ä½¿ç”¨ <code>mime.essence()</code> ç¡®å®šæœ€ä½³çš„è¿”å›å†…å®¹ç±»å‹ã€‚</p></li><li><p><strong>å®‰å…¨æ¸…ç†</strong>ï¼šæŸäº›æƒ…å†µä¸‹ï¼Œä¸ºé˜²æ­¢åˆ©ç”¨ MIME ç±»å‹å‚æ•°æ‰§è¡Œæ”»å‡»ï¼ˆä¾‹å¦‚ï¼Œé€šè¿‡åµŒå…¥æ¶æ„ä»£ç ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨ <code>mime.essence()</code> æ¥æ¸…ç†è¿™äº›å‚æ•°ï¼Œç¡®ä¿å¤„ç†çš„ MIME ç±»å‹å°½å¯èƒ½ç®€æ´æ˜äº†ã€‚</p></li></ol><p>é€šè¿‡è¿™ç§æ–¹æ³•ï¼Œ<code>mime.essence()</code> æˆä¸ºå¤„ç†å’ŒéªŒè¯ MIME ç±»å‹æ—¶çš„ä¸€ä¸ªéå¸¸å®ç”¨çš„å·¥å…·ã€‚</p><h3 id="mime-params" tabindex="-1"><a class="header-anchor" href="#mime-params"><span><a href="https://nodejs.org/docs/latest/api/util.html#mimeparams" target="_blank" rel="noopener noreferrer">mime.params</a></span></a></h3><p>åœ¨ Node.js ä¸­ï¼Œ<code>mime.params</code>æ˜¯ä¸€ä¸ªä¸ MIME ç±»å‹ç›¸å…³çš„åŠŸèƒ½ã€‚ä¸ºäº†ç†è§£è¿™ä¸ªæ¦‚å¿µï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦æ˜ç™½ä»€ä¹ˆæ˜¯ MIME ç±»å‹ï¼Œç„¶åæˆ‘ä¼šè¯¦ç»†è§£é‡Š<code>mime.params</code>çš„ç”¨é€”å’Œä¸€äº›å®é™…çš„åº”ç”¨ç¤ºä¾‹ã€‚</p><h3 id="mime-ç±»å‹ç®€ä»‹" tabindex="-1"><a class="header-anchor" href="#mime-ç±»å‹ç®€ä»‹"><span>MIME ç±»å‹ç®€ä»‹</span></a></h3><p>MIME ç±»å‹ï¼ˆå¤šç”¨é€”äº’è”ç½‘é‚®ä»¶æ‰©å±•ç±»å‹ï¼‰ï¼Œæ˜¯ä¸€ç§æ ‡å‡†ï¼Œç”¨äºæè¿°æ–‡ä»¶çš„æ ¼å¼å’Œå†…å®¹ç±»å‹ã€‚æ¯”å¦‚ï¼Œå½“ä½ æµè§ˆç½‘é¡µæ—¶ï¼ŒæœåŠ¡å™¨ä¼šç”¨ MIME ç±»å‹æ¥å‘Šè¯‰æµè§ˆå™¨å®ƒå‘é€çš„æ•°æ®æ˜¯ä»€ä¹ˆæ ¼å¼ï¼Œä¾‹å¦‚â€œtext/htmlâ€ä»£è¡¨ HTML æ–‡æ¡£ï¼Œâ€œimage/jpegâ€ä»£è¡¨ JPEG å›¾ç‰‡ç­‰ã€‚</p><h3 id="mime-params-è§£é‡Š" tabindex="-1"><a class="header-anchor" href="#mime-params-è§£é‡Š"><span><code>mime.params</code> è§£é‡Š</span></a></h3><p>åœ¨ Node.js çš„ä¸Šä¸‹æ–‡ä¸­ï¼Œ<code>mime.params</code>æ˜¯ç”¨äºè§£æå’Œåºåˆ—åŒ– MIME ç±»å‹å‚æ•°çš„å·¥å…·ã€‚ä¸€ä¸ªå®Œæ•´çš„ MIME ç±»å‹å¯èƒ½åŒ…æ‹¬ä¸»ç±»å‹ï¼ˆtypeï¼‰ã€å­ç±»å‹ï¼ˆsubtypeï¼‰ä»¥åŠå‚æ•°ï¼ˆparamsï¼‰ã€‚å‚æ•°å¯ä»¥æä¾›å…³äºè¯¥ MIME ç±»å‹æ›´å…·ä½“çš„ä¿¡æ¯ï¼Œä¾‹å¦‚å­—ç¬¦é›†ç¼–ç ï¼ˆcharsetï¼‰æˆ–è€…è¾¹ç•Œï¼ˆboundaryï¼Œå¸¸è§äºå¤šéƒ¨åˆ† MIME ç±»å‹ï¼Œå¦‚æ–‡ä»¶ä¸Šä¼ ï¼‰ã€‚</p><h3 id="å®é™…è¿ç”¨çš„ä¾‹å­-3" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨çš„ä¾‹å­-3"><span>å®é™…è¿ç”¨çš„ä¾‹å­</span></a></h3><p>å‡è®¾æˆ‘ä»¬æ­£åœ¨å¤„ç†ä¸€ä¸ª HTTP å“åº”ï¼Œå…¶<code>Content-Type</code>å¤´éƒ¨å¯èƒ½çœ‹èµ·æ¥åƒè¿™æ ·ï¼š<code>Content-Type: text/html; charset=UTF-8</code>ã€‚è¿™é‡Œï¼Œâ€œtext/htmlâ€æ˜¯ MIME ç±»å‹ï¼Œè€Œâ€œcharset=UTF-8â€æ˜¯ä¸€ä¸ªå‚æ•°ï¼ŒæŒ‡å®šäº†æ–‡æœ¬çš„å­—ç¬¦é›†ç¼–ç ã€‚</p><p>å¦‚æœæˆ‘ä»¬ä½¿ç”¨ Node.js æ¥è§£æè¿™ä¸ªå¤´éƒ¨ï¼Œ<code>mime.params</code>çš„ä½œç”¨å°±æ˜¾ç°å‡ºæ¥äº†ï¼š</p><ol><li><p><strong>è§£æ MIME ç±»å‹å‚æ•°</strong></p><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>mime.params</code>æ¥è·å–å¹¶æ“ä½œè¿™äº›å‚æ•°å€¼ã€‚ä¾‹å¦‚ï¼Œç¡®è®¤å“åº”é‡‡ç”¨çš„ç¡®åˆ‡å­—ç¬¦é›†ç¼–ç ã€‚</p></li><li><p><strong>æ„å»º MIME ç±»å‹å­—ç¬¦ä¸²</strong></p><p>å¦‚æœæˆ‘ä»¬æ­£åœ¨åˆ›å»ºä¸€ä¸ª HTTP è¯·æ±‚æˆ–å“åº”ï¼Œå¹¶ä¸”éœ€è¦æŒ‡å®šç‰¹å®šçš„ MIME ç±»å‹å’Œå‚æ•°ï¼Œ<code>mime.params</code>å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ„å»ºç¬¦åˆæ ‡å‡†çš„ MIME ç±»å‹å­—ç¬¦ä¸²ã€‚</p></li></ol><h3 id="ç¤ºä¾‹ä»£ç -1" tabindex="-1"><a class="header-anchor" href="#ç¤ºä¾‹ä»£ç -1"><span>ç¤ºä¾‹ä»£ç </span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å‡è®¾è¿™æ˜¯ä»HTTPå¤´éƒ¨ä¸­è·å–çš„Content-Typeå€¼</span></span>
<span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> contentType</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">text/html; charset=UTF-8</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// è§£æMIMEç±»å‹å’Œå‚æ•°</span></span>
<span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> mimeType</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> contentType</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">split</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">;</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)[</span><span style="color:#B48EAD;">0</span><span style="color:#D8DEE9FF;">]</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">trim</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è·å–MIMEç±»å‹ (&#39;text/html&#39;)</span></span>
<span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> paramsString</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> contentType</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">split</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">;</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)[</span><span style="color:#B48EAD;">1</span><span style="color:#D8DEE9FF;">]</span></span>
<span class="line"><span style="color:#81A1C1;">  ?</span><span style="color:#D8DEE9;"> contentType</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">split</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">;</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)[</span><span style="color:#B48EAD;">1</span><span style="color:#D8DEE9FF;">]</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">trim</span><span style="color:#D8DEE9FF;">()</span></span>
<span class="line"><span style="color:#81A1C1;">  :</span><span style="color:#ECEFF4;"> &quot;&quot;</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è·å–å‚æ•°å­—ç¬¦ä¸² (&#39;charset=UTF-8&#39;)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// ä½¿ç”¨mime.paramsè§£æå’Œæ“ä½œå‚æ•°ï¼ˆç¤ºä¾‹è¯´æ˜ç”¨ï¼Œmime.paramsçš„å…·ä½“ç”¨æ³•ä¾èµ–äºNode.jsç‰ˆæœ¬å’ŒAPIçš„å…·ä½“å®ç°ï¼‰</span></span>
<span class="line"><span style="color:#616E88;">// å‡è®¾mimeParamsæ˜¯ä¸€ä¸ªå·¥å…·å¯¹è±¡ï¼Œèƒ½å¤Ÿè§£æå’Œåºåˆ—åŒ–å‚æ•°å­—ç¬¦ä¸²</span></span>
<span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> mimeParams</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#D8DEE9;"> util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">mimeParams</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">paramsString</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">mimeParams</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">get</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">charset</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡º: UTF-8ï¼ˆå‡è®¾getæ–¹æ³•è¿”å›æŒ‡å®šå‚æ•°çš„å€¼ï¼‰</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// æ›´æ”¹å­—ç¬¦é›†å‚æ•°</span></span>
<span class="line"><span style="color:#D8DEE9;">mimeParams</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">set</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">charset</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">ISO-8859-1</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// æ„å»ºæ–°çš„Content-Typeå¤´éƒ¨å€¼</span></span>
<span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> newContentType</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> `</span><span style="color:#81A1C1;">${</span><span style="color:#D8DEE9;">mimeType</span><span style="color:#81A1C1;">}</span><span style="color:#A3BE8C;">; </span><span style="color:#81A1C1;">${</span><span style="color:#D8DEE9;">mimeParams</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">toString</span><span style="color:#ECEFF4;">()</span><span style="color:#81A1C1;">}</span><span style="color:#ECEFF4;">`</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // toStringæ–¹æ³•å‡è®¾ç”¨äºåºåˆ—åŒ–å‚æ•°åˆ°å­—ç¬¦ä¸²</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">newContentType</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡º: text/html; charset=ISO-8859-1</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨æ„ï¼Œè¿™ä¸ªç¤ºä¾‹ä»£ç æ˜¯ä¸ºäº†è¯´æ˜<code>mime.params</code>å¦‚ä½•è¢«ä½¿ç”¨ï¼Œä½† Node.js API å¯èƒ½ä¸ä¼šç›´æ¥æä¾›<code>mimeParams</code>ç±»ä¼¼çš„å¯¹è±¡ã€‚å®é™…ä¸Šï¼ŒNode.js å®˜æ–¹æ–‡æ¡£ä¸­å¹¶æœªè¯¦ç»†ä»‹ç»<code>mime.params</code>ï¼Œè¿™æ„å‘³ç€å¯¹äºå¤„ç† MIME ç±»å‹å‚æ•°ï¼Œä½ å¯èƒ½éœ€è¦ä½¿ç”¨é¢å¤–çš„ç¬¬ä¸‰æ–¹åº“æˆ–è‡ªå·±å®ç°å‚æ•°è§£æçš„é€»è¾‘ã€‚</p><p>æ€»è€Œè¨€ä¹‹ï¼Œç†è§£å’Œä½¿ç”¨ MIME ç±»å‹åŠå…¶å‚æ•°å¯¹äºå¤„ç†ç½‘ç»œé€šä¿¡ä¸­çš„æ•°æ®æ ¼å¼éå¸¸é‡è¦ï¼Œ<code>mime.params</code>æ¦‚å¿µæ€§åœ°æŒ‡å‘äº†è¿™æ ·ä¸€ä¸ªå·¥å…·æˆ–æœºåˆ¶ï¼Œå°½ç®¡å…·ä½“å®ç°ç»†èŠ‚å¯èƒ½å›  Node.js ç‰ˆæœ¬å’Œå¯ç”¨åº“è€Œå¼‚ã€‚</p><h3 id="mime-tostring" tabindex="-1"><a class="header-anchor" href="#mime-tostring"><span><a href="https://nodejs.org/docs/latest/api/util.html#mimetostring" target="_blank" rel="noopener noreferrer">mime.toString()</a></span></a></h3><p>é¦–å…ˆï¼Œè¦ç†è§£<code>mime.toString()</code>è¿™ä¸ªæ–¹æ³•ï¼Œæˆ‘ä»¬å¾—å…ˆäº†è§£ä¸€äº›èƒŒæ™¯çŸ¥è¯†ã€‚</p><h3 id="mime-ç±»å‹ç®€ä»‹-1" tabindex="-1"><a class="header-anchor" href="#mime-ç±»å‹ç®€ä»‹-1"><span>MIME ç±»å‹ç®€ä»‹</span></a></h3><p>MIME ç±»å‹ï¼Œå…¨ç§°æ˜¯â€œå¤šç”¨é€”äº’è”ç½‘é‚®ä»¶æ‰©å±•ç±»å‹â€ï¼ˆMultipurpose Internet Mail Extensions Typeï¼‰ï¼Œæœ€åˆè®¾è®¡æ˜¯ä¸ºäº†ä½¿ç”µå­é‚®ä»¶èƒ½å¤Ÿå‘é€éæ–‡æœ¬å†…å®¹ï¼Œå¦‚å›¾ç‰‡ã€è§†é¢‘ç­‰ã€‚ç°åœ¨ï¼Œå®ƒå¹¿æ³›ç”¨äºäº’è”ç½‘ä¸Šï¼Œå¸®åŠ©æµè§ˆå™¨æˆ–å…¶ä»–ç½‘ç»œæœåŠ¡äº†è§£ä¸€ä¸ªæ–‡ä»¶çš„æœ¬è´¨å’Œç”¨é€”ã€‚ä¾‹å¦‚ï¼Œå½“æµè§ˆå™¨è¯·æ±‚ä¸€ä¸ªèµ„æºæ—¶ï¼ŒæœåŠ¡å™¨ä¼šä½¿ç”¨ MIME ç±»å‹å‘Šè¯‰æµè§ˆå™¨è¿™ä¸ªèµ„æºæ˜¯å›¾ç‰‡ã€è§†é¢‘è¿˜æ˜¯ HTML é¡µé¢ç­‰ã€‚</p><p>å¸¸è§çš„ MIME ç±»å‹åŒ…æ‹¬ï¼š</p><ul><li><code>text/html</code>ï¼šHTML æ–‡æ¡£</li><li><code>image/jpeg</code>ï¼šJPEG å›¾ç‰‡</li><li><code>application/json</code>ï¼šJSON æ•°æ®æ ¼å¼</li></ul><h3 id="node-js-ä¸­çš„-mime-ç±»å‹å¤„ç†" tabindex="-1"><a class="header-anchor" href="#node-js-ä¸­çš„-mime-ç±»å‹å¤„ç†"><span>Node.js ä¸­çš„ MIME ç±»å‹å¤„ç†</span></a></h3><p>Node.js æ˜¯ä¸€ä¸ªå¼ºå¤§çš„ JavaScript è¿è¡Œæ—¶ç¯å¢ƒï¼Œå®ƒå…è®¸ä½ åœ¨æœåŠ¡å™¨ç«¯è¿è¡Œ JavaScript ä»£ç ã€‚åœ¨ Web å¼€å‘ä¸­ï¼Œç»å¸¸éœ€è¦å¤„ç†ä¸åŒç±»å‹çš„åª’ä½“æ–‡ä»¶å’Œæ•°æ®ï¼Œè¿™æ—¶å€™å°±éœ€è¦ç”¨åˆ° MIME ç±»å‹ã€‚</p><p>åœ¨ Node.js çš„å„ä¸ªç‰ˆæœ¬ä¸­ï¼Œå®ƒå¹¶æ²¡æœ‰å†…ç½®ç›´æ¥å¤„ç† MIME ç±»å‹çš„æ–¹æ³•ï¼Œè€Œæ˜¯é€šè¿‡ä¸€äº›ç¬¬ä¸‰æ–¹åº“æ¥å®ç°ï¼Œæ¯”å¦‚<code>mime-types</code>åº“ã€‚ä½†éšç€ Node.js çš„å‘å±•ï¼Œä¸€äº›åŸºç¡€åŠŸèƒ½è¢«æ•´åˆè¿›äº†æ ¸å¿ƒæ¨¡å—ï¼Œæ¯”å¦‚<code>util</code>æ¨¡å—æä¾›äº†ä¸€ç³»åˆ—å·¥å…·å‡½æ•°ã€‚</p><h3 id="mime-tostring-æ–¹æ³•ç®€ä»‹" tabindex="-1"><a class="header-anchor" href="#mime-tostring-æ–¹æ³•ç®€ä»‹"><span><code>mime.toString()</code> æ–¹æ³•ç®€ä»‹</span></a></h3><p>æ ¹æ®ä½ çš„é—®é¢˜ï¼Œ<code>mime.toString()</code>ä¼¼ä¹æŒ‡çš„æ˜¯æŸä¸ªä¸ MIME ç±»å‹è½¬æ¢ç›¸å…³çš„å‡½æ•°ã€‚ä½†æˆªè‡³æˆ‘æ‰€çŸ¥çš„ä¿¡æ¯ï¼ˆæ­¢äº 2023 å¹´ï¼‰ï¼Œåœ¨ Node.js v21.7.1 çš„å®˜æ–¹æ–‡æ¡£ä¸­ï¼Œå¹¶æ²¡æœ‰ç›´æ¥æåŠè¿™ä¸ªç‰¹å®šçš„<code>mime.toString()</code>æ–¹æ³•ã€‚</p><p>å¯èƒ½æ˜¯æœ‰äº›è¯¯ä¼šæˆ–è€…æ··æ·†äº†ï¼Œå› ä¸ºé€šå¸¸å¤„ç† MIME ç±»å‹çš„æ–¹æ³•å¯èƒ½æ¶‰åŠåˆ°å°†æ–‡ä»¶åç¼€åè½¬æ¢ä¸º MIME ç±»å‹ï¼Œæˆ–è€…åè¿‡æ¥ï¼Œä½†è¿™äº›åŠŸèƒ½æ›´å¤šåœ°æ˜¯é€šè¿‡å¤–éƒ¨åº“å®ç°çš„ã€‚</p><h3 id="å®é™…åº”ç”¨ç¤ºä¾‹-1" tabindex="-1"><a class="header-anchor" href="#å®é™…åº”ç”¨ç¤ºä¾‹-1"><span>å®é™…åº”ç”¨ç¤ºä¾‹</span></a></h3><p>è™½ç„¶æ²¡æœ‰<code>mime.toString()</code>è¿™ä¸ªå…·ä½“çš„æ–¹æ³•ï¼Œä½†æˆ‘å¯ä»¥ç»™ä½ ä¸¾ä¸ªä¾‹å­ï¼Œè¯´æ˜å¦‚ä½•åœ¨ Node.js é¡¹ç›®ä¸­ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“æ¥å¤„ç†å’Œè½¬æ¢ MIME ç±»å‹ã€‚</p><p>å‡è®¾æˆ‘ä»¬ä½¿ç”¨<code>mime-types</code>åº“æ¥æ ¹æ®æ–‡ä»¶æ‰©å±•åè·å– MIME ç±»å‹ï¼š</p><ol><li><p>é¦–å…ˆï¼Œä½ éœ€è¦å®‰è£…<code>mime-types</code>åº“ã€‚åœ¨é¡¹ç›®ç›®å½•ä¸‹æ‰“å¼€ç»ˆç«¯ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£…ï¼š</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#88C0D0;">npm</span><span style="color:#A3BE8C;"> install</span><span style="color:#A3BE8C;"> mime-types</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>æ¥ä¸‹æ¥ï¼Œåœ¨ä½ çš„ Node.js ä»£ç ä¸­ï¼Œä½ å¯ä»¥è¿™æ ·ä½¿ç”¨<code>mime-types</code>åº“æ¥è·å–æ–‡ä»¶çš„ MIME ç±»å‹ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> mime</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">mime-types</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// è·å–æ–‡ä»¶çš„MIMEç±»å‹</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> mimeType</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> mime</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">lookup</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">example.png</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // &#39;image/png&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">mimeType</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡º: image/png</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><p>è¿™ä¸ªä¾‹å­å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨<code>mime-types</code>åº“æ ¹æ®æ–‡ä»¶æ‰©å±•åï¼ˆæ¯”å¦‚<code>.png</code>ï¼‰æ¥æŸ¥æ‰¾å¯¹åº”çš„ MIME ç±»å‹ï¼ˆåœ¨è¿™ä¸ªä¾‹å­ä¸­æ˜¯<code>image/png</code>ï¼‰ã€‚</p><p>æ€»ç»“èµ·æ¥ï¼Œè™½ç„¶ Node.js æœ¬èº«åœ¨ v21.7.1 ä¸­æ²¡æœ‰ç›´æ¥æåŠ<code>mime.toString()</code>æ–¹æ³•ï¼Œä½†å¤„ç† MIME ç±»å‹æ˜¯ Web å¼€å‘ä¸­çš„å¸¸è§éœ€æ±‚ï¼Œé€šå¸¸é€šè¿‡å¼•å…¥ç¬¬ä¸‰æ–¹åº“æ¥å®ç°ã€‚å¸Œæœ›è¿™ä¸ªè§£é‡Šæœ‰åŠ©äºä½ ç†è§£ MIME ç±»å‹ä»¥åŠå¦‚ä½•åœ¨ Node.js ä¸­å¤„ç†å®ƒä»¬ã€‚</p><h3 id="mime-tojson" tabindex="-1"><a class="header-anchor" href="#mime-tojson"><span><a href="https://nodejs.org/docs/latest/api/util.html#mimetojson" target="_blank" rel="noopener noreferrer">mime.toJSON()</a></span></a></h3><p>Node.js ä¸­çš„<code>mime.toJSON()</code>æ–¹æ³•æ˜¯ä¸ MIMEï¼ˆMultipurpose Internet Mail Extensionsï¼‰ç±»å‹ç›¸å…³çš„åŠŸèƒ½ã€‚åœ¨è®²è§£è¿™ä¸ªæ–¹æ³•ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆäº†è§£ä¸€ä¸‹ä»€ä¹ˆæ˜¯ MIME ç±»å‹ä»¥åŠå®ƒåœ¨ Web å¼€å‘ä¸­çš„è§’è‰²ã€‚</p><h3 id="ä»€ä¹ˆæ˜¯-mime-ç±»å‹-1" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯-mime-ç±»å‹-1"><span>ä»€ä¹ˆæ˜¯ MIME ç±»å‹ï¼Ÿ</span></a></h3><p>MIME ç±»å‹ï¼Œå…¨ç§°ä¸ºå¤šç”¨é€”äº’è”ç½‘é‚®ä»¶æ‰©å±•ç±»å‹ï¼Œæœ€åˆè®¾è®¡æ˜¯ä¸ºäº†ä½¿ç”µå­é‚®ä»¶èƒ½å¤Ÿå‘é€éæ–‡æœ¬å†…å®¹ï¼Œå¦‚å›¾ç‰‡ã€è§†é¢‘ç­‰ã€‚éšç€æ—¶é—´çš„å‘å±•ï¼ŒMIME ç±»å‹ç°åœ¨å¹¿æ³›åº”ç”¨äº Internet ä¸Šï¼Œç”¨æ¥æ ‡è¯†æ–‡ä»¶çš„æ ¼å¼ã€‚æ¯ç§ MIME ç±»å‹éƒ½ç”±ä¸€ä¸ªç±»å‹ï¼ˆtypeï¼‰å’Œå­ç±»å‹ï¼ˆsubtypeï¼‰ç»„æˆï¼Œä¾‹å¦‚<code>text/html</code>è¡¨ç¤º HTML æ–‡æ¡£ï¼Œ<code>image/jpeg</code>è¡¨ç¤º JPEG æ ¼å¼çš„å›¾ç‰‡ã€‚</p><h3 id="node-js-ä¸­çš„-mime-ç±»å‹å¤„ç†-1" tabindex="-1"><a class="header-anchor" href="#node-js-ä¸­çš„-mime-ç±»å‹å¤„ç†-1"><span>Node.js ä¸­çš„ mime ç±»å‹å¤„ç†</span></a></h3><p>åœ¨ Node.js ä¸­ï¼Œå¤„ç†ç½‘ç»œè¯·æ±‚æˆ–å“åº”æ—¶ï¼Œæ­£ç¡®åœ°æ ‡è¯†å’Œå¤„ç† MIME ç±»å‹æ˜¯éå¸¸é‡è¦çš„ã€‚ä¾‹å¦‚ï¼Œå½“ä½ åˆ›å»ºä¸€ä¸ª Web æœåŠ¡å™¨ï¼Œå¹¶æƒ³è¿”å›ä¸€ä¸ª HTML æ–‡ä»¶ç»™å®¢æˆ·ç«¯æ—¶ï¼Œä½ éœ€è¦åœ¨ HTTP å“åº”ä¸­è®¾ç½®æ­£ç¡®çš„<code>Content-Type</code>å¤´éƒ¨ä¸º<code>text/html</code>ã€‚ç±»ä¼¼çš„ï¼Œå¦‚æœä½ è¿”å›ä¸€ä¸ª JSON å¯¹è±¡ï¼Œé€šå¸¸è®¾ç½®<code>Content-Type</code>ä¸º<code>application/json</code>ã€‚</p><h3 id="mime-tojson-æ–¹æ³•ä»‹ç»" tabindex="-1"><a class="header-anchor" href="#mime-tojson-æ–¹æ³•ä»‹ç»"><span>mime.toJSON()æ–¹æ³•ä»‹ç»</span></a></h3><p>åœ¨ Node.js v21.7.1 ä¸­çš„<code>mime.toJSON()</code>æ–¹æ³•å¹¶ä¸æ˜¯ç›´æ¥æä¾›åœ¨ Node.js å®˜æ–¹ API ä¸­çš„ï¼Œä¹Ÿæ²¡æœ‰ç›´æ¥åä¸º<code>mime.toJSON()</code>çš„å®˜æ–¹æ–¹æ³•ã€‚å¯èƒ½å­˜åœ¨è¯¯è§£æˆ–è€…æ··æ·†ã€‚é€šå¸¸ï¼Œåœ¨ Node.js ç¯å¢ƒä¸­å¤„ç† MIME ç±»å‹ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨ä¸€äº›ç¬¬ä¸‰æ–¹åº“ï¼Œå¦‚<code>mime</code>æˆ–<code>mime-types</code>åº“ï¼Œè¿™äº›åº“å…è®¸æˆ‘ä»¬æ ¹æ®æ–‡ä»¶æ‰©å±•åè·å– MIME ç±»å‹ï¼Œæˆ–è€…æ‰§è¡Œå…¶ä»–ä¸ MIME ç›¸å…³çš„æ“ä½œã€‚</p><p>ä½†æ˜¯ï¼Œå¦‚æœè€ƒè™‘åˆ°åºåˆ—åŒ– MIME ç±»å‹æ•°æ®ä¸º JSON å­—ç¬¦ä¸²çš„åœºæ™¯ï¼Œé€šä¿—æ¥è¯´ï¼Œæ‰€è°“çš„<code>.toJSON()</code>åŠŸèƒ½ï¼Œæ„å‘³ç€å°†æŸä¸ªå¯¹è±¡æˆ–æ•°æ®ç»“æ„è½¬æ¢ä¸º JSON æ ¼å¼çš„å­—ç¬¦ä¸²ã€‚å‡è®¾æœ‰ä¸€ä¸ªåŒ…å« MIME ç±»å‹ä¿¡æ¯çš„å¯¹è±¡ï¼Œä½¿ç”¨<code>.toJSON()</code>æ–¹æ³•å¯ä»¥å°†å…¶è½¬æ¢ä¸ºä¸€ä¸ª JSON å­—ç¬¦ä¸²ï¼Œè¿™åœ¨è¿›è¡Œé…ç½®å¯¼å‡ºã€ç½‘ç»œä¼ è¾“ç­‰åœºæ™¯ä¸‹æ˜¯éå¸¸æœ‰ç”¨çš„ã€‚</p><h3 id="å®é™…åº”ç”¨ä¸¾ä¾‹-2" tabindex="-1"><a class="header-anchor" href="#å®é™…åº”ç”¨ä¸¾ä¾‹-2"><span>å®é™…åº”ç”¨ä¸¾ä¾‹</span></a></h3><h4 id="åœºæ™¯ä¸€-é…ç½®å¯¼å‡º" tabindex="-1"><a class="header-anchor" href="#åœºæ™¯ä¸€-é…ç½®å¯¼å‡º"><span>åœºæ™¯ä¸€ï¼šé…ç½®å¯¼å‡º</span></a></h4><p>å‡è®¾ä½ æ­£åœ¨å¼€å‘ä¸€ä¸ª Web åº”ç”¨ï¼Œä½ å¯èƒ½ä¼šæœ‰ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å«ä¸åŒèµ„æºå¯¹åº”çš„ MIME ç±»å‹ï¼Œç±»ä¼¼äºè¿™æ ·ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> mimeConfig</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#88C0D0;">  html</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">text/html</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#88C0D0;">  jpg</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">image/jpeg</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#88C0D0;">  json</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">application/json</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœä½ æƒ³å°†è¿™ä¸ªé…ç½®ä¿å­˜åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­æˆ–é€šè¿‡ç½‘ç»œå…±äº«ï¼Œä½ å¯ä»¥å°†å®ƒè½¬æ¢ä¸º JSON å­—ç¬¦ä¸²ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> jsonConfig</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> JSON</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">stringify</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">mimeConfig</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">jsonConfig</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#616E88;">// è¾“å‡º: {&quot;html&quot;:&quot;text/html&quot;,&quot;jpg&quot;:&quot;image/jpeg&quot;,&quot;json&quot;:&quot;application/json&quot;}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="åœºæ™¯äºŒ-ç½‘ç»œä¼ è¾“" tabindex="-1"><a class="header-anchor" href="#åœºæ™¯äºŒ-ç½‘ç»œä¼ è¾“"><span>åœºæ™¯äºŒï¼šç½‘ç»œä¼ è¾“</span></a></h4><p>å½“ä½ çš„ Node.js åç«¯éœ€è¦å‘å‰ç«¯å‘é€æŸäº›é…ç½®ä¿¡æ¯æ—¶ï¼Œä¾‹å¦‚å¯æ”¯æŒçš„æ–‡ä»¶ä¸Šä¼ æ ¼å¼ï¼ŒåŒæ ·å¯ä»¥åˆ©ç”¨ JSON åºåˆ—åŒ–ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> supportedFormats</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#88C0D0;">  images</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> [</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">image/jpeg</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">image/png</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">]</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#88C0D0;">  documents</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> [</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">application/pdf</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">application/msword</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">]</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> formatsJson</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> JSON</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">stringify</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">supportedFormats</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#616E88;">// è¿™ä¸ªformatsJsonå¯ä»¥é€šè¿‡HTTPå“åº”å‘é€ç»™å®¢æˆ·ç«¯</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç»¼ä¸Šï¼Œè™½ç„¶ Node.js å®˜æ–¹ API æ–‡æ¡£ä¸­æ²¡æœ‰ç›´æ¥æåˆ°<code>mime.toJSON()</code>æ–¹æ³•ï¼Œä½†å¤„ç† MIME ç±»å‹å¹¶åˆ©ç”¨ JSON è¿›è¡Œæ•°æ®åºåˆ—åŒ–æ˜¯ Web å¼€å‘ä¸­å¸¸è§çš„éœ€æ±‚ã€‚å¸Œæœ›è¿™äº›ä¿¡æ¯å¯¹ä½ ç†è§£æœ‰æ‰€å¸®åŠ©ã€‚</p><h2 id="class-util-mimeparams" tabindex="-1"><a class="header-anchor" href="#class-util-mimeparams"><span><a href="https://nodejs.org/docs/latest/api/util.html#class-utilmimeparams" target="_blank" rel="noopener noreferrer">Class: util.MIMEParams</a></span></a></h2><p>åœ¨ Node.js v21.7.1 ç‰ˆæœ¬ä¸­ï¼Œä»‹ç»äº†ä¸€ä¸ªåä¸º<code>util.MIMEParams</code>çš„ç±»ã€‚è¿™ä¸ªç±»æ˜¯ç”¨æ¥è§£æå’Œæ“ä½œ MIME ç±»å‹ï¼ˆMultipurpose Internet Mail Extensionsï¼Œå¤šç”¨é€”äº’è”ç½‘é‚®ä»¶æ‰©å±•ç±»å‹ï¼‰å‚æ•°çš„ã€‚MIME ç±»å‹é€šå¸¸ç”¨äºæŒ‡å®šæ–‡æ¡£ã€æ–‡ä»¶æˆ–æ•°æ®çš„æ ¼å¼ä»¥ä¾¿æ­£ç¡®å¤„ç†å®ƒä»¬ï¼Œä½ å¯èƒ½æœ€å¸¸è§çš„å°±æ˜¯åœ¨ HTTP å†…å®¹ç±»å‹ï¼ˆContent-Typeï¼‰ä¸­é‡åˆ°å®ƒä»¬ã€‚</p><h3 id="ç†è§£-mime-ç±»å‹" tabindex="-1"><a class="header-anchor" href="#ç†è§£-mime-ç±»å‹"><span>ç†è§£ MIME ç±»å‹</span></a></h3><p>åœ¨æ·±å…¥äº†è§£<code>util.MIMEParams</code>ä¹‹å‰ï¼Œè®©æˆ‘ä»¬å…ˆç®€å•äº†è§£ä¸€ä¸‹ MIME ç±»å‹ã€‚é€šå¸¸ï¼Œå½“ä½ æµè§ˆç½‘é¡µã€ä¸‹è½½æ–‡ä»¶æˆ–è€…é€šè¿‡ç”µå­é‚®ä»¶æ¥æ”¶é™„ä»¶æ—¶ï¼Œä½ çš„è®¾å¤‡éœ€è¦çŸ¥é“å¦‚ä½•å¤„ç†è¿™äº›æ•°æ®ã€‚ä¸ºæ­¤ï¼Œæ¯ç§æ•°æ®éƒ½æœ‰ä¸€ä¸ªä¸ä¹‹å¯¹åº”çš„ MIME ç±»å‹ï¼Œå‘Šè¯‰æ¥æ”¶ç«¯åº”è¯¥å¦‚ä½•è§£æå’Œæ˜¾ç¤ºå†…å®¹ã€‚ä¾‹å¦‚ï¼š</p><ul><li>æ–‡æœ¬æ–‡ä»¶ä½¿ç”¨<code>text/plain</code>ï¼›</li><li>HTML æ–‡æ¡£ä½¿ç”¨<code>text/html</code>ï¼›</li><li>JPEG å›¾åƒä½¿ç”¨<code>image/jpeg</code>ç­‰ã€‚</li></ul><h3 id="mime-ç±»å‹ä¸­çš„å‚æ•°" tabindex="-1"><a class="header-anchor" href="#mime-ç±»å‹ä¸­çš„å‚æ•°"><span>MIME ç±»å‹ä¸­çš„å‚æ•°</span></a></h3><p>æŸäº› MIME ç±»å‹è¿˜åŒ…æ‹¬å‚æ•°ï¼Œç”¨æ¥æä¾›é¢å¤–çš„ä¿¡æ¯ï¼Œæ¯”å¦‚å­—ç¬¦é›†ç¼–ç ã€‚ä¾‹å¦‚ï¼Œ<code>text/html; charset=utf-8</code>è¡¨ç¤ºå†…å®¹æ˜¯ HTML æ–‡æ¡£ï¼Œå¹¶ä¸”ä½¿ç”¨ UTF-8 å­—ç¬¦é›†ç¼–ç ã€‚</p><h3 id="util-mimeparams-ç±»" tabindex="-1"><a class="header-anchor" href="#util-mimeparams-ç±»"><span>util.MIMEParams ç±»</span></a></h3><p><code>util.MIMEParams</code>ç±»ä¸“é—¨ç”¨æ¥å¤„ç†è¿™äº›å‚æ•°ä¿¡æ¯ã€‚å®ƒæä¾›äº†ä¸€ç§æ–¹å¼æ¥è§£æã€æ·»åŠ ã€åˆ é™¤å’Œä¿®æ”¹ MIME ç±»å‹å‚æ•°ã€‚</p><h4 id="å®ä¾‹åŒ–" tabindex="-1"><a class="header-anchor" href="#å®ä¾‹åŒ–"><span>å®ä¾‹åŒ–</span></a></h4><p>é¦–å…ˆï¼Œä½ å¯ä»¥åˆ›å»ºä¸€ä¸ª<code>util.MIMEParams</code>å®ä¾‹æ¥å¼€å§‹æ“ä½œ MIME ç±»å‹å‚æ•°ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> params</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#D8DEE9;"> util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">MIMEParams</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">text/html; charset=utf-8</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="æ·»åŠ å’Œè·å–å‚æ•°" tabindex="-1"><a class="header-anchor" href="#æ·»åŠ å’Œè·å–å‚æ•°"><span>æ·»åŠ å’Œè·å–å‚æ•°</span></a></h4><p>ç„¶åï¼Œä½ å¯ä»¥ç”¨è¿™ä¸ªå®ä¾‹æ¥ç®¡ç†ï¼ˆæ·»åŠ ã€æŸ¥è¯¢ç­‰ï¼‰å‚æ•°ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#616E88;">// æ·»åŠ å‚æ•°</span></span>
<span class="line"><span style="color:#D8DEE9;">params</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">set</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">another-param</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">value</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// è·å–å‚æ•°</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">params</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">get</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">charset</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡º: utf-8</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// æ£€æŸ¥æ˜¯å¦åŒ…å«æŸå‚æ•°</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">params</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">has</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">charset</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡º: true</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="åˆ é™¤å‚æ•°" tabindex="-1"><a class="header-anchor" href="#åˆ é™¤å‚æ•°"><span>åˆ é™¤å‚æ•°</span></a></h4><p>ä¹Ÿå¯ä»¥åˆ é™¤å·²æœ‰çš„å‚æ•°ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#D8DEE9;">params</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">delete</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">charset</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">params</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">has</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">charset</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡º: false (å› ä¸ºå·²ç»è¢«åˆ é™¤)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="è¿­ä»£å‚æ•°" tabindex="-1"><a class="header-anchor" href="#è¿­ä»£å‚æ•°"><span>è¿­ä»£å‚æ•°</span></a></h4><p><code>util.MIMEParams</code>æä¾›äº†è¿­ä»£å™¨æ¥å£ï¼Œè¿™æ„å‘³ç€ä½ å¯ä»¥å¾ˆæ–¹ä¾¿åœ°éå†æ‰€æœ‰å‚æ•°ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">for</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#81A1C1;">const</span><span style="color:#ECEFF4;"> [</span><span style="color:#D8DEE9;">name</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> value</span><span style="color:#ECEFF4;">]</span><span style="color:#81A1C1;"> of</span><span style="color:#D8DEE9;"> params</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">`</span><span style="color:#81A1C1;">${</span><span style="color:#D8DEE9;">name</span><span style="color:#81A1C1;">}</span><span style="color:#A3BE8C;">: </span><span style="color:#81A1C1;">${</span><span style="color:#D8DEE9;">value</span><span style="color:#81A1C1;">}</span><span style="color:#ECEFF4;">`</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="å®é™…åº”ç”¨ç¤ºä¾‹-2" tabindex="-1"><a class="header-anchor" href="#å®é™…åº”ç”¨ç¤ºä¾‹-2"><span>å®é™…åº”ç”¨ç¤ºä¾‹</span></a></h3><p>å‡è®¾ä½ æ­£åœ¨å¼€å‘ä¸€ä¸ª Web æœåŠ¡å™¨ï¼Œéœ€è¦æ ¹æ®ä¸åŒæ–‡ä»¶ç±»å‹è®¾ç½®æ­£ç¡®çš„ Content-Type å¤´éƒ¨ã€‚ä½¿ç”¨<code>util.MIMEParams</code>å¯ä»¥å¸®åŠ©ä½ è½»æ¾ç®¡ç†å’Œæ“ä½œè¿™äº› MIME ç±»å‹çš„å‚æ•°ã€‚</p><p>ä¾‹å¦‚ï¼Œä½ å¯èƒ½éœ€è¦æ ¹æ®ç”¨æˆ·è¯·æ±‚çš„èµ„æºåŠ¨æ€è°ƒæ•´å­—ç¬¦ç¼–ç ï¼Œæˆ–è€…æ ¹æ®æ–‡ä»¶å†…å®¹æ·»åŠ é€‚å½“çš„ç‰ˆæœ¬æ ‡è®°ï¼ˆå¦‚æœè¯¥ MIME ç±»å‹æ”¯æŒï¼‰ã€‚ä½¿ç”¨<code>util.MIMEParams</code>èƒ½ä½¿è¿™ä¸€è¿‡ç¨‹å˜å¾—æ—¢æ¸…æ™°åˆæ˜“äºç®¡ç†ã€‚</p><p>æ€»ç»“èµ·æ¥ï¼Œ<code>util.MIMEParams</code>ç±»æ˜¯ Node.js æä¾›çš„ä¸€ä¸ªéå¸¸å®ç”¨çš„å·¥å…·ï¼Œç‰¹åˆ«æ˜¯å½“ä½ éœ€è¦å¤„ç†å¤æ‚çš„ MIME ç±»å‹å‚æ•°æ—¶ã€‚é€šè¿‡æœ‰æ•ˆåœ°ç®¡ç†è¿™äº›å‚æ•°ï¼Œä½ å¯ä»¥ç¡®ä¿ä½ çš„ Web æœåŠ¡èƒ½æ­£ç¡®åœ°äº¤ä»˜å†…å®¹ï¼Œä»è€Œä¸ºç”¨æˆ·æä¾›æ›´æµç•…çš„ä½“éªŒã€‚</p><h3 id="constructor-new-mimeparams" tabindex="-1"><a class="header-anchor" href="#constructor-new-mimeparams"><span><a href="https://nodejs.org/docs/latest/api/util.html#constructor-new-mimeparams" target="_blank" rel="noopener noreferrer">Constructor: new MIMEParams()</a></span></a></h3><p>Node.js ä¸­çš„ <code>MIMEParams</code> å¯¹è±¡æ˜¯ç”¨æ¥å¤„ç† MIME ç±»å‹å‚æ•°çš„ä¸€ç§å·¥å…·ã€‚åœ¨è§£é‡Šè¿™ä¸ªæ„é€ å‡½æ•°ä¹‹å‰ï¼Œè®©æˆ‘ä»¬ç®€å•äº†è§£ä¸€ä¸‹ MIME ç±»å‹å’Œå®ƒä»¬çš„é‡è¦æ€§ã€‚</p><h3 id="ä»€ä¹ˆæ˜¯-mime-ç±»å‹-2" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯-mime-ç±»å‹-2"><span>ä»€ä¹ˆæ˜¯ MIME ç±»å‹ï¼Ÿ</span></a></h3><p>MIME ç±»å‹ï¼ˆå¤šç”¨é€”äº’è”ç½‘é‚®ä»¶æ‰©å±•ç±»å‹ï¼‰æ˜¯ä¸€ç§æ ‡å‡†ï¼Œç”¨äºè¡¨ç¤ºæ–‡æ¡£ã€æ–‡ä»¶æˆ–å­—èŠ‚æµçš„æ€§è´¨å’Œæ ¼å¼ã€‚è¿™åœ¨äº’è”ç½‘ä¸Šå°¤ä¸ºé‡è¦ï¼Œå› ä¸ºå®ƒå¸®åŠ©æµè§ˆå™¨äº†è§£åº”è¯¥å¦‚ä½•å¤„ç†ä¸åŒç±»å‹çš„æ•°æ®ã€‚ä¾‹å¦‚ï¼Œå½“ä½ è®¿é—®ä¸€ä¸ªç½‘é¡µæ—¶ï¼ŒæœåŠ¡å™¨ä¼šä½¿ç”¨ MIME ç±»å‹å‘Šè¯‰ä½ çš„æµè§ˆå™¨ï¼Œè¿™æ˜¯ä¸€ä¸ª HTML æ–‡æ¡£ï¼ˆ<code>text/html</code>ï¼‰ï¼Œè¿˜æ˜¯ä¸€ä¸ª JPEG å›¾åƒï¼ˆ<code>image/jpeg</code>ï¼‰ã€‚</p><h3 id="mimeparams-æ„é€ å‡½æ•°" tabindex="-1"><a class="header-anchor" href="#mimeparams-æ„é€ å‡½æ•°"><span>MIMEParams æ„é€ å‡½æ•°</span></a></h3><p><code>new MIMEParams()</code> æ˜¯ Node.js v21.7.1 ä¸­å¼•å…¥çš„ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œå®ƒæä¾›äº†ä¸€ç§æ–¹å¼æ¥åˆ›å»ºå’Œç®¡ç† MIME ç±»å‹ä¸­çš„å‚æ•°ã€‚ä¸€ä¸ª MIME ç±»å‹å¯èƒ½åŒ…å«å¤šä¸ªå‚æ•°ï¼Œè¿™äº›å‚æ•°å¯¹äºå®šä¹‰æ•°æ®çš„é¢å¤–ç‰¹æ€§å¾ˆæœ‰ç”¨ã€‚</p><h4 id="å®é™…ä¾‹å­-2" tabindex="-1"><a class="header-anchor" href="#å®é™…ä¾‹å­-2"><span>å®é™…ä¾‹å­ï¼š</span></a></h4><p>å‡è®¾ä½ æ­£åœ¨å¼€å‘ä¸€ä¸ª Web åº”ç”¨ç¨‹åºï¼Œéœ€è¦å¤„ç†ä¸Šä¼ çš„æ–‡ä»¶ã€‚è¿™äº›æ–‡ä»¶å¯ä»¥æ˜¯ PDF æ–‡æ¡£ã€JPEG å›¾åƒç­‰ã€‚æ¯ç§æ–‡ä»¶ç±»å‹éƒ½å¯ä»¥é€šè¿‡å…¶ MIME ç±»å‹è¿›è¡Œæ ‡è¯†ï¼Œè€Œä¸”å¯èƒ½å¸¦æœ‰ä¸€äº›å‚æ•°ï¼Œæ¯”å¦‚å­—ç¬¦é›†ç¼–ç ã€åˆ†è¾¨ç‡ç­‰ã€‚</p><p>åœ¨ Node.js ä¸­ï¼Œä½ å¯èƒ½éœ€è¦è¯»å–å’Œæ“ä½œè¿™äº› MIME ç±»å‹åŠå…¶å‚æ•°ã€‚è¿™å°±æ˜¯ <code>MIMEParams</code> æ´¾ä¸Šç”¨åœºçš„åœ°æ–¹ã€‚</p><h5 id="ç¤ºä¾‹ä»£ç -2" tabindex="-1"><a class="header-anchor" href="#ç¤ºä¾‹ä»£ç -2"><span>ç¤ºä¾‹ä»£ç ï¼š</span></a></h5><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#ECEFF4;"> {</span><span style="color:#D8DEE9;"> MIMEParams</span><span style="color:#ECEFF4;"> }</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// åˆ›å»ºä¸€ä¸ªæ–°çš„ MIMEParams å®ä¾‹</span></span>
<span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> params</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> MIMEParams</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å‡è®¾ä½ ä»æŸå¤„è·å–äº†ä¸€ä¸ª MIME ç±»å‹å­—ç¬¦ä¸²ï¼Œæ¯”å¦‚&#39;video/mp4; codecs=&quot;avc1, mp4a&quot;&#39;</span></span>
<span class="line"><span style="color:#616E88;">// å¹¶æƒ³è¦è§£æå…¶ä¸­çš„å‚æ•°</span></span>
<span class="line"><span style="color:#D8DEE9;">params</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">append</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">codecs</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">avc1, mp4a</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // æ·»åŠ å‚æ•°</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// è·å–å‚æ•°å€¼</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">params</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">get</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">codecs</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡º: avc1, mp4a</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// åˆ é™¤å‚æ•°</span></span>
<span class="line"><span style="color:#D8DEE9;">params</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">delete</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">codecs</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">params</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">has</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">codecs</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡º: falseï¼Œå› ä¸ºå·²åˆ é™¤</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// ä½ è¿˜å¯ä»¥é€šè¿‡éå†æ‰€æœ‰å‚æ•°æ¥æ‰§è¡Œæ›´å¤æ‚çš„æ“ä½œ</span></span>
<span class="line"><span style="color:#81A1C1;">for</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#81A1C1;">const</span><span style="color:#ECEFF4;"> [</span><span style="color:#D8DEE9;">name</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> value</span><span style="color:#ECEFF4;">]</span><span style="color:#81A1C1;"> of</span><span style="color:#D8DEE9;"> params</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">name</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> value</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é€šè¿‡è¿™ä¸ªç®€å•çš„ä¾‹å­ï¼Œä½ å¯ä»¥çœ‹åˆ°å¦‚ä½•ä½¿ç”¨ <code>MIMEParams</code> æ¥å¤„ç†ä¸ MIME ç±»å‹ç›¸å…³çš„å‚æ•°ã€‚æ— è®ºæ˜¯åœ¨å¤„ç† HTTP å“åº”ã€è¯·æ±‚è¿˜æ˜¯å¤„ç†ä»»ä½•éœ€è¦ç²¾ç¡®æ§åˆ¶ MIME ç±»å‹å‚æ•°çš„åœºæ™¯ä¸­ï¼Œ<code>MIMEParams</code> éƒ½æ˜¯ä¸€ä¸ªéå¸¸å®ç”¨çš„å·¥å…·ã€‚</p><p>æ€»çš„æ¥è¯´ï¼Œç†è§£å¹¶èƒ½å¤Ÿæ“ä½œ MIME ç±»å‹åŠå…¶å‚æ•°ï¼Œå¯¹äºå¼€å‘èƒ½å¤Ÿæœ‰æ•ˆå’Œä¼˜é›…å¤„ç†å¤šç§åª’ä½“ç±»å‹çš„ç°ä»£ Web åº”ç”¨ç¨‹åºæ˜¯éå¸¸é‡è¦çš„ã€‚è€Œ <code>MIMEParams</code> åˆ™æä¾›äº†ä¸€ä¸ªæ–¹ä¾¿çš„æ¥å£æ¥å¸®åŠ©å¼€å‘è€…åœ¨ Node.js ç¯å¢ƒä¸­å®ç°è¿™ä¸€ç‚¹ã€‚</p><h3 id="mimeparams-delete-name" tabindex="-1"><a class="header-anchor" href="#mimeparams-delete-name"><span><a href="https://nodejs.org/docs/latest/api/util.html#mimeparamsdeletename" target="_blank" rel="noopener noreferrer">mimeParams.delete(name)</a></span></a></h3><p>Node.js æ˜¯ä¸€ä¸ªåŸºäº Chrome V8 å¼•æ“çš„ JavaScript è¿è¡Œç¯å¢ƒï¼Œå…è®¸ä½ åœ¨æœåŠ¡å™¨ç«¯è¿è¡Œ JavaScriptã€‚è¿™æ‰“ç ´äº† JavaScript ä»…èƒ½åœ¨æµè§ˆå™¨ä¸­è¿è¡Œçš„é™åˆ¶ï¼Œä½¿å…¶èƒ½å¤Ÿç”¨äºæ„å»ºæ›´ä¸ºå¤æ‚å’ŒåŠŸèƒ½å¼ºå¤§çš„åç«¯åº”ç”¨ç¨‹åºã€‚</p><p>åœ¨ Node.js çš„ä¸åŒç‰ˆæœ¬ä¸­ï¼Œå¼•å…¥äº†è®¸å¤šå®ç”¨çš„ APIã€‚åœ¨ä»‹ç» <code>mimeParams.delete(name)</code> ä¹‹å‰ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦ç†è§£ MIME ç±»å‹ä»¥åŠ URLSearchParams å¯¹è±¡ã€‚</p><h3 id="mime-ç±»å‹" tabindex="-1"><a class="header-anchor" href="#mime-ç±»å‹"><span>MIME ç±»å‹</span></a></h3><p>MIME ç±»å‹ï¼ˆå¤šç”¨é€”äº’è”ç½‘é‚®ä»¶æ‰©å±•ç±»å‹ï¼‰æ˜¯ä¸€ç§æ ‡å‡†ï¼Œç”¨äºæè¿°æ–‡ä»¶çš„æ ¼å¼å’Œå†…å®¹ç±»å‹ã€‚æ¯”å¦‚ï¼Œå½“ä½ è®¿é—®ä¸€ä¸ªç½‘é¡µï¼ŒæœåŠ¡å™¨ä¼šä½¿ç”¨ MIME ç±»å‹å‘Šè¯‰æµè§ˆå™¨è¿™æ˜¯ä¸€ä¸ª HTML æ–‡æ¡£ (<code>text/html</code>)ï¼›å½“ä¸‹è½½ä¸€å¼ å›¾ç‰‡æ—¶ï¼ŒæœåŠ¡å™¨å¯èƒ½ä¼šæ ‡æ˜è¿™æ˜¯ä¸€å¼  JPEG å›¾ç‰‡ (<code>image/jpeg</code>)ã€‚</p><h3 id="urlsearchparams-å¯¹è±¡" tabindex="-1"><a class="header-anchor" href="#urlsearchparams-å¯¹è±¡"><span>URLSearchParams å¯¹è±¡</span></a></h3><p>URLSearchParams æ˜¯ Web API çš„ä¸€éƒ¨åˆ†ï¼Œä¹Ÿè¢« Node.js å®ç°ï¼Œå¹¶ç”¨äºå¤„ç† URL ä¸­æŸ¥è¯¢å­—ç¬¦ä¸²çš„è¯»å†™æ“ä½œã€‚ä¾‹å¦‚ï¼Œå¯¹äº URL <code>http://example.com/over/there?name=ferret</code>ï¼Œ<code>name=ferret</code> å°±æ˜¯æŸ¥è¯¢å‚æ•°ï¼Œå¯ä»¥ä½¿ç”¨ URLSearchParams æ¥è§£æå’Œæ“ä½œè¿™äº›å‚æ•°ã€‚</p><h3 id="mimeparams-delete-name-1" tabindex="-1"><a class="header-anchor" href="#mimeparams-delete-name-1"><span>mimeParams.delete(name)</span></a></h3><p>åœ¨ Node.js v21.7.1 ç‰ˆæœ¬ä¸­ï¼Œ<code>mimeParams.delete(name)</code> æ˜¯ç”¨äº MIME ç±»å‹å‚æ•°çš„æ“ä½œä¸­çš„ä¸€ä¸ªæ–¹æ³•ã€‚è¯¥æ–¹æ³•å±äº MIME ç±»å‹å‚æ•°é›†åˆçš„å¯¹è±¡ï¼Œå…è®¸ä½ åˆ é™¤ä¸€ä¸ªç‰¹å®šçš„ MIME ç±»å‹å‚æ•°ã€‚</p><p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ª MIME ç±»å‹ï¼Œå¦‚ <code>text/html; charset=UTF-8</code>ï¼Œå…¶ä¸­ <code>charset=UTF-8</code> æ˜¯ä¸€ä¸ªå‚æ•°ï¼Œè¡¨ç¤ºå­—ç¬¦é›†è®¾ä¸º UTF-8ã€‚å¦‚æœæˆ‘ä»¬æƒ³è¦åˆ é™¤è¿™ä¸ªå‚æ•°ï¼Œå°±å¯ä»¥ä½¿ç”¨ <code>mimeParams.delete(&#39;charset&#39;)</code> æ–¹æ³•ã€‚</p><h4 id="å®é™…è¿ç”¨ç¤ºä¾‹-1" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨ç¤ºä¾‹-1"><span>å®é™…è¿ç”¨ç¤ºä¾‹</span></a></h4><p>è€ƒè™‘åˆ°ä½ æ˜¯ç¼–ç¨‹æ–°æ‰‹ï¼Œè®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªç®€å•çš„ä¾‹å­æ¥è¯´æ˜è¿™ä¸ªæ–¹æ³•çš„ä½¿ç”¨ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#616E88;">// å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ª MIME ç±»å‹å‚æ•°å­—ç¬¦ä¸² &quot;charset=UTF-8&quot;</span></span>
<span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> paramsString</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">charset=UTF-8</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#616E88;">// ä½¿ç”¨ URLSearchParams æ¥æ¨¡æ‹Ÿå¤„ç† MIME ç±»å‹å‚æ•°</span></span>
<span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> mimeParams</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> URLSearchParams</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">paramsString</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">mimeParams</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">toString</span><span style="color:#D8DEE9FF;">())</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡º: charset=UTF-8</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// ç°åœ¨ï¼Œæˆ‘ä»¬æƒ³è¦åˆ é™¤è¿™ä¸ªå‚æ•°</span></span>
<span class="line"><span style="color:#D8DEE9;">mimeParams</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">delete</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">charset</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">mimeParams</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">toString</span><span style="color:#D8DEE9FF;">())</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡º: ï¼ˆç©ºå­—ç¬¦ä¸²ï¼‰</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆåˆ›å»ºäº†ä¸€ä¸ª <code>URLSearchParams</code> å¯¹è±¡æ¥æ¨¡æ‹Ÿ MIME ç±»å‹å‚æ•°çš„å¤„ç†ã€‚åˆå§‹æ—¶ï¼Œæˆ‘ä»¬ç”¨ <code>&quot;charset=UTF-8&quot;</code> æ¥åˆå§‹åŒ–è¿™ä¸ªå¯¹è±¡ã€‚ç„¶åï¼Œæˆ‘ä»¬è°ƒç”¨äº† <code>.delete(&#39;charset&#39;)</code> æ–¹æ³•æ¥åˆ é™¤ <code>charset</code> å‚æ•°ã€‚æœ€ç»ˆï¼Œå½“æˆ‘ä»¬å†æ¬¡å°è¯•å°† <code>mimeParams</code> è½¬æ¢ä¸ºå­—ç¬¦ä¸²æ—¶ï¼Œå‘ç°å®ƒå·²ç»ä¸ºç©ºäº†ï¼Œè¿™è¡¨æ˜ <code>charset</code> å‚æ•°å·²è¢«æˆåŠŸåˆ é™¤ã€‚</p><p>è¯·æ³¨æ„ï¼Œè™½ç„¶è¿™ä¸ªç¤ºä¾‹ä½¿ç”¨äº† <code>URLSearchParams</code> æ¥æ¨¡æ‹Ÿæ“ä½œï¼Œä½†åœ¨å¤„ç†å®é™…çš„ MIME ç±»å‹å‚æ•°æ—¶ï¼Œåº”ä½¿ç”¨ç›¸åº”çš„ API æˆ–åº“æ¥è¿›è¡Œæ“ä½œã€‚è¿™é‡Œçš„ç¤ºä¾‹æ—¨åœ¨å¸®åŠ©ç†è§£ <code>delete</code> æ–¹æ³•çš„åŸºæœ¬æ¦‚å¿µå’Œä½œç”¨ã€‚</p><h3 id="mimeparams-entries" tabindex="-1"><a class="header-anchor" href="#mimeparams-entries"><span><a href="https://nodejs.org/docs/latest/api/util.html#mimeparamsentries" target="_blank" rel="noopener noreferrer">mimeParams.entries()</a></span></a></h3><p>Node.js ç‰ˆæœ¬ 21.7.1 ä¸­çš„ <code>mimeParams.entries()</code> æ–¹æ³•æ˜¯ä¸ MIME ç±»å‹å‚æ•°ç›¸å…³çš„åŠŸèƒ½ã€‚åœ¨è¯¦ç»†è§£é‡Šè¿™ä¸ªæ–¹æ³•ä¹‹å‰ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦äº†è§£ä¸€äº›åŸºç¡€æ¦‚å¿µã€‚</p><h3 id="mime-ç±»å‹-1" tabindex="-1"><a class="header-anchor" href="#mime-ç±»å‹-1"><span>MIME ç±»å‹</span></a></h3><p>MIME ç±»å‹ï¼ˆå¤šç”¨é€”äº’è”ç½‘é‚®ä»¶æ‰©å±•ç±»å‹ï¼‰æ˜¯ä¸€ç§æ ‡å‡†ï¼Œç”¨äºè¡¨ç¤ºæ–‡ä»¶æˆ–å†…å®¹çš„æ€§è´¨å’Œæ ¼å¼ã€‚ä¾‹å¦‚ï¼Œåœ¨ç½‘ç»œä¸Šï¼Œ<code>text/html</code> ä»£è¡¨ HTML æ–‡æ¡£ï¼Œ<code>image/jpeg</code> ä»£è¡¨ JPEG å›¾ç‰‡æ ¼å¼ï¼Œç­‰ç­‰ã€‚MIME ç±»å‹é€šå¸¸åœ¨ HTTP é€šä¿¡ä¸­ä½¿ç”¨ï¼Œæ¥å‘ŠçŸ¥æ¥æ”¶æ–¹æ–‡ä»¶çš„ç±»å‹ã€‚</p><h3 id="mime-ç±»å‹å‚æ•°" tabindex="-1"><a class="header-anchor" href="#mime-ç±»å‹å‚æ•°"><span>MIME ç±»å‹å‚æ•°</span></a></h3><p>MIME ç±»å‹é™¤äº†åŸºæœ¬çš„ç±»å‹å’Œå­ç±»å‹å¤–ï¼Œè¿˜å¯ä»¥åŒ…å«å‚æ•°ã€‚è¿™äº›å‚æ•°ä¸º MIME ç±»å‹æä¾›é¢å¤–ä¿¡æ¯ã€‚ä¸€ä¸ªå¸¸è§çš„ä¾‹å­æ˜¯å­—ç¬¦é›†å‚æ•°ï¼š<code>text/html; charset=UTF-8</code>ï¼Œå…¶ä¸­ <code>charset=UTF-8</code> æŒ‡æ˜äº†æ–‡æœ¬åº”è¯¥å¦‚ä½•ç¼–ç ã€‚</p><h3 id="mimeparams-entries-1" tabindex="-1"><a class="header-anchor" href="#mimeparams-entries-1"><span>mimeParams.entries()</span></a></h3><p>åœ¨ Node.js ç¯å¢ƒä¸‹ï¼ŒHTTP è¯·æ±‚å’Œå“åº”å¯èƒ½å¸¦æœ‰ MIME ç±»å‹åŠå…¶å‚æ•°ã€‚<code>mimeParams.entries()</code> æ–¹æ³•å…è®¸ä½ è®¿é—®è¿™äº›å‚æ•°ï¼Œå¹¶ä»¥é”®å€¼å¯¹æ•°ç»„çš„å½¢å¼è¿”å›å®ƒä»¬ã€‚</p><p>ä¸¾ä¸ªä¾‹å­ï¼š</p><p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ª MIME ç±»å‹ <code>text/plain; charset=UTF-8; format=flowed</code>ã€‚è¿™é‡Œï¼Œ<code>charset</code> å’Œ <code>format</code> æ˜¯å‚æ•°ã€‚</p><p>ä½¿ç”¨ <code>mimeParams.entries()</code> æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥è·å–åˆ°è¿™ä¸¤ä¸ªå‚æ•°ï¼Œè¿›è€Œå¤„ç†æˆ–åˆ©ç”¨å®ƒä»¬ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å‡è®¾è¿™æ˜¯ä»æŸå¤„è·å–çš„ MIME ç±»å‹å‚æ•°å¯¹è±¡</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> mimeParams</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#D8DEE9;"> util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">MimeParams</span><span style="color:#D8DEE9FF;">(</span></span>
<span class="line"><span style="color:#ECEFF4;">  &quot;</span><span style="color:#A3BE8C;">text/plain; charset=UTF-8; format=flowed</span><span style="color:#ECEFF4;">&quot;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// ä½¿ç”¨ entries() æ–¹æ³•éå†å‚æ•°</span></span>
<span class="line"><span style="color:#81A1C1;">for</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#81A1C1;">const</span><span style="color:#ECEFF4;"> [</span><span style="color:#D8DEE9;">key</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> value</span><span style="color:#ECEFF4;">]</span><span style="color:#81A1C1;"> of</span><span style="color:#D8DEE9;"> mimeParams</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">entries</span><span style="color:#D8DEE9FF;">()) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">`</span><span style="color:#81A1C1;">${</span><span style="color:#D8DEE9;">key</span><span style="color:#81A1C1;">}</span><span style="color:#A3BE8C;">: </span><span style="color:#81A1C1;">${</span><span style="color:#D8DEE9;">value</span><span style="color:#81A1C1;">}</span><span style="color:#ECEFF4;">`</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// è¾“å‡ºå°†ä¼šæ˜¯ï¼š</span></span>
<span class="line"><span style="color:#616E88;">// charset: UTF-8</span></span>
<span class="line"><span style="color:#616E88;">// format: flowed</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="å®é™…è¿ç”¨ç¤ºä¾‹-2" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨ç¤ºä¾‹-2"><span>å®é™…è¿ç”¨ç¤ºä¾‹</span></a></h3><ol><li><p><strong>å¤„ç† HTTP å“åº”</strong>ï¼šå½“ä½ åˆ›å»ºä¸€ä¸ª web æœåŠ¡å™¨æ—¶ï¼Œå¯èƒ½éœ€è¦æ ¹æ®ä¸åŒçš„ MIME ç±»å‹å’Œå‚æ•°æ¥å¤„ç†å“åº”ã€‚æ¯”å¦‚ï¼Œæ ¹æ®ä¸åŒçš„å­—ç¬¦é›†ç¼–ç å†…å®¹ã€‚</p></li><li><p><strong>å†…å®¹åå•†</strong>ï¼šåœ¨æœåŠ¡ç«¯ï¼Œæ ¹æ®å®¢æˆ·ç«¯è¯·æ±‚çš„ Accept å¤´éƒ¨çš„ MIME ç±»å‹å‚æ•°ï¼Œå†³å®šæœ€ä½³çš„å“åº”ç±»å‹å’Œæ ¼å¼ã€‚</p></li><li><p><strong>API å¼€å‘</strong>ï¼šå½“å¼€å‘ RESTful API æ—¶ï¼Œé’ˆå¯¹ä¸åŒçš„ <code>Content-Type</code> è¯·æ±‚å¤´éƒ¨è¿›è¡Œå†…å®¹è§£ææˆ–è€…æ ¼å¼åŒ–è¾“å‡ºã€‚</p></li></ol><p>é€šè¿‡ä½¿ç”¨ <code>mimeParams.entries()</code>ï¼ŒNode.js å¼€å‘è€…å¯ä»¥æ›´æ–¹ä¾¿åœ°å¤„ç†è¿™äº›å¤æ‚çš„ MIME ç±»å‹å‚æ•°ï¼Œä»è€Œæ„å»ºæ›´åŠ å¥å£®å’Œçµæ´»çš„ç½‘ç»œåº”ç”¨ç¨‹åºã€‚</p><h3 id="mimeparams-get-name" tabindex="-1"><a class="header-anchor" href="#mimeparams-get-name"><span><a href="https://nodejs.org/docs/latest/api/util.html#mimeparamsgetname" target="_blank" rel="noopener noreferrer">mimeParams.get(name)</a></span></a></h3><p>åœ¨ Node.js çš„ç‰ˆæœ¬ 21.7.1 ä¸­ï¼Œ<code>mimeParams.get(name)</code> æ˜¯ç”¨äºå¤„ç† MIME ç±»å‹å‚æ•°çš„æ–¹æ³•ã€‚MIME ç±»å‹æ˜¯äº’è”ç½‘æ ‡å‡†ï¼Œç”¨äºæŒ‡å®šæ–‡æ¡£æˆ–æ–‡ä»¶ç±»å‹ï¼Œè¿™æ ·æµè§ˆå™¨å’ŒæœåŠ¡å™¨å°±èƒ½æ­£ç¡®åœ°äº¤æ¢å’Œå¤„ç†æ•°æ®ã€‚ä¾‹å¦‚ï¼Œ<code>text/html</code> ç”¨äº HTML æ–‡æ¡£ï¼Œè€Œ <code>image/jpeg</code> ç”¨äº JPEG å›¾åƒã€‚</p><p>å…·ä½“åˆ° <code>mimeParams.get(name)</code>ï¼Œå®ƒå±äº MIME å‚æ•°çš„è·å–åŠŸèƒ½ï¼Œé€šå¸¸ä¸ HTTP å¤´éƒ¨ç›¸å…³è”ï¼Œå°¤å…¶æ˜¯åœ¨ <code>Content-Type</code> å’Œ <code>Accept</code> ç­‰å¤´éƒ¨é‡Œä½¿ç”¨ MIME ç±»å‹æ—¶ã€‚è¯¥æ–¹æ³•å…è®¸ä½ æŸ¥è¯¢ç‰¹å®šçš„ MIME ç±»å‹å‚æ•°å€¼ã€‚</p><h3 id="å¦‚ä½•ç†è§£-mimeparams-get-name" tabindex="-1"><a class="header-anchor" href="#å¦‚ä½•ç†è§£-mimeparams-get-name"><span>å¦‚ä½•ç†è§£ <code>mimeParams.get(name)</code></span></a></h3><p>é¦–å…ˆï¼Œäº†è§£ MIME ç±»å‹çš„æ ¼å¼å¾ˆé‡è¦ã€‚ä¸€ä¸ªå®Œæ•´çš„ MIME ç±»å‹å¯èƒ½åŒ…æ‹¬ä¸»ç±»å‹ã€å­ç±»å‹ä»¥åŠå¯é€‰çš„å‚æ•°ã€‚ä¾‹å¦‚ï¼Œåœ¨ <code>Content-Type: text/html; charset=UTF-8</code> ä¸­ï¼Œ<code>text/html</code> æ˜¯ MIME ç±»å‹ï¼Œè€Œ <code>charset=UTF-8</code> æ˜¯å‚æ•°ï¼ŒæŒ‡å®šäº†å­—ç¬¦é›†ã€‚</p><p><code>mimeParams</code> æ˜¯è¡¨ç¤ºè¿™äº›å‚æ•°çš„å¯¹è±¡ï¼Œè€Œ <code>.get(name)</code> æ–¹æ³•å…è®¸ä½ æŒ‰å‚æ•°åï¼ˆå¦‚ <code>charset</code>ï¼‰æ£€ç´¢å€¼ï¼ˆå¦‚ <code>UTF-8</code>ï¼‰ã€‚</p><h3 id="å®é™…è¿ç”¨ç¤ºä¾‹-3" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨ç¤ºä¾‹-3"><span>å®é™…è¿ç”¨ç¤ºä¾‹</span></a></h3><p>å‡è®¾ä½ æ­£åœ¨ç¼–å†™ä¸€ä¸ª Node.js åº”ç”¨ï¼Œéœ€è¦å¤„ç†æ¥è‡ªå®¢æˆ·ç«¯çš„ HTTP è¯·æ±‚ã€‚é€šè¿‡åˆ†æè¯·æ±‚å¤´ä¸­çš„ <code>Content-Type</code>ï¼Œä½ å¯ä»¥å†³å®šå¦‚ä½•è¿›ä¸€æ­¥è§£æå’Œå¤„ç†è¯·æ±‚æ­£æ–‡ã€‚</p><h4 id="ç¤ºä¾‹-1-å¤„ç†æ¥æ”¶åˆ°çš„æ•°æ®" tabindex="-1"><a class="header-anchor" href="#ç¤ºä¾‹-1-å¤„ç†æ¥æ”¶åˆ°çš„æ•°æ®"><span>ç¤ºä¾‹ 1ï¼šå¤„ç†æ¥æ”¶åˆ°çš„æ•°æ®</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> http</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">http</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">http</span></span>
<span class="line"><span style="color:#ECEFF4;">  .</span><span style="color:#88C0D0;">createServer</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">req</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> res</span><span style="color:#ECEFF4;">)</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#616E88;">    // å‡è®¾æˆ‘ä»¬å…³å¿ƒ &quot;content-type&quot; å¤´éƒ¨</span></span>
<span class="line"><span style="color:#81A1C1;">    const</span><span style="color:#D8DEE9;"> contentType</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> req</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">headers</span><span style="color:#D8DEE9FF;">[</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">content-type</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">] </span><span style="color:#81A1C1;">||</span><span style="color:#ECEFF4;"> &quot;&quot;</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">    // ä½¿ç”¨å†…ç½®æ¨¡å—ä»contentTypeä¸­è§£æMIMEç±»å‹å’Œå‚æ•°</span></span>
<span class="line"><span style="color:#81A1C1;">    const</span><span style="color:#ECEFF4;"> {</span><span style="color:#D8DEE9;"> mime</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> parameters</span><span style="color:#ECEFF4;"> }</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> URLSearchParams</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">`</span><span style="color:#A3BE8C;">type=</span><span style="color:#81A1C1;">${</span><span style="color:#D8DEE9;">contentType</span><span style="color:#81A1C1;">}</span><span style="color:#ECEFF4;">`</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">    const</span><span style="color:#D8DEE9;"> mimeParams</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> parameters</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">    // è·å–å­—ç¬¦é›†å‚æ•°</span></span>
<span class="line"><span style="color:#81A1C1;">    const</span><span style="color:#D8DEE9;"> charset</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> mimeParams</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">get</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">charset</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">    if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">mime</span><span style="color:#81A1C1;"> ===</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">text/plain</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;"> &amp;&amp;</span><span style="color:#D8DEE9;"> charset</span><span style="color:#81A1C1;"> ===</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">UTF-8</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#616E88;">      // å¦‚æœæ˜¯ UTF-8 ç¼–ç çš„çº¯æ–‡æœ¬ï¼Œè¿›è¡Œç›¸åº”å¤„ç†</span></span>
<span class="line"><span style="color:#D8DEE9;">      res</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">writeHead</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">200</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> {</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">Content-Type</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">text/plain</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;"> }</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">      res</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">end</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">æ¥æ”¶åˆ°çº¯æ–‡æœ¬å†…å®¹</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">    }</span><span style="color:#81A1C1;"> else</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#616E88;">      // å…¶ä»–æƒ…å†µï¼Œè¿”å›ä¸æ”¯æŒçš„åª’ä½“ç±»å‹</span></span>
<span class="line"><span style="color:#D8DEE9;">      res</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">writeHead</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">415</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">      res</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">end</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">    }</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#ECEFF4;">  .</span><span style="color:#88C0D0;">listen</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">3000</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> ()</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">æœåŠ¡å™¨å¯åŠ¨åœ¨ http://localhost:3000/</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªç®€å•çš„ HTTP æœåŠ¡å™¨ï¼Œå®ƒæ£€æŸ¥æ¯ä¸ªè¯·æ±‚çš„ <code>Content-Type</code> ã€‚å¦‚æœè¯·æ±‚æ˜¯ä»¥ <code>UTF-8</code> ç¼–ç çš„ <code>text/plain</code> ç±»å‹ï¼Œåˆ™æœåŠ¡å™¨ä¼šå“åº”ç›¸åº”çš„æ¶ˆæ¯ï¼›å¦åˆ™ï¼Œå®ƒä¼šè¿”å›ä¸€ä¸ª 415 é”™è¯¯ï¼ˆä¸æ”¯æŒçš„åª’ä½“ç±»å‹ï¼‰ã€‚</p><h4 id="æ³¨æ„" tabindex="-1"><a class="header-anchor" href="#æ³¨æ„"><span>æ³¨æ„</span></a></h4><p>è¯·æ³¨æ„ï¼Œä¸Šè¿°ä»£ç ç¤ºä¾‹ç®€åŒ–äº†å®é™…æ“ä½œï¼Œæ—¨åœ¨å±•ç¤ºå¦‚ä½•ä½¿ç”¨ <code>mimeParams.get(name)</code> æ¥å¤„ç† MIME ç±»å‹å‚æ•°ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œå¤„ç† MIME ç±»å‹å’Œå‚æ•°å¯èƒ½æ¶‰åŠæ›´å¤æ‚çš„é€»è¾‘å’Œå®‰å…¨è€ƒè™‘ã€‚æ­¤å¤–ï¼ŒNode.js API å¯èƒ½éšç‰ˆæœ¬æ›´æ–°è€Œæœ‰æ‰€æ”¹å˜ï¼Œå»ºè®®æ€»æ˜¯å‚è€ƒæœ€æ–°çš„å®˜æ–¹æ–‡æ¡£ã€‚</p><h3 id="mimeparams-has-name" tabindex="-1"><a class="header-anchor" href="#mimeparams-has-name"><span><a href="https://nodejs.org/docs/latest/api/util.html#mimeparamshasname" target="_blank" rel="noopener noreferrer">mimeParams.has(name)</a></span></a></h3><p>Node.js æ˜¯ä¸€ä¸ªåŸºäº Chrome V8 å¼•æ“çš„ JavaScript è¿è¡Œç¯å¢ƒï¼Œè®©ä½ èƒ½å¤Ÿåœ¨æœåŠ¡å™¨ç«¯è¿è¡Œ JavaScriptã€‚Node.js v21.7.1 ä¸­å¼•å…¥äº†å„ç§åŠŸèƒ½å’Œæ–¹æ³•æ¥å¢å¼ºå…¶æ€§èƒ½å’ŒåŠŸèƒ½ã€‚å…¶ä¸­ä¹‹ä¸€å°±æ˜¯ <code>mimeParams.has(name)</code> æ–¹æ³•ã€‚</p><h3 id="ä»€ä¹ˆæ˜¯-mime" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯-mime"><span>ä»€ä¹ˆæ˜¯ MIMEï¼Ÿ</span></a></h3><p>åœ¨æ·±å…¥ <code>mimeParams.has(name)</code> ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦ç†è§£ MIME çš„æ¦‚å¿µã€‚MIME (Multipurpose Internet Mail Extensions) æœ€åˆè®¾è®¡ç”¨äºç”µå­é‚®ä»¶ç³»ç»Ÿï¼Œå…è®¸å‘é€å„ç§ç±»å‹çš„æ•°æ®ï¼ˆå¦‚å›¾ç‰‡ã€è§†é¢‘ã€éŸ³é¢‘ç­‰ï¼‰ä½œä¸ºç”µå­é‚®ä»¶é™„ä»¶ã€‚éšç€æ—¶é—´çš„å‘å±•ï¼ŒMIME ç±»å‹ç°åœ¨å¹¿æ³›ç”¨äºäº’è”ç½‘ä¸Šï¼ŒæŒ‡å®šæ–‡ä»¶æˆ–æ•°æ®çš„æ ¼å¼ã€‚ä¾‹å¦‚ï¼Œ<code>text/html</code> ç”¨äº HTML æ–‡æ¡£ï¼Œ<code>image/png</code> ç”¨äº PNG å›¾ç‰‡ã€‚</p><h3 id="äº†è§£-mimeparams-has-name" tabindex="-1"><a class="header-anchor" href="#äº†è§£-mimeparams-has-name"><span>äº†è§£ <code>mimeParams.has(name)</code></span></a></h3><p>åœ¨ Node.js ä¸­ï¼Œ<code>mimeParams.has(name)</code> æ–¹æ³•æ˜¯ç”¨æ¥æ£€æŸ¥ä¸€ä¸ª MIME ç±»å‹çš„å‚æ•°é›†åˆä¸­æ˜¯å¦å­˜åœ¨ç‰¹å®šçš„åç§°ã€‚å¦‚æœè¯¥åç§°å­˜åœ¨ï¼Œåˆ™è¿”å› <code>true</code>ï¼›å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™è¿”å› <code>false</code>ã€‚</p><p>è¿™é‡Œï¼Œâ€œå‚æ•°é›†åˆâ€æŒ‡çš„æ˜¯ä¸ MIME ç±»å‹ç›¸å…³è”çš„å±æ€§é›†ã€‚ä¾‹å¦‚ï¼Œ<code>text/plain; charset=utf-8</code> ä¸­çš„ <code>charset=utf-8</code> å°±æ˜¯ä¸€ä¸ªå‚æ•°ï¼Œå…¶ä¸­ <code>charset</code> æ˜¯å‚æ•°çš„åç§°ï¼Œè€Œ <code>utf-8</code> æ˜¯å®ƒçš„å€¼ã€‚</p><h4 id="å®é™…è¿ç”¨ä¸¾ä¾‹" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨ä¸¾ä¾‹"><span>å®é™…è¿ç”¨ä¸¾ä¾‹</span></a></h4><p>å‡è®¾ä½ æ­£åœ¨å¼€å‘ä¸€ä¸ª Web åº”ç”¨ï¼Œéœ€è¦å¤„ç†ä¸åŒç±»å‹çš„åª’ä½“æ–‡ä»¶ä¸Šä¼ ã€‚åœ¨ä¸Šä¼ è¿‡ç¨‹ä¸­ï¼Œä½ å¯èƒ½éœ€è¦æ ¹æ®æ–‡ä»¶çš„ MIME ç±»å‹ä»¥åŠå…¶ä¸­çš„å‚æ•°æ¥å†³å®šå¦‚ä½•å¤„ç†è¿™äº›æ–‡ä»¶ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#616E88;">// å¼•å…¥ util æ¨¡å—</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å‡è®¾ä»æŸå¤„è·å¾—äº†ä¸€ä¸ª MIME ç±»å‹å­—ç¬¦ä¸²</span></span>
<span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> mimeTypeString</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> &#39;</span><span style="color:#A3BE8C;">video/mp4; codecs=&quot;avc1.42E01E, mp4a.40.2&quot;</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// ä½¿ç”¨ util.types.parseMIME å‡½æ•°è§£æ MIME ç±»å‹å­—ç¬¦ä¸²</span></span>
<span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> parsedMIME</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">parseMIME</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">mimeTypeString</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥æ£€æŸ¥è§£æå‡ºçš„ MIME ç±»å‹æ˜¯å¦åŒ…å«ç‰¹å®šçš„å‚æ•°</span></span>
<span class="line"><span style="color:#81A1C1;">if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">parsedMIME</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">mimeParams</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">has</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">codecs</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">è¿™ä¸ª MIME ç±»å‹åŒ…å« codecs å‚æ•°</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;"> else</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">è¿™ä¸ª MIME ç±»å‹ä¸åŒ…å« codecs å‚æ•°</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆå¼•å…¥äº† Node.js çš„ <code>util</code> æ¨¡å—ã€‚ç„¶åï¼Œä½¿ç”¨ <code>util.types.parseMIME</code> æ–¹æ³•è§£æä¸€ä¸ªè¡¨ç¤ºè§†é¢‘æ–‡ä»¶çš„ MIME ç±»å‹å­—ç¬¦ä¸²ã€‚é€šè¿‡ <code>parsedMIME.mimeParams.has(&#39;codecs&#39;)</code> æ¥æ£€æŸ¥è§£æå‡ºçš„å¯¹è±¡æ˜¯å¦åŒ…å« <code>codecs</code> å‚æ•°ã€‚å¦‚æœå­˜åœ¨è¿™ä¸ªå‚æ•°ï¼ˆå³ç¤ºä¾‹ä¸­çš„ <code>&#39;avc1.42E01E, mp4a.40.2&#39;</code>ï¼‰ï¼Œåˆ™è¡¨æ˜è¯¥è§†é¢‘æ–‡ä»¶æŒ‡å®šäº†ç¼–è§£ç å™¨ä¿¡æ¯ï¼Œæˆ‘ä»¬å¯ä»¥æ®æ­¤è¿›è¡Œé€‚å½“çš„å¤„ç†ï¼Œæ¯”å¦‚é€‰æ‹©æ­£ç¡®çš„è§£ç å™¨è¿›è¡Œæ’­æ”¾æˆ–è½¬ç ç­‰æ“ä½œã€‚</p><p>æ€»ç»“èµ·æ¥ï¼Œ<code>mimeParams.has(name)</code> æ–¹æ³•åœ¨å¤„ç†å…·æœ‰å¤æ‚å±æ€§çš„ MIME ç±»å‹æ—¶éå¸¸æœ‰ç”¨ï¼Œå®ƒå¯ä»¥å¸®åŠ©æˆ‘ä»¬ç¡®å®šæ˜¯å¦éœ€è¦é‡‡å–æŸäº›ç‰¹å®šçš„è¡ŒåŠ¨ï¼ŒåŸºäº MIME ç±»å‹å‚æ•°çš„å­˜åœ¨ä¸å¦ã€‚</p><h3 id="mimeparams-keys" tabindex="-1"><a class="header-anchor" href="#mimeparams-keys"><span><a href="https://nodejs.org/docs/latest/api/util.html#mimeparamskeys" target="_blank" rel="noopener noreferrer">mimeParams.keys()</a></span></a></h3><p>Node.js æ˜¯ä¸€ä¸ªåŸºäº Chrome V8 å¼•æ“çš„ JavaScript è¿è¡Œæ—¶ï¼Œå®ƒè®©ä½ å¯ä»¥åœ¨æœåŠ¡å™¨ç«¯è¿è¡Œ JavaScript ä»£ç ã€‚äº†è§£ Node.jsï¼Œå°±ä¸å¾—ä¸æå®ƒä¸°å¯Œçš„å†…ç½®æ¨¡å—å’ŒåŠŸèƒ½ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å°†æ¢è®¨ <code>mimeParams.keys()</code>ï¼Œè¿™æ˜¯ Node.js v21.7.1 ä¸­çš„ä¸€ä¸ªç‰¹æ€§ã€‚</p><p>é¦–å…ˆï¼Œå¾—æ˜ç™½ MIME (Multipurpose Internet Mail Extensions) æ˜¯ä»€ä¹ˆã€‚ç®€å•æ¥è¯´ï¼ŒMIME ç±»å‹æ˜¯ä¸€ç§æ ‡å‡†ï¼Œç”¨äºè¡¨ç¤ºæ–‡æ¡£ã€æ–‡ä»¶æˆ–å­—èŠ‚æµçš„æœ¬è´¨å’Œæ ¼å¼ã€‚åœ¨äº’è”ç½‘ä¸Šäº¤æ¢æ•°æ®æ—¶ï¼ŒMIME ç±»å‹å‘Šè¯‰æ¥æ”¶æ–¹æ•°æ®çš„ç±»å‹æ˜¯ä»€ä¹ˆï¼Œæ¯”å¦‚æ˜¯ HTML æ–‡æ¡£ã€çº¯æ–‡æœ¬ã€JPEG å›¾ç‰‡è¿˜æ˜¯å…¶ä»–ä»€ä¹ˆç±»å‹ã€‚</p><p>é‚£ä¹ˆ <code>mimeParams.keys()</code> å…·ä½“æ˜¯åšä»€ä¹ˆçš„å‘¢ï¼Ÿ</p><p><code>mimeParams.keys()</code> æ˜¯ Node.js æä¾›çš„ä¸€ä¸ªæ–¹æ³•ï¼Œç”¨äºè·å– MIME ç±»å‹å‚æ•°çš„æ‰€æœ‰é”®åï¼ˆå³å‚æ•°åï¼‰ã€‚è¿™ä¸ªæ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ªè¿­ä»£å™¨ï¼Œå…è®¸ä½ éå†æ¯ä¸ªé”®åã€‚è¦ç†è§£è¿™ä¸ªåŠŸèƒ½ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“ MIME ç±»å‹ä¸ä»…ä»…åŒ…å«ç±»å‹æ ‡è¯†ç¬¦ï¼ˆå¦‚ <code>text/html</code>ï¼‰ï¼Œè¿˜å¯ä»¥åŒ…æ‹¬ä¸€äº›å‚æ•°ï¼ˆå¦‚ <code>charset=UTF-8</code>ï¼‰æ¥è¿›ä¸€æ­¥æè¿°è¿™ä¸ª MIME ç±»å‹ã€‚</p><h3 id="å®é™…åº”ç”¨ä¾‹å­-1" tabindex="-1"><a class="header-anchor" href="#å®é™…åº”ç”¨ä¾‹å­-1"><span>å®é™…åº”ç”¨ä¾‹å­</span></a></h3><p>å‡è®¾ä½ æ­£åœ¨å¼€å‘ä¸€ä¸ª web åº”ç”¨ç¨‹åºï¼Œéœ€è¦å¤„ç†å®¢æˆ·ç«¯å‘é€çš„ HTTP è¯·æ±‚ã€‚HTTP è¯·æ±‚å¤´ä¸­å¯èƒ½åŒ…å« <code>Content-Type</code> å­—æ®µï¼Œè¯¥å­—æ®µæŒ‡ç¤ºè¯·æ±‚ä½“çš„ MIME ç±»å‹åŠå…¶å‚æ•°ã€‚</p><p>ä¾‹å¦‚ï¼Œå®¢æˆ·ç«¯ä¸Šä¼ äº†ä¸€ä¸ªè¡¨å•ï¼Œå†…å®¹ç±»å‹ï¼ˆå³ MIME ç±»å‹ï¼‰å¯èƒ½æ˜¯è¿™æ ·çš„ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span>Content-Type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>å¦‚æœä½ æƒ³è¦ä»è¿™ä¸ª <code>Content-Type</code> ä¸­æå–å‡ºæ‰€æœ‰çš„å‚æ•°ï¼ˆåœ¨è¿™ä¸ªä¾‹å­é‡Œå…¶å®åªæœ‰ä¸€ä¸ªå‚æ•°ï¼šboundaryï¼‰ï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>mimeParams.keys()</code> æ–¹æ³•ã€‚ä»¥ä¸‹æ˜¯å¦‚ä½•æ“ä½œçš„ç¤ºä¾‹ä»£ç ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#ECEFF4;"> {</span><span style="color:#D8DEE9;"> MIME</span><span style="color:#ECEFF4;"> }</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">node:util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // å‡è®¾è¿™æ˜¯ä» Node.js v21.7.1 å¼•å…¥ MIME ç±»çš„æ–¹å¼</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å‡è®¾ä½ å·²ç»ä»¥æŸç§æ–¹å¼è·å¾—äº†å®Œæ•´çš„ Content-Type å­—ç¬¦ä¸²</span></span>
<span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> contentType</span><span style="color:#81A1C1;"> =</span></span>
<span class="line"><span style="color:#ECEFF4;">  &quot;</span><span style="color:#A3BE8C;">multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// ä½¿ç”¨ MIME ç±»è§£æ MIME ç±»å‹</span></span>
<span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> mime</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> MIME</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">contentType</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// è·å– MIME å‚æ•°çš„é”®ï¼ˆå³å‚æ•°åç§°ï¼‰</span></span>
<span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> keysIterator</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> mime</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">params</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">keys</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// éå†å¹¶æ‰“å°æ‰€æœ‰é”®</span></span>
<span class="line"><span style="color:#81A1C1;">for</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> key</span><span style="color:#81A1C1;"> of</span><span style="color:#D8DEE9;"> keysIterator</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">key</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¿™å°†æ‰“å° &quot;boundary&quot;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ä»¥ä¸Šçš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆé€šè¿‡ MIME ç±»å‹å­—ç¬¦ä¸²åˆ›å»ºäº†ä¸€ä¸ª <code>MIME</code> å¯¹è±¡ã€‚ç„¶åï¼Œæˆ‘ä»¬è°ƒç”¨äº† <code>mime.params.keys()</code> æ¥è·å–æ‰€æœ‰å‚æ•°çš„é”®åï¼Œå¹¶é€šè¿‡éå†è¿­ä»£å™¨æ‰“å°å‡ºäº†è¿™äº›é”®åã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å¾—åˆ°äº† <code>&quot;boundary&quot;</code>ï¼Œè¿™æ˜¯æ­¤ MIME ç±»å‹å­—ç¬¦ä¸²ä¸­å”¯ä¸€çš„å‚æ•°ã€‚</p><p>é€šè¿‡è¿™ä¸ªåŠŸèƒ½ï¼Œä½ å¯ä»¥å¾ˆå®¹æ˜“åœ°è¯†åˆ«å’Œåˆ©ç”¨ MIME ç±»å‹ä¸­çš„å‚æ•°ï¼Œæ— è®ºæ˜¯è¿›è¡Œç½‘ç»œé€šä¿¡ã€å¤„ç†å¤šåª’ä½“æ–‡ä»¶è¿˜æ˜¯å®ç°å…¶ä»–éœ€è¦è¯¦ç»†äº†è§£å†…å®¹ç±»å‹çš„åŠŸèƒ½ã€‚</p><h3 id="mimeparams-set-name-value" tabindex="-1"><a class="header-anchor" href="#mimeparams-set-name-value"><span><a href="https://nodejs.org/docs/latest/api/util.html#mimeparamssetname-value" target="_blank" rel="noopener noreferrer">mimeParams.set(name, value)</a></span></a></h3><p>Node.js ä¸­çš„<code>mimeParams.set(name, value)</code>æ–¹æ³•æ˜¯ç”¨äºè®¾ç½® MIME ç±»å‹å‚æ•°çš„ã€‚é¦–å…ˆï¼Œè®©æˆ‘ä»¬è§£é‡Šä¸€ä¸‹æ¶‰åŠçš„å‡ ä¸ªæ¦‚å¿µï¼š</p><ol><li><p><strong>MIME ç±»å‹</strong>ï¼šåœ¨äº’è”ç½‘ä¸Šï¼ŒMIME ç±»å‹ï¼ˆå¤šç”¨é€”äº’è”ç½‘é‚®ä»¶æ‰©å±•ç±»å‹ï¼‰æ˜¯ä¸€ç§æ ‡å‡†ï¼Œç”¨æ¥è¡¨ç¤ºæ–‡æ¡£ã€æ–‡ä»¶æˆ–å­—èŠ‚æµçš„æ€§è´¨å’Œæ ¼å¼ã€‚ä¾‹å¦‚ï¼Œå½“ä½ çœ‹åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸º&quot;text/html&quot;ï¼Œè¿™æ„å‘³ç€è¯¥æ–‡ä»¶æ˜¯ HTML æ ¼å¼çš„æ–‡æœ¬æ–‡ä»¶ã€‚</p></li><li><p><strong>MIME å‚æ•°</strong>ï¼šè¿™äº›æ˜¯é™„åŠ åœ¨ MIME ç±»å‹åé¢çš„ï¼Œç”¨äºæä¾›æ›´å…·ä½“ä¿¡æ¯çš„å‚æ•°ã€‚æ¯”å¦‚ï¼Œ<code>charset=UTF-8</code>å°±æ˜¯ä¸€ä¸ªå¸¸è§çš„ MIME å‚æ•°ï¼Œå®ƒå®šä¹‰äº†å­—ç¬¦é›†ä¸º UTF-8ã€‚</p></li><li><p><strong>Node.js</strong>ï¼šNode.js æ˜¯ä¸€ä¸ªå¼€æºã€è·¨å¹³å°çš„ JavaScript è¿è¡Œç¯å¢ƒï¼Œå…è®¸æœåŠ¡å™¨ç«¯å’Œç½‘ç»œåº”ç”¨çš„å¼€å‘ã€‚</p></li></ol><p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬æ¥æ¢è®¨<code>mimeParams.set(name, value)</code>:</p><h3 id="mimeparams-set-name-value-1" tabindex="-1"><a class="header-anchor" href="#mimeparams-set-name-value-1"><span>mimeParams.set(name, value)</span></a></h3><p>è¿™ä¸ªå‡½æ•°å…è®¸ä½ è®¾ç½®æˆ–æ›´æ–° MIME ç±»å‹çš„å‚æ•°ã€‚å…¶ä¸­ï¼š</p><ul><li><code>name</code> æ˜¯ä½ æƒ³è¦è®¾ç½®çš„å‚æ•°åã€‚</li><li><code>value</code> æ˜¯ä¸è¯¥å‚æ•°åç›¸å¯¹åº”çš„å€¼ã€‚</li></ul><h3 id="å®é™…åº”ç”¨ä¾‹å­-2" tabindex="-1"><a class="header-anchor" href="#å®é™…åº”ç”¨ä¾‹å­-2"><span>å®é™…åº”ç”¨ä¾‹å­</span></a></h3><p>å‡è®¾ä½ æ­£åœ¨å¼€å‘ä¸€ä¸ª Web åº”ç”¨ç¨‹åºï¼Œå¹¶ä¸”ä½ éœ€è¦å“åº”å®¢æˆ·ç«¯çš„è¯·æ±‚å‘é€ä¸€ä¸ª HTML æ–‡ä»¶ã€‚è¿™æ—¶å€™ï¼Œä½ å¯èƒ½éœ€è¦è®¾ç½®å†…å®¹ç±»å‹ï¼ˆContent-Typeï¼‰ï¼ŒåŒ…æ‹¬ MIME ç±»å‹å’Œå­—ç¬¦é›†ç­‰å‚æ•°ï¼Œä»¥ç¡®ä¿å®¢æˆ·ç«¯èƒ½å¤Ÿæ­£ç¡®ç†è§£å“åº”çš„å†…å®¹ã€‚</p><p><strong>ç¤ºä¾‹ä»£ç </strong>ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> http</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">http</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">http</span></span>
<span class="line"><span style="color:#ECEFF4;">  .</span><span style="color:#88C0D0;">createServer</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">req</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> res</span><span style="color:#ECEFF4;">)</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#616E88;">    // è®¾ç½®å“åº”å¤´çš„å†…å®¹ç±»å‹ä¸ºtext/htmlï¼Œå¹¶æŒ‡å®šå­—ç¬¦é›†ä¸ºUTF-8</span></span>
<span class="line"><span style="color:#D8DEE9;">    res</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">setHeader</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Content-Type</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">text/html; charset=UTF-8</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">    // å‘é€å“åº”</span></span>
<span class="line"><span style="color:#D8DEE9;">    res</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">end</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">`&lt;`h1&gt;Hello World!`&lt;`/h1&gt;</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#ECEFF4;">  .</span><span style="color:#88C0D0;">listen</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">3000</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> ()</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Server running at http://localhost:3000/</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œè™½ç„¶æ²¡æœ‰ç›´æ¥ä½¿ç”¨<code>mimeParams.set(name, value)</code>ï¼Œä½†æ˜¯é€šè¿‡è®¾ç½®<code>Content-Type</code>ä¸º<code>text/html; charset=UTF-8</code>ï¼Œå…¶å®å·²ç»éšå¼åœ°è®¾ç½®äº† MIME ç±»å‹ï¼ˆ<code>text/html</code>ï¼‰å’Œä¸€ä¸ª MIME å‚æ•°ï¼ˆ<code>charset=UTF-8</code>ï¼‰ã€‚</p><p>å¦‚æœåœ¨æŸäº›è¾ƒå¤æ‚çš„æƒ…å†µä¸‹ï¼Œä½ éœ€è¦æ“ä½œå¹¶è‡ªå®šä¹‰æ›´è¯¦ç»†çš„ MIME å‚æ•°ï¼Œåˆ™å¯èƒ½ä¼šç›´æ¥ä½¿ç”¨åˆ°ç±»ä¼¼<code>mimeParams.set()</code>çš„æ–¹æ³•æ¥ç²¾ç¡®æ§åˆ¶ã€‚</p><p><strong>æ³¨æ„</strong>ï¼šåœ¨å®é™…ç¼–ç¨‹è¿‡ç¨‹ä¸­ï¼Œæ ¹æ®ä¸åŒçš„åº“æˆ–æ¡†æ¶ï¼Œå¯èƒ½ä¼šæœ‰ä¸“é—¨çš„ API æ¥å¤„ç† HTTP å¤´éƒ¨å’Œ MIME ç±»å‹ã€‚<code>mimeParams.set(name, value)</code>æ›´åƒæ˜¯ä¸€ä¸ªæŠ½è±¡çº§åˆ«çš„æ“ä½œï¼Œå®é™…ä½¿ç”¨æ—¶åº”å‚è€ƒç‰¹å®šç¯å¢ƒæˆ–åº“çš„æ–‡æ¡£ã€‚</p><h3 id="mimeparams-values" tabindex="-1"><a class="header-anchor" href="#mimeparams-values"><span><a href="https://nodejs.org/docs/latest/api/util.html#mimeparamsvalues" target="_blank" rel="noopener noreferrer">mimeParams.values()</a></span></a></h3><p>Node.js ä¸­çš„<code>mimeParams.values()</code>æ˜¯ä¸€ä¸ªä¸ MIME ç±»å‹å‚æ•°ç›¸å…³çš„åŠŸèƒ½ã€‚è¦ç†è§£è¿™ä¸ªå‡½æ•°ï¼Œæˆ‘ä»¬å…ˆéœ€è¦åˆ†è§£å‡ ä¸ªæ¦‚å¿µï¼šMIME ç±»å‹ã€å‚æ•°ï¼Œä»¥åŠå¦‚ä½•é€šè¿‡<code>.values()</code>è®¿é—®è¿™äº›å‚æ•°ã€‚</p><h3 id="mime-ç±»å‹-2" tabindex="-1"><a class="header-anchor" href="#mime-ç±»å‹-2"><span>MIME ç±»å‹</span></a></h3><p>MIME ç±»å‹ï¼ˆå¤šç”¨é€”äº’è”ç½‘é‚®ä»¶æ‰©å±•ç±»å‹ï¼‰ï¼Œåœ¨ HTTP é€šä¿¡è¿‡ç¨‹ä¸­å®šä¹‰äº†æ•°æ®çš„æ ¼å¼ã€‚ä¾‹å¦‚ï¼Œå½“ä½ çš„æµè§ˆå™¨å‘æœåŠ¡å™¨è¯·æ±‚ä¸€ä¸ªå›¾ç‰‡æ—¶ï¼ŒæœåŠ¡å™¨ä¼šåœ¨å“åº”å¤´é‡Œä½¿ç”¨ MIME ç±»å‹å‘Šè¯‰æµè§ˆå™¨è¿™æ˜¯ä¸€å¼ å›¾ç‰‡ï¼Œå…·ä½“æ˜¯<code>image/jpeg</code>ã€<code>image/png</code>ç­‰ç­‰ã€‚MIME ç±»å‹ä¸ä»…ç”¨äºå›¾ç‰‡ï¼Œè¿˜å¹¿æ³›ç”¨äºæ–‡æ¡£ï¼ˆå¦‚ PDF çš„<code>application/pdf</code>ï¼‰ã€éŸ³è§†é¢‘æ–‡ä»¶ï¼ˆå¦‚ MP4 çš„<code>video/mp4</code>ï¼‰ç­‰ã€‚</p><h3 id="å‚æ•°-2" tabindex="-1"><a class="header-anchor" href="#å‚æ•°-2"><span>å‚æ•°</span></a></h3><p>åœ¨ MIME ç±»å‹ä¸­ï¼Œé™¤äº†ä¸»ç±»å‹å’Œå­ç±»å‹ä¹‹å¤–ï¼Œè¿˜å¯ä»¥åŒ…å«ä¸€äº›é¢å¤–çš„å‚æ•°ç”¨æ¥æä¾›æ›´å¤šä¿¡æ¯ã€‚ä¾‹å¦‚ï¼Œåœ¨<code>Content-Type: text/html; charset=UTF-8</code>ä¸­ï¼Œ<code>charset=UTF-8</code>å°±æ˜¯ä¸€ä¸ªå‚æ•°ï¼ŒæŒ‡å®šäº†å­—ç¬¦é›†ä¸º UTF-8ã€‚</p><h3 id="values-æ–¹æ³•" tabindex="-1"><a class="header-anchor" href="#values-æ–¹æ³•"><span><code>.values()</code> æ–¹æ³•</span></a></h3><p>ç°åœ¨æˆ‘ä»¬çŸ¥é“äº† MIME ç±»å‹å’Œå®ƒçš„å‚æ•°ï¼Œé‚£ä¹ˆ<code>mimeParams.values()</code>æ–¹æ³•æ˜¯ç”¨æ¥åšä»€ä¹ˆçš„å‘¢ï¼Ÿç®€å•æ¥è¯´ï¼Œå®ƒè¿”å›ä¸€ä¸ªè¿­ä»£å™¨ï¼Œå…è®¸ä½ éå†æ‰€æœ‰çš„å‚æ•°å€¼ã€‚</p><p>ä¸¾ä¾‹æ¥è¯´ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#ECEFF4;"> {</span><span style="color:#D8DEE9;"> MIMEParams</span><span style="color:#ECEFF4;"> }</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªMIMEç±»å‹ `text/html; charset=UTF-8; boundary=something`</span></span>
<span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> mime</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> MIMEParams</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">text/html; charset=UTF-8; boundary=something</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å½“æˆ‘ä»¬æƒ³è¦è·å–å¹¶ä½¿ç”¨è¿™äº›å‚æ•°æ—¶ï¼Œå¯ä»¥ç”¨<code>.values()</code>æ–¹æ³•ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">for</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> value</span><span style="color:#81A1C1;"> of</span><span style="color:#D8DEE9;"> mime</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">values</span><span style="color:#D8DEE9FF;">()) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">value</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ®µä»£ç ä¼šä¾æ¬¡è¾“å‡ºå‚æ•°çš„å€¼ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span>&quot;UTF-8&quot;</span></span>
<span class="line"><span>&quot;something&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨æ„è¿™é‡Œåªè¾“å‡ºäº†å‚æ•°çš„å€¼ï¼Œæ²¡æœ‰è¾“å‡ºå‚æ•°çš„åå­—ï¼ˆæ¯”å¦‚<code>charset</code>æˆ–<code>boundary</code>ï¼‰ã€‚</p><h3 id="å®é™…è¿ç”¨ä¾‹å­-5" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨ä¾‹å­-5"><span>å®é™…è¿ç”¨ä¾‹å­</span></a></h3><p>å‡è®¾ä½ æ­£åœ¨å¼€å‘ä¸€ä¸ª Web åº”ç”¨ï¼Œéœ€è¦æ ¹æ®ä¸Šä¼ æ–‡ä»¶çš„ MIME ç±»å‹æ¥å¤„ç†ä¸åŒç±»å‹çš„æ–‡ä»¶ã€‚ç”¨æˆ·ä¸Šä¼ äº†ä¸€ä¸ªæ–‡ä»¶ï¼Œå¹¶å£°æ˜äº†è¿™ä¸ªæ–‡ä»¶æ˜¯<code>multipart/form-data; boundary=----WebKitFormBoundaryrGKCBY7qhFd3TrwA</code>ç±»å‹çš„ã€‚ä½ éœ€è¦ä»è¿™ä¸ª MIME ç±»å‹ä¸­æå–å‡º<code>boundary</code>çš„å€¼ï¼Œä»¥æ­£ç¡®åœ°è§£æ multipart æ•°æ®ã€‚</p><p>ä½¿ç”¨<code>mimeParams.values()</code>å¯ä»¥å¸®åŠ©ä½ è½»æ¾è·å–åˆ°<code>boundary</code>çš„å€¼ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#ECEFF4;"> {</span><span style="color:#D8DEE9;"> MIMEParams</span><span style="color:#ECEFF4;"> }</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> contentType</span><span style="color:#81A1C1;"> =</span></span>
<span class="line"><span style="color:#ECEFF4;">  &quot;</span><span style="color:#A3BE8C;">multipart/form-data; boundary=----WebKitFormBoundaryrGKCBY7qhFd3TrwA</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> mime</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> MIMEParams</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">contentType</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">for</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> value</span><span style="color:#81A1C1;"> of</span><span style="color:#D8DEE9;"> mime</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">values</span><span style="color:#D8DEE9FF;">()) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#81A1C1;">  if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">value</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">startsWith</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">----WebKitFormBoundary</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">`</span><span style="color:#A3BE8C;">æ‰¾åˆ° boundary: </span><span style="color:#81A1C1;">${</span><span style="color:#D8DEE9;">value</span><span style="color:#81A1C1;">}</span><span style="color:#ECEFF4;">`</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#616E88;">    // ä½¿ç”¨è¿™ä¸ªboundaryå€¼å¤„ç†ä¸Šä¼ çš„æ•°æ®...</span></span>
<span class="line"><span style="color:#81A1C1;">    break;</span><span style="color:#616E88;"> // æ‰¾åˆ°åå³é€€å‡ºå¾ªç¯</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ä¸ªä¾‹å­å±•ç¤ºäº†å¦‚ä½•ä»å¤æ‚çš„ MIME ç±»å‹å­—ç¬¦ä¸²ä¸­æå–å¹¶åˆ©ç”¨å…·ä½“çš„å‚æ•°å€¼ã€‚è¿™åœ¨å¤„ç† HTTP è¯·æ±‚ã€å“åº”æˆ–ä»»ä½•æ¶‰åŠ MIME ç±»å‹çš„åœºæ™¯ä¸‹éƒ½éå¸¸æœ‰ç”¨ã€‚</p><h3 id="mimeparams-iterator-https-nodejs-org-docs-latest-api-util-html-mimeparamsiterator" tabindex="-1"><a class="header-anchor" href="#mimeparams-iterator-https-nodejs-org-docs-latest-api-util-html-mimeparamsiterator"><span>[mimeParams<a href="">@@iterator</a>](<a href="https://nodejs.org/docs/latest/api/util.html#mimeparamsiterator" target="_blank" rel="noopener noreferrer">https://nodejs.org/docs/latest/api/util.html#mimeparamsiterator</a>)</span></a></h3><p>Node.js çš„ <code>mimeParams[@@iterator]()</code> æ˜¯ä¸€ä¸ªä¸ MIME ç±»å‹å‚æ•°ç›¸å…³çš„åŠŸèƒ½ç‰¹æ€§ã€‚ä¸ºäº†æ›´å¥½åœ°ç†è§£å®ƒï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦æ˜ç™½å‡ ä¸ªåŸºæœ¬æ¦‚å¿µï¼šMIME ç±»å‹ã€è¿­ä»£å™¨ï¼ˆIteratorï¼‰ï¼Œä»¥åŠå®ƒä»¬åœ¨ Node.js ä¸­å¦‚ä½•ä½¿ç”¨ã€‚</p><h3 id="åŸºç¡€çŸ¥è¯†-1" tabindex="-1"><a class="header-anchor" href="#åŸºç¡€çŸ¥è¯†-1"><span>åŸºç¡€çŸ¥è¯†</span></a></h3><ol><li><p><strong>MIME ç±»å‹</strong>ï¼šåœ¨äº’è”ç½‘ä¸Šï¼ŒMIME ç±»å‹æ˜¯ä¸€ç§æ ‡å‡†ï¼Œç”¨äºæè¿°æ–‡ä»¶çš„æ ¼å¼å’Œå†…å®¹ç±»å‹ã€‚ä¾‹å¦‚ï¼Œ<code>text/html</code> ç”¨äº HTML æ–‡æ¡£ï¼Œ<code>image/jpeg</code> ç”¨äº JPEG å›¾åƒæ–‡ä»¶ç­‰ã€‚</p></li><li><p><strong>è¿­ä»£å™¨ (Iterator)</strong>ï¼šæ˜¯ä¸€ä¸ªå…è®¸ä½ ä¾æ¬¡è®¿é—®é›†åˆï¼ˆå¦‚æ•°ç»„ã€å¯¹è±¡ç­‰ï¼‰ä¸­å…ƒç´ çš„æœºåˆ¶ã€‚åœ¨ JavaScript (å’Œå› æ­¤åœ¨ Node.js) ä¸­ï¼Œè¿­ä»£å™¨æä¾›äº†ä¸€ç§ç»Ÿä¸€çš„æ¥å£æ¥éå†å„ç§æ•°æ®ç»“æ„ã€‚</p></li></ol><h3 id="mimeparams-iterator" tabindex="-1"><a class="header-anchor" href="#mimeparams-iterator"><span>mimeParams<a href="">@@iterator</a></span></a></h3><p>åœ¨ Node.js v21.7.1 ä¸­ï¼Œ<code>mimeParams[@@iterator]()</code> æ˜¯ä¸€ä¸ªæ–¹æ³•ï¼Œå®ƒåŸºäº MIME ç±»å‹å‚æ•°çš„é›†åˆè¿”å›ä¸€ä¸ªè¿­ä»£å™¨ã€‚è¿™å…è®¸ä½ éå† MIME ç±»å‹çš„å‚æ•°ï¼Œä¾‹å¦‚å­—ç¬¦ç¼–ç ã€è¾¹ç•Œç­‰ã€‚</p><h3 id="å®é™…è¿ç”¨ç¤ºä¾‹-4" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨ç¤ºä¾‹-4"><span>å®é™…è¿ç”¨ç¤ºä¾‹</span></a></h3><p>å‡è®¾æˆ‘ä»¬æ­£åœ¨å¤„ç†ä¸€äº›ç½‘ç»œè¯·æ±‚å’Œå“åº”ï¼Œè¿™äº›è¯·æ±‚å’Œå“åº”å¯èƒ½åŒ…å«å„ç§ MIME ç±»å‹çš„å†…å®¹ã€‚é€šè¿‡ MIME ç±»å‹çš„å‚æ•°ï¼Œæˆ‘ä»¬å¯ä»¥è·å–åˆ°å…³äºè¿™äº›å†…å®¹çš„é¢å¤–ä¿¡æ¯ã€‚</p><h4 id="ç¤ºä¾‹-1-è§£æå’Œéå†-mime-ç±»å‹å‚æ•°" tabindex="-1"><a class="header-anchor" href="#ç¤ºä¾‹-1-è§£æå’Œéå†-mime-ç±»å‹å‚æ•°"><span>ç¤ºä¾‹ 1ï¼šè§£æå’Œéå† MIME ç±»å‹å‚æ•°</span></a></h4><p>æƒ³è±¡ä¸€ä¸‹ï¼Œä½ æ­£ä»ä¸€ä¸ª HTTP å“åº”ä¸­æ¥æ”¶åˆ°ä¸€ä¸ªå¤æ‚çš„è¡¨å•æ•°æ®ï¼Œå…¶ MIME ç±»å‹å¯èƒ½æ˜¯ <code>multipart/form-data; boundary=---123456</code>ã€‚åœ¨è¿™é‡Œï¼Œ<code>boundary</code> æ˜¯ä¸€ä¸ªå‚æ•°ï¼ŒæŒ‡å®šäº†æ•°æ®å„éƒ¨åˆ†çš„åˆ†éš”ç¬¦ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> mimeType</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">multipart/form-data; boundary=---123456</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å‡è®¾è¿™æ˜¯ä»æŸå¤„è·å¾—çš„ MIME ç±»å‹å­—ç¬¦ä¸²</span></span>
<span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> mimeParams</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> URLSearchParams</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">mimeType</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">split</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">;</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)[</span><span style="color:#B48EAD;">1</span><span style="color:#D8DEE9FF;">]</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">trim</span><span style="color:#D8DEE9FF;">())</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// ä½¿ç”¨ mimeParams[@@iterator]() éå† MIME ç±»å‹çš„å‚æ•°</span></span>
<span class="line"><span style="color:#81A1C1;">for</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#81A1C1;">let</span><span style="color:#ECEFF4;"> [</span><span style="color:#D8DEE9;">key</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> value</span><span style="color:#ECEFF4;">]</span><span style="color:#81A1C1;"> of</span><span style="color:#D8DEE9;"> mimeParams</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">`</span><span style="color:#81A1C1;">${</span><span style="color:#D8DEE9;">key</span><span style="color:#81A1C1;">}</span><span style="color:#A3BE8C;">: </span><span style="color:#81A1C1;">${</span><span style="color:#D8DEE9;">value</span><span style="color:#81A1C1;">}</span><span style="color:#ECEFF4;">`</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// è¾“å‡º: boundary: ---123456</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="ç¤ºä¾‹-2-åŠ¨æ€å¤„ç†ä¸åŒçš„-mime-ç±»å‹å‚æ•°" tabindex="-1"><a class="header-anchor" href="#ç¤ºä¾‹-2-åŠ¨æ€å¤„ç†ä¸åŒçš„-mime-ç±»å‹å‚æ•°"><span>ç¤ºä¾‹ 2ï¼šåŠ¨æ€å¤„ç†ä¸åŒçš„ MIME ç±»å‹å‚æ•°</span></a></h4><p>è€ƒè™‘ä¸€ä¸ªæ›´å¤æ‚çš„åœºæ™¯ï¼Œå…¶ä¸­ä½ éœ€è¦æ ¹æ®ä¸åŒçš„ MIME ç±»å‹å‚æ•°æ¥åŠ¨æ€å¤„ç†æ•°æ®ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">function</span><span style="color:#88C0D0;"> handleMimeParams</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">mimeType</span><span style="color:#ECEFF4;">)</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  let</span><span style="color:#D8DEE9;"> params</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> URLSearchParams</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">mimeType</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">split</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">;</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)[</span><span style="color:#B48EAD;">1</span><span style="color:#D8DEE9FF;">]</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">trim</span><span style="color:#D8DEE9FF;">())</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">  for</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#81A1C1;">let</span><span style="color:#ECEFF4;"> [</span><span style="color:#D8DEE9;">key</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> value</span><span style="color:#ECEFF4;">]</span><span style="color:#81A1C1;"> of</span><span style="color:#D8DEE9;"> params</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#81A1C1;">    switch</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">key</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#81A1C1;">      case</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">charset</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">:</span></span>
<span class="line"><span style="color:#D8DEE9;">        console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">`</span><span style="color:#A3BE8C;">å¤„ç†å­—ç¬¦é›†: </span><span style="color:#81A1C1;">${</span><span style="color:#D8DEE9;">value</span><span style="color:#81A1C1;">}</span><span style="color:#ECEFF4;">`</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">        break;</span></span>
<span class="line"><span style="color:#81A1C1;">      case</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">boundary</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">:</span></span>
<span class="line"><span style="color:#D8DEE9;">        console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">`</span><span style="color:#A3BE8C;">å¤„ç†æ•°æ®è¾¹ç•Œ: </span><span style="color:#81A1C1;">${</span><span style="color:#D8DEE9;">value</span><span style="color:#81A1C1;">}</span><span style="color:#ECEFF4;">`</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">        break;</span></span>
<span class="line"><span style="color:#616E88;">      // å¯ä»¥æ·»åŠ æ›´å¤šcaseæ¥å¤„ç†ä¸åŒçš„å‚æ•°</span></span>
<span class="line"><span style="color:#81A1C1;">      default</span><span style="color:#ECEFF4;">:</span></span>
<span class="line"><span style="color:#D8DEE9;">        console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">`</span><span style="color:#A3BE8C;">æœªçŸ¥å‚æ•°: </span><span style="color:#81A1C1;">${</span><span style="color:#D8DEE9;">key</span><span style="color:#81A1C1;">}</span><span style="color:#ECEFF4;">`</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">    }</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88C0D0;">handleMimeParams</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">application/json; charset=utf-8</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#616E88;">// è¾“å‡º: å¤„ç†å­—ç¬¦é›†: utf-8</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88C0D0;">handleMimeParams</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">multipart/form-data; boundary=---123456</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#616E88;">// è¾“å‡º: å¤„ç†æ•°æ®è¾¹ç•Œ: ---123456</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é€šè¿‡è¿™äº›ç¤ºä¾‹ï¼Œä½ å¯ä»¥çœ‹åˆ°å¦‚ä½•åˆ©ç”¨ <code>mimeParams[@@iterator]()</code> æ¥éå†å¹¶æ ¹æ® MIME ç±»å‹çš„ä¸åŒå‚æ•°æ¥è¿›è¡Œç›¸åº”çš„å¤„ç†ã€‚è¿™åœ¨å¤„ç†ç½‘ç»œè¯·æ±‚å’Œå“åº”æ—¶å°¤ä¸ºæœ‰ç”¨ï¼Œå¯ä»¥æ ¹æ®å†…å®¹ç±»å‹çš„ä¸åŒå‚æ•°çµæ´»åœ°å¤„ç†æ•°æ®ã€‚</p><h2 id="util-parseargs-config" tabindex="-1"><a class="header-anchor" href="#util-parseargs-config"><span><a href="https://nodejs.org/docs/latest/api/util.html#utilparseargsconfig" target="_blank" rel="noopener noreferrer">util.parseArgs([config])</a></span></a></h2><p><code>util.parseArgs([config])</code> æ˜¯ Node.js ä¸­çš„ä¸€ä¸ªå®ç”¨å·¥å…·å‡½æ•°ï¼Œå®ƒè¢«ç”¨æ¥è§£æå‘½ä»¤è¡Œå‚æ•°ã€‚è¿™ä¸ªå‡½æ•°æä¾›äº†ä¸€ç§ç»“æ„åŒ–çš„æ–¹å¼æ¥è·å–å’Œå¤„ç†å‘½ä»¤è¡Œä¸­ä¼ é€’çš„å‚æ•°ï¼Œä½¿å¾—åœ¨ Node.js ç¨‹åºä¸­å¤„ç†å‘½ä»¤è¡Œè¾“å…¥å˜å¾—ç®€å•è€Œç›´æ¥ã€‚</p><h3 id="åŸºæœ¬æ¦‚å¿µ-4" tabindex="-1"><a class="header-anchor" href="#åŸºæœ¬æ¦‚å¿µ-4"><span>åŸºæœ¬æ¦‚å¿µ</span></a></h3><p>åœ¨è®¸å¤šåº”ç”¨ç¨‹åºä¸­ï¼Œå°¤å…¶æ˜¯ CLIï¼ˆå‘½ä»¤è¡Œç•Œé¢ï¼‰å·¥å…·ä¸­ï¼Œéœ€è¦æ ¹æ®ç”¨æˆ·åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥çš„å‚æ•°æ¥æ‰§è¡Œä¸åŒçš„æ“ä½œã€‚å‚æ•°é€šå¸¸æœ‰ä¸¤ç§å½¢å¼ï¼š</p><ol><li><strong>é€‰é¡¹ï¼ˆOptionsï¼‰</strong>ï¼šè¿™äº›é€šå¸¸ä»¥ä¸€ä¸ªæˆ–ä¸¤ä¸ªè¿å­—ç¬¦å¼€å§‹ï¼ˆä¾‹å¦‚ <code>-h</code> æˆ– <code>--help</code>ï¼‰ï¼Œåé¢å¯èƒ½ä¼šè·Ÿä¸€ä¸ªå€¼ã€‚</li><li><strong>ä½ç½®å‚æ•°ï¼ˆPositional argumentsï¼‰</strong>ï¼šè¿™äº›æ˜¯ä¸ä»¥è¿å­—ç¬¦å¼€å§‹çš„å‚æ•°ï¼Œè¡¨ç¤ºæŸäº›ç‰¹å®šçš„æ•°æ®å€¼æˆ–æ–‡ä»¶è·¯å¾„ç­‰ã€‚</li></ol><h3 id="ä½¿ç”¨-util-parseargs-config" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨-util-parseargs-config"><span>ä½¿ç”¨ <code>util.parseArgs([config])</code></span></a></h3><p>å½“ä½¿ç”¨ <code>util.parseArgs()</code> å‡½æ•°æ—¶ï¼Œä½ å¯ä»¥æä¾›ä¸€ä¸ªé…ç½®å¯¹è±¡ (<code>config</code>) æ¥å®šä¹‰æœŸæœ›è§£æçš„é€‰é¡¹åŠå…¶è¡Œä¸ºã€‚è¯¥å‡½æ•°è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«äº†åˆ†æåçš„å‘½ä»¤è¡Œå‚æ•°ã€‚</p><h4 id="å®ä¾‹" tabindex="-1"><a class="header-anchor" href="#å®ä¾‹"><span>å®ä¾‹</span></a></h4><p>å‡è®¾ä½ æ­£åœ¨å¼€å‘ä¸€ä¸ªç®€å•çš„ CLI å·¥å…·ï¼Œç”¨äºå¤„ç†æ–‡ä»¶ã€‚ä½ å¸Œæœ›ç”¨æˆ·èƒ½å¤Ÿé€šè¿‡å‘½ä»¤è¡ŒæŒ‡å®šä¸€äº›é€‰é¡¹ï¼Œå¦‚æ˜¯å¦è¦†ç›–å·²å­˜åœ¨çš„æ–‡ä»¶(<code>-o, --overwrite</code>)ï¼Œä»¥åŠæŒ‡å®šè¾“å‡ºç›®å½•(<code>-d, --directory</code>)ã€‚</p><p>æˆ‘ä»¬æ¥çœ‹çœ‹å¦‚ä½•ä½¿ç”¨ <code>util.parseArgs()</code> æ¥å¤„ç†è¿™æ ·çš„æƒ…å†µï¼š</p><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" data-title="js" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#616E88;">// å¼•å…¥ util æ¨¡å—</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å®šä¹‰å‘½ä»¤è¡Œå‚æ•°çš„é…ç½®</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> optionsConfig</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#88C0D0;">  options</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#88C0D0;">    overwrite</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#88C0D0;">      type</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">boolean</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#88C0D0;">      short</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">o</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#88C0D0;">      description</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">Overwrite existing files</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#ECEFF4;">    },</span></span>
<span class="line"><span style="color:#88C0D0;">    directory</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#88C0D0;">      type</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">string</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#88C0D0;">      short</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">d</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#88C0D0;">      description</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">Output directory</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#ECEFF4;">    },</span></span>
<span class="line"><span style="color:#ECEFF4;">  },</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// è§£æå‘½ä»¤è¡Œå‚æ•°</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> parsedArgs</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">parseArgs</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">optionsConfig</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">parsedArgs</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">values</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // æ‰“å°è§£æåçš„å‚æ•°å€¼</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœç”¨æˆ·è¿è¡Œè¿™ä¸ªè„šæœ¬ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span>node script.js -o --directory /path/to/directory someFile.txt</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>æ§åˆ¶å°å°†ä¼šæ‰“å°å‡ºç±»ä¼¼ä»¥ä¸‹ç»“æ„çš„å¯¹è±¡ï¼Œå±•ç¤ºè§£æåçš„å‚æ•°ï¼š</p><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" data-title="json" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#ECEFF4;">  &quot;</span><span style="color:#8FBCBB;">overwrite</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">:</span><span style="color:#81A1C1;"> true</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#ECEFF4;">  &quot;</span><span style="color:#8FBCBB;">directory</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">/path/to/directory</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#ECEFF4;">  &quot;</span><span style="color:#8FBCBB;">_</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> [</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">someFile.txt</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">]</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<code>_</code> å±æ€§åŒ…å«äº†æ‰€æœ‰æœªè¢«è¯†åˆ«ä¸ºé€‰é¡¹çš„ä½ç½®å‚æ•°ï¼Œè¿™é‡Œæ˜¯ <code>&quot;someFile.txt&quot;</code> æ–‡ä»¶åã€‚</p><h3 id="å°ç»“-2" tabindex="-1"><a class="header-anchor" href="#å°ç»“-2"><span>å°ç»“</span></a></h3><ul><li><code>util.parseArgs()</code> æä¾›äº†ä¸€ä¸ªå£°æ˜å¼çš„æ–¹å¼æ¥å®šä¹‰å’Œè§£æå‘½ä»¤è¡Œå‚æ•°ã€‚</li><li>å®ƒå…è®¸ä½ æŒ‡å®šå“ªäº›é€‰é¡¹æ˜¯æœ‰æ•ˆçš„ï¼Œå®ƒä»¬çš„ç±»å‹æ˜¯ä»€ä¹ˆï¼ˆæ¯”å¦‚ <code>string</code>, <code>boolean</code> ç­‰ï¼‰ï¼Œä»¥åŠå®ƒä»¬æ˜¯å¦æœ‰çŸ­åç§°ï¼ˆä¾‹å¦‚ <code>-o</code> å¯¹åº” <code>--overwrite</code>ï¼‰ã€‚</li><li>è§£æåçš„ç»“æœè®©ä½ å¯ä»¥æ–¹ä¾¿åœ°æŒ‰åç§°è®¿é—®è¿™äº›å‚æ•°ï¼Œä½¿å¾—åœ¨ç¨‹åºä¸­æ ¹æ®ç”¨æˆ·çš„è¾“å…¥æ¥åšå‡ºç›¸åº”çš„è¡ŒåŠ¨å˜å¾—æ›´åŠ å®¹æ˜“ã€‚</li></ul><p>å¸Œæœ›è¿™ä¸ªè§£é‡Šèƒ½å¸®åŠ©ä½ ç†è§£ <code>util.parseArgs()</code> çš„åŸºæœ¬ç”¨æ³•å’Œå®ƒçš„å®é™…åº”ç”¨åœºæ™¯ï¼</p><h3 id="parseargs-tokens" tabindex="-1"><a class="header-anchor" href="#parseargs-tokens"><span><a href="https://nodejs.org/docs/latest/api/util.html#parseargs-tokens" target="_blank" rel="noopener noreferrer">parseArgs tokens</a></span></a></h3><p>åœ¨ Node.js v21.7.1 ä¸­ï¼Œ<code>parseArgs tokens</code> æ˜¯ä¸€ä¸ªåŠŸèƒ½ï¼Œå®ƒå±äº <code>util</code> æ¨¡å—ã€‚è¿™ä¸ªåŠŸèƒ½ä¸»è¦ç”¨æ¥å¤„ç†å’Œè§£æå‘½ä»¤è¡Œå‚æ•°ã€‚å½“ä½ åˆ›å»ºä¸€ä¸ªå‘½ä»¤è¡Œåº”ç”¨ï¼ˆCLIï¼‰æ—¶ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡ç»ˆç«¯æˆ–å‘½ä»¤æç¤ºç¬¦è¿è¡Œä½ çš„ç¨‹åºï¼Œå¹¶ä¼ å…¥ä¸€äº›å‚æ•°æˆ–é€‰é¡¹ã€‚<code>parseArgs tokens</code> æ­£æ˜¯å¸®åŠ©ä½ è§£æè¿™äº›å‚æ•°çš„å·¥å…·ã€‚</p><p>é¦–å…ˆï¼Œä¸ºäº†ä½¿ç”¨ <code>parseArgs tokens</code> åŠŸèƒ½ï¼Œä½ éœ€è¦ä» <code>util</code> æ¨¡å—ä¸­å¯¼å…¥å®ƒã€‚<code>util</code> æ˜¯ Node.js çš„ä¸€ä¸ªå†…ç½®æ¨¡å—ï¼Œæä¾›äº†è®¸å¤šå®ç”¨å‡½æ•°ï¼Œå…¶ä¸­å°±åŒ…æ‹¬äº†å‚æ•°è§£æã€‚</p><h3 id="åŸºæœ¬æ¦‚å¿µ-5" tabindex="-1"><a class="header-anchor" href="#åŸºæœ¬æ¦‚å¿µ-5"><span>åŸºæœ¬æ¦‚å¿µ</span></a></h3><ul><li><p><strong>å‘½ä»¤è¡Œå‚æ•°ï¼ˆCommand-line argumentsï¼‰</strong>ï¼šå½“åœ¨ç»ˆç«¯è¿è¡Œç¨‹åºæ—¶ï¼Œç´§éšç¨‹åºååé¢çš„æ˜¯å‘½ä»¤è¡Œå‚æ•°ã€‚ä¾‹å¦‚ï¼Œåœ¨ <code>node myApp.js arg1 arg2</code> ä¸­ï¼Œ<code>arg1</code> å’Œ <code>arg2</code> å°±æ˜¯å‘½ä»¤è¡Œå‚æ•°ã€‚</p></li><li><p><strong>è§£æï¼ˆParsingï¼‰</strong>ï¼šè§£ææ˜¯æŒ‡å°†ä¸€ç³»åˆ—çš„å‘½ä»¤è¡Œæ–‡æœ¬è½¬æ¢æˆç¨‹åºæ˜“äºå¤„ç†çš„æ ¼å¼ï¼ˆå¦‚å¯¹è±¡ï¼‰ï¼Œè¿™æ ·å¼€å‘è€…å°±èƒ½è½»æ¾åœ°åˆ¤æ–­å‡ºå“ªäº›é€‰é¡¹è¢«è®¾ç½®äº†ï¼Œä»¥åŠå¯¹åº”çš„å€¼æ˜¯ä»€ä¹ˆã€‚</p></li></ul><h3 id="å®é™…è¿ç”¨-3" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨-3"><span>å®é™…è¿ç”¨</span></a></h3><p>å‡è®¾ä½ æ­£åœ¨ç¼–å†™ä¸€ä¸ªç®€å•çš„ CLI å·¥å…·ï¼Œå®ƒæ¥å—ä¸¤ç§ç±»å‹çš„å‚æ•°ï¼šä¸€ç§æ˜¯â€œç‰ˆæœ¬å·â€ï¼ˆé€šè¿‡ <code>-v</code> æˆ– <code>--version</code> æŒ‡å®šï¼‰ï¼Œå¦ä¸€ç§æ˜¯â€œå¸®åŠ©â€ï¼ˆé€šè¿‡ <code>-h</code> æˆ– <code>--help</code> æŒ‡å®šï¼‰ã€‚æˆ‘ä»¬å¸Œæœ›æ ¹æ®ç”¨æˆ·è¾“å…¥çš„å‚æ•°ï¼Œç¨‹åºèƒ½å¤Ÿç›¸åº”åœ°æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯æˆ–å¸®åŠ©ä¿¡æ¯ã€‚</p><p>é¦–å…ˆï¼Œä½ éœ€è¦åœ¨ä½ çš„ JavaScript æ–‡ä»¶ä¸­å¼•å…¥ <code>util</code> æ¨¡å—ï¼Œå¹¶ä½¿ç”¨ <code>parseArgs</code> å‡½æ•°ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#ECEFF4;"> {</span><span style="color:#D8DEE9;"> parseArgs</span><span style="color:#ECEFF4;"> }</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">node:util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>ç„¶åï¼Œå®šä¹‰ä½ å¸Œæœ›è§£æçš„å‚æ•°å’Œé€‰é¡¹ã€‚ä¸ºæ­¤ï¼Œä½ å¯ä»¥åˆ›å»ºä¸€ä¸ªé…ç½®å¯¹è±¡æ¥æŒ‡å®šè¿™äº›ä¿¡æ¯ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> options</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#88C0D0;">  options</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> [</span></span>
<span class="line"><span style="color:#ECEFF4;">    {</span><span style="color:#88C0D0;"> name</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">version</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#88C0D0;"> short</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">v</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#88C0D0;"> type</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">boolean</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;"> },</span></span>
<span class="line"><span style="color:#ECEFF4;">    {</span><span style="color:#88C0D0;"> name</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">help</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#88C0D0;"> short</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">h</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#88C0D0;"> type</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">boolean</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;"> },</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  ]</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™é‡Œï¼Œ<code>options</code> æ•°ç»„å®šä¹‰äº†ä¸¤ä¸ªé€‰é¡¹ï¼š<code>version</code> å’Œ <code>help</code>ã€‚æ¯ä¸ªé€‰é¡¹éƒ½æœ‰é•¿æ ¼å¼ï¼ˆå¦‚ <code>--version</code>ï¼‰å’ŒçŸ­æ ¼å¼ï¼ˆå¦‚ <code>-v</code>ï¼‰ï¼Œå¹¶ä¸”æŒ‡å®šäº†å®ƒä»¬çš„æ•°æ®ç±»å‹ä¸ºå¸ƒå°”å‹ï¼ˆ<code>boolean</code>ï¼‰ï¼Œè¿™æ„å‘³ç€è¿™äº›é€‰é¡¹ä¸æ¥å—ä»»ä½•é™„åŠ å€¼ï¼Œåªéœ€æ£€æŸ¥æ˜¯å¦å­˜åœ¨ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œä½¿ç”¨ <code>parseArgs</code> å‡½æ•°è§£æ <code>process.argv</code>ï¼Œè¿™æ˜¯ä¸€ä¸ªåŒ…å«æ‰€æœ‰å‘½ä»¤è¡Œå‚æ•°çš„æ•°ç»„ã€‚é€šå¸¸ï¼Œå‰ä¸¤ä¸ªå…ƒç´ åˆ†åˆ«æ˜¯ node çš„è·¯å¾„å’Œæ­£åœ¨æ‰§è¡Œçš„è„šæœ¬è·¯å¾„ï¼Œæ‰€ä»¥çœŸæ­£çš„å‚æ•°æ˜¯ä»ç¬¬ä¸‰ä¸ªå…ƒç´ å¼€å§‹çš„ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> args</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> parseArgs</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#88C0D0;">  argv</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9;"> process</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">argv</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">slice</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">2</span><span style="color:#D8DEE9FF;">)</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#88C0D0;">  options</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9;"> options</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">options</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç°åœ¨ï¼Œ<code>args</code> å˜é‡åŒ…å«äº†è§£æåçš„å‚æ•°å¯¹è±¡ã€‚ä½ å¯ä»¥åŸºäºè¿™ä¸ªå¯¹è±¡çš„å†…å®¹æ¥å†³å®šå±•ç¤ºç‰ˆæœ¬ä¿¡æ¯è¿˜æ˜¯å¸®åŠ©ä¿¡æ¯ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">args</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">values</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">version</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Version 1.0.0</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;"> else</span><span style="color:#81A1C1;"> if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">args</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">values</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">help</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Usage: node myApp.js [--version] [--help]</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ€»ç»“ä¸€ä¸‹ï¼Œ<code>parseArgs tokens</code> æä¾›äº†ä¸€ç§éå¸¸æ–¹ä¾¿çš„æ–¹å¼æ¥è§£æå‘½ä»¤è¡Œå‚æ•°ã€‚ä½ åªéœ€è¦å®šä¹‰å¥½ä½ çš„å‚æ•°è§„æ ¼ï¼Œç„¶åè®© Node.js ä¸ºä½ å®Œæˆå‰©ä¸‹çš„è§£æå·¥ä½œã€‚è¿™å¤§å¤§ç®€åŒ–äº†å‘½ä»¤è¡Œå·¥å…·çš„å¼€å‘æµç¨‹ã€‚</p><h2 id="util-parseenv-content" tabindex="-1"><a class="header-anchor" href="#util-parseenv-content"><span><a href="https://nodejs.org/docs/latest/api/util.html#utilparseenvcontent" target="_blank" rel="noopener noreferrer">util.parseEnv(content)</a></span></a></h2><p><code>util.parseEnv(content)</code> æ˜¯ Node.js ä¸­çš„ä¸€ä¸ªåŠŸèƒ½ï¼Œç”¨äºè§£æç¯å¢ƒå˜é‡æ–‡ä»¶ä¸­çš„å†…å®¹ï¼Œå¹¶å°†å®ƒä»¬è½¬æ¢æˆ JavaScript å¯¹è±¡ã€‚è¿™ä¸ªå‡½æ•°å±äº <code>util</code> æ¨¡å—ï¼Œè¿™ä¸ªæ¨¡å—åŒ…å«äº†å¾ˆå¤šå®ç”¨å·¥å…·å‡½æ•°ï¼Œå¸®åŠ©ä½ è¿›è¡Œå„ç§æ“ä½œã€‚</p><p>åœ¨ Node.js v21.7.1 çš„æ–‡æ¡£ä¸­æåˆ°äº†è¿™ä¸ªå‡½æ•°ï¼Œå…¶åŸºæœ¬ç”¨é€”æ˜¯è®©ä½ èƒ½å¤Ÿæ–¹ä¾¿åœ°è¯»å–å’Œä½¿ç”¨å­˜å‚¨åœ¨ç¯å¢ƒå˜é‡æ–‡ä»¶ï¼ˆé€šå¸¸æ˜¯ <code>.env</code> æ–‡ä»¶ï¼‰ä¸­çš„è®¾ç½®ã€‚ç¯å¢ƒå˜é‡æ–‡ä»¶é€šå¸¸ç”¨äºå­˜å‚¨é…ç½®ä¿¡æ¯ï¼Œå¦‚æ•°æ®åº“çš„è¿æ¥å­—ç¬¦ä¸²ã€API å¯†é’¥ç­‰ï¼Œè¿™äº›ä¿¡æ¯å¯èƒ½æ ¹æ®ä½ çš„å¼€å‘ã€æµ‹è¯•æˆ–ç”Ÿäº§ç¯å¢ƒè€Œæœ‰æ‰€ä¸åŒã€‚</p><h3 id="å¦‚ä½•ä½¿ç”¨-util-parseenv-content" tabindex="-1"><a class="header-anchor" href="#å¦‚ä½•ä½¿ç”¨-util-parseenv-content"><span>å¦‚ä½•ä½¿ç”¨ <code>util.parseEnv(content)</code></span></a></h3><p>é¦–å…ˆï¼Œä½ éœ€è¦å®‰è£… Node.js å¹¶ç¡®ä¿ä½ çš„ç‰ˆæœ¬è‡³å°‘æ˜¯ v21.7.1ï¼Œå› ä¸ºè¿™ä¸ªåŠŸèƒ½æ˜¯ä»è¿™ä¸ªç‰ˆæœ¬å¼€å§‹å¼•å…¥çš„ã€‚</p><p>å‡è®¾ä½ æœ‰ä¸€ä¸ªåä¸º <code>.env</code> çš„ç¯å¢ƒå˜é‡æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span>DB_HOST=localhost</span></span>
<span class="line"><span>DB_USER=root</span></span>
<span class="line"><span>DB_PASS=password123</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä½ å¯ä»¥ä½¿ç”¨ Node.js çš„ <code>fs</code> æ¨¡å—æ¥è¯»å–è¿™ä¸ªæ–‡ä»¶ï¼Œç„¶åä½¿ç”¨ <code>util.parseEnv(content)</code> æ¥è§£æå®ƒï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> fs</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">fs</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// è¯»å–.envæ–‡ä»¶çš„å†…å®¹</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> envContent</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> fs</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">readFileSync</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">.env</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">utf-8</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// ä½¿ç”¨util.parseEnvæ¥è§£æç¯å¢ƒå˜é‡</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> envVars</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">parseEnv</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">envContent</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">envVars</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿è¡Œä¸Šé¢çš„ä»£ç åï¼Œè¾“å‡ºå°†ä¼šæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«äº† <code>.env</code> æ–‡ä»¶ä¸­å®šä¹‰çš„æ‰€æœ‰ç¯å¢ƒå˜é‡ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  DB_HOST</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &#39;</span><span style="color:#A3BE8C;">localhost</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  DB_USER</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &#39;</span><span style="color:#A3BE8C;">root</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  DB_PASS</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &#39;</span><span style="color:#A3BE8C;">password123</span><span style="color:#ECEFF4;">&#39;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="å®é™…åº”ç”¨ä¾‹å­-3" tabindex="-1"><a class="header-anchor" href="#å®é™…åº”ç”¨ä¾‹å­-3"><span>å®é™…åº”ç”¨ä¾‹å­</span></a></h3><p><strong>ä¾‹å­ 1ï¼šè¿æ¥æ•°æ®åº“</strong></p><p>å‡è®¾ä½ æ­£åœ¨å¼€å‘ä¸€ä¸ªéœ€è¦è¿æ¥åˆ° MySQL æ•°æ®åº“çš„ Node.js åº”ç”¨ã€‚æ•°æ®åº“çš„è¿æ¥è¯¦æƒ…ï¼ˆä¾‹å¦‚ä¸»æœºåã€ç”¨æˆ·åå’Œå¯†ç ï¼‰å¯ä»¥å­˜å‚¨åœ¨ <code>.env</code> æ–‡ä»¶ä¸­ã€‚é€šè¿‡ä½¿ç”¨ <code>util.parseEnv(content)</code> æ¥è§£æè¿™äº›é…ç½®ï¼Œä½ å¯ä»¥è½»æ¾åœ°åœ¨ä»£ç ä¸­è·å–åˆ°è¿™äº›ä¿¡æ¯ï¼Œå¹¶ç”¨å®ƒä»¬æ¥å»ºç«‹æ•°æ®åº“è¿æ¥ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> mysql</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">mysql</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> fs</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">fs</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> envContent</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> fs</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">readFileSync</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">.env</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">utf-8</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> config</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">parseEnv</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">envContent</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> connection</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> mysql</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">createConnection</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#88C0D0;">  host</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9;"> config</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">DB_HOST</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#88C0D0;">  user</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9;"> config</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">DB_USER</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#88C0D0;">  password</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9;"> config</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">DB_PASS</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">connection</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">connect</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// è¿›è¡Œæ•°æ®åº“æ“ä½œ...</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>ä¾‹å­ 2ï¼šé…ç½®ç¬¬ä¸‰æ–¹ API è®¿é—®</strong></p><p>å¦‚æœä½ çš„åº”ç”¨éœ€è¦è®¿é—®ç¬¬ä¸‰æ–¹æœåŠ¡çš„ APIï¼Œè¿™äº›æœåŠ¡çš„å¯†é’¥å’Œè®¿é—®åœ°å€ä¹Ÿå¯ä»¥å­˜æ”¾åœ¨ <code>.env</code> æ–‡ä»¶ä¸­ã€‚é€šè¿‡è§£æ <code>.env</code> æ–‡ä»¶ï¼Œä½ å¯ä»¥åœ¨ä»£ç ä¸­æ–¹ä¾¿åœ°è®¿é—®è¿™äº›æ•æ„Ÿä¿¡æ¯ï¼Œè€Œæ— éœ€ç¡¬ç¼–ç åœ¨ä»£ç ä¸­ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> axios</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">axios</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> fs</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">fs</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> envContent</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> fs</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">readFileSync</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">.env</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">utf-8</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#ECEFF4;"> {</span><span style="color:#D8DEE9;"> API_KEY</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> API_URL</span><span style="color:#ECEFF4;"> }</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">parseEnv</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">envContent</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">axios</span></span>
<span class="line"><span style="color:#ECEFF4;">  .</span><span style="color:#88C0D0;">get</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">`</span><span style="color:#81A1C1;">${</span><span style="color:#D8DEE9;">API_URL</span><span style="color:#81A1C1;">}</span><span style="color:#A3BE8C;">?api_key=</span><span style="color:#81A1C1;">${</span><span style="color:#D8DEE9;">API_KEY</span><span style="color:#81A1C1;">}</span><span style="color:#ECEFF4;">`</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#ECEFF4;">  .</span><span style="color:#88C0D0;">then</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">response</span><span style="color:#ECEFF4;">)</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">response</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">data</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#ECEFF4;">  .</span><span style="color:#88C0D0;">catch</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">error</span><span style="color:#ECEFF4;">)</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">error</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é€šè¿‡è¿™ç§æ–¹å¼ï¼Œä½ å¯ä»¥æ›´å®‰å…¨ã€æ›´çµæ´»åœ°ç®¡ç†é¡¹ç›®çš„é…ç½®ï¼ŒåŒæ—¶é¿å…å°†æ•æ„Ÿä¿¡æ¯æš´éœ²åœ¨ä»£ç åº“ä¸­ã€‚</p><h2 id="util-promisify-original" tabindex="-1"><a class="header-anchor" href="#util-promisify-original"><span><a href="https://nodejs.org/docs/latest/api/util.html#utilpromisifyoriginal" target="_blank" rel="noopener noreferrer">util.promisify(original)</a></span></a></h2><p>å½“ä½ å¼€å§‹å­¦ä¹ ç¼–ç¨‹ï¼Œå°¤å…¶æ˜¯ JavaScriptï¼Œåœ¨å¤„ç†å¼‚æ­¥æ“ä½œæ—¶ï¼Œç»å¸¸ä¼šé‡åˆ°å›è°ƒå‡½æ•°(callbacks)ã€‚ä½†éšç€åº”ç”¨å˜å¾—å¤æ‚ï¼Œå°±ä¼šå‡ºç°æ‰€è°“çš„â€œå›è°ƒåœ°ç‹±â€ï¼ˆCallback Hellï¼‰ï¼Œä»£ç å˜å¾—éš¾ä»¥é˜…è¯»å’Œç»´æŠ¤ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒNode.js å¼•å…¥äº†<code>Promises</code>ï¼Œåæ¥åˆæ·»åŠ äº†<code>async/await</code>è¯­æ³•ï¼Œä½¿å¼‚æ­¥ä»£ç æ›´åŠ ç®€æ´æ˜“æ‡‚ã€‚</p><p>åœ¨ Node.js ä¸­ï¼Œæœ‰å¾ˆå¤šåŸç”Ÿçš„æ¨¡å—å’Œæ–¹æ³•ä»ç„¶ä½¿ç”¨å›è°ƒæ–¹å¼ã€‚ä¸ºäº†è®©è¿™äº›åŸºäºå›è°ƒçš„å‡½æ•°èƒ½å¤Ÿè¿”å›<code>Promise</code>ä»è€Œä½¿ç”¨<code>async/await</code>ï¼ŒNode.js æä¾›äº†ä¸€ä¸ªå·¥å…·å‡½æ•°<code>util.promisify()</code>ã€‚è¿™ä¸ªå‡½æ•°å¯ä»¥å°†éµå¾ªå¸¸è§çš„é”™è¯¯ä¼˜å…ˆçš„å›è°ƒé£æ ¼çš„å‡½æ•°ï¼ˆå³é”™è¯¯ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°çš„å‡½æ•°ï¼‰è½¬æ¢ä¸ºè¿”å›<code>Promise</code>çš„ç‰ˆæœ¬ã€‚</p><h3 id="ä½¿ç”¨util-promisify" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨util-promisify"><span>ä½¿ç”¨<code>util.promisify()</code></span></a></h3><p>é¦–å…ˆçœ‹ä¸€ä¸‹æ²¡æœ‰<code>promisify</code>çš„æƒ…å†µï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> fs</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">fs</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">fs</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">readFile</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">/path/to/file</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">utf8</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> (</span><span style="color:#D8DEE9;">err</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> data</span><span style="color:#ECEFF4;">)</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">err</span><span style="color:#D8DEE9FF;">) </span><span style="color:#81A1C1;">throw</span><span style="color:#D8DEE9;"> err</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">data</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†<code>fs.readFile</code>æ¥å¼‚æ­¥åœ°è¯»å–æ–‡ä»¶å†…å®¹ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ªå›è°ƒä½œä¸ºå‚æ•°ã€‚å¦‚æœå‡ºé”™ï¼Œé”™è¯¯å°†ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ä¼ é€’ç»™å›è°ƒã€‚</p><p>ç°åœ¨ï¼Œæˆ‘ä»¬ä½¿ç”¨<code>util.promisify</code>æ¥è½¬æ¢è¿™ä¸ªå‡½æ•°ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> fs</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">fs</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#616E88;">// å°† fs.readFile è½¬æ¢ä¸º promise ç‰ˆæœ¬</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> readFileAsync</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">promisify</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">fs</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">readFile</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88C0D0;">readFileAsync</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">/path/to/file</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">utf8</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#ECEFF4;">  .</span><span style="color:#88C0D0;">then</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">data</span><span style="color:#ECEFF4;">)</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#D8DEE9;"> console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">data</span><span style="color:#D8DEE9FF;">))</span></span>
<span class="line"><span style="color:#ECEFF4;">  .</span><span style="color:#88C0D0;">catch</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">err</span><span style="color:#ECEFF4;">)</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#D8DEE9;"> console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">error</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">err</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é€šè¿‡ä½¿ç”¨<code>util.promisify()</code>ï¼Œæˆ‘ä»¬å¯ä»¥å°†<code>fs.readFile</code>è½¬æ¢æˆè¿”å›<code>Promise</code>å¯¹è±¡çš„å‡½æ•°ï¼Œè¿™æ ·å°±å¯ä»¥ä½¿ç”¨<code>.then()</code>å’Œ<code>.catch()</code>æ¥å¤„ç†æˆåŠŸæˆ–å¤±è´¥çš„æƒ…å†µï¼Œç”šè‡³å¯ä»¥é…åˆ<code>async/await</code>ä½¿ç”¨ï¼Œè¿›ä¸€æ­¥ç®€åŒ–å¼‚æ­¥æ“ä½œï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">async</span><span style="color:#81A1C1;"> function</span><span style="color:#88C0D0;"> main</span><span style="color:#ECEFF4;">()</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  try</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">    const</span><span style="color:#D8DEE9;"> data</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> await</span><span style="color:#88C0D0;"> readFileAsync</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">/path/to/file</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">utf8</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">data</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span><span style="color:#81A1C1;"> catch</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">err</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">error</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">err</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88C0D0;">main</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="å®é™…è¿ç”¨åœºæ™¯" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨åœºæ™¯"><span>å®é™…è¿ç”¨åœºæ™¯</span></a></h3><ol><li><strong>æ–‡ä»¶æ“ä½œ</strong> - å¦‚ä¸Šé¢çš„ä¾‹å­æ‰€ç¤ºï¼Œå¯¹äº<code>fs</code>æ¨¡å—ä¸­çš„å¼‚æ­¥æ“ä½œï¼Œå¦‚è¯»å†™æ–‡ä»¶ï¼Œä½¿ç”¨<code>util.promisify</code>å¯ä»¥è®©ä»£ç æ›´åŠ æ•´æ´ä¸”æ˜“äºç†è§£ã€‚</li><li><strong>æ•°æ®åº“æ“ä½œ</strong> - åœ¨ä½¿ç”¨æŸäº›è€æ—§çš„æ•°æ®åº“å®¢æˆ·ç«¯åº“æ—¶ï¼Œå¯èƒ½è¿˜éœ€è¦ä¾èµ–å›è°ƒå‡½æ•°æ¥å¤„ç†æ•°æ®åº“æŸ¥è¯¢ç»“æœã€‚é€šè¿‡<code>util.promisify</code>ï¼Œå¯ä»¥å°†è¿™äº›æ“ä½œè½¬æ¢ä¸º Promiseï¼Œè¿›è€Œç”¨<code>async/await</code>æ¥ç®¡ç†æµç¨‹ã€‚</li><li><strong>è‡ªå®šä¹‰å¼‚æ­¥å‡½æ•°</strong> - å¦‚æœä½ æ­£åœ¨ä½¿ç”¨æˆ–åˆ›å»ºäº†ä¸€ä¸ªåŸºäºå›è°ƒé£æ ¼çš„å¼‚æ­¥ APIï¼Œæƒ³è¦äº«å—<code>async/await</code>å¸¦æ¥çš„å¥½å¤„ï¼Œå¯é€šè¿‡<code>util.promisify</code>è½»æ¾å®ç°è½¬æ¢ã€‚</li></ol><p>åˆ©ç”¨<code>util.promisify</code>èƒ½å¤Ÿå¸®åŠ©å¼€å‘è€…å°†é—ç•™ä»£ç æˆ–ä¸æ”¯æŒ Promise çš„ç¬¬ä¸‰æ–¹åº“è½¬æ¢ä¸ºè¿”å› Promise çš„å‡½æ•°ï¼Œä»è€Œä½¿ç”¨ç°ä»£ JavaScript è¯­è¨€ç‰¹æ€§æ¥æ”¹å–„ä»£ç çš„å¯è¯»æ€§å’Œç»´æŠ¤æ€§ã€‚</p><h3 id="custom-promisified-functions" tabindex="-1"><a class="header-anchor" href="#custom-promisified-functions"><span><a href="https://nodejs.org/docs/latest/api/util.html#custom-promisified-functions" target="_blank" rel="noopener noreferrer">Custom promisified functions</a></span></a></h3><p>Node.js ä¸­çš„ &quot;Custom promisified functions&quot; æ˜¯æŒ‡åˆ©ç”¨ Node.js å†…ç½®çš„ <code>util</code> æ¨¡å—ä¸­çš„ <code>promisify</code> æ–¹æ³•ï¼Œå°†éµå¾ªå¸¸è§é”™è¯¯ä¼˜å…ˆçš„å›è°ƒé£æ ¼ï¼ˆå³æœ€åä¸€ä¸ªå‚æ•°ä¸ºå›è°ƒå‡½æ•°ï¼Œå›è°ƒå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºé”™è¯¯å¯¹è±¡ï¼Œä¹‹åçš„å‚æ•°ç”¨äºè¿”å›ç»“æœï¼‰çš„å‡½æ•°è½¬æ¢æˆè¿”å› promise å¯¹è±¡çš„ç‰ˆæœ¬ã€‚è¿™ä¸€ç‚¹å¯¹äºä½¿ç”¨ async/await è¯­æ³•æˆ–è€…æƒ³è¦ä½¿ç”¨ Promise é“¾è¿›è¡Œå¼‚æ­¥æ§åˆ¶æµç®¡ç†çš„å¼€å‘è€…æ¥è¯´éå¸¸æœ‰ç”¨ã€‚</p><h3 id="ä¸ºä»€ä¹ˆéœ€è¦-custom-promisified-functions" tabindex="-1"><a class="header-anchor" href="#ä¸ºä»€ä¹ˆéœ€è¦-custom-promisified-functions"><span>ä¸ºä»€ä¹ˆéœ€è¦ Custom Promisified Functions</span></a></h3><p>åœ¨ ES6 å¼•å…¥ Promise å’Œ ES8 å¼•å…¥ async/await ä¹‹å‰ï¼ŒNode.js ç¤¾åŒºå¹¿æ³›é‡‡ç”¨äº†å›è°ƒï¼ˆCallbackï¼‰æ¨¡å¼è¿›è¡Œå¼‚æ­¥ç¼–ç ã€‚è™½ç„¶å›è°ƒæ¨¡å¼å¯¹äºæ—©æœŸ JavaScript æ¥è¯´æ˜¯è§£å†³å¼‚æ­¥æ“ä½œçš„æœ‰æ•ˆæ‰‹æ®µï¼Œä½†å®ƒä¹Ÿå¸¦æ¥äº†â€œå›è°ƒåœ°ç‹±ï¼ˆCallback Hellï¼‰â€ç­‰é—®é¢˜ï¼Œä½¿å¾—ä»£ç éš¾ä»¥ç†è§£å’Œç»´æŠ¤ã€‚Promise æä¾›äº†æ›´åŠ æ¸…æ™°å’Œç®€æ´çš„å¼‚æ­¥å¤„ç†æ–¹å¼ï¼Œè€Œ async/await è®©å¼‚æ­¥ä»£ç çœ‹èµ·æ¥æ›´åƒæ˜¯åŒæ­¥ä»£ç ã€‚</p><h3 id="å¦‚ä½•ä½¿ç”¨-3" tabindex="-1"><a class="header-anchor" href="#å¦‚ä½•ä½¿ç”¨-3"><span>å¦‚ä½•ä½¿ç”¨</span></a></h3><p>å‡è®¾ä½ æœ‰ä¸€ä¸ªéµå¾ª Node.js å›è°ƒé£æ ¼çš„å‡½æ•° <code>fs.readFile()</code>ï¼Œç”¨äºå¼‚æ­¥è¯»å–æ–‡ä»¶å†…å®¹ã€‚æ ‡å‡†çš„ <code>readFile</code> å‡½æ•°éœ€è¦æä¾›æ–‡ä»¶è·¯å¾„ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå›è°ƒå‡½æ•°ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ï¼š</p><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" data-title="js" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> fs</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">fs</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">fs</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">readFile</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">/path/to/file</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> (</span><span style="color:#D8DEE9;">err</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> data</span><span style="color:#ECEFF4;">)</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">err</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">error</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Error reading file:</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> err</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">    return;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">File content:</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> data</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä½¿ç”¨ <code>util.promisify</code> å°†å…¶è½¬æ¢æˆè¿”å› promise çš„å‡½æ•°ï¼š</p><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" data-title="js" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> fs</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">fs</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å°† fs.readFile è½¬æ¢ä¸º promise å½¢å¼çš„ readFile</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> readFilePromise</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">promisify</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">fs</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">readFile</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88C0D0;">readFilePromise</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">/path/to/file</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#ECEFF4;">  .</span><span style="color:#88C0D0;">then</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">data</span><span style="color:#ECEFF4;">)</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">File content:</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> data</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#ECEFF4;">  .</span><span style="color:#88C0D0;">catch</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">err</span><span style="color:#ECEFF4;">)</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">error</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Error reading file:</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> err</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç°åœ¨ï¼Œä½ å¯ä»¥ä½¿ç”¨ modern JavaScript çš„ç‰¹æ€§ï¼Œä¾‹å¦‚ async/awaitï¼Œæ¥å¤„ç†å¼‚æ­¥æ“ä½œï¼Œä»è€Œä½¿ä»£ç æ›´æ˜“äºç†è§£å’Œç»´æŠ¤ï¼š</p><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" data-title="js" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">async</span><span style="color:#81A1C1;"> function</span><span style="color:#88C0D0;"> readMyFile</span><span style="color:#ECEFF4;">()</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  try</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">    const</span><span style="color:#D8DEE9;"> data</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> await</span><span style="color:#88C0D0;"> readFilePromise</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">/path/to/file</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">File content:</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> data</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span><span style="color:#81A1C1;"> catch</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">err</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">error</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Error reading file:</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> err</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88C0D0;">readMyFile</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="è‡ªå®šä¹‰-promisify-å‡½æ•°" tabindex="-1"><a class="header-anchor" href="#è‡ªå®šä¹‰-promisify-å‡½æ•°"><span>è‡ªå®šä¹‰ Promisify å‡½æ•°</span></a></h3><p>å¦‚æœä½ æœ‰ä¸€ä¸ªä¸éµå¾ªé”™è¯¯ä¼˜å…ˆå›è°ƒçº¦å®šçš„å‡½æ•°ï¼Œæˆ–è€…ä½ éœ€è¦å¯¹ promisified å‡½æ•°è¿›è¡Œè¿›ä¸€æ­¥çš„è‡ªå®šä¹‰ï¼ŒNode.js å…è®¸ä½ é€šè¿‡ä¿®æ”¹å‡½æ•°çš„ <code>util.promisify.custom</code> å±æ€§æ¥å®ç°ã€‚</p><p>ä¾‹å¦‚ï¼Œè€ƒè™‘ä»¥ä¸‹ä¸éµå¾ªä¼ ç»Ÿçš„ï¼ˆerror-first callbackï¼‰çº¦å®šçš„å¼‚æ­¥å‡½æ•°ï¼š</p><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" data-title="js" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">function</span><span style="color:#88C0D0;"> exampleFunction</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">param</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> callback</span><span style="color:#ECEFF4;">)</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#616E88;">  // å‡è®¾è¿™æ˜¯ä¸€ä¸ªå¼‚æ­¥æ“ä½œ</span></span>
<span class="line"><span style="color:#88C0D0;">  setTimeout</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">()</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#88C0D0;">    callback</span><span style="color:#D8DEE9FF;">(</span><span style="color:#81A1C1;">null</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> `</span><span style="color:#A3BE8C;">Processed </span><span style="color:#81A1C1;">${</span><span style="color:#D8DEE9;">param</span><span style="color:#81A1C1;">}</span><span style="color:#ECEFF4;">`</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  },</span><span style="color:#B48EAD;"> 1000</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸ºäº†å°†æ­¤å‡½æ•° promisifyï¼Œä½ å¯ä»¥è¿™æ ·åšï¼š</p><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" data-title="js" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">exampleFunction</span><span style="color:#D8DEE9FF;">[</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">promisify</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">custom</span><span style="color:#D8DEE9FF;">] </span><span style="color:#81A1C1;">=</span><span style="color:#ECEFF4;"> (</span><span style="color:#D8DEE9;">param</span><span style="color:#ECEFF4;">)</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  return</span><span style="color:#81A1C1;"> new</span><span style="color:#8FBCBB;"> Promise</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">resolve</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> reject</span><span style="color:#ECEFF4;">)</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#88C0D0;">    exampleFunction</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">param</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> (</span><span style="color:#D8DEE9;">err</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> result</span><span style="color:#ECEFF4;">)</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">      if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">err</span><span style="color:#D8DEE9FF;">) </span><span style="color:#88C0D0;">reject</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">err</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">      else</span><span style="color:#88C0D0;"> resolve</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">result</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">    }</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// ç°åœ¨ä½ å¯ä»¥åƒå¤„ç†åŸç”Ÿ Promise é‚£æ ·å¤„ç† exampleFunction</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> promisifiedExampleFunction</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">promisify</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">exampleFunction</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88C0D0;">promisifiedExampleFunction</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">myParam</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#ECEFF4;">  .</span><span style="color:#88C0D0;">then</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">result</span><span style="color:#ECEFF4;">)</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">result</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡º: Processed myParam</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#ECEFF4;">  .</span><span style="color:#88C0D0;">catch</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">error</span><span style="color:#ECEFF4;">)</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">error</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">error</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é€šè¿‡è¿™ç§æ–¹å¼ï¼Œä½ å¯ä»¥å°†ä»»ä½•å¼‚æ­¥å‡½æ•°è½¬æ¢æˆè¿”å› promise çš„å‡½æ•°ï¼Œæ— è®ºå®ƒæ˜¯å¦éµå¾ªé”™è¯¯ä¼˜å…ˆçš„å›è°ƒé£æ ¼ï¼Œä»è€Œå……åˆ†åˆ©ç”¨ modern JavaScript æä¾›çš„å¼‚æ­¥å¤„ç†ä¼˜åŠ¿ã€‚</p><h3 id="util-promisify-custom" tabindex="-1"><a class="header-anchor" href="#util-promisify-custom"><span><a href="https://nodejs.org/docs/latest/api/util.html#utilpromisifycustom" target="_blank" rel="noopener noreferrer">util.promisify.custom</a></span></a></h3><p>äº†è§£ <code>util.promisify.custom</code> å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆç®€å•äº†è§£å‡ ä¸ªå…³é”®æ¦‚å¿µï¼šNode.jsã€å›è°ƒï¼ˆcallbackï¼‰ã€Promiseï¼Œä»¥åŠ <code>util.promisify</code> å‡½æ•°ã€‚</p><ol><li><strong>Node.js</strong> æ˜¯ä¸€ä¸ªåŸºäº Chrome V8 å¼•æ“çš„ JavaScript è¿è¡Œç¯å¢ƒï¼Œè®©å¼€å‘è€…èƒ½å¤Ÿä½¿ç”¨ JavaScript æ¥ç¼–å†™åç«¯ä»£ç ã€‚</li><li><strong>å›è°ƒï¼ˆCallbackï¼‰</strong> æ˜¯ Node.js ä¸­å¤„ç†å¼‚æ­¥æ“ä½œçš„ä¸€ç§ä¼ ç»Ÿæ–¹å¼ã€‚å®ƒæ˜¯ä¸€ä¸ªè¢«ä½œä¸ºå‚æ•°ä¼ é€’ç»™å¦ä¸€ä¸ªå‡½æ•°ï¼Œå¹¶åœ¨æŸä¸ªäº‹ä»¶æˆ–æ¡ä»¶æ»¡è¶³åæ‰§è¡Œçš„å‡½æ•°ã€‚</li><li><strong>Promise</strong> æ˜¯ç°ä»£ JavaScript ä¸­ç”¨äºå¤„ç†å¼‚æ­¥æ“ä½œçš„ä¸€ç§æ›´ä¼˜é›…çš„æ–¹å¼ã€‚ä¸€ä¸ª Promise å¯¹è±¡ä»£è¡¨äº†æœªæ¥å°†è¦å‘ç”Ÿçš„äº‹æƒ…çš„æœ€ç»ˆæˆåŠŸå€¼æˆ–å¤±è´¥åŸå› ã€‚</li><li><strong><code>util.promisify</code></strong> æ˜¯ä¸€ä¸ªå·¥å…·å‡½æ•°ï¼Œå®ƒå¯ä»¥å°†éµå¾ªå¸¸è§é”™è¯¯ä¼˜å…ˆçš„å›è°ƒé£æ ¼çš„å‡½æ•°ï¼ˆå³æœ€åä¸€ä¸ªå‚æ•°ä¸ºå›è°ƒå‡½æ•°çš„å‡½æ•°ï¼Œå›è°ƒå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºé”™è¯¯å¯¹è±¡ï¼Œå¦‚æœæ²¡æœ‰é”™è¯¯åˆ™ä¸º nullï¼‰è½¬æ¢æˆè¿”å› Promise å¯¹è±¡çš„å‡½æ•°ï¼Œä»è€Œè®©ä½ èƒ½å¤Ÿä»¥ Promise çš„æ–¹å¼ä½¿ç”¨è¿™äº›å‡½æ•°ã€‚</li></ol><h3 id="ä»€ä¹ˆæ˜¯-util-promisify-custom" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯-util-promisify-custom"><span>ä»€ä¹ˆæ˜¯ <code>util.promisify.custom</code>?</span></a></h3><p><code>util.promisify.custom</code> æ˜¯ä¸€ä¸ª Symbolï¼Œå®ƒå¯ä»¥ä½œä¸ºåŸå§‹å›è°ƒé£æ ¼å‡½æ•°çš„å±æ€§ï¼ŒæŒ‡å‘ä¸€ä¸ªå®šåˆ¶ç‰ˆçš„ <code>promisify</code> å®ç°ã€‚ç®€å•æ¥è¯´ï¼Œå¦‚æœä½ æœ‰ä¸€ä¸ªä¸ç¬¦åˆ Node.js å¸¸è§„å›è°ƒé£æ ¼ï¼ˆé”™è¯¯ä¼˜å…ˆçš„å›è°ƒï¼‰çš„å‡½æ•°ï¼Œæˆ–è€…ä½ æƒ³å¯¹ <code>promisify</code> è½¬æ¢è¿‡ç¨‹è¿›è¡Œå®šåˆ¶ï¼Œä½ å¯ä»¥é€šè¿‡æ·»åŠ  <code>util.promisify.custom</code> å±æ€§æ¥æä¾›ä¸€ä¸ªè‡ªå®šä¹‰çš„ Promise ç‰ˆæœ¬ã€‚</p><h3 id="å®é™…è¿ç”¨-4" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨-4"><span>å®é™…è¿ç”¨</span></a></h3><p>å‡è®¾æˆ‘ä»¬æœ‰å¦‚ä¸‹ä¸€ä¸ªä¸éµå¾ªé”™è¯¯ä¼˜å…ˆå›è°ƒé£æ ¼çš„å‡½æ•°ï¼Œå®ƒæ‰§è¡Œå®Œæˆåé€šè¿‡å›è°ƒè¿”å›ç»“æœï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">function</span><span style="color:#88C0D0;"> exampleFunc</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">arg</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> callback</span><span style="color:#ECEFF4;">)</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#616E88;">  // æ¨¡æ‹Ÿå¼‚æ­¥æ“ä½œ</span></span>
<span class="line"><span style="color:#88C0D0;">  setTimeout</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">()</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#88C0D0;">    callback</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">`</span><span style="color:#A3BE8C;">å¤„ç†ç»“æœ: </span><span style="color:#81A1C1;">${</span><span style="color:#D8DEE9;">arg</span><span style="color:#81A1C1;">}</span><span style="color:#ECEFF4;">`</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  },</span><span style="color:#B48EAD;"> 1000</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è‹¥ç›´æ¥ä½¿ç”¨ <code>util.promisify</code> å°è¯•è½¬æ¢æ­¤å‡½æ•°ï¼Œä¼šå‡ºç°é—®é¢˜ï¼Œå› ä¸º <code>exampleFunc</code> ä¸éµå¾ªé”™è¯¯ä¼˜å…ˆçš„å›è°ƒçº¦å®šã€‚è¿™æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ <code>util.promisify.custom</code> æ¥åˆ¶å®šä¸€ä¸ªè½¬æ¢ç­–ç•¥ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å®šä¹‰ util.promisify.custom</span></span>
<span class="line"><span style="color:#D8DEE9;">exampleFunc</span><span style="color:#D8DEE9FF;">[</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">promisify</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">custom</span><span style="color:#D8DEE9FF;">] </span><span style="color:#81A1C1;">=</span><span style="color:#ECEFF4;"> (</span><span style="color:#D8DEE9;">arg</span><span style="color:#ECEFF4;">)</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  return</span><span style="color:#81A1C1;"> new</span><span style="color:#8FBCBB;"> Promise</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">resolve</span><span style="color:#ECEFF4;">)</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#88C0D0;">    exampleFunc</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">arg</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> (</span><span style="color:#D8DEE9;">result</span><span style="color:#ECEFF4;">)</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#88C0D0;">      resolve</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">result</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">    }</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// ä½¿ç”¨ util.promisify è¿›è¡Œè½¬æ¢</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> promisifiedExampleFunc</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">promisify</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">exampleFunc</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// ä½¿ç”¨ Promise æ–¹å¼è°ƒç”¨</span></span>
<span class="line"><span style="color:#88C0D0;">promisifiedExampleFunc</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">æµ‹è¯•</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">then</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">log</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡º: å¤„ç†ç»“æœ: æµ‹è¯•</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆå®šä¹‰äº† <code>exampleFunc[util.promisify.custom]</code> å±æ€§ï¼Œä½¿å…¶è¿”å›ä¸€ä¸ªæ–°çš„ Promise å¯¹è±¡ï¼Œç„¶ååœ¨ Promise ä¸­è°ƒç”¨åŸå‡½æ•°å¹¶åœ¨å›è°ƒä¸­è§£æ Promiseã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥åˆ©ç”¨ <code>util.promisify</code> å¾—åˆ°ä¸€ä¸ªè¿”å› Promise çš„å‡½æ•°ï¼Œè€Œæ— éœ€æ‹…å¿ƒåŸå‡½æ•°ä¸éµå¾ªé”™è¯¯ä¼˜å…ˆçš„å›è°ƒçº¦å®šã€‚</p><p>æ€»ç»“æ¥è¯´ï¼Œ<code>util.promisify.custom</code> æä¾›äº†ä¸€ç§çµæ´»çš„æ–¹æ³•ï¼Œè®©å¼€å‘è€…èƒ½å¤Ÿä¸ºç‰¹å®šå‡½æ•°è‡ªå®šä¹‰ <code>promisify</code> çš„è¡Œä¸ºï¼Œä»è€Œä½¿å¾—å‡ ä¹ä»»ä½•ç±»å‹çš„å¼‚æ­¥æ“ä½œéƒ½èƒ½å¤Ÿä»¥ Promise çš„å½¢å¼ä½¿ç”¨ï¼Œç®€åŒ–äº†å¼‚æ­¥ç¼–ç¨‹çš„å¤æ‚åº¦ã€‚</p><h2 id="util-stripvtcontrolcharacters-str" tabindex="-1"><a class="header-anchor" href="#util-stripvtcontrolcharacters-str"><span><a href="https://nodejs.org/docs/latest/api/util.html#utilstripvtcontrolcharactersstr" target="_blank" rel="noopener noreferrer">util.stripVTControlCharacters(str)</a></span></a></h2><p>Node.js æ˜¯ä¸€ä¸ªåŸºäº Chrome V8 å¼•æ“çš„ JavaScript è¿è¡Œç¯å¢ƒï¼Œå®ƒè®©å¼€å‘è€…å¯ä»¥ç”¨ JavaScript æ¥ç¼–å†™æœåŠ¡å™¨ç«¯çš„ä»£ç ã€‚åœ¨ Node.js çš„å„ç§ç‰ˆæœ¬ä¸­ï¼Œä¼šä¸æ–­åœ°å¼•å…¥æ–°çš„åŠŸèƒ½å’Œå·¥å…·ï¼Œä»¥å¸®åŠ©å¼€å‘è€…æ›´é«˜æ•ˆåœ°ç¼–å†™ä»£ç ã€‚å…¶ä¸­ï¼Œ<code>util.stripVTControlCharacters(str)</code>æ˜¯ Node.js v21.7.1 ç‰ˆæœ¬ä¸­æ–°å¢åŠ çš„ä¸€ä¸ªéå¸¸å®ç”¨çš„åŠŸèƒ½ã€‚</p><h3 id="ä»€ä¹ˆæ˜¯-vt-æ§åˆ¶å­—ç¬¦" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯-vt-æ§åˆ¶å­—ç¬¦"><span>ä»€ä¹ˆæ˜¯ VT æ§åˆ¶å­—ç¬¦ï¼Ÿ</span></a></h3><p>åœ¨æ·±å…¥äº†è§£<code>util.stripVTControlCharacters(str)</code>ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆç®€å•äº†è§£ä¸€ä¸‹ä»€ä¹ˆæ˜¯ VTï¼ˆVertical Tabï¼‰æ§åˆ¶å­—ç¬¦ã€‚VT æ§åˆ¶å­—ç¬¦æ˜¯ä¸€ç»„æ§åˆ¶å­—ç¬¦ï¼Œå®ƒä»¬åœ¨æ–‡æœ¬å­—ç¬¦ä¸²ä¸­ç”¨æ¥æ§åˆ¶æ–‡æœ¬çš„æ˜¾ç¤ºæ–¹å¼ï¼Œæ¯”å¦‚é¢œè‰²ã€èƒŒæ™¯ã€é—ªçƒç­‰ç­‰ã€‚è¿™äº›æ§åˆ¶å­—ç¬¦é€šå¸¸æ˜¯çœ‹ä¸è§çš„ï¼Œå®ƒä»¬è¢«åµŒå…¥åˆ°æ–‡æœ¬å­—ç¬¦ä¸²ä¸­ç”¨æ¥å‘Šè¯‰ç»ˆç«¯æˆ–æ˜¾ç¤ºè®¾å¤‡ä»¥ç‰¹å®šçš„æ–¹å¼å±•ç¤ºæ–‡æœ¬ã€‚</p><h3 id="util-stripvtcontrolcharacters-str-çš„ä½œç”¨" tabindex="-1"><a class="header-anchor" href="#util-stripvtcontrolcharacters-str-çš„ä½œç”¨"><span><code>util.stripVTControlCharacters(str)</code>çš„ä½œç”¨</span></a></h3><p><code>util.stripVTControlCharacters(str)</code>è¿™ä¸ªæ–¹æ³•çš„ä½œç”¨å°±æ˜¯ä»ä¸€ä¸ªåŒ…å«æœ‰ VT æ§åˆ¶å­—ç¬¦çš„å­—ç¬¦ä¸²ä¸­ç§»é™¤æ‰€æœ‰çš„ VT æ§åˆ¶å­—ç¬¦ï¼Œè¿”å›ä¸€ä¸ªæ¸…ç†åçš„å­—ç¬¦ä¸²ã€‚è¿™å¯¹äºæŸäº›éœ€è¦å¤„ç†çº¯æ–‡æœ¬æ•°æ®çš„åº”ç”¨åœºåˆç‰¹åˆ«æœ‰ç”¨ï¼Œæ¯”å¦‚æ—¥å¿—å¤„ç†ã€æ–‡æœ¬åˆ†æç­‰åœºæ™¯ï¼Œå› ä¸º VT æ§åˆ¶å­—ç¬¦åœ¨è¿™äº›åœºæ™¯ä¸‹å¯èƒ½ä¼šé€ æˆå¹²æ‰°ã€‚</p><h3 id="å®é™…è¿ç”¨ä¾‹å­-6" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨ä¾‹å­-6"><span>å®é™…è¿ç”¨ä¾‹å­</span></a></h3><ol><li><strong>æ—¥å¿—æ¸…ç†</strong>ï¼šå‡è®¾ä½ åœ¨å¼€å‘ä¸€ä¸ª Node.js åº”ç”¨ï¼Œå¹¶ä¸”ä½¿ç”¨å½©è‰²æ—¥å¿—æ¥å¸®åŠ©è°ƒè¯•ï¼ˆé€šè¿‡ VT æ§åˆ¶å­—ç¬¦ç»™ä¸åŒçº§åˆ«çš„æ—¥å¿—ä¸Šè‰²ï¼‰ã€‚ä½†æ˜¯å½“ä½ éœ€è¦å°†è¿™äº›æ—¥å¿—ä¿å­˜åˆ°æ–‡ä»¶ä¸­ä¾›æ—¥ååˆ†ææ—¶ï¼Œè¿™äº›é¢œè‰²æ§åˆ¶å­—ç¬¦å°±å˜å¾—å¤šä½™ç”šè‡³ä¼šå¹²æ‰°æ—¥å¿—åˆ†æè½¯ä»¶çš„è§£æã€‚è¿™æ—¶å€™ï¼Œä½ å¯ä»¥åœ¨ä¿å­˜æ—¥å¿—ä¹‹å‰ä½¿ç”¨<code>util.stripVTControlCharacters</code>æ¥å»é™¤è¿™äº›æ§åˆ¶å­—ç¬¦ã€‚</li></ol><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> colorfulLog</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#EBCB8B;">\x1b</span><span style="color:#A3BE8C;">[32mSuccess:</span><span style="color:#EBCB8B;">\x1b</span><span style="color:#A3BE8C;">[0m Operation completed.</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¿™æ˜¯ä¸€ä¸ªå«æœ‰ç»¿è‰²å­—ä½“æ§åˆ¶å­—ç¬¦çš„å­—ç¬¦ä¸²</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> cleanedLog</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">stripVTControlCharacters</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">colorfulLog</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">cleanedLog</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡ºå°†ä¸åŒ…å«VTæ§åˆ¶å­—ç¬¦ï¼Œåªæœ‰çº¯æ–‡æœ¬ä¿¡æ¯</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li><p><strong>å‘½ä»¤è¡Œå·¥å…·è¾“å‡ºå¤„ç†</strong>ï¼šå¦‚æœä½ æ­£åœ¨ç¼–å†™ä¸€ä¸ª Node.js è„šæœ¬æ¥è°ƒç”¨å¹¶å¤„ç†å…¶ä»–å‘½ä»¤è¡Œå·¥å…·çš„è¾“å‡ºï¼Œè¿™äº›å¤–éƒ¨å·¥å…·å¯èƒ½ä¼šåœ¨å…¶è¾“å‡ºä¸­åŒ…å« VT æ§åˆ¶å­—ç¬¦æ¥ç¾åŒ–è¾“å‡ºã€‚å½“ä½ çš„ç›®æ ‡æ˜¯æå–è¿™äº›è¾“å‡ºä¸­çš„å…³é”®ä¿¡æ¯æ—¶ï¼Œå¯ä»¥ä½¿ç”¨<code>util.stripVTControlCharacters</code>æ¥æ¸…ç†è¾“å‡ºï¼Œè®©æ•°æ®æå–å˜å¾—æ›´å®¹æ˜“ã€‚</p></li><li><p><strong>ç»ˆç«¯ç•Œé¢(UI)æ¸…æ´</strong>ï¼šå¼€å‘ç»ˆç«¯ç•Œé¢åº”ç”¨æ—¶ï¼Œå¯èƒ½ä¼šæ¥æ”¶ç”¨æˆ·è¾“å…¥æˆ–æ˜¾ç¤ºæ¥è‡ªä¸å¯æ§æºçš„æ–‡æœ¬ã€‚ä½¿ç”¨<code>util.stripVTControlCharacters</code>ç¡®ä¿ UI çš„æ¸…æ™°å’Œå®‰å…¨ï¼Œé¿å…æœªç»æˆæƒçš„æ§åˆ¶å­—ç¬¦æ”¹å˜ UI è¡¨ç°æˆ–è¡Œä¸ºã€‚</p></li></ol><p>é€šè¿‡ä¸Šè¿°ä¾‹å­ï¼Œä½ å¯ä»¥çœ‹åˆ°<code>util.stripVTControlCharacters</code>åœ¨å®é™…å¼€å‘ä¸­çš„å‡ ç§åº”ç”¨åœºæ™¯ã€‚æ€»ä¹‹ï¼Œè¿™ä¸ªæ–¹æ³•ä¸ºå¤„ç†å’Œæ¸…ç†å¯èƒ½å«æœ‰ VT æ§åˆ¶å­—ç¬¦çš„å­—ç¬¦ä¸²æä¾›äº†ä¸€ç§ç®€å•æœ‰æ•ˆçš„æ–¹å¼ã€‚</p><h2 id="util-styletext-format-text" tabindex="-1"><a class="header-anchor" href="#util-styletext-format-text"><span><a href="https://nodejs.org/docs/latest/api/util.html#utilstyletextformat-text" target="_blank" rel="noopener noreferrer">util.styleText(format, text)</a></span></a></h2><p>å½“ä½ å¼€å§‹æ¢ç´¢ç¼–ç¨‹ä¸–ç•Œæ—¶ï¼Œäº†è§£ä¸åŒçš„å·¥å…·å’Œå¦‚ä½•ä½¿ç”¨å®ƒä»¬æ˜¯éå¸¸é‡è¦çš„ã€‚Node.js æ˜¯ä¸€ä¸ªæµè¡Œçš„ JavaScript è¿è¡Œç¯å¢ƒï¼Œå…è®¸ä½ åœ¨æœåŠ¡å™¨ç«¯è¿è¡Œ JavaScript ä»£ç ã€‚è¿™æ„å‘³ç€ä½ å¯ä»¥ç”¨ JavaScript åšå¾ˆå¤šäº‹æƒ…ï¼Œæ¯”å¦‚åˆ›å»ºç½‘ç«™åç«¯ã€å¼€å‘å‘½ä»¤è¡Œå·¥å…·ç­‰ã€‚ä»Šå¤©æˆ‘ä»¬æ¥èŠä¸€ä¸‹ Node.js v21.7.1 ä¸­çš„ä¸€ä¸ªç‰¹æ€§ï¼š<code>util.styleText(format, text)</code>ã€‚</p><h3 id="util-styletext-format-text-ç®€ä»‹" tabindex="-1"><a class="header-anchor" href="#util-styletext-format-text-ç®€ä»‹"><span><code>util.styleText(format, text)</code> ç®€ä»‹</span></a></h3><p><code>util.styleText(format, text)</code> æ˜¯ Node.js çš„ä¸€ä¸ªå®ç”¨å‡½æ•°ï¼ˆutility functionï¼‰ï¼Œå±äº <code>util</code> æ¨¡å—ã€‚è¿™ä¸ªå‡½æ•°è®©ä½ èƒ½å¤Ÿä»¥ä¸€ç§ç®€æ´çš„æ–¹å¼ç»™æ–‡æœ¬æ·»åŠ æ ·å¼ï¼Œç„¶åè¾“å‡ºåˆ°æ§åˆ¶å°æˆ–å…¶ä»–æ”¯æŒ ANSI é£æ ¼ä»£ç çš„åœ°æ–¹ã€‚</p><h3 id="å‚æ•°è¯¦è§£-1" tabindex="-1"><a class="header-anchor" href="#å‚æ•°è¯¦è§£-1"><span>å‚æ•°è¯¦è§£</span></a></h3><ul><li><code>format</code>ï¼šè¿™æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå®šä¹‰äº†ä½ æƒ³åº”ç”¨äºæ–‡æœ¬çš„æ ·å¼ã€‚ä¾‹å¦‚ï¼Œé¢œè‰²ã€èƒŒæ™¯è‰²ã€åŠ ç²—ç­‰ã€‚</li><li><code>text</code>ï¼šè¿™æ˜¯ä½ æƒ³è¦æ·»åŠ æ ·å¼çš„æ–‡æœ¬å†…å®¹ã€‚</li></ul><h3 id="å®é™…è¿ç”¨ä¾‹å­-7" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨ä¾‹å­-7"><span>å®é™…è¿ç”¨ä¾‹å­</span></a></h3><h4 id="ç¤ºä¾‹-1-æ”¹å˜æ–‡æœ¬é¢œè‰²" tabindex="-1"><a class="header-anchor" href="#ç¤ºä¾‹-1-æ”¹å˜æ–‡æœ¬é¢œè‰²"><span>ç¤ºä¾‹ 1ï¼šæ”¹å˜æ–‡æœ¬é¢œè‰²</span></a></h4><p>å‡è®¾ä½ æ­£åœ¨å†™ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·ï¼Œå¹¶å¸Œæœ›é”™è¯¯æ¶ˆæ¯ä»¥çº¢è‰²æ˜¾ç¤ºï¼Œä»¥ä¾¿ç”¨æˆ·æ›´å®¹æ˜“æ³¨æ„åˆ°ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> errorMessage</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">styleText</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">color:red</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">å‡ºé”™äº†ï¼è¯·æ£€æŸ¥æ‚¨çš„è¾“å…¥ã€‚</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">errorMessage</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ®µä»£ç ä¼šä»¥çº¢è‰²è¾“å‡º â€œå‡ºé”™äº†ï¼è¯·æ£€æŸ¥æ‚¨çš„è¾“å…¥ã€‚â€ åˆ°æ§åˆ¶å°ã€‚</p><h4 id="ç¤ºä¾‹-2-åŠ ç²—æ–‡æœ¬å¹¶æ”¹å˜èƒŒæ™¯è‰²" tabindex="-1"><a class="header-anchor" href="#ç¤ºä¾‹-2-åŠ ç²—æ–‡æœ¬å¹¶æ”¹å˜èƒŒæ™¯è‰²"><span>ç¤ºä¾‹ 2ï¼šåŠ ç²—æ–‡æœ¬å¹¶æ”¹å˜èƒŒæ™¯è‰²</span></a></h4><p>è®©æˆ‘ä»¬æŠŠæç¤ºä¿¡æ¯åŠ ç²—ï¼Œå¹¶ä¸”è®¾ç½®ç»¿è‰²èƒŒæ™¯ï¼Œä½¿å…¶æ›´ä¸ºé†’ç›®ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> successMessage</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">styleText</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">bold;bgColor:green</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">æ“ä½œæˆåŠŸï¼</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">successMessage</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ä¼šè¾“å‡ºåŠ ç²—çš„æ–‡æœ¬â€œæ“ä½œæˆåŠŸï¼â€å¹¶ä¸”èƒŒæ™¯è‰²ä¸ºç»¿è‰²ã€‚</p><h3 id="æ³¨æ„ç‚¹-1" tabindex="-1"><a class="header-anchor" href="#æ³¨æ„ç‚¹-1"><span>æ³¨æ„ç‚¹</span></a></h3><ul><li>å½“ä½ ä½¿ç”¨è¿™ä¸ªåŠŸèƒ½æ—¶ï¼Œè®°å¾— <code>util.styleText()</code> åªæ˜¯æ”¹å˜äº†æ–‡æœ¬çš„æ ·å¼ï¼Œè€Œä¸ä¼šæ”¹å˜æ–‡æœ¬æœ¬èº«ã€‚å¦‚æœæŸäº›ç»ˆç«¯æˆ–è¾“å‡ºè®¾å¤‡ä¸æ”¯æŒ ANSI é£æ ¼ä»£ç ï¼Œé‚£ä¹ˆå¯èƒ½ä¸ä¼šçœ‹åˆ°é¢„æœŸçš„æ ·å¼æ•ˆæœã€‚</li><li>æ ·å¼çš„åº”ç”¨å–å†³äºä½ çš„ç»ˆç«¯æˆ–æ§åˆ¶å°èƒ½å¤Ÿè¯†åˆ«å“ªäº› ANSI é£æ ¼ä»£ç ã€‚æ‰€ä»¥åœ¨ä¸åŒçš„ç¯å¢ƒä¸‹ï¼Œè¾“å‡ºçš„æ•ˆæœå¯èƒ½æœ‰æ‰€ä¸åŒã€‚</li></ul><p>é€šè¿‡ <code>util.styleText()</code>ï¼ŒNode.js æä¾›äº†ä¸€ç§ç®€å•çš„æ–¹å¼æ¥å¢å¼ºå‘½ä»¤è¡Œç•Œé¢çš„è§†è§‰æ•ˆæœå’Œç”¨æˆ·ä½“éªŒã€‚å°è¯•ä¸åŒçš„æ ·å¼ç»„åˆå¯ä»¥å¸®åŠ©ä½ æ›´å¥½åœ°å‘ç”¨æˆ·ä¼ è¾¾ä¿¡æ¯çš„é‡è¦æ€§å’Œæ€§è´¨ï¼Œä»è€Œåˆ›å»ºæ›´ç›´è§‚ã€æ›´å‹å¥½çš„å‘½ä»¤è¡Œåº”ç”¨ç¨‹åºã€‚</p><h2 id="class-util-textdecoder" tabindex="-1"><a class="header-anchor" href="#class-util-textdecoder"><span><a href="https://nodejs.org/docs/latest/api/util.html#class-utiltextdecoder" target="_blank" rel="noopener noreferrer">Class: util.TextDecoder</a></span></a></h2><p>Node.js çš„ <code>util.TextDecoder</code> ç±»æ˜¯ç”¨äºå°†ç¼–ç çš„æ–‡æœ¬æ•°æ®è½¬æ¢æˆå­—ç¬¦ä¸²çš„å·¥å…·ã€‚å®ƒéå¸¸æœ‰ç”¨ï¼Œå°¤å…¶æ˜¯åœ¨å¤„ç†ç½‘ç»œé€šä¿¡æˆ–æ–‡ä»¶è¯»å†™æ—¶ï¼Œå› ä¸ºè¿™äº›åœºæ™¯ä¸­çš„æ•°æ®å¸¸å¸¸æ˜¯ä»¥å­—èŠ‚æµï¼ˆæ¯”å¦‚ UTF-8 ç¼–ç çš„æ•°æ®ï¼‰çš„å½¢å¼å‡ºç°çš„ã€‚</p><h3 id="ç®€å•ä»‹ç»" tabindex="-1"><a class="header-anchor" href="#ç®€å•ä»‹ç»"><span>ç®€å•ä»‹ç»</span></a></h3><p>é¦–å…ˆï¼Œè®©æˆ‘ä»¬æ¥è§£é‡Šä¸€ä¸‹ä»€ä¹ˆæ˜¯æ–‡æœ¬ç¼–ç ã€‚å½“ä½ ä¿å­˜æˆ–ä¼ è¾“æ–‡æœ¬æ•°æ®ï¼ˆæ¯”å¦‚ä¸€ä¸ªå­—ç¬¦ä¸²ï¼‰æ—¶ï¼Œè®¡ç®—æœºå¹¶ä¸ä¼šç›´æ¥å­˜å‚¨æˆ–å‘é€è¿™ä¸ªå­—ç¬¦ä¸²ï¼Œè€Œæ˜¯å°†å®ƒè½¬æ¢æˆå­—èŠ‚åºåˆ—ï¼Œè¿™ä¸ªè¿‡ç¨‹å«åšç¼–ç ã€‚æœ€å¸¸è§çš„ç¼–ç æ ¼å¼ä¹‹ä¸€æ˜¯ UTF-8ã€‚ç›¸åº”åœ°ï¼Œåœ¨æ¥æ”¶ç«¯ï¼Œè¿™ä¸ªå­—èŠ‚åºåˆ—éœ€è¦è¢«è½¬æ¢å›åŸå§‹çš„å­—ç¬¦ä¸²ï¼Œè¿™ä¸ªè¿‡ç¨‹ç§°ä¸ºè§£ç ã€‚</p><p><code>util.TextDecoder</code> æ˜¯ Node.js æä¾›çš„ä¸€ä¸ª APIï¼Œå…è®¸ä½ è½»æ¾åœ°è¿›è¡Œè¿™ç§è§£ç å·¥ä½œã€‚å®ƒéµå¾ª WHATWG TextDecoder æ¥å£æ ‡å‡†ï¼Œæ„å‘³ç€å®ƒçš„ä½¿ç”¨æ–¹å¼ä¸åœ¨æµè§ˆå™¨ç¯å¢ƒä¸­ç›¸ä¼¼ï¼Œè¿™æœ‰åˆ©äºç¼–å†™è·¨å¹³å°ä»£ç ã€‚</p><h3 id="ä½¿ç”¨ä¾‹å­-1" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨ä¾‹å­-1"><span>ä½¿ç”¨ä¾‹å­</span></a></h3><ol><li><strong>è§£ç  UTF-8 ç¼–ç çš„æ•°æ®</strong></li></ol><p>æ¯”å¦‚ï¼Œä½ ä»ç½‘ç»œä¸Šä¸‹è½½äº†ä¸€æ®µ UTF-8 ç¼–ç çš„æ–‡æœ¬æ•°æ®ï¼Œæˆ–è€…ä»æ–‡ä»¶ä¸­è¯»å–äº†è¿™æ ·çš„æ•°æ®ï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>TextDecoder</code> æ¥è§£ç æˆå­—ç¬¦ä¸²ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#ECEFF4;"> {</span><span style="color:#D8DEE9;"> TextDecoder</span><span style="color:#ECEFF4;"> }</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#616E88;">// å‡è®¾ data æ˜¯ä¸€ä¸ªä»ç½‘ç»œè·å–çš„ Buffer å¯¹è±¡ï¼ŒåŒ…å« UTF-8 ç¼–ç çš„æ–‡æœ¬æ•°æ®</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> data</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> Buffer</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">from</span><span style="color:#D8DEE9FF;">([</span><span style="color:#B48EAD;">0x68</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 0x65</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 0x6c</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 0x6c</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 0x6f</span><span style="color:#D8DEE9FF;">])</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¿™ä¸ªä¾‹å­ä¸­çš„æ•°æ®ä»£è¡¨ &quot;hello&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> decoder</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> TextDecoder</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">utf-8</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // åˆ›å»ºä¸€ä¸ª &#39;utf-8&#39; ç¼–ç çš„ TextDecoder å®ä¾‹</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> text</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> decoder</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">decode</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">data</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // å°† UTF-8 ç¼–ç çš„æ•°æ®è§£ç æˆå­—ç¬¦ä¸²</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">text</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡º: hello</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li><strong>å¤„ç†é UTF-8 ç¼–ç çš„æ–‡æœ¬æ•°æ®</strong></li></ol><p><code>TextDecoder</code> ä¸ä»…æ”¯æŒ UTF-8ï¼Œè¿˜æ”¯æŒå¤šç§å…¶ä»–ç¼–ç ï¼ˆå¦‚ <code>utf-16le</code>, <code>iso-8859-2</code> ç­‰ï¼‰ã€‚å¦‚æœä½ å¾—åˆ°äº†ä¸€ä»½ä½¿ç”¨å…¶ä»–ç¼–ç çš„æ•°æ®ï¼Œåªéœ€è¦åœ¨åˆ›å»º <code>TextDecoder</code> å®ä¾‹æ—¶æŒ‡å®šæ­£ç¡®çš„ç¼–ç å³å¯ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#ECEFF4;"> {</span><span style="color:#D8DEE9;"> TextDecoder</span><span style="color:#ECEFF4;"> }</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#616E88;">// å‡è®¾ data æ˜¯ä¸€ä¸ª Buffer å¯¹è±¡ï¼ŒåŒ…å« utf-16le ç¼–ç çš„æ–‡æœ¬æ•°æ®</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> data</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> Buffer</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">from</span><span style="color:#D8DEE9FF;">([</span><span style="color:#B48EAD;">0xff</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 0xfe</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 0x61</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 0x00</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 0x62</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 0x00</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 0x63</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 0x00</span><span style="color:#D8DEE9FF;">])</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // &quot;abc&quot; in utf-16le</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> decoder</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> TextDecoder</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">utf-16le</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> text</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> decoder</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">decode</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">data</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">text</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡º: abc</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æ€»ç»“-5" tabindex="-1"><a class="header-anchor" href="#æ€»ç»“-5"><span>æ€»ç»“</span></a></h3><p><code>util.TextDecoder</code> æ˜¯ä¸€ä¸ªå¼ºå¤§ä¸”ç®€å•çš„å·¥å…·ï¼Œå¯ä»¥å¸®åŠ©ä½ åœ¨ Node.js åº”ç”¨ä¸­è½»æ¾å¤„ç†å„ç§ç¼–ç çš„æ–‡æœ¬æ•°æ®ã€‚æ— è®ºä½ æ˜¯åœ¨å¼€å‘ç½‘ç»œåº”ç”¨ã€å¤„ç†æ–‡ä»¶ï¼Œè¿˜æ˜¯ä¸å¤–éƒ¨ API äº¤äº’ï¼Œéƒ½å¯èƒ½ä¼šç”¨åˆ°å®ƒã€‚é€šè¿‡ä¸Šé¢çš„ä¾‹å­ï¼Œä½ åº”è¯¥èƒ½å¤Ÿçœ‹å‡ºå®ƒçš„åŸºæœ¬ç”¨é€”å’Œæ“ä½œæ–¹å¼ã€‚åœ¨å®é™…å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæ ¹æ®ä½ çš„å…·ä½“éœ€æ±‚é€‰æ‹©åˆé€‚çš„ç¼–ç æ ¼å¼ï¼Œå¹¶åˆ©ç”¨ <code>TextDecoder</code> è¿›è¡Œå¿«é€Ÿæœ‰æ•ˆçš„æ–‡æœ¬è§£ç ã€‚</p><h3 id="whatwg-supported-encodings" tabindex="-1"><a class="header-anchor" href="#whatwg-supported-encodings"><span><a href="https://nodejs.org/docs/latest/api/util.html#whatwg-supported-encodings" target="_blank" rel="noopener noreferrer">WHATWG supported encodings</a></span></a></h3><p>Node.js æ˜¯ä¸€ä¸ªåŸºäº Chrome çš„ V8 JavaScript å¼•æ“æ„å»ºçš„ JavaScript è¿è¡Œç¯å¢ƒã€‚å®ƒä½¿å¾—å¼€å‘è€…å¯ä»¥ä½¿ç”¨ JavaScript æ¥ç¼–å†™æœåŠ¡å™¨ç«¯çš„ä»£ç ã€‚è¿™æ„å‘³ç€ä½ å¯ä»¥ç”¨åŒä¸€ç§è¯­è¨€æ¥ç¼–å†™å‰ç«¯å’Œåç«¯ä»£ç ï¼Œè¿™åœ¨æé«˜å¼€å‘æ•ˆç‡å’Œå‡å°‘å­¦ä¹ æˆæœ¬ä¸Šéå¸¸æœ‰ä¼˜åŠ¿ã€‚</p><h3 id="whatwg-supported-encodings-1" tabindex="-1"><a class="header-anchor" href="#whatwg-supported-encodings-1"><span>WHATWG Supported Encodings</span></a></h3><p>åœ¨æ·±å…¥è§£é‡Šä¹‹å‰ï¼Œè®©æˆ‘å…ˆç®€å•ä»‹ç»ä¸‹ WHATWGï¼ˆWeb Hypertext Application Technology Working Groupï¼‰æ˜¯ä»€ä¹ˆã€‚WHATWG æ˜¯è´Ÿè´£å¼€å‘ HTML å’Œ DOM æ ‡å‡†çš„å·¥ä½œç»„ã€‚å®ƒä»¬å¯¹ Web æŠ€æœ¯çš„æ¼”è¿›æœ‰å·¨å¤§å½±å“ã€‚</p><p><code>WHATWG supported encodings</code> æ˜¯æŒ‡ Node.js æ”¯æŒçš„é‚£äº›éµå¾ª WHATWG ç¼–ç æ ‡å‡†çš„å­—ç¬¦ç¼–ç ã€‚ å­—ç¬¦ç¼–ç æ˜¯ä¸€å¥—è§„åˆ™ï¼Œç”¨äºå°†å­—ç¬¦ï¼ˆå¦‚å­—æ¯å’Œæ•°å­—ï¼‰æ˜ å°„åˆ°ä»è®¡ç®—æœºä¸­å­˜å‚¨å’Œä¼ è¾“çš„æ•°æ®ã€‚æ­£ç¡®çš„ç¼–ç å’Œè§£ç æ˜¯ç½‘ç»œé€šä¿¡ä¸­éå¸¸é‡è¦çš„éƒ¨åˆ†ï¼Œå› ä¸ºå®ƒç¡®ä¿äº†æ•°æ®èƒ½å¤Ÿè¢«æ­£ç¡®åœ°å‘é€ã€æ¥æ”¶å’Œè§£é‡Šã€‚</p><h4 id="å®é™…è¿ç”¨çš„ä¾‹å­-4" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨çš„ä¾‹å­-4"><span>å®é™…è¿ç”¨çš„ä¾‹å­</span></a></h4><ol><li><p><strong>æ–‡ä»¶å¤„ç†ï¼š</strong> è¯»å–å’Œå†™å…¥æ–‡ä»¶æ—¶ï¼Œéœ€è¦æŒ‡å®šå­—ç¬¦ç¼–ç ï¼Œä»¥ç¡®ä¿æ–‡ä»¶å†…å®¹çš„æ­£ç¡®æ€§ã€‚ä¾‹å¦‚ï¼Œåœ¨ Node.js ä¸­ï¼Œä½ å¯èƒ½ä¼šä½¿ç”¨ <code>fs.readFile</code> æˆ– <code>fs.writeFile</code> æ–¹æ³•æ“ä½œæ–‡ä»¶ï¼Œè¿™æ—¶å€™å°±éœ€è¦æŒ‡å®šç¼–ç ç±»å‹ï¼Œæ¯”å¦‚ UTF-8ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> fs</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">fs</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// è¯»å–æ–‡ä»¶ï¼ŒæŒ‡å®šç¼–ç ä¸º UTF-8</span></span>
<span class="line"><span style="color:#D8DEE9;">fs</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">readFile</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">/path/to/file.txt</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> {</span><span style="color:#88C0D0;"> encoding</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">utf-8</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;"> },</span><span style="color:#ECEFF4;"> (</span><span style="color:#D8DEE9;">err</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> data</span><span style="color:#ECEFF4;">)</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">err</span><span style="color:#D8DEE9FF;">) </span><span style="color:#81A1C1;">throw</span><span style="color:#D8DEE9;"> err</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">data</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å†™å…¥æ–‡ä»¶ï¼Œä¹Ÿä½¿ç”¨ UTF-8 ç¼–ç </span></span>
<span class="line"><span style="color:#D8DEE9;">fs</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">writeFile</span><span style="color:#D8DEE9FF;">(</span></span>
<span class="line"><span style="color:#ECEFF4;">  &quot;</span><span style="color:#A3BE8C;">/path/to/anotherFile.txt</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#ECEFF4;">  &quot;</span><span style="color:#A3BE8C;">Hello World!</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#ECEFF4;">  {</span><span style="color:#88C0D0;"> encoding</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">utf-8</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;"> },</span></span>
<span class="line"><span style="color:#ECEFF4;">  (</span><span style="color:#D8DEE9;">err</span><span style="color:#ECEFF4;">)</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">    if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">err</span><span style="color:#D8DEE9FF;">) </span><span style="color:#81A1C1;">throw</span><span style="color:#D8DEE9;"> err</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">File written successfully.</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span></span>
<span class="line"><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>ç½‘ç»œé€šä¿¡ï¼š</strong> åœ¨è¿›è¡Œ HTTP é€šä¿¡æˆ– WebSocket é€šä¿¡æ—¶ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯éœ€è¦åå•†ä½¿ç”¨ç›¸åŒçš„å­—ç¬¦ç¼–ç æ¥æ­£ç¡®è§£æå‘é€å’Œæ¥æ”¶çš„æ•°æ®ã€‚ä¾‹å¦‚ï¼ŒHTTP åè®®ä¸­é€šè¿‡ Content-Type å¤´éƒ¨æ¥æŒ‡å®šå­—ç¬¦ç¼–ç ã€‚</p></li><li><p><strong>æ•°æ®åº“æ“ä½œï¼š</strong> å½“ä½ ä½¿ç”¨ Node.js è¿æ¥å¹¶æ“ä½œæ•°æ®åº“æ—¶ï¼Œå¦‚ MySQLã€MongoDB ç­‰ï¼Œè¦ç¡®ä¿åº”ç”¨ç¨‹åºä¸æ•°æ®åº“é—´ä¼ è¾“çš„æ•°æ®ä½¿ç”¨æ­£ç¡®çš„ç¼–ç ï¼Œç‰¹åˆ«æ˜¯å½“å­˜å‚¨æˆ–æ£€ç´¢åŒ…å«ç‰¹æ®Šå­—ç¬¦çš„æ–‡æœ¬æ—¶ï¼ˆä¾‹å¦‚ï¼Œéè‹±æ–‡å­—ç¬¦ï¼‰ã€‚</p></li></ol><p>æ€»ç»“èµ·æ¥ï¼Œ<code>WHATWG supported encodings</code> çš„çŸ¥è¯†æ˜¯ä½ åœ¨è¿›è¡Œæ–‡ä»¶æ“ä½œã€ç½‘ç»œé€šä¿¡ä»¥åŠæ•°æ®åº“æ“ä½œæ—¶å¿…é¡»äº†è§£å’Œæ­£ç¡®åº”ç”¨çš„ï¼Œä»¥ç¡®ä¿æ•°æ®çš„å‡†ç¡®æ€§å’Œå®Œæ•´æ€§ã€‚é€šè¿‡ç†è§£å’Œä½¿ç”¨åˆé€‚çš„ç¼–ç æ–¹å¼ï¼Œä½ å¯ä»¥é¿å…è®¸å¤šç”±äºç¼–ç ä¸åŒ¹é…å¯¼è‡´çš„é—®é¢˜ï¼Œæ¯”å¦‚ä¹±ç ã€‚</p><h4 id="encodings-supported-by-default-with-full-icu-data" tabindex="-1"><a class="header-anchor" href="#encodings-supported-by-default-with-full-icu-data"><span><a href="https://nodejs.org/docs/latest/api/util.html#encodings-supported-by-default-with-full-icu-data" target="_blank" rel="noopener noreferrer">Encodings supported by default (with full ICU data)</a></span></a></h4><p>Node.js æ˜¯ä¸€ä¸ªåŸºäº Chrome V8 å¼•æ“çš„ JavaScript è¿è¡Œç¯å¢ƒã€‚å®ƒå…è®¸ä½ åœ¨æœåŠ¡å™¨ç«¯è¿è¡Œ JavaScript ä»£ç ï¼Œä»è€Œå¼€å‘å‡ºèƒ½å¤Ÿå¤„ç† HTTP è¯·æ±‚ã€è®¿é—®æ•°æ®åº“ç­‰åŠŸèƒ½çš„åº”ç”¨ç¨‹åºã€‚åœ¨ Node.js ä¸­ï¼Œå¯ä»¥å¤„ç†ä¸åŒç±»å‹çš„æ•°æ®ï¼ŒåŒ…æ‹¬æ–‡æœ¬æ–‡ä»¶ã€äºŒè¿›åˆ¶æ•°æ®ç­‰ã€‚è¿™é‡Œé¢ï¼Œæˆ‘ä»¬è¦æ¶‰åŠçš„æ˜¯â€œç¼–ç â€çš„æ¦‚å¿µã€‚</p><h3 id="ç¼–ç -encoding" tabindex="-1"><a class="header-anchor" href="#ç¼–ç -encoding"><span>ç¼–ç ï¼ˆEncodingï¼‰</span></a></h3><p>ç®€å•æ¥è¯´ï¼Œç¼–ç å°±æ˜¯å­—ç¬¦ï¼ˆå¦‚æ–‡å­—å’Œç¬¦å·ï¼‰ä¸è®¡ç®—æœºå­˜å‚¨ï¼ˆé€šå¸¸æ˜¯æ•°å­—ï¼‰ä¹‹é—´çš„è½¬æ¢è§„åˆ™ã€‚ç”±äºè®¡ç®—æœºå†…éƒ¨åªèƒ½è¯†åˆ«äºŒè¿›åˆ¶æ•°æ®ï¼ˆ0 å’Œ 1ï¼‰ï¼Œå› æ­¤éœ€è¦ä¸€å¥—è§„åˆ™å°†äººç±»å¯è¯»çš„æ–‡æœ¬è½¬æ¢ä¸ºäºŒè¿›åˆ¶æ•°æ®ï¼Œåä¹‹äº¦ç„¶ã€‚è¿™ä¸ªè§„åˆ™ï¼Œå°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„ç¼–ç ã€‚</p><h3 id="icu-international-components-for-unicode" tabindex="-1"><a class="header-anchor" href="#icu-international-components-for-unicode"><span>ICUï¼ˆInternational Components for Unicodeï¼‰</span></a></h3><p>ICU æ˜¯ä¸€ä¸ªå¹¿æ³›ä½¿ç”¨çš„ Unicode æ”¯æŒåº“ï¼Œæä¾›äº†å¯¹ä¸–ç•Œä¸Šå¤§å¤šæ•°è¯­è¨€æ–‡å­—çš„æ”¯æŒã€‚åœ¨å¤„ç†å›½é™…åŒ–åº”ç”¨æ—¶ï¼ŒICU æä¾›äº†å­—ç¬¦é›†çš„è½¬æ¢ã€æ—¥æœŸã€æ—¶é—´æ ¼å¼åŒ–ã€è´§å¸ä»¥åŠè¯­è¨€ç¿»è¯‘ç­‰åŠŸèƒ½ã€‚Node.js é€šè¿‡å†…ç½®çš„ ICU åº“ï¼Œä½¿å…¶åº”ç”¨èƒ½è½»æ¾å®ç°å›½é™…åŒ–ï¼Œæ”¯æŒå¤šç§è¯­è¨€çš„æ–‡æœ¬å¤„ç†ã€‚</p><h3 id="encodings-supported-by-default-with-full-icu-data-1" tabindex="-1"><a class="header-anchor" href="#encodings-supported-by-default-with-full-icu-data-1"><span>Encodings supported by default with full ICU data</span></a></h3><p>åœ¨ Node.js v21.7.1 æˆ–å…¶ä»–ç‰ˆæœ¬ä¸­ï¼Œå½“å¯ç”¨å®Œæ•´çš„ ICU æ•°æ®æ—¶ï¼ŒNode.js æ”¯æŒå¤šç§å­—ç¬¦ç¼–ç ã€‚è¿™æ„å‘³ç€ Node.js åœ¨å¤„ç†å„ç§å›½é™…åŒ–æ–‡æœ¬æ—¶å˜å¾—éå¸¸çµæ´»ã€‚ä¾‹å¦‚ï¼Œå®ƒå¯ä»¥å¤„ç†ä»ç®€ä½“ä¸­æ–‡åˆ°é˜¿æ‹‰ä¼¯è¯­ã€ä»ä¿„è¯­åˆ°æ—¥è¯­çš„æ–‡æœ¬ï¼Œè€Œæ— éœ€ä»»ä½•é¢å¤–çš„æ’ä»¶æˆ–é…ç½®ã€‚</p><h4 id="å®é™…è¿ç”¨çš„ä¾‹å­-5" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨çš„ä¾‹å­-5"><span>å®é™…è¿ç”¨çš„ä¾‹å­</span></a></h4><ol><li><p><strong>ç½‘ç«™å›½é™…åŒ–</strong>ï¼šå¦‚æœä½ æ­£åœ¨å¼€å‘ä¸€ä¸ªéœ€è¦æ”¯æŒå¤šç§è¯­è¨€çš„ç½‘ç«™ï¼Œä½¿ç”¨ Node.js å¯ä»¥å¾ˆå®¹æ˜“åœ°å±•ç¤ºå„ç§è¯­è¨€çš„å†…å®¹ã€‚æ¯”å¦‚ï¼Œæ ¹æ®ç”¨æˆ·çš„åœ°ç†ä½ç½®æˆ–è€…æµè§ˆå™¨è®¾ç½®è‡ªåŠ¨æ˜¾ç¤ºç›¸åº”çš„è¯­è¨€ç‰ˆæœ¬ã€‚</p></li><li><p><strong>æ–‡ä»¶å¤„ç†</strong>ï¼šå‡è®¾ä½ æœ‰ä¸€ä¸ªéœ€è¦å¤„ç†æ¥è‡ªä¸–ç•Œå„åœ°ç”¨æˆ·ä¸Šä¼ çš„æ–‡ä»¶çš„åº”ç”¨ã€‚è¿™äº›æ–‡ä»¶å¯èƒ½æ˜¯ç”¨ä¸åŒçš„ç¼–ç ä¿å­˜çš„ï¼Œæ¯”å¦‚ UTF-8, GBK ç­‰ã€‚ä½¿ç”¨ Node.jsï¼Œä½ å¯ä»¥è½»æ¾è¯»å–å¹¶æ­£ç¡®ç†è§£è¿™äº›æ–‡ä»¶çš„å†…å®¹ï¼Œç„¶åè¿›è¡Œå¿…è¦çš„å¤„ç†ã€‚</p></li><li><p><strong>API å›½é™…åŒ–</strong>ï¼šå¦‚æœä½ çš„åç«¯ API éœ€è¦æ”¯æŒå¤šè¯­è¨€è¾“å‡ºï¼ˆä¾‹å¦‚ï¼Œé”™è¯¯æ¶ˆæ¯ï¼‰ï¼ŒNode.js ä½¿å¾—è¿™ä¸ªè¿‡ç¨‹æ›´åŠ ç›´æ¥ã€‚ä½ å¯ä»¥æ ¹æ®ç”¨æˆ·çš„è¯·æ±‚å¤´ï¼ˆAccept-Languageï¼‰è¿”å›å¯¹åº”è¯­è¨€çš„å“åº”ï¼Œå¢å¼ºç”¨æˆ·ä½“éªŒã€‚</p></li></ol><p>æ€»ç»“ä¸€ä¸‹ï¼ŒNode.js é€šè¿‡æ”¯æŒå…¨é¢çš„ ICU æ•°æ®ï¼Œæå¤§åœ°å¢å¼ºäº†å…¶å¤„ç†ã€ç†è§£å’Œå±•ç¤ºå…¨çƒå¤šç§è¯­è¨€çš„èƒ½åŠ›ã€‚è¿™ä½¿å¾— Node.js æˆä¸ºå¼€å‘å›½é™…åŒ–åº”ç”¨çš„å¼ºå¤§å·¥å…·ã€‚</p><h4 id="encodings-supported-when-node-js-is-built-with-the-small-icu-option" tabindex="-1"><a class="header-anchor" href="#encodings-supported-when-node-js-is-built-with-the-small-icu-option"><span><a href="https://nodejs.org/docs/latest/api/util.html#encodings-supported-when-nodejs-is-built-with-the-small-icu-option" target="_blank" rel="noopener noreferrer">Encodings supported when Node.js is built with the small-icu option</a></span></a></h4><p>Node.js æ˜¯ä¸€ä¸ªéå¸¸æµè¡Œçš„ JavaScript è¿è¡Œæ—¶ç¯å¢ƒï¼Œå®ƒå…è®¸ä½ åœ¨æœåŠ¡å™¨ç«¯è¿è¡Œ JavaScript ä»£ç ã€‚åœ¨ Node.js ä¸­ï¼ŒICUï¼ˆInternational Components for Unicodeï¼‰æ‰®æ¼”ç€é‡è¦çš„è§’è‰²ï¼Œå› ä¸ºå®ƒæä¾›äº† Unicode å’Œå›½é™…åŒ–æ”¯æŒã€‚è¿™æ„å‘³ç€é€šè¿‡ ICUï¼ŒNode.js å¯ä»¥å¤„ç†ä¸–ç•Œä¸Šå‡ ä¹æ‰€æœ‰è¯­è¨€çš„æ–‡æœ¬æ•°æ®ã€‚</p><p>å½“æˆ‘ä»¬è°ˆåˆ° Node.js è¢«æ„å»º(build)æ—¶å¸¦æœ‰&quot;small-icu&quot;é€‰é¡¹ï¼Œæˆ‘ä»¬æŒ‡çš„æ˜¯ä½¿ç”¨äº†ä¸€ä¸ªç²¾ç®€ç‰ˆçš„ ICU åº“æ¥é™ä½ Node.js çš„æ€»ä½“å¤§å°å’Œèµ„æºéœ€æ±‚ã€‚è™½ç„¶è¿™æœ‰åŠ©äºå‡å°‘å†…å­˜å ç”¨å’Œæé«˜æ€§èƒ½ï¼Œä½†å®ƒä¹Ÿé™åˆ¶äº†æ”¯æŒçš„å­—ç¬¦ç¼–ç æ•°é‡ã€‚</p><p>å­—ç¬¦ç¼–ç æ˜¯ä¸€å¥—æ ‡å‡†ï¼Œç”¨äºå°†å­—ç¬¦ï¼ˆå¦‚å­—æ¯ã€æ•°å­—å’Œç¬¦å·ï¼‰è½¬æ¢æˆå¯ä»¥ç”±è®¡ç®—æœºå­˜å‚¨å’Œä¼ è¾“çš„æ•°å­—å½¢å¼ã€‚ä¸åŒçš„ç¼–ç è¦†ç›–äº†ä¸åŒçš„å­—ç¬¦é›†ï¼Œä»è€Œæ”¯æŒä¸åŒçš„è¯­è¨€å’Œç¬¦å·ã€‚</p><h3 id="ä¾‹å­" tabindex="-1"><a class="header-anchor" href="#ä¾‹å­"><span>ä¾‹å­</span></a></h3><p>æƒ³è±¡ä¸€ä¸‹ä»¥ä¸‹åœºæ™¯ï¼Œä»¥æ›´å¥½åœ°ç†è§£ small-icu çš„æ¦‚å¿µåŠå…¶å®é™…åº”ç”¨ï¼š</p><ol><li><p><strong>å…¨çƒåŒ–çš„ç½‘ç«™</strong>: å‡è®¾ä½ æ­£åœ¨å¼€å‘ä¸€ä¸ªéœ€è¦æ”¯æŒå¤šç§è¯­è¨€çš„ç½‘ç«™ã€‚å¦‚æœ Node.js é…ç½®äº† small-icuï¼Œå®ƒå¯èƒ½æ— æ³•ç›´æ¥æ”¯æŒä¸€äº›è¾ƒå°‘ä½¿ç”¨çš„è¯­è¨€æˆ–ç‰¹æ®Šå­—ç¬¦ç¼–ç ã€‚è¿™å¯èƒ½å¯¼è‡´è¿™äº›è¯­è¨€çš„æ–‡æœ¬ä¸èƒ½æ­£ç¡®æ˜¾ç¤ºã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½ å¯èƒ½éœ€è¦é¢å¤–å®‰è£…å®Œæ•´çš„ ICU åŒ…æˆ–è€…æ‰¾åˆ°å…¶ä»–æ–¹å¼æ¥å¤„ç†ç‰¹å®šçš„å­—ç¬¦ç¼–ç ã€‚</p></li><li><p><strong>è½»é‡çº§ API æœåŠ¡å™¨</strong>: å¦‚æœä½ æ­£åœ¨ä¸ºä¸€ä¸ªä¸»è¦é¢å‘è‹±è¯­ç”¨æˆ·çš„æœåŠ¡åˆ›å»ºä¸€ä¸ª API æœåŠ¡å™¨ï¼Œå¹¶ä¸”ä½ æƒ³è¦ä¿æŒä½ çš„æœåŠ¡å™¨å°½å¯èƒ½çš„è½»é‡çº§å’Œå¿«é€Ÿå“åº”ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½¿ç”¨ small-icu æ„å»ºçš„ Node.js å°±éå¸¸åˆé€‚ï¼Œå› ä¸ºå®ƒå‡å°‘äº†èµ„æºå ç”¨ï¼ŒåŒæ—¶ä»ç„¶æä¾›äº†å¯¹æœ€å¸¸è§å­—ç¬¦ç¼–ç çš„æ”¯æŒã€‚</p></li><li><p><strong>IoT è®¾å¤‡</strong>: åœ¨ç‰©è”ç½‘(IoT)è®¾å¤‡ä¸Šéƒ¨ç½² Node.js åº”ç”¨ç¨‹åºæ—¶ï¼Œè®¾å¤‡çš„å­˜å‚¨ç©ºé—´å’Œè®¡ç®—èƒ½åŠ›é€šå¸¸æ¯”è¾ƒæœ‰é™ã€‚ä½¿ç”¨ small-icu é€‰é¡¹ï¼Œå¯ä»¥ä½¿å¾— Node.js çš„ä½“ç§¯æ›´å°ï¼Œä»è€Œæ›´é€‚åˆåœ¨è¿™ç±»è®¾å¤‡ä¸Šè¿è¡Œã€‚è¿™åœ¨åªéœ€è¦å¤„ç†å°‘æ•°å‡ ç§ç¼–ç çš„ç®€å•æ•°æ®æ”¶é›†æˆ–å¤„ç†åº”ç”¨ä¸­å°¤å…¶æœ‰ç”¨ã€‚</p></li></ol><p>ç»¼ä¸Šæ‰€è¿°ï¼Œsmall-icu æä¾›çš„å­—ç¬¦ç¼–ç æ”¯æŒå¯èƒ½è¶³å¤Ÿç”¨äºæŸäº›åº”ç”¨åœºæ™¯ï¼Œç‰¹åˆ«æ˜¯é‚£äº›å¯¹èµ„æºä½¿ç”¨æœ‰ä¸¥æ ¼é™åˆ¶æˆ–ä¸»è¦ä½¿ç”¨è‹±è¯­ç­‰å¹¿æ³›æ”¯æŒçš„è¯­è¨€çš„åœºæ™¯ã€‚ç„¶è€Œï¼Œå¯¹äºéœ€è¦å¹¿æ³›çš„å›½é™…åŒ–æ”¯æŒçš„åº”ç”¨ç¨‹åºï¼Œå¯èƒ½éœ€è¦è€ƒè™‘ä½¿ç”¨å®Œæ•´çš„ ICU åŒ…æˆ–å…¶ä»–è§£å†³æ–¹æ¡ˆæ¥ç¡®ä¿å„ç§è¯­è¨€å’Œå­—ç¬¦ç¼–ç éƒ½èƒ½å¾—åˆ°æ­£ç¡®å¤„ç†ã€‚</p><h4 id="encodings-supported-when-icu-is-disabled" tabindex="-1"><a class="header-anchor" href="#encodings-supported-when-icu-is-disabled"><span><a href="https://nodejs.org/docs/latest/api/util.html#encodings-supported-when-icu-is-disabled" target="_blank" rel="noopener noreferrer">Encodings supported when ICU is disabled</a></span></a></h4><p>å½“æˆ‘ä»¬è°ˆè®º Node.js ä¸­çš„ ICUï¼ˆInternational Components for Unicodeï¼‰ï¼Œæˆ‘ä»¬å®é™…ä¸Šæ˜¯åœ¨è®¨è®ºä¸€ä¸ªä½¿ Node.js èƒ½å¤Ÿå¤„ç†å„ç§å›½é™…åŒ–å­—ç¬¦ç¼–ç çš„ç»„ä»¶ã€‚å­—ç¬¦ç¼–ç ï¼Œç®€è€Œè¨€ä¹‹ï¼Œå°±æ˜¯ä¸€å¥—è§„åˆ™ï¼Œç”¨äºå°†æ–‡å­—å’Œç¬¦å·è½¬æ¢æˆè®¡ç®—æœºå¯ä»¥ç†è§£çš„æ•°æ®ã€‚</p><p>æœ‰æ—¶å€™ï¼Œå‡ºäºæ€§èƒ½è€ƒè™‘æˆ–è€…æ˜¯å› ä¸ºç‰¹å®šçš„éƒ¨ç½²é™åˆ¶ï¼Œå¼€å‘è€…å¯èƒ½ä¼šé€‰æ‹©ç¦ç”¨ ICUã€‚å½“ ICU è¢«ç¦ç”¨æ—¶ï¼ŒNode.js æ”¯æŒçš„å­—ç¬¦ç¼–ç æ•°é‡ä¼šå‡å°‘ã€‚</p><p>å…ˆè§£é‡Šä¸€ä¸‹ä»€ä¹ˆæ˜¯å­—ç¬¦ç¼–ç ï¼šå­—ç¬¦ç¼–ç å°±åƒæ˜¯äººä¸è®¡ç®—æœºä¹‹é—´çš„ç¿»è¯‘ç³»ç»Ÿã€‚å‡è®¾ä½ å†™äº†ä¸€ä¸ªå­—æ¯<code>A</code>ï¼Œåœ¨ ASCII ç¼–ç ä¸­ï¼Œè¿™ä¸ª<code>A</code>ä¼šè¢«ç¿»è¯‘æˆæ•°å­—<code>65</code>ï¼Œè®¡ç®—æœºä½¿ç”¨è¿™ä¸ªæ•°å­—æ¥ä»£è¡¨<code>A</code>ã€‚ä¸–ç•Œä¸Šæœ‰æˆåƒä¸Šä¸‡çš„å­—ç¬¦ï¼ŒåŒ…æ‹¬ä¸åŒè¯­è¨€çš„æ–‡å­—ã€æ ‡ç‚¹ç¬¦å·ç­‰ï¼Œä¸ºäº†èƒ½å¤Ÿè¡¨ç¤ºè¿™äº›å¤šæ ·çš„å­—ç¬¦ï¼Œå°±éœ€è¦æ›´å¤æ‚çš„ç¼–ç ç³»ç»Ÿï¼Œæ¯”å¦‚ UTF-8ã€‚</p><p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬é€šè¿‡ä¸€äº›ä¾‹å­æ¥çœ‹çœ‹å½“ ICU è¢«ç¦ç”¨æ—¶ï¼ŒNode.js é€šå¸¸æ”¯æŒå“ªäº›ç¼–ç ï¼š</p><ol><li><p><strong>ASCII</strong>: è¿™æ˜¯æœ€åŸºæœ¬çš„ç¼–ç ï¼Œåªèƒ½è¡¨ç¤ºè‹±æ–‡å­—ç¬¦å’Œä¸€äº›åŸºæœ¬çš„æ§åˆ¶ç¬¦å·ã€‚æ¯ä¸ªå­—ç¬¦å ç”¨ 1 å­—èŠ‚ç©ºé—´ã€‚ä¾‹å¦‚ï¼Œ<code>A</code>åœ¨ ASCII ä¸­è¡¨ç¤ºä¸º 65ã€‚</p></li><li><p><strong>UTF-8</strong>: è¿™æ˜¯ç›®å‰å¹¿æ³›ä½¿ç”¨çš„ä¸€ä¸ªç¼–ç ï¼Œæ”¯æŒéå¸¸å¤šçš„å­—ç¬¦é›†ï¼Œå¹¶ä¸”å¯¹è‹±æ–‡å­—ç¬¦å…¼å®¹ ASCIIã€‚å®ƒä½¿ç”¨ 1 åˆ° 4 ä¸ªå­—èŠ‚è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼Œè¿™æ ·å¯ä»¥èŠ‚çœç©ºé—´åŒæ—¶åˆèƒ½è¡¨ç¤ºå…¨ä¸–ç•ŒèŒƒå›´å†…çš„å­—ç¬¦ã€‚ä¾‹å¦‚ï¼Œè‹±æ–‡å­—ç¬¦<code>A</code>ç”¨ UTF-8 ç¼–ç ä»ç„¶æ˜¯ 65ï¼Œä½†ä¸­æ–‡å­—ç¬¦<code>ä¸­</code>å¯èƒ½ç”¨ 3 ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºã€‚</p></li><li><p><strong>Binary</strong>: äºŒè¿›åˆ¶ç¼–ç å®é™…ä¸Šå¹¶ä¸è½¬æ¢å†…å®¹ï¼Œå®ƒç›´æ¥å°†ä¿¡æ¯ä»¥åŸå§‹äºŒè¿›åˆ¶å½¢å¼ä¿å­˜ã€‚è¿™ç§æ–¹å¼ä¸é€‚åˆäººç±»é˜…è¯»ï¼Œä½†å¯¹äºè®¡ç®—æœºæ¥è¯´éå¸¸è‡ªç„¶ã€‚</p></li><li><p><strong>Base64</strong>: è¿™æ˜¯ä¸€ç§å°†äºŒè¿›åˆ¶æ•°æ®ç¼–ç ä¸º ASCII å­—ç¬¦ä¸²çš„æ–¹æ³•ã€‚ç”±äºç”µå­é‚®ä»¶ç­‰ä¸€äº›æ—§ç³»ç»Ÿåªæ”¯æŒ ASCII å­—ç¬¦ï¼Œæ‰€ä»¥å½“éœ€è¦åœ¨è¿™äº›ç³»ç»Ÿä¸­ä¼ è¾“å›¾ç‰‡æˆ–å…¶ä»–äºŒè¿›åˆ¶æ–‡ä»¶æ—¶ï¼Œå°±ä¼šç”¨åˆ° Base64 ç¼–ç ã€‚ä¾‹å¦‚ï¼Œå›¾åƒæ–‡ä»¶è¢«è½¬æ¢ä¸ºä¸€é•¿ä¸²çœ‹ä¼¼æ— æ„ä¹‰çš„è‹±æ–‡å­—æ¯å’Œæ•°å­—ï¼Œä»è€Œå¯ä»¥é€šè¿‡ç”µå­é‚®ä»¶å‘é€ã€‚</p></li></ol><p>è®©æˆ‘ä»¬ä¸¾ä¸ªå®é™…ä¾‹å­ï¼š<br> å‡è®¾ä½ æ­£åœ¨ç¼–å†™ä¸€ä¸ª Web åº”ç”¨ç¨‹åºï¼Œéœ€è¦ç”¨æˆ·ä¸Šä¼ å›¾ç‰‡ï¼Œç„¶åä½ è¦å°†è¿™äº›å›¾ç‰‡å­˜å‚¨åˆ°ä¸€ä¸ªåªèƒ½å¤„ç†æ–‡æœ¬çš„æ—§ç³»ç»Ÿé‡Œã€‚ä½ å¯ä»¥å°†å›¾ç‰‡æ–‡ä»¶ç”¨ Base64 ç¼–ç è½¬æ¢ä¸ºä¸€ä¸ªå¾ˆé•¿çš„æ–‡æœ¬å­—ç¬¦ä¸²ï¼Œç„¶åå®‰å…¨åœ°å­˜å‚¨åœ¨æ—§ç³»ç»Ÿä¸­ã€‚å½“éœ€è¦æŸ¥çœ‹æˆ–ä¸‹è½½å›¾ç‰‡æ—¶ï¼Œä½ å†å°†è¿™ä¸ªå­—ç¬¦ä¸²è§£ç å›åŸå§‹çš„äºŒè¿›åˆ¶æ ¼å¼ã€‚</p><p>æ€»ç»“ä¸€ä¸‹ï¼Œå½“ ICU è¢«ç¦ç”¨æ—¶ï¼ŒNode.js ä»ç„¶æ”¯æŒä¸€äº›åŸºæœ¬ä½†éå¸¸é‡è¦çš„å­—ç¬¦ç¼–ç ï¼Œè¶³ä»¥åº”ä»˜å¤§å¤šæ•°çš„å¼€å‘éœ€æ±‚ã€‚ç„¶è€Œï¼Œå¦‚æœä½ çš„åº”ç”¨ç¨‹åºéœ€è¦å¤„ç†å¤šç§è¯­è¨€çš„æ–‡æœ¬ï¼Œå¯ç”¨ ICU å°†æä¾›æ›´å¹¿æ³›çš„å­—ç¬¦ç¼–ç æ”¯æŒï¼Œä½¿å¾—å›½é™…åŒ–å˜å¾—æ›´åŠ å®¹æ˜“ã€‚</p><h3 id="new-textdecoder-encoding-options" tabindex="-1"><a class="header-anchor" href="#new-textdecoder-encoding-options"><span><a href="https://nodejs.org/docs/latest/api/util.html#new-textdecoderencoding-options" target="_blank" rel="noopener noreferrer">new TextDecoder([encoding[, options]])</a></span></a></h3><p>å½“ä½ å¬åˆ°â€œTextDecoderâ€è¿™ä¸ªè¯ï¼Œå¯ä»¥æŠŠå®ƒæƒ³è±¡æˆä¸€ä¸ªç¿»è¯‘æœºå™¨äººï¼Œå®ƒçš„å·¥ä½œå°±æ˜¯å¸®åŠ©ä½ å°†ä¸€ä¸²çœ‹èµ·æ¥å¤æ‚çš„äºŒè¿›åˆ¶ä»£ç ï¼ˆæˆ–è€…è¯´æ˜¯ä¸€å † 0 å’Œ 1 ç»„æˆçš„æ•°æ®ï¼‰è½¬æ¢æˆä½ èƒ½ç†è§£å’Œé˜…è¯»çš„æ–‡æœ¬ã€‚åœ¨ Node.js ä¸­ï¼Œ<code>TextDecoder</code>æ˜¯ä¸€ä¸ªéå¸¸å®ç”¨çš„å·¥å…·ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤„ç†ç½‘ç»œé€šä¿¡å’Œæ–‡ä»¶æ“ä½œæ—¶ã€‚</p><p>é¦–å…ˆï¼Œäº†è§£ä¸€ä¸‹ä»€ä¹ˆæ˜¯ç¼–ç ï¼ˆencodingï¼‰ã€‚ç®€å•æ¥è¯´ï¼Œç¼–ç æ˜¯ä¸€ç§è§„åˆ™ï¼Œç”¨æ¥å°†å­—ç¬¦ï¼ˆæ¯”å¦‚å­—æ¯ã€æ•°å­—ã€ç¬¦å·ç­‰ï¼‰è½¬æ¢æˆç”µè„‘èƒ½ç†è§£çš„å½¢å¼ï¼ˆé€šå¸¸æ˜¯ä¸€ä¸²äºŒè¿›åˆ¶æ•°å­—ï¼‰ã€‚<code>TextDecoder</code>çš„ä½œç”¨å°±æ˜¯æŒ‰ç…§è¿™äº›è§„åˆ™å°†äºŒè¿›åˆ¶æ•°æ®è½¬æ¢å›äººç±»å¯è¯»çš„æ–‡æœ¬ã€‚</p><p>æ¥çœ‹ä¸€ä¸‹<code>TextDecoder</code>çš„åŸºæœ¬ç”¨æ³•ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#ECEFF4;"> {</span><span style="color:#D8DEE9;"> TextDecoder</span><span style="color:#ECEFF4;"> }</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// åˆ›å»ºä¸€ä¸ªTextDecoderå®ä¾‹ï¼Œé»˜è®¤æ˜¯ä½¿ç”¨&#39;utf-8&#39;ç¼–ç </span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> decoder</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> TextDecoder</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸²UTF-8ç¼–ç çš„äºŒè¿›åˆ¶æ•°æ®</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> uint8Array</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> Uint8Array</span><span style="color:#D8DEE9FF;">([</span><span style="color:#B48EAD;">72</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 101</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 108</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 108</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 111</span><span style="color:#D8DEE9FF;">])</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// ä½¿ç”¨decoderå°†å…¶è½¬æ¢ä¸ºå­—ç¬¦ä¸²</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> text</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> decoder</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">decode</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">uint8Array</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">text</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡º: Hello</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆå¼•å…¥äº†<code>TextDecoder</code>ï¼Œç„¶ååˆ›å»ºäº†ä¸€ä¸ªé»˜è®¤ä½¿ç”¨&#39;utf-8&#39;ç¼–ç çš„<code>TextDecoder</code>å®ä¾‹ã€‚ä¹‹åï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ª<code>Uint8Array</code>å®ä¾‹ï¼Œä»£è¡¨ä¸€ä¸²äºŒè¿›åˆ¶æ•°æ®ã€‚è¿™ä¸²æ•°æ®å®é™…ä¸Šå¯¹åº”äº&quot;Hello&quot;è¿™ä¸ªè¯ã€‚æœ€åï¼Œæˆ‘ä»¬ç”¨<code>decode()</code>æ–¹æ³•å°†è¿™ä¸²äºŒè¿›åˆ¶æ•°æ®è½¬æ¢æˆäº†å¯è¯»çš„æ–‡æœ¬ã€‚</p><h3 id="å‚æ•°-3" tabindex="-1"><a class="header-anchor" href="#å‚æ•°-3"><span>å‚æ•°</span></a></h3><p><code>TextDecoder</code>çš„æ„é€ å‡½æ•°å¯ä»¥æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼š</p><ul><li><code>encoding</code>ï¼šæŒ‡å®šè¦ä½¿ç”¨çš„å­—ç¬¦ç¼–ç ï¼Œé»˜è®¤æ˜¯&#39;utf-8&#39;ã€‚è¿˜æœ‰å…¶ä»–ç¼–ç ç±»å‹ï¼Œæ¯”å¦‚&#39;iso-8859-2&#39;, &#39;gbk&#39;, &#39;utf-16&#39;ç­‰ã€‚</li><li><code>options</code>ï¼šä¸€ä¸ªåŒ…å«é¢å¤–é…ç½®çš„å¯¹è±¡ã€‚å…¶ä¸­ä¸€ä¸ªæœ‰ç”¨çš„é€‰é¡¹æ˜¯<code>fatal</code>ï¼Œå¦‚æœè®¾ç½®ä¸º<code>true</code>ï¼Œå½“è¾“å…¥åŒ…å«æ— æ•ˆçš„å­—ç¬¦åºåˆ—æ—¶ï¼Œ<code>decode</code>æ–¹æ³•ä¼šæŠ›å‡ºé”™è¯¯ã€‚</li></ul><h3 id="å®é™…åº”ç”¨ä¾‹å­-4" tabindex="-1"><a class="header-anchor" href="#å®é™…åº”ç”¨ä¾‹å­-4"><span>å®é™…åº”ç”¨ä¾‹å­</span></a></h3><h4 id="_1-å¤„ç†ç½‘ç»œè¯·æ±‚çš„æ•°æ®" tabindex="-1"><a class="header-anchor" href="#_1-å¤„ç†ç½‘ç»œè¯·æ±‚çš„æ•°æ®"><span>1. å¤„ç†ç½‘ç»œè¯·æ±‚çš„æ•°æ®</span></a></h4><p>åœ¨è¿›è¡Œç½‘ç»œè¯·æ±‚æ—¶ï¼Œå°¤å…¶æ˜¯ä¸ API äº¤äº’æ—¶ï¼Œè¿”å›çš„æ•°æ®å¾€å¾€æ˜¯ä»¥æµçš„å½¢å¼å­˜åœ¨çš„ï¼Œè¿™äº›æ•°æ®æ˜¯ç»è¿‡ç¼–ç çš„ã€‚åˆ©ç”¨<code>TextDecoder</code>ï¼Œä½ å¯ä»¥å°†è¿™äº›æ•°æ®è½¬æ¢æˆå­—ç¬¦ä¸²ï¼Œè¿›è€Œè¿›è¡Œè§£æå’Œå±•ç¤ºã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> https</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">https</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#ECEFF4;"> {</span><span style="color:#D8DEE9;"> TextDecoder</span><span style="color:#ECEFF4;"> }</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> decoder</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> TextDecoder</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">utf-8</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">https</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">get</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">https://api.example.com/data</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> (</span><span style="color:#D8DEE9;">resp</span><span style="color:#ECEFF4;">)</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  let</span><span style="color:#D8DEE9;"> data</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9FF;"> []</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">  // æ¥æ”¶æ•°æ®ç‰‡æ®µ</span></span>
<span class="line"><span style="color:#D8DEE9;">  resp</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">on</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">data</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> (</span><span style="color:#D8DEE9;">chunk</span><span style="color:#ECEFF4;">)</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">    data</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">push</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">chunk</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">  // æ•°æ®æ¥æ”¶å®Œæ¯•</span></span>
<span class="line"><span style="color:#D8DEE9;">  resp</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">on</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">end</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> ()</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">    const</span><span style="color:#D8DEE9;"> buffer</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> Buffer</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">concat</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">data</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">    const</span><span style="color:#D8DEE9;"> textData</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> decoder</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">decode</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">buffer</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">textData</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // ç°åœ¨æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¯ä»¥è¿›ä¸€æ­¥å¤„ç†è¿™äº›æ•°æ®</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-è¯»å–æ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#_2-è¯»å–æ–‡ä»¶"><span>2. è¯»å–æ–‡ä»¶</span></a></h4><p>å½“ä½ ä»æ–‡ä»¶ç³»ç»Ÿè¯»å–æ–‡ä»¶æ—¶ï¼Œå°¤å…¶æ˜¯æ–‡æœ¬æ–‡ä»¶ï¼Œä½ å¯èƒ½å¾—åˆ°çš„æ˜¯äºŒè¿›åˆ¶æ•°æ®ã€‚ä½¿ç”¨<code>TextDecoder</code>ï¼Œä½ å¯ä»¥è½»æ¾åœ°å°†è¿™äº›æ•°æ®è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> fs</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">fs</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#ECEFF4;"> {</span><span style="color:#D8DEE9;"> TextDecoder</span><span style="color:#ECEFF4;"> }</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> decoder</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> TextDecoder</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">utf-8</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> data</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> fs</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">readFileSync</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">example.txt</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> text</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> decoder</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">decode</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">data</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">text</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // æ˜¾ç¤ºæ–‡ä»¶å†…å®¹</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™å°±æ˜¯<code>TextDecoder</code>çš„åŸºæœ¬æ¦‚å¿µã€ç”¨æ³•å’Œä¸€äº›å®é™…çš„åº”ç”¨åœºæ™¯ã€‚å¸Œæœ›è¿™èƒ½å¸®åŠ©ä½ ç†è§£å’Œå¼€å§‹ä½¿ç”¨è¿™ä¸ªå¼ºå¤§çš„ Node.js åŠŸèƒ½ï¼</p><h3 id="textdecoder-decode-input-options" tabindex="-1"><a class="header-anchor" href="#textdecoder-decode-input-options"><span><a href="https://nodejs.org/docs/latest/api/util.html#textdecoderdecodeinput-options" target="_blank" rel="noopener noreferrer">textDecoder.decode([input[, options]])</a></span></a></h3><p>å¥½çš„ï¼Œé¦–å…ˆï¼Œè®©æˆ‘ä¸ºä½ æ¦‚è¿°ä¸€ä¸‹ Node.js ä¸­çš„ <code>textDecoder.decode</code> æ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•æ˜¯ç”¨æ¥å°†ç¼–ç è¿‡çš„æ•°æ®ï¼ˆä¸€èˆ¬æ˜¯å­—èŠ‚åºåˆ—ï¼‰è½¬æ¢å›æ–‡æœ¬å­—ç¬¦ä¸²ã€‚åœ¨æ—¥å¸¸ç¼–ç¨‹ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸é‡åˆ°éœ€è¦å¤„ç†äºŒè¿›åˆ¶æ•°æ®æˆ–è€…ä»ç‰¹å®šç¼–ç æ ¼å¼ï¼ˆå¦‚ UTF-8, UTF-16 ç­‰ï¼‰è§£ç æ–‡æœ¬çš„æƒ…å†µã€‚<code>textDecoder.decode</code>æä¾›äº†ä¸€ç§ç®€å•çš„æ–¹å¼æ¥åšè¿™ä»¶äº‹ã€‚</p><h3 id="åŸºç¡€ç”¨æ³•" tabindex="-1"><a class="header-anchor" href="#åŸºç¡€ç”¨æ³•"><span>åŸºç¡€ç”¨æ³•</span></a></h3><p><code>textDecoder.decode</code> æ–¹æ³•å±äº <code>util.TextDecoder</code> ç±»ã€‚é€šå¸¸ï¼Œä½ ä¼šé¦–å…ˆåˆ›å»ºä¸€ä¸ª <code>TextDecoder</code> çš„å®ä¾‹ï¼ŒæŒ‡å®šä½ æƒ³è¦è§£ç çš„å­—ç¬¦ç¼–ç æ ¼å¼ï¼ˆæœ€å¸¸ç”¨çš„æ˜¯ &#39;utf-8&#39;ï¼‰ï¼Œç„¶åä½¿ç”¨è¿™ä¸ªå®ä¾‹ä¸Šçš„ <code>.decode()</code> æ–¹æ³•æ¥è§£ç æ•°æ®ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#ECEFF4;"> {</span><span style="color:#D8DEE9;"> TextDecoder</span><span style="color:#ECEFF4;"> }</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> decoder</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> TextDecoder</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">utf-8</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å‡è®¾æˆ‘ä»¬æœ‰ä¸€äº›UTF-8ç¼–ç çš„æ•°æ®</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> uint8Array</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> Uint8Array</span><span style="color:#D8DEE9FF;">([</span><span style="color:#B48EAD;">72</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 101</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 108</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 108</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 111</span><span style="color:#D8DEE9FF;">])</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // å¯¹åº” &quot;Hello&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// ä½¿ç”¨decodeæ–¹æ³•å°†å…¶è§£ç æˆå­—ç¬¦ä¸²</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> text</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> decoder</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">decode</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">uint8Array</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">text</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡º: Hello</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="å‚æ•°è¯¦è§£-2" tabindex="-1"><a class="header-anchor" href="#å‚æ•°è¯¦è§£-2"><span>å‚æ•°è¯¦è§£</span></a></h3><ul><li><p><strong>input</strong>: è¿™æ˜¯è¦è§£ç çš„æ•°æ®ã€‚å®ƒå¯ä»¥æ˜¯ <code>Buffer</code>ã€<code>TypedArray</code>ã€<code>DataView</code> æˆ–å…¶ä»–ç±»ä¼¼çš„äºŒè¿›åˆ¶æ•°æ®ç±»å‹ã€‚è¿™æ˜¯å¯é€‰å‚æ•°ï¼›å¦‚æœä¸æä¾›ï¼Œåˆ™é»˜è®¤ä¸ºç©ºçš„ <code>Uint8Array</code>ï¼Œè§£ç ç»“æœæ˜¯ç©ºå­—ç¬¦ä¸²ã€‚</p></li><li><p><strong>options</strong>: ä¸€ä¸ªå¯é€‰çš„é…ç½®å¯¹è±¡ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ª <code>stream</code> å±æ€§ã€‚å½“ <code>stream</code> è®¾ç½®ä¸º <code>true</code> æ—¶ï¼Œ<code>decode</code> æ–¹æ³•ä¼šå°†ä¼ å…¥çš„æ•°æ®è§†ä¸ºæµçš„ä¸€éƒ¨åˆ†ï¼Œå¹¶ä¿æŒå†…éƒ¨çŠ¶æ€ä»¥å¾…æ›´å¤šæ•°æ®çš„åˆ°æ¥è¿›è¡Œè§£ç ã€‚è¿™å¯¹äºå¤„ç†å¤§é‡æ•°æ®æˆ–è€…æ•°æ®åˆ†ç‰‡åˆ°è¾¾çš„åœºæ™¯ç‰¹åˆ«æœ‰ç”¨ã€‚</p></li></ul><h3 id="å®é™…è¿ç”¨ç¤ºä¾‹-5" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨ç¤ºä¾‹-5"><span>å®é™…è¿ç”¨ç¤ºä¾‹</span></a></h3><ol><li><p><strong>è¯»å–æ–‡ä»¶å¹¶è§£ç </strong>: å‡è®¾æˆ‘ä»¬ä»æ–‡ä»¶ç³»ç»Ÿè¯»å–äº†ä¸€æ®µ UTF-8 ç¼–ç çš„æ–‡æœ¬æ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>textDecoder.decode</code> æ¥è§£ç è¿™æ®µæ•°æ®ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> fs</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">fs</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#ECEFF4;"> {</span><span style="color:#D8DEE9;"> TextDecoder</span><span style="color:#ECEFF4;"> }</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> decoder</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> TextDecoder</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">utf-8</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å¼‚æ­¥è¯»å–æ–‡ä»¶å†…å®¹</span></span>
<span class="line"><span style="color:#D8DEE9;">fs</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">readFile</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">example.txt</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> (</span><span style="color:#D8DEE9;">err</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> data</span><span style="color:#ECEFF4;">)</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">err</span><span style="color:#D8DEE9FF;">) </span><span style="color:#81A1C1;">throw</span><span style="color:#D8DEE9;"> err</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#616E88;">  // data æ­¤æ—¶æ˜¯ Buffer ç±»å‹ï¼Œç›´æ¥è§£ç å¾—åˆ°å­—ç¬¦ä¸²</span></span>
<span class="line"><span style="color:#81A1C1;">  const</span><span style="color:#D8DEE9;"> text</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> decoder</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">decode</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">data</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">text</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>å¤„ç†ç½‘ç»œè¯·æ±‚</strong>: å½“ä½ é€šè¿‡ HTTP è¯·æ±‚æ¥æ”¶åˆ°ç¼–ç çš„æ•°æ®æ—¶ï¼ŒåŒæ ·å¯ä»¥ç”¨ <code>textDecoder.decode</code> è§£ç ã€‚æ¯”å¦‚ï¼Œæ¥æ”¶ JSON æ ¼å¼çš„å“åº”ä½“ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> https</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">https</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#ECEFF4;"> {</span><span style="color:#D8DEE9;"> TextDecoder</span><span style="color:#ECEFF4;"> }</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> decoder</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> TextDecoder</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">utf-8</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">https</span></span>
<span class="line"><span style="color:#ECEFF4;">  .</span><span style="color:#88C0D0;">get</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">https://api.example.com/data</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> (</span><span style="color:#D8DEE9;">resp</span><span style="color:#ECEFF4;">)</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">    let</span><span style="color:#D8DEE9;"> data</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9FF;"> []</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">    // æ¥æ”¶æ•°æ®å—</span></span>
<span class="line"><span style="color:#D8DEE9;">    resp</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">on</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">data</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> (</span><span style="color:#D8DEE9;">chunk</span><span style="color:#ECEFF4;">)</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">      data</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">push</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">chunk</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">    }</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">    // æ•°æ®æ¥æ”¶ç»“æŸ</span></span>
<span class="line"><span style="color:#D8DEE9;">    resp</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">on</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">end</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> ()</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#616E88;">      // å°†æ‰€æœ‰æ•°æ®å—åˆå¹¶ä¸ºä¸€ä¸ª Bufferï¼Œç„¶åè§£ç </span></span>
<span class="line"><span style="color:#81A1C1;">      const</span><span style="color:#D8DEE9;"> text</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> decoder</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">decode</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">Buffer</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">concat</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">data</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">      console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">text</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">    }</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#ECEFF4;">  .</span><span style="color:#88C0D0;">on</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">error</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> (</span><span style="color:#D8DEE9;">err</span><span style="color:#ECEFF4;">)</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Error: </span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;"> +</span><span style="color:#D8DEE9;"> err</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">message</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><p>è¿™äº›ä¾‹å­å±•ç¤ºäº† <code>textDecoder.decode</code> åœ¨ä¸åŒåœºæ™¯ä¸‹å¤„ç†å’Œè½¬æ¢ç¼–ç æ•°æ®çš„èƒ½åŠ›ï¼Œä½¿å¾—æ•°æ®ä»¥æ–‡æœ¬å½¢å¼æ›´æ˜“äºç†è§£å’Œæ“ä½œã€‚</p><h3 id="textdecoder-encoding" tabindex="-1"><a class="header-anchor" href="#textdecoder-encoding"><span><a href="https://nodejs.org/docs/latest/api/util.html#textdecoderencoding" target="_blank" rel="noopener noreferrer">textDecoder.encoding</a></span></a></h3><p>Node.js æ˜¯ä¸€ä¸ªè¿è¡Œåœ¨æœåŠ¡å™¨ç«¯çš„å¹³å°ï¼Œå®ƒä½¿ç”¨ JavaScript è¯­è¨€ã€‚<code>textDecoder.encoding</code>æ˜¯ Node.js é‡Œé¢ç”¨æ¥å¤„ç†æ–‡æœ¬ç¼–ç çš„åŠŸèƒ½ä¹‹ä¸€ï¼Œå±äº<code>util</code>æ¨¡å—ä¸‹çš„<code>TextDecoder</code>ç±»ã€‚</p><h3 id="ç†è§£-textdecoder-encoding" tabindex="-1"><a class="header-anchor" href="#ç†è§£-textdecoder-encoding"><span>ç†è§£ textDecoder.encoding</span></a></h3><p>ç®€å•æ¥è¯´ï¼Œ<code>textDecoder.encoding</code>æ˜¯<code>TextDecoder</code>å®ä¾‹çš„å±æ€§ï¼Œå®ƒè¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºè¯¥<code>TextDecoder</code>å®ä¾‹ç”¨äºè§£ç æ–‡æœ¬çš„ç¼–ç æ–¹å¼ã€‚ç¼–ç å°±æ˜¯æŠŠäººç±»å¯è¯»çš„æ–‡å­—è½¬æ¢æˆè®¡ç®—æœºå¯ä»¥ç†è§£å’Œå­˜å‚¨çš„æ ¼å¼ï¼Œè€Œè§£ç åˆ™æ˜¯è¿™ä¸ªè¿‡ç¨‹çš„åå‘æ“ä½œâ€”â€”å°†è®¡ç®—æœºå­˜å‚¨çš„æ•°æ®è½¬æ¢å›äººç±»å¯è¯»çš„æ–‡å­—ã€‚</p><p>å¸¸è§çš„ç¼–ç æ–¹å¼æœ‰ UTF-8ã€UTF-16 ç­‰ã€‚UTF-8 æ˜¯ç›®å‰ Web ä¸Šä½¿ç”¨æœ€å¹¿æ³›çš„å­—ç¬¦ç¼–ç æ–¹å¼ï¼Œå®ƒå¯ä»¥è¡¨ç¤ºä¸–ç•Œä¸Šå‡ ä¹æ‰€æœ‰çš„ä¹¦é¢è¯­è¨€ã€‚</p><h3 id="å®é™…åº”ç”¨ä¾‹å­-5" tabindex="-1"><a class="header-anchor" href="#å®é™…åº”ç”¨ä¾‹å­-5"><span>å®é™…åº”ç”¨ä¾‹å­</span></a></h3><p>å‡è®¾æˆ‘ä»¬æ¥æ”¶åˆ°äº†ä¸€æ®µæ¥è‡ªç½‘ç»œçš„æ•°æ®æµï¼Œè¿™æ®µæ•°æ®æµæ˜¯ç”¨ UTF-8 ç¼–ç çš„ã€‚æˆ‘ä»¬å¸Œæœ›å°†è¿™æ®µæ•°æ®æ­£ç¡®åœ°è½¬æ¢ï¼ˆè§£ç ï¼‰æˆå­—ç¬¦ä¸²ï¼Œä»¥ä¾¿è¿›ä¸€æ­¥å¤„ç†ã€‚</p><ol><li><p><strong>åˆ›å»º<code>TextDecoder</code>å®ä¾‹å¹¶æŒ‡å®šç¼–ç </strong></p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#616E88;">// å¼•å…¥ util æ¨¡å—</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// åˆ›å»ºä¸€ä¸ª TextDecoder å®ä¾‹ï¼ŒæŒ‡æ˜ä½¿ç”¨ UTF-8 ç¼–ç </span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> decoder</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#D8DEE9;"> util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">TextDecoder</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">utf-8</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>ä½¿ç”¨<code>decoder.encoding</code>æŸ¥çœ‹å½“å‰çš„ç¼–ç æ–¹å¼</strong></p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">decoder</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">encoding</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡º: utf-8</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p><strong>è§£ç ç¤ºä¾‹</strong></p><p>å‡è®¾æˆ‘ä»¬ä»æŸå¤„è·å–äº†ä¸€æ®µä»¥ UTF-8 ç¼–ç çš„äºŒè¿›åˆ¶æ•°æ®ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#616E88;">// æ¨¡æ‹Ÿæ¥æ”¶åˆ°çš„UTF-8ç¼–ç çš„äºŒè¿›åˆ¶æ•°æ®</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> encodedData</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> Uint8Array</span><span style="color:#D8DEE9FF;">([</span></span>
<span class="line"><span style="color:#B48EAD;">  72</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 101</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 108</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 108</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 111</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 44</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 32</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 87</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 111</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 114</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 108</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 100</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 33</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#D8DEE9FF;">])</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// ä½¿ç”¨decoderå°†äºŒè¿›åˆ¶æ•°æ®è§£ç ä¸ºå­—ç¬¦ä¸²</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> decodedText</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> decoder</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">decode</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">encodedData</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">decodedText</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡º: Hello, World!</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆåˆ›å»ºäº†ä¸€ä¸ª<code>TextDecoder</code>å®ä¾‹ï¼Œå¹¶æ˜ç¡®å‘Šè¯‰å®ƒæˆ‘ä»¬çš„æ•°æ®ä½¿ç”¨çš„æ˜¯ UTF-8 ç¼–ç ã€‚ç„¶åï¼Œæˆ‘ä»¬ä½¿ç”¨<code>.encoding</code>å±æ€§ç¡®è®¤äº†å…¶ç¼–ç æ–¹å¼ã€‚æ¥ç€ï¼Œé€šè¿‡è°ƒç”¨<code>.decode()</code>æ–¹æ³•ï¼Œæˆ‘ä»¬å°†ä¸€æ®µäºŒè¿›åˆ¶æ•°æ®è½¬æ¢å›äº†äººç±»å¯è¯»çš„å­—ç¬¦ä¸²å½¢å¼ã€‚</p><h3 id="æ€»ç»“-6" tabindex="-1"><a class="header-anchor" href="#æ€»ç»“-6"><span>æ€»ç»“</span></a></h3><p><code>textDecoder.encoding</code>åœ¨å¤„ç†ä¸åŒç¼–ç æ–¹å¼çš„æ–‡æœ¬æ•°æ®æ—¶éå¸¸æœ‰ç”¨ï¼Œå°¤å…¶æ˜¯åœ¨å¤„ç†å›½é™…åŒ–å†…å®¹ã€è¯»å–æ–‡ä»¶æˆ–ç½‘ç»œé€šä¿¡ç­‰æ–¹é¢ã€‚é€šè¿‡äº†è§£å’Œä½¿ç”¨è¿™ä¸ªå·¥å…·ï¼Œä½ å¯ä»¥æ›´å®¹æ˜“åœ°åœ¨ä¸åŒç¼–ç ä¹‹é—´è¿›è¡Œè½¬æ¢ï¼Œç¡®ä¿æ•°æ®çš„æ­£ç¡®è§£æå’Œå±•ç¤ºã€‚</p><h3 id="textdecoder-fatal" tabindex="-1"><a class="header-anchor" href="#textdecoder-fatal"><span><a href="https://nodejs.org/docs/latest/api/util.html#textdecoderfatal" target="_blank" rel="noopener noreferrer">textDecoder.fatal</a></span></a></h3><p>è¦ç†è§£<code>textDecoder.fatal</code>è¿™ä¸ªå±æ€§ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦æ˜ç™½ä¸€äº›åŸºç¡€çŸ¥è¯†ã€‚</p><h3 id="æ–‡æœ¬ç¼–ç ç®€ä»‹" tabindex="-1"><a class="header-anchor" href="#æ–‡æœ¬ç¼–ç ç®€ä»‹"><span>æ–‡æœ¬ç¼–ç ç®€ä»‹</span></a></h3><p>åœ¨è®¡ç®—æœºä¸–ç•Œé‡Œï¼Œæ‰€æœ‰å†…å®¹æœ€ç»ˆéƒ½æ˜¯ä»¥äºŒè¿›åˆ¶æ•°æ®ï¼ˆ0 å’Œ 1ï¼‰çš„å½¢å¼å­˜å‚¨çš„ã€‚å½“æˆ‘ä»¬å¤„ç†æ–‡æœ¬æ—¶ï¼Œæ¯”å¦‚è‹±æ–‡å­—ç¬¦ã€æ±‰å­—ç­‰ï¼Œå®ƒä»¬éƒ½éœ€è¦é€šè¿‡æŸç§ç‰¹å®šçš„ç¼–ç æ–¹å¼è½¬æ¢æˆäºŒè¿›åˆ¶æ•°æ®ã€‚UTF-8 æ˜¯ç›®å‰å¹¿æ³›ä½¿ç”¨çš„ä¸€ç§ç¼–ç æ ‡å‡†ï¼Œå®ƒå¯ä»¥ç”¨æ¥è¡¨ç¤ºä»»ä½•å­—ç¬¦é›†ä¸Šçš„æ–‡æœ¬ã€‚</p><h3 id="è§£ç è¿‡ç¨‹åŠé—®é¢˜" tabindex="-1"><a class="header-anchor" href="#è§£ç è¿‡ç¨‹åŠé—®é¢˜"><span>è§£ç è¿‡ç¨‹åŠé—®é¢˜</span></a></h3><p>è§£ç ï¼ˆDecodingï¼‰æ˜¯æŒ‡å°†å­˜å‚¨åœ¨è®¡ç®—æœºä¸­çš„äºŒè¿›åˆ¶æ•°æ®è½¬æ¢å›äººç±»å¯è¯»çš„æ–‡æœ¬ã€‚æœ‰æ—¶å€™ï¼Œåœ¨è§£ç è¿‡ç¨‹ä¸­å¯èƒ½ä¼šé‡åˆ°æ— æ³•è¯†åˆ«æˆ–è€…ä¸åˆæ³•çš„å­—èŠ‚åºåˆ—ã€‚è¿™æ—¶ï¼Œå¦‚æœæˆ‘ä»¬å¸Œæœ›å¯¹è¿™ç§æƒ…å†µè¿›è¡Œä¸¥æ ¼æ§åˆ¶ï¼Œå°±éœ€è¦ç”¨åˆ°<code>TextDecoder</code>ç±»çš„<code>fatal</code>å±æ€§ã€‚</p><h3 id="textdecoder-ç±»ä¸-fatal-å±æ€§" tabindex="-1"><a class="header-anchor" href="#textdecoder-ç±»ä¸-fatal-å±æ€§"><span>TextDecoder ç±»ä¸ fatal å±æ€§</span></a></h3><p>åœ¨ Node.js ä¸­ï¼Œ<code>TextDecoder</code>ç±»è¢«ç”¨äºå°†æ–‡æœ¬ä»æŸç§ç¼–ç æ ¼å¼ï¼ˆå¦‚ UTF-8ï¼‰è§£ç æˆå­—ç¬¦ä¸²ã€‚<code>TextDecoder</code>ç±»çš„<code>fatal</code>å±æ€§æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼ˆBooleanï¼‰ï¼Œå®ƒå†³å®šäº†å½“é‡åˆ°æ— æ•ˆçš„è¾“å…¥å­—èŠ‚åºåˆ—æ—¶ï¼Œè§£ç å™¨ï¼ˆdecoderï¼‰æ˜¯å¦åº”è¯¥æŠ›å‡ºé”™è¯¯ã€‚</p><ul><li>å¦‚æœ<code>fatal</code>è®¾ç½®ä¸º<code>true</code>ï¼Œé‚£ä¹ˆå½“è§£ç å™¨é‡åˆ°æ— æ•ˆçš„ç¼–ç åºåˆ—æ—¶ï¼Œå®ƒä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚</li><li>å¦‚æœ<code>fatal</code>è®¾ç½®ä¸º<code>false</code>ï¼ˆé»˜è®¤ï¼‰ï¼Œè§£ç å™¨ä¼šå°è¯•å¤„ç†æ— æ•ˆçš„åºåˆ—ï¼Œæ¯”å¦‚é€šè¿‡æ’å…¥æ›¿ä»£å­—ç¬¦ï¼ˆé€šå¸¸æ˜¯ ï¿½ï¼‰æ¥è·³è¿‡è¿™äº›æ— æ•ˆåºåˆ—ã€‚</li></ul><h3 id="å®ä¾‹æ¼”ç¤º" tabindex="-1"><a class="header-anchor" href="#å®ä¾‹æ¼”ç¤º"><span>å®ä¾‹æ¼”ç¤º</span></a></h3><p>å‡è®¾æˆ‘ä»¬æ”¶åˆ°äº†ä¸€æ®µç”¨ UTF-8 ç¼–ç çš„äºŒè¿›åˆ¶æ•°æ®ï¼Œå¹¶ä¸”è¿™æ®µæ•°æ®åŒ…å«äº†ä¸€äº›æ— æ•ˆçš„å­—èŠ‚åºåˆ—ã€‚æˆ‘ä»¬æƒ³è¦å°†è¿™äº›æ•°æ®è§£ç æˆå­—ç¬¦ä¸²ã€‚</p><h4 id="_1-å½“fatalä¸ºfalse-é»˜è®¤æƒ…å†µ" tabindex="-1"><a class="header-anchor" href="#_1-å½“fatalä¸ºfalse-é»˜è®¤æƒ…å†µ"><span>1. å½“<code>fatal</code>ä¸º<code>false</code>ï¼ˆé»˜è®¤æƒ…å†µï¼‰</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#ECEFF4;"> {</span><span style="color:#D8DEE9;"> TextDecoder</span><span style="color:#ECEFF4;"> }</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> decoder</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> TextDecoder</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">utf-8</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> {</span><span style="color:#88C0D0;"> fatal</span><span style="color:#ECEFF4;">:</span><span style="color:#81A1C1;"> false</span><span style="color:#ECEFF4;"> }</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> bytes</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> Uint8Array</span><span style="color:#D8DEE9FF;">([</span><span style="color:#B48EAD;">72</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 101</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 108</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 108</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 111</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 255</span><span style="color:#D8DEE9FF;">])</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // 255æ˜¯æ— æ•ˆçš„UTF-8åºåˆ—</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">try</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  const</span><span style="color:#D8DEE9;"> text</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> decoder</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">decode</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">bytes</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">text</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡º&quot;Helloï¿½&quot;ï¼Œ255è¢«æ›¿æ¢æˆäº†ï¿½</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;"> catch</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">err</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">error</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">è§£ç å¤±è´¥:</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> err</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-å½“fatalä¸ºtrue" tabindex="-1"><a class="header-anchor" href="#_2-å½“fatalä¸ºtrue"><span>2. å½“<code>fatal</code>ä¸º<code>true</code></span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#ECEFF4;"> {</span><span style="color:#D8DEE9;"> TextDecoder</span><span style="color:#ECEFF4;"> }</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> decoder</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> TextDecoder</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">utf-8</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> {</span><span style="color:#88C0D0;"> fatal</span><span style="color:#ECEFF4;">:</span><span style="color:#81A1C1;"> true</span><span style="color:#ECEFF4;"> }</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> bytes</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> Uint8Array</span><span style="color:#D8DEE9FF;">([</span><span style="color:#B48EAD;">72</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 101</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 108</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 108</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 111</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 255</span><span style="color:#D8DEE9FF;">])</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // åŒæ ·çš„è¾“å…¥</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">try</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  const</span><span style="color:#D8DEE9;"> text</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> decoder</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">decode</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">bytes</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">text</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;"> catch</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">err</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">error</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">è§£ç å¤±è´¥:</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> err</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¿™æ¬¡ä¼šæ•è·åˆ°é”™è¯¯ï¼Œå› ä¸ºé‡åˆ°äº†æ— æ•ˆçš„åºåˆ—</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="åº”ç”¨åœºæ™¯" tabindex="-1"><a class="header-anchor" href="#åº”ç”¨åœºæ™¯"><span>åº”ç”¨åœºæ™¯</span></a></h3><ul><li><strong>å®‰å…¨æ€§</strong>ï¼šåœ¨å¤„ç†ç”¨æˆ·è¾“å…¥æˆ–å¤–éƒ¨æ•°æ®æºçš„æ•°æ®æ—¶ï¼Œé€šè¿‡è®¾ç½®<code>fatal</code>ä¸º<code>true</code>ï¼Œå¯ä»¥æ›´å®¹æ˜“åœ°å‘ç°å’Œè°ƒè¯•æ½œåœ¨çš„æ•°æ®é—®é¢˜ã€‚</li><li><strong>æ•°æ®å®Œæ•´æ€§</strong>ï¼šç¡®ä¿è§£ç åçš„æ•°æ®ç²¾ç¡®åŒ¹é…åŸå§‹æ•°æ®ï¼Œé€‚åˆé‚£äº›å¯¹æ•°æ®è´¨é‡æœ‰ä¸¥æ ¼è¦æ±‚çš„åº”ç”¨ã€‚</li></ul><p>é€šè¿‡ä¸Šè¿°è§£é‡Šå’Œä¾‹å­ï¼Œä½ åº”è¯¥èƒ½å¯¹<code>TextDecoder</code>ç±»çš„<code>fatal</code>å±æ€§æœ‰äº†åŸºæœ¬çš„äº†è§£ã€‚å®ƒè®©æˆ‘ä»¬èƒ½å¤Ÿæ§åˆ¶åœ¨é¢å¯¹æ— æ•ˆç¼–ç åºåˆ—æ—¶çš„è¡Œä¸ºï¼Œæ— è®ºæ˜¯ä¼˜é›…åœ°å¤„ç†è¿˜æ˜¯ç›´æ¥æŠ¥é”™ã€‚</p><h3 id="textdecoder-ignorebom" tabindex="-1"><a class="header-anchor" href="#textdecoder-ignorebom"><span><a href="https://nodejs.org/docs/latest/api/util.html#textdecoderignorebom" target="_blank" rel="noopener noreferrer">textDecoder.ignoreBOM</a></span></a></h3><p>Node.js çš„ <code>TextDecoder</code> æ˜¯ä¸€ä¸ªç”¨äºå°†æ–‡æœ¬ä»ä¸€ç§ç¼–ç è½¬æ¢ä¸ºå¦ä¸€ç§ç¼–ç çš„å·¥å…·ï¼Œç‰¹åˆ«æ˜¯ä»å…¶ä»–å­—ç¬¦ç¼–ç è½¬æ¢ä¸º JavaScript å­—ç¬¦ä¸²ã€‚åœ¨ Node.js v21.7.1 ç‰ˆæœ¬ä¸­ï¼Œ<code>TextDecoder</code> ç±»æœ‰ä¸€ä¸ª <code>ignoreBOM</code> å±æ€§ï¼Œè¿™ä¸ªå±æ€§çš„ä½œç”¨ä¸å®é™…åº”ç”¨åœºæ™¯éœ€è¦æˆ‘ä»¬å…ˆäº†è§£ä¸€ä¸‹èƒŒæ™¯çŸ¥è¯†ã€‚</p><h3 id="ä»€ä¹ˆæ˜¯-bom" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯-bom"><span>ä»€ä¹ˆæ˜¯ BOMï¼Ÿ</span></a></h3><p>BOM è¡¨ç¤ºå­—èŠ‚é¡ºåºæ ‡è®°ï¼ˆByte Order Markï¼‰ï¼Œä¸»è¦ç”¨äºæŒ‡æ˜è¯¥æ–‡æœ¬æµä½¿ç”¨ Unicode ç¼–ç æ–¹å¼çš„å­—èŠ‚é¡ºåºï¼ˆæ¯”å¦‚ UTF-8, UTF-16ï¼‰ã€‚åœ¨ UTF-8 ç¼–ç ä¸­ï¼ŒBOM æ˜¯ä¸€ä¸ªå¯é€‰çš„åºåˆ— - EF BB BFï¼Œå®ƒå‡ºç°åœ¨æ•°æ®çš„æœ€å¼€å§‹å¤„ã€‚å°½ç®¡åœ¨ UTF-8 ä¸­ BOM ä¸æ˜¯å¿…éœ€çš„ï¼Œä½†æœ‰æ—¶ä¼šä½¿ç”¨å®ƒæ¥æ ‡è¯†æ•°æ®ç¡®å®æ˜¯ä»¥ UTF-8 ç¼–ç ã€‚</p><h3 id="ignorebom-å±æ€§" tabindex="-1"><a class="header-anchor" href="#ignorebom-å±æ€§"><span><code>ignoreBOM</code> å±æ€§</span></a></h3><p>å½“ä½¿ç”¨ <code>TextDecoder</code> è§£ç æ–‡æœ¬æ—¶ï¼Œå¦‚æœæ–‡æœ¬ä»¥ BOM å¼€å¤´ï¼Œé‚£ä¹ˆè§£ç å™¨é»˜è®¤ä¼šè¯†åˆ«å¹¶ç§»é™¤è¿™ä¸ª BOMï¼Œè¿”å›çš„æ–‡æœ¬ä¸åŒ…å« BOMã€‚è¿™åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹æ˜¯æœ‰ç”¨çš„ï¼Œå› ä¸º BOM å¯¹äºæœ€ç»ˆå¤„ç†æ–‡æœ¬å†…å®¹æ²¡æœ‰ç”¨å¤„ã€‚ç„¶è€Œï¼Œåœ¨æŸäº›ç‰¹å®šåœºæ™¯ä¸‹ï¼Œä½ å¯èƒ½å¸Œæœ›ä¿ç•™ BOM è¿›è¡Œç‰¹å®šçš„å¤„ç†ï¼Œè¿™æ—¶å€™å°±å¯ä»¥è®¾ç½® <code>ignoreBOM</code> å±æ€§ã€‚</p><ul><li>å¦‚æœ <code>ignoreBOM</code> è®¾ç½®ä¸º <code>true</code>ï¼Œåˆ™ <code>TextDecoder</code> åœ¨è§£ç æ—¶ä¼šå¿½ç•¥æ‰æ–‡æœ¬ä¸­çš„ BOMï¼Œç›´æ¥è§£ç åé¢çš„å†…å®¹ã€‚</li><li>å¦‚æœ <code>ignoreBOM</code> è®¾ç½®ä¸º <code>false</code>ï¼ˆé»˜è®¤å€¼ï¼‰ï¼Œåˆ™ <code>TextDecoder</code> ä¼šè‡ªåŠ¨å¤„ç† BOMï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æœæ£€æµ‹åˆ° BOM ä¼šå°†å…¶ç§»é™¤ï¼Œå¹¶è§£ç ä¹‹åçš„å†…å®¹ã€‚</li></ul><h3 id="å®é™…è¿ç”¨ä¾‹å­-8" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨ä¾‹å­-8"><span>å®é™…è¿ç”¨ä¾‹å­</span></a></h3><p>å‡è®¾ä½ æ­£åœ¨å¤„ç†ä¸€æ‰¹æ–‡ä»¶ï¼Œè¿™äº›æ–‡ä»¶æ˜¯ç”¨ UTF-8 ç¼–ç å¹¶ä¸”å¯èƒ½åŒ…å« BOMã€‚ç”±äºæŸäº›åŸå› ï¼Œä½ éœ€è¦å‡†ç¡®åœ°çŸ¥é“å“ªäº›æ–‡ä»¶ä»¥ BOM å¼€å§‹ï¼Œä»¥ä¾¿è¿›è¡Œç‰¹æ®Šå¤„ç†æˆ–ç»Ÿè®¡ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#616E88;">// å¯¼å…¥å¿…è¦çš„æ¨¡å—</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#ECEFF4;"> {</span><span style="color:#D8DEE9;"> TextDecoder</span><span style="color:#ECEFF4;"> }</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> fs</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">fs</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// è¯»å–ä¸€ä¸ªå¯èƒ½åŒ…å«BOMçš„æ–‡ä»¶</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> fileContent</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> fs</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">readFileSync</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">example.txt</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// åˆ›å»ºä¸€ä¸ª TextDecoder å®ä¾‹ï¼Œæ˜¾å¼è®¾ç½® ignoreBOM ä¸º true</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> decoder</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> TextDecoder</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">utf-8</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> {</span><span style="color:#88C0D0;"> ignoreBOM</span><span style="color:#ECEFF4;">:</span><span style="color:#81A1C1;"> true</span><span style="color:#ECEFF4;"> }</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// æ‰§è¡Œè§£ç </span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> text</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> decoder</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">decode</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">fileContent</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å› ä¸ºæˆ‘ä»¬è®¾ç½®äº† ignoreBOM ä¸º trueï¼Œæ‰€ä»¥å³ä½¿åŸæ•°æ®å¼€å¤´æœ‰BOMï¼Œè§£ç å¾—åˆ°çš„æ–‡æœ¬é‡Œä¹Ÿä¸ä¼šåŒ…å«å®ƒ</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">text</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// æ¥ä¸‹æ¥ï¼Œä½ å¯ä»¥æ£€æŸ¥åŸå§‹æ•°æ®çš„å‰å‡ ä¸ªå­—èŠ‚æ˜¯å¦æ˜¯ BOMï¼Œ</span></span>
<span class="line"><span style="color:#616E88;">// å¦‚æœæ˜¯ï¼Œå¯¹æ–‡ä»¶è¿›è¡Œä½ éœ€è¦çš„ç‰¹æ®Šå¤„ç†ã€‚</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ä¸ªä¾‹å­è™½ç„¶ç®€å•ï¼Œä½†å®ƒå±•ç¤ºäº†å¦‚ä½•é€šè¿‡è°ƒæ•´ <code>ignoreBOM</code> å±æ€§ï¼Œæ ¹æ®å®é™…éœ€æ±‚çµæ´»å¤„ç†ä»¥ BOM å¼€å¤´çš„ UTF-8 æ–‡æœ¬ã€‚åœ¨å¤„ç†å›½é™…åŒ–å†…å®¹ã€ç¼–å†™æ”¯æŒå¤šç§è¯­è¨€çš„åº”ç”¨ç¨‹åºæ—¶ï¼Œæ­£ç¡®å¤„ç†å­—ç¬¦ç¼–ç å’Œ BOM å˜å¾—å°¤ä¸ºé‡è¦ã€‚</p><h2 id="class-util-textencoder" tabindex="-1"><a class="header-anchor" href="#class-util-textencoder"><span><a href="https://nodejs.org/docs/latest/api/util.html#class-utiltextencoder" target="_blank" rel="noopener noreferrer">Class: util.TextEncoder</a></span></a></h2><p>å¥½çš„ï¼Œè®©æˆ‘ä»¬æ·±å…¥äº†è§£ Node.js ä¸­çš„<code>util.TextEncoder</code>ç±»ã€‚<code>TextEncoder</code>æ˜¯ä¸€ä¸ªç”¨äºå°† JavaScript å­—ç¬¦ä¸²ï¼ˆå³ç”± UTF-16 ç¼–ç çš„æ–‡æœ¬ï¼‰è½¬æ¢ä¸º UTF-8 ç¼–ç å­—èŠ‚çš„å·¥å…·ã€‚è¿™åœ¨å¤„ç†ç½‘ç»œé€šä¿¡ã€æ–‡ä»¶æ“ä½œä»¥åŠä»»ä½•éœ€è¦å¤„ç†æˆ–å­˜å‚¨æ–‡æœ¬æ•°æ®ä¸ºå­—èŠ‚å½¢å¼çš„åœºæ™¯ä¸‹éå¸¸æœ‰ç”¨ã€‚</p><h3 id="åŸºæœ¬æ¦‚å¿µ-6" tabindex="-1"><a class="header-anchor" href="#åŸºæœ¬æ¦‚å¿µ-6"><span>åŸºæœ¬æ¦‚å¿µ</span></a></h3><p>åœ¨ç»§ç»­ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆç®€å•å›é¡¾ä¸€ä¸‹ç›¸å…³çš„å‡ ä¸ªæ¦‚å¿µï¼š</p><ul><li><strong>UTF-8</strong> å’Œ <strong>UTF-16</strong> éƒ½æ˜¯ Unicode æ ‡å‡†çš„ç¼–ç æ–¹æ¡ˆï¼Œç”¨äºå°†å­—ç¬¦ç¼–ç ä¸ºç”µè„‘å¯ä»¥ç†è§£çš„æ•°å­—ï¼ˆå³å­—èŠ‚ï¼‰ã€‚UTF-8 æ˜¯ä¸€ç§å˜é•¿çš„ç¼–ç æ–¹å¼ï¼Œæ¯ä¸ªå­—ç¬¦å¯ä»¥å ç”¨ 1 åˆ° 4 ä¸ªå­—èŠ‚ï¼Œè€Œ UTF-16 åˆ™æ˜¯å˜é•¿çš„ï¼Œæ¯ä¸ªå­—ç¬¦é€šå¸¸å ç”¨ 2 ä¸ªæˆ–è€… 4 ä¸ªå­—èŠ‚ã€‚</li><li><strong>JavaScript å­—ç¬¦ä¸²</strong> åœ¨å†…éƒ¨æ˜¯ä½¿ç”¨ UTF-16 ç¼–ç çš„ã€‚è¿™æ„å‘³ç€ï¼Œå½“ä½ åœ¨ JavaScript ä¸­å¤„ç†å­—ç¬¦ä¸²æ—¶ï¼Œæ¯ä¸ªå­—ç¬¦è¢«ç¼–ç ä¸ºä¸€æˆ–ä¸¤ä¸ª 16 ä½çš„æ•°å€¼ã€‚</li></ul><p>Node.js çš„<code>util.TextEncoder</code>ç±»æ”¯æŒå°†è¿™äº› UTF-16 ç¼–ç çš„å­—ç¬¦ä¸²è½¬æ¢ä¸º UTF-8 ç¼–ç çš„å­—èŠ‚åºåˆ—ã€‚è¿™ä¸ªè¿‡ç¨‹å¯¹äºæŸäº›åº”ç”¨æ¥è¯´æ˜¯å¿…é¡»çš„ï¼Œå› ä¸ºå®ƒä»¬å¯èƒ½éœ€è¦ä»¥ç‰¹å®šçš„ç¼–ç æ¥å¤„ç†æˆ–å­˜å‚¨æ–‡æœ¬æ•°æ®ã€‚</p><h3 id="ä½¿ç”¨-textencoder" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨-textencoder"><span>ä½¿ç”¨ <code>TextEncoder</code></span></a></h3><p>åœ¨ Node.js ä¸­ï¼Œ<code>TextEncoder</code>é»˜è®¤å°±æ˜¯å¯ç”¨çš„ï¼Œä¸éœ€è¦é¢å¤–å®‰è£…ã€‚</p><h4 id="ç¤ºä¾‹-åˆ›å»ºä¸€ä¸ª-textencoder-å®ä¾‹å¹¶ä½¿ç”¨å®ƒ" tabindex="-1"><a class="header-anchor" href="#ç¤ºä¾‹-åˆ›å»ºä¸€ä¸ª-textencoder-å®ä¾‹å¹¶ä½¿ç”¨å®ƒ"><span>ç¤ºä¾‹ï¼šåˆ›å»ºä¸€ä¸ª TextEncoder å®ä¾‹å¹¶ä½¿ç”¨å®ƒ</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#ECEFF4;"> {</span><span style="color:#D8DEE9;"> TextEncoder</span><span style="color:#ECEFF4;"> }</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// åˆ›å»ºä¸€ä¸ªTextEncoderå®ä¾‹</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> encoder</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> TextEncoder</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å°†ä¸€æ®µæ–‡æœ¬ç¼–ç ä¸ºUTF-8</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> text</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">Hello, world!</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> encoded</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> encoder</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">encode</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">text</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">encoded</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆå¼•å…¥<code>TextEncoder</code>ç±»ã€‚æ¥ç€ï¼Œæˆ‘ä»¬åˆ›å»ºäº†å…¶å®ä¾‹ï¼Œå¹¶ä½¿ç”¨<code>.encode()</code>æ–¹æ³•å°†ä¸€æ®µç®€å•çš„æ–‡æœ¬ï¼ˆ<code>&#39;Hello, world!&#39;</code>ï¼‰è½¬æ¢æˆ UTF-8 ç¼–ç çš„å­—èŠ‚åºåˆ—ã€‚è¿è¡Œè¿™æ®µä»£ç ï¼Œä½ ä¼šå¾—åˆ°ä¸€ä¸ª Uint8Arrayï¼Œå…¶ä¸­åŒ…å«äº†è½¬æ¢åçš„å­—èŠ‚æ•°æ®ã€‚</p><h3 id="å®é™…åº”ç”¨ç¤ºä¾‹-3" tabindex="-1"><a class="header-anchor" href="#å®é™…åº”ç”¨ç¤ºä¾‹-3"><span>å®é™…åº”ç”¨ç¤ºä¾‹</span></a></h3><h4 id="_1-ç½‘ç»œé€šä¿¡" tabindex="-1"><a class="header-anchor" href="#_1-ç½‘ç»œé€šä¿¡"><span>1. ç½‘ç»œé€šä¿¡</span></a></h4><p>åœ¨è¿›è¡Œ HTTP è¯·æ±‚æˆ– WebSocket é€šä¿¡æ—¶ï¼Œä½ å¯èƒ½éœ€è¦å‘é€æ•°æ®åˆ°æœåŠ¡å™¨ã€‚å¦‚æœè¿™äº›æ•°æ®æ˜¯æ–‡æœ¬å½¢å¼çš„ï¼Œä½¿ç”¨<code>TextEncoder</code>å°†æ–‡æœ¬è½¬æ¢ä¸ºå­—èŠ‚æµæ˜¯å¾ˆå¸¸è§çš„åšæ³•ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#ECEFF4;"> {</span><span style="color:#D8DEE9;"> TextEncoder</span><span style="color:#ECEFF4;"> }</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> https</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">https</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> encoder</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> TextEncoder</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> data</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> encoder</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">encode</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Hello, server!</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> options</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#88C0D0;">  hostname</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">example.com</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#88C0D0;">  port</span><span style="color:#ECEFF4;">:</span><span style="color:#B48EAD;"> 443</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#88C0D0;">  path</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">/api/send</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#88C0D0;">  method</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">POST</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#88C0D0;">  headers</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#ECEFF4;">    &quot;</span><span style="color:#A3BE8C;">Content-Type</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">application/octet-stream</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#ECEFF4;">    &quot;</span><span style="color:#A3BE8C;">Content-Length</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9;"> data</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9FF;">length</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#ECEFF4;">  },</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> req</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> https</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">request</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">options</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> (</span><span style="color:#D8DEE9;">res</span><span style="color:#ECEFF4;">)</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#616E88;">  // å¤„ç†å“åº”...</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">req</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">write</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">data</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">req</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">end</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™é‡Œï¼Œæˆ‘ä»¬å°†æ–‡æœ¬æ¶ˆæ¯<code>&quot;Hello, server!&quot;</code>è½¬æ¢ä¸ºå­—èŠ‚æµï¼Œç„¶åé€šè¿‡ HTTPS POST è¯·æ±‚å‘é€ç»™æœåŠ¡å™¨ã€‚</p><h4 id="_2-æ–‡ä»¶æ“ä½œ" tabindex="-1"><a class="header-anchor" href="#_2-æ–‡ä»¶æ“ä½œ"><span>2. æ–‡ä»¶æ“ä½œ</span></a></h4><p>å½“ä½ éœ€è¦å°†æ–‡æœ¬æ•°æ®å†™å…¥åˆ°æ–‡ä»¶ä¸­ï¼Œå¹¶ä¸”å¸Œæœ›è¯¥æ–‡ä»¶æ˜¯ UTF-8 ç¼–ç æ—¶ï¼Œ<code>TextEncoder</code>åŒæ ·æ´¾ä¸Šç”¨åœºã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#ECEFF4;"> {</span><span style="color:#D8DEE9;"> TextEncoder</span><span style="color:#ECEFF4;"> }</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#ECEFF4;"> {</span><span style="color:#D8DEE9;"> writeFile</span><span style="color:#ECEFF4;"> }</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">fs</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">promises</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">async</span><span style="color:#81A1C1;"> function</span><span style="color:#88C0D0;"> writeTextToFile</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">filePath</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> text</span><span style="color:#ECEFF4;">)</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  const</span><span style="color:#D8DEE9;"> encoder</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> TextEncoder</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">  const</span><span style="color:#D8DEE9;"> encoded</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> encoder</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">encode</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">text</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">  await</span><span style="color:#88C0D0;"> writeFile</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">filePath</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> encoded</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88C0D0;">writeTextToFile</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">hello.txt</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">Hello, file system!</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å°†<code>&quot;Hello, file system!&quot;</code>è¿™æ®µæ–‡å­—è½¬æ¢æˆ UTF-8 ç¼–ç çš„å­—èŠ‚æµï¼Œç„¶åå†™å…¥åˆ°<code>hello.txt</code>æ–‡ä»¶ä¸­ã€‚</p><h3 id="æ€»ç»“-7" tabindex="-1"><a class="header-anchor" href="#æ€»ç»“-7"><span>æ€»ç»“</span></a></h3><p><code>TextEncoder</code>æä¾›äº†ä¸€ç§ä¾¿åˆ©çš„æ–¹å¼ï¼Œå°† JavaScript å­—ç¬¦ä¸²ï¼ˆUTF-16 ç¼–ç ï¼‰è½¬æ¢ä¸ºå­—èŠ‚æµï¼ˆUTF-8 ç¼–ç ï¼‰ã€‚è¿™åœ¨å¤„ç†ç½‘ç»œé€šä¿¡ã€æ–‡ä»¶æ“ä½œç­‰éœ€è¦å°†æ–‡æœ¬ä»¥å­—èŠ‚å½¢å¼å¤„ç†çš„åœºæ™¯ä¸‹éå¸¸æœ‰ç”¨ã€‚å…¶ä½¿ç”¨æ–¹æ³•ç®€å•ç›´æ¥ï¼Œéå¸¸é€‚åˆåœ¨å„ç§ Node.js åº”ç”¨ä¸­ä½¿ç”¨ã€‚</p><h3 id="textencoder-encode-input" tabindex="-1"><a class="header-anchor" href="#textencoder-encode-input"><span><a href="https://nodejs.org/docs/latest/api/util.html#textencoderencodeinput" target="_blank" rel="noopener noreferrer">textEncoder.encode([input])</a></span></a></h3><p>å½“ç„¶ï¼Œæˆ‘å°†å°½å¯èƒ½é€šä¿—æ˜“æ‡‚åœ°è§£é‡Šç»™æ‚¨å¬ã€‚</p><p>é¦–å…ˆï¼Œ<strong>Node.js</strong> æ˜¯ä¸€ä¸ªåŸºäº Chrome V8 JavaScript å¼•æ“çš„ JavaScript è¿è¡Œç¯å¢ƒã€‚å®ƒå…è®¸åœ¨æœåŠ¡å™¨ç«¯è¿è¡Œ JavaScript ä»£ç ï¼Œè¿™ä¸ºå¼€å‘ç°ä»£ç½‘ç»œåº”ç”¨ç¨‹åºæä¾›äº†æå¤§çš„çµæ´»æ€§å’Œæ•ˆç‡ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è¦æ¢è®¨çš„ <code>textEncoder.encode([input])</code> æ–¹æ³•æ˜¯ Node.js ä¸­æä¾›çš„åŠŸèƒ½ä¹‹ä¸€ï¼Œå±äº <code>util</code> æ¨¡å—é‡Œçš„ä¸€éƒ¨åˆ†ã€‚è¿™ä¸ªæ–¹æ³•æ˜¯ç”¨æ¥å¤„ç†æ–‡æœ¬ç¼–ç çš„ï¼Œç‰¹åˆ«æ˜¯å°†å­—ç¬¦ä¸²ï¼ˆä¹Ÿå°±æ˜¯æ–‡æœ¬æ•°æ®ï¼‰è½¬æ¢æˆäºŒè¿›åˆ¶æ ¼å¼ï¼Œå³ Uint8Arrayï¼ˆæ— ç¬¦å· 8 ä½æ•´æ•°æ•°ç»„ï¼‰ã€‚è¿™ç§è½¬æ¢å¯¹äºå¤„ç†ç½‘ç»œè¯·æ±‚ã€æ–‡ä»¶æ“ä½œç­‰åœºæ™¯éå¸¸æœ‰ç”¨ã€‚</p><h3 id="å¦‚ä½•ç†è§£-textencoder-encode-input" tabindex="-1"><a class="header-anchor" href="#å¦‚ä½•ç†è§£-textencoder-encode-input"><span>å¦‚ä½•ç†è§£ <code>textEncoder.encode([input])</code></span></a></h3><ol><li><strong>textEncoder</strong>ï¼šè¿™æ˜¯ä¸€ä¸ªç”¨äºå°†å­—ç¬¦ä¸²ç¼–ç ä¸ºå­—èŠ‚çš„ç¼–ç å™¨ã€‚</li><li><strong>encode([input])</strong>ï¼šè¯¥æ–¹æ³•è´Ÿè´£å°†ä¼ å…¥çš„å­—ç¬¦ä¸² (<code>input</code>) è½¬æ¢ä¸ºäºŒè¿›åˆ¶å½¢å¼ï¼ˆUint8Arrayï¼‰ã€‚</li></ol><h3 id="ä½¿ç”¨åœºæ™¯ä¸¾ä¾‹-1" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨åœºæ™¯ä¸¾ä¾‹-1"><span>ä½¿ç”¨åœºæ™¯ä¸¾ä¾‹</span></a></h3><ul><li><p><strong>ç½‘ç»œé€šä¿¡</strong>ï¼šå½“ä½ éœ€è¦é€šè¿‡ HTTP è¯·æ±‚å‘é€æ•°æ®æ—¶ï¼Œå°†æ•°æ®ä»å­—ç¬¦ä¸²è½¬æ¢ä¸ºäºŒè¿›åˆ¶æ ¼å¼å¯ä»¥å‡å°‘ä¼ è¾“å¤§å°å¹¶å¢åŠ ä¼ è¾“æ•ˆç‡ã€‚</p><p><strong>ç¤ºä¾‹</strong>ï¼š<br> å‡è®¾ä½ éœ€è¦å‘æœåŠ¡å™¨å‘é€ä¸€æ®µ JSON æ•°æ®ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#ECEFF4;"> {</span><span style="color:#D8DEE9;"> TextEncoder</span><span style="color:#ECEFF4;"> }</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> textEncoder</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> TextEncoder</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> data</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> {</span><span style="color:#88C0D0;"> message</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">Hello, world!</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;"> }</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> jsonData</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> JSON</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">stringify</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">data</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> encodedData</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> textEncoder</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">encode</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">jsonData</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// ç°åœ¨ encodedData æ˜¯ä¸€ä¸ª Uint8Arrayï¼Œå¯ä»¥é€šè¿‡ç½‘ç»œå‘é€</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">encodedData</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡ºç±»ä¼¼äºï¼š[123, 34, 109, 101, ...]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>æ–‡ä»¶æ“ä½œ</strong>ï¼šå½“ä½ éœ€è¦å°†æ–‡æœ¬ä¿å­˜åˆ°ä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶ä¸­å»æ—¶ï¼Œä½¿ç”¨ <code>textEncoder.encode([input])</code> å¯ä»¥ç›´æ¥ç”Ÿæˆé€‚åˆå†™å…¥çš„æ ¼å¼ã€‚</p><p><strong>ç¤ºä¾‹</strong>ï¼š<br> å†™å…¥æ–‡æœ¬åˆ°äºŒè¿›åˆ¶æ–‡ä»¶ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> fs</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">fs</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">promises</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#ECEFF4;"> {</span><span style="color:#D8DEE9;"> TextEncoder</span><span style="color:#ECEFF4;"> }</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> textEncoder</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> TextEncoder</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">async</span><span style="color:#81A1C1;"> function</span><span style="color:#88C0D0;"> writeTextToFile</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">filename</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> text</span><span style="color:#ECEFF4;">)</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  let</span><span style="color:#D8DEE9;"> encodedText</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> textEncoder</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">encode</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">text</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">  await</span><span style="color:#D8DEE9;"> fs</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">writeFile</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">filename</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> encodedText</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88C0D0;">writeTextToFile</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">example.bin</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">Saving this string in a binary file.</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ä¸ªä¾‹å­å±•ç¤ºäº†å¦‚ä½•å°†ä¸€ä¸²æ–‡æœ¬ç¼–ç åä¿å­˜åˆ°åä¸º <code>example.bin</code> çš„äºŒè¿›åˆ¶æ–‡ä»¶ä¸­ã€‚</p></li></ul><p>é€šè¿‡ä¸Šè¿°å®é™…çš„ç¤ºä¾‹ï¼Œä½ åº”è¯¥èƒ½å¤Ÿäº†è§£åˆ° <code>textEncoder.encode([input])</code> çš„ä½œç”¨åŠå…¶åœ¨å®é™…é¡¹ç›®ä¸­çš„åº”ç”¨ä»·å€¼ã€‚ç®€è€Œè¨€ä¹‹ï¼Œå®ƒæ‰®æ¼”ç€æ–‡æœ¬æ•°æ®å’ŒäºŒè¿›åˆ¶æ•°æ®è½¬æ¢çš„æ¡¥æ¢è§’è‰²ï¼Œä¸ºæ•°æ®å­˜å‚¨å’Œä¼ è¾“æä¾›ä¾¿åˆ©ã€‚</p><h3 id="textencoder-encodeinto-src-dest" tabindex="-1"><a class="header-anchor" href="#textencoder-encodeinto-src-dest"><span><a href="https://nodejs.org/docs/latest/api/util.html#textencoderencodeintosrc-dest" target="_blank" rel="noopener noreferrer">textEncoder.encodeInto(src, dest)</a></span></a></h3><p>ç†è§£<code>textEncoder.encodeInto(src, dest)</code>ä¹‹å‰ï¼Œè®©æˆ‘ä»¬å…ˆäº†è§£ä¸€äº›åŸºç¡€æ¦‚å¿µã€‚</p><h3 id="åŸºç¡€æ¦‚å¿µ" tabindex="-1"><a class="header-anchor" href="#åŸºç¡€æ¦‚å¿µ"><span>åŸºç¡€æ¦‚å¿µ</span></a></h3><ol><li><strong>Node.js</strong>: æ˜¯ä¸€ä¸ªè¿è¡Œåœ¨æœåŠ¡å™¨ç«¯çš„ JavaScript ç¯å¢ƒï¼Œå…è®¸ä½ ä½¿ç”¨ JavaScript æ¥ç¼–å†™åç«¯ä»£ç ã€‚</li><li><strong>TextEncoder</strong>: æ˜¯ä¸€ä¸ª Web API çš„ä¸€éƒ¨åˆ†ï¼Œç”¨äºå°†å­—ç¬¦ä¸²è½¬æ¢æˆ UTF-8 æ ¼å¼çš„å­—èŠ‚åºåˆ—ã€‚è™½ç„¶æœ€åˆæ˜¯ä¸ºæµè§ˆå™¨è®¾è®¡çš„ï¼Œä½† Node.js ä¹Ÿå®ç°äº†è¿™ä¸ª API ä»¥ä¿æŒä»£ç çš„å¯ç§»æ¤æ€§ã€‚</li><li><strong>UTF-8</strong>: æ˜¯ä¸€ç§å­—ç¬¦ç¼–ç ï¼Œç”¨äºå°†å­—ç¬¦ï¼ˆå¦‚å­—æ¯ã€æ•°å­—ç­‰ï¼‰è½¬æ¢ä¸ºç”µè„‘å¯ä»¥å­˜å‚¨å’Œä¼ è¾“çš„æ ¼å¼ã€‚</li></ol><h3 id="textencoder-encodeinto-src-dest-1" tabindex="-1"><a class="header-anchor" href="#textencoder-encodeinto-src-dest-1"><span><code>textEncoder.encodeInto(src, dest)</code></span></a></h3><p><code>encodeInto()</code>æ–¹æ³•æ˜¯<code>TextEncoder</code>å®ä¾‹çš„ä¸€ä¸ªæ–¹æ³•ï¼Œå®ƒçš„ä½œç”¨æ˜¯å°†ä¸€ä¸ªç»™å®šçš„å­—ç¬¦ä¸²ï¼ˆ<code>src</code>ï¼‰ç¼–ç æˆ UTF-8 å­—èŠ‚åºåˆ—ï¼Œå¹¶å°†è¿™äº›å­—èŠ‚å¡«å……åˆ°å¦ä¸€ä¸ªæ•°ç»„ä¸­ï¼ˆ<code>dest</code>ï¼‰ã€‚ä¸<code>encode()</code>æ–¹æ³•ç›¸æ¯”ï¼Œ<code>encodeInto()</code>æ›´åŠ é«˜æ•ˆï¼Œå› ä¸ºå®ƒç›´æ¥åœ¨ç›®æ ‡ç¼“å†²åŒºå†…ä¿®æ”¹å†…å®¹ï¼Œé¿å…äº†åˆ›å»ºæ–°çš„æ•°ç»„å’Œç›¸å…³çš„å†…å­˜åˆ†é…å¼€é”€ã€‚</p><h4 id="å‚æ•°-4" tabindex="-1"><a class="header-anchor" href="#å‚æ•°-4"><span>å‚æ•°ï¼š</span></a></h4><ul><li><strong>src (æºå­—ç¬¦ä¸²)</strong>: ä½ å¸Œæœ›è¢«è½¬æ¢æˆ UTF-8 ç¼–ç å­—èŠ‚åºåˆ—çš„å­—ç¬¦ä¸²ã€‚</li><li><strong>dest (ç›®æ ‡)</strong>: ä¸€ä¸ª<code>Uint8Array</code>æˆ–ç±»ä¼¼æ•°ç»„çš„ç¼“å†²åŒºï¼Œç”¨äºå­˜å‚¨ç¼–ç åçš„å­—èŠ‚åºåˆ—ã€‚</li></ul><h4 id="è¿”å›å€¼" tabindex="-1"><a class="header-anchor" href="#è¿”å›å€¼"><span>è¿”å›å€¼ï¼š</span></a></h4><p>è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«ä¸¤ä¸ªå±æ€§ï¼š</p><ul><li><strong>written</strong>: è¡¨ç¤ºæœ‰å¤šå°‘ä¸ªå­—èŠ‚è¢«å†™å…¥åˆ°<code>dest</code>ä¸­ã€‚</li><li><strong>read</strong>: è¡¨ç¤ºæœ‰å¤šå°‘ä¸ªæºå­—ç¬¦è¢«è½¬æ¢äº†ã€‚</li></ul><h3 id="å®é™…åº”ç”¨ä¾‹å­-6" tabindex="-1"><a class="header-anchor" href="#å®é™…åº”ç”¨ä¾‹å­-6"><span>å®é™…åº”ç”¨ä¾‹å­</span></a></h3><p>å‡è®¾ä½ æ­£åœ¨ç¼–å†™ä¸€ä¸ª Node.js åº”ç”¨ï¼Œéœ€è¦å°†å­—ç¬¦ä¸²æ•°æ®å‘é€åˆ°ä¸€ä¸ªåªæ¥å—å­—èŠ‚æµçš„ç½‘ç»œæœåŠ¡ã€‚</p><ol><li><strong>åˆå§‹åŒ– TextEncoder</strong>:</li></ol><p>é¦–å…ˆï¼Œä½ éœ€è¦åˆ›å»ºä¸€ä¸ª<code>TextEncoder</code>å®ä¾‹ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> encoder</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> TextEncoder</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ol start="2"><li><strong>å‡†å¤‡æ•°æ®</strong>:</li></ol><p>å‡è®¾æœ‰ä¸€ä¸ªå­—ç¬¦ä¸²å’Œä¸€ä¸ª<code>Uint8Array</code>ç”¨ä½œç›®æ ‡ç¼“å†²åŒºã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> str</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">Hello, World!</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> buffer</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> Uint8Array</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">256</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // åˆ†é…ä¸€ä¸ªè¶³å¤Ÿå¤§çš„ç¼“å†²åŒº</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li><strong>ä½¿ç”¨<code>encodeInto</code>è¿›è¡Œç¼–ç </strong>:</li></ol><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> result</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> encoder</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">encodeInto</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">str</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> buffer</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span></span>
<span class="line"><span style="color:#ECEFF4;">  `</span><span style="color:#A3BE8C;">Written bytes: </span><span style="color:#81A1C1;">${</span><span style="color:#D8DEE9;">result</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">written</span><span style="color:#81A1C1;">}</span><span style="color:#A3BE8C;">, Read characters: </span><span style="color:#81A1C1;">${</span><span style="color:#D8DEE9;">result</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">read</span><span style="color:#81A1C1;">}</span><span style="color:#ECEFF4;">`</span></span>
<span class="line"><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#616E88;">// è¾“å‡ºå¯èƒ½æ˜¯ï¼šWritten bytes: 13, Read characters: 13</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li><strong>å¤„ç†ç¼–ç åçš„æ•°æ®</strong>:</li></ol><p>ç°åœ¨<code>buffer</code>ä¸­åŒ…å«äº†å­—ç¬¦ä¸²çš„ UTF-8 è¡¨ç¤ºï¼Œä½ å¯ä»¥å°†è¿™ä¸ªç¼“å†²åŒºçš„å†…å®¹å‘é€åˆ°ç½‘ç»œæœåŠ¡æˆ–è¿›è¡Œå…¶ä»–å¤„ç†ã€‚</p><h3 id="å°ç»“-3" tabindex="-1"><a class="header-anchor" href="#å°ç»“-3"><span>å°ç»“</span></a></h3><p>é€šè¿‡<code>encodeInto()</code>æ–¹æ³•ï¼Œä½ èƒ½é«˜æ•ˆåœ°å°†å­—ç¬¦ä¸²æ•°æ®è½¬æ¢ä¸º UTF-8 æ ¼å¼çš„å­—èŠ‚åºåˆ—ï¼Œå¹¶ç›´æ¥å¡«å……åˆ°ä¸€ä¸ªé¢„å…ˆåˆ†é…çš„ç¼“å†²åŒºå†…ï¼Œä»è€Œæé«˜åº”ç”¨æ€§èƒ½å¹¶å‡å°‘å†…å­˜ä½¿ç”¨ã€‚è¿™åœ¨å¤„ç†å¤§é‡æ–‡æœ¬æ•°æ®æˆ–éœ€è¦é¢‘ç¹ç¼–ç æ“ä½œçš„åœºæ™¯ä¸‹ç‰¹åˆ«æœ‰ç”¨ã€‚</p><h3 id="textencoder-encoding" tabindex="-1"><a class="header-anchor" href="#textencoder-encoding"><span><a href="https://nodejs.org/docs/latest/api/util.html#textencoderencoding" target="_blank" rel="noopener noreferrer">textEncoder.encoding</a></span></a></h3><p>å½“ä½ å¼€å§‹ä½¿ç”¨ Node.js è¿›è¡Œç¼–ç¨‹æ—¶ï¼Œå¤„ç†æ–‡æœ¬æ•°æ®æ˜¯ä¸€é¡¹åŸºæœ¬è€Œä¸”éå¸¸é‡è¦çš„ä»»åŠ¡ï¼Œå°¤å…¶æ˜¯åœ¨æ¶‰åŠç½‘ç»œé€šä¿¡å’Œæ–‡ä»¶æ“ä½œæ—¶ã€‚è¿™é‡Œæˆ‘ä»¬è¦è®²è§£çš„<code>textEncoder.encoding</code>å±æ€§ä½äº Node.js ä¸­<code>util</code>æ¨¡å—ä¸‹çš„<code>TextEncoder</code>ç±»ã€‚</p><p>é¦–å…ˆï¼Œ<strong>ä»€ä¹ˆæ˜¯ TextEncoder?</strong><br><code>TextEncoder</code>æ˜¯ç”¨æ¥å°†å­—ç¬¦ä¸²ï¼ˆä¸»è¦æ˜¯åŒ…å«äººç±»å¯è¯»æ–‡æœ¬çš„ï¼‰è½¬æ¢æˆå­—èŠ‚åºåˆ—çš„å·¥å…·ã€‚è¿™ä¸ªè½¬æ¢è¿‡ç¨‹ä¹Ÿè¢«ç§°ä¸ºç¼–ç ã€‚åœ¨ Web å¼€å‘å’Œå„ç§ç½‘ç»œåè®®ä¸­ï¼Œä½ ä¼šé‡åˆ°ä¸åŒç±»å‹çš„ç¼–ç æ–¹å¼ï¼Œå¦‚ UTF-8ã€UTF-16 ç­‰ã€‚ä½†åœ¨ Node.js çš„<code>TextEncoder</code>å®ç°ä¸­ï¼Œå®ƒé»˜è®¤åªæ”¯æŒ UTF-8 ç¼–ç æ–¹å¼ã€‚</p><p><strong>é‚£ä¹ˆï¼Œ<code>textEncoder.encoding</code>å±æ€§æœ‰ä»€ä¹ˆä½œç”¨å‘¢ï¼Ÿ</strong><br> ç®€å•æ¥è¯´ï¼Œ<code>textEncoder.encoding</code>å±æ€§è®©ä½ çŸ¥é“<code>TextEncoder</code>å®ä¾‹ä½¿ç”¨çš„æ˜¯å“ªç§å­—ç¬¦ç¼–ç æ–¹å¼ã€‚åœ¨ Node.js v21.7.1 ç‰ˆæœ¬ä¸­ï¼Œè¿™ä¸ªå±æ€§ä¼šè¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²<code>&quot;utf-8&quot;</code>ï¼Œå› ä¸ºæ­£å¦‚å‰é¢æåˆ°çš„ï¼ŒNode.js çš„<code>TextEncoder</code>åªæ”¯æŒ UTF-8 ç¼–ç ã€‚</p><p><strong>UTF-8 ç¼–ç çš„é‡è¦æ€§:</strong><br> UTF-8 ç¼–ç æ˜¯ä¸€ç§å¹¿æ³›ä½¿ç”¨çš„ç¼–ç æ ¼å¼ï¼Œå®ƒå¯ä»¥è¡¨ç¤ºå…¨ä¸–ç•Œå‡ ä¹æ‰€æœ‰çš„å­—ç¬¦ï¼Œå¹¶ä¸”å…·æœ‰å¾ˆå¥½çš„å…¼å®¹æ€§å’Œé«˜æ•ˆçš„å­˜å‚¨ç‰¹æ€§ã€‚è¿™ä½¿å¾— UTF-8 æˆä¸ºäº†äº’è”ç½‘ä¸Šçš„æ ‡å‡†ç¼–ç æ–¹å¼ã€‚</p><p><strong>å®é™…åº”ç”¨ä¸¾ä¾‹:</strong></p><ol><li><strong>ç½‘ç»œè¯·æ±‚å¤„ç†:</strong> å½“ä½ åˆ›å»ºä¸€ä¸ª Web æœåŠ¡å™¨ï¼Œå¹¶éœ€è¦æ¥æ”¶å’Œå‘é€æ•°æ®æ—¶ï¼Œä½ å¯èƒ½éœ€è¦å¯¹å‘é€ç»™å®¢æˆ·ç«¯çš„æ•°æ®è¿›è¡Œç¼–ç ï¼Œæˆ–è€…å¯¹æ¥æ”¶åˆ°çš„æ•°æ®è¿›è¡Œè§£ç ã€‚ä½¿ç”¨<code>TextEncoder</code>å¯ä»¥å¸®åŠ©ä½ ä»¥ç»Ÿä¸€çš„æ–¹å¼å¤„ç†æ–‡æœ¬æ•°æ®ã€‚</li></ol><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#ECEFF4;"> {</span><span style="color:#D8DEE9;"> TextEncoder</span><span style="color:#ECEFF4;"> }</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> encoder</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> TextEncoder</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å‡è®¾æˆ‘ä»¬æœ‰ä¸€äº›è¦å‘é€çš„æ–‡æœ¬</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> text</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">Hello World!</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// ä½¿ç”¨TextEncoderå°†æ–‡æœ¬è½¬æ¢ä¸ºUTF-8ç¼–ç çš„å­—èŠ‚åºåˆ—</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> encoded</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> encoder</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">encode</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">text</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">encoded</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#616E88;">// è¾“å‡º: Uint8Array(12) [72, 101, 108, 108, 111, 32, 87, 111, 114, 108, 100, 33]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li><strong>æ–‡ä»¶æ“ä½œ:</strong> å½“ä½ åœ¨å¤„ç†æ–‡ä»¶å†…å®¹æ—¶ï¼Œå°¤å…¶æ˜¯éœ€è¦å¤„ç†å›½é™…åŒ–å†…å®¹çš„æ–‡æœ¬æ–‡ä»¶ï¼Œä½¿ç”¨<code>TextEncoder</code>èƒ½ç¡®ä¿ä½ æ­£ç¡®åœ°å°†å­—ç¬¦ä¸²è½¬æ¢æˆé€‚åˆå†™å…¥æ–‡ä»¶çš„å­—èŠ‚åºåˆ—ã€‚</li></ol><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> fs</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">fs</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">promises</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#ECEFF4;"> {</span><span style="color:#D8DEE9;"> TextEncoder</span><span style="color:#ECEFF4;"> }</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">async</span><span style="color:#81A1C1;"> function</span><span style="color:#88C0D0;"> writeFileWithUtf8Encoding</span><span style="color:#ECEFF4;">()</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  const</span><span style="color:#D8DEE9;"> encoder</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> TextEncoder</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">  const</span><span style="color:#D8DEE9;"> text</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">ä½ å¥½ï¼Œä¸–ç•Œï¼</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // åŒ…å«ä¸­æ–‡çš„å­—ç¬¦ä¸²</span></span>
<span class="line"><span style="color:#81A1C1;">  const</span><span style="color:#D8DEE9;"> encoded</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> encoder</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">encode</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">text</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">  await</span><span style="color:#D8DEE9;"> fs</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">writeFile</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">hello-world.txt</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> encoded</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">æ–‡ä»¶å·²æˆåŠŸå†™å…¥</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88C0D0;">writeFileWithUtf8Encoding</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é€šè¿‡ä»¥ä¸Šç¤ºä¾‹ï¼Œæˆ‘å¸Œæœ›ä½ èƒ½äº†è§£åˆ°<code>TextEncoder</code>å’Œå®ƒçš„<code>encoding</code>å±æ€§åœ¨å¤„ç†æ–‡æœ¬æ•°æ®è½¬æ¢ä¸­çš„ä½œç”¨å’Œé‡è¦æ€§ã€‚å°½ç®¡ Node.js çš„å®ç°ç›¸å¯¹ç®€å•ï¼Œåªæ”¯æŒ UTF-8ï¼Œä½†è¿™æ­£åæ˜ äº† UTF-8 åœ¨ç°ä»£å¼€å‘ä¸­çš„æ™®éåº”ç”¨å’Œé‡è¦æ€§ã€‚</p><h2 id="util-tousvstring-string" tabindex="-1"><a class="header-anchor" href="#util-tousvstring-string"><span><a href="https://nodejs.org/docs/latest/api/util.html#utiltousvstringstring" target="_blank" rel="noopener noreferrer">util.toUSVString(string)</a></span></a></h2><p>å½“ç„¶ï¼Œè®©æˆ‘å¸¦ä½ æ·±å…¥äº†è§£ <code>util.toUSVString(string)</code> è¿™ä¸ªåŠŸèƒ½ã€‚</p><p><code>util.toUSVString(string)</code> æ˜¯ Node.js ä¸­çš„ä¸€ä¸ªå®ç”¨å‡½æ•°ï¼Œå±äº <code>util</code> æ¨¡å—ã€‚ä¸ºäº†ç†è§£è¿™ä¸ªå‡½æ•°ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦äº†è§£ä¸€äº›èƒŒæ™¯çŸ¥è¯†ã€‚</p><p><strong>Unicode å’Œ JavaScript å­—ç¬¦ä¸²</strong></p><p>åœ¨æ¢è®¨ <code>util.toUSVString</code> ä¹‹å‰ï¼Œéœ€è¦æ˜ç™½ JavaScript å­—ç¬¦ä¸²æ˜¯å¦‚ä½•ä¸ Unicode æ ‡å‡†ç›¸å…³è”çš„ã€‚Unicode æ˜¯ä¸€ä¸ªå…¨çƒæ€§çš„æ ‡å‡†ï¼Œæ—¨åœ¨ä¸ºä¸–ç•Œä¸Šæ‰€æœ‰ä¹¦é¢è¯­è¨€çš„æ¯ä¸ªå­—ç¬¦æä¾›ä¸€ä¸ªå”¯ä¸€çš„ç¼–å·ã€‚ç„¶è€Œï¼Œæœ‰äº› Unicode å­—ç¬¦æ˜¯ç”±ä¸¤ä¸ªç¼–ç å•å…ƒç»„æˆçš„ï¼Œè¿™ç§ç‰¹æ®Šçš„å­—ç¬¦è¢«ç§°ä¸º &quot;ä»£ç†å¯¹&quot;ï¼ˆSurrogate pairsï¼‰ã€‚å¤§éƒ¨åˆ†å¸¸è§å­—ç¬¦ï¼ˆå¦‚è‹±æ–‡å­—æ¯ã€æ•°å­—ã€æ™®é€šæ ‡ç‚¹ç¬¦å·ç­‰ï¼‰ä½¿ç”¨ä¸€ä¸ªç¼–ç å•å…ƒå°±å¯ä»¥è¡¨ç¤ºï¼Œä½†å¯¹äºé‚£äº›å¤æ‚çš„å­—ç¬¦ï¼ˆå¦‚æŸäº›è¡¨æƒ…ç¬¦å·ã€å¤æ–‡å­—ç¬¦ç­‰ï¼‰ï¼Œåˆ™éœ€è¦ä¸¤ä¸ªç¼–ç å•å…ƒæ¥å…±åŒè¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ã€‚</p><p><strong>é—®é¢˜</strong></p><p>åœ¨å¤„ç†åŒ…å«è¿™ç±»å¤æ‚å­—ç¬¦çš„å­—ç¬¦ä¸²æ—¶ï¼Œå¦‚æœä¸æ­£ç¡®åœ°æ‹†åˆ†æˆ–é‡ç»„è¿™äº›å­—ç¬¦ä¸²ï¼Œå¯èƒ½ä¼šå¯¼è‡´æ— æ•ˆçš„ Unicode å­—ç¬¦å‡ºç°ï¼Œå› ä¸ºé”™è¯¯åœ°å°†ä»£ç†å¯¹åˆ†å¼€å¤„ç†äº†ã€‚</p><p><strong>è§£å†³æ–¹æ¡ˆ: <code>util.toUSVString(string)</code></strong></p><p>è¿™å°±æ˜¯ <code>util.toUSVString(string)</code> å‘æŒ¥ä½œç”¨çš„åœ°æ–¹ã€‚è¿™ä¸ªå‡½æ•°ç¡®ä¿ä¼ å…¥çš„å­—ç¬¦ä¸²è¢«è½¬æ¢ä¸ºä¸€ä¸ªæœ‰æ•ˆçš„ Unicode å­—ç¬¦ä¸²ï¼Œå…¶ä¸­ä»»ä½•ä»£ç†å¯¹éƒ½è¢«æ­£ç¡®å¤„ç†ï¼Œä»è€Œé¿å…äº†æ— æ•ˆ Unicode å­—ç¬¦çš„äº§ç”Ÿã€‚ç®€è€Œè¨€ä¹‹ï¼Œå®ƒä¿è¯å­—ç¬¦ä¸²åœ¨è¿›è¡Œæ“ä½œå’Œä¼ è¾“æ—¶ç¬¦åˆ Unicode æ ‡å‡†ã€‚</p><p><strong>å®é™…åº”ç”¨ä¾‹å­</strong></p><ol><li><p><strong>æ–‡ä»¶å¤„ç†ï¼š</strong> å‡è®¾ä½ æ­£åœ¨å¼€å‘ä¸€ä¸ª Node.js åº”ç”¨ç¨‹åºæ¥å¤„ç†ç”¨æˆ·ä¸Šä¼ çš„æ–‡ä»¶åï¼Œè¿™äº›æ–‡ä»¶åå¯èƒ½åŒ…å«å„ç§è¯­è¨€çš„å­—ç¬¦ï¼Œç”šè‡³æ˜¯è¡¨æƒ…ç¬¦å·ã€‚åœ¨ä¿å­˜è¿™äº›æ–‡ä»¶åä¹‹å‰ï¼Œä½¿ç”¨ <code>util.toUSVString(string)</code> ç¡®ä¿æ–‡ä»¶åæ˜¯æœ‰æ•ˆçš„ Unicode å­—ç¬¦ä¸²ï¼Œå¯ä»¥é˜²æ­¢å› å­—ç¬¦ç¼–ç é—®é¢˜å¯¼è‡´çš„é”™è¯¯ã€‚</p></li><li><p><strong>ç½‘ç»œé€šä¿¡ï¼š</strong> å½“ä½ çš„ Node.js æœåŠ¡å™¨æ¥æ”¶æ¥è‡ªå®¢æˆ·ç«¯çš„ JSON æ•°æ®ï¼Œå¹¶ä¸”è¿™äº›æ•°æ®å¯èƒ½åŒ…å«ç‰¹æ®Š Unicode å­—ç¬¦ï¼ˆå¦‚è¡¨æƒ…ç¬¦å·ï¼‰æ—¶ã€‚åœ¨å¤„ç†è¿™äº›æ•°æ®ä¹‹å‰ï¼Œä½¿ç”¨ <code>util.toUSVString(string)</code> æ¥ç¡®ä¿è¿™äº›ç‰¹æ®Šå­—ç¬¦ä¸ä¼šå› é”™è¯¯çš„å¤„ç†è€ŒæŸåï¼Œä»è€Œä¿éšœäº†æ•°æ®çš„å®Œæ•´æ€§ã€‚</p></li><li><p><strong>æ•°æ®åº“æ“ä½œï¼š</strong> åœ¨å°†å­—ç¬¦ä¸²æ•°æ®å­˜å‚¨åˆ°æ•°æ®åº“ä¸­ä¹‹å‰ï¼Œå°¤å…¶æ˜¯å½“è¿™äº›æ•°æ®å¯èƒ½å«æœ‰å¤æ‚çš„ Unicode å­—ç¬¦æ—¶ï¼Œä½¿ç”¨ <code>util.toUSVString(string)</code> æ¥è½¬æ¢è¿™äº›å­—ç¬¦ä¸²ï¼Œå¯ä»¥ç¡®ä¿å­˜å‚¨åœ¨æ•°æ®åº“ä¸­çš„æ•°æ®å§‹ç»ˆæ˜¯æœ‰æ•ˆä¸”å¯é¢„æµ‹çš„ã€‚</p></li></ol><p>é€šè¿‡ä¸Šè¿°ä¾‹å­ï¼Œä½ å¯ä»¥çœ‹åˆ° <code>util.toUSVString(string)</code> å‡½æ•°åœ¨å¤„ç†éœ€è¦ç¬¦åˆ Unicode æ ‡å‡†çš„å­—ç¬¦ä¸²æ•°æ®æ—¶çš„é‡è¦æ€§å’Œå®ç”¨æ€§ã€‚è¿™ä¿è¯äº†æ•°æ®çš„ä¸€è‡´æ€§å’Œæœ‰æ•ˆæ€§ï¼Œæ— è®ºæ˜¯åœ¨æ–‡ä»¶å¤„ç†ã€ç½‘ç»œé€šä¿¡è¿˜æ˜¯æ•°æ®åº“æ“ä½œç­‰åœºæ™¯ä¸­ã€‚</p><h2 id="util-transferableabortcontroller" tabindex="-1"><a class="header-anchor" href="#util-transferableabortcontroller"><span><a href="https://nodejs.org/docs/latest/api/util.html#utiltransferableabortcontroller" target="_blank" rel="noopener noreferrer">util.transferableAbortController()</a></span></a></h2><p>Node.js ä¸­çš„<code>util.transferableAbortController()</code>æ˜¯åœ¨ v17.0.0 ç‰ˆæœ¬ä¸­å¼•å…¥çš„ï¼Œæ—¨åœ¨å¸®åŠ©å¼€å‘è€…æ›´å¥½åœ°åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ç®¡ç†å’Œå–æ¶ˆå¼‚æ­¥æ“ä½œã€‚ä¸ºäº†è§£é‡Šè¿™ä¸ªåŠŸèƒ½ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦ç†è§£å‡ ä¸ªåŸºæœ¬æ¦‚å¿µï¼š<code>AbortController</code>, <code>AbortSignal</code>, å’Œ Worker Threadsã€‚</p><h3 id="åŸºæœ¬æ¦‚å¿µ-7" tabindex="-1"><a class="header-anchor" href="#åŸºæœ¬æ¦‚å¿µ-7"><span>åŸºæœ¬æ¦‚å¿µ</span></a></h3><ol><li><strong>AbortController</strong>: è¿™æ˜¯ä¸€ä¸ªå…è®¸ä½ é€šè¿‡å…¶<code>abort()</code>æ–¹æ³•å–æ¶ˆä¸€ä¸ªæˆ–å¤šä¸ª Web è¯·æ±‚çš„æ§åˆ¶å™¨ã€‚</li><li><strong>AbortSignal</strong>: ä¸<code>AbortController</code>ç›¸å…³è”çš„ä¿¡å·å¯¹è±¡ï¼Œå¯ä»¥è¢«ç”¨æ¥ç›‘å¬å–æ¶ˆäº‹ä»¶ã€‚</li><li><strong>Worker Threads</strong>: Node.js æä¾›çš„å·¥ä½œçº¿ç¨‹ï¼ˆWorkersï¼‰ï¼Œä½¿å¾—æ‰§è¡Œ CPU å¯†é›†å‹ä»»åŠ¡æˆ–è¿è¡Œé•¿æ—¶é—´æ“ä½œæ—¶ä¸ä¼šé˜»å¡ä¸»äº‹ä»¶å¾ªç¯ã€‚</li></ol><h3 id="util-transferableabortcontroller-1" tabindex="-1"><a class="header-anchor" href="#util-transferableabortcontroller-1"><span><code>util.transferableAbortController()</code></span></a></h3><p>å½“ä½¿ç”¨ Worker Threads è¿›è¡Œå¤šçº¿ç¨‹ç¼–ç¨‹æ—¶ï¼Œä½ å¯èƒ½ä¼šé‡åˆ°éœ€è¦åœ¨ä¸»çº¿ç¨‹å’Œå·¥ä½œçº¿ç¨‹ä¹‹é—´å–æ¶ˆæŸäº›å¼‚æ­¥æ“ä½œçš„åœºæ™¯ã€‚è¿™æ—¶<code>util.transferableAbortController()</code>å°±æ´¾ä¸Šç”¨åœºäº†ã€‚</p><p>è¿™ä¸ªæ–¹æ³•åˆ›å»ºäº†ä¸€ä¸ª<code>AbortController</code>å®ä¾‹ï¼Œè¯¥å®ä¾‹åŠå…¶<code>AbortSignal</code>å¯ä»¥åœ¨ä¸åŒçº¿ç¨‹ä¹‹é—´ä¼ é€’ï¼Œä»è€Œå®ç°è·¨çº¿ç¨‹çš„æ“ä½œå–æ¶ˆèƒ½åŠ›ã€‚</p><h3 id="å®é™…åº”ç”¨ç¤ºä¾‹-4" tabindex="-1"><a class="header-anchor" href="#å®é™…åº”ç”¨ç¤ºä¾‹-4"><span>å®é™…åº”ç”¨ç¤ºä¾‹</span></a></h3><p>å‡è®¾ä½ æ­£åœ¨æ„å»ºä¸€ä¸ª Node.js åº”ç”¨ï¼Œè¯¥åº”ç”¨éœ€è¦å¯¹ä¸€æ‰¹æ•°æ®è¿›è¡Œå¤æ‚å¤„ç†ï¼Œå¤„ç†è¿‡ç¨‹éœ€è¦è¿è¡Œä¸€æ®µæ—¶é—´ï¼Œå¹¶ä¸”ä½ ä¸å¸Œæœ›è¿™å½±å“åˆ°ä¸»çº¿ç¨‹çš„æ€§èƒ½ã€‚æ­¤æ—¶ï¼Œä½ å¯ä»¥ä½¿ç”¨ Worker Threads æ¥åœ¨åå°çº¿ç¨‹ä¸­å¤„ç†æ•°æ®ï¼Œå¹¶ä½¿ç”¨<code>transferableAbortController</code>æ¥ç®¡ç†å–æ¶ˆé€»è¾‘ã€‚</p><h4 id="æ­¥éª¤-1-åˆ›å»º-worker-thread" tabindex="-1"><a class="header-anchor" href="#æ­¥éª¤-1-åˆ›å»º-worker-thread"><span>æ­¥éª¤ 1: åˆ›å»º Worker Thread</span></a></h4><p>worker.js:</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#ECEFF4;"> {</span><span style="color:#D8DEE9;"> parentPort</span><span style="color:#ECEFF4;"> }</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">worker_threads</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">parentPort</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">on</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">message</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> ({</span><span style="color:#D8DEE9;"> taskData</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> signal</span><span style="color:#ECEFF4;"> })</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">  signal</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">addEventListener</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">abort</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> ()</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#616E88;">    // å¤„ç†å–æ¶ˆé€»è¾‘ï¼Œæ¸…ç†èµ„æºç­‰</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">ä»»åŠ¡è¢«å–æ¶ˆ</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">  // æ‰§è¡Œä¸€äº›é•¿æ—¶é—´è¿è¡Œçš„ä»»åŠ¡</span></span>
<span class="line"><span style="color:#616E88;">  // ...</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="æ­¥éª¤-2-åœ¨ä¸»çº¿ç¨‹ä¸­ä½¿ç”¨transferableabortcontroller" tabindex="-1"><a class="header-anchor" href="#æ­¥éª¤-2-åœ¨ä¸»çº¿ç¨‹ä¸­ä½¿ç”¨transferableabortcontroller"><span>æ­¥éª¤ 2: åœ¨ä¸»çº¿ç¨‹ä¸­ä½¿ç”¨<code>transferableAbortController</code></span></a></h4><p>main.js:</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#ECEFF4;"> {</span><span style="color:#D8DEE9;"> Worker</span><span style="color:#ECEFF4;"> }</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">worker_threads</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#ECEFF4;"> {</span><span style="color:#D8DEE9;"> transferableAbortController</span><span style="color:#ECEFF4;"> }</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// åˆ›å»ºtransferableAbortController</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#ECEFF4;"> {</span><span style="color:#D8DEE9;"> signal</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> controller</span><span style="color:#ECEFF4;"> }</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> transferableAbortController</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> worker</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> Worker</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">./worker.js</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å‘é€ä»»åŠ¡å’Œå¯ä¼ è¾“çš„signalç»™worker</span></span>
<span class="line"><span style="color:#D8DEE9;">worker</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">postMessage</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">{</span><span style="color:#88C0D0;"> taskData</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">è¿™é‡Œæ˜¯ä»»åŠ¡æ•°æ®</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> signal</span><span style="color:#ECEFF4;"> },</span><span style="color:#D8DEE9FF;"> [</span><span style="color:#D8DEE9;">signal</span><span style="color:#D8DEE9FF;">])</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å¦‚æœéœ€è¦å–æ¶ˆä»»åŠ¡</span></span>
<span class="line"><span style="color:#88C0D0;">setTimeout</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">()</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">  controller</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">abort</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¿™å°†ä¼šå¯¼è‡´workerä¸­å…³è”çš„signalè§¦å‘abortäº‹ä»¶</span></span>
<span class="line"><span style="color:#ECEFF4;">},</span><span style="color:#B48EAD;"> 1000</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // å‡å®š1ç§’åå¦‚æœä»»åŠ¡è¿˜æœªå®Œæˆï¼Œåˆ™å–æ¶ˆä»»åŠ¡</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ä¸ªä¾‹å­å±•ç¤ºäº†å¦‚ä½•åœ¨ä¸»çº¿ç¨‹ä¸­åˆ›å»ºä¸€ä¸ªå·¥ä½œçº¿ç¨‹æ¥å¤„ç†ä¸€ä¸ªä»»åŠ¡ï¼Œå¹¶é€šè¿‡<code>transferableAbortController</code>ä¼ é€’ä¸€ä¸ªå¯å–æ¶ˆä¿¡å·ç»™å·¥ä½œçº¿ç¨‹ã€‚å¦‚æœå‡ºäºæŸç§åŸå› ï¼ˆæ¯”å¦‚è¶…æ—¶æˆ–ç”¨æˆ·è¯·æ±‚ï¼‰éœ€è¦å–æ¶ˆè¿™ä¸ªä»»åŠ¡ï¼Œåªéœ€è°ƒç”¨<code>controller.abort()</code>å³å¯ã€‚è¿™ä¼šè§¦å‘å·¥ä½œçº¿ç¨‹å†…éƒ¨çš„å–æ¶ˆé€»è¾‘ï¼Œå…è®¸ä½ ä¼˜é›…åœ°ç»ˆæ­¢ä»»åŠ¡å¹¶è¿›è¡Œå¿…è¦çš„æ¸…ç†ã€‚</p><p>è¿™ç§æ¨¡å¼éå¸¸é€‚ç”¨äºé‚£äº›éœ€è¦åå°å¤„ç†å¤§é‡æ•°æ®ã€æ–‡ä»¶å¤„ç†æˆ– I/O æ“ä½œä¸”åŒæ—¶éœ€è¦èƒ½å¤Ÿçµæ´»å–æ¶ˆæ“ä½œçš„åº”ç”¨åœºæ™¯ã€‚</p><h2 id="util-transferableabortsignal-signal" tabindex="-1"><a class="header-anchor" href="#util-transferableabortsignal-signal"><span><a href="https://nodejs.org/docs/latest/api/util.html#utiltransferableabortsignalsignal" target="_blank" rel="noopener noreferrer">util.transferableAbortSignal(signal)</a></span></a></h2><p>äº†è§£<code>util.transferableAbortSignal(signal)</code>ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆå¼„æ¸…æ¥šå‡ ä¸ªåŸºæœ¬æ¦‚å¿µï¼š<code>AbortSignal</code>ã€<code>Transferable</code>å¯¹è±¡å’Œä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦è®© AbortSignal å¯ä»¥è½¬ç§»ã€‚</p><h3 id="åŸºç¡€æ¦‚å¿µ-1" tabindex="-1"><a class="header-anchor" href="#åŸºç¡€æ¦‚å¿µ-1"><span>åŸºç¡€æ¦‚å¿µ</span></a></h3><ol><li><p><strong>AbortController å’Œ AbortSignal</strong>: åœ¨ JavaScript ä¸­ï¼Œ<code>AbortController</code>æä¾›äº†ä¸€ç§å–æ¶ˆä¸€ä¸ªæˆ–å¤šä¸ª Web è¯·æ±‚çš„èƒ½åŠ›ã€‚å½“ä½ åˆ›å»ºäº†ä¸€ä¸ª<code>AbortController</code>å®ä¾‹ï¼Œä½ ä¼šé€šè¿‡å®ƒçš„<code>signal</code>å±æ€§è·å¾—ä¸€ä¸ª<code>AbortSignal</code>ã€‚è¿™ä¸ª<code>signal</code>å¯ä»¥è¢«ä¼ é€’ç»™æ”¯æŒå–æ¶ˆæ“ä½œçš„ APIï¼ˆå¦‚<code>fetch</code>ï¼‰ï¼Œç„¶åä½ å¯ä»¥åœ¨ä»»ä½•æ—¶å€™è°ƒç”¨<code>AbortController</code>çš„<code>abort()</code>æ–¹æ³•æ¥å–æ¶ˆè¿™äº›æ“ä½œã€‚</p></li><li><p><strong>Transferable å¯¹è±¡</strong>: åœ¨ Web å¹³å°ï¼Œ<code>Transferable</code>å¯¹è±¡æ˜¯é‚£äº›å¯ä»¥ä»ä¸€ä¸ª context ä¼ é€’åˆ°å¦ä¸€ä¸ª context çš„å¯¹è±¡ï¼Œæ¯”å¦‚ä»ä¸»çº¿ç¨‹ä¼ é€’åˆ° Web Workerã€‚ä¼ è¾“<code>Transferable</code>å¯¹è±¡é€šå¸¸æ¯”å¤åˆ¶è¿™äº›å¯¹è±¡æ›´é«˜æ•ˆã€‚</p></li><li><p><strong>ä¸ºä»€ä¹ˆè¦è½¬ç§» AbortSignal</strong>: åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä½ å¯èƒ½éœ€è¦åœ¨ä¸åŒçš„ç¯å¢ƒæˆ–ä¸Šä¸‹æ–‡ä¹‹é—´å–æ¶ˆæ­£åœ¨è¿›è¡Œçš„æ“ä½œã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸»çº¿ç¨‹å¯åŠ¨çš„æ“ä½œï¼Œä½†æ˜¯ä½ å¸Œæœ›èƒ½å¤Ÿåœ¨ Worker çº¿ç¨‹ä¸­å–æ¶ˆå®ƒã€‚ä¸ºæ­¤ï¼Œä½ éœ€è¦å°† AbortSignal ä½œä¸º Transferable å¯¹è±¡æ¥ä¼ é€’ã€‚</p></li></ol><h3 id="util-transferableabortsignal-signal-1" tabindex="-1"><a class="header-anchor" href="#util-transferableabortsignal-signal-1"><span>util.transferableAbortSignal(signal)</span></a></h3><p>ç°åœ¨ï¼Œæˆ‘ä»¬æ¥çœ‹<code>util.transferableAbortSignal(signal)</code>å‡½æ•°ã€‚è¿™æ˜¯ Node.js v21.7.1 ä¸­å¼•å…¥çš„ä¸€ä¸ªåŠŸèƒ½ï¼Œä½¿å¾—<code>AbortSignal</code>å¯¹è±¡å¯ä»¥ä½œä¸º<code>Transferable</code>å¯¹è±¡è¿›è¡Œä¼ è¾“ã€‚ç®€è€Œè¨€ä¹‹ï¼Œè¿™å…è®¸ä½ åœ¨ä¸åŒçš„ worker çº¿ç¨‹æˆ–è€…ä¸åŒçš„ Node.js ç¯å¢ƒä¸­å…±äº«å’Œä¼ é€’<code>AbortSignal</code>ï¼Œä»¥ä¾¿ç»Ÿä¸€æ§åˆ¶æ“ä½œçš„å–æ¶ˆã€‚</p><h3 id="å®é™…åº”ç”¨ç¤ºä¾‹-5" tabindex="-1"><a class="header-anchor" href="#å®é™…åº”ç”¨ç¤ºä¾‹-5"><span>å®é™…åº”ç”¨ç¤ºä¾‹</span></a></h3><p>å‡è®¾æœ‰ä»¥ä¸‹åœºæ™¯ï¼š</p><ol><li><strong>åœ¨çˆ¶å­å·¥ä½œçº¿ç¨‹é—´å–æ¶ˆä»»åŠ¡</strong>: <ul><li>ä½ åœ¨ä¸»çº¿ç¨‹ä¸­åˆ›å»ºäº†ä¸€ä¸ªå¤æ‚çš„è®¡ç®—ä»»åŠ¡ï¼Œä½†æ˜¯è¿™ä¸ªä»»åŠ¡æ˜¯åœ¨ä¸€ä¸ª Worker çº¿ç¨‹ä¸­æ‰§è¡Œçš„ã€‚</li><li>ç”¨æˆ·çªç„¶å–æ¶ˆè¿™ä¸ªä»»åŠ¡çš„éœ€æ±‚ã€‚</li><li>ä½ å¯ä»¥åœ¨ä¸»çº¿ç¨‹åˆ›å»ºä¸€ä¸ª<code>AbortController</code>å’Œå¯¹åº”çš„<code>AbortSignal</code>ï¼Œåˆ©ç”¨<code>util.transferableAbortSignal(signal)</code>å°†è¿™ä¸ªä¿¡å·è½¬æ¢æˆå¯ä¼ è¾“çš„å½¢å¼ï¼Œå¹¶å‘é€åˆ°å·¥ä½œçº¿ç¨‹ã€‚</li><li>åœ¨å·¥ä½œçº¿ç¨‹ä¸­ï¼Œä½ æ¥æ”¶åˆ°è¿™ä¸ªä¿¡å·å¹¶å¯ä»¥åŸºäºè¿™ä¸ªä¿¡å·å–æ¶ˆä»»åŠ¡ã€‚</li></ul></li></ol><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#616E88;">// ä¸»çº¿ç¨‹ä»£ç </span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#ECEFF4;"> {</span><span style="color:#D8DEE9;"> Worker</span><span style="color:#ECEFF4;"> }</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">worker_threads</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#ECEFF4;"> {</span><span style="color:#D8DEE9;"> transferableAbortSignal</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> AbortController</span><span style="color:#ECEFF4;"> }</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> abortController</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> AbortController</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> signal</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> transferableAbortSignal</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">abortController</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">signal</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> worker</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> Worker</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">./worker.js</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> {</span><span style="color:#88C0D0;"> workerData</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> {</span><span style="color:#D8DEE9;"> signal</span><span style="color:#ECEFF4;"> }</span><span style="color:#ECEFF4;"> }</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88C0D0;">setTimeout</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">()</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#616E88;">  // å‡è®¾ç”¨æˆ·è¯·æ±‚å–æ¶ˆä»»åŠ¡</span></span>
<span class="line"><span style="color:#D8DEE9;">  abortController</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">abort</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">},</span><span style="color:#B48EAD;"> 1000</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å·¥ä½œçº¿ç¨‹(worker.js)ä»£ç </span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#ECEFF4;"> {</span><span style="color:#D8DEE9;"> workerData</span><span style="color:#ECEFF4;"> }</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">worker_threads</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">workerData</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">signal</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">addEventListener</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">abort</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> ()</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">ä»»åŠ¡è¢«å–æ¶ˆ</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#616E88;">  // æ¸…ç†å·¥ä½œï¼Œåœæ­¢æ‰§è¡Œä»»åŠ¡</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li><strong>è·¨å¤šä¸ªèŠ‚ç‚¹çš„ä»»åŠ¡å–æ¶ˆ</strong>: <ul><li>ç±»ä¼¼åœ°ï¼Œåœ¨åˆ†å¸ƒå¼åº”ç”¨åœºæ™¯ä¸­ï¼Œä½ å¯èƒ½éœ€è¦ä»ä¸€ä¸ª Node.js è¿›ç¨‹å‘å¦ä¸€ä¸ªå‘é€ä»»åŠ¡å–æ¶ˆä¿¡å·ã€‚</li><li>ä½¿ç”¨<code>util.transferableAbortSignal(signal)</code>ï¼Œç»“åˆ IPCï¼ˆè¿›ç¨‹é—´é€šä¿¡ï¼‰æˆ–ç½‘ç»œè¯·æ±‚ï¼Œå¯ä»¥æœ‰æ•ˆåœ°ä¼ é€’å–æ¶ˆä¿¡å·ã€‚</li></ul></li></ol><p>è¿™äº›ä¾‹å­å±•ç¤ºäº†<code>util.transferableAbortSignal(signal)</code>å¦‚ä½•åœ¨å®é™…åº”ç”¨ä¸­æä¾›çµæ´»çš„ä»»åŠ¡å–æ¶ˆæœºåˆ¶ï¼Œç‰¹åˆ«æ˜¯åœ¨éœ€è¦è·¨ä¸Šä¸‹æ–‡æˆ–ç¯å¢ƒåè°ƒæ“ä½œçš„åœºæ™¯ä¸­ã€‚</p><h2 id="util-aborted-signal-resource" tabindex="-1"><a class="header-anchor" href="#util-aborted-signal-resource"><span><a href="https://nodejs.org/docs/latest/api/util.html#utilabortedsignal-resource" target="_blank" rel="noopener noreferrer">util.aborted(signal, resource)</a></span></a></h2><p><code>util.aborted(signal, resource)</code> æ˜¯ Node.js v21.7.1 ä¸­æ–°å¢åŠ çš„ä¸€ä¸ªåŠŸèƒ½ï¼Œå®ƒç”¨äºåˆ›å»ºä¸€ä¸ª Promiseï¼Œè¿™ä¸ª Promise ä¼šåœ¨ç»™å®šçš„ä¿¡å·è¢«è§¦å‘æ—¶ä¸­æ­¢ã€‚è¿™ä¸ªåŠŸèƒ½å¯¹äºå¤„ç†å¼‚æ­¥æ“ä½œå’Œèµ„æºæ¸…ç†éå¸¸æœ‰ç”¨ï¼Œå°¤å…¶æ˜¯åœ¨ä½ å¸Œæœ›èƒ½å¤Ÿä¼˜é›…åœ°å“åº”ç»ˆæ­¢ä¿¡å·ï¼ˆå¦‚ SIGINT, SIGTERMï¼‰æ—¶ã€‚</p><h3 id="å‚æ•°è§£é‡Š-1" tabindex="-1"><a class="header-anchor" href="#å‚æ•°è§£é‡Š-1"><span>å‚æ•°è§£é‡Šï¼š</span></a></h3><ul><li><code>signal</code>: è¿™æ˜¯ä¸€ä¸ª AbortSignal å¯¹è±¡ï¼Œé€šå¸¸æ¥æºäº AbortControllerã€‚AbortController å’Œ AbortSignal ç”¨äºå–æ¶ˆä¸€ä¸ªæˆ–å¤šä¸ª Web API çš„æ“ä½œã€‚åœ¨ Node.js ä¸­ï¼Œè¿™åŒæ ·é€‚ç”¨äºå–æ¶ˆå¼‚æ­¥ä»»åŠ¡æˆ–ä»»ä½•åŸºäº Promise çš„æ“ä½œã€‚</li><li><code>resource</code>: è¿™æ˜¯ä½ å¸Œæœ›ç›‘æ§æ˜¯å¦è¢«ä¸­æ­¢çš„èµ„æºã€‚å®ƒå¯ä»¥æ˜¯ä»»ä½•ç±»å‹çš„å¯¹è±¡ï¼Œä½†ä¸€èˆ¬æ¥è¯´ï¼Œå®ƒä¼šæ˜¯ä¸€ä¸ªå…·æœ‰æ¸…ç†è‡ªèº«èµ„æºéœ€æ±‚çš„å¯¹è±¡ï¼Œä¾‹å¦‚æ•°æ®åº“è¿æ¥ã€æ–‡ä»¶æµç­‰ã€‚</li></ul><h3 id="å®é™…è¿ç”¨ä¾‹å­-9" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨ä¾‹å­-9"><span>å®é™…è¿ç”¨ä¾‹å­ï¼š</span></a></h3><h4 id="ä¾‹å­-1-å–æ¶ˆ-http-è¯·æ±‚" tabindex="-1"><a class="header-anchor" href="#ä¾‹å­-1-å–æ¶ˆ-http-è¯·æ±‚"><span>ä¾‹å­ 1: å–æ¶ˆ HTTP è¯·æ±‚</span></a></h4><p>å‡è®¾ä½ æ­£åœ¨è¿›è¡Œä¸€ä¸ª HTTP è¯·æ±‚ï¼Œä½†å¦‚æœç”¨æˆ·çªç„¶æƒ³å–æ¶ˆè¿™ä¸ªè¯·æ±‚ï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>util.aborted()</code> åŠŸèƒ½æ¥ä¼˜é›…åœ°å¤„ç†è¿™ä¸ªæƒ…å†µã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#ECEFF4;"> {</span><span style="color:#D8DEE9;"> abortableFetch</span><span style="color:#ECEFF4;"> }</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">node-fetch</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#ECEFF4;"> {</span><span style="color:#D8DEE9;"> aborted</span><span style="color:#ECEFF4;"> }</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> controller</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> AbortController</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#ECEFF4;"> {</span><span style="color:#D8DEE9;"> signal</span><span style="color:#ECEFF4;"> }</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> controller</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å‡è®¾è¿™æ˜¯ä½ è¦è¯·æ±‚çš„ URL</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> url</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">https://example.com</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// ä½¿ç”¨ abortableFetch å‘èµ·è¯·æ±‚ï¼ŒåŒæ—¶ä¼ å…¥ä¿¡å·</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> fetchPromise</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> abortableFetch</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">url</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> {</span><span style="color:#D8DEE9;"> signal</span><span style="color:#ECEFF4;"> }</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// ä½¿ç”¨ util.aborted ç›‘å¬ç»ˆæ­¢ä¿¡å·</span></span>
<span class="line"><span style="color:#88C0D0;">aborted</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">signal</span><span style="color:#D8DEE9FF;">)</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">then</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">()</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">è¯·æ±‚è¢«å–æ¶ˆ</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#616E88;">  // è¿™é‡Œå¯ä»¥æ‰§è¡Œæ¸…ç†æ“ä½œï¼Œæ¯”å¦‚å…³é—­æ–‡ä»¶æµç­‰</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// æ¨¡æ‹Ÿç”¨æˆ·å–æ¶ˆæ“ä½œï¼Œ1ç§’åå–æ¶ˆè¯·æ±‚</span></span>
<span class="line"><span style="color:#88C0D0;">setTimeout</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">()</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">  controller</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">abort</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">},</span><span style="color:#B48EAD;"> 1000</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="ä¾‹å­-2-å¤„ç†æ•°æ®åº“æŸ¥è¯¢" tabindex="-1"><a class="header-anchor" href="#ä¾‹å­-2-å¤„ç†æ•°æ®åº“æŸ¥è¯¢"><span>ä¾‹å­ 2: å¤„ç†æ•°æ®åº“æŸ¥è¯¢</span></a></h4><p>å½“ä½ åœ¨æ‰§è¡Œä¸€ä¸ªé•¿æ—¶é—´è¿è¡Œçš„æ•°æ®åº“æŸ¥è¯¢æ—¶ï¼Œå¯èƒ½ä¼šå¸Œæœ›æœ‰èƒ½åŠ›åœ¨å¿…è¦æ—¶å–æ¶ˆè¿™ä¸ªæŸ¥è¯¢ã€‚ä½¿ç”¨ <code>util.aborted()</code> å¯ä»¥å¸®åŠ©ä½ å®ç°è¿™ä¸ªç›®æ ‡ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#ECEFF4;"> {</span><span style="color:#D8DEE9;"> aborted</span><span style="color:#ECEFF4;"> }</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#ECEFF4;"> {</span><span style="color:#D8DEE9;"> AbortController</span><span style="color:#ECEFF4;"> }</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">abort-controller</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å‡è®¾è¿™æ˜¯ä¸€ä¸ªç®€å•çš„æ¨¡æ‹Ÿæ•°æ®åº“æŸ¥è¯¢å‡½æ•°</span></span>
<span class="line"><span style="color:#81A1C1;">function</span><span style="color:#88C0D0;"> mockDatabaseQuery</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">signal</span><span style="color:#ECEFF4;">)</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  return</span><span style="color:#81A1C1;"> new</span><span style="color:#8FBCBB;"> Promise</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">resolve</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> reject</span><span style="color:#ECEFF4;">)</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">    const</span><span style="color:#D8DEE9;"> timeoutId</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> setTimeout</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">()</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#88C0D0;">      resolve</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">æŸ¥è¯¢ç»“æœ</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">    },</span><span style="color:#B48EAD;"> 5000</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // å‡è®¾æŸ¥è¯¢è€—æ—¶ 5 ç§’</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88C0D0;">    aborted</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">signal</span><span style="color:#D8DEE9FF;">)</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">then</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">()</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#88C0D0;">      clearTimeout</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">timeoutId</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#88C0D0;">      reject</span><span style="color:#D8DEE9FF;">(</span><span style="color:#81A1C1;">new</span><span style="color:#88C0D0;"> Error</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">æŸ¥è¯¢è¢«å–æ¶ˆ</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">    }</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> controller</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> AbortController</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#ECEFF4;"> {</span><span style="color:#D8DEE9;"> signal</span><span style="color:#ECEFF4;"> }</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> controller</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88C0D0;">mockDatabaseQuery</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">signal</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#ECEFF4;">  .</span><span style="color:#88C0D0;">then</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">result</span><span style="color:#ECEFF4;">)</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#D8DEE9;"> console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">result</span><span style="color:#D8DEE9FF;">))</span></span>
<span class="line"><span style="color:#ECEFF4;">  .</span><span style="color:#88C0D0;">catch</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">error</span><span style="color:#ECEFF4;">)</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#D8DEE9;"> console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">error</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">error</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">message</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// æ¨¡æ‹Ÿç”¨æˆ·åœ¨ 2 ç§’åå–æ¶ˆæŸ¥è¯¢</span></span>
<span class="line"><span style="color:#88C0D0;">setTimeout</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">()</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">  controller</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">abort</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">},</span><span style="color:#B48EAD;"> 2000</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ä¸¤ä¸ªä¾‹å­å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ <code>util.aborted()</code> æ¥åˆ›å»ºå¯å–æ¶ˆçš„å¼‚æ­¥æ“ä½œï¼Œåœ¨éœ€è¦æ—¶å¯ä»¥ä¼˜é›…åœ°å¤„ç†æ¸…ç†å·¥ä½œï¼Œä»è€Œæé«˜åº”ç”¨çš„å¥å£®æ€§å’Œç”¨æˆ·ä½“éªŒã€‚</p><h2 id="util-types" tabindex="-1"><a class="header-anchor" href="#util-types"><span><a href="https://nodejs.org/docs/latest/api/util.html#utiltypes" target="_blank" rel="noopener noreferrer">util.types</a></span></a></h2><p>å½“ä½ å¼€å§‹å­¦ä¹  Node.js æ—¶ï¼Œä¼šå‘ç°å®ƒä¸ä»…ä»…æ˜¯è¿è¡Œ JavaScript ä»£ç çš„å¹³å°ã€‚Node.js æä¾›äº†å¾ˆå¤šå†…å»ºçš„æ¨¡å—ï¼Œå¸®åŠ©æˆ‘ä»¬æ›´æ–¹ä¾¿åœ°å¼€å‘å„ç§åº”ç”¨ã€‚å…¶ä¸­<code>util.types</code>å°±æ˜¯ Node.js ä¸­ä¸€ä¸ªéå¸¸å®ç”¨çš„å†…å»ºæ¨¡å—ã€‚è¿™ä¸ªæ¨¡å—ä¸»è¦ç”¨äºå¸®åŠ©ä½ è¯†åˆ«å„ç§ä¸åŒçš„ JavaScript å€¼çš„ç±»å‹ï¼Œå°¤å…¶æ˜¯åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œè¿™äº›ç±»å‹ä¸å®¹æ˜“é€šè¿‡ä¼ ç»Ÿçš„æ–¹æ³•å¦‚<code>typeof</code>æ¥è¯†åˆ«ã€‚</p><h3 id="ä¸ºä»€ä¹ˆéœ€è¦util-types" tabindex="-1"><a class="header-anchor" href="#ä¸ºä»€ä¹ˆéœ€è¦util-types"><span>ä¸ºä»€ä¹ˆéœ€è¦<code>util.types</code></span></a></h3><p>åœ¨ JavaScript ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä½¿ç”¨<code>typeof</code>æˆ–è€…<code>instanceof</code>æ¥æ£€æµ‹ä¸€ä¸ªå˜é‡çš„ç±»å‹ã€‚ä½†æ˜¯ï¼Œè¿™ä¸¤ç§æ–¹æ³•æœ‰æ—¶å€™å¹¶ä¸èƒ½æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚ã€‚ä¾‹å¦‚ï¼Œ<code>typeof</code>å¯¹äºæ‰€æœ‰çš„å¯¹è±¡éƒ½ä¼šè¿”å›<code>&quot;object&quot;</code>ï¼Œè¿™ä½¿å¾—æˆ‘ä»¬æ— æ³•åŒºåˆ†æ˜¯ä¸€ä¸ªæ™®é€šçš„å¯¹è±¡ã€ä¸€ä¸ªæ•°ç»„è¿˜æ˜¯ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ã€‚åŒæ ·åœ°ï¼Œ<code>instanceof</code>ä¹Ÿæœ‰å®ƒçš„å±€é™æ€§ï¼Œå°¤å…¶æ˜¯åœ¨æ¶‰åŠåˆ°ä»ä¸åŒçš„ä¸Šä¸‹æ–‡ï¼ˆå¦‚ä¸åŒçš„ iframe æˆ–è€… vm æ¨¡å—åˆ›å»ºçš„æ²™ç›’ç¯å¢ƒï¼‰ä¸­åˆ›å»ºçš„å¯¹è±¡æ—¶ã€‚</p><p>è¿™æ—¶å€™ï¼Œ<code>util.types</code>æ¨¡å—å°±æ´¾ä¸Šç”¨åœºäº†ã€‚å®ƒæä¾›äº†ä¸€ç³»åˆ—çš„æ–¹æ³•ï¼Œèƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬æ›´ç²¾ç¡®åœ°è¯†åˆ«å˜é‡çš„ç±»å‹ã€‚</p><h3 id="util-typesçš„ä¸€äº›å®ç”¨æ–¹æ³•" tabindex="-1"><a class="header-anchor" href="#util-typesçš„ä¸€äº›å®ç”¨æ–¹æ³•"><span><code>util.types</code>çš„ä¸€äº›å®ç”¨æ–¹æ³•</span></a></h3><p>ä»¥ä¸‹æ˜¯<code>util.types</code>æ¨¡å—æä¾›çš„ä¸€äº›æ–¹æ³•çš„ä¾‹å­ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨å®ƒä»¬ï¼š</p><ol><li><p><strong><code>isAsyncFunction(value)</code></strong> - åˆ¤æ–­ç»™å®šçš„å€¼æ˜¯å¦æ˜¯ä¸€ä¸ªå¼‚æ­¥å‡½æ•°ï¼ˆasync functionï¼‰ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">async</span><span style="color:#81A1C1;"> function</span><span style="color:#88C0D0;"> foo</span><span style="color:#ECEFF4;">()</span><span style="color:#ECEFF4;"> {}</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isAsyncFunction</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">foo</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // true</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isAsyncFunction</span><span style="color:#D8DEE9FF;">(</span><span style="color:#81A1C1;">function</span><span style="color:#ECEFF4;"> ()</span><span style="color:#ECEFF4;"> {}</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // false</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong><code>isPromise(value)</code></strong> - åˆ¤æ–­ç»™å®šçš„å€¼æ˜¯å¦æ˜¯ä¸€ä¸ª Promise å¯¹è±¡ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> promise</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#8FBCBB;"> Promise</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">resolve</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> reject</span><span style="color:#ECEFF4;">)</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {}</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isPromise</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">promise</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // true</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isPromise</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">{}</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // false</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong><code>isArrayBuffer(value)</code></strong> - æ£€æŸ¥ä¸€ä¸ªå€¼æ˜¯å¦ä¸º ArrayBufferã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> buffer</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> ArrayBuffer</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">10</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isArrayBuffer</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">buffer</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // true</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isArrayBuffer</span><span style="color:#D8DEE9FF;">(</span><span style="color:#81A1C1;">new</span><span style="color:#88C0D0;"> Uint8Array</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">10</span><span style="color:#D8DEE9FF;">)))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // false</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong><code>isTypedArray(value)</code></strong> - æ£€æŸ¥ä¸€ä¸ªå€¼æ˜¯å¦ä¸º TypedArrayï¼ˆå¦‚ Uint8Array, Float32Array ç­‰ï¼‰ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> typedArray</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> Uint8Array</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">10</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isTypedArray</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">typedArray</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // true</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isTypedArray</span><span style="color:#D8DEE9FF;">([]))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // false</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h3 id="å®é™…åº”ç”¨åœºæ™¯-1" tabindex="-1"><a class="header-anchor" href="#å®é™…åº”ç”¨åœºæ™¯-1"><span>å®é™…åº”ç”¨åœºæ™¯</span></a></h3><ul><li><strong>å‚æ•°éªŒè¯</strong>ï¼šå½“ç¼–å†™ä¸€ä¸ªå‡½æ•°æˆ–æ¨¡å—ï¼ŒæœŸæœ›ç”¨æˆ·ä¼ é€’ç‰¹å®šç±»å‹çš„å‚æ•°æ—¶ï¼Œå¯ä»¥ä½¿ç”¨<code>util.types</code>æ¥è¿›è¡Œä¸¥æ ¼çš„å‚æ•°ç±»å‹æ£€æŸ¥ï¼Œé¿å…å› ç±»å‹é”™è¯¯å¼•å‘çš„é—®é¢˜ã€‚</li><li><strong>API å¼€å‘</strong>ï¼šåœ¨å¤„ç† HTTP è¯·æ±‚æ—¶ï¼Œå¯¹è¯·æ±‚ä½“ä¸­çš„æ•°æ®è¿›è¡Œç±»å‹æ£€æŸ¥ï¼Œç¡®ä¿æ¥å£çš„å¥å£®æ€§ã€‚</li><li><strong>åº“/æ¡†æ¶å¼€å‘</strong>ï¼šåœ¨å¼€å‘ä¸€ä¸ªéœ€è¦å¤„ç†å¤šç§ç±»å‹æ•°æ®çš„åº“æˆ–æ¡†æ¶æ—¶ï¼Œ<code>util.types</code>å¯ä»¥å¸®åŠ©å¼€å‘è€…æ›´å¥½åœ°ç®¡ç†å’Œæ£€æŸ¥æ•°æ®ç±»å‹ï¼Œæé«˜ä»£ç çš„å¯é æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</li></ul><p>æ€»ä¹‹ï¼Œ<code>util.types</code>æä¾›äº†ä¸€ç§æ›´ç²¾ç¡®ã€æ›´ä¸“ä¸šçš„æ–¹å¼æ¥æ£€æµ‹ JavaScript å€¼çš„ç±»å‹ï¼Œå¯¹äºæå‡ Node.js åº”ç”¨çš„è´¨é‡å’Œç¨³å®šæ€§éå¸¸æœ‰å¸®åŠ©ã€‚</p><h3 id="util-types-isanyarraybuffer-value" tabindex="-1"><a class="header-anchor" href="#util-types-isanyarraybuffer-value"><span><a href="https://nodejs.org/docs/latest/api/util.html#utiltypesisanyarraybuffervalue" target="_blank" rel="noopener noreferrer">util.types.isAnyArrayBuffer(value)</a></span></a></h3><p>å½“ä½ åˆšå¼€å§‹æ¥è§¦ç¼–ç¨‹ï¼Œå°¤å…¶æ˜¯ Node.jsï¼Œé‡åˆ°åƒ<code>util.types.isAnyArrayBuffer(value)</code>è¿™æ ·çš„æ–¹æ³•å¯èƒ½ä¼šè§‰å¾—æœ‰ç‚¹å¤æ‚ï¼Œä½†æˆ‘ä¼šåŠªåŠ›ç”¨æœ€ç®€å•çš„æ–¹å¼è§£é‡Šç»™ä½ ã€‚</p><h3 id="ä»€ä¹ˆæ˜¯-arraybuffer" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯-arraybuffer"><span>ä»€ä¹ˆæ˜¯ ArrayBufferï¼Ÿ</span></a></h3><p>é¦–å…ˆï¼Œè®©æˆ‘ä»¬ä»â€œä»€ä¹ˆæ˜¯ ArrayBufferï¼Ÿâ€å¼€å§‹ã€‚åœ¨ JavaScript ä¸­ï¼Œ<code>ArrayBuffer</code>å¯¹è±¡ç”¨æ¥è¡¨ç¤ºä¸€å—å›ºå®šé•¿åº¦çš„åŸå§‹äºŒè¿›åˆ¶æ•°æ®ç¼“å†²åŒºã€‚ç®€å•æ¥è¯´ï¼Œå®ƒå°±åƒæ˜¯ä¸€ä¸ªå¯ä»¥å­˜å‚¨äºŒè¿›åˆ¶æ•°æ®çš„å®¹å™¨ï¼Œæ¯”å¦‚æ–‡ä»¶ã€å›¾ç‰‡æˆ–éŸ³é¢‘ç­‰çš„æ•°æ®æµã€‚</p><h3 id="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨-util-types-isanyarraybuffer" tabindex="-1"><a class="header-anchor" href="#ä¸ºä»€ä¹ˆè¦ä½¿ç”¨-util-types-isanyarraybuffer"><span>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ util.types.isAnyArrayBuffer()ï¼Ÿ</span></a></h3><p>åœ¨å¤„ç†ç¨‹åºæ—¶ï¼Œå°¤å…¶æ˜¯æ¶‰åŠåˆ°äºŒè¿›åˆ¶æ•°æ®çš„æ—¶å€™ï¼Œä½ å¯èƒ½ä¼šé‡åˆ°ä¸åŒç§ç±»çš„<code>ArrayBuffer</code>ã€‚ä¾‹å¦‚ï¼Œé™¤äº†åŸºæœ¬çš„<code>ArrayBuffer</code>ä»¥å¤–ï¼Œè¿˜æœ‰<code>SharedArrayBuffer</code>ã€‚<code>SharedArrayBuffer</code>å…è®¸åœ¨ä¸åŒçš„å·¥ä½œçº¿ç¨‹ï¼ˆå¦‚ Web Workersï¼‰ä¹‹é—´å…±äº«å†…å­˜æ•°æ®ã€‚äº†è§£ä¸€ä¸ªå˜é‡æ˜¯å¦æ˜¯æŸç§ç±»å‹çš„<code>ArrayBuffer</code>å¯¹äºæ­£ç¡®å¤„ç†å®ƒå¾ˆé‡è¦ã€‚</p><p>è¿™æ—¶å€™ï¼Œ<code>util.types.isAnyArrayBuffer(value)</code>å‡½æ•°å°±æ´¾ä¸Šç”¨åœºäº†ã€‚Node.js æä¾›çš„è¿™ä¸ªå·¥å…·å‡½æ•°å¯ä»¥å¸®åŠ©ä½ æ£€æŸ¥ä¸€ä¸ªå€¼æ˜¯å¦ä¸ºä»»æ„ç±»å‹çš„<code>ArrayBuffer</code>â€”â€”æ— è®ºæ˜¯æ ‡å‡†çš„<code>ArrayBuffer</code>è¿˜æ˜¯<code>SharedArrayBuffer</code>ã€‚</p><h3 id="å¦‚ä½•ä½¿ç”¨-util-types-isanyarraybuffer" tabindex="-1"><a class="header-anchor" href="#å¦‚ä½•ä½¿ç”¨-util-types-isanyarraybuffer"><span>å¦‚ä½•ä½¿ç”¨ util.types.isAnyArrayBuffer()ï¼Ÿ</span></a></h3><p>ä½¿ç”¨èµ·æ¥éå¸¸ç®€å•ã€‚é¦–å…ˆï¼Œä½ éœ€è¦åœ¨ä½ çš„ Node.js ä»£ç ä¸­å¼•å…¥<code>util</code>æ¨¡å—ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>ç„¶åï¼Œä½ å°±å¯ä»¥ä½¿ç”¨<code>util.types.isAnyArrayBuffer(value)</code>æ¥æ£€æŸ¥ä¸€ä¸ªå€¼æ˜¯å¦ä¸ºä»»æ„ç±»å‹çš„<code>ArrayBuffer</code>äº†ã€‚è¿™é‡Œçš„<code>value</code>å°±æ˜¯ä½ æƒ³è¦æ£€æŸ¥çš„é‚£ä¸ªå˜é‡ã€‚</p><h3 id="å®é™…ä¾‹å­-3" tabindex="-1"><a class="header-anchor" href="#å®é™…ä¾‹å­-3"><span>å®é™…ä¾‹å­</span></a></h3><p>å‡è®¾ä½ æ­£åœ¨ç¼–å†™ä¸€ä¸ªç¨‹åºï¼Œéœ€è¦å¤„ç†ä»ç½‘ä¸Šä¸‹è½½çš„å›¾ç‰‡æ•°æ®ã€‚è¿™äº›æ•°æ®å¯èƒ½ä¼šä»¥<code>ArrayBuffer</code>çš„å½¢å¼å‡ºç°ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å‡è®¾è¿™æ˜¯ä»æŸä¸ªAPIè·å–çš„å›¾ç‰‡æ•°æ®</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> imageData</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> ArrayBuffer</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">1024</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // åˆ›å»ºä¸€ä¸ªå¤§å°ä¸º1024å­—èŠ‚çš„ArrayBuffer</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isAnyArrayBuffer</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">imageData</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // true</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<code>imageData</code>æ˜¯ä¸€ä¸ª<code>ArrayBuffer</code>ã€‚ä½¿ç”¨<code>util.types.isAnyArrayBuffer(imageData)</code>å°†ä¼šè¿”å›<code>true</code>ï¼Œå› ä¸º<code>imageData</code>ç¡®å®æ˜¯ä¸€ä¸ª<code>ArrayBuffer</code>ã€‚</p><p>å¦‚æœä½ æƒ³ç¡®è®¤ä¸€ä¸ªå…±äº«çš„æ•°æ®ç¼“å†²æ˜¯å¦ä¹Ÿè¢«è¯†åˆ«ï¼Œå¯ä»¥è¿™æ ·æµ‹è¯•ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> sharedData</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> SharedArrayBuffer</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">1024</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // åˆ›å»ºä¸€ä¸ªå¤§å°ä¸º1024å­—èŠ‚çš„SharedArrayBuffer</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isAnyArrayBuffer</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">sharedData</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // åŒæ ·è¿”å›true</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™è¯´æ˜<code>sharedData</code>è™½ç„¶æ˜¯ä¸€ä¸ª<code>SharedArrayBuffer</code>ï¼Œä½†<code>util.types.isAnyArrayBuffer(sharedData)</code>ä¹Ÿèƒ½æ­£ç¡®è¯†åˆ«å‡ºå®ƒæ˜¯<code>ArrayBuffer</code>çš„ä¸€ç§ç±»å‹ã€‚</p><h3 id="æ€»ç»“-8" tabindex="-1"><a class="header-anchor" href="#æ€»ç»“-8"><span>æ€»ç»“</span></a></h3><p><code>util.types.isAnyArrayBuffer(value)</code>æ˜¯ Node.js æä¾›çš„ä¸€ä¸ªå·¥å…·å‡½æ•°ï¼Œå®ƒå¸®åŠ©ä½ æ£€æŸ¥ä¸€ä¸ªå€¼æ˜¯å¦ä¸ºä»»æ„ç±»å‹çš„<code>ArrayBuffer</code>ã€‚è¿™åœ¨å¤„ç†äºŒè¿›åˆ¶æ•°æ®æ—¶ç‰¹åˆ«æœ‰ç”¨ï¼Œæ¯”å¦‚æ“ä½œæ–‡ä»¶ã€å›¾ç‰‡æˆ–æ˜¯åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹å…±äº«æ•°æ®ã€‚æŒæ¡å®ƒçš„ä½¿ç”¨å¯ä»¥å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œå¤„ç† JavaScript ä¸­çš„äºŒè¿›åˆ¶æ•°æ®ã€‚</p><h3 id="util-types-isarraybufferview-value" tabindex="-1"><a class="header-anchor" href="#util-types-isarraybufferview-value"><span><a href="https://nodejs.org/docs/latest/api/util.html#utiltypesisarraybufferviewvalue" target="_blank" rel="noopener noreferrer">util.types.isArrayBufferView(value)</a></span></a></h3><p>åœ¨ Node.js ä¸­ï¼Œ<code>util.types.isArrayBufferView(value)</code> æ˜¯ä¸€ä¸ªç”¨æ¥åˆ¤æ–­ç»™å®šå‚æ•°æ˜¯å¦æ˜¯ä¸€ä¸ª ArrayBuffer è§†å›¾çš„å‡½æ•°ã€‚ArrayBuffer æ˜¯ JavaScript çš„ä¸€ä¸ªå…¨å±€å¯¹è±¡ï¼Œç”¨äºè¡¨ç¤ºä¸€æ®µåŸå§‹äºŒè¿›åˆ¶æ•°æ®ï¼›è€Œæ‰€è°“çš„ ArrayBuffer è§†å›¾åˆ™æ˜¯æŒ‡èƒ½å¤Ÿä»¥ç‰¹å®šæ ¼å¼è®¿é—®è¿™äº›äºŒè¿›åˆ¶æ•°æ®çš„å¯¹è±¡ï¼Œä¾‹å¦‚ Typed Arraysï¼ˆç±»å‹åŒ–æ•°ç»„ï¼‰å’Œ DataViewã€‚</p><h3 id="ä»€ä¹ˆæ˜¯-arraybuffer-1" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯-arraybuffer-1"><span>ä»€ä¹ˆæ˜¯ ArrayBuffer?</span></a></h3><p>ç®€å•æ¥è¯´ï¼ŒArrayBuffer å¯¹è±¡ç”¨æ¥è¡¨ç¤ºé€šç”¨çš„ã€å›ºå®šé•¿åº¦çš„äºŒè¿›åˆ¶æ•°æ®ç¼“å†²åŒºã€‚ä½ å¯ä»¥è®¤ä¸ºå®ƒå°±åƒä¸€ä¸ªå®¹å™¨ï¼Œé‡Œé¢è£…ç€åŸå§‹çš„äºŒè¿›åˆ¶æ•°æ®ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬ä¸èƒ½ç›´æ¥æ“ä½œ ArrayBuffer é‡Œé¢çš„å†…å®¹ã€‚ä¸ºäº†è¯»å–æˆ–ä¿®æ”¹é‡Œé¢çš„æ•°æ®ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡â€œè§†å›¾â€ï¼ˆTyped Arrays æˆ– DataViewï¼‰æ¥è¿›è¡Œã€‚</p><h3 id="ä»€ä¹ˆæ˜¯-arraybuffer-è§†å›¾" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯-arraybuffer-è§†å›¾"><span>ä»€ä¹ˆæ˜¯ ArrayBuffer è§†å›¾ï¼Ÿ</span></a></h3><p>ArrayBuffer è§†å›¾æä¾›äº†ä¸€ç§è¯»å†™ ArrayBuffer å†…å®¹çš„æ–¹æ³•ã€‚æœ‰ä¸¤ç§ç±»å‹çš„è§†å›¾ï¼š</p><ol><li><strong>Typed Arrays</strong>ï¼šæ¯”å¦‚ Int8Array, Uint8Array, Float32Array ç­‰ï¼Œå®ƒä»¬æä¾›å¯¹å­˜å‚¨åœ¨ ArrayBuffer ä¸­çš„æ•°æ®çš„æŒ‰ç±»å‹è®¿é—®ã€‚</li><li><strong>DataView</strong>ï¼šæä¾›äº†ä¸€ç§æ›´çµæ´»çš„æ–¹å¼æ¥è¯»å–å’Œå†™å…¥ ArrayBuffer ä¸­çš„æ•°æ®ï¼Œå…è®¸ä½ ä»¥ä¸åŒçš„æ ¼å¼ï¼ˆå¦‚ 8 ä½æ•´æ•°ã€16 ä½æ•´æ•°ã€32 ä½æµ®ç‚¹æ•°ç­‰ï¼‰æ¥æ“ä½œç›¸åŒçš„æ•°æ®ã€‚</li></ol><h3 id="util-types-isarraybufferview-value-1" tabindex="-1"><a class="header-anchor" href="#util-types-isarraybufferview-value-1"><span><code>util.types.isArrayBufferView(value)</code></span></a></h3><p>ç°åœ¨å›åˆ° <code>util.types.isArrayBufferView(value)</code> è¿™ä¸ªå‡½æ•°ï¼Œå®ƒçš„ä½œç”¨å°±æ˜¯æ£€æŸ¥ä¼ å…¥çš„ <code>value</code> æ˜¯å¦ä¸ºä¸€ä¸ª ArrayBuffer è§†å›¾ï¼Œå³å®ƒæ£€æŸ¥ <code>value</code> æ˜¯å¦æ˜¯ä¸€ä¸ª Typed Array æˆ–è€… DataView çš„å®ä¾‹ã€‚</p><h3 id="å®é™…è¿ç”¨ç¤ºä¾‹-6" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨ç¤ºä¾‹-6"><span>å®é™…è¿ç”¨ç¤ºä¾‹</span></a></h3><h4 id="ç¤ºä¾‹-1-æ£€æŸ¥å˜é‡æ˜¯å¦ä¸º-arraybuffer-è§†å›¾" tabindex="-1"><a class="header-anchor" href="#ç¤ºä¾‹-1-æ£€æŸ¥å˜é‡æ˜¯å¦ä¸º-arraybuffer-è§†å›¾"><span>ç¤ºä¾‹ 1ï¼šæ£€æŸ¥å˜é‡æ˜¯å¦ä¸º ArrayBuffer è§†å›¾</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// åˆ›å»ºä¸€ä¸ª Typed Array</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> typedArray</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> Uint8Array</span><span style="color:#D8DEE9FF;">([</span><span style="color:#B48EAD;">1</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 2</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 3</span><span style="color:#D8DEE9FF;">])</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// åˆ›å»ºä¸€ä¸ª DataView</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> buffer</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> ArrayBuffer</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">16</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> dataView</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> DataView</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">buffer</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isArrayBufferView</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">typedArray</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡ºï¼štrue</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isArrayBufferView</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">dataView</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡ºï¼štrue</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// æ£€æŸ¥é ArrayBuffer è§†å›¾</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isArrayBufferView</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">{}</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡ºï¼šfalse</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isArrayBufferView</span><span style="color:#D8DEE9FF;">([]))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡ºï¼šfalse</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆåˆ›å»ºäº†ä¸€ä¸ªç±»å‹åŒ–æ•°ç»„ <code>typedArray</code> å’Œä¸€ä¸ª <code>DataView</code> çš„å®ä¾‹ <code>dataView</code>ã€‚ä½¿ç”¨ <code>util.types.isArrayBufferView()</code> å‡½æ•°åˆ†åˆ«æ£€æŸ¥è¿™äº›å¯¹è±¡ï¼Œå¯ä»¥çœ‹åˆ°å¯¹äºç±»å‹åŒ–æ•°ç»„å’Œ DataViewï¼Œå‡½æ•°è¿”å› <code>true</code>ï¼Œè¡¨æ˜å®ƒä»¬æ˜¯ ArrayBuffer è§†å›¾ã€‚è€Œå¯¹äºæ™®é€šçš„å¯¹è±¡ <code>{}</code> å’Œæ•°ç»„ <code>[]</code>ï¼Œå‡½æ•°è¿”å› <code>false</code>ã€‚</p><h4 id="ç¤ºä¾‹-2-å‡½æ•°å‚æ•°ç±»å‹æ£€æŸ¥" tabindex="-1"><a class="header-anchor" href="#ç¤ºä¾‹-2-å‡½æ•°å‚æ•°ç±»å‹æ£€æŸ¥"><span>ç¤ºä¾‹ 2ï¼šå‡½æ•°å‚æ•°ç±»å‹æ£€æŸ¥</span></a></h4><p>å‡è®¾ä½ æ­£åœ¨ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°å¤„ç†äºŒè¿›åˆ¶æ•°æ®ï¼Œä½†ä½ å¸Œæœ›ç¡®ä¿ä¼ å…¥çš„å‚æ•°æ˜¯ ArrayBuffer è§†å›¾ä¹‹ä¸€ï¼Œä»¥ç¡®ä¿è¯¥å‡½æ•°èƒ½å¤Ÿæ­£ç¡®æ‰§è¡Œã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">function</span><span style="color:#88C0D0;"> processBinaryData</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">view</span><span style="color:#ECEFF4;">)</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#81A1C1;">!</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isArrayBufferView</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">view</span><span style="color:#D8DEE9FF;">)) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#81A1C1;">    throw</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> TypeError</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">The argument must be an ArrayBuffer view</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">  // å¤„ç† ArrayBuffer è§†å›¾...</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Processing ArrayBuffer view...</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">try</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#88C0D0;">  processBinaryData</span><span style="color:#D8DEE9FF;">(</span><span style="color:#81A1C1;">new</span><span style="color:#88C0D0;"> Uint8Array</span><span style="color:#D8DEE9FF;">([</span><span style="color:#B48EAD;">1</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 2</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 3</span><span style="color:#D8DEE9FF;">]))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // æ­£ç¡®çš„è°ƒç”¨</span></span>
<span class="line"><span style="color:#88C0D0;">  processBinaryData</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">This is a string</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // é”™è¯¯çš„è°ƒç”¨</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;"> catch</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">e</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">error</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">e</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡ºï¼šTypeError: The argument must be an ArrayBuffer view</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<code>processBinaryData</code> å‡½æ•°é¦–å…ˆæ£€æŸ¥å…¶å‚æ•°æ˜¯å¦ä¸º ArrayBuffer è§†å›¾ã€‚å¦‚æœä¸æ˜¯ï¼Œå®ƒä¼šæŠ›å‡ºä¸€ä¸ª <code>TypeError</code>ã€‚è¿™æ ·åšå¯ä»¥ç¡®ä¿åªæœ‰åˆé€‚çš„å‚æ•°ç±»å‹æ‰è¢«ä¼ é€’ç»™å‡½æ•°ï¼Œä»è€Œé¿å…è¿è¡Œæ—¶é”™è¯¯å¹¶ä¿è¯æ•°æ®å¤„ç†çš„æ­£ç¡®æ€§ã€‚</p><h3 id="æ€»ç»“-9" tabindex="-1"><a class="header-anchor" href="#æ€»ç»“-9"><span>æ€»ç»“</span></a></h3><p><code>util.types.isArrayBufferView(value)</code> æ˜¯ Node.js æä¾›çš„ä¸€ä¸ªå®ç”¨å‡½æ•°ï¼Œç”¨äºæ£€æŸ¥æŸä¸ªå€¼æ˜¯å¦ä¸º ArrayBuffer çš„è§†å›¾ï¼ˆTyped Array æˆ– DataViewï¼‰ã€‚è¿™åœ¨å¤„ç†äºŒè¿›åˆ¶æ•°æ®ã€æ‰§è¡Œç±»å‹æ£€æŸ¥ã€ç¡®ä¿å‡½æ•°å‚æ•°æ­£ç¡®æ€§ç­‰æ–¹é¢éå¸¸æœ‰ç”¨ã€‚</p><h3 id="util-types-isargumentsobject-value" tabindex="-1"><a class="header-anchor" href="#util-types-isargumentsobject-value"><span><a href="https://nodejs.org/docs/latest/api/util.html#utiltypesisargumentsobjectvalue" target="_blank" rel="noopener noreferrer">util.types.isArgumentsObject(value)</a></span></a></h3><p>Node.js æ˜¯ä¸€ä¸ªå¼€æºçš„ã€è·¨å¹³å°çš„ JavaScript è¿è¡Œæ—¶ç¯å¢ƒï¼Œå®ƒå…è®¸ä½ åœ¨æœåŠ¡å™¨ç«¯è¿è¡Œ JavaScript ä»£ç ã€‚<code>util.types.isArgumentsObject(value)</code>æ˜¯ Node.js ä¸­<code>util</code>æ¨¡å—æä¾›çš„ä¸€ä¸ªæ–¹æ³•ï¼Œç”¨äºåˆ¤æ–­ç»™å®šçš„å€¼æ˜¯å¦æ˜¯ä¸€ä¸ªâ€œarguments å¯¹è±¡â€ã€‚</p><p>é¦–å…ˆï¼Œäº†è§£ä»€ä¹ˆæ˜¯â€œarguments å¯¹è±¡â€å¾ˆé‡è¦ï¼š</p><ul><li>åœ¨ JavaScript ä¸­ï¼Œæ¯ä¸ªå‡½æ•°å†…éƒ¨éƒ½å¯ä»¥è®¿é—®åä¸º<code>arguments</code>çš„ç‰¹æ®Šå¯¹è±¡ã€‚è¿™ä¸ªå¯¹è±¡åŒ…å«äº†ä¼ é€’ç»™å‡½æ•°çš„æ‰€æœ‰å‚æ•°ã€‚</li><li>å°½ç®¡<code>arguments</code>çœ‹èµ·æ¥å’Œæ•°ç»„å¾ˆåƒï¼ˆä½ å¯ä»¥é€šè¿‡ä¸‹æ ‡è®¿é—®å…¶ä¸­çš„å…ƒç´ ï¼Œä¾‹å¦‚<code>arguments[0]</code>ï¼‰ï¼Œä½†å®ƒå®é™…ä¸Šä¸æ˜¯ä¸€ä¸ªçœŸæ­£çš„æ•°ç»„å¯¹è±¡ã€‚</li></ul><p><code>util.types.isArgumentsObject(value)</code>æ–¹æ³•å°±æ˜¯ç”¨æ¥æ£€æŸ¥ä¸€ä¸ªå€¼æ˜¯å¦ä¸ºè¿™ç§ç‰¹æ®Šçš„<code>arguments</code>å¯¹è±¡ã€‚å¦‚æœæ˜¯ï¼Œåˆ™è¿”å›<code>true</code>ï¼›å¦‚æœä¸æ˜¯ï¼Œè¿”å›<code>false</code>ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä¼šé€šè¿‡ä¸€äº›å®é™…çš„ä¾‹å­æ¥è§£é‡Šè¿™ä¸ªæ–¹æ³•çš„åº”ç”¨ï¼š</p><h3 id="ä¾‹å­-1-åˆ¤æ–­æ™®é€šå‡½æ•°ä¸­çš„-arguments" tabindex="-1"><a class="header-anchor" href="#ä¾‹å­-1-åˆ¤æ–­æ™®é€šå‡½æ•°ä¸­çš„-arguments"><span>ä¾‹å­ 1: åˆ¤æ–­æ™®é€šå‡½æ•°ä¸­çš„ arguments</span></a></h3><p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªæ™®é€šçš„ JavaScript å‡½æ•°ï¼Œåœ¨è¿™ä¸ªå‡½æ•°å†…éƒ¨ï¼Œæˆ‘ä»¬æƒ³æ£€æŸ¥<code>arguments</code>å¯¹è±¡ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">function</span><span style="color:#88C0D0;"> myFunction</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">a</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> b</span><span style="color:#ECEFF4;">)</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isArgumentsObject</span><span style="color:#D8DEE9FF;">(</span><span style="color:#81A1C1;">arguments</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡ºï¼štrue</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88C0D0;">myFunction</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">1</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 2</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå½“è°ƒç”¨<code>myFunction(1, 2)</code>æ—¶ï¼Œæˆ‘ä»¬ä¼ å…¥äº†ä¸¤ä¸ªå‚æ•°ã€‚ç„¶åï¼Œåœ¨å‡½æ•°å†…éƒ¨ï¼Œæˆ‘ä»¬ä½¿ç”¨<code>util.types.isArgumentsObject(arguments)</code>æ£€æŸ¥<code>arguments</code>å¯¹è±¡ï¼Œç»“æœæ˜¯<code>true</code>ï¼Œå› ä¸ºåœ¨è¿™ä¸ªä¸Šä¸‹æ–‡ä¸­<code>arguments</code>ç¡®å®ä»£è¡¨ä¸€ä¸ª arguments å¯¹è±¡ã€‚</p><h3 id="ä¾‹å­-2-é-arguments-å¯¹è±¡çš„æƒ…å†µ" tabindex="-1"><a class="header-anchor" href="#ä¾‹å­-2-é-arguments-å¯¹è±¡çš„æƒ…å†µ"><span>ä¾‹å­ 2: é arguments å¯¹è±¡çš„æƒ…å†µ</span></a></h3><p>ç°åœ¨ï¼Œæˆ‘ä»¬å°è¯•ä¼ é€’ä¸€ä¸ªæ™®é€šå¯¹è±¡ï¼Œè€Œä¸æ˜¯<code>arguments</code>å¯¹è±¡ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> obj</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> {</span><span style="color:#B48EAD;"> 0</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">a</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 1</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">b</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;"> }</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isArgumentsObject</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">obj</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡ºï¼šfalse</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªæ™®é€šçš„å¯¹è±¡<code>obj</code>ï¼Œè¿™ä¸ªå¯¹è±¡çœ‹èµ·æ¥å¯èƒ½ä¸<code>arguments</code>å¯¹è±¡ç±»ä¼¼ï¼Œå› ä¸ºå®ƒæœ‰æ•°å­—é”®å’Œå€¼ã€‚ç„¶è€Œï¼Œå½“æˆ‘ä»¬ä½¿ç”¨<code>util.types.isArgumentsObject(obj)</code>æ£€æŸ¥å®ƒæ—¶ï¼Œç»“æœæ˜¯<code>false</code>ï¼Œå› ä¸º<code>obj</code>ä¸æ˜¯ä¸€ä¸ªçœŸæ­£çš„<code>arguments</code>å¯¹è±¡ã€‚</p><h3 id="æ€»ç»“-10" tabindex="-1"><a class="header-anchor" href="#æ€»ç»“-10"><span>æ€»ç»“</span></a></h3><p><code>util.types.isArgumentsObject(value)</code>æ˜¯ä¸€ä¸ªéå¸¸å…·ä½“çš„å·¥å…·æ–¹æ³•ï¼Œç”¨äºç¡®è®¤ä¸€ä¸ªå€¼æ˜¯å¦ä¸ºç‰¹å®šçš„<code>arguments</code>å¯¹è±¡ã€‚è¿™åœ¨éœ€è¦ç²¾ç¡®åŒºåˆ†<code>arguments</code>å¯¹è±¡å’Œå…¶ä»–ç±»æ•°ç»„å¯¹è±¡çš„åœºæ™¯ä¸­éå¸¸æœ‰ç”¨ã€‚è™½ç„¶åœ¨æ—¥å¸¸ç¼–ç¨‹ä¸­å¯èƒ½ä¸ç»å¸¸ç›´æ¥ä½¿ç”¨åˆ°è¿™ä¸ªæ–¹æ³•ï¼Œä½†äº†è§£å®ƒçš„å­˜åœ¨å’Œåº”ç”¨æ–¹å¼å¯¹äºæ·±å…¥ç†è§£ JavaScript å‡½æ•°çš„å†…éƒ¨å·¥ä½œåŸç†æ˜¯æœ‰å¸®åŠ©çš„ã€‚</p><h3 id="util-types-isarraybuffer-value" tabindex="-1"><a class="header-anchor" href="#util-types-isarraybuffer-value"><span><a href="https://nodejs.org/docs/latest/api/util.html#utiltypesisarraybuffervalue" target="_blank" rel="noopener noreferrer">util.types.isArrayBuffer(value)</a></span></a></h3><p>Node.js æ˜¯ä¸€ä¸ªåŸºäº Chrome V8 å¼•æ“çš„ JavaScript è¿è¡Œç¯å¢ƒï¼Œå®ƒå…è®¸æˆ‘ä»¬åœ¨æœåŠ¡å™¨ç«¯è¿è¡Œ JavaScript ä»£ç ã€‚<code>util.types.isArrayBuffer(value)</code> æ˜¯ Node.js ä¸­çš„ä¸€ä¸ªåŠŸèƒ½ï¼Œç”¨äºæ£€æŸ¥ç»™å®šçš„å€¼æ˜¯å¦æ˜¯ä¸€ä¸ª ArrayBuffer å¯¹è±¡ã€‚ArrayBuffer å¯¹è±¡æ˜¯ä¸€ç§è¡¨ç¤ºå›ºå®šé•¿åº¦åŸå§‹äºŒè¿›åˆ¶æ•°æ®ç¼“å†²åŒºçš„æ–¹å¼ã€‚</p><h3 id="ä»€ä¹ˆæ˜¯-arraybuffer-2" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯-arraybuffer-2"><span>ä»€ä¹ˆæ˜¯ ArrayBufferï¼Ÿ</span></a></h3><p>åœ¨æ·±å…¥äº†è§£ <code>util.types.isArrayBuffer(value)</code> ä¹‹å‰ï¼Œè®©æˆ‘ä»¬å…ˆç®€å•ç†è§£ä¸€ä¸‹ä»€ä¹ˆæ˜¯ ArrayBufferã€‚JavaScript ä¸­çš„ ArrayBuffer æ˜¯ä¸€ä¸ªé€šç”¨çš„ã€å›ºå®šé•¿åº¦çš„åŸå§‹äºŒè¿›åˆ¶æ•°æ®ç¼“å†²åŒºã€‚ä½ å¯ä»¥è®¤ä¸ºå®ƒæ˜¯ä¸€ä¸ªå­˜å‚¨äºŒè¿›åˆ¶æ•°æ®çš„å®¹å™¨ã€‚å®ƒæœ¬èº«å¹¶ä¸å…·æœ‰æ“ä½œè¿™äº›æ•°æ®çš„èƒ½åŠ›ï¼Œä½†å¯ä»¥é€šè¿‡ç±»å‹åŒ–æ•°ç»„ï¼ˆTypedArrayï¼‰æˆ– DataView å¯¹è±¡æ¥æ“ä½œè¿™äº›æ•°æ®ã€‚</p><p>ä¾‹å¦‚ï¼Œå¦‚æœä½ æ­£åœ¨å¤„ç†æ–‡ä»¶ã€å›¾åƒæˆ–ä¸ WebSockets é€šä¿¡ç­‰éœ€è¦å¤„ç†äºŒè¿›åˆ¶æ•°æ®çš„åœºæ™¯ï¼ŒArrayBuffer å°†éå¸¸æœ‰ç”¨ã€‚</p><h3 id="util-types-isarraybuffer-value-1" tabindex="-1"><a class="header-anchor" href="#util-types-isarraybuffer-value-1"><span><code>util.types.isArrayBuffer(value)</code></span></a></h3><p>ç°åœ¨ï¼Œæ¥åˆ°æˆ‘ä»¬çš„ä¸»é¢˜ï¼š<code>util.types.isArrayBuffer(value)</code> æ˜¯ä¸€ä¸ªæ–¹æ³•ï¼Œå±äº Node.js çš„ <code>util</code> æ¨¡å—ã€‚è¿™ä¸ªæ–¹æ³•çš„ç›®çš„æ˜¯å¸®åŠ©æˆ‘ä»¬ç¡®è®¤ä¸€ä¸ªç»™å®šçš„å€¼æ˜¯å¦ä¸º ArrayBuffer ç±»å‹ã€‚</p><p>ä½¿ç”¨æ–¹æ³•å¾ˆç®€å•ï¼š</p><ol><li>é¦–å…ˆï¼Œä½ éœ€è¦å¼•å…¥ <code>util</code> æ¨¡å—ã€‚</li><li>ç„¶åï¼Œä½¿ç”¨ <code>util.types.isArrayBuffer(value)</code> æ–¹æ³•ï¼Œä¼ å…¥ä½ æƒ³è¦æ£€æŸ¥çš„å€¼ä½œä¸ºå‚æ•°ï¼Œå®ƒä¼šè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼ˆtrue æˆ– falseï¼‰ï¼Œå‘Šè¯‰ä½ è¯¥å€¼æ˜¯å¦æ˜¯ ArrayBuffer å¯¹è±¡ã€‚</li></ol><h3 id="å®é™…ä¾‹å­-4" tabindex="-1"><a class="header-anchor" href="#å®é™…ä¾‹å­-4"><span>å®é™…ä¾‹å­</span></a></h3><p>å‡è®¾ä½ æ­£åœ¨å¼€å‘ä¸€ä¸ªåŠŸèƒ½ï¼Œéœ€è¦å¤„ç†ç”¨æˆ·ä¸Šä¼ çš„å›¾ç‰‡ã€‚è¿™äº›å›¾ç‰‡ä»¥äºŒè¿›åˆ¶æ•°æ®çš„å½¢å¼å­˜åœ¨ï¼Œä½ å¯èƒ½ä¼šç”¨åˆ° ArrayBuffer æ¥å¤„ç†è¿™äº›æ•°æ®ã€‚åœ¨æŸä¸ªå‡½æ•°ä¸­ï¼Œä½ æ¥æ”¶åˆ°äº†ä¸€ä¸ªæ•°æ®å¯¹è±¡ï¼Œä½†ä¸ç¡®å®šå®ƒæ˜¯å¦ä¸º ArrayBufferã€‚è¿™æ—¶ï¼Œå°±å¯ä»¥ä½¿ç”¨ <code>util.types.isArrayBuffer(value)</code> æ¥è¿›è¡Œæ£€æŸ¥ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å‡è®¾è¿™æ˜¯ä»æŸå¤„æ¥æ”¶åˆ°çš„æ•°æ®</span></span>
<span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> possibleArrayBuffer</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> ArrayBuffer</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">16</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // åˆ›å»ºä¸€ä¸ª16å­—èŠ‚çš„ArrayBuffer</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// ä½¿ç”¨isArrayBufferæ¥æ£€æŸ¥</span></span>
<span class="line"><span style="color:#81A1C1;">if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isArrayBuffer</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">possibleArrayBuffer</span><span style="color:#D8DEE9FF;">)) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">è¿™æ˜¯ä¸€ä¸ªArrayBufferå¯¹è±¡</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;"> else</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">è¿™ä¸æ˜¯ä¸€ä¸ªArrayBufferå¯¹è±¡</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆå¯¼å…¥äº† <code>util</code> æ¨¡å—ã€‚ç„¶ååˆ›å»ºäº†ä¸€ä¸ª 16 å­—èŠ‚çš„ <code>ArrayBuffer</code> å¯¹è±¡ä½œä¸ºç¤ºä¾‹ã€‚æœ€åï¼Œä½¿ç”¨äº† <code>util.types.isArrayBuffer()</code> æ–¹æ³•æ¥æ£€æŸ¥è¿™ä¸ªå¯¹è±¡æ˜¯å¦ä¸º ArrayBufferã€‚æ ¹æ®ç»“æœï¼Œæˆ‘ä»¬å¯ä»¥å¯¹æ•°æ®è¿›è¡Œé€‚å½“çš„å¤„ç†ã€‚</p><p>è¿™ç§æ£€æŸ¥åœ¨å¤„ç†ä¸åŒæ¥æºçš„æ•°æ®æ—¶å°¤å…¶é‡è¦ï¼Œæ¯”å¦‚åœ¨ä¸€ä¸ªéœ€è¦å¤„ç†å¤šç§ç±»å‹æ•°æ®çš„å‡½æ•°ä¸­ï¼Œç¡®ä¿æ•°æ®ç±»å‹æ­£ç¡®å¯ä»¥å¸®åŠ©é˜²æ­¢è¿è¡Œæ—¶é”™è¯¯ï¼Œæå‡ç¨‹åºçš„ç¨³å®šæ€§å’Œå¯é æ€§ã€‚</p><h3 id="util-types-isasyncfunction-value" tabindex="-1"><a class="header-anchor" href="#util-types-isasyncfunction-value"><span><a href="https://nodejs.org/docs/latest/api/util.html#utiltypesisasyncfunctionvalue" target="_blank" rel="noopener noreferrer">util.types.isAsyncFunction(value)</a></span></a></h3><p>å½“ä½ åˆšæ¥è§¦ç¼–ç¨‹æ—¶ï¼Œç†è§£ä¸åŒçš„æ•°æ®ç±»å‹å’Œç‰¹æ®Šå‡½æ•°ç±»å‹å¯èƒ½ä¼šæœ‰ç‚¹æŒ‘æˆ˜æ€§ï¼Œä½†æˆ‘ä¼šå°½åŠ›è®²è§£å¾—æ—¢ç®€å•åˆè¯¦ç»†ã€‚åœ¨ JavaScript å’Œ Node.js çš„ä¸–ç•Œé‡Œï¼Œæˆ‘ä»¬é‡åˆ°å„ç§å„æ ·çš„å‡½æ•°ï¼Œå®ƒä»¬æœ‰ä¸åŒçš„ç”¨é€”å’Œè¡Œä¸ºæ–¹å¼ã€‚ä¸€ä¸ªç‰¹åˆ«é‡è¦çš„å‡½æ•°ç±»å‹æ˜¯&quot;å¼‚æ­¥å‡½æ•°&quot;ï¼ˆAsync Functionï¼‰ã€‚</p><h3 id="ä»€ä¹ˆæ˜¯å¼‚æ­¥å‡½æ•°" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯å¼‚æ­¥å‡½æ•°"><span>ä»€ä¹ˆæ˜¯å¼‚æ­¥å‡½æ•°ï¼Ÿ</span></a></h3><p>åœ¨æ·±å…¥<code>util.types.isAsyncFunction(value)</code>ä¹‹å‰ï¼Œè®©æˆ‘ä»¬é¦–å…ˆç†è§£ä»€ä¹ˆæ˜¯å¼‚æ­¥å‡½æ•°ã€‚å¼‚æ­¥å‡½æ•°æ˜¯ä¸€ç§ç‰¹æ®Šçš„å‡½æ•°ï¼Œå¯ä»¥ä½¿å¾— JavaScript ä»£ç èƒ½å¤Ÿè¿›è¡Œéé˜»å¡æ“ä½œã€‚æ¢å¥è¯è¯´ï¼Œå®ƒå…è®¸ä½ åœ¨ç­‰å¾…æŸä¸ªæ“ä½œå®Œæˆæ—¶ï¼Œç»§ç»­æ‰§è¡Œä»£ç ä¸­çš„å…¶ä»–ä»»åŠ¡ï¼Œè€Œä¸æ˜¯åœä¸‹æ¥ç­‰å¾…ã€‚</p><p>ä¸¾ä¸ªä¾‹å­ï¼Œå‡è®¾ä½ æœ‰ä¸€ä¸ªæ“ä½œéœ€è¦ä»äº’è”ç½‘ä¸Šä¸‹è½½ä¸€ä¸ªå¤§æ–‡ä»¶ã€‚å¦‚æœä½ ä½¿ç”¨åŒæ­¥æ“ä½œï¼Œä½ çš„ç¨‹åºå°±ä¼šåœåœ¨é‚£é‡Œï¼Œç›´åˆ°æ–‡ä»¶å®Œå…¨ä¸‹è½½ä¸‹æ¥ï¼›è€Œå¦‚æœä½ ä½¿ç”¨å¼‚æ­¥æ“ä½œï¼Œåˆ™å¯ä»¥åœ¨æ–‡ä»¶ä¸‹è½½çš„åŒæ—¶åšå…¶å®ƒäº‹æƒ…ï¼Œæ¯”å¦‚æ›´æ–°ç•Œé¢ï¼Œå“åº”ç”¨æˆ·çš„è¾“å…¥ç­‰ç­‰ã€‚</p><h3 id="util-types-isasyncfunction-value-1" tabindex="-1"><a class="header-anchor" href="#util-types-isasyncfunction-value-1"><span><code>util.types.isAsyncFunction(value)</code></span></a></h3><p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬å›åˆ°<code>util.types.isAsyncFunction(value)</code>è¿™ä¸ªå…·ä½“çš„åŠŸèƒ½ã€‚è¿™æ˜¯ Node.js æä¾›çš„ä¸€ä¸ªå®ç”¨å‡½æ•°ï¼Œå®ƒçš„ä½œç”¨æ˜¯å¸®åŠ©ä½ ç¡®å®šä¸€ä¸ªç»™å®šçš„å€¼æ˜¯å¦æ˜¯ä¸€ä¸ªå¼‚æ­¥å‡½æ•°ã€‚åœ¨ JavaScript ä¸­ï¼Œç”±äºå­˜åœ¨å¤šç§ç±»å‹çš„å¯¹è±¡å’Œå‡½æ•°ï¼Œåˆ¤æ–­ä¸€ä¸ªå…·ä½“çš„å€¼æ˜¯å¦å±äºæŸä¸ªç‰¹å®šçš„ç±»å‹æœ‰æ—¶å€™æ˜¯éå¸¸å¿…è¦çš„ã€‚è¿™åœ¨å¤„ç†å¤§å‹é¡¹ç›®æˆ–è€…å¤æ‚çš„åº“æ—¶å°¤ä¸ºé‡è¦ï¼Œå› ä¸ºä½ å¯èƒ½éœ€è¦æ ¹æ®ä¸åŒçš„ç±»å‹é‡‡å–ä¸åŒçš„æ“ä½œã€‚</p><h3 id="å®é™…è¿ç”¨çš„ä¾‹å­-6" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨çš„ä¾‹å­-6"><span>å®é™…è¿ç”¨çš„ä¾‹å­</span></a></h3><p>å‡è®¾ä½ æ­£åœ¨å¼€å‘ä¸€ä¸ªåº”ç”¨ï¼Œè¿™ä¸ªåº”ç”¨éœ€è¦å¤„ç†å„ç§ç±»å‹çš„å‡½æ•°ï¼ŒåŒ…æ‹¬æ™®é€šå‡½æ•°ã€å¼‚æ­¥å‡½æ•°å’Œå…¶ä»–ç§ç±»çš„å‡½æ•°ã€‚ä½ å¯èƒ½æƒ³è¦å¯¹è¿™äº›å¼‚æ­¥å‡½æ•°è¿›è¡Œç‰¹æ®Šå¤„ç†ï¼Œæ¯”å¦‚è®°å½•æ—¥å¿—æˆ–è€…æ·»åŠ é”™è¯¯å¤„ç†æœºåˆ¶ã€‚è¿™æ—¶å€™ï¼Œ<code>util.types.isAsyncFunction(value)</code>å°±å˜å¾—éå¸¸æœ‰ç”¨äº†ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">async</span><span style="color:#81A1C1;"> function</span><span style="color:#88C0D0;"> fetchData</span><span style="color:#ECEFF4;">()</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#616E88;">  // æ¨¡æ‹Ÿä»ç½‘ç»œè·å–æ•°æ®</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">function</span><span style="color:#88C0D0;"> normalFunction</span><span style="color:#ECEFF4;">()</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#616E88;">  // æ™®é€šåŒæ­¥å‡½æ•°</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isAsyncFunction</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">fetchData</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // true</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isAsyncFunction</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">normalFunction</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // false</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªå¼‚æ­¥å‡½æ•°<code>fetchData</code>å’Œä¸€ä¸ªæ™®é€šçš„åŒæ­¥å‡½æ•°<code>normalFunction</code>ã€‚ç„¶åï¼Œæˆ‘ä»¬ä½¿ç”¨<code>util.types.isAsyncFunction</code>æ¥æ£€æŸ¥è¿™ä¸¤ä¸ªå‡½æ•°æ˜¯å¦ä¸ºå¼‚æ­¥å‡½æ•°ã€‚ç»“æœæ˜¾ç¤ºï¼Œ<code>fetchData</code>è¢«æ­£ç¡®è¯†åˆ«ä¸ºå¼‚æ­¥å‡½æ•°ï¼Œè€Œ<code>normalFunction</code>åˆ™ä¸æ˜¯ã€‚</p><h3 id="æ€»ç»“-11" tabindex="-1"><a class="header-anchor" href="#æ€»ç»“-11"><span>æ€»ç»“</span></a></h3><p>æ€»è€Œè¨€ä¹‹ï¼Œ<code>util.types.isAsyncFunction(value)</code>æ˜¯ Node.js æä¾›çš„ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„å·¥å…·ï¼Œå®ƒå¯ä»¥å¸®åŠ©ä½ è¯†åˆ«ç»™å®šçš„å€¼æ˜¯å¦æ˜¯ä¸€ä¸ªå¼‚æ­¥å‡½æ•°ã€‚è¿™åœ¨å¤„ç†éœ€è¦æ ¹æ®å‡½æ•°ç±»å‹é‡‡å–ä¸åŒæ“ä½œçš„åœºæ™¯ä¸‹å°¤å…¶æœ‰ç”¨ã€‚æŒæ¡è¿™ä¸ªå·¥å…·çš„ä½¿ç”¨ï¼Œå¯ä»¥è®©ä½ åœ¨å¼€å‘ Node.js åº”ç”¨æ—¶æ›´åŠ å¾—å¿ƒåº”æ‰‹ã€‚</p><h3 id="util-types-isbigint64array-value" tabindex="-1"><a class="header-anchor" href="#util-types-isbigint64array-value"><span><a href="https://nodejs.org/docs/latest/api/util.html#utiltypesisbigint64arrayvalue" target="_blank" rel="noopener noreferrer">util.types.isBigInt64Array(value)</a></span></a></h3><p>ç†è§£ <code>util.types.isBigInt64Array(value)</code> ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦åˆ†è§£å‡ ä¸ªå…³é”®ç‚¹ï¼šNode.jsã€<code>util</code> æ¨¡å—ã€<code>BigInt64Array</code> ç±»å‹ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨è¿™ä¸ªæ–¹æ³•ã€‚</p><h3 id="node-js-ç®€ä»‹" tabindex="-1"><a class="header-anchor" href="#node-js-ç®€ä»‹"><span>Node.js ç®€ä»‹</span></a></h3><p>Node.js æ˜¯ä¸€ä¸ªåŸºäº Chrome V8 å¼•æ“çš„ JavaScript è¿è¡Œç¯å¢ƒã€‚å®ƒè®©å¼€å‘è€…èƒ½å¤Ÿç”¨ JavaScript ç¼–å†™æœåŠ¡å™¨ç«¯çš„åº”ç”¨ç¨‹åºã€‚Node.js çš„ç‰¹ç‚¹åŒ…æ‹¬é«˜æ€§èƒ½ã€éé˜»å¡ I/O å’Œäº‹ä»¶é©±åŠ¨ç­‰ã€‚</p><h3 id="util-æ¨¡å—" tabindex="-1"><a class="header-anchor" href="#util-æ¨¡å—"><span><code>util</code> æ¨¡å—</span></a></h3><p><code>util</code> æ˜¯ Node.js çš„ä¸€ä¸ªæ ¸å¿ƒæ¨¡å—ï¼Œæä¾›äº†ä¸€ç³»åˆ—å®ç”¨å‡½æ•°ï¼Œç”¨äºå¼¥è¡¥æ ¸å¿ƒ JavaScript çš„åŠŸèƒ½è¿‡äºç®€å•çš„é—®é¢˜ã€‚ä½¿ç”¨ <code>util</code> æ¨¡å—ï¼Œä½ å¯ä»¥æ›´åŠ ä¾¿æ·åœ°å¤„ç†å’Œè½¬æ¢æ•°æ®ç±»å‹ã€‚</p><h3 id="bigint64array" tabindex="-1"><a class="header-anchor" href="#bigint64array"><span><code>BigInt64Array</code></span></a></h3><p><code>BigInt64Array</code> æ˜¯ JavaScript çš„ä¸€ç§å†…ç½®å¯¹è±¡ï¼Œç”¨äºè¡¨ç¤ºä¸€ä¸ª 64 ä½æ•´æ•°æ•°ç»„ã€‚ åœ¨ JavaScript ä¸­ï¼Œâ€œBigIntâ€ç±»å‹æ˜¯ä¸€ç§æ¯”æ ‡å‡†â€œNumberâ€ç±»å‹èƒ½è¡¨ç¤ºçš„èŒƒå›´æ›´å¤§çš„æ•´æ•°ç±»å‹ã€‚è¿™å¯¹äºéœ€è¦å¤„ç†éå¸¸å¤§çš„æ•°å€¼æ—¶éå¸¸æœ‰ç”¨ï¼Œæ¯”å¦‚æ•°æ®åº“ä¸­çš„å¤§æ•°æˆ–ä¸ WebAssembly äº¤äº’ç­‰åœºæ™¯ã€‚</p><h3 id="util-types-isbigint64array-value-1" tabindex="-1"><a class="header-anchor" href="#util-types-isbigint64array-value-1"><span><code>util.types.isBigInt64Array(value)</code></span></a></h3><p>æ­¤æ–¹æ³•æ˜¯ <code>util.types</code> ä¸‹çš„ä¸€ä¸ªåŠŸèƒ½ï¼Œç”¨æ¥æ£€æµ‹ç»™å®šçš„å€¼æ˜¯å¦ä¸º <code>BigInt64Array</code> ç±»å‹ã€‚å¦‚æœæ˜¯ï¼Œå®ƒä¼šè¿”å› <code>true</code>ï¼Œå¦åˆ™è¿”å› <code>false</code>ã€‚</p><h4 id="ä½¿ç”¨åœºæ™¯å’Œä¾‹å­" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨åœºæ™¯å’Œä¾‹å­"><span>ä½¿ç”¨åœºæ™¯å’Œä¾‹å­</span></a></h4><p>å‡è®¾ä½ åœ¨å¼€å‘ä¸€ä¸ªè´¢åŠ¡è®¡ç®—çš„åº”ç”¨ç¨‹åºï¼Œéœ€è¦å¤„ç†éå¸¸å¤§çš„æ•´æ•°ï¼ˆè¶…è¿‡äº†æ™®é€š JavaScript <code>Number</code> ç±»å‹çš„æœ€å¤§å®‰å…¨å€¼ï¼‰ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ å¯èƒ½ä¼šé€‰æ‹©ä½¿ç”¨ <code>BigInt</code> æˆ– <code>BigInt64Array</code> æ¥å­˜å‚¨è¿™äº›å¤§æ•°å€¼ã€‚</p><ol><li><strong>åˆ›å»ºå¹¶æ£€æµ‹ <code>BigInt64Array</code></strong></li></ol><p>é¦–å…ˆï¼Œä½ åˆ›å»ºäº†ä¸€ä¸ª <code>BigInt64Array</code>:</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> bigInt64Array</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> BigInt64Array</span><span style="color:#D8DEE9FF;">([</span><span style="color:#88C0D0;">BigInt</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">1234567890123456789</span><span style="color:#D8DEE9FF;">)])</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>ç°åœ¨ï¼Œä½ æƒ³éªŒè¯è¿™ä¸ªå˜é‡ç¡®å®æ˜¯ <code>BigInt64Array</code> ç±»å‹çš„ã€‚è¿™æ—¶å€™å°±å¯ä»¥ä½¿ç”¨ <code>util.types.isBigInt64Array()</code> æ–¹æ³•è¿›è¡Œæ£€æµ‹ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isBigInt64Array</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">bigInt64Array</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡ºï¼štrue</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li><strong>é”™è¯¯ç±»å‹éªŒè¯</strong></li></ol><p>å¦ä¸€è¾¹ï¼Œå‡å¦‚æœ‰äººè¯¯å°†ä¸€ä¸ªæ™®é€šæ•°ç»„ä¼ å…¥ä½ çš„å‡½æ•°ä¸­ï¼Œä½ ä¹Ÿè®¸æƒ³éªŒè¯è¿™ä¸ªæ•°æ®ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> notABigInt64Array</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9FF;"> [</span><span style="color:#B48EAD;">1234567890123456789</span><span style="color:#D8DEE9FF;">]</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isBigInt64Array</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">notABigInt64Array</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡ºï¼šfalse</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ä¸ªæ—¶å€™ï¼Œ<code>util.types.isBigInt64Array()</code> å°±å¸®åŠ©ä½ ç¡®è®¤ä¼ å…¥çš„ä¸æ˜¯ä¸€ä¸ª <code>BigInt64Array</code> ç±»å‹ã€‚</p><p>ç»¼ä¸Šæ‰€è¿°ï¼Œ<code>util.types.isBigInt64Array(value)</code> åœ¨ Node.js ä¸­è¢«ç”¨äºç±»å‹æ£€æŸ¥ï¼Œå°¤å…¶é€‚ç”¨äºéœ€è¦ç²¾ç¡®å¤„ç†å¤§æ•°å­—å’Œæ‰§è¡Œç±»å‹æ ¡éªŒçš„åœºæ™¯ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œä½ å¯ä»¥ä¿è¯ä½ çš„å‡½æ•°æˆ–æ¨¡å—æ€»æ˜¯æ¥æ”¶åˆ°æ­£ç¡®ç±»å‹çš„å‚æ•°ï¼Œä»è€Œé¿å…è¿è¡Œæ—¶é”™è¯¯å¹¶æé«˜ä»£ç çš„ç¨³å®šæ€§å’Œå¯é æ€§ã€‚</p><h3 id="util-types-isbiguint64array-value" tabindex="-1"><a class="header-anchor" href="#util-types-isbiguint64array-value"><span><a href="https://nodejs.org/docs/latest/api/util.html#utiltypesisbiguint64arrayvalue" target="_blank" rel="noopener noreferrer">util.types.isBigUint64Array(value)</a></span></a></h3><p>å¥½çš„ï¼Œè®©æˆ‘ä»¬æ·±å…¥äº†è§£ Node.js ä¸­çš„ <code>util.types.isBigUint64Array(value)</code> æ–¹æ³•ã€‚</p><p>é¦–å…ˆï¼Œ<code>util.types.isBigUint64Array(value)</code> æ˜¯ Node.js çš„ä¸€ä¸ªå†…ç½®æ–¹æ³•ï¼Œå®ƒç”¨äºåˆ¤æ–­ä¼ å…¥çš„å‚æ•°æ˜¯å¦ä¸ºä¸€ä¸ª BigUint64Array å®ä¾‹ã€‚è¿™ä¸ªæ–¹æ³•å±äº Node.js çš„ <code>util</code> æ¨¡å—ä¸­çš„ <code>types</code> éƒ¨åˆ†ï¼Œä¸“é—¨ç”¨æ¥æä¾›ä¸€ç³»åˆ—ç”¨äºè¯†åˆ«å„ç§ JavaScript æ•°æ®ç±»å‹çš„æ–¹æ³•ã€‚</p><h3 id="ä»€ä¹ˆæ˜¯-biguint64array" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯-biguint64array"><span>ä»€ä¹ˆæ˜¯ BigUint64Arrayï¼Ÿ</span></a></h3><p>åœ¨æ·±å…¥ç†è§£è¿™ä¸ªæ–¹æ³•ä¹‹å‰ï¼Œä½ éœ€è¦çŸ¥é“ BigUint64Array æ˜¯ä»€ä¹ˆã€‚BigUint64Array æ˜¯ JavaScript çš„ä¸€ä¸ªå†…ç½®å¯¹è±¡ï¼Œå®ƒè¡¨ç¤ºä¸€ä¸ª 64 ä½æ— ç¬¦å·æ•´å‹æ•°ç»„ã€‚è¿™æ„å‘³ç€ï¼Œæ¯ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ª 64 ä½çš„æ— ç¬¦å·æ•´æ•°ï¼ˆä» 0 åˆ°(2^{64}-1)ï¼‰ã€‚å®ƒå¸¸ç”¨äºéœ€è¦å¤„ç†å¤§é‡æ•°æ®æˆ–è€…éœ€è¦é«˜ç²¾åº¦è®¡ç®—çš„åœºæ™¯ã€‚</p><h3 id="ä½¿ç”¨-util-types-isbiguint64array-value" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨-util-types-isbiguint64array-value"><span>ä½¿ç”¨ <code>util.types.isBigUint64Array(value)</code></span></a></h3><p>ç°åœ¨æˆ‘ä»¬çŸ¥é“äº† BigUint64Array æ˜¯ä»€ä¹ˆä»¥åï¼Œ<code>util.types.isBigUint64Array(value)</code> è¿™ä¸ªæ–¹æ³•å°±å¾ˆå¥½ç†è§£äº†ã€‚å®ƒæ¥å—ä¸€ä¸ªå‚æ•° <code>value</code>ï¼Œç„¶åè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼ˆtrue æˆ– falseï¼‰ï¼Œå‘Šè¯‰ä½ è¯¥å‚æ•°æ˜¯å¦æ˜¯ä¸€ä¸ª BigUint64Array çš„å®ä¾‹ã€‚</p><h3 id="å®é™…è¿ç”¨-5" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨-5"><span>å®é™…è¿ç”¨</span></a></h3><p><strong>1. åˆ¤æ–­å˜é‡ç±»å‹</strong></p><p>å‡è®¾ä½ æ­£åœ¨ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œéœ€è¦å¤„ç†å¤§é‡çš„æ•°å€¼æ•°æ®ï¼Œå¹¶ä¸”è¿™äº›æ•°æ®è¢«å­˜å‚¨åœ¨ä¸åŒç±»å‹çš„æ•°ç»„ä¸­ã€‚åœ¨å¼€å§‹å¤„ç†ä¹‹å‰ï¼Œä½ å¯èƒ½æƒ³ç¡®è®¤è¿™ä¸ªæ•°ç»„æ˜¯å¦ä¸º BigUint64Array ç±»å‹ï¼Œä»¥ç¡®ä¿ä½ çš„å‡½æ•°èƒ½æ­£ç¡®åœ°å¤„ç† 64 ä½æ— ç¬¦å·æ•´å‹ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> bigIntsArray</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> BigUint64Array</span><span style="color:#D8DEE9FF;">([</span><span style="color:#B48EAD;">1</span><span style="color:#81A1C1;">n</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 2</span><span style="color:#81A1C1;">n</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 3</span><span style="color:#81A1C1;">n</span><span style="color:#D8DEE9FF;">])</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> normalArray</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9FF;"> [</span><span style="color:#B48EAD;">1</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 2</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 3</span><span style="color:#D8DEE9FF;">]</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isBigUint64Array</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">bigIntsArray</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡ºï¼štrue</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isBigUint64Array</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">normalArray</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡ºï¼šfalse</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>2. API è¾“å…¥éªŒè¯</strong></p><p>å¦‚æœä½ æ­£åœ¨å†™ä¸€ä¸ªéœ€è¦æ¥å— BigUint64Array å‚æ•°çš„ APIï¼Œä½¿ç”¨ <code>util.types.isBigUint64Array</code> æ¥éªŒè¯è¾“å…¥æ˜¯éå¸¸æœ‰ç”¨çš„ã€‚è¿™å¯ä»¥ä¿è¯ä½ çš„ API åªå¤„ç†æ­£ç¡®ç±»å‹çš„æ•°æ®ï¼Œä»è€Œé¿å…è¿è¡Œæ—¶é”™è¯¯ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">function</span><span style="color:#88C0D0;"> processData</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">data</span><span style="color:#ECEFF4;">)</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#81A1C1;">!</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isBigUint64Array</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">data</span><span style="color:#D8DEE9FF;">)) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#81A1C1;">    throw</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> TypeError</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Data must be a BigUint64Array</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span></span>
<span class="line"><span style="color:#616E88;">  // å¤„ç† data...</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å‡è®¾è¿™é‡Œæœ‰ä¸€äº›é€»è¾‘æ¥è·å– inputData...</span></span>
<span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> inputData</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> BigUint64Array</span><span style="color:#D8DEE9FF;">([</span><span style="color:#B48EAD;">1</span><span style="color:#81A1C1;">n</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 2</span><span style="color:#81A1C1;">n</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 3</span><span style="color:#81A1C1;">n</span><span style="color:#D8DEE9FF;">])</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">try</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#88C0D0;">  processData</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">inputData</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;"> catch</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">error</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">error</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">error</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">message</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æ€»ç»“-12" tabindex="-1"><a class="header-anchor" href="#æ€»ç»“-12"><span>æ€»ç»“</span></a></h3><p><code>util.types.isBigUint64Array(value)</code> æ˜¯ä¸€ä¸ªç®€å•ä½†éå¸¸æœ‰ç”¨çš„æ–¹æ³•ï¼Œå®ƒå¸®åŠ©ä½ ç¡®è®¤ä¸€ä¸ªå˜é‡æ˜¯å¦ä¸º BigUint64Array ç±»å‹ã€‚åœ¨å¤„ç†å¤§é‡æ•°æ®å’Œéœ€è¦é«˜ç²¾åº¦è®¡ç®—çš„åº”ç”¨ä¸­ï¼Œç¡®ä¿æ•°æ®ç±»å‹çš„æ­£ç¡®æ€§æ˜¯éå¸¸é‡è¦çš„ï¼Œè¿™ä¸ªæ–¹æ³•æ­£å¥½èƒ½å¸®åˆ°ä½ ã€‚</p><p>å¸Œæœ›è¿™ä¸ªè§£é‡Šå¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼å¦‚æœè¿˜æœ‰å…¶ä»–é—®é¢˜æˆ–æƒ³æ·±å…¥äº†è§£å…¶ä»–æ¦‚å¿µï¼Œè¯·éšæ—¶æé—®ã€‚</p><h3 id="util-types-isbooleanobject-value" tabindex="-1"><a class="header-anchor" href="#util-types-isbooleanobject-value"><span><a href="https://nodejs.org/docs/latest/api/util.html#utiltypesisbooleanobjectvalue" target="_blank" rel="noopener noreferrer">util.types.isBooleanObject(value)</a></span></a></h3><p>Node.js æ˜¯ä¸€ä¸ªéå¸¸æµè¡Œçš„ JavaScript è¿è¡Œç¯å¢ƒï¼Œå®ƒå…è®¸ä½ åœ¨æœåŠ¡å™¨ç«¯è¿è¡Œ JavaScript ä»£ç ã€‚å…¶ä¸­ï¼Œ<code>util</code> æ¨¡å—æ˜¯ Node.js çš„æ ¸å¿ƒæ¨¡å—ä¹‹ä¸€ï¼Œæä¾›äº†ä¸€ç³»åˆ—å®ç”¨å‡½æ•°ï¼Œç”¨äºå¤„ç†å„ç§æ•°æ®ç±»å‹å’Œæ‰§è¡Œé€šç”¨ä»»åŠ¡ã€‚</p><p>åœ¨ Node.js v21.7.1 ç‰ˆæœ¬ä¸­ï¼Œ<code>util.types.isBooleanObject(value)</code> æ˜¯ <code>util</code> æ¨¡å—ä¸‹çš„ä¸€ä¸ªæ–¹æ³•ï¼Œç”¨äºæ£€æŸ¥ç»™å®šçš„å€¼æ˜¯å¦æ˜¯ä¸€ä¸ª Boolean å¯¹è±¡ã€‚è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒBoolean å¯¹è±¡ä¸å¸ƒå°”åŸå§‹å€¼ï¼ˆtrue æˆ– falseï¼‰æ˜¯ä¸åŒçš„ã€‚</p><h3 id="è§£é‡Š-1" tabindex="-1"><a class="header-anchor" href="#è§£é‡Š-1"><span>è§£é‡Š</span></a></h3><ul><li><strong>å¸ƒå°”åŸå§‹å€¼</strong>ï¼šå°±æ˜¯ç›´æ¥ä½¿ç”¨ true æˆ– falseã€‚</li><li><strong>Boolean å¯¹è±¡</strong>ï¼šé€šè¿‡ä½¿ç”¨ new å…³é”®å­—å’Œ Boolean æ„é€ å‡½æ•°åˆ›å»ºçš„ï¼Œæ¯”å¦‚ <code>new Boolean(true)</code> æˆ– <code>new Boolean(false)</code>ã€‚</li></ul><p><code>util.types.isBooleanObject(value)</code> æ–¹æ³•å°±æ˜¯ç”¨æ¥åŒºåˆ†ç»™å®šçš„å€¼æ˜¯å¦ä¸ºé€šè¿‡ <code>new Boolean()</code> åˆ›å»ºçš„å¯¹è±¡å½¢å¼çš„å¸ƒå°”å€¼ã€‚</p><h3 id="ä½¿ç”¨åœºæ™¯-1" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨åœºæ™¯-1"><span>ä½¿ç”¨åœºæ™¯</span></a></h3><p>ä¸ºä½•è¦åŒºåˆ†å¸ƒå°”åŸå§‹å€¼å’Œ Boolean å¯¹è±¡ï¼Ÿåœ¨å®é™…å¼€å‘ä¸­ï¼Œå°½ç®¡å¤§å¤šæ•°æƒ…å†µä¸‹æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯å¸ƒå°”åŸå§‹å€¼ï¼ˆå› ä¸ºå®ƒä»¬æ›´ç®€å•ã€æ•ˆç‡æ›´é«˜ï¼‰ï¼Œä½†åœ¨æŸäº›ç‰¹æ®Šæƒ…å†µä¸‹ï¼Œå¯èƒ½ä¼šéœ€è¦åˆ° Boolean å¯¹è±¡ã€‚ä¾‹å¦‚ï¼Œå½“ä½ éœ€è¦å°†å¸ƒå°”å€¼å’Œå¯¹è±¡ä¸€èµ·ä½œä¸ºç±»ä¼¼å­—å…¸ï¼ˆkey-value pairsï¼‰ç»“æ„å­˜å‚¨æ—¶ï¼Œæˆ–è€…æŸäº›å‡½æ•°åº“æˆ– API æœŸå¾…å¯¹è±¡è€Œä¸æ˜¯åŸå§‹å€¼ä½œä¸ºå‚æ•°æ—¶ã€‚</p><h3 id="ä¾‹å­-1" tabindex="-1"><a class="header-anchor" href="#ä¾‹å­-1"><span>ä¾‹å­</span></a></h3><h4 id="æ£€æŸ¥å˜é‡æ˜¯å¦ä¸º-boolean-å¯¹è±¡" tabindex="-1"><a class="header-anchor" href="#æ£€æŸ¥å˜é‡æ˜¯å¦ä¸º-boolean-å¯¹è±¡"><span>æ£€æŸ¥å˜é‡æ˜¯å¦ä¸º Boolean å¯¹è±¡</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å¸ƒå°”åŸå§‹å€¼</span></span>
<span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> val1</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> true;</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isBooleanObject</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">val1</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡º: false</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// Boolean å¯¹è±¡</span></span>
<span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> val2</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> Boolean</span><span style="color:#D8DEE9FF;">(</span><span style="color:#81A1C1;">true</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isBooleanObject</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">val2</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡º: true</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼š</p><ul><li>é¦–å…ˆï¼Œæˆ‘ä»¬å¼•å…¥äº† <code>util</code> æ¨¡å—ã€‚</li><li>æ¥ç€ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸¤ä¸ªå˜é‡ï¼š<code>val1</code> æ˜¯ä¸€ä¸ªå¸ƒå°”åŸå§‹å€¼ï¼Œ<code>val2</code> æ˜¯ä¸€ä¸ª Boolean å¯¹è±¡ã€‚</li><li>ä½¿ç”¨ <code>util.types.isBooleanObject()</code> æ–¹æ³•æ£€æŸ¥è¿™ä¸¤ä¸ªå˜é‡ï¼Œç»“æœæ˜¾ç¤º <code>val1</code> ä¸æ˜¯ä¸€ä¸ª Boolean å¯¹è±¡ï¼ˆè¾“å‡º <code>false</code>ï¼‰ï¼Œè€Œ <code>val2</code> æ˜¯ä¸€ä¸ª Boolean å¯¹è±¡ï¼ˆè¾“å‡º <code>true</code>ï¼‰ã€‚</li></ul><h4 id="åº”ç”¨åœºæ™¯ç¤ºä¾‹" tabindex="-1"><a class="header-anchor" href="#åº”ç”¨åœºæ™¯ç¤ºä¾‹"><span>åº”ç”¨åœºæ™¯ç¤ºä¾‹</span></a></h4><p>å‡è®¾ä½ åœ¨ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°éœ€è¦ç‰¹åˆ«å¤„ç†ä½œä¸ºå‚æ•°ä¼ å…¥çš„ Boolean å¯¹è±¡ï¼Œè€Œå¯¹äºå¸ƒå°”åŸå§‹å€¼åˆ™æ­£å¸¸å¤„ç†ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">function</span><span style="color:#88C0D0;"> handleBoolean</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">value</span><span style="color:#ECEFF4;">)</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isBooleanObject</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">value</span><span style="color:#D8DEE9FF;">)) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">å¤„ç† Boolean å¯¹è±¡</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#616E88;">    // ç‰¹åˆ«å¤„ç† Boolean å¯¹è±¡çš„é€»è¾‘</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span><span style="color:#81A1C1;"> else</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">å¤„ç†å…¶ä»–æƒ…å†µ</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#616E88;">    // å¤„ç†å¸ƒå°”åŸå§‹å€¼æˆ–å…¶ä»–æ•°æ®ç±»å‹çš„é€»è¾‘</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88C0D0;">handleBoolean</span><span style="color:#D8DEE9FF;">(</span><span style="color:#81A1C1;">true</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡º: å¤„ç†å…¶ä»–æƒ…å†µ</span></span>
<span class="line"><span style="color:#88C0D0;">handleBoolean</span><span style="color:#D8DEE9FF;">(</span><span style="color:#81A1C1;">new</span><span style="color:#88C0D0;"> Boolean</span><span style="color:#D8DEE9FF;">(</span><span style="color:#81A1C1;">false</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡º: å¤„ç† Boolean å¯¹è±¡</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªåœºæ™¯ä¸­ï¼Œ<code>handleBoolean</code> å‡½æ•°èƒ½å¤Ÿæ ¹æ®ä¼ å…¥å€¼çš„ç±»å‹ï¼ˆå¸ƒå°”åŸå§‹å€¼æˆ– Boolean å¯¹è±¡ï¼‰ï¼Œé‡‡å–ä¸åŒçš„å¤„ç†é€»è¾‘ã€‚</p><p>æ€»çš„æ¥è¯´ï¼Œ<code>util.types.isBooleanObject(value)</code> åœ¨ Node.js ä¸­æä¾›äº†ä¸€ç§æ–¹æ³•æ¥åˆ¤æ–­ä¸€ä¸ªå€¼æ˜¯å¦ä¸º Boolean å¯¹è±¡ï¼Œè¿™åœ¨å¤„ç†ç‰¹å®šæ•°æ®ç±»å‹æ—¶å¯èƒ½éå¸¸æœ‰ç”¨ã€‚</p><h3 id="util-types-isboxedprimitive-value" tabindex="-1"><a class="header-anchor" href="#util-types-isboxedprimitive-value"><span><a href="https://nodejs.org/docs/latest/api/util.html#utiltypesisboxedprimitivevalue" target="_blank" rel="noopener noreferrer">util.types.isBoxedPrimitive(value)</a></span></a></h3><p>Node.js ä¸­çš„ <code>util.types.isBoxedPrimitive(value)</code> æ˜¯ä¸€ä¸ªéå¸¸å®ç”¨çš„æ–¹æ³•ï¼Œå®ƒç”¨äºåˆ¤æ–­ä¸€ä¸ªå€¼æ˜¯å¦ä¸ºâ€œboxed primitiveâ€ï¼Œå³â€œåŒ…è£…åçš„åŸå§‹ç±»å‹â€ã€‚è¦ç†è§£è¿™ä¸ªæ¦‚å¿µï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦åˆ†ä¸¤æ­¥æ¥çœ‹ï¼šä»€ä¹ˆæ˜¯åŸå§‹ç±»å‹ï¼ˆPrimitive Typesï¼‰ï¼Œä»¥åŠä»€ä¹ˆå«åšåŒ…è£…åï¼ˆBoxedï¼‰ã€‚</p><h3 id="åŸå§‹ç±»å‹" tabindex="-1"><a class="header-anchor" href="#åŸå§‹ç±»å‹"><span>åŸå§‹ç±»å‹</span></a></h3><p>åœ¨ JavaScript ä¸­ï¼ŒåŸå§‹ç±»å‹ï¼ˆPrimitive Typesï¼‰æŒ‡çš„æ˜¯é‚£äº›ä¸æ˜¯å¯¹è±¡çš„åŸºæœ¬ç±»å‹ï¼ŒåŒ…æ‹¬ï¼š</p><ul><li><code>Number</code>ï¼šæ•°å­—ç±»å‹ï¼Œä¾‹å¦‚ 1, 2.5 ç­‰ã€‚</li><li><code>String</code>ï¼šå­—ç¬¦ä¸²ç±»å‹ï¼Œå¦‚ &quot;hello&quot;ã€‚</li><li><code>Boolean</code>ï¼šå¸ƒå°”ç±»å‹ï¼Œåªæœ‰ä¸¤ä¸ªå€¼ï¼Œ<code>true</code> å’Œ <code>false</code>ã€‚</li><li><code>Symbol</code>ï¼šç¬¦å·ç±»å‹ï¼Œæ¯ä¸€ä¸ª <code>Symbol()</code> è°ƒç”¨éƒ½è¿”å›ä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„ç¬¦å·ã€‚</li><li><code>BigInt</code>ï¼šå¤§æ•´æ•°ç±»å‹ï¼Œå¯ä»¥è¡¨ç¤ºéå¸¸å¤§çš„æ•´æ•°ã€‚</li><li><code>undefined</code>ï¼šæœªå®šä¹‰ç±»å‹çš„å€¼ã€‚</li><li><code>null</code>ï¼šè¡¨ç¤ºç©ºå€¼ã€‚</li></ul><p>è¿™äº›ç±»å‹ç§°ä¹‹ä¸ºâ€œåŸå§‹â€æ˜¯å› ä¸ºå®ƒä»¬æ˜¯æ„æˆå…¶ä»–æ‰€æœ‰ç±»å‹çš„åŸºçŸ³ã€‚</p><h3 id="åŒ…è£…åçš„åŸå§‹ç±»å‹" tabindex="-1"><a class="header-anchor" href="#åŒ…è£…åçš„åŸå§‹ç±»å‹"><span>åŒ…è£…åçš„åŸå§‹ç±»å‹</span></a></h3><p>å°½ç®¡åŸå§‹ç±»å‹éå¸¸æœ‰ç”¨ï¼Œä½†æœ‰æ—¶æˆ‘ä»¬å¸Œæœ›åƒå¤„ç†å¯¹è±¡é‚£æ ·æ¥å¤„ç†å®ƒä»¬ã€‚JavaScript å…è®¸é€šè¿‡æ‰€è°“çš„â€œåŒ…è£…å™¨å¯¹è±¡â€æ¥å®ç°è¿™ä¸€ç‚¹ã€‚å¯¹äºæ¯ç§åŸå§‹ç±»å‹ï¼Œéƒ½æœ‰ä¸€ä¸ªå¯¹åº”çš„å¯¹è±¡ç±»å‹ï¼š</p><ul><li><code>Number</code> å¯¹åº”çš„æ˜¯ <code>new Number()</code></li><li><code>String</code> å¯¹åº”çš„æ˜¯ <code>new String()</code></li><li><code>Boolean</code> å¯¹åº”çš„æ˜¯ <code>new Boolean()</code></li><li><code>Symbol</code> å¯¹åº”çš„æ˜¯ <code>Object(Symbol())</code></li><li><code>BigInt</code> å¯¹åº”çš„æ˜¯ <code>Object(BigInt())</code></li></ul><p>å½“ä½ ä½¿ç”¨è¯¸å¦‚ <code>new Number(123)</code> è¿™æ ·çš„è¡¨è¾¾æ–¹å¼æ—¶ï¼Œä½ åˆ›å»ºäº†ä¸€ä¸ª Number çš„å®ä¾‹ï¼Œè¿™ä¸ªå®ä¾‹å°±æ˜¯ä¸€ä¸ªâ€œåŒ…è£…åçš„åŸå§‹ç±»å‹â€ã€‚</p><h3 id="util-types-isboxedprimitive-value-1" tabindex="-1"><a class="header-anchor" href="#util-types-isboxedprimitive-value-1"><span><code>util.types.isBoxedPrimitive(value)</code></span></a></h3><p><code>util.types.isBoxedPrimitive(value)</code> æ–¹æ³•æ­£æ˜¯ç”¨æ¥æ£€æŸ¥ä¸€ä¸ªç»™å®šçš„å€¼æ˜¯å¦ä¸ºä¸€ä¸ªâ€œåŒ…è£…åçš„åŸå§‹ç±»å‹â€ã€‚å®ƒè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œå¦‚æœä¼ å…¥çš„å€¼æ˜¯ä¸€ä¸ªåŒ…è£…åçš„åŸå§‹ç±»å‹ï¼Œå®ƒå°†è¿”å› <code>true</code>ï¼Œå¦åˆ™è¿”å› <code>false</code>ã€‚</p><h3 id="å®é™…è¿ç”¨ç¤ºä¾‹-7" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨ç¤ºä¾‹-7"><span>å®é™…è¿ç”¨ç¤ºä¾‹</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isBoxedPrimitive</span><span style="color:#D8DEE9FF;">(</span><span style="color:#81A1C1;">new</span><span style="color:#88C0D0;"> Number</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">123</span><span style="color:#D8DEE9FF;">)))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // true</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isBoxedPrimitive</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">123</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // false</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isBoxedPrimitive</span><span style="color:#D8DEE9FF;">(</span><span style="color:#81A1C1;">new</span><span style="color:#88C0D0;"> String</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Hello</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // true</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isBoxedPrimitive</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Hello</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // false</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isBoxedPrimitive</span><span style="color:#D8DEE9FF;">(</span><span style="color:#81A1C1;">new</span><span style="color:#88C0D0;"> Boolean</span><span style="color:#D8DEE9FF;">(</span><span style="color:#81A1C1;">true</span><span style="color:#D8DEE9FF;">)))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // true</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isBoxedPrimitive</span><span style="color:#D8DEE9FF;">(</span><span style="color:#81A1C1;">true</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // false</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isBoxedPrimitive</span><span style="color:#D8DEE9FF;">(</span><span style="color:#88C0D0;">Object</span><span style="color:#D8DEE9FF;">(</span><span style="color:#88C0D0;">Symbol</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">sym</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">))))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // true</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isBoxedPrimitive</span><span style="color:#D8DEE9FF;">(</span><span style="color:#88C0D0;">Symbol</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">sym</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // false</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isBoxedPrimitive</span><span style="color:#D8DEE9FF;">(</span><span style="color:#88C0D0;">Object</span><span style="color:#D8DEE9FF;">(</span><span style="color:#88C0D0;">BigInt</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">10</span><span style="color:#D8DEE9FF;">))))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // true</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isBoxedPrimitive</span><span style="color:#D8DEE9FF;">(</span><span style="color:#88C0D0;">BigInt</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">10</span><span style="color:#D8DEE9FF;">)))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // false</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™äº›ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡ <code>util.types.isBoxedPrimitive()</code> æ£€æŸ¥äº†å„ç§æ•°æ®ç±»å‹æ˜¯å¦ä¸ºåŒ…è£…åçš„åŸå§‹ç±»å‹ï¼Œå¹¶æ ¹æ®å…¶çœŸå®æƒ…å†µè¿”å›äº†ç›¸åº”çš„å¸ƒå°”å€¼ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬èƒ½å¤ŸåŒºåˆ†ä¸€ä¸ªå€¼æ˜¯åŸå§‹ç±»å‹è¿˜æ˜¯å…¶å¯¹åº”çš„åŒ…è£…å¯¹è±¡ï¼Œè¿™åœ¨å¤„ç† JavaScript æ•°æ®æ—¶éå¸¸æœ‰ç”¨ã€‚</p><h3 id="util-types-iscryptokey-value" tabindex="-1"><a class="header-anchor" href="#util-types-iscryptokey-value"><span><a href="https://nodejs.org/docs/latest/api/util.html#utiltypesiscryptokeyvalue" target="_blank" rel="noopener noreferrer">util.types.isCryptoKey(value)</a></span></a></h3><p>å½“æˆ‘ä»¬è¯´åˆ°<code>util.types.isCryptoKey(value)</code>åœ¨ Node.js ä¸­ï¼Œæˆ‘ä»¬å®é™…ä¸Šæ˜¯åœ¨è®¨è®ºä¸€ä¸ªç‰¹å®šçš„å·¥å…·å‡½æ•°ï¼Œå…¶ä½œç”¨æ˜¯å¸®åŠ©ä½ åˆ¤æ–­ä¸€ä¸ªå€¼æ˜¯å¦ä¸ºä¸€ä¸ªåŠ å¯†å¯†é’¥ã€‚åœ¨æ·±å…¥äº†è§£ä¹‹å‰ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦æ˜ç¡®ä¸¤ä¸ªæ¦‚å¿µï¼š<code>util.types</code>å’Œâ€œåŠ å¯†å¯†é’¥â€ã€‚</p><h3 id="util-types-æ¨¡å—" tabindex="-1"><a class="header-anchor" href="#util-types-æ¨¡å—"><span><code>util.types</code> æ¨¡å—</span></a></h3><p>åœ¨ Node.js ä¸­ï¼Œ<code>util</code>æ¨¡å—åŒ…å«äº†ä¸€ç³»åˆ—å®ç”¨å·¥å…·å‡½æ•°ï¼Œç”¨äºæ”¯æŒ Node.js API çš„å„ç§éœ€æ±‚ã€‚å…¶ä¸­<code>util.types</code>æ˜¯<code>util</code>æ¨¡å—ä¸‹çš„ä¸€ä¸ªå­é›†ï¼Œä¸“é—¨ç”¨äºæä¾›æ£€æŸ¥ JavaScript å€¼ç±»å‹çš„å‡½æ•°ã€‚</p><h3 id="åŠ å¯†å¯†é’¥-cryptokey" tabindex="-1"><a class="header-anchor" href="#åŠ å¯†å¯†é’¥-cryptokey"><span>åŠ å¯†å¯†é’¥ï¼ˆCryptoKeyï¼‰</span></a></h3><p>åŠ å¯†å¯†é’¥æ˜¯åœ¨æ‰§è¡ŒåŠ å¯†æ“ä½œæ—¶ä½¿ç”¨çš„ä¸€æ®µæ•°æ®ã€‚è¿™äº›å¯†é’¥åŸºäºå¤æ‚çš„æ•°å­¦ç®—æ³•ï¼Œä½¿å¾—ä¿¡æ¯çš„åŠ å¯†å’Œè§£å¯†è¿‡ç¨‹ä»…å¯¹çŸ¥æ™“å¯†é’¥çš„åŒæ–¹é€æ˜ã€‚æ¯”å¦‚ï¼Œåœ¨ HTTPS é€šä¿¡ä¸­ï¼ŒæœåŠ¡å™¨ä¸å®¢æˆ·ç«¯ä¹‹é—´ä¼ è¾“çš„æ•°æ®å°±æ˜¯ç»è¿‡åŠ å¯†å¤„ç†çš„ï¼Œä¿è¯äº†æ•°æ®ä¼ è¾“çš„å®‰å…¨æ€§ã€‚</p><h3 id="util-types-iscryptokey-value-1" tabindex="-1"><a class="header-anchor" href="#util-types-iscryptokey-value-1"><span><code>util.types.isCryptoKey(value)</code></span></a></h3><p>ç°åœ¨æˆ‘ä»¬æ¥çœ‹<code>isCryptoKey</code>è¿™ä¸ªå‡½æ•°ã€‚ç®€è€Œè¨€ä¹‹ï¼Œè¯¥å‡½æ•°çš„ç›®çš„æ˜¯æ£€æŸ¥ç»™å®šçš„å€¼æ˜¯å¦ä¸ºä¸€ä¸ªæœ‰æ•ˆçš„åŠ å¯†å¯†é’¥å¯¹è±¡ã€‚å¦‚æœæ˜¯ï¼Œå®ƒä¼šè¿”å›<code>true</code>ï¼Œå¦åˆ™è¿”å›<code>false</code>ã€‚</p><h3 id="å®é™…è¿ç”¨ä¾‹å­-10" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨ä¾‹å­-10"><span>å®é™…è¿ç”¨ä¾‹å­</span></a></h3><ol><li><p><strong>éªŒè¯åŠ å¯†å¯†é’¥</strong></p><p>å‡è®¾ä½ æ­£åœ¨å¼€å‘ä¸€ä¸ªéœ€è¦å¤„ç†åŠ å¯†æ•°æ®çš„åº”ç”¨ç¨‹åºã€‚ç”¨æˆ·å¯ä»¥ä¸Šä¼ è‡ªå·±çš„åŠ å¯†å¯†é’¥æ¥åŠ å¯†æˆ–è§£å¯†æ–‡ä»¶ã€‚åœ¨å®é™…ä½¿ç”¨è¿™ä¸ªå¯†é’¥ä¹‹å‰ï¼Œä½ éœ€è¦ç¡®è®¤è¿™ä¸ªä¸Šä¼ çš„å¯†é’¥ç¡®å®æ˜¯ä¸€ä¸ªåˆæ³•çš„åŠ å¯†å¯†é’¥ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> crypto</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">crypto</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å‡è®¾è¿™æ˜¯ç”¨æˆ·ä¸Šä¼ çš„å¯†é’¥å¯¹è±¡</span></span>
<span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> userProvidedKey</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> crypto</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">generateKeySync</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">aes</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> {</span><span style="color:#88C0D0;"> length</span><span style="color:#ECEFF4;">:</span><span style="color:#B48EAD;"> 256</span><span style="color:#ECEFF4;"> }</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// ä½¿ç”¨util.types.isCryptoKey()æ¥éªŒè¯</span></span>
<span class="line"><span style="color:#81A1C1;">if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isCryptoKey</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">userProvidedKey</span><span style="color:#D8DEE9FF;">)) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">This is a valid CryptoKey.</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;"> else</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">This is not a valid CryptoKey.</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>åŒºåˆ†åŠ å¯†å¯†é’¥å’Œå…¶ä»–å¯¹è±¡</strong></p><p>åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä½ çš„åº”ç”¨å¯èƒ½æ¥æ”¶å¤šç§ç±»å‹çš„è¾“å…¥ï¼ˆå¦‚å­—ç¬¦ä¸²ã€æ•°å­—ã€å¯¹è±¡ç­‰ï¼‰ï¼Œä½†ä»…éœ€è¦å¤„ç†ç±»å‹ä¸º<code>CryptoKey</code>çš„è¾“å…¥ã€‚æ­¤æ—¶ï¼Œä½¿ç”¨<code>isCryptoKey</code>å‡½æ•°å¯ä»¥å¸®åŠ©ä½ å¿«é€Ÿè¯†åˆ«å’Œç­›é€‰å‡ºåˆé€‚çš„è¾“å…¥é¡¹ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> inputs</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9FF;"> [</span><span style="color:#B48EAD;">123</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">hello</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> userProvidedKey</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> {}</span><span style="color:#D8DEE9FF;">]</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> cryptoKeys</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> inputs</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">filter</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">input</span><span style="color:#ECEFF4;">)</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#D8DEE9;"> util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isCryptoKey</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">input</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">`</span><span style="color:#A3BE8C;">Found </span><span style="color:#81A1C1;">${</span><span style="color:#D8DEE9;">cryptoKeys</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">length</span><span style="color:#81A1C1;">}</span><span style="color:#A3BE8C;"> CryptoKey(s) in the inputs.</span><span style="color:#ECEFF4;">`</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><p>é€šè¿‡ä»¥ä¸Šä¾‹å­ï¼Œä½ å¯ä»¥çœ‹åˆ°<code>util.types.isCryptoKey(value)</code>åœ¨ Node.js ä¸­çš„å®é™…åº”ç”¨åœºæ™¯ï¼Œä¸»è¦ç”¨äºè¾¨è¯†å’Œç¡®è®¤åŠ å¯†å¯†é’¥çš„æœ‰æ•ˆæ€§ï¼Œæœ‰åŠ©äºç¡®ä¿åŠ å¯†æ“ä½œçš„æ­£ç¡®æ€§å’Œå®‰å…¨æ€§ã€‚</p><h3 id="util-types-isdataview-value" tabindex="-1"><a class="header-anchor" href="#util-types-isdataview-value"><span><a href="https://nodejs.org/docs/latest/api/util.html#utiltypesisdataviewvalue" target="_blank" rel="noopener noreferrer">util.types.isDataView(value)</a></span></a></h3><p>å½“ä½ å¼€å§‹æ·±å…¥å­¦ä¹ ç¼–ç¨‹ï¼Œå°¤å…¶æ˜¯ä½¿ç”¨ JavaScript æ—¶ï¼Œä½ ä¼šé‡åˆ°å„ç§æ•°æ®ç»“æ„å’Œç±»å‹ã€‚å…¶ä¸­ä¸€ç§ç‰¹æ®Šçš„å¯¹è±¡å«åš<code>DataView</code>ã€‚è¿™ä¸ªå¯¹è±¡ç”¨äºæ“ä½œå­˜å‚¨åœ¨<code>ArrayBuffer</code>ä¸­çš„äºŒè¿›åˆ¶æ•°æ®ã€‚<code>ArrayBuffer</code>æ˜¯ä¸€ç§å­˜å‚¨äºŒè¿›åˆ¶æ•°æ®çš„æ–¹å¼ï¼Œè€Œ<code>DataView</code>æä¾›äº†ä¸€ä¸ªæ›´çµæ´»çš„æ¥å£æ¥è¯»å†™è¿™äº›æ•°æ®ã€‚</p><p>åœ¨ Node.js ä¸­ï¼Œä¸ºäº†å¸®åŠ©å¼€å‘è€…è¯†åˆ«ä¸åŒçš„æ•°æ®ç±»å‹ï¼Œæä¾›äº†ä¸€ä¸ªå·¥å…·æ¨¡å—ç§°ä¸º<code>util</code>ã€‚åœ¨è¿™ä¸ªæ¨¡å—ä¸­ï¼Œæœ‰ä¸€ä¸ªå‡½æ•°å«åš<code>isDataView()</code>ï¼Œå®ƒå±äº<code>util.types</code>è¿™ä¸ªå­æ¨¡å—ã€‚ç®€å•æ¥è¯´ï¼Œ<code>util.types.isDataView(value)</code>è¿™ä¸ªå‡½æ•°å¯ä»¥å¸®ä½ æ£€æŸ¥ä¸€ä¸ªå˜é‡æ˜¯å¦æ˜¯<code>DataView</code>ç±»å‹çš„å¯¹è±¡ã€‚</p><h3 id="ä½¿ç”¨util-types-isdataview-value" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨util-types-isdataview-value"><span>ä½¿ç”¨<code>util.types.isDataView(value)</code></span></a></h3><p>è¿™ä¸ªå‡½æ•°çš„ä½¿ç”¨éå¸¸ç®€å•ã€‚å®ƒæ¥å—ä¸€ä¸ªå‚æ•°<code>value</code>ï¼Œç„¶åè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼ˆ<code>true</code>æˆ–<code>false</code>ï¼‰ï¼š</p><ul><li>å¦‚æœ<code>value</code>æ˜¯ä¸€ä¸ª<code>DataView</code>å¯¹è±¡ï¼Œå®ƒè¿”å›<code>true</code>ã€‚</li><li>å¦‚æœ<code>value</code>ä¸æ˜¯<code>DataView</code>å¯¹è±¡ï¼Œå®ƒè¿”å›<code>false</code>ã€‚</li></ul><h3 id="å®é™…è¿ç”¨çš„ä¾‹å­-7" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨çš„ä¾‹å­-7"><span>å®é™…è¿ç”¨çš„ä¾‹å­</span></a></h3><h4 id="_1-éªŒè¯å˜é‡æ˜¯å¦ä¸º-dataview" tabindex="-1"><a class="header-anchor" href="#_1-éªŒè¯å˜é‡æ˜¯å¦ä¸º-dataview"><span>1. éªŒè¯å˜é‡æ˜¯å¦ä¸º DataView</span></a></h4><p>å‡è®¾ä½ æ­£åœ¨ç¼–å†™ä¸€ä¸ªéœ€è¦å¤„ç†äºŒè¿›åˆ¶æ•°æ®çš„ Node.js åº”ç”¨ç¨‹åºï¼Œå¹¶ä¸”ä½ ä»æŸå¤„æ¥æ”¶åˆ°äº†ä¸€ä¸ªæ•°æ®å¯¹è±¡ï¼Œä½†ä½ ä¸ç¡®å®šå®ƒæ˜¯å¦ä¸º<code>DataView</code>ç±»å‹ã€‚ä½ å¯ä»¥ä½¿ç”¨<code>util.types.isDataView()</code>æ¥æ£€æŸ¥ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å‡è®¾è¿™æ˜¯æˆ‘ä»¬æ¥æ”¶åˆ°çš„å¯¹è±¡</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> buffer</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> ArrayBuffer</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">16</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> dataView</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> DataView</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">buffer</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isDataView</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">dataView</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡º: true</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> notDataView</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> {</span><span style="color:#88C0D0;"> foo</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">bar</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;"> }</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isDataView</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">notDataView</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡º: false</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-åŠŸèƒ½æ€§éªŒè¯" tabindex="-1"><a class="header-anchor" href="#_2-åŠŸèƒ½æ€§éªŒè¯"><span>2. åŠŸèƒ½æ€§éªŒè¯</span></a></h4><p>æƒ³è±¡ä¸€ä¸‹ï¼Œä½ æ­£åœ¨å¼€å‘ä¸€ä¸ªåº“æˆ–è€…æ¡†æ¶ï¼Œè¿™ä¸ªåº“éœ€è¦ç”¨æˆ·ä¼ å…¥<code>DataView</code>ç±»å‹çš„å‚æ•°ã€‚åœ¨å®é™…æ“ä½œè¿™ä¸ªå‚æ•°ä¹‹å‰ï¼Œä½ å¯ä»¥å…ˆç”¨<code>util.types.isDataView()</code>æ¥ç¡®ä¿ä¼ å…¥çš„ç¡®å®æ˜¯ä¸€ä¸ª<code>DataView</code>å¯¹è±¡ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">function</span><span style="color:#88C0D0;"> processData</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">data</span><span style="color:#ECEFF4;">)</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#81A1C1;">!</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isDataView</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">data</span><span style="color:#D8DEE9FF;">)) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#81A1C1;">    throw</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> TypeError</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Expected a DataView</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span></span>
<span class="line"><span style="color:#616E88;">  // è¿›è¡ŒDataViewæ•°æ®çš„å¤„ç†...</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">try</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  const</span><span style="color:#D8DEE9;"> buffer</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> ArrayBuffer</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">16</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">  const</span><span style="color:#D8DEE9;"> dataView</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> DataView</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">buffer</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88C0D0;">  processData</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">dataView</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // æ­£ç¡®çš„ä½¿ç”¨</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88C0D0;">  processData</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">{}</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¿™å°†æŠ›å‡ºå¼‚å¸¸</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;"> catch</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">e</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">warn</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">e</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">message</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // æ‰“å°: Expected a DataView</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é€šè¿‡è¿™æ ·çš„æ–¹å¼ï¼Œä½ å¯ä»¥ç¡®ä¿ä½ çš„å‡½æ•°æˆ–æ–¹æ³•æŒ‰ç…§é¢„æœŸå·¥ä½œï¼Œå¹¶ä¸”èƒ½å¤Ÿä¼˜é›…åœ°å¤„ç†é”™è¯¯æƒ…å†µï¼Œæé«˜ä»£ç çš„å¥å£®æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p><p>æ€»çš„æ¥è¯´ï¼Œ<code>util.types.isDataView()</code>æ˜¯ Node.js ä¸­ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„å·¥å…·ï¼Œå®ƒå¯ä»¥å¸®åŠ©ä½ åœ¨å¤„ç†äºŒè¿›åˆ¶æ•°æ®æ—¶æ›´å‡†ç¡®åœ°è¯†åˆ«æ•°æ®ç±»å‹ï¼Œä»è€Œç¼–å†™å‡ºæ›´å®‰å…¨ã€æ›´é«˜æ•ˆçš„ä»£ç ã€‚</p><h3 id="util-types-isdate-value" tabindex="-1"><a class="header-anchor" href="#util-types-isdate-value"><span><a href="https://nodejs.org/docs/latest/api/util.html#utiltypesisdatevalue" target="_blank" rel="noopener noreferrer">util.types.isDate(value)</a></span></a></h3><p>ç†è§£ <code>util.types.isDate(value)</code> çš„åŠŸèƒ½ï¼Œé¦–å…ˆéœ€è¦äº†è§£ Node.js ä¸­çš„ <code>util</code> æ¨¡å—ã€‚<code>util</code> æ¨¡å—æ˜¯ä¸€ä¸ª Node.js æ ¸å¿ƒæ¨¡å—ï¼Œå®ƒæä¾›äº†ä¸€ç»„å®ç”¨å‡½æ•°ï¼Œè¿™äº›å‡½æ•°ä¸»è¦ç”¨äºæ”¯æŒ Node.js API çš„éœ€æ±‚ï¼Œå¹¶å¸®åŠ©å¼€å‘äººå‘˜å¤„ç†ä¸€äº›å¸¸è§çš„ä»»åŠ¡ã€‚</p><p><code>util.types.isDate(value)</code> æ˜¯ <code>util</code> æ¨¡å—ä¸­çš„ä¸€ä¸ªå‡½æ•°ã€‚å¦‚å…¶åï¼Œè¿™ä¸ªå‡½æ•°çš„ä½œç”¨æ˜¯æ£€æŸ¥ä¸€ä¸ªç»™å®šçš„å€¼æ˜¯å¦ä¸ºä¸€ä¸ªæ—¥æœŸå¯¹è±¡ (<code>Date</code> å¯¹è±¡)ã€‚è¿™åœ¨å¾ˆå¤šæƒ…å†µä¸‹éƒ½éå¸¸æœ‰ç”¨ï¼Œç‰¹åˆ«æ˜¯å½“ä½ éœ€è¦éªŒè¯æ•°æ®ç±»å‹æˆ–è€…åœ¨æ“ä½œä¹‹å‰ç¡®è®¤ä¸€ä¸ªå€¼ç¡®å®æ˜¯æ—¥æœŸç±»å‹ã€‚</p><h3 id="ä½¿ç”¨-util-types-isdate-value-çš„ä¾‹å­" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨-util-types-isdate-value-çš„ä¾‹å­"><span>ä½¿ç”¨ <code>util.types.isDate(value)</code> çš„ä¾‹å­ï¼š</span></a></h3><h4 id="å®ä¾‹-1-æ£€éªŒä¸€ä¸ªå€¼æ˜¯å¦ä¸ºæ—¥æœŸå¯¹è±¡" tabindex="-1"><a class="header-anchor" href="#å®ä¾‹-1-æ£€éªŒä¸€ä¸ªå€¼æ˜¯å¦ä¸ºæ—¥æœŸå¯¹è±¡"><span>å®ä¾‹ 1ï¼šæ£€éªŒä¸€ä¸ªå€¼æ˜¯å¦ä¸ºæ—¥æœŸå¯¹è±¡</span></a></h4><p>å‡è®¾ä½ æ­£åœ¨ç¼–å†™ä¸€ä¸ªæ—¥å¿—è®°å½•ç³»ç»Ÿï¼Œä½ éœ€è¦ç¡®ä¿ç”¨æˆ·è¾“å…¥çš„æ—¶é—´è®°å½•æ˜¯æœ‰æ•ˆçš„æ—¥æœŸå¯¹è±¡ï¼Œä»¥ä¾¿åç»­å¤„ç†ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// è¿™æ˜¯ä»ç”¨æˆ·é‚£é‡Œè·å–çš„è¾“å…¥</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> userInput</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> Date</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// ä½¿ç”¨ util.types.isDate() æ£€æŸ¥å®ƒæ˜¯å¦ä¸ºæ—¥æœŸå¯¹è±¡</span></span>
<span class="line"><span style="color:#81A1C1;">if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isDate</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">userInput</span><span style="color:#D8DEE9FF;">)) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">æœ‰æ•ˆçš„æ—¥æœŸå¯¹è±¡ï¼</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;"> else</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">è¿™ä¸æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„æ—¥æœŸå¯¹è±¡ã€‚</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="å®ä¾‹-2-è¿‡æ»¤éæ—¥æœŸå¯¹è±¡" tabindex="-1"><a class="header-anchor" href="#å®ä¾‹-2-è¿‡æ»¤éæ—¥æœŸå¯¹è±¡"><span>å®ä¾‹ 2ï¼šè¿‡æ»¤éæ—¥æœŸå¯¹è±¡</span></a></h4><p>æƒ³è±¡ä½ æœ‰ä¸€ä¸ªæ•°ç»„ï¼Œå®ƒåŒ…å«å„ç§ç±»å‹çš„å…ƒç´ ï¼Œä½†ä½ åªæƒ³å¯¹æ—¥æœŸå¯¹è±¡è¿›è¡Œæ“ä½œã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// åŒ…å«å¤šç§ç±»å‹å…ƒç´ çš„æ•°ç»„</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> mixedArray</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9FF;"> [</span></span>
<span class="line"><span style="color:#81A1C1;">  new</span><span style="color:#88C0D0;"> Date</span><span style="color:#D8DEE9FF;">()</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#ECEFF4;">  &quot;</span><span style="color:#A3BE8C;">2023-04-01</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#81A1C1;">  false</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#81A1C1;">  new</span><span style="color:#88C0D0;"> Date</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">2023-04-02</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#B48EAD;">  100</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#D8DEE9FF;">]</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// ä½¿ç”¨ util.types.isDate() è¿‡æ»¤å‡ºæ•°ç»„ä¸­çš„æ—¥æœŸå¯¹è±¡</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> dateObjects</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> mixedArray</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">filter</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">item</span><span style="color:#ECEFF4;">)</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#D8DEE9;"> util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isDate</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">item</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">dateObjects</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // å°†è¾“å‡ºæ•°ç»„ä¸­çš„æ—¥æœŸå¯¹è±¡</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="å®ä¾‹-3-å‚æ•°éªŒè¯" tabindex="-1"><a class="header-anchor" href="#å®ä¾‹-3-å‚æ•°éªŒè¯"><span>å®ä¾‹ 3ï¼šå‚æ•°éªŒè¯</span></a></h4><p>å¦‚æœä½ åœ¨æ„å»ºä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°è¦æ±‚ç‰¹å®šçš„å‚æ•°å¿…é¡»æ˜¯æ—¥æœŸå¯¹è±¡ï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>util.types.isDate()</code> æ¥éªŒè¯è¿™ä¸€ç‚¹ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">function</span><span style="color:#88C0D0;"> processDate</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">date</span><span style="color:#ECEFF4;">)</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#81A1C1;">!</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isDate</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">date</span><span style="color:#D8DEE9FF;">)) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#81A1C1;">    throw</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> TypeError</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">å‚æ•°å¿…é¡»æ˜¯æ—¥æœŸå¯¹è±¡</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">  // å¤„ç†æ—¥æœŸå¯¹è±¡...</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">`</span><span style="color:#A3BE8C;">å¤„ç†çš„æ—¥æœŸæ˜¯ï¼š</span><span style="color:#81A1C1;">${</span><span style="color:#D8DEE9;">date</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">toISOString</span><span style="color:#ECEFF4;">()</span><span style="color:#81A1C1;">}</span><span style="color:#ECEFF4;">`</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">try</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#88C0D0;">  processDate</span><span style="color:#D8DEE9FF;">(</span><span style="color:#81A1C1;">new</span><span style="color:#88C0D0;"> Date</span><span style="color:#D8DEE9FF;">())</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#88C0D0;">  processDate</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">2023-04-01</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¿™å°†æŠ›å‡ºå¼‚å¸¸</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;"> catch</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">error</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">error</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">error</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">message</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°äº†å¦‚ä½•ä½¿ç”¨ <code>util.types.isDate(value)</code> åœ¨ä¸åŒåœºæ™¯ä¸‹è¿›è¡Œæ—¥æœŸå¯¹è±¡çš„éªŒè¯ï¼Œä»è€Œç¡®ä¿ä»£ç é€»è¾‘çš„æ­£ç¡®æ€§å’Œå¥å£®æ€§ã€‚è¿™åœ¨å¤„ç†ç”¨æˆ·è¾“å…¥ã€API å“åº”æˆ–ä»»ä½•ä¸ç¡®å®šæ•°æ®æ¥æºæ—¶å°¤ä¸ºé‡è¦ã€‚</p><h3 id="util-types-isexternal-value" tabindex="-1"><a class="header-anchor" href="#util-types-isexternal-value"><span><a href="https://nodejs.org/docs/latest/api/util.html#utiltypesisexternalvalue" target="_blank" rel="noopener noreferrer">util.types.isExternal(value)</a></span></a></h3><p>äº†è§£<code>util.types.isExternal(value)</code>ä¹‹å‰ï¼Œå…ˆè¦ç®€å•äº†è§£ä¸€ä¸‹ Node.js ä¸­çš„<code>util</code>æ¨¡å—ã€‚<code>util</code>æ¨¡å—æä¾›äº†ä¸€ç³»åˆ—å®ç”¨å°å·¥å…·ï¼Œä¸»è¦æ˜¯ä¸ºäº†å¼¥è¡¥æ ¸å¿ƒ JavaScript çš„ä¸€äº›â€œä¸è¶³â€ã€‚<code>util.types.isExternal(value)</code>æ˜¯<code>util</code>æ¨¡å—çš„ä¸€ä¸ªæ–¹æ³•ï¼Œå®ƒç”¨äºåˆ¤æ–­ä¼ å…¥çš„å€¼æ˜¯å¦æ˜¯ä¸€ä¸ªå¤–éƒ¨ï¼ˆexternalï¼‰ç±»å‹ã€‚</p><h3 id="ä»€ä¹ˆæ˜¯å¤–éƒ¨ç±»å‹" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯å¤–éƒ¨ç±»å‹"><span>ä»€ä¹ˆæ˜¯å¤–éƒ¨ç±»å‹ï¼Ÿ</span></a></h3><p>åœ¨ Node.js ä¸­ï¼Œ&quot;å¤–éƒ¨&quot;ç±»å‹æŒ‡çš„æ˜¯ç›´æ¥ç”± V8 å¼•æ“ç®¡ç†çš„å†…å­˜ä¹‹å¤–çš„å¯¹è±¡ã€‚è¿™é€šå¸¸æ¶‰åŠåˆ° Node.js ä¸ C++æ’ä»¶æˆ–å…¶ä»–åº•å±‚èµ„æºçš„äº¤äº’ã€‚ç®€å•æ¥è¯´ï¼Œå¦‚æœä¸€ä¸ªå¯¹è±¡ä¸æ˜¯ç›´æ¥ç”± JavaScript çš„æ•°æ®ç±»å‹ï¼ˆå¦‚ï¼šNumber, String, Object ç­‰ï¼‰æ‰€ä»£è¡¨ï¼Œè€Œæ˜¯ç”± Node.js åº•å±‚é€šè¿‡ C++ç­‰è¯­è¨€å®ç°çš„ç‰¹æ®Šå¯¹è±¡ï¼Œé‚£ä¹ˆå®ƒå°±å¯èƒ½è¢«è®¤ä¸ºæ˜¯ä¸€ä¸ªå¤–éƒ¨ç±»å‹ã€‚</p><h3 id="util-types-isexternal-value-çš„ä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#util-types-isexternal-value-çš„ä½¿ç”¨"><span><code>util.types.isExternal(value)</code>çš„ä½¿ç”¨</span></a></h3><p>è¿™ä¸ªå‡½æ•°éå¸¸ç›´æ¥ï¼Œåªæ¥å—ä¸€ä¸ªå‚æ•°ï¼š</p><ul><li><code>value</code>ï¼šéœ€è¦æ£€æŸ¥çš„å€¼ã€‚</li></ul><p>å®ƒè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼š</p><ul><li><code>true</code>ï¼šè¡¨ç¤ºä¼ å…¥çš„å€¼æ˜¯ä¸€ä¸ªå¤–éƒ¨ç±»å‹ã€‚</li><li><code>false</code>ï¼šè¡¨ç¤ºä¼ å…¥çš„å€¼ä¸æ˜¯ä¸€ä¸ªå¤–éƒ¨ç±»å‹ã€‚</li></ul><h3 id="å®é™…è¿ç”¨ä¾‹å­-11" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨ä¾‹å­-11"><span>å®é™…è¿ç”¨ä¾‹å­</span></a></h3><p>è™½ç„¶æ—¥å¸¸å¼€å‘ä¸­ç›´æ¥ä½¿ç”¨<code>util.types.isExternal()</code>çš„åœºæ™¯å¯èƒ½ä¸å¤šï¼Œä½†æ˜¯ç†è§£å®ƒå¯ä»¥å¸®åŠ©æˆ‘ä»¬æ›´å¥½åœ°ç†è§£ Node.js ä¸åº•å±‚èµ„æºçš„äº¤äº’ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å‡æƒ³çš„ä¾‹å­ï¼Œå±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨è¿™ä¸ªæ–¹æ³•ï¼š</p><h4 id="ä¾‹å­-1-æ£€æµ‹-buffer-å¯¹è±¡" tabindex="-1"><a class="header-anchor" href="#ä¾‹å­-1-æ£€æµ‹-buffer-å¯¹è±¡"><span>ä¾‹å­ 1ï¼šæ£€æµ‹ Buffer å¯¹è±¡</span></a></h4><p>åœ¨ Node.js ä¸­ï¼Œ<code>Buffer</code>ç±»ç”¨äºæ“ä½œäºŒè¿›åˆ¶æ•°æ®æµï¼Œå®ƒå®é™…ä¸Šæ˜¯ä¸€ä¸ªå¤–éƒ¨ç±»å‹ï¼Œå› ä¸ºå®ƒçš„æ•°æ®æ˜¯åœ¨ Node.js çš„ JavaScript å¼•æ“ä¹‹å¤–çš„å†…å­˜ä¸­åˆ†é…çš„ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> buffer</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> Buffer</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">from</span><span style="color:#D8DEE9FF;">([</span><span style="color:#B48EAD;">1</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 2</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 3</span><span style="color:#D8DEE9FF;">])</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isExternal</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">buffer</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡ºï¼štrue</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="ä¾‹å­-2-ä¸æ™®é€šå¯¹è±¡å¯¹æ¯”" tabindex="-1"><a class="header-anchor" href="#ä¾‹å­-2-ä¸æ™®é€šå¯¹è±¡å¯¹æ¯”"><span>ä¾‹å­ 2ï¼šä¸æ™®é€šå¯¹è±¡å¯¹æ¯”</span></a></h4><p>å¯¹äºæ™®é€šçš„ JavaScript å¯¹è±¡ï¼Œ<code>util.types.isExternal</code>å°†è¿”å›<code>false</code>ï¼Œå› ä¸ºè¿™äº›å¯¹è±¡å®Œå…¨æ˜¯ç”± V8 å¼•æ“ç®¡ç†çš„å†…å­˜ä¸­çš„ç»“æ„ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> obj</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> {</span><span style="color:#88C0D0;"> name</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">Node.js</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;"> }</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isExternal</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">obj</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡ºï¼šfalse</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æ€»ç»“-13" tabindex="-1"><a class="header-anchor" href="#æ€»ç»“-13"><span>æ€»ç»“</span></a></h3><p><code>util.types.isExternal(value)</code>æ–¹æ³•æä¾›äº†ä¸€ç§æ–¹å¼æ¥è¯†åˆ«ä¸€ä¸ªå€¼æ˜¯å¦ä¸ºå¤–éƒ¨ç±»å‹ï¼Œè¿™æœ‰åŠ©äºè°ƒè¯•å’Œä¼˜åŒ–æ¶‰åŠ Node.js åº•å±‚äº¤äº’çš„ä»£ç ã€‚è™½ç„¶ä½ å¯èƒ½ä¸ä¼šé¢‘ç¹åœ°ç›´æ¥ä½¿ç”¨å®ƒï¼Œä½†äº†è§£å®ƒå­˜åœ¨å¹¶ä¸”èƒ½å¤Ÿç”¨äºè¯†åˆ«å¤–éƒ¨ç±»å‹è¿˜æ˜¯å¾ˆæœ‰å¸®åŠ©çš„ã€‚</p><h3 id="util-types-isfloat32array-value" tabindex="-1"><a class="header-anchor" href="#util-types-isfloat32array-value"><span><a href="https://nodejs.org/docs/latest/api/util.html#utiltypesisfloat32arrayvalue" target="_blank" rel="noopener noreferrer">util.types.isFloat32Array(value)</a></span></a></h3><p>å¥½çš„ï¼Œè®©æˆ‘ä»¬æ·±å…¥äº†è§£ä¸€ä¸‹ Node.js ä¸­çš„ <code>util.types.isFloat32Array(value)</code> å‡½æ•°ï¼Œå¹¶å°è¯•ç”¨é€šä¿—æ˜“æ‡‚çš„è¯­è¨€æ¥è§£é‡Šå®ƒã€‚</p><h3 id="ä»€ä¹ˆæ˜¯-float32array" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯-float32array"><span>ä»€ä¹ˆæ˜¯ Float32Arrayï¼Ÿ</span></a></h3><p>é¦–å…ˆï¼Œè¦ç†è§£ <code>util.types.isFloat32Array</code> å‡½æ•°ï¼Œæˆ‘ä»¬éœ€è¦æ˜ç™½ä»€ä¹ˆæ˜¯ <code>Float32Array</code>ã€‚åœ¨ JavaScript ä¸­ï¼Œ<code>Float32Array</code> æ˜¯ä¸€ç§ç±»å‹åŒ–æ•°ç»„ï¼Œç”¨äºå­˜å‚¨ 32 ä½æµ®ç‚¹æ•°ï¼ˆå³å•ç²¾åº¦æµ®ç‚¹æ•°ï¼‰ã€‚è¿™ç§æ•°ç»„ä¸»è¦ç”¨äºå¤„ç†å›¾å½¢ã€éŸ³é¢‘å¤„ç†ã€æˆ–è€…ä»»ä½•éœ€è¦é«˜æ•ˆå¤„ç†å¤§é‡æµ®ç‚¹æ•°çš„åœºæ™¯ã€‚ç”±äºå®ƒç›´æ¥æ“ä½œå†…å­˜ï¼Œå› æ­¤æ¯”æ™®é€šçš„æ•°ç»„ï¼ˆä¾‹å¦‚ <code>Array</code>ï¼‰æä¾›äº†æ›´é«˜çš„æ€§èƒ½å’Œæ›´ä½çš„å†…å­˜ä½¿ç”¨ç‡ã€‚</p><h3 id="util-types-isfloat32array-value-æ˜¯ä»€ä¹ˆ" tabindex="-1"><a class="header-anchor" href="#util-types-isfloat32array-value-æ˜¯ä»€ä¹ˆ"><span>util.types.isFloat32Array(value) æ˜¯ä»€ä¹ˆï¼Ÿ</span></a></h3><p><code>util.types.isFloat32Array(value)</code> æ˜¯ Node.js ä¸­ <code>util.types</code> æ¨¡å—çš„ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºæ£€æŸ¥ç»™å®šçš„å€¼æ˜¯å¦æ˜¯ä¸€ä¸ª <code>Float32Array</code> å®ä¾‹ã€‚å¦‚æœæ˜¯ï¼Œå®ƒè¿”å› <code>true</code>ï¼›å¦‚æœä¸æ˜¯ï¼Œå®ƒè¿”å› <code>false</code>ã€‚</p><h3 id="å¦‚ä½•ä½¿ç”¨-4" tabindex="-1"><a class="header-anchor" href="#å¦‚ä½•ä½¿ç”¨-4"><span>å¦‚ä½•ä½¿ç”¨ï¼Ÿ</span></a></h3><p>è¦ä½¿ç”¨è¿™ä¸ªå‡½æ•°ï¼Œä½ é¦–å…ˆéœ€è¦å¼•å…¥ Node.js çš„ <code>util</code> æ¨¡å—ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>ç„¶åï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>isFloat32Array</code> å‡½æ•°æ¥æ£€æŸ¥ä»»ä½•å€¼æ˜¯å¦ä¸º <code>Float32Array</code> ç±»å‹ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> array</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> Float32Array</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">5</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // åˆ›å»ºä¸€ä¸ªé•¿åº¦ä¸º 5 çš„ Float32Array</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isFloat32Array</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">array</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡ºï¼štrue</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> notFloat32Array</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9FF;"> [</span><span style="color:#B48EAD;">1</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 2</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 3</span><span style="color:#D8DEE9FF;">]</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isFloat32Array</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">notFloat32Array</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡ºï¼šfalse</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="å®é™…è¿ç”¨çš„ä¾‹å­-8" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨çš„ä¾‹å­-8"><span>å®é™…è¿ç”¨çš„ä¾‹å­</span></a></h3><h4 id="ä¾‹å­-1-å¤„ç†å›¾å½¢æ•°æ®" tabindex="-1"><a class="header-anchor" href="#ä¾‹å­-1-å¤„ç†å›¾å½¢æ•°æ®"><span>ä¾‹å­ 1: å¤„ç†å›¾å½¢æ•°æ®</span></a></h4><p>å‡è®¾ä½ æ­£åœ¨å¼€å‘ä¸€ä¸ªç®€å•çš„ WebGL åº”ç”¨ç¨‹åºï¼Œéœ€è¦ä¼ é€’é¡¶ç‚¹æ•°æ®ç»™ GPUï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> vertices</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> Float32Array</span><span style="color:#D8DEE9FF;">([</span><span style="color:#81A1C1;">-</span><span style="color:#B48EAD;">0.5</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 0.5</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 0.5</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 0.5</span><span style="color:#ECEFF4;">,</span><span style="color:#81A1C1;"> -</span><span style="color:#B48EAD;">0.5</span><span style="color:#ECEFF4;">,</span><span style="color:#81A1C1;"> -</span><span style="color:#B48EAD;">0.5</span><span style="color:#D8DEE9FF;">])</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// åœ¨å°†é¡¶ç‚¹æ•°æ®å‘é€åˆ° GPU ä¹‹å‰ï¼Œç¡®è®¤å®ƒç¡®å®æ˜¯ Float32Array ç±»å‹</span></span>
<span class="line"><span style="color:#81A1C1;">if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isFloat32Array</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">vertices</span><span style="color:#D8DEE9FF;">)) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#616E88;">  // å‘é€é¡¶ç‚¹æ•°æ®åˆ° GPU</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Sending vertices to the GPU...</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;"> else</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Data is not in the correct format.</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="ä¾‹å­-2-éŸ³é¢‘å¤„ç†" tabindex="-1"><a class="header-anchor" href="#ä¾‹å­-2-éŸ³é¢‘å¤„ç†"><span>ä¾‹å­ 2: éŸ³é¢‘å¤„ç†</span></a></h4><p>å½“ä½ å¤„ç†éŸ³é¢‘æ•°æ®æ—¶ï¼Œä½ å¯èƒ½ä¼šä»æŸå¤„æ¥æ”¶åˆ°æ ·æœ¬æ•°æ®ï¼Œå¹¶ä¸”éœ€è¦ç¡®è®¤å®ƒä»¬çš„æ ¼å¼æ­£ç¡®æ— è¯¯ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#616E88;">// å‡è®¾ audioSamples æ¥è‡ªæŸä¸ªéŸ³é¢‘å¤„ç†åº“</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> audioSamples</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> Float32Array</span><span style="color:#D8DEE9FF;">([</span><span style="color:#B48EAD;">0.0</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 1.0</span><span style="color:#ECEFF4;">,</span><span style="color:#81A1C1;"> -</span><span style="color:#B48EAD;">1.0</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 0.5</span><span style="color:#D8DEE9FF;">])</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// ç¡®è®¤æ ·æœ¬æ•°æ®æ˜¯ Float32Array ç±»å‹</span></span>
<span class="line"><span style="color:#81A1C1;">if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isFloat32Array</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">audioSamples</span><span style="color:#D8DEE9FF;">)) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#616E88;">  // è¿›è¡ŒéŸ³é¢‘å¤„ç†</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Processing audio samples...</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;"> else</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">The samples are not in the correct format.</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é€šè¿‡ä¸Šè¿°ä¾‹å­ï¼Œä½ å¯ä»¥çœ‹åˆ° <code>util.types.isFloat32Array</code> åœ¨å¤„ç†éœ€è¦ç‰¹å®šæ•°æ®ç»“æ„ï¼ˆå¦‚ <code>Float32Array</code>ï¼‰çš„åº”ç”¨ä¸­å¾ˆæœ‰ç”¨ï¼Œå®ƒå¸®åŠ©ç¡®ä¿æ•°æ®æ ¼å¼çš„æ­£ç¡®æ€§ï¼Œä»è€Œé¿å…å¯èƒ½çš„é”™è¯¯æˆ–ä¸ä¸€è‡´ã€‚</p><h3 id="util-types-isfloat64array-value" tabindex="-1"><a class="header-anchor" href="#util-types-isfloat64array-value"><span><a href="https://nodejs.org/docs/latest/api/util.html#utiltypesisfloat64arrayvalue" target="_blank" rel="noopener noreferrer">util.types.isFloat64Array(value)</a></span></a></h3><p>Node.js ä¸­çš„ <code>util.types.isFloat64Array(value)</code> æ˜¯ä¸€ä¸ªå®ç”¨å‡½æ•°ï¼Œå®ƒå¸®åŠ©ä½ åˆ¤æ–­ç»™å®šçš„å€¼æ˜¯å¦æ˜¯ä¸€ä¸ª <code>Float64Array</code> ç±»å‹ã€‚ç†è§£è¿™ä¸ªæ¦‚å¿µä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆç®€å•äº†è§£å‡ ä¸ªæ¦‚å¿µï¼šJavaScript ä¸­çš„ç±»å‹åŒ–æ•°ç»„ï¼ˆTyped Arraysï¼‰å’Œ <code>Float64Array</code>ã€‚</p><h3 id="ä»€ä¹ˆæ˜¯ç±»å‹åŒ–æ•°ç»„-typed-arrays" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯ç±»å‹åŒ–æ•°ç»„-typed-arrays"><span>ä»€ä¹ˆæ˜¯ç±»å‹åŒ–æ•°ç»„ï¼ˆTyped Arraysï¼‰ï¼Ÿ</span></a></h3><p>JavaScript æœ€åˆè¢«è®¾è®¡ä¸ºå¤„ç†ç®€å•çš„ç½‘é¡µäº¤äº’ï¼ŒåŸç”Ÿå¹¶ä¸éœ€è¦å¤„ç†å¤§é‡çš„äºŒè¿›åˆ¶æ•°æ®ã€‚éšç€æ—¶é—´çš„å‘å±•ï¼ŒWeb åº”ç”¨å˜å¾—è¶Šæ¥è¶Šå¤æ‚ï¼Œéœ€è¦å¤„ç†éŸ³é¢‘ã€è§†é¢‘ç­‰åª’ä½“èµ„æºï¼Œè¿™å°±éœ€è¦ä¸€ç§æ›´æœ‰æ•ˆç‡åœ°å¤„ç†äºŒè¿›åˆ¶æ•°æ®çš„æ–¹å¼ã€‚äºæ˜¯ï¼Œç±»å‹åŒ–æ•°ç»„ï¼ˆTyped Arraysï¼‰åº”è¿è€Œç”Ÿã€‚</p><p>ç±»å‹åŒ–æ•°ç»„æ˜¯ä¸€ç§ç±»ä¼¼äºæ•°ç»„çš„å¯¹è±¡ï¼Œä½†ä¸“é—¨ç”¨æ¥å¤„ç†äºŒè¿›åˆ¶æ•°æ®ã€‚ä¸æ™®é€šçš„ JavaScript æ•°ç»„ç›¸æ¯”ï¼Œç±»å‹åŒ–æ•°ç»„åœ¨å†…å­˜ä¸­æ˜¯è¿ç»­å­˜æ”¾çš„ï¼Œèƒ½æä¾›æ›´é«˜æ•ˆçš„æ•°æ®è®¿é—®æ€§èƒ½ã€‚</p><h3 id="ä»€ä¹ˆæ˜¯-float64array" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯-float64array"><span>ä»€ä¹ˆæ˜¯ <code>Float64Array</code>ï¼Ÿ</span></a></h3><p><code>Float64Array</code> æ˜¯ç±»å‹åŒ–æ•°ç»„çš„ä¸€ç§ï¼Œå®ƒç”¨äºè¡¨ç¤ºä¸€ä¸ª 64 ä½æµ®ç‚¹æ•°æ•°ç»„ã€‚ç®€å•æ¥è¯´ï¼Œå°±æ˜¯æ¯ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ªåŒç²¾åº¦æµ®ç‚¹æ•°ï¼ˆå³å¸¸è§çš„ JavaScript ä¸­çš„æ•°å­—ç±»å‹ï¼‰ï¼Œå ç”¨ 8 å­—èŠ‚ï¼ˆ64 ä½ï¼‰çš„å†…å­˜ç©ºé—´ã€‚</p><h3 id="util-types-isfloat64array-value-1" tabindex="-1"><a class="header-anchor" href="#util-types-isfloat64array-value-1"><span><code>util.types.isFloat64Array(value)</code></span></a></h3><p>å›åˆ° <code>util.types.isFloat64Array(value)</code> è¿™ä¸ªæ–¹æ³•ï¼Œå®ƒçš„ä½œç”¨å°±æ˜¯æ£€æŸ¥ä¼ å…¥çš„ <code>value</code> æ˜¯å¦æ˜¯ä¸€ä¸ª <code>Float64Array</code> å®ä¾‹ã€‚å¦‚æœæ˜¯ï¼Œå®ƒå°†è¿”å› <code>true</code>ï¼Œå¦åˆ™è¿”å› <code>false</code>ã€‚</p><p>è¿™ä¸ªæ–¹æ³•åœ¨å¤„ç†æ¶‰åŠå¤šç§ç±»å‹çš„äºŒè¿›åˆ¶æ•°æ®æ—¶éå¸¸æœ‰ç”¨ï¼Œç‰¹åˆ«æ˜¯å½“ä½ éœ€è¦ç¡®ä¿æŸä¸ªå˜é‡ç¡®å®æ˜¯ä¸€ä¸ª <code>Float64Array</code>ï¼Œä»è€Œå¯ä»¥å®‰å…¨åœ°è¿›è¡Œåç»­æ“ä½œã€‚</p><h3 id="å®é™…è¿ç”¨çš„ä¾‹å­-9" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨çš„ä¾‹å­-9"><span>å®é™…è¿ç”¨çš„ä¾‹å­</span></a></h3><ol><li><strong>éªŒè¯æ•°æ®ç±»å‹</strong> - å‡è®¾ä½ æ­£åœ¨ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°æ¥æ”¶ä¸€ä¸ªç±»å‹åŒ–æ•°ç»„å‚æ•°ï¼Œå¹¶å¯¹å…¶è¿›è¡Œä¸€äº›æ•°å­¦è®¡ç®—ã€‚ä½ å¯ä»¥ä½¿ç”¨ <code>util.types.isFloat64Array(value)</code> æ¥ç¡®è®¤ä¼ å…¥çš„æ˜¯æ­£ç¡®ç±»å‹çš„æ•°ç»„ï¼š</li></ol><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">function</span><span style="color:#88C0D0;"> calculateAverage</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">data</span><span style="color:#ECEFF4;">)</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">    if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#81A1C1;">!</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isFloat64Array</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">data</span><span style="color:#D8DEE9FF;">)) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#81A1C1;">        throw</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> TypeError</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">Expected a Float64Array</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">    let</span><span style="color:#D8DEE9;"> sum</span><span style="color:#81A1C1;"> =</span><span style="color:#B48EAD;"> 0</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">    for</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> i</span><span style="color:#81A1C1;"> =</span><span style="color:#B48EAD;"> 0</span><span style="color:#81A1C1;">;</span><span style="color:#D8DEE9;"> i</span><span style="color:#ECEFF4;"> `</span><span style="color:#A3BE8C;">&lt;</span><span style="color:#ECEFF4;">`</span><span style="color:#D8DEE9;"> data</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9FF;">length</span><span style="color:#81A1C1;">;</span><span style="color:#D8DEE9;"> i</span><span style="color:#81A1C1;">++</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">        sum</span><span style="color:#81A1C1;"> +=</span><span style="color:#D8DEE9;"> data</span><span style="color:#D8DEE9FF;">[</span><span style="color:#D8DEE9;">i</span><span style="color:#D8DEE9FF;">]</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">    }</span></span>
<span class="line"><span style="color:#81A1C1;">    return</span><span style="color:#D8DEE9;"> sum</span><span style="color:#81A1C1;"> /</span><span style="color:#D8DEE9;"> data</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9FF;">length</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// æ­£ç¡®çš„è°ƒç”¨</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> data</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> Float64Array</span><span style="color:#D8DEE9FF;">([</span><span style="color:#B48EAD;">1.5</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 2.5</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 3.5</span><span style="color:#D8DEE9FF;">])</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#88C0D0;">calculateAverage</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">data</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡ºå¹³å‡å€¼</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// é”™è¯¯çš„è°ƒç”¨ï¼Œä¼šæŠ›å‡ºå¼‚å¸¸</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> wrongData</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9FF;"> [</span><span style="color:#B48EAD;">1.5</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 2.5</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 3.5</span><span style="color:#D8DEE9FF;">]</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // æ³¨æ„è¿™ä¸æ˜¯ Float64Arrayï¼Œè€Œæ˜¯æ™®é€šæ•°ç»„</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#88C0D0;">calculateAverage</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">wrongData</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li><strong>ç±»å‹è½¬æ¢</strong> - åœ¨å¤„ç†ä»æ–‡ä»¶æˆ–ç½‘ç»œæ¥æ”¶çš„äºŒè¿›åˆ¶æ•°æ®æ—¶ï¼Œä½ å¯èƒ½éœ€è¦ç¡®å®šæ•°æ®ç±»å‹ä»¥ä¾¿æ­£ç¡®åœ°è§£ç æˆ–è½¬æ¢æ•°æ®ï¼š</li></ol><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å‡è®¾æˆ‘ä»¬ä»æŸå¤„æ¥æ”¶åˆ° binaryData</span></span>
<span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> binaryData</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> getBinaryDataFromSomewhere</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isFloat64Array</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">binaryData</span><span style="color:#D8DEE9FF;">)) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#616E88;">  // å¦‚æœæ˜¯ Float64Arrayï¼Œæ‰§è¡Œç›¸åº”å¤„ç†</span></span>
<span class="line"><span style="color:#88C0D0;">  processFloat64ArrayData</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">binaryData</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;"> else</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#616E88;">  // ä¸æ˜¯ Float64Arrayï¼Œå°è¯•å…¶ä»–å¤„ç†é€»è¾‘æˆ–æŠ¥é”™</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ€»ç»“ä¸€ä¸‹ï¼Œ<code>util.types.isFloat64Array(value)</code> æ˜¯ Node.js æä¾›çš„ä¸€ä¸ªå·¥å…·æ–¹æ³•ï¼Œç”¨æ¥å¸®åŠ©å¼€å‘è€…åˆ¤æ–­ä¸€ä¸ªå˜é‡æ˜¯å¦ä¸º <code>Float64Array</code> ç±»å‹ï¼Œè¿™å¯¹äºç¼–å†™å¥å£®ä¸”ç±»å‹å®‰å…¨çš„ä»£ç ååˆ†æœ‰ç”¨ã€‚</p><h3 id="util-types-isgeneratorfunction-value" tabindex="-1"><a class="header-anchor" href="#util-types-isgeneratorfunction-value"><span><a href="https://nodejs.org/docs/latest/api/util.html#utiltypesisgeneratorfunctionvalue" target="_blank" rel="noopener noreferrer">util.types.isGeneratorFunction(value)</a></span></a></h3><p>Node.js ä¸­çš„ <code>util.types.isGeneratorFunction(value)</code> æ˜¯ä¸€ä¸ªç”¨æ¥åˆ¤æ–­ç»™å®šçš„å€¼æ˜¯å¦æ˜¯ä¸€ä¸ªç”Ÿæˆå™¨å‡½æ•°ï¼ˆGenerator Functionï¼‰çš„æ–¹æ³•ã€‚åœ¨æ·±å…¥è®²è§£è¿™ä¸ªæ–¹æ³•ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆç†è§£ä»€ä¹ˆæ˜¯ç”Ÿæˆå™¨å‡½æ•°ä»¥åŠå®ƒåœ¨å®é™…ä¸­æœ‰å“ªäº›åº”ç”¨ã€‚</p><h3 id="ä»€ä¹ˆæ˜¯ç”Ÿæˆå™¨å‡½æ•°" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯ç”Ÿæˆå™¨å‡½æ•°"><span>ä»€ä¹ˆæ˜¯ç”Ÿæˆå™¨å‡½æ•°</span></a></h3><p>ç”Ÿæˆå™¨å‡½æ•°æ˜¯ ES6 å¼•å…¥çš„ä¸€ç§ç‰¹æ®Šç±»å‹çš„å‡½æ•°ï¼Œå®ƒå¯ä»¥é€šè¿‡ <code>yield</code> å…³é”®å­—æš‚åœæ‰§è¡Œï¼Œå¹¶ä¸”å¯ä»¥åœ¨æœªæ¥çš„ä»»æ„æ—¶é—´ç‚¹æ¢å¤æ‰§è¡Œã€‚ç”Ÿæˆå™¨å‡½æ•°åœ¨è¢«è°ƒç”¨æ—¶å¹¶ä¸ç«‹å³æ‰§è¡Œï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ªç§°ä¸ºâ€œç”Ÿæˆå™¨â€çš„è¿­ä»£å™¨å¯¹è±¡ã€‚é€šè¿‡è¿™ä¸ªè¿­ä»£å™¨å¯¹è±¡ï¼Œä½ å¯ä»¥æ§åˆ¶å‡½æ•°çš„æ‰§è¡Œï¼Œä¾‹å¦‚å¼€å§‹æ‰§è¡Œã€æš‚åœæ‰§è¡Œã€æ¢å¤æ‰§è¡Œç­‰ã€‚</p><p>ç”Ÿæˆå™¨å‡½æ•°çš„å®šä¹‰æ–¹å¼æ˜¯åœ¨ function å…³é”®å­—ååŠ ä¸€ä¸ªæ˜Ÿå·ï¼ˆ*ï¼‰ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">function*</span><span style="color:#88C0D0;"> myGenerator</span><span style="color:#ECEFF4;">()</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  yield</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">Hello</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">  yield</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">World</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="util-types-isgeneratorfunction-value-1" tabindex="-1"><a class="header-anchor" href="#util-types-isgeneratorfunction-value-1"><span><code>util.types.isGeneratorFunction(value)</code></span></a></h3><p>å›åˆ° <code>util.types.isGeneratorFunction(value)</code>ï¼Œè¿™ä¸ªæ–¹æ³•çš„ä½œç”¨å°±æ˜¯åˆ¤æ–­ä¼ ç»™å®ƒçš„å€¼æ˜¯å¦æ˜¯ä¸€ä¸ªç”Ÿæˆå™¨å‡½æ•°ã€‚å¦‚æœæ˜¯ï¼Œå®ƒä¼šè¿”å› <code>true</code>ï¼›å¦‚æœä¸æ˜¯ï¼Œå®ƒä¼šè¿”å› <code>false</code>ã€‚</p><p>è¿™ä¸ªæ–¹æ³•éå¸¸ç®€å•æ˜“ç”¨ã€‚å‡è®¾æˆ‘ä»¬å®šä¹‰äº†ä¸Šé¢çš„ <code>myGenerator</code> å‡½æ•°ï¼Œç„¶åæƒ³æ£€æŸ¥å®ƒæ˜¯å¦æ˜¯ç”Ÿæˆå™¨å‡½æ•°ï¼Œå¯ä»¥è¿™æ ·åšï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">function*</span><span style="color:#88C0D0;"> myGenerator</span><span style="color:#ECEFF4;">()</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  yield</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">Hello</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">  yield</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">World</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isGeneratorFunction</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">myGenerator</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡º: true</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isGeneratorFunction</span><span style="color:#D8DEE9FF;">(</span><span style="color:#81A1C1;">function</span><span style="color:#ECEFF4;"> ()</span><span style="color:#ECEFF4;"> {}</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡º: false</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="å®é™…åº”ç”¨ç¤ºä¾‹-6" tabindex="-1"><a class="header-anchor" href="#å®é™…åº”ç”¨ç¤ºä¾‹-6"><span>å®é™…åº”ç”¨ç¤ºä¾‹</span></a></h3><ol><li><p><strong>å¼‚æ­¥ç¼–ç¨‹çš„ç®€åŒ–</strong>ï¼šç”Ÿæˆå™¨å¯ç”¨äºç®€åŒ–å¼‚æ­¥æ“ä½œçš„ä»£ç ï¼Œå°¤å…¶æ˜¯åœ¨å¤„ç†å›è°ƒåœ°ç‹±é—®é¢˜æ—¶ã€‚é€šè¿‡é…åˆ <code>yield</code> å…³é”®å­—å’Œ Promise å¯¹è±¡ï¼Œå¯ä»¥ä½¿å¾—å¼‚æ­¥ä»£ç çœ‹èµ·æ¥æ›´åƒæ˜¯åŒæ­¥ä»£ç ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">function*</span><span style="color:#88C0D0;"> fetchUser</span><span style="color:#ECEFF4;">()</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  const</span><span style="color:#D8DEE9;"> user</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> yield</span><span style="color:#88C0D0;"> fetch</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">/api/user</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // å‡è®¾fetchè¿”å›çš„æ˜¯ä¸€ä¸ªPromise</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">user</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>æ§åˆ¶æµç®¡ç†</strong>ï¼šåœ¨å¤æ‚çš„é€»è¾‘ä¸­ï¼Œåˆ©ç”¨ç”Ÿæˆå™¨å‡½æ•°çš„æš‚åœå’Œæ¢å¤ç‰¹æ€§å¯ä»¥æ›´å¥½åœ°ç®¡ç†ä»£ç æ‰§è¡Œçš„æµç¨‹ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">function*</span><span style="color:#88C0D0;"> quiz</span><span style="color:#ECEFF4;">()</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">What is your name?</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">  yield;</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">How old are you?</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">  yield;</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">What is your favorite programming language?</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> interview</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> quiz</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">interview</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">next</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // What is your name?</span></span>
<span class="line"><span style="color:#616E88;">// ç­‰å¾…ç”¨æˆ·è¾“å…¥</span></span>
<span class="line"><span style="color:#D8DEE9;">interview</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">next</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // How old are you?</span></span>
<span class="line"><span style="color:#616E88;">// ç­‰å¾…ç”¨æˆ·è¾“å…¥</span></span>
<span class="line"><span style="color:#D8DEE9;">interview</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">next</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // What is your favorite programming language?</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>çŠ¶æ€æœº</strong>: ä½¿ç”¨ç”Ÿæˆå™¨å¯ä»¥å¾ˆæ–¹ä¾¿åœ°å®ç°çŠ¶æ€æœºã€‚æ¯æ¬¡è°ƒç”¨ <code>next()</code> æ–¹æ³•éƒ½å¯ä»¥æ ¹æ®éœ€è¦è·³è½¬åˆ°ä¸åŒçš„çŠ¶æ€ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">function*</span><span style="color:#88C0D0;"> trafficLight</span><span style="color:#ECEFF4;">()</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  while</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#81A1C1;">true</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Green, go!</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">    yield;</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Yellow, caution!</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">    yield;</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Red, stop!</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">    yield;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"><span style="color:#616E88;">//à¹€à¸­à¸à¸ªà¸²à¸£à¸™à¸µà¹‰à¸¡à¸²à¸ˆà¸²à¸ Cherrychat à¸«à¹‰à¸²à¸¡à¹ƒà¸Šà¹‰à¹€à¸à¸·à¹ˆà¸­à¸à¸²à¸£à¸à¸²à¸“à¸´à¸Šà¸¢à¹Œ</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> light</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> trafficLight</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">light</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">next</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // Green, go!</span></span>
<span class="line"><span style="color:#D8DEE9;">light</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">next</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // Yellow, caution!</span></span>
<span class="line"><span style="color:#D8DEE9;">light</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">next</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // Red, stop!</span></span>
<span class="line"><span style="color:#616E88;">// å¯ä»¥æ— é™å¾ªç¯ä¸‹å»</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><p>æ€»ä¹‹ï¼Œ<code>util.types.isGeneratorFunction(value)</code> åœ¨ Node.js ä¸­æä¾›äº†ä¸€ç§æ–¹ä¾¿å¿«æ·çš„æ–¹å¼æ¥åˆ¤æ–­æŸä¸ªå€¼æ˜¯å¦ä¸ºç”Ÿæˆå™¨å‡½æ•°ã€‚è€Œç”Ÿæˆå™¨å‡½æ•°æœ¬èº«ï¼Œåœ¨å¤„ç†å¼‚æ­¥æ“ä½œã€å¤æ‚é€»è¾‘æ§åˆ¶ã€çŠ¶æ€æœºç­‰åœºæ™¯ä¸‹ï¼Œå±•ç°å‡ºäº†æå¤§çš„çµæ´»æ€§å’Œå¼ºå¤§çš„åŠŸèƒ½ã€‚</p><h3 id="util-types-isgeneratorobject-value" tabindex="-1"><a class="header-anchor" href="#util-types-isgeneratorobject-value"><span><a href="https://nodejs.org/docs/latest/api/util.html#utiltypesisgeneratorobjectvalue" target="_blank" rel="noopener noreferrer">util.types.isGeneratorObject(value)</a></span></a></h3><p>å¥½çš„ï¼Œè®©æˆ‘ä»¬æ¥èŠä¸€èŠ Node.js ä¸­çš„ <code>util.types.isGeneratorObject(value)</code> æ–¹æ³•ã€‚</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦äº†è§£å‡ ä¸ªåŸºæœ¬æ¦‚å¿µï¼š</p><ol><li><p><strong>Node.js</strong>ï¼šè¿™æ˜¯ä¸€ä¸ªè¿è¡Œåœ¨æœåŠ¡å™¨ç«¯çš„ JavaScript ç¯å¢ƒã€‚å®ƒå…è®¸ä½ ä½¿ç”¨ JavaScript æ¥ç¼–å†™åç«¯ä»£ç ï¼Œè€Œä¸ä»…ä»…æ˜¯åœ¨æµè§ˆå™¨ä¸­è¿è¡Œå‰ç«¯è„šæœ¬ã€‚</p></li><li><p><strong>Generators</strong>ï¼šåœ¨ JavaScript ä¸­ï¼Œç”Ÿæˆå™¨ï¼ˆGeneratorsï¼‰æ˜¯ ES6 å¼•å…¥çš„ä¸€ç§ç‰¹æ®Šç±»å‹çš„å‡½æ•°ï¼Œå®ƒå¯ä»¥é€šè¿‡ <code>yield</code> å…³é”®å­—æš‚åœæ‰§è¡Œï¼Œå¹¶åœ¨æœªæ¥çš„æŸä¸ªæ—¶åˆ»å†ç»§ç»­ä»åœæ­¢çš„åœ°æ–¹ç»§ç»­æ‰§è¡Œã€‚</p></li><li><p><strong>util.types.isGeneratorObject()</strong>ï¼šè¿™æ˜¯ Node.js æä¾›çš„ä¸€ä¸ªå·¥å…·å‡½æ•°ï¼Œç”¨äºæ£€æŸ¥ä¸€ä¸ªå€¼æ˜¯å¦æ˜¯ç”Ÿæˆå™¨å¯¹è±¡ã€‚ç”Ÿæˆå™¨å¯¹è±¡æ˜¯ç”±ç”Ÿæˆå™¨å‡½æ•°è¿”å›çš„ï¼Œè€Œä¸æ˜¯ç”Ÿæˆå™¨å‡½æ•°æœ¬èº«ã€‚</p></li></ol><p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬æ·±å…¥ç†è§£ <code>util.types.isGeneratorObject(value)</code> çš„ä½œç”¨å’Œä½¿ç”¨åœºæ™¯ã€‚</p><h3 id="åŠŸèƒ½" tabindex="-1"><a class="header-anchor" href="#åŠŸèƒ½"><span>åŠŸèƒ½</span></a></h3><p>ç®€å•æ¥è¯´ï¼Œ<code>util.types.isGeneratorObject(value)</code> å‡½æ•°æ¥æ”¶ä¸€ä¸ªå‚æ•° <code>value</code>ï¼Œç„¶ååˆ¤æ–­è¿™ä¸ªå€¼æ˜¯å¦æ˜¯ä¸€ä¸ªç”Ÿæˆå™¨å¯¹è±¡ã€‚å¦‚æœæ˜¯ï¼Œå®ƒä¼šè¿”å› <code>true</code>ï¼›å¦åˆ™ï¼Œè¿”å› <code>false</code>ã€‚</p><h3 id="ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸ªæ–¹æ³•" tabindex="-1"><a class="header-anchor" href="#ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸ªæ–¹æ³•"><span>ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸ªæ–¹æ³•ï¼Ÿ</span></a></h3><p>åœ¨ JavaScript å¼€å‘ä¸­ï¼Œç‰¹åˆ«æ˜¯æ¶‰åŠåˆ°å¼‚æ­¥ç¼–ç¨‹æ—¶ï¼Œç”Ÿæˆå™¨å¯ä»¥ä½œä¸ºå¼‚æ­¥å¤„ç†æœºåˆ¶ï¼ˆæ¯”å¦‚ä¸ <code>async/await</code> å…±åŒä½¿ç”¨ï¼‰çš„ä¸€éƒ¨åˆ†ã€‚æœ‰æ—¶å€™ï¼Œåœ¨å¤æ‚çš„åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦æ£€æŸ¥æŸäº›å¯¹è±¡æ˜¯å¦ä¸ºç”Ÿæˆå™¨å¯¹è±¡ï¼Œä»¥ç¡®ä¿æˆ‘ä»¬çš„ä»£ç èƒ½æ­£ç¡®å¤„ç†å®ƒä»¬ã€‚è¿™å°±æ˜¯ <code>util.types.isGeneratorObject(value)</code> å­˜åœ¨çš„æ„ä¹‰ã€‚</p><h3 id="å®é™…ä¾‹å­-5" tabindex="-1"><a class="header-anchor" href="#å®é™…ä¾‹å­-5"><span>å®é™…ä¾‹å­</span></a></h3><p>è®©æˆ‘ä»¬é€šè¿‡ä¸€äº›ä»£ç ç¤ºä¾‹æ¥çœ‹çœ‹è¿™æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚</p><ol><li><strong>åˆ›å»ºä¸€ä¸ªç”Ÿæˆå™¨å‡½æ•°å¹¶æ£€æŸ¥å®ƒçš„è¿”å›å€¼</strong>ï¼š</li></ol><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å®šä¹‰ä¸€ä¸ªç”Ÿæˆå™¨å‡½æ•°</span></span>
<span class="line"><span style="color:#81A1C1;">function*</span><span style="color:#88C0D0;"> myGenerator</span><span style="color:#ECEFF4;">()</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  yield</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">hello</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">  yield</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">world</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// è°ƒç”¨ç”Ÿæˆå™¨å‡½æ•°è·å–ç”Ÿæˆå™¨å¯¹è±¡</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> genObject</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> myGenerator</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// æ£€æŸ¥è¿™ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯ç”Ÿæˆå™¨å¯¹è±¡</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isGeneratorObject</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">genObject</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡ºï¼štrue</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// è¿™è¡¨ç¤ºgenObjectç¡®å®æ˜¯ä¸€ä¸ªç”Ÿæˆå™¨å¯¹è±¡ã€‚</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªç®€å•çš„ç”Ÿæˆå™¨å‡½æ•° <code>myGenerator</code>ï¼Œå®ƒé€šè¿‡ <code>yield</code> è¿”å›ä¸¤ä¸ªå€¼ã€‚å½“æˆ‘ä»¬è°ƒç”¨è¿™ä¸ªå‡½æ•°æ—¶ï¼Œå®ƒè¿”å›ä¸€ä¸ªç”Ÿæˆå™¨å¯¹è±¡ã€‚ä½¿ç”¨ <code>util.types.isGeneratorObject(genObject)</code> å¯ä»¥ç¡®è®¤è¿™ä¸ªè¿”å›çš„å¯¹è±¡ç¡®å®æ˜¯ä¸€ä¸ªç”Ÿæˆå™¨å¯¹è±¡ã€‚</p><ol start="2"><li><strong>å°è¯•ç”¨éç”Ÿæˆå™¨å¯¹è±¡è¿›è¡Œæ£€æŸ¥</strong>ï¼š</li></ol><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> normalObj</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> {}</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isGeneratorObject</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">normalObj</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡ºï¼šfalse</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// è¿™è¡¨ç¤ºnormalObjä¸æ˜¯ä¸€ä¸ªç”Ÿæˆå™¨å¯¹è±¡ã€‚</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨æ­¤ä¾‹ä¸­ï¼Œ<code>normalObj</code> æ˜¯ä¸€ä¸ªæ™®é€šçš„ JavaScript å¯¹è±¡ï¼Œä¸æ˜¯ç”±ç”Ÿæˆå™¨å‡½æ•°äº§ç”Ÿçš„ã€‚å› æ­¤ï¼Œå½“æˆ‘ä»¬ç”¨ <code>util.types.isGeneratorObject(normalObj)</code> æ£€æŸ¥å®ƒæ—¶ï¼Œç»“æœæ˜¯ <code>false</code>ã€‚</p><h3 id="å°ç»“-4" tabindex="-1"><a class="header-anchor" href="#å°ç»“-4"><span>å°ç»“</span></a></h3><p><code>util.types.isGeneratorObject(value)</code> æ˜¯ä¸€ä¸ªå®ç”¨çš„å·¥å…·å‡½æ•°ï¼Œå®ƒå¸®åŠ©å¼€å‘è€…åŒºåˆ†å“ªäº›å¯¹è±¡æ˜¯ç”±ç”Ÿæˆå™¨å‡½æ•°äº§ç”Ÿçš„ã€‚ç†è§£ç”Ÿæˆå™¨åŠå…¶ç›¸å…³çš„å·¥å…·å‡½æ•°å¯¹äºç¼–å†™é«˜æ•ˆä¸”æ˜“äºç»´æŠ¤çš„å¼‚æ­¥ä»£ç éå¸¸é‡è¦ã€‚å¸Œæœ›è¿™ä¸ªè§£é‡Šå’Œä¾‹å­èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å®ƒçš„ç”¨é€”ã€‚</p><h3 id="util-types-isint8array-value" tabindex="-1"><a class="header-anchor" href="#util-types-isint8array-value"><span><a href="https://nodejs.org/docs/latest/api/util.html#utiltypesisint8arrayvalue" target="_blank" rel="noopener noreferrer">util.types.isInt8Array(value)</a></span></a></h3><p>å½“ä½ å¼€å§‹ä½¿ç”¨ Node.jsï¼Œä½ ä¼šæ¥è§¦åˆ°å¾ˆå¤šå†…ç½®æ¨¡å—å’Œå‡½æ•°ï¼Œå…¶ä¸­<code>util.types.isInt8Array(value)</code>æ˜¯ä¸€ä¸ªå®ç”¨çš„åŠŸèƒ½ç‚¹ã€‚æˆ‘å°†å°½å¯èƒ½ç®€å•åœ°è§£é‡Šå®ƒï¼Œå¹¶æä¾›ä¸€äº›ä¾‹å­æ¥å¸®åŠ©ä½ ç†è§£ã€‚</p><p>é¦–å…ˆï¼Œè®©æˆ‘ä»¬åˆ†è§£ä¸€ä¸‹<code>util.types.isInt8Array(value)</code>è¿™ä¸ªæ–¹æ³•ï¼š</p><ol><li><strong><code>util</code></strong> - è¿™æ˜¯ Node.js ä¸­ä¸€ä¸ªå†…ç½®çš„æ¨¡å—ï¼Œæä¾›äº†ä¸€ç³»åˆ—å®ç”¨å·¥å…·ã€‚è¿™æ„å‘³ç€ä½ ä¸éœ€è¦å®‰è£…å°±å¯ä»¥ç›´æ¥åœ¨ Node.js ä¸­ä½¿ç”¨å®ƒã€‚</li><li><strong><code>types</code></strong> - æ˜¯<code>util</code>æ¨¡å—ä¸­çš„ä¸€ä¸ªå±æ€§ï¼Œä¸“é—¨ç”¨äºæä¾›ä¸€ç³»åˆ—ç”¨äºè¯†åˆ«å„ç§æ•°æ®ç±»å‹çš„æ–¹æ³•ã€‚</li><li><strong><code>isInt8Array(value)</code></strong> - è¿™ä¸ªæ–¹æ³•ç”¨äºæ£€æŸ¥ä¼ é€’ç»™å®ƒçš„å€¼æ˜¯å¦ä¸º<code>Int8Array</code>ç±»å‹ã€‚</li></ol><h3 id="ä»€ä¹ˆæ˜¯int8array" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯int8array"><span>ä»€ä¹ˆæ˜¯<code>Int8Array</code>ï¼Ÿ</span></a></h3><p><code>Int8Array</code>æ˜¯ JavaScript ä¸­çš„ä¸€ä¸ªç±»å‹åŒ–æ•°ç»„ã€‚ç±»å‹åŒ–æ•°ç»„æ˜¯å…è®¸ä½ å­˜å‚¨å…·æœ‰ç›¸åŒç±»å‹çš„å…ƒç´ çš„æ•°ç»„ã€‚åœ¨<code>Int8Array</code>çš„æƒ…å†µä¸‹ï¼Œå®ƒå­˜å‚¨çš„æ˜¯ 8 ä½ï¼ˆ1 å­—èŠ‚ï¼‰æ•´æ•°ã€‚è¿™æ„å‘³ç€æ¯ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ªä»‹äº-128 åˆ° 127 ä¹‹é—´çš„æ•´æ•°ã€‚</p><h3 id="util-types-isint8array-value-å¦‚ä½•å·¥ä½œ" tabindex="-1"><a class="header-anchor" href="#util-types-isint8array-value-å¦‚ä½•å·¥ä½œ"><span><code>util.types.isInt8Array(value)</code>å¦‚ä½•å·¥ä½œï¼Ÿ</span></a></h3><p>è¿™ä¸ªæ–¹æ³•é€šè¿‡æ£€æŸ¥æä¾›çš„å€¼æ˜¯å¦ç¡®å®æ˜¯ä¸€ä¸ª<code>Int8Array</code>å®ä¾‹æ¥å·¥ä½œã€‚å¦‚æœæ˜¯ï¼Œåˆ™è¿”å›<code>true</code>ï¼›å¦‚æœä¸æ˜¯ï¼Œåˆ™è¿”å›<code>false</code>ã€‚</p><h3 id="å®é™…è¿ç”¨ç¤ºä¾‹-8" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨ç¤ºä¾‹-8"><span>å®é™…è¿ç”¨ç¤ºä¾‹</span></a></h3><p>å‡è®¾ä½ æ­£åœ¨å¤„ç†ä¸€äº›äºŒè¿›åˆ¶æ•°æ®ï¼Œä¾‹å¦‚ä»æ–‡ä»¶ä¸­è¯»å–çš„æ•°æ®æˆ–ä¸ç½‘ç»œæœåŠ¡çš„é€šä¿¡æ•°æ®ï¼Œè€Œä½ éœ€è¦éªŒè¯è¿™äº›æ•°æ®æ˜¯å¦ä¸º<code>Int8Array</code>ç±»å‹ã€‚</p><h4 id="ç¤ºä¾‹-1-éªŒè¯å˜é‡æ˜¯å¦æ˜¯int8array" tabindex="-1"><a class="header-anchor" href="#ç¤ºä¾‹-1-éªŒè¯å˜é‡æ˜¯å¦æ˜¯int8array"><span>ç¤ºä¾‹ 1: éªŒè¯å˜é‡æ˜¯å¦æ˜¯<code>Int8Array</code></span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// åˆ›å»ºä¸€ä¸ª Int8Array ç±»å‹çš„æ•°ç»„</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> buffer</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> Int8Array</span><span style="color:#D8DEE9FF;">([</span><span style="color:#B48EAD;">10</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 20</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 30</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 40</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 50</span><span style="color:#D8DEE9FF;">])</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// æ£€æŸ¥è¿™ä¸ªå˜é‡æ˜¯å¦æ˜¯ Int8Array çš„å®ä¾‹</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isInt8Array</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">buffer</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡º: true</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// ä¸ä¹‹å¯¹æ¯”çš„ä¾‹å­</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> arr</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9FF;"> [</span><span style="color:#B48EAD;">10</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 20</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 30</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 40</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 50</span><span style="color:#D8DEE9FF;">]</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isInt8Array</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">arr</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡º: false</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ª<code>Int8Array</code>å¹¶ä½¿ç”¨<code>util.types.isInt8Array()</code>æ¥éªŒè¯å®ƒã€‚ç„¶åï¼Œæˆ‘ä»¬åˆç”¨ä¸€ä¸ªæ™®é€šçš„ JavaScript æ•°ç»„è¿›è¡Œäº†å¯¹æ¯”ï¼Œä»¥æ˜¾ç¤ºå‡½æ•°æ€æ ·åŒºåˆ†ä¸åŒç±»å‹çš„æ•°æ®ã€‚</p><h4 id="ç¤ºä¾‹-2-å‡½æ•°å‚æ•°æ ¡éªŒ" tabindex="-1"><a class="header-anchor" href="#ç¤ºä¾‹-2-å‡½æ•°å‚æ•°æ ¡éªŒ"><span>ç¤ºä¾‹ 2: å‡½æ•°å‚æ•°æ ¡éªŒ</span></a></h4><p>å¦‚æœä½ æ­£åœ¨ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°ä»…å¤„ç†<code>Int8Array</code>ç±»å‹çš„æ•°æ®ï¼Œä½ å¯ä»¥ä½¿ç”¨<code>util.types.isInt8Array(value)</code>æ¥ç¡®ä¿ä¼ å…¥çš„æ•°æ®ç±»å‹æ­£ç¡®ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">function</span><span style="color:#88C0D0;"> processData</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">data</span><span style="color:#ECEFF4;">)</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#81A1C1;">!</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isInt8Array</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">data</span><span style="color:#D8DEE9FF;">)) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#81A1C1;">    throw</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> TypeError</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Function only accepts Int8Array type</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">  // å¤„ç† data...</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">try</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  const</span><span style="color:#D8DEE9;"> validData</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> Int8Array</span><span style="color:#D8DEE9FF;">([</span><span style="color:#B48EAD;">1</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 2</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 3</span><span style="color:#D8DEE9FF;">])</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#88C0D0;">  processData</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">validData</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // æ­£å¸¸æ‰§è¡Œ</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">  const</span><span style="color:#D8DEE9;"> invalidData</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9FF;"> [</span><span style="color:#B48EAD;">1</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 2</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 3</span><span style="color:#D8DEE9FF;">]</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#88C0D0;">  processData</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">invalidData</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // å°†æŠ›å‡ºé”™è¯¯</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;"> catch</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">e</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">error</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">e</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">message</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ä¸ªä¾‹å­å±•ç¤ºäº†å¦‚ä½•åœ¨å‡½æ•°ä¸­ä½¿ç”¨<code>util.types.isInt8Array()</code>æ¥ç¡®ä¿æ•°æ®ç±»å‹çš„å‡†ç¡®æ€§ï¼Œä»è€Œé¿å…å› ç±»å‹ä¸åŒ¹é…è€Œå¯¼è‡´çš„æ½œåœ¨é—®é¢˜ã€‚</p><p>æ€»ä¹‹ï¼Œäº†è§£å¹¶ä½¿ç”¨<code>util.types.isInt8Array(value)</code>èƒ½å¤Ÿå¸®åŠ©ä½ æ›´å¥½åœ°æ§åˆ¶å’Œç†è§£ä½ çš„æ•°æ®ç±»å‹ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤„ç†ç‰¹å®šç±»å‹çš„æ•°æ®æ—¶ã€‚å¸Œæœ›è¿™äº›ç¤ºä¾‹èƒ½å¤Ÿå¸®åŠ©ä½ ç†è§£å®ƒçš„ç”¨æ³•ã€‚</p><h3 id="util-types-isint16array-value" tabindex="-1"><a class="header-anchor" href="#util-types-isint16array-value"><span><a href="https://nodejs.org/docs/latest/api/util.html#utiltypesisint16arrayvalue" target="_blank" rel="noopener noreferrer">util.types.isInt16Array(value)</a></span></a></h3><p>å½“ä½ å¼€å§‹æ·±å…¥ JavaScript å’Œ Node.js çš„ä¸–ç•Œï¼Œä½ ä¼šé‡åˆ°å„ç§æ•°æ®ç±»å‹ï¼Œæ¯”å¦‚æ•°å€¼ã€å­—ç¬¦ä¸²ã€å¯¹è±¡ç­‰ã€‚åœ¨å¤„ç†è¿™äº›æ•°æ®æ—¶ï¼Œå°¤å…¶æ˜¯åœ¨æ¶‰åŠåˆ°åº•å±‚æ“ä½œæˆ–æ€§èƒ½ä¼˜åŒ–æ—¶ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦å…·ä½“äº†è§£æ•°æ®çš„ç±»å‹ã€‚è¿™å°±æ˜¯<code>util.types.isInt16Array(value)</code>å‘æŒ¥ä½œç”¨çš„åœ°æ–¹ã€‚</p><h3 id="ç®€å•ç†è§£" tabindex="-1"><a class="header-anchor" href="#ç®€å•ç†è§£"><span>ç®€å•ç†è§£</span></a></h3><p>é¦–å…ˆï¼Œè®©æˆ‘ä»¬ç®€å•äº†è§£ä¸€ä¸‹ä»€ä¹ˆæ˜¯ Int16Arrayã€‚åœ¨ JavaScript ä¸­ï¼Œ<code>Int16Array</code>æ˜¯ä¸€ç§ç‰¹æ®Šçš„æ•°ç»„ï¼Œå®ƒå­˜å‚¨çš„æ˜¯ 16 ä½æ•´æ•°ï¼ˆä»-32768 åˆ° 32767ï¼‰ã€‚è¿™ç§æ•°ç»„å¯¹äºæŸäº›éœ€è¦å¤„ç†å¤§é‡æ•°å€¼æ•°æ®ä¸”å…³æ³¨æ€§èƒ½çš„åº”ç”¨æ¥è¯´éå¸¸æœ‰ç”¨ï¼Œå› ä¸ºå®ƒä»¬æä¾›äº†ä¸€ç§æ›´ç´§å‡‘ã€æ›´é«˜æ•ˆçš„æ–¹å¼æ¥å­˜å‚¨å’Œå¤„ç†æ•°å­—ã€‚</p><p><code>util.types.isInt16Array(value)</code>æ˜¯ Node.js æä¾›çš„ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºæ£€æŸ¥ä¸€ä¸ªç»™å®šçš„å€¼æ˜¯å¦æ˜¯ä¸€ä¸ª<code>Int16Array</code>å®ä¾‹ã€‚å¦‚æœæ˜¯ï¼Œå‡½æ•°è¿”å›<code>true</code>ï¼›å¦‚æœä¸æ˜¯ï¼Œå°±è¿”å›<code>false</code>ã€‚</p><h3 id="ä½¿ç”¨åœºæ™¯-2" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨åœºæ™¯-2"><span>ä½¿ç”¨åœºæ™¯</span></a></h3><p>å‡è®¾ä½ æ­£åœ¨å¼€å‘ä¸€ä¸ªéŸ³é¢‘å¤„ç†åº”ç”¨ç¨‹åºï¼Œè¯¥ç¨‹åºéœ€è¦å¤„ç†å¤§é‡çš„æ ·æœ¬æ•°æ®ã€‚è¿™äº›æ•°æ®æ˜¯ä»¥ 16 ä½æ•´æ•°çš„å½¢å¼å­˜å‚¨çš„ï¼Œå› æ­¤ä½¿ç”¨<code>Int16Array</code>æ¥å¤„ç†è¿™äº›æ•°æ®å°†éå¸¸é€‚åˆã€‚åœ¨ä½ çš„ä»£ç ä¸­ï¼Œä½ å¯èƒ½ä¼šæ¥æ”¶åˆ°æ¥è‡ªå¤–éƒ¨æºçš„æ•°æ®ï¼Œè€Œä½ éœ€è¦éªŒè¯è¿™äº›æ•°æ®ç¡®å®æ˜¯<code>Int16Array</code>ç±»å‹çš„ï¼Œä»¥ç¡®ä¿åç»­å¤„ç†çš„æ­£ç¡®æ€§å’Œæ•ˆç‡ã€‚è¿™æ—¶å€™ï¼Œ<code>util.types.isInt16Array(value)</code>å°±æ´¾ä¸Šç”¨åœºäº†ã€‚</p><h3 id="å®é™…ä¾‹å­-6" tabindex="-1"><a class="header-anchor" href="#å®é™…ä¾‹å­-6"><span>å®é™…ä¾‹å­</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å‡è®¾æˆ‘ä»¬ä»å¤–éƒ¨æ¥å£æ¥æ”¶åˆ°äº†ä¸€äº›æ•°æ®ï¼Œæˆ‘ä»¬å¸Œæœ›éªŒè¯å®ƒæ˜¯å¦ä¸ºInt16Array</span></span>
<span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> dataReceivedFromExternalSource</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> Int16Array</span><span style="color:#D8DEE9FF;">([</span><span style="color:#B48EAD;">100</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 200</span><span style="color:#ECEFF4;">,</span><span style="color:#81A1C1;"> -</span><span style="color:#B48EAD;">300</span><span style="color:#D8DEE9FF;">])</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// ä½¿ç”¨util.types.isInt16Arrayæ¥æ£€æŸ¥</span></span>
<span class="line"><span style="color:#81A1C1;">if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isInt16Array</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">dataReceivedFromExternalSource</span><span style="color:#D8DEE9FF;">)) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">æ•°æ®æ˜¯Int16Arrayç±»å‹çš„ï¼Œå¯ä»¥è¿›è¡Œè¿›ä¸€æ­¥å¤„ç†ã€‚</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;"> else</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">æ•°æ®ä¸æ˜¯Int16Arrayç±»å‹ï¼Œè¯·è¿›è¡Œé”™è¯¯å¤„ç†ã€‚</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// è¾“å‡º: æ•°æ®æ˜¯Int16Arrayç±»å‹çš„ï¼Œå¯ä»¥è¿›è¡Œè¿›ä¸€æ­¥å¤„ç†ã€‚</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æ¨¡æ‹Ÿä»å¤–éƒ¨æ¥æ”¶åˆ°äº†ä¸€äº›æ•°æ®ï¼Œå¹¶ä½¿ç”¨<code>util.types.isInt16Array</code>æ¥éªŒè¯è¿™äº›æ•°æ®æ˜¯å¦ä¸º<code>Int16Array</code>ç±»å‹ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥ç¡®ä¿åç»­çš„å¤„ç†é€»è¾‘æ˜¯æ­£ç¡®çš„ï¼ŒåŒæ—¶ä¹Ÿå……åˆ†åˆ©ç”¨<code>Int16Array</code>åœ¨æŸäº›åœºæ™¯ä¸‹æä¾›çš„æ€§èƒ½ä¼˜åŠ¿ã€‚</p><h3 id="ç»“è®º-2" tabindex="-1"><a class="header-anchor" href="#ç»“è®º-2"><span>ç»“è®º</span></a></h3><p><code>util.types.isInt16Array(value)</code>æ˜¯ Node.js ä¸­ä¸€ä¸ªç®€å•ä½†éå¸¸å®ç”¨çš„å·¥å…·ï¼Œå®ƒå¸®åŠ©æˆ‘ä»¬è¯†åˆ«å’Œç¡®è®¤æ•°æ®ç±»å‹ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤„ç†æ€§èƒ½æ•æ„Ÿå‹åº”ç”¨æ—¶ã€‚é€šè¿‡çŸ¥é“æ•°æ®ç¡®åˆ‡çš„ç±»å‹ï¼Œæˆ‘ä»¬å¯ä»¥ç¼–å†™å‡ºæ›´åŠ é«˜æ•ˆã€ç¨³å®šçš„ä»£ç ã€‚</p><h3 id="util-types-isint32array-value" tabindex="-1"><a class="header-anchor" href="#util-types-isint32array-value"><span><a href="https://nodejs.org/docs/latest/api/util.html#utiltypesisint32arrayvalue" target="_blank" rel="noopener noreferrer">util.types.isInt32Array(value)</a></span></a></h3><p>Node.js æ˜¯ä¸€ä¸ªåŸºäº Chrome V8 å¼•æ“çš„ JavaScript è¿è¡Œç¯å¢ƒï¼Œè®©ä½ å¯ä»¥åœ¨æœåŠ¡å™¨ç«¯è¿è¡Œ JavaScript ä»£ç ã€‚<code>util.types.isInt32Array(value)</code>æ˜¯ Node.js ä¸­ä¸€ä¸ªéå¸¸å®ç”¨çš„åŠŸèƒ½ï¼Œå®ƒå±äº<code>util</code>æ¨¡å—çš„ä¸€éƒ¨åˆ†ã€‚â€œutilâ€æ¨¡å—æä¾›äº†å¾ˆå¤šå®ç”¨å·¥å…·ï¼Œè€Œ<code>isInt32Array</code>å‡½æ•°ç”¨æ¥åˆ¤æ–­ä¸€ä¸ªå€¼æ˜¯å¦ä¸º<code>Int32Array</code>ç±»å‹ã€‚</p><p>é¦–å…ˆï¼Œè®©æˆ‘ä»¬ç†è§£ä»€ä¹ˆæ˜¯<code>Int32Array</code>ã€‚<code>Int32Array</code>æ˜¯ä¸€ç§â€œç±»å‹åŒ–æ•°ç»„â€ï¼Œå…è®¸ä½ å­˜å‚¨ 32 ä½æ•´æ•°çš„åºåˆ—ã€‚è¿™ç§æ•°ç»„æœ‰ç‚¹ç‰¹æ®Šï¼Œå› ä¸ºå®ƒä»¬ä¸ºäº†æ•ˆç‡å’Œæ€§èƒ½ä¼˜åŒ–è€Œè®¾è®¡ï¼Œå¯ä»¥ç›´æ¥æ“ä½œå†…å­˜ä¸­çš„äºŒè¿›åˆ¶æ•°æ®ã€‚</p><h3 id="å¦‚ä½•ä½¿ç”¨util-types-isint32array-value" tabindex="-1"><a class="header-anchor" href="#å¦‚ä½•ä½¿ç”¨util-types-isint32array-value"><span>å¦‚ä½•ä½¿ç”¨<code>util.types.isInt32Array(value)</code></span></a></h3><p>ä¸ºäº†ä½¿ç”¨<code>util.types.isInt32Array(value)</code>æ–¹æ³•ï¼Œä½ éœ€è¦å…ˆä»<code>util</code>æ¨¡å—ä¸­å¯¼å…¥å®ƒï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>ç„¶åï¼Œä½ å¯ä»¥ä½¿ç”¨<code>util.types.isInt32Array(value)</code>æ¥æ£€æŸ¥ä¸€ä¸ªå€¼æ˜¯å¦æ˜¯<code>Int32Array</code>ç±»å‹ã€‚å¦‚æœæ˜¯ï¼Œå®ƒä¼šè¿”å›<code>true</code>ï¼›å¦‚æœä¸æ˜¯ï¼Œå®ƒä¼šè¿”å›<code>false</code>ã€‚</p><h3 id="ç¤ºä¾‹-3" tabindex="-1"><a class="header-anchor" href="#ç¤ºä¾‹-3"><span>ç¤ºä¾‹</span></a></h3><h4 id="æ£€æŸ¥ä¸€ä¸ªå€¼æ˜¯å¦ä¸ºint32array" tabindex="-1"><a class="header-anchor" href="#æ£€æŸ¥ä¸€ä¸ªå€¼æ˜¯å¦ä¸ºint32array"><span>æ£€æŸ¥ä¸€ä¸ªå€¼æ˜¯å¦ä¸º<code>Int32Array</code></span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> int32Array</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> Int32Array</span><span style="color:#D8DEE9FF;">([</span><span style="color:#B48EAD;">1</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 2</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 3</span><span style="color:#D8DEE9FF;">])</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isInt32Array</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">int32Array</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡ºï¼štrue</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> notInt32Array</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9FF;"> [</span><span style="color:#B48EAD;">1</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 2</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 3</span><span style="color:#D8DEE9FF;">]</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isInt32Array</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">notInt32Array</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡ºï¼šfalse</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æœ‰ä¸¤ä¸ªå˜é‡ï¼š<code>int32Array</code>æ˜¯ä¸€ä¸ª<code>Int32Array</code>ï¼Œè€Œ<code>notInt32Array</code>æ˜¯ä¸€ä¸ªæ™®é€šçš„ JavaScript æ•°ç»„ã€‚ä½¿ç”¨<code>util.types.isInt32Array</code>å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥è½»æ¾åœ°åŒºåˆ†å®ƒä»¬ã€‚</p><h3 id="å®é™…åº”ç”¨åœºæ™¯-2" tabindex="-1"><a class="header-anchor" href="#å®é™…åº”ç”¨åœºæ™¯-2"><span>å®é™…åº”ç”¨åœºæ™¯</span></a></h3><ul><li><strong>æ€§èƒ½æ•æ„Ÿçš„åº”ç”¨</strong>ï¼šåœ¨éœ€è¦å¤„ç†å¤§é‡æ•°å€¼æ•°æ®ã€å¹¶å¯¹æ€§èƒ½æœ‰è¾ƒé«˜è¦æ±‚çš„æƒ…å†µä¸‹ï¼ˆæ¯”å¦‚æ¸¸æˆå¼€å‘ã€ç§‘å­¦è®¡ç®—ï¼‰ï¼Œä½¿ç”¨<code>Int32Array</code>å¯ä»¥æ›´å¿«åœ°æ‰§è¡Œæ“ä½œï¼Œè€Œ<code>util.types.isInt32Array</code>å¯ä»¥å¸®åŠ©è¿›è¡Œç±»å‹æ£€æµ‹ï¼Œç¡®ä¿æ•°æ®å¤„ç†æµç¨‹çš„æ­£ç¡®æ€§ã€‚</li><li><strong>ä¸ Web Assembly äº¤äº’</strong>ï¼šå½“ä½ çš„ Node.js åº”ç”¨éœ€è¦ä¸ Web Assembly æ¨¡å—äº¤äº’æ—¶ï¼Œå¯èƒ½ä¼šç”¨åˆ°<code>Int32Array</code>æ¥ä¼ é€’æ•°æ®ã€‚ä½¿ç”¨<code>util.types.isInt32Array</code>å¯ä»¥åœ¨äº¤äº’å‰éªŒè¯æ•°æ®ç±»å‹ï¼Œå‡å°‘è¿è¡Œæ—¶é”™è¯¯ã€‚</li><li><strong>æ•°æ®å¯è§†åŒ–</strong>ï¼šå¤„ç†å›¾å½¢å’Œæ•°æ®å¯è§†åŒ–æ—¶ï¼Œç»å¸¸éœ€è¦æ“ä½œå¤§é‡çš„æ•°å€¼æ•°æ®ã€‚<code>Int32Array</code>å¯ä»¥æé«˜æ•°æ®å¤„ç†é€Ÿåº¦ï¼Œè€Œ<code>util.types.isInt32Array</code>åˆ™ç”¨äºç¡®ä¿æ•°æ®æ ¼å¼çš„æ­£ç¡®ï¼Œä»è€Œä¼˜åŒ–æ•´ä½“æ€§èƒ½ã€‚</li></ul><p>é€šè¿‡ä¸Šè¿°ä»‹ç»å’Œç¤ºä¾‹ï¼Œä½ åº”è¯¥å¯¹<code>util.types.isInt32Array(value)</code>æœ‰äº†åŸºæœ¬çš„ç†è§£ã€‚è¿™ä¸ªæ–¹æ³•åœ¨å¤„ç†ç‰¹å®šç±»å‹çš„æ•°æ®å’Œä¼˜åŒ–æ€§èƒ½æ–¹é¢éå¸¸æœ‰ç”¨ã€‚</p><h3 id="util-types-iskeyobject-value" tabindex="-1"><a class="header-anchor" href="#util-types-iskeyobject-value"><span><a href="https://nodejs.org/docs/latest/api/util.html#utiltypesiskeyobjectvalue" target="_blank" rel="noopener noreferrer">util.types.isKeyObject(value)</a></span></a></h3><p>Node.js ä¸­çš„ <code>util.types.isKeyObject(value)</code> æ˜¯ä¸€ä¸ªç‰¹å®šçš„æ–¹æ³•ï¼Œç”¨äºæ£€éªŒç»™å®šçš„å€¼æ˜¯å¦æ˜¯ä¸€ä¸ªå¯†é’¥å¯¹è±¡ï¼ˆKeyObjectï¼‰ã€‚å¯†é’¥å¯¹è±¡é€šå¸¸ç”¨äºåŠ å¯†ã€è§£å¯†ã€ç­¾åç­‰å®‰å…¨ç›¸å…³çš„æ“ä½œï¼Œåœ¨ Node.js ä¸­ï¼Œè¿™äº›å¯†é’¥å¯¹è±¡å¯ä»¥æ˜¯å…¬é’¥ã€ç§é’¥æˆ–è€…å¯¹ç§°å¯†é’¥ã€‚</p><p>é¦–å…ˆï¼Œè®©æˆ‘ä»¬ç®€å•äº†è§£ä¸€ä¸‹ Node.js ä¸ºä½•éœ€è¦è¿™æ ·çš„åŠŸèƒ½ï¼š</p><p>åœ¨è¿›è¡Œç½‘ç»œé€šä¿¡æˆ–æ•°æ®å­˜å‚¨æ—¶ï¼Œä¿è¯æ•°æ®çš„å®‰å…¨æ€§éå¸¸é‡è¦ã€‚ä¸€ä¸ªå¸¸è§çš„åšæ³•æ˜¯é€šè¿‡åŠ å¯†ç®—æ³•å¯¹æ•°æ®è¿›è¡ŒåŠ å¯†ï¼Œå‘é€æ–¹å°†åŠ å¯†åçš„æ•°æ®å‘é€å‡ºå»ï¼Œè€Œæ¥æ”¶æ–¹åˆ™å¯ä»¥ä½¿ç”¨ç›¸åº”çš„å¯†é’¥å¯¹æ•°æ®è¿›è¡Œè§£å¯†ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œå¯†é’¥å¯¹è±¡æ‰®æ¼”ç€è‡³å…³é‡è¦çš„è§’è‰²ã€‚</p><h3 id="å¦‚ä½•ä½¿ç”¨-util-types-iskeyobject-value" tabindex="-1"><a class="header-anchor" href="#å¦‚ä½•ä½¿ç”¨-util-types-iskeyobject-value"><span>å¦‚ä½•ä½¿ç”¨ <code>util.types.isKeyObject(value)</code>ï¼Ÿ</span></a></h3><p><code>util.types.isKeyObject(value)</code> æ–¹æ³•æ¥å—ä¸€ä¸ªå‚æ•° <code>value</code>ï¼Œä½ éœ€è¦ä¼ é€’ç»™å®ƒä¸€ä¸ªä½ æƒ³æ£€æŸ¥çš„å¯¹è±¡ã€‚å¦‚æœè¿™ä¸ªå¯¹è±¡æ˜¯ä¸€ä¸ªå¯†é’¥å¯¹è±¡ï¼Œæ–¹æ³•å°†è¿”å› <code>true</code>ï¼Œå¦åˆ™è¿”å› <code>false</code>ã€‚</p><h3 id="ç¤ºä¾‹ä»£ç -3" tabindex="-1"><a class="header-anchor" href="#ç¤ºä¾‹ä»£ç -3"><span>ç¤ºä¾‹ä»£ç </span></a></h3><p>è€ƒè™‘ä»¥ä¸‹ç¤ºä¾‹ï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªå¯†é’¥å¯¹è±¡ï¼Œå¹¶ä½¿ç”¨ <code>util.types.isKeyObject</code> æ¥éªŒè¯å®ƒï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> crypto</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">crypto</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// åˆ›å»ºä¸€ä¸ªå¯†é’¥å¯¹è±¡</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#ECEFF4;"> {</span><span style="color:#D8DEE9;"> publicKey</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> privateKey</span><span style="color:#ECEFF4;"> }</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> crypto</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">generateKeyPairSync</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">rsa</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#88C0D0;">  modulusLength</span><span style="color:#ECEFF4;">:</span><span style="color:#B48EAD;"> 2048</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// æ£€æŸ¥è¿™ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯ä¸€ä¸ªå¯†é’¥å¯¹è±¡</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isKeyObject</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">publicKey</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡ºï¼štrue</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isKeyObject</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">privateKey</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡ºï¼štrue</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å°è¯•ä¼ é€’ä¸€ä¸ªéå¯†é’¥å¯¹è±¡</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isKeyObject</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">{}</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡ºï¼šfalse</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œ<code>crypto.generateKeyPairSync</code> ç”¨äºç”Ÿæˆä¸€å¯¹ RSA å¯†é’¥ï¼ˆä¸€ä¸ªå…¬é’¥å’Œä¸€ä¸ªç§é’¥ï¼‰ã€‚ç„¶åæˆ‘ä»¬ç”¨ <code>util.types.isKeyObject</code> æ–¹æ³•æ¥æ£€æŸ¥è¿™äº›ç”Ÿæˆçš„å¯¹è±¡æ˜¯å¦æ˜¯å¯†é’¥å¯¹è±¡ã€‚ç»“æœï¼Œå¯¹äºå…¬é’¥å’Œç§é’¥ï¼Œè¾“å‡ºéƒ½æ˜¯ <code>true</code>ï¼Œè¡¨æ˜å®ƒä»¬ç¡®å®æ˜¯å¯†é’¥å¯¹è±¡ã€‚è€Œå¯¹äºä¸€ä¸ªæ™®é€šçš„ç©ºå¯¹è±¡ <code>{}</code>ï¼Œè¾“å‡ºæ˜¯ <code>false</code>ã€‚</p><h3 id="å®é™…åº”ç”¨åœºæ™¯-3" tabindex="-1"><a class="header-anchor" href="#å®é™…åº”ç”¨åœºæ™¯-3"><span>å®é™…åº”ç”¨åœºæ™¯</span></a></h3><ol><li><p><strong>å®‰å…¨é€šä¿¡</strong>ï¼šåœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´å»ºç«‹åŠ å¯†é€šä¿¡æ—¶ï¼ŒæœåŠ¡å™¨å¯èƒ½ä¼šå‘å®¢æˆ·ç«¯å‘é€å…¶å…¬é’¥ã€‚å®¢æˆ·ç«¯æ¥æ”¶åˆ°å…¬é’¥åï¼Œå¯ä½¿ç”¨ <code>util.types.isKeyObject</code> éªŒè¯æ¥æ”¶åˆ°çš„æ˜¯å¦çœŸçš„æ˜¯ä¸€ä¸ªå¯†é’¥å¯¹è±¡ï¼Œä»¥ç¡®ä¿åç»­åŠ å¯†é€šä¿¡çš„å®‰å…¨æ€§ã€‚</p></li><li><p><strong>æ•°å­—ç­¾å</strong>ï¼šåœ¨åˆ›å»ºæˆ–éªŒè¯æ•°å­—ç­¾åæ—¶ï¼Œå¿…é¡»ç¡®ä¿ç”¨äºç­¾åçš„æ˜¯ç§é’¥ï¼Œç”¨äºéªŒè¯ç­¾åçš„æ˜¯å…¬é’¥ã€‚<code>util.types.isKeyObject</code> å¯ç”¨äºéªŒè¯å¤„ç†ä¸­çš„å¯†é’¥æ˜¯å¦ç¬¦åˆé¢„æœŸçš„ç±»å‹ã€‚</p></li><li><p><strong>é…ç½®éªŒè¯</strong>ï¼šåœ¨å¼€å‘éœ€è¦å¤„ç†å¯†é’¥çš„åº”ç”¨ç¨‹åºæ—¶ï¼Œå¯èƒ½ä¼šä»é…ç½®æ–‡ä»¶æˆ–ç¯å¢ƒå˜é‡ä¸­åŠ è½½å¯†é’¥ã€‚åœ¨ä½¿ç”¨è¿™äº›å¯†é’¥ä¹‹å‰ï¼Œä½¿ç”¨ <code>util.types.isKeyObject</code> è¿›è¡ŒéªŒè¯å¯ä»¥ç¡®ä¿æä¾›çš„é…ç½®é¡¹æ˜¯æœ‰æ•ˆçš„å¯†é’¥å¯¹è±¡ï¼Œé¿å…è¿è¡Œæ—¶é”™è¯¯ã€‚</p></li></ol><p>é€šè¿‡è¿™ç§æ–¹å¼ï¼Œ<code>util.types.isKeyObject</code> æˆä¸ºäº† Node.js åº”ç”¨ä¸­å¤„ç†å’ŒéªŒè¯å¯†é’¥å¯¹è±¡æ—¶çš„ä¸€ä¸ªé‡è¦å·¥å…·ã€‚</p><h3 id="util-types-ismap-value" tabindex="-1"><a class="header-anchor" href="#util-types-ismap-value"><span><a href="https://nodejs.org/docs/latest/api/util.html#utiltypesismapvalue" target="_blank" rel="noopener noreferrer">util.types.isMap(value)</a></span></a></h3><p>å½“ç„¶å¯ä»¥ã€‚åœ¨ Node.js ä¸­ï¼Œ<code>util.types.isMap(value)</code>æ˜¯ä¸€ä¸ªéå¸¸å®ç”¨çš„åŠŸèƒ½ï¼Œå®ƒç”¨äºåˆ¤æ–­ç»™å®šçš„å€¼æ˜¯å¦æ˜¯ä¸€ä¸ª Map å¯¹è±¡ã€‚è®©æˆ‘ä»¬ä¸€æ­¥æ­¥æ¥äº†è§£è¿™ä¸ªæ¦‚å¿µã€‚</p><h3 id="ä»€ä¹ˆæ˜¯-map-å¯¹è±¡" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯-map-å¯¹è±¡"><span>ä»€ä¹ˆæ˜¯ Map å¯¹è±¡ï¼Ÿ</span></a></h3><p>é¦–å…ˆï¼Œç†è§£ Map å¯¹è±¡å¾ˆé‡è¦ã€‚Map æ˜¯ JavaScript ä¸­çš„ä¸€ç§é›†åˆç±»å‹ï¼ˆcollectionï¼‰ï¼Œå…è®¸ä½ å­˜å‚¨é”®å€¼å¯¹ï¼ˆkey-value pairsï¼‰ã€‚ä¸æ™®é€šçš„å¯¹è±¡ä¸åŒï¼ŒMap çš„é”®å¯ä»¥æ˜¯ä»»æ„ç±»å‹ï¼ŒåŒ…æ‹¬å‡½æ•°ã€å¯¹è±¡æˆ–ä»»ä½•åŸºæœ¬ç±»å‹ã€‚</p><h3 id="util-types-ismap-value-1" tabindex="-1"><a class="header-anchor" href="#util-types-ismap-value-1"><span><code>util.types.isMap(value)</code></span></a></h3><p>åœ¨ Node.js ä¸­ï¼Œ<code>util.types.isMap(value)</code>æ˜¯ä¸€ä¸ªæ–¹æ³•ï¼Œå®ƒæ¥å—ä¸€ä¸ªå‚æ•°<code>value</code>ï¼Œå¹¶ä¸”è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼ˆBooleanï¼‰ï¼Œå‘Šè¯‰æˆ‘ä»¬è¯¥å€¼æ˜¯å¦ä¸ºä¸€ä¸ª Map å¯¹è±¡ã€‚ç®€å•æ¥è¯´ï¼Œå¦‚æœ<code>value</code>æ˜¯ Map å¯¹è±¡ï¼Œåˆ™è¿”å›<code>true</code>ï¼›å¦åˆ™ï¼Œè¿”å›<code>false</code>ã€‚</p><h3 id="å®é™…è¿ç”¨ç¤ºä¾‹-9" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨ç¤ºä¾‹-9"><span>å®é™…è¿ç”¨ç¤ºä¾‹</span></a></h3><ol><li><p><strong>æ£€æµ‹å˜é‡æ˜¯å¦ä¸º Map å¯¹è±¡</strong></p><p>å‡è®¾ä½ æ­£åœ¨å¼€å‘ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°éœ€è¦å¤„ç†ä¸åŒç±»å‹çš„æ•°æ®ç»“æ„ï¼ŒåŒ…æ‹¬æ•°ç»„ã€å¯¹è±¡å’Œ Map ç­‰ã€‚ä¸ºäº†æ­£ç¡®å¤„ç† Map ç±»å‹çš„æ•°æ®ï¼Œä½ é¦–å…ˆéœ€è¦ç¡®è®¤ä¼ å…¥çš„æ•°æ®æ˜¯å¦ä¸º Map å¯¹è±¡ã€‚</p></li></ol><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" data-title="js" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> myMap</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> Map</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">myMap</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">set</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">key1</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">value1</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">myMap</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">set</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">key2</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">value2</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> myObj</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#88C0D0;">  prop1</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">value1</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#88C0D0;">  prop2</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">value2</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isMap</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">myMap</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡º: true</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isMap</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">myObj</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡º: false</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<code>myMap</code>æ˜¯ä¸€ä¸ª Map å¯¹è±¡ï¼Œè€Œ<code>myObj</code>æ˜¯ä¸€ä¸ªæ™®é€šçš„ JavaScript å¯¹è±¡ã€‚ä½¿ç”¨<code>util.types.isMap()</code>æ–¹æ³•å¯ä»¥å¸®åŠ©æˆ‘ä»¬åŒºåˆ†å®ƒä»¬ã€‚</p><ol start="2"><li><p><strong>å‡½æ•°å‚æ•°éªŒè¯</strong></p><p>å¦‚æœä½ æ­£åœ¨ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°ä¸“é—¨å¤„ç† Map ç±»å‹çš„æ•°æ®ï¼Œé‚£ä¹ˆåœ¨æ‰§è¡Œæ ¸å¿ƒé€»è¾‘ä¹‹å‰ï¼Œæ£€æŸ¥ä¼ å…¥çš„å‚æ•°æ˜¯å¦ç¡®å®ä¸º Map å¯¹è±¡ä¼šæ˜¯ä¸€ä¸ªå¥½ä¹ æƒ¯ã€‚</p></li></ol><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" data-title="js" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">function</span><span style="color:#88C0D0;"> processMap</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">map</span><span style="color:#ECEFF4;">)</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#81A1C1;">!</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isMap</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">map</span><span style="color:#D8DEE9FF;">)) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#81A1C1;">    throw</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> TypeError</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Expected a Map object as the argument</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">  // å¤„ç†Mapå¯¹è±¡çš„é€»è¾‘...</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">try</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#88C0D0;">  processMap</span><span style="color:#D8DEE9FF;">(</span><span style="color:#81A1C1;">new</span><span style="color:#88C0D0;"> Map</span><span style="color:#D8DEE9FF;">())</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#88C0D0;">  processMap</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">{}</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;"> catch</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">e</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">error</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">e</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">message</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡º: Expected a Map object as the argument</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå½“å°è¯•ç”¨ä¸€ä¸ªé Map å¯¹è±¡è°ƒç”¨<code>processMap</code>å‡½æ•°æ—¶ï¼Œä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œæç¤ºæˆ‘ä»¬ä¼ å…¥çš„å‚æ•°ç±»å‹ä¸æ­£ç¡®ã€‚</p><p>é€šè¿‡è¿™äº›ç¤ºä¾‹ï¼Œä½ åº”è¯¥èƒ½å¤Ÿç†è§£åœ¨ Node.js ä¸­<code>util.types.isMap(value)</code>çš„ä½œç”¨å’Œä½¿ç”¨åœºæ™¯äº†ã€‚å®ƒæ˜¯ä¸€ä¸ªå¾ˆæœ‰ç”¨çš„å·¥å…·ï¼Œç‰¹åˆ«æ˜¯å½“ä½ éœ€è¦ç¡®è®¤æŸä¸ªå€¼æ˜¯å¦ä¸º Map å¯¹è±¡æ—¶ã€‚è¿™åœ¨å¤„ç†å¤šç§æ•°æ®ç±»å‹æ—¶å°¤å…¶é‡è¦ï¼Œå› ä¸ºå®ƒå¯ä»¥å¸®åŠ©é¿å…ç±»å‹é”™è¯¯ï¼Œå¹¶ç¡®ä¿ä»£ç çš„å¥å£®æ€§ã€‚</p><h3 id="util-types-ismapiterator-value" tabindex="-1"><a class="header-anchor" href="#util-types-ismapiterator-value"><span><a href="https://nodejs.org/docs/latest/api/util.html#utiltypesismapiteratorvalue" target="_blank" rel="noopener noreferrer">util.types.isMapIterator(value)</a></span></a></h3><p>é¦–å…ˆï¼Œè®©æˆ‘ä»¬ä¸€æ­¥æ­¥æ¥è§£æè¿™ä¸ªæ¦‚å¿µã€‚</p><h3 id="node-js-æ˜¯ä»€ä¹ˆ" tabindex="-1"><a class="header-anchor" href="#node-js-æ˜¯ä»€ä¹ˆ"><span>Node.js æ˜¯ä»€ä¹ˆï¼Ÿ</span></a></h3><p>Node.js æ˜¯ä¸€ä¸ªå¼€æºçš„ã€è·¨å¹³å°çš„è¿è¡Œæ—¶ç¯å¢ƒï¼Œå…è®¸ä½ ä½¿ç”¨ JavaScript æ¥ç¼–å†™æœåŠ¡å™¨ç«¯ä»£ç ã€‚å®ƒé‡‡ç”¨äº†äº‹ä»¶é©±åŠ¨ã€éé˜»å¡å¼ I/O æ¨¡å‹ï¼Œä½¿å…¶è½»é‡åˆé«˜æ•ˆã€‚</p><h3 id="ä»€ä¹ˆæ˜¯-util-æ¨¡å—" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯-util-æ¨¡å—"><span>ä»€ä¹ˆæ˜¯ <code>util</code> æ¨¡å—ï¼Ÿ</span></a></h3><p>åœ¨ Node.js ä¸­ï¼Œ<code>util</code> æ¨¡å—æ˜¯ä¸€ä¸ªæ ¸å¿ƒæ¨¡å—ï¼Œæä¾›äº†ä¸€ç³»åˆ—å®ç”¨å‡½æ•°ã€‚è¿™äº›å‡½æ•°æ‰§è¡Œå„ç§ä¸å­—ç¬¦ä¸²æ ¼å¼åŒ–ã€ç±»å‹æ£€æŸ¥ã€å¯¹è±¡æ£€æŸ¥ç­‰ç›¸å…³çš„ä»»åŠ¡ã€‚ä½ ä¸éœ€è¦å®‰è£…å°±å¯ä»¥ç›´æ¥å¼•å…¥å’Œä½¿ç”¨ã€‚</p><h3 id="util-types-ismapiterator-value-å‡½æ•°" tabindex="-1"><a class="header-anchor" href="#util-types-ismapiterator-value-å‡½æ•°"><span><code>util.types.isMapIterator(value)</code> å‡½æ•°</span></a></h3><p>ç‰¹åˆ«åœ°ï¼Œ<code>util.types.isMapIterator(value)</code> å‡½æ•°æ˜¯ <code>util</code> æ¨¡å—ä¸­çš„ä¸€éƒ¨åˆ†ï¼Œç”¨äºåˆ¤æ–­ç»™å®šçš„å€¼æ˜¯å¦ä¸ºä¸€ä¸ª Map è¿­ä»£å™¨ã€‚Map è¿­ä»£å™¨å…è®¸ä½ æŒ‰ç…§æ’å…¥é¡ºåºéå† Map å¯¹è±¡çš„å…ƒç´ ã€‚ç®€è€Œè¨€ä¹‹ï¼Œæ­¤å‡½æ•°å¸®åŠ©ä½ è¯†åˆ«ä¸€ä¸ªå€¼æ˜¯å¦èƒ½ä»¥ Map é›†åˆçš„è¿­ä»£æ–¹å¼è¢«ä½¿ç”¨ã€‚</p><h3 id="å®é™…åº”ç”¨ç¤ºä¾‹-7" tabindex="-1"><a class="header-anchor" href="#å®é™…åº”ç”¨ç¤ºä¾‹-7"><span>å®é™…åº”ç”¨ç¤ºä¾‹</span></a></h3><p>å‡è®¾ä½ æ­£åœ¨å¼€å‘ä¸€ä¸ª Node.js åº”ç”¨ï¼Œéœ€è¦å¤„ç†å¤šç§ç±»å‹çš„æ•°æ®ç»“æ„ï¼ŒåŒ…æ‹¬æ•°ç»„ã€å¯¹è±¡ã€Map ç­‰ã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä½ å¯èƒ½åªæƒ³å¯¹ Map ç±»å‹çš„æ•°æ®è¿›è¡Œæ“ä½œã€‚è¿™æ—¶ï¼Œ<code>util.types.isMapIterator(value)</code> å°±æ´¾ä¸Šäº†ç”¨åœºã€‚</p><p><strong>ç¤ºä¾‹ 1ï¼šåŸºæœ¬ä½¿ç”¨</strong></p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> map</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> Map</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">map</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">set</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">name</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">Alice</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">map</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">set</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">age</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 25</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> iterator</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> map</span><span style="color:#D8DEE9FF;">[</span><span style="color:#D8DEE9;">Symbol</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">iterator</span><span style="color:#D8DEE9FF;">]()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isMapIterator</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">iterator</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡º: true</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ª Map å¯¹è±¡å¹¶æ·»åŠ äº†ä¸€äº›é”®å€¼å¯¹ã€‚é€šè¿‡ <code>[Symbol.iterator]()</code> æ–¹æ³•ï¼Œæˆ‘ä»¬è·å–äº† Map çš„è¿­ä»£å™¨ã€‚æœ€åï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>util.types.isMapIterator(iterator)</code> å‡½æ•°æ¥æ£€æŸ¥è¿™ä¸ªè¿­ä»£å™¨ç¡®å®æ˜¯ Map ç±»å‹çš„è¿­ä»£å™¨ã€‚</p><p><strong>ç¤ºä¾‹ 2ï¼šåŒºåˆ†ä¸åŒç±»å‹çš„è¿­ä»£å™¨</strong></p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> set</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> Set</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // åˆ›å»ºä¸€ä¸ª Set å¯¹è±¡</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">set</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">add</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Alice</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">set</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">add</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">25</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> setIterator</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> set</span><span style="color:#D8DEE9FF;">[</span><span style="color:#D8DEE9;">Symbol</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">iterator</span><span style="color:#D8DEE9FF;">]()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> map</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> Map</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">map</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">set</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">name</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">Bob</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">map</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">set</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">age</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 30</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> mapIterator</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> map</span><span style="color:#D8DEE9FF;">[</span><span style="color:#D8DEE9;">Symbol</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">iterator</span><span style="color:#D8DEE9FF;">]()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isMapIterator</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">setIterator</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡º: false</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isMapIterator</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">mapIterator</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡º: true</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æ¼”ç¤ºäº†å¦‚ä½•åŒºåˆ† Set å’Œ Map çš„è¿­ä»£å™¨ã€‚å°½ç®¡ Set å’Œ Map åŒæ ·æ‹¥æœ‰è¿­ä»£å™¨ï¼Œ<code>util.types.isMapIterator</code> å‡½æ•°èƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬ç¡®å®šä¸€ä¸ªè¿­ä»£å™¨æ˜¯å¦ä¸“å±äº Mapã€‚</p><h3 id="æ€»ç»“-14" tabindex="-1"><a class="header-anchor" href="#æ€»ç»“-14"><span>æ€»ç»“</span></a></h3><p>é€šè¿‡ <code>util.types.isMapIterator(value)</code> å‡½æ•°ï¼ŒNode.js ä¸ºå¼€å‘è€…æä¾›äº†ä¸€ä¸ªç®€å•çš„æ–¹å¼æ¥éªŒè¯ä¸€ä¸ªå€¼æ˜¯å¦ä¸º Map çš„è¿­ä»£å™¨ã€‚è¿™åœ¨å¤„ç†ä¸åŒç±»å‹çš„æ•°æ®ç»“æ„æ—¶æ˜¯éå¸¸æœ‰ç”¨çš„ï¼Œç‰¹åˆ«æ˜¯å½“ä½ çš„åº”ç”¨éœ€è¦å…·ä½“åŒºåˆ†è¿™äº›ç±»å‹æ—¶ã€‚</p><h3 id="util-types-ismodulenamespaceobject-value" tabindex="-1"><a class="header-anchor" href="#util-types-ismodulenamespaceobject-value"><span><a href="https://nodejs.org/docs/latest/api/util.html#utiltypesismodulenamespaceobjectvalue" target="_blank" rel="noopener noreferrer">util.types.isModuleNamespaceObject(value)</a></span></a></h3><p>ç†è§£<code>util.types.isModuleNamespaceObject(value)</code>ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆç®€è¦äº†è§£å‡ ä¸ªæ¦‚å¿µï¼šNode.jsã€æ¨¡å—ç³»ç»Ÿã€ä»¥åŠ ES Modules (ESM)ã€‚</p><p><strong>Node.js</strong> æ˜¯ä¸€ä¸ªåŸºäº Chrome V8 å¼•æ“çš„ JavaScript è¿è¡Œç¯å¢ƒï¼Œå®ƒå…è®¸ä½ åœ¨æœåŠ¡å™¨ç«¯è¿è¡Œ JavaScript ä»£ç ã€‚Node.js å…·æœ‰éé˜»å¡ I/Oã€äº‹ä»¶é©±åŠ¨ç­‰ç‰¹ç‚¹ï¼Œéå¸¸é€‚åˆå¤„ç†ç½‘ç»œè¯·æ±‚ã€æ–‡ä»¶æ“ä½œç­‰å¼‚æ­¥ä»»åŠ¡ã€‚</p><p>åœ¨ Node.js ä¸­ï¼Œ<strong>æ¨¡å—</strong>æ˜¯æŒ‡å¯ä»¥è¢«å…¶ä»–ç¨‹åºé€šè¿‡<code>require</code> æˆ– <code>import</code> è¯­å¥å¼•å…¥çš„ç‹¬ç«‹åŠŸèƒ½å—ã€‚Node.js æœ‰å®ƒè‡ªå·±çš„ä¸€å¥— CommonJS æ¨¡å—ç³»ç»Ÿï¼Œä½†éšç€æ—¶é—´çš„å‘å±•ï¼ŒECMAScript æ¨¡å—ï¼ˆå³ ES Modules æˆ– ESMï¼‰æˆä¸ºäº† JavaScript å®˜æ–¹çš„æ ‡å‡†æ¨¡å—ç³»ç»Ÿï¼Œå¹¶å¾—åˆ° Node.js çš„æ”¯æŒã€‚</p><p><strong>ES Modules (ESM)</strong> æä¾›äº†ä¸€ä¸ªé™æ€çš„æ¨¡å—ç»“æ„ï¼Œåœ¨ç¼–è¯‘æ—¶å°±ç¡®å®šäº†æ¨¡å—é—´çš„ä¾èµ–å…³ç³»ï¼Œè€Œä¸æ˜¯åœ¨è¿è¡Œæ—¶ã€‚è¿™æ„å‘³ç€ï¼Œä½¿ç”¨ ESMï¼Œå¯¼å…¥å’Œå¯¼å‡ºæ¨¡å—çš„è¯­æ³•æ›´åŠ ç»Ÿä¸€å’Œè§„èŒƒã€‚åœ¨ ESM ä¸­ï¼Œå¯ä»¥ä½¿ç”¨<code>import</code>å’Œ<code>export</code>è¯­å¥æ¥å¯¼å…¥å’Œå¯¼å‡ºæ¨¡å—ã€‚</p><p>å¥½ï¼Œç°åœ¨æˆ‘ä»¬æ¥åˆ°<code>util.types.isModuleNamespaceObject(value)</code>çš„ä¸»é¢˜ä¸Šã€‚è¿™æ˜¯ Node.js æä¾›çš„ä¸€ä¸ªå·¥å…·å‡½æ•°ï¼Œç”¨æ¥åˆ¤æ–­ç»™å®šçš„å€¼æ˜¯å¦æ˜¯ä¸€ä¸ªæ¨¡å—å‘½åç©ºé—´å¯¹è±¡ã€‚é‚£ä¹ˆï¼Œä»€ä¹ˆæ˜¯æ¨¡å—å‘½åç©ºé—´å¯¹è±¡å‘¢ï¼Ÿ</p><p>åœ¨ ESM ä¸­ï¼Œå½“ä½ ä½¿ç”¨<code>import * as name from &#39;someModule&#39;</code>è¿™æ ·çš„è¯­æ³•æ—¶ï¼Œä½ å®é™…ä¸Šæ˜¯å°†<code>someModule</code>æ¨¡å—ä¸­å¯¼å‡ºçš„æ‰€æœ‰å†…å®¹ä½œä¸ºä¸€ä¸ªå¯¹è±¡å¼•å…¥ï¼Œè¿™ä¸ªå¯¹è±¡å°±æ˜¯æ‰€è°“çš„<strong>æ¨¡å—å‘½åç©ºé—´å¯¹è±¡</strong>ã€‚è¿™ä¸ªå¯¹è±¡åŒ…å«äº†ä»æ¨¡å—ä¸­å¯¼å‡ºçš„æ‰€æœ‰ç»‘å®šï¼ˆå˜é‡ã€å‡½æ•°ç­‰ï¼‰ã€‚å› æ­¤ï¼Œ<code>util.types.isModuleNamespaceObject(value)</code>å‡½æ•°çš„ä½œç”¨æ˜¯æ£€æŸ¥æŸä¸ªå€¼æ˜¯å¦æ­£æ˜¯è¿™ç§ç±»å‹çš„å¯¹è±¡ã€‚</p><h3 id="å®é™…è¿ç”¨ç¤ºä¾‹-10" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨ç¤ºä¾‹-10"><span>å®é™…è¿ç”¨ç¤ºä¾‹</span></a></h3><p>å‡è®¾ä½ æ­£åœ¨å¼€å‘ä¸€ä¸ª Node.js é¡¹ç›®ï¼Œå…¶ä¸­å¼•å…¥äº†å¤šä¸ª ES Moduleï¼Œå¹¶ä¸”ä½ æƒ³éªŒè¯æŸäº›å¯¼å…¥æ˜¯å¦æ­£ç¡®åœ°ä½œä¸ºæ¨¡å—å‘½åç©ºé—´å¯¹è±¡è½½å…¥ã€‚è¿™æ—¶ï¼Œ<code>util.types.isModuleNamespaceObject(value)</code>å°±æ´¾ä¸Šç”¨åœºäº†ã€‚</p><ol><li><strong>éªŒè¯æ¨¡å—å¯¹è±¡å¯¼å…¥</strong></li></ol><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#616E88;">// å‡è®¾æœ‰ä¸€ä¸ª ES Module æ–‡ä»¶ namedExports.jsï¼Œå†…å®¹å¦‚ä¸‹ï¼š</span></span>
<span class="line"><span style="color:#81A1C1;">export</span><span style="color:#81A1C1;"> const</span><span style="color:#D8DEE9;"> a</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">Hello</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">export</span><span style="color:#81A1C1;"> function</span><span style="color:#88C0D0;"> b</span><span style="color:#ECEFF4;">()</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  return</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">World</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// åœ¨å¦ä¸€ä¸ªæ–‡ä»¶ä¸­å°è¯•å¯¼å…¥ namedExports.js çš„æ‰€æœ‰å¯¼å‡º</span></span>
<span class="line"><span style="color:#81A1C1;">import</span><span style="color:#81A1C1;"> *</span><span style="color:#81A1C1;"> as</span><span style="color:#8FBCBB;"> myModule</span><span style="color:#81A1C1;"> from</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">./namedExports.js</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// ä½¿ç”¨ util.types.isModuleNamespaceObject() éªŒè¯ myModule æ˜¯å¦æ˜¯æœ‰æ•ˆçš„æ¨¡å—å‘½åç©ºé—´å¯¹è±¡</span></span>
<span class="line"><span style="color:#81A1C1;">import</span><span style="color:#ECEFF4;"> {</span><span style="color:#8FBCBB;"> types</span><span style="color:#ECEFF4;"> }</span><span style="color:#81A1C1;"> from</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isModuleNamespaceObject</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">myModule</span><span style="color:#D8DEE9FF;">)) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">myModule æ˜¯æ¨¡å—å‘½åç©ºé—´å¯¹è±¡</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;"> else</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">myModule ä¸æ˜¯æ¨¡å—å‘½åç©ºé—´å¯¹è±¡</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆåˆ›å»ºäº†ä¸€ä¸ª ES Moduleï¼Œç„¶ååœ¨å¦ä¸€ä¸ªæ–‡ä»¶ä¸­å°†å®ƒçš„æ‰€æœ‰å¯¼å‡ºä½œä¸ºä¸€ä¸ªå‘½åç©ºé—´å¯¹è±¡<code>myModule</code>å¯¼å…¥ã€‚æ¥ç€ï¼Œæˆ‘ä»¬ç”¨<code>util.types.isModuleNamespaceObject(myModule)</code>éªŒè¯è¿™ä¸ªå¯¼å…¥çš„å¯¹è±¡æ˜¯å¦çœŸçš„æ˜¯ä¸€ä¸ªæ¨¡å—å‘½åç©ºé—´å¯¹è±¡ã€‚è¿™å¯¹äºç¡®ä¿ä»£ç çš„æ­£ç¡®æ€§å’Œé¢„æœŸè¡Œä¸ºéå¸¸æœ‰å¸®åŠ©ã€‚</p><p>é€šè¿‡è¿™æ ·çš„æ–¹å¼ï¼Œä½ å¯ä»¥ç¡®ä¿ä½ çš„åº”ç”¨æˆ–åº“æ­£ç¡®åœ°ä½¿ç”¨äº† ES Modulesï¼Œç‰¹åˆ«æ˜¯åœ¨æ¶‰åŠåŠ¨æ€å¯¼å…¥æˆ–å¤æ‚çš„æ¨¡å—äº¤äº’æ—¶ã€‚</p><h3 id="util-types-isnativeerror-value" tabindex="-1"><a class="header-anchor" href="#util-types-isnativeerror-value"><span><a href="https://nodejs.org/docs/latest/api/util.html#utiltypesisnativeerrorvalue" target="_blank" rel="noopener noreferrer">util.types.isNativeError(value)</a></span></a></h3><p>åœ¨è§£é‡Š <code>util.types.isNativeError(value)</code> ä¹‹å‰ï¼Œè®©æˆ‘ä»¬å…ˆç®€å•äº†è§£ä¸€ä¸‹ Node.js ä¸­çš„é”™è¯¯å¤„ç†å’Œ <code>util</code> æ¨¡å—ã€‚</p><p>Node.js ä¸­æœ‰ä¸€ä¸ªæ ¸å¿ƒæ¨¡å—å«åš <code>util</code>ï¼Œå®ƒæä¾›äº†ä¸€ç³»åˆ—å®ç”¨å‡½æ•°ï¼Œè¿™äº›å‡½æ•°å¯¹äºæŸäº›å¸¸è§ä»»åŠ¡æ¥è¯´éå¸¸æ–¹ä¾¿ã€‚å…¶ä¸­ <code>util.types</code> æ˜¯ <code>util</code> çš„ä¸€ä¸ªå­é›†ï¼Œä¸“é—¨ç”¨æ¥æä¾›æ£€æŸ¥å˜é‡ç±»å‹çš„å‡½æ•°ï¼Œæ¯”å¦‚åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯ Promiseã€Buffer æˆ–å…¶ä»–å†…å»ºç±»å‹ã€‚</p><p>ç°åœ¨ï¼Œåˆ°äº†æˆ‘ä»¬çš„ä¸»è§’ â€”â€” <code>util.types.isNativeError(value)</code>ã€‚è¿™ä¸ªå‡½æ•°ç”¨äºåˆ¤æ–­ä¼ å…¥çš„å€¼ï¼ˆ<code>value</code>ï¼‰æ˜¯å¦æ˜¯ä¸€ä¸ªåŸç”Ÿé”™è¯¯ç±»å‹ã€‚æ‰€è°“â€œåŸç”Ÿé”™è¯¯â€ï¼Œå°±æ˜¯æŒ‡ JavaScript è‡ªå¸¦çš„é”™è¯¯ç±»å‹ï¼Œä¾‹å¦‚ <code>Error</code>ã€<code>TypeError</code>ã€<code>SyntaxError</code> ç­‰ã€‚</p><h3 id="ä¸ºä»€ä¹ˆéœ€è¦-isnativeerror" tabindex="-1"><a class="header-anchor" href="#ä¸ºä»€ä¹ˆéœ€è¦-isnativeerror"><span>ä¸ºä»€ä¹ˆéœ€è¦ <code>isNativeError</code>?</span></a></h3><p>åœ¨ JavaScript ç¼–ç¨‹ä¸­ï¼Œé”™è¯¯å¤„ç†æ˜¯éå¸¸é‡è¦çš„éƒ¨åˆ†ã€‚å½“ä½ çš„ä»£ç å‡ºç°é—®é¢˜æ—¶ï¼ŒJavaScript ä¼šæŠ›å‡ºï¼ˆthrowï¼‰ä¸€ä¸ªé”™è¯¯ï¼Œä½ å¯ä»¥æ•è·ï¼ˆcatchï¼‰è¿™ä¸ªé”™è¯¯å¹¶æ®æ­¤åšå‡ºç›¸åº”çš„å¤„ç†ã€‚ä½†æ˜¯ï¼Œéšç€é¡¹ç›®å¤æ‚åº¦çš„å¢åŠ ï¼Œä½ å¯èƒ½ä¼šé‡åˆ°å¤šç§ä¸åŒç±»å‹çš„é”™è¯¯ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºåŸç”Ÿé”™è¯¯ã€‚æœ‰æ—¶å€™ï¼Œä½ å¯èƒ½éœ€è¦åŒºåˆ†ä¸€ä¸ªé”™è¯¯æ˜¯ä¸æ˜¯åŸç”Ÿé”™è¯¯ï¼Œä»¥å†³å®šé‡‡å–ä½•ç§æ–¹å¼å¤„ç†å®ƒã€‚è¿™æ—¶å€™ï¼Œ<code>util.types.isNativeError(value)</code> å°±æ´¾ä¸Šç”¨åœºäº†ã€‚</p><h3 id="å®é™…è¿ç”¨ç¤ºä¾‹-11" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨ç¤ºä¾‹-11"><span>å®é™…è¿ç”¨ç¤ºä¾‹</span></a></h3><ol><li><strong>é”™è¯¯æ—¥å¿—è®°å½•</strong>ï¼šå¦‚æœä½ æ­£åœ¨ç¼–å†™ä¸€ä¸ªéœ€è¦è®°å½•é”™è¯¯æ—¥å¿—çš„åº”ç”¨ï¼Œä½¿ç”¨ <code>isNativeError</code> å¯ä»¥å¸®åŠ©ä½ åŒºåˆ†å“ªäº›é”™è¯¯æ˜¯åŸç”Ÿé”™è¯¯ã€‚è¿™æ ·ä½ å¯èƒ½ä¼šé€‰æ‹©åªè®°å½•åŸç”Ÿé”™è¯¯çš„è¯¦ç»†ä¿¡æ¯ï¼Œè€Œå¯¹äºéåŸç”Ÿé”™è¯¯åˆ™ç®€å•è®°å½•æˆ–è€…åˆ†ç±»å¤„ç†ã€‚</li></ol><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">function</span><span style="color:#88C0D0;"> logError</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">error</span><span style="color:#ECEFF4;">)</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isNativeError</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">error</span><span style="color:#D8DEE9FF;">)) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">error</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">åŸç”Ÿé”™è¯¯:</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> error</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span><span style="color:#81A1C1;"> else</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">error</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">éåŸç”Ÿé”™è¯¯:</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> error</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">try</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#616E88;">  // æ¨¡æ‹Ÿä¸€æ®µå¯èƒ½æŠ›å‡ºåŸç”Ÿé”™è¯¯çš„ä»£ç </span></span>
<span class="line"><span style="color:#D8DEE9;">  JSON</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">parse</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">{this is not valid JSON}</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;"> catch</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">error</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#88C0D0;">  logError</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">error</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li><strong>é”™è¯¯å¤„ç†ç­–ç•¥</strong>ï¼šåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä½ å¯èƒ½æƒ³æ ¹æ®é”™è¯¯çš„ç±»å‹æ¥å†³å®šé‡‡å–ä½•ç§æ¢å¤ç­–ç•¥ã€‚æ¯”å¦‚ï¼Œé’ˆå¯¹åŸç”Ÿçš„ç±»å‹é”™è¯¯ï¼ˆ<code>TypeError</code>ï¼‰ï¼Œä½ å¯èƒ½ä¼šå°è¯•ä¸€ç§å¤‡é€‰é€»è¾‘ï¼Œè€Œå¯¹äºè‡ªå®šä¹‰é”™è¯¯ï¼Œåˆ™ç›´æ¥æŠ›å‡ºæˆ–è€…æç¤ºç”¨æˆ·ã€‚</li></ol><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">function</span><span style="color:#88C0D0;"> handleRequest</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">data</span><span style="color:#ECEFF4;">)</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  try</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#616E88;">    // å‡è®¾è¿™é‡Œæ˜¯å¤„ç†æŸç§æ•°æ®çš„é€»è¾‘ï¼Œå¯èƒ½ä¼šæŠ›å‡º TypeError</span></span>
<span class="line"><span style="color:#81A1C1;">    if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#81A1C1;">typeof</span><span style="color:#D8DEE9;"> data</span><span style="color:#81A1C1;"> !==</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">string</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#81A1C1;">      throw</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> TypeError</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">æ•°æ®å¿…é¡»æ˜¯å­—ç¬¦ä¸²ç±»å‹</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">    }</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span><span style="color:#81A1C1;"> catch</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">error</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#81A1C1;">    if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isNativeError</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">error</span><span style="color:#D8DEE9FF;">) </span><span style="color:#81A1C1;">&amp;&amp;</span><span style="color:#D8DEE9;"> error</span><span style="color:#81A1C1;"> instanceof</span><span style="color:#D8DEE9FF;"> TypeError) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">      console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">å°è¯•ä½¿ç”¨å¤‡é€‰é€»è¾‘å¤„ç†è¯·æ±‚...</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#616E88;">      // è¿™é‡Œå¯ä»¥å†™ä¸€äº›å¤‡é€‰é€»è¾‘</span></span>
<span class="line"><span style="color:#ECEFF4;">    }</span><span style="color:#81A1C1;"> else</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">      console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">æ— æ³•å¤„ç†çš„é”™è¯¯:</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> error</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#616E88;">      // å¯¹äºé TypeError çš„é”™è¯¯ï¼Œå¯èƒ½ç›´æ¥æŠ›å‡ºæˆ–è€…å‘ŠçŸ¥ç”¨æˆ·</span></span>
<span class="line"><span style="color:#ECEFF4;">    }</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88C0D0;">handleRequest</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">123</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // æ˜¾ç„¶ä¸æ˜¯å­—ç¬¦ä¸²ï¼Œå°†è§¦å‘ TypeError</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é€šè¿‡è¿™äº›ç¤ºä¾‹ï¼Œä½ å¯ä»¥çœ‹åˆ° <code>util.types.isNativeError(value)</code> åœ¨é”™è¯¯å¤„ç†å’Œå†³ç­–ä¸­çš„å®é™…åº”ç”¨ã€‚å®ƒæ˜¯ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„å·¥å…·ï¼Œç‰¹åˆ«æ˜¯åœ¨ä½ éœ€è¦å¯¹ä¸åŒç±»å‹çš„é”™è¯¯è¿›è¡Œç²¾ç»†åŒ–ç®¡ç†æ—¶ã€‚</p><h3 id="util-types-isnumberobject-value" tabindex="-1"><a class="header-anchor" href="#util-types-isnumberobject-value"><span><a href="https://nodejs.org/docs/latest/api/util.html#utiltypesisnumberobjectvalue" target="_blank" rel="noopener noreferrer">util.types.isNumberObject(value)</a></span></a></h3><p>å½“ä½ å¼€å§‹ç¼–ç¨‹ï¼Œå°¤å…¶æ˜¯åœ¨ JavaScript ä¸–ç•Œä¸­ï¼Œä½ ä¼šé‡åˆ°å„ç§æ•°æ®ç±»å‹ã€‚é€šå¸¸ï¼Œæˆ‘ä»¬å¤„ç†çš„æ•°æ®å¯ä»¥å¤§è‡´åˆ†ä¸ºä¸¤å¤§ç±»ï¼šåŸºæœ¬æ•°æ®ç±»å‹å’Œå¯¹è±¡æ•°æ®ç±»å‹ã€‚åŸºæœ¬æ•°æ®ç±»å‹åŒ…æ‹¬æ•°å­—ï¼ˆnumberï¼‰ã€å­—ç¬¦ä¸²ï¼ˆstringï¼‰ã€å¸ƒå°”å€¼ï¼ˆbooleanï¼‰ç­‰ï¼Œè€Œå¯¹è±¡æ•°æ®ç±»å‹åˆ™åŒ…æ‹¬æ•°ç»„ã€å‡½æ•°ä»¥åŠæ›´å¤æ‚çš„å¯¹è±¡ã€‚</p><p>åœ¨ JavaScript ä¸­ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦åŒºåˆ†ä¸€ä¸ªå€¼æ˜¯ä¸æ˜¯â€œæ•°å­—å¯¹è±¡â€ï¼Œè€Œä¸ä»…ä»…æ˜¯ä¸€ä¸ªæ™®é€šçš„æ•°å­—ï¼ˆåŸºæœ¬æ•°æ®ç±»å‹ï¼‰ã€‚è¿™å°±æ˜¯<code>util.types.isNumberObject(value)</code>çš„ç”¨æ­¦ä¹‹åœ°ã€‚å®ƒæ˜¯ Node.js æä¾›çš„ä¸€ä¸ªå·¥å…·å‡½æ•°ï¼Œå¸®åŠ©æˆ‘ä»¬åˆ¤æ–­ä¸€ä¸ªå€¼æ˜¯å¦ä¸ºä¸€ä¸ª Number å¯¹è±¡ã€‚</p><h3 id="ä»€ä¹ˆæ˜¯-number-å¯¹è±¡" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯-number-å¯¹è±¡"><span>ä»€ä¹ˆæ˜¯ Number å¯¹è±¡ï¼Ÿ</span></a></h3><p>åœ¨ JavaScript é‡Œï¼Œä½ å¯ä»¥å°†æ•°å­—å®šä¹‰ä¸ºç®€å•çš„æ•°å­—å½¢å¼ï¼Œå¦‚<code>let num = 123;</code>ï¼Œè¿™é‡Œçš„<code>num</code>æ˜¯ä¸€ä¸ªåŸºæœ¬æ•°æ®ç±»å‹çš„æ•°å­—ã€‚åŒæ—¶ï¼ŒJavaScript ä¹Ÿå…è®¸ä½ é€šè¿‡æ„é€ å‡½æ•°åˆ›å»ºä¸€ä¸ªæ•°å­—å¯¹è±¡ï¼Œä¾‹å¦‚<code>let numObj = new Number(123);</code>ã€‚è™½ç„¶<code>num</code>å’Œ<code>numObj</code>çœ‹èµ·æ¥å‚¨å­˜äº†ç›¸åŒçš„æ•°å€¼ï¼Œä½†å®ƒä»¬åœ¨ JavaScript å†…éƒ¨è¢«è§†ä¸ºä¸åŒçš„ç±»å‹ã€‚<code>num</code>æ˜¯åŸºæœ¬æ•°æ®ç±»å‹çš„æ•°å­—ï¼Œè€Œ<code>numObj</code>æ˜¯ä¸€ä¸ªæ•°å­—å¯¹è±¡ã€‚</p><h3 id="util-types-isnumberobject-value-çš„ä½œç”¨" tabindex="-1"><a class="header-anchor" href="#util-types-isnumberobject-value-çš„ä½œç”¨"><span>util.types.isNumberObject(value)çš„ä½œç”¨</span></a></h3><p><code>util.types.isNumberObject(value)</code>å‡½æ•°çš„ä½œç”¨å°±æ˜¯å¸®ä½ è¯†åˆ«ä¼ å…¥çš„å€¼æ˜¯å¦ä¸ºä¸€ä¸ªæ•°å­—å¯¹è±¡ã€‚å¦‚æœæ˜¯ï¼Œå®ƒè¿”å›<code>true</code>ï¼›å¦‚æœä¸æ˜¯ï¼Œå®ƒè¿”å›<code>false</code>ã€‚</p><h3 id="ä½¿ç”¨å®ä¾‹" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨å®ä¾‹"><span>ä½¿ç”¨å®ä¾‹ï¼š</span></a></h3><p>å‡è®¾ä½ æ­£åœ¨ç¼–å†™ä¸€ä¸ªç¨‹åºï¼Œè¿™ä¸ªç¨‹åºéœ€è¦åŒºåˆ†å¤„ç†åŸºæœ¬æ•°æ®ç±»å‹çš„æ•°å­—å’Œæ•°å­—å¯¹è±¡ã€‚è¿™æ—¶å€™ï¼Œ<code>util.types.isNumberObject</code>å°±æ˜¾å¾—éå¸¸æœ‰ç”¨ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> num</span><span style="color:#81A1C1;"> =</span><span style="color:#B48EAD;"> 123</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // åŸºæœ¬æ•°æ®ç±»å‹çš„æ•°å­—</span></span>
<span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> numObj</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> Number</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">123</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // æ•°å­—å¯¹è±¡</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isNumberObject</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">num</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡ºï¼šfalse</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isNumberObject</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">numObj</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡ºï¼štrue</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="å®é™…åº”ç”¨åœºæ™¯-4" tabindex="-1"><a class="header-anchor" href="#å®é™…åº”ç”¨åœºæ™¯-4"><span>å®é™…åº”ç”¨åœºæ™¯</span></a></h3><ol><li><strong>æ•°æ®éªŒè¯</strong>ï¼šå¦‚æœä½ çš„å‡½æ•°ä»…æ¥å—æ•°å­—å¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œä½¿ç”¨æ­¤æ–¹æ³•å¯ä»¥å¸®åŠ©ä½ éªŒè¯è¾“å…¥å‚æ•°æ˜¯å¦ç¬¦åˆé¢„æœŸã€‚</li><li><strong>API å¼€å‘</strong>ï¼šåœ¨å¼€å‘ API æ—¶ï¼Œå¯èƒ½éœ€è¦å¯¹æ¥æ”¶åˆ°çš„è¯·æ±‚æ•°æ®è¿›è¡Œç±»å‹æ ¡éªŒï¼Œä»¥ç¡®ä¿æ•°æ®æ ¼å¼çš„æ­£ç¡®æ€§å’Œä¸€è‡´æ€§ã€‚</li><li><strong>æ¡†æ¶å¼€å‘</strong>ï¼šåœ¨å¼€å‘ä¸€äº›éœ€è¦é«˜åº¦æŠ½è±¡å’Œä¸¥æ ¼æ•°æ®ç®¡ç†çš„æ¡†æ¶æ—¶ï¼Œå‡†ç¡®åœ°ç†è§£å’Œæ“ä½œä¸åŒç±»å‹çš„æ•°æ®å˜å¾—å°¤ä¸ºé‡è¦ã€‚</li></ol><p>äº†è§£å¹¶ä½¿ç”¨<code>util.types.isNumberObject</code>ï¼Œæœ‰åŠ©äºä½ åœ¨ JavaScript æˆ– Node.js å¼€å‘è¿‡ç¨‹ä¸­æ›´ç²¾ç¡®åœ°æ§åˆ¶å’Œç†è§£æ•°æ®ç±»å‹ï¼Œä»è€Œç¼–å†™å‡ºæ›´å¥å£®ã€æ›´å¯é çš„ä»£ç ã€‚</p><h3 id="util-types-ispromise-value" tabindex="-1"><a class="header-anchor" href="#util-types-ispromise-value"><span><a href="https://nodejs.org/docs/latest/api/util.html#utiltypesispromisevalue" target="_blank" rel="noopener noreferrer">util.types.isPromise(value)</a></span></a></h3><p>å½“æˆ‘ä»¬åœ¨ç¼–ç¨‹è¿‡ç¨‹ä¸­ï¼Œå°¤å…¶æ˜¯åœ¨ä½¿ç”¨ JavaScript æ—¶ï¼Œä¼šé¢‘ç¹åœ°å¤„ç†å¼‚æ­¥æ“ä½œã€‚Promise å¯¹è±¡æ˜¯å¤„ç†è¿™ç±»å¼‚æ­¥æ“ä½œçš„å¸¸è§æ–¹å¼ä¹‹ä¸€ã€‚äº†è§£ä¸€ä¸ªå˜é‡æ˜¯å¦æ˜¯ Promise å¯¹è±¡å¯¹äºæ­£ç¡®å¤„ç†å¼‚æ­¥ç»“æœè‡³å…³é‡è¦ã€‚è¿™å°±æ˜¯<code>util.types.isPromise(value)</code>æ–¹æ³•çš„ç”¨é€”æ‰€åœ¨ã€‚åœ¨ Node.js ä¸­ï¼Œè¿™ä¸ªæ–¹æ³•å¸®åŠ©ä½ ç¡®å®šä¸€ä¸ªå€¼æ˜¯å¦æ˜¯ Promise å¯¹è±¡ã€‚</p><p>é¦–å…ˆï¼Œè®©æˆ‘ä»¬ç®€å•äº†è§£ä¸‹ä»€ä¹ˆæ˜¯ Promise å¯¹è±¡ã€‚Promise æ˜¯ JavaScript ä¸­ç”¨äºå¼‚æ­¥ç¼–ç¨‹çš„å¯¹è±¡ï¼Œå®ƒä»£è¡¨äº†ä¸€ä¸ªæœ€ç»ˆå°†å®Œæˆï¼ˆfulfillï¼‰æˆ–å¤±è´¥ï¼ˆrejectï¼‰çš„æ“ä½œå’Œå®ƒçš„ç»“æœå€¼ã€‚ç®€å•æ¥è¯´ï¼ŒPromise å°±æ˜¯ä¸€ä¸ªæ‰¿è¯ºï¼šæˆ‘ç°åœ¨ä¸çŸ¥é“è¿™ä¸ªæ“ä½œçš„ç»“æœï¼Œä½†æˆ‘æ‰¿è¯ºæœªæ¥ä¼šå‘Šè¯‰ä½ ç»“æœæ˜¯ä»€ä¹ˆã€‚</p><p>åœ¨ Node.js v21.7.1 ç‰ˆæœ¬ä¸­ï¼Œ<code>util.types.isPromise(value)</code>æ–¹æ³•æä¾›äº†ä¸€ç§ç®€å•çš„æ–¹å¼æ¥æ£€æµ‹ä¸€ä¸ªå€¼æ˜¯å¦ä¸º Promise å¯¹è±¡ã€‚å…·ä½“æ¥è¯´ï¼Œè¿™ä¸ªæ–¹æ³•æ¥æ”¶ä¸€ä¸ªå‚æ•°<code>value</code>ï¼Œå¹¶è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼ˆ<code>true</code>æˆ–<code>false</code>ï¼‰ï¼Œè¡¨ç¤ºè¯¥å€¼æ˜¯å¦ä¸º Promise å¯¹è±¡ã€‚</p><h3 id="å®é™…è¿ç”¨ä¾‹å­-12" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨ä¾‹å­-12"><span>å®é™…è¿ç”¨ä¾‹å­</span></a></h3><h4 id="æ£€æµ‹å€¼æ˜¯å¦ä¸º-promise" tabindex="-1"><a class="header-anchor" href="#æ£€æµ‹å€¼æ˜¯å¦ä¸º-promise"><span>æ£€æµ‹å€¼æ˜¯å¦ä¸º Promise</span></a></h4><p>å‡è®¾ä½ æ­£åœ¨ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°éœ€è¦å¤„ç†ä¼ å…¥çš„å‚æ•°ã€‚å¦‚æœè¿™ä¸ªå‚æ•°æ˜¯ä¸€ä¸ª Promiseï¼Œä½ å¯èƒ½æƒ³è¦ç­‰å¾…å®ƒè§£å†³åå†ç»§ç»­ï¼›å¦‚æœä¸æ˜¯ï¼Œä½ å¯èƒ½å°±ç›´æ¥ä½¿ç”¨è¿™ä¸ªå€¼ã€‚è¿™é‡Œ<code>util.types.isPromise(value)</code>å°±æ´¾ä¸Šäº†ç”¨åœºï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">async</span><span style="color:#81A1C1;"> function</span><span style="color:#88C0D0;"> handleValue</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">value</span><span style="color:#ECEFF4;">)</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isPromise</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">value</span><span style="color:#D8DEE9FF;">)) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Value is a Promise. Waiting for it to resolve...</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">    value</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> await</span><span style="color:#D8DEE9;"> value</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // ç­‰å¾…Promiseè§£å†³</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Promise resolved with:</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> value</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span><span style="color:#81A1C1;"> else</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Value is not a Promise. Using the value directly:</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> value</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªè¿”å›Promiseçš„å‡½æ•°</span></span>
<span class="line"><span style="color:#81A1C1;">function</span><span style="color:#88C0D0;"> fetchUser</span><span style="color:#ECEFF4;">()</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  return</span><span style="color:#81A1C1;"> new</span><span style="color:#8FBCBB;"> Promise</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">resolve</span><span style="color:#ECEFF4;">)</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#88C0D0;">    setTimeout</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">()</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#88C0D0;"> resolve</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">{</span><span style="color:#88C0D0;"> name</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">John Doe</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#88C0D0;"> age</span><span style="color:#ECEFF4;">:</span><span style="color:#B48EAD;"> 30</span><span style="color:#ECEFF4;"> }</span><span style="color:#D8DEE9FF;">)</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 1000</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// ä½¿ç”¨handleValueå‡½æ•°</span></span>
<span class="line"><span style="color:#88C0D0;">handleValue</span><span style="color:#D8DEE9FF;">(</span><span style="color:#88C0D0;">fetchUser</span><span style="color:#D8DEE9FF;">())</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // Value is a Promise. Waiting for it to resolve...</span></span>
<span class="line"><span style="color:#88C0D0;">handleValue</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">42</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // Value is not a Promise. Using the value directly: 42</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<code>fetchUser</code>å‡½æ•°è¿”å›ä¸€ä¸ª Promise å¯¹è±¡ï¼Œæ¨¡æ‹Ÿäº†å¼‚æ­¥è·å–ç”¨æˆ·ä¿¡æ¯çš„è¿‡ç¨‹ã€‚å½“æˆ‘ä»¬è°ƒç”¨<code>handleValue</code>å‡½æ•°å¹¶ä¼ å…¥<code>fetchUser()</code>çš„è¿”å›å€¼æ—¶ï¼Œ<code>util.types.isPromise</code>èƒ½å¤Ÿè¯†åˆ«å‡ºè¿™æ˜¯ä¸€ä¸ª Promiseï¼Œå¹¶è¾“å‡ºç›¸åº”çš„æ—¥å¿—ï¼Œç„¶åç­‰å¾… Promise è§£å†³ã€‚å½“æˆ‘ä»¬ä¼ å…¥ä¸€ä¸ªé Promise å€¼ï¼ˆå¦‚æ•°å­— 42ï¼‰æ—¶ï¼Œå®ƒåˆ™ç›´æ¥ä½¿ç”¨è¿™ä¸ªå€¼ã€‚</p><p>é€šè¿‡è¿™æ ·çš„æ–¹å¼ï¼Œ<code>util.types.isPromise(value)</code>æ–¹æ³•èƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬åŒºåˆ†å¤„ç†å¼‚æ­¥æ“ä½œå’ŒåŒæ­¥å€¼ï¼Œä»è€Œç¼–å†™å‡ºæ›´åŠ å¥å£¯å’Œæ˜“äºç†è§£çš„ä»£ç ã€‚</p><h3 id="util-types-isproxy-value" tabindex="-1"><a class="header-anchor" href="#util-types-isproxy-value"><span><a href="https://nodejs.org/docs/latest/api/util.html#utiltypesisproxyvalue" target="_blank" rel="noopener noreferrer">util.types.isProxy(value)</a></span></a></h3><p>äº†è§£ <code>util.types.isProxy(value)</code> çš„åŠŸèƒ½ï¼Œé¦–å…ˆè¦æ˜ç™½ JavaScript ä¸­çš„ä»£ç†ï¼ˆProxyï¼‰æ¦‚å¿µã€‚åœ¨ JavaScript ä¸­ï¼Œ<code>Proxy</code> æ˜¯ä¸€ç§ç‰¹æ®Šçš„å¯¹è±¡ï¼Œå®ƒå…è®¸ä½ å®šä¹‰ä¸€äº›æ“ä½œçš„è‡ªå®šä¹‰è¡Œä¸ºï¼ˆæ¯”å¦‚å±æ€§è¯»å–ã€èµ‹å€¼ã€æšä¸¾ã€å‡½æ•°è°ƒç”¨ç­‰ï¼‰ï¼ŒåŸºæœ¬ä¸Šæ˜¯å½“ä½ å°è¯•å¯¹è¿™ä¸ªå¯¹è±¡è¿›è¡Œå„ç§æ“ä½œæ—¶ï¼Œä½ å¯ä»¥æ§åˆ¶å¹¶æ”¹å˜è¿™äº›æ“ä½œçš„é»˜è®¤è¡Œä¸ºã€‚</p><p>ç°åœ¨æ¥çœ‹ <code>util.types.isProxy(value)</code>ã€‚è¿™ä¸ªæ–¹æ³•æ˜¯ Node.js æä¾›çš„ä¸€ä¸ªå·¥å…·å‡½æ•°ï¼Œç”¨äºæ£€æŸ¥ä¸€ä¸ªç»™å®šçš„å€¼æ˜¯å¦æ˜¯ä¸€ä¸ª Proxy å¯¹è±¡ã€‚å¦‚æœæ˜¯ï¼Œå®ƒä¼šè¿”å› <code>true</code>ï¼Œå¦åˆ™è¿”å› <code>false</code>ã€‚</p><h3 id="å®é™…è¿ç”¨-6" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨-6"><span>å®é™…è¿ç”¨</span></a></h3><h4 id="_1-åˆ¤æ–­å¯¹è±¡æ˜¯å¦è¢«ä»£ç†" tabindex="-1"><a class="header-anchor" href="#_1-åˆ¤æ–­å¯¹è±¡æ˜¯å¦è¢«ä»£ç†"><span>1. åˆ¤æ–­å¯¹è±¡æ˜¯å¦è¢«ä»£ç†</span></a></h4><p>å‡è®¾åœ¨ä¸€ä¸ªå¤æ‚çš„åº”ç”¨ä¸­ï¼Œä½ æ¥æ‰‹äº†ä¸€æ®µä»£ç ï¼Œè€Œè¿™æ®µä»£ç é‡Œæœ‰å¤§é‡ä½¿ç”¨äº† Proxy æ¥å®ç°å„ç§é€»è¾‘ã€‚åœ¨è°ƒè¯•æˆ–è€…æ‰©å±•åŠŸèƒ½æ—¶ï¼Œå¯èƒ½éœ€è¦åˆ¤æ–­æŸä¸ªå¯¹è±¡æ˜¯å¦æ˜¯ä¸€ä¸ª Proxyï¼Œä»¥å†³å®šå¯¹å®ƒçš„å¤„ç†æ–¹å¼ã€‚è¿™æ—¶ï¼Œ<code>util.types.isProxy(value)</code> å°±æ´¾ä¸Šäº†ç”¨åœºã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// åˆ›å»ºä¸€ä¸ªæ™®é€šå¯¹è±¡</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> target</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> {}</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// ä½¿ç”¨Proxyåˆ›å»ºä¸€ä¸ªä»£ç†å¯¹è±¡</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> handler</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#88C0D0;">  get</span><span style="color:#ECEFF4;">:</span><span style="color:#81A1C1;"> function</span><span style="color:#ECEFF4;"> (</span><span style="color:#D8DEE9;">obj</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> prop</span><span style="color:#ECEFF4;">)</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">    return</span><span style="color:#D8DEE9;"> prop</span><span style="color:#81A1C1;"> in</span><span style="color:#D8DEE9;"> obj</span><span style="color:#81A1C1;"> ?</span><span style="color:#D8DEE9;"> obj</span><span style="color:#D8DEE9FF;">[</span><span style="color:#D8DEE9;">prop</span><span style="color:#D8DEE9FF;">] </span><span style="color:#81A1C1;">:</span><span style="color:#B48EAD;"> 37</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  },</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> proxy</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> Proxy</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">target</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> handler</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isProxy</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">target</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡ºï¼šfalse</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isProxy</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">proxy</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡ºï¼štrue</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-å®‰å…¨æ€§å’Œè°ƒè¯•" tabindex="-1"><a class="header-anchor" href="#_2-å®‰å…¨æ€§å’Œè°ƒè¯•"><span>2. å®‰å…¨æ€§å’Œè°ƒè¯•</span></a></h4><p>åœ¨å¼€å‘æ¶‰åŠå®‰å…¨æ€§è¾ƒé«˜çš„åº”ç”¨æ—¶ï¼Œæ£€æµ‹æŸäº›å…³é”®æ•°æ®ç»“æ„æ˜¯å¦è¢«ä»£ç†ï¼Œå¯èƒ½æ˜¯ä¸€ä¸ªé‡è¦çš„å®‰å…¨æªæ–½ã€‚é€šè¿‡ä½¿ç”¨ <code>util.types.isProxy()</code>ï¼Œå¼€å‘è€…å¯ä»¥ç¡®ä¿æ•°æ®æ²¡æœ‰è¢«æœªæˆæƒçš„ä»£ç†åŒ…è£…ï¼Œä»è€Œé¿å…æ½œåœ¨çš„å®‰å…¨é£é™©ã€‚</p><p>åŒæ—¶ï¼Œåœ¨è°ƒè¯•é˜¶æ®µï¼Œ<code>util.types.isProxy()</code> å¯ä»¥å¸®åŠ©å¼€å‘è€…å¿«é€Ÿè¯†åˆ«å‡ºé—®é¢˜æ‰€åœ¨ï¼Œå°¤å…¶æ˜¯å½“æŸäº›ä¸ç¬¦åˆé¢„æœŸçš„è¡Œä¸ºå¯èƒ½ç”±éšè—çš„ä»£ç†å¼•èµ·æ—¶ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> securityObject</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#616E88;">  /* æ•æ„Ÿæ“ä½œ */</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isProxy</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">securityObject</span><span style="color:#D8DEE9FF;">)) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">error</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Security warning: object is being proxied!</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æ€»ç»“-15" tabindex="-1"><a class="header-anchor" href="#æ€»ç»“-15"><span>æ€»ç»“</span></a></h3><p>ç®€è€Œè¨€ä¹‹ï¼Œ<code>util.types.isProxy(value)</code> æ˜¯ Node.js æä¾›çš„ä¸€ä¸ªå®ç”¨å·¥å…·å‡½æ•°ï¼Œç”¨äºåˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦ä¸º Proxyã€‚äº†è§£å’Œä½¿ç”¨è¿™ä¸ªæ–¹æ³•ï¼Œå¯ä»¥å¸®åŠ©ä½ åœ¨éœ€è¦æ—¶æ­£ç¡®å¤„ç† Proxy å¯¹è±¡ï¼Œæ— è®ºæ˜¯åœ¨æ·±å…¥ç†è§£ä»£ç çš„è¡Œä¸ºè¿˜æ˜¯ç¡®ä¿åº”ç”¨çš„å®‰å…¨æ€§æ–¹é¢éƒ½éå¸¸æœ‰ç”¨ã€‚</p><h3 id="util-types-isregexp-value" tabindex="-1"><a class="header-anchor" href="#util-types-isregexp-value"><span><a href="https://nodejs.org/docs/latest/api/util.html#utiltypesisregexpvalue" target="_blank" rel="noopener noreferrer">util.types.isRegExp(value)</a></span></a></h3><p>å¾ˆå¥½ï¼Œè®©æˆ‘ä»¬ä¸€èµ·æ¢ç´¢ <code>util.types.isRegExp(value)</code> è¿™ä¸ªåŠŸèƒ½åœ¨ Node.js ä¸­çš„ä½œç”¨å’Œåº”ç”¨ã€‚</p><h3 id="ä»€ä¹ˆæ˜¯-regexp" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯-regexp"><span>ä»€ä¹ˆæ˜¯ RegExpï¼Ÿ</span></a></h3><p>é¦–å…ˆï¼Œäº†è§£ä¸€ä¸‹ RegExpã€‚RegExp æŒ‡çš„æ˜¯æ­£åˆ™è¡¨è¾¾å¼ï¼ˆRegular Expressionï¼‰ï¼Œå®ƒæ˜¯ä¸€ç§æ–‡æœ¬æ¨¡å¼ï¼ŒåŒ…å«æ™®é€šå­—ç¬¦ï¼ˆä¾‹å¦‚ <code>/a/</code> åŒ¹é… &quot;a&quot;ï¼‰å’Œç‰¹æ®Šå­—ç¬¦ï¼Œç§°ä¸º&quot;å…ƒå­—ç¬¦&quot;ï¼ˆä¾‹å¦‚ <code>/a*/</code> è¡¨ç¤ºåŒ¹é… 0 æ¬¡æˆ–å¤šæ¬¡ &quot;a&quot;ï¼‰ã€‚è¿™ç§æ¨¡å¼ç”¨äºå­—ç¬¦ä¸²æœç´¢å’Œæ›¿æ¢ç­‰æ“ä½œã€‚</p><h3 id="util-types-isregexp-value-æ˜¯ä»€ä¹ˆ" tabindex="-1"><a class="header-anchor" href="#util-types-isregexp-value-æ˜¯ä»€ä¹ˆ"><span>util.types.isRegExp(value) æ˜¯ä»€ä¹ˆï¼Ÿ</span></a></h3><p>åœ¨ Node.js ä¸­ï¼Œ<code>util.types.isRegExp(value)</code> æ˜¯ä¸€ä¸ªæ–¹æ³•ï¼Œç”¨äºæ£€æŸ¥ä¸€ä¸ªå€¼æ˜¯å¦ä¸ºæ­£åˆ™è¡¨è¾¾å¼å¯¹è±¡ã€‚è¯¥æ–¹æ³•å±äº <code>util</code> æ¨¡å—çš„ <code>types</code> å‘½åç©ºé—´ä¸­ã€‚</p><p>å¦‚æœä¼ å…¥çš„å€¼æ˜¯ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼å¯¹è±¡ï¼Œ<code>isRegExp</code> æ–¹æ³•ä¼šè¿”å› <code>true</code>ï¼Œå¦åˆ™è¿”å› <code>false</code>ã€‚</p><h3 id="å¦‚ä½•ä½¿ç”¨-5" tabindex="-1"><a class="header-anchor" href="#å¦‚ä½•ä½¿ç”¨-5"><span>å¦‚ä½•ä½¿ç”¨?</span></a></h3><p>é¦–å…ˆï¼Œä½ éœ€è¦å¼•å…¥ <code>util</code> æ¨¡å—ï¼Œç„¶åä½¿ç”¨ <code>isRegExp</code> æ–¹æ³•ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// åˆ›å»ºä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼å¯¹è±¡</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> regex</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> /</span><span style="color:#EBCB8B;">ab</span><span style="color:#81A1C1;">+</span><span style="color:#EBCB8B;">c</span><span style="color:#ECEFF4;">/</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// ä½¿ç”¨ isRegExp æ£€æŸ¥</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isRegExp</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">regex</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡º: true</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å¯¹æ¯”éæ­£åˆ™è¡¨è¾¾å¼å¯¹è±¡</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isRegExp</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">{}</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡º: false</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="å®é™…è¿ç”¨ä¸¾ä¾‹-1" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨ä¸¾ä¾‹-1"><span>å®é™…è¿ç”¨ä¸¾ä¾‹</span></a></h3><h4 id="_1-éªŒè¯è¾“å…¥" tabindex="-1"><a class="header-anchor" href="#_1-éªŒè¯è¾“å…¥"><span>1. éªŒè¯è¾“å…¥</span></a></h4><p>å½“ä½ åœ¨å¤„ç†ç”¨æˆ·è¾“å…¥æˆ–è€…ä¸€æ®µæ•°æ®ï¼Œå¹¶ä¸”å¸Œæœ›ç¡®è®¤è¿™äº›æ•°æ®æ˜¯å¦ä¸ºæ­£åˆ™è¡¨è¾¾å¼æ—¶ï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>util.types.isRegExp()</code> æ¥åšéªŒè¯ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">function</span><span style="color:#88C0D0;"> validateInput</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">input</span><span style="color:#ECEFF4;">)</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isRegExp</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">input</span><span style="color:#D8DEE9FF;">)) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">è¾“å…¥æ˜¯æœ‰æ•ˆçš„æ­£åˆ™è¡¨è¾¾å¼</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span><span style="color:#81A1C1;"> else</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">è¾“å…¥ä¸æ˜¯æœ‰æ•ˆçš„æ­£åˆ™è¡¨è¾¾å¼</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88C0D0;">validateInput</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">/</span><span style="color:#EBCB8B;">hello</span><span style="color:#ECEFF4;">/</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å…¥æ˜¯æœ‰æ•ˆçš„æ­£åˆ™è¡¨è¾¾å¼</span></span>
<span class="line"><span style="color:#88C0D0;">validateInput</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">123</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å…¥ä¸æ˜¯æœ‰æ•ˆçš„æ­£åˆ™è¡¨è¾¾å¼</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-å‡½æ•°å‚æ•°æ£€æŸ¥" tabindex="-1"><a class="header-anchor" href="#_2-å‡½æ•°å‚æ•°æ£€æŸ¥"><span>2. å‡½æ•°å‚æ•°æ£€æŸ¥</span></a></h4><p>å¦‚æœä½ æœ‰ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒæœŸæœ›å…¶ä¸­ä¸€ä¸ªå‚æ•°æ˜¯æ­£åˆ™è¡¨è¾¾å¼ï¼Œä½ å¯ä»¥ç”¨ <code>isRegExp</code> æ–¹æ³•æ¥ç¡®ä¿æ¥æ”¶åˆ°æ­£ç¡®ç±»å‹çš„å‚æ•°ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">function</span><span style="color:#88C0D0;"> searchPattern</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">text</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> pattern</span><span style="color:#ECEFF4;">)</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#81A1C1;">!</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isRegExp</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">pattern</span><span style="color:#D8DEE9FF;">)) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#81A1C1;">    throw</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> TypeError</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">pattern å¿…é¡»æ˜¯ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span></span>
<span class="line"><span style="color:#616E88;">  // å¦‚æœ pattern æ˜¯æ­£åˆ™è¡¨è¾¾å¼ï¼Œç»§ç»­å¤„ç†...</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">try</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#88C0D0;">  searchPattern</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">This is a test.</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> /</span><span style="color:#EBCB8B;">test</span><span style="color:#ECEFF4;">/</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // æ­£å¸¸æ‰§è¡Œ</span></span>
<span class="line"><span style="color:#88C0D0;">  searchPattern</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Looking for something?</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">oops</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // æŠ›å‡ºé”™è¯¯</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;"> catch</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">e</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">error</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">e</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">message</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-åŠ¨æ€ç”Ÿæˆæ­£åˆ™è¡¨è¾¾å¼" tabindex="-1"><a class="header-anchor" href="#_3-åŠ¨æ€ç”Ÿæˆæ­£åˆ™è¡¨è¾¾å¼"><span>3. åŠ¨æ€ç”Ÿæˆæ­£åˆ™è¡¨è¾¾å¼</span></a></h4><p>åœ¨å¼€å‘ä¸­ï¼Œä½ å¯èƒ½éœ€è¦åŠ¨æ€ç”Ÿæˆæ­£åˆ™è¡¨è¾¾å¼ï¼Œå¹¶åœ¨ç¨åéªŒè¯å®ƒä»¬æ˜¯å¦å·²æ­£ç¡®åˆ›å»ºã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> userInput</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">[a-z]+</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> dynamicRegex</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">try</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">  dynamicRegex</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> RegExp</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">userInput</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;"> catch</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">e</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">error</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">æ— æ•ˆçš„æ­£åˆ™è¡¨è¾¾å¼</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">dynamicRegex</span><span style="color:#81A1C1;"> &amp;&amp;</span><span style="color:#D8DEE9;"> util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isRegExp</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">dynamicRegex</span><span style="color:#D8DEE9FF;">)) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">æˆåŠŸåˆ›å»ºæ­£åˆ™è¡¨è¾¾å¼</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;"> else</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">error</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">åˆ›å»ºæ­£åˆ™è¡¨è¾¾å¼å¤±è´¥</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é€šè¿‡ä¸Šé¢çš„ä¾‹å­ï¼Œä½ åº”è¯¥èƒ½å¤Ÿæ›´å¥½åœ°ç†è§£ <code>util.types.isRegExp(value)</code> åœ¨ Node.js ä¸­çš„ä½œç”¨ä»¥åŠæ€æ ·åœ¨å®é™…æƒ…å†µä¸­åº”ç”¨å®ƒäº†ã€‚ç®€è€Œè¨€ä¹‹ï¼Œè¿™ä¸ªæ–¹æ³•æä¾›äº†ä¸€ç§ç®€å•çš„æ–¹å¼æ¥éªŒè¯ä¸€ä¸ªå€¼æ˜¯å¦ä¸ºæ­£åˆ™è¡¨è¾¾å¼å¯¹è±¡ã€‚</p><h3 id="util-types-isset-value" tabindex="-1"><a class="header-anchor" href="#util-types-isset-value"><span><a href="https://nodejs.org/docs/latest/api/util.html#utiltypesissetvalue" target="_blank" rel="noopener noreferrer">util.types.isSet(value)</a></span></a></h3><p>å¥½çš„ï¼Œæˆ‘æ¥è§£é‡Šä¸€ä¸‹ Node.js ä¸­çš„ <code>util.types.isSet(value)</code> å‡½æ•°ï¼Œå¹¶ç»™å‡ºä¸€äº›å®é™…è¿ç”¨çš„ä¾‹å­ã€‚</p><h3 id="ä»€ä¹ˆæ˜¯-util-types-isset-value" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯-util-types-isset-value"><span>ä»€ä¹ˆæ˜¯ <code>util.types.isSet(value)</code>ï¼Ÿ</span></a></h3><p>åœ¨ Node.js çš„ <code>util</code> æ¨¡å—ä¸­ï¼Œ<code>util.types.isSet(value)</code> æ˜¯ä¸€ä¸ªç”¨äºåˆ¤æ–­ç»™å®šçš„å€¼æ˜¯å¦ä¸ºä¸€ä¸ª Set å¯¹è±¡çš„å‡½æ•°ã€‚åœ¨ JavaScript ä¸­ï¼Œ<code>Set</code> æ˜¯ä¸€ç§é›†åˆç±»å‹ï¼Œå¯ä»¥å­˜å‚¨ä»»ä½•ç±»å‹çš„å”¯ä¸€å€¼ï¼Œä¸ç®¡æ˜¯åŸå§‹å€¼è¿˜æ˜¯å¯¹è±¡å¼•ç”¨ã€‚</p><h3 id="å¦‚ä½•ä½¿ç”¨-util-types-isset-value" tabindex="-1"><a class="header-anchor" href="#å¦‚ä½•ä½¿ç”¨-util-types-isset-value"><span>å¦‚ä½•ä½¿ç”¨ <code>util.types.isSet(value)</code>ï¼Ÿ</span></a></h3><p>è¦ä½¿ç”¨ <code>util.types.isSet(value)</code>ï¼Œé¦–å…ˆéœ€è¦å¯¼å…¥ Node.js çš„ <code>util</code> æ¨¡å—ï¼Œç„¶åè°ƒç”¨ <code>util.types.isSet()</code> æ–¹æ³•ï¼Œå¹¶ä¼ å…¥ä½ æƒ³è¦æ£€æŸ¥çš„å€¼ä½œä¸ºå‚æ•°ã€‚å¦‚æœä¼ å…¥çš„å€¼æ˜¯ä¸€ä¸ª Set å¯¹è±¡ï¼Œåˆ™è¯¥æ–¹æ³•è¿”å› <code>true</code>ï¼›å¦åˆ™ï¼Œè¿”å› <code>false</code>ã€‚</p><h3 id="å®é™…è¿ç”¨ç¤ºä¾‹-12" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨ç¤ºä¾‹-12"><span>å®é™…è¿ç”¨ç¤ºä¾‹</span></a></h3><p>è®©æˆ‘ä»¬é€šè¿‡ä¸€äº›ç®€å•çš„ä¾‹å­æ¥çœ‹çœ‹å¦‚ä½•åœ¨å®é™…ä¸­ä½¿ç”¨ <code>util.types.isSet(value)</code>ã€‚</p><h4 id="ç¤ºä¾‹-1-æ£€æŸ¥ä¸€ä¸ªå€¼æ˜¯å¦ä¸º-set" tabindex="-1"><a class="header-anchor" href="#ç¤ºä¾‹-1-æ£€æŸ¥ä¸€ä¸ªå€¼æ˜¯å¦ä¸º-set"><span>ç¤ºä¾‹ 1ï¼šæ£€æŸ¥ä¸€ä¸ªå€¼æ˜¯å¦ä¸º Set</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// åˆ›å»ºä¸€ä¸ª Set å¯¹è±¡</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> mySet</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> Set</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// æ£€æŸ¥ mySet æ˜¯å¦ä¸º Set ç±»å‹</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isSet</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">mySet</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡ºï¼štrue</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// æ£€æŸ¥ä¸€ä¸ªæ™®é€šå¯¹è±¡æ˜¯å¦ä¸º Set</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> myObject</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> {}</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isSet</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">myObject</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡ºï¼šfalse</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// æ£€æŸ¥ä¸€ä¸ªæ•°ç»„æ˜¯å¦ä¸º Set</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> myArray</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9FF;"> []</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isSet</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">myArray</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡ºï¼šfalse</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="ç¤ºä¾‹-2-åœ¨å‡½æ•°ä¸­ä½¿ç”¨-util-types-isset-value-æ¥éªŒè¯å‚æ•°" tabindex="-1"><a class="header-anchor" href="#ç¤ºä¾‹-2-åœ¨å‡½æ•°ä¸­ä½¿ç”¨-util-types-isset-value-æ¥éªŒè¯å‚æ•°"><span>ç¤ºä¾‹ 2ï¼šåœ¨å‡½æ•°ä¸­ä½¿ç”¨ <code>util.types.isSet(value)</code> æ¥éªŒè¯å‚æ•°</span></a></h4><p>å‡è®¾ä½ æ­£åœ¨ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°ä¸“é—¨å¤„ç† Set ç±»å‹çš„æ•°æ®ã€‚ä¸ºäº†ç¡®ä¿ä¼ é€’ç»™è¯¥å‡½æ•°çš„å‚æ•°ç¡®å®æ˜¯ Set ç±»å‹ï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>util.types.isSet(value)</code> è¿›è¡Œæ£€æŸ¥ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">function</span><span style="color:#88C0D0;"> processSet</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">set</span><span style="color:#ECEFF4;">)</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#81A1C1;">!</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isSet</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">set</span><span style="color:#D8DEE9FF;">)) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#81A1C1;">    throw</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> TypeError</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Expected a Set</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">  // å¦‚æœæ˜¯ Setï¼Œæ‰§è¡Œä¸€äº›æ“ä½œ</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Processing Set:</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> set</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> validSet</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> Set</span><span style="color:#D8DEE9FF;">([</span><span style="color:#B48EAD;">1</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 2</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 3</span><span style="color:#D8DEE9FF;">])</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#88C0D0;">processSet</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">validSet</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // æ­£ç¡®ï¼Œä¼šç»§ç»­æ‰§è¡Œ</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> invalidSet</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9FF;"> [</span><span style="color:#B48EAD;">1</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 2</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 3</span><span style="color:#D8DEE9FF;">]</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#616E88;">// å°è¯•ä¼ é€’ä¸€ä¸ªæ•°ç»„è€Œé Setï¼Œå°†æŠ›å‡ºé”™è¯¯</span></span>
<span class="line"><span style="color:#81A1C1;">try</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#88C0D0;">  processSet</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">invalidSet</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;"> catch</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">error</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">error</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">error</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">message</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡ºï¼šExpected a Set</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™äº›ä¾‹å­å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ <code>util.types.isSet(value)</code> æ¥åˆ¤æ–­ä¸€ä¸ªå€¼æ˜¯å¦ä¸º Setï¼Œä»¥åŠå¦‚ä½•åœ¨å®é™…åº”ç”¨ä¸­åˆ©ç”¨è¿™ä¸€åŠŸèƒ½æ¥ç¡®ä¿æ•°æ®ç±»å‹çš„æ­£ç¡®æ€§ã€‚è¿™åœ¨å¼€å‘éœ€è¦é«˜åº¦æ•°æ®ç±»å‹ç²¾ç¡®æ€§çš„ Node.js åº”ç”¨æ—¶éå¸¸æœ‰ç”¨ã€‚</p><h3 id="util-types-issetiterator-value" tabindex="-1"><a class="header-anchor" href="#util-types-issetiterator-value"><span><a href="https://nodejs.org/docs/latest/api/util.html#utiltypesissetiteratorvalue" target="_blank" rel="noopener noreferrer">util.types.isSetIterator(value)</a></span></a></h3><p><code>util.types.isSetIterator(value)</code> æ˜¯ Node.js ä¸­çš„ä¸€ä¸ªåŠŸèƒ½ï¼Œå®ƒç”¨äºæ£€æŸ¥ä¸€ä¸ªç»™å®šçš„å€¼æ˜¯å¦æ˜¯ä¸€ä¸ª Set è¿­ä»£å™¨ã€‚ä½†åœ¨è§£é‡Šè¿™ä¸ªæ¦‚å¿µä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦ç†è§£å‡ ä¸ªåŸºæœ¬æ¦‚å¿µï¼š<code>Set</code>ã€<code>è¿­ä»£å™¨</code> å’Œ <code>Node.js</code> çš„ <code>util</code> æ¨¡å—ã€‚</p><ol><li><p><strong>Set:</strong> åœ¨ JavaScript ä¸­ï¼Œ<code>Set</code> æ˜¯ä¸€ç§é›†åˆæ•°æ®ç»“æ„ï¼Œå®ƒå…è®¸ä½ å­˜å‚¨å”¯ä¸€çš„å€¼ï¼Œä¸ç®¡è¿™ä¸ªå€¼æ˜¯åŸå§‹å€¼è¿˜æ˜¯å¯¹è±¡å¼•ç”¨ã€‚</p></li><li><p><strong>è¿­ä»£å™¨:</strong> è¿­ä»£å™¨æ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼ï¼Œä½¿å¾—ç”¨æˆ·å¯ä»¥é¡ºåºåœ°è®¿é—®ä¸€ä¸ªé›†åˆçš„å…ƒç´ è€Œæ— éœ€äº†è§£è¯¥é›†åˆçš„å†…éƒ¨å·¥ä½œåŸç†ã€‚åœ¨ JavaScript ä¸­ï¼Œä¸€ä¸ªè¿­ä»£å™¨æä¾›äº†ä¸€ä¸ª <code>next()</code> æ–¹æ³•ï¼Œè°ƒç”¨å®ƒä¼šè¿”å›é›†åˆä¸­çš„ä¸‹ä¸€ä¸ªå…ƒç´ ã€‚</p></li><li><p><strong>util æ¨¡å—:</strong> åœ¨ Node.js ä¸­ï¼Œ<code>util</code> æ˜¯ä¸€ä¸ªå†…ç½®æ¨¡å—ï¼Œæä¾›äº†ä¸€ç³»åˆ—å®ç”¨å·¥å…·å‡½æ•°ï¼Œç”¨æ¥æ‰§è¡Œå„ç§æœ‰ç”¨çš„ä»»åŠ¡ã€‚<code>util.types</code> æ˜¯ <code>util</code> æ¨¡å—çš„ä¸€éƒ¨åˆ†ï¼ŒåŒ…å«äº†ä¸€ç³»åˆ—ç”¨äºæ£€æµ‹ç‰¹å®šç§ç±»ï¼ˆå¦‚æ•°ç»„ã€Date å¯¹è±¡ç­‰ï¼‰çš„å·¥å…·å‡½æ•°ã€‚</p></li></ol><p>ç°åœ¨ï¼Œå½“æˆ‘ä»¬è¯´ <code>util.types.isSetIterator(value)</code>ï¼Œæˆ‘ä»¬æŒ‡çš„æ˜¯ä½¿ç”¨è¿™ä¸ªå‡½æ•°æ¥æ£€æŸ¥ä¸€ä¸ªç»™å®šçš„å€¼ <code>value</code> æ˜¯å¦æ˜¯ä¸€ä¸ªæŒ‡å‘ <code>Set</code> é›†åˆçš„è¿­ä»£å™¨ã€‚å¦‚æœæ˜¯ï¼Œå‡½æ•°è¿”å› <code>true</code>ï¼›å¦‚æœä¸æ˜¯ï¼Œè¿”å› <code>false</code>ã€‚</p><h3 id="å®é™…è¿ç”¨ç¤ºä¾‹-13" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨ç¤ºä¾‹-13"><span>å®é™…è¿ç”¨ç¤ºä¾‹</span></a></h3><h4 id="åˆ›å»ºå’Œæ£€æŸ¥-set-è¿­ä»£å™¨" tabindex="-1"><a class="header-anchor" href="#åˆ›å»ºå’Œæ£€æŸ¥-set-è¿­ä»£å™¨"><span>åˆ›å»ºå’Œæ£€æŸ¥ Set è¿­ä»£å™¨</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// åˆ›å»ºä¸€ä¸ª Set é›†åˆ</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> mySet</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> Set</span><span style="color:#D8DEE9FF;">([</span><span style="color:#B48EAD;">1</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 2</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 3</span><span style="color:#D8DEE9FF;">])</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// è·å– Set é›†åˆçš„è¿­ä»£å™¨</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> setIterator</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> mySet</span><span style="color:#D8DEE9FF;">[</span><span style="color:#D8DEE9;">Symbol</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">iterator</span><span style="color:#D8DEE9FF;">]()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// ä½¿ç”¨ util.types.isSetIterator() æ£€æŸ¥æ˜¯å¦ä¸º Set è¿­ä»£å™¨</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isSetIterator</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">setIterator</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡º: true</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å¯¹æ¯”é Set è¿­ä»£å™¨</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> notASetIterator</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9FF;"> [</span><span style="color:#B48EAD;">1</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 2</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 3</span><span style="color:#D8DEE9FF;">][</span><span style="color:#D8DEE9;">Symbol</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">iterator</span><span style="color:#D8DEE9FF;">]()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isSetIterator</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">notASetIterator</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡º: false</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼š</p><ul><li>æˆ‘ä»¬é¦–å…ˆåˆ›å»ºäº†ä¸€ä¸ª <code>Set</code> é›†åˆ <code>mySet</code>ã€‚</li><li>ç„¶åï¼Œæˆ‘ä»¬é€šè¿‡è°ƒç”¨ <code>mySet[Symbol.iterator]()</code> å¾—åˆ°äº†è¿™ä¸ªé›†åˆçš„è¿­ä»£å™¨ã€‚</li><li>æ¥ç€ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>util.types.isSetIterator(setIterator)</code> æ–¹æ³•æ£€æŸ¥æˆ‘ä»¬è·å–çš„è¿­ä»£å™¨æ˜¯å¦ç¡®å®æ˜¯ä¸€ä¸ªé’ˆå¯¹ <code>Set</code> é›†åˆçš„è¿­ä»£å™¨ã€‚ç”±äºå®ƒæ˜¯ï¼Œæ‰€ä»¥è¿”å› <code>true</code>ã€‚</li><li>æœ€åï¼Œæˆ‘ä»¬ä¹Ÿæ¼”ç¤ºäº†ä¸€ä¸ªå¯¹æ¯”ä¾‹å­ï¼Œä½¿ç”¨ä¸€ä¸ªæ™®é€šæ•°ç»„çš„è¿­ä»£å™¨è¿›è¡Œæ£€æŸ¥ï¼Œç”±äºå®ƒä¸æ˜¯é’ˆå¯¹ <code>Set</code> çš„è¿­ä»£å™¨ï¼Œæ‰€ä»¥æ–¹æ³•è¿”å› <code>false</code>ã€‚</li></ul><p>è¿™ä¸ªåŠŸèƒ½å¯¹äºå¼€å‘äººå‘˜åœ¨å¤„ç†æœªçŸ¥ç±»å‹çš„æ•°æ®æ—¶éå¸¸æœ‰ç”¨ï¼Œå°¤å…¶æ˜¯åœ¨éœ€è¦ç²¾ç¡®åœ°è¯†åˆ«æ•°æ®ç±»å‹ä»¥æ‰§è¡Œç‰¹å®šæ“ä½œæˆ–å®ç°ç±»å‹å®‰å…¨çš„ä»£ç æ—¶ã€‚</p><h3 id="util-types-issharedarraybuffer-value" tabindex="-1"><a class="header-anchor" href="#util-types-issharedarraybuffer-value"><span><a href="https://nodejs.org/docs/latest/api/util.html#utiltypesissharedarraybuffervalue" target="_blank" rel="noopener noreferrer">util.types.isSharedArrayBuffer(value)</a></span></a></h3><p>å½“ä½ å¼€å§‹æ¶‰è¶³ Node.js çš„ä¸–ç•Œï¼Œä¼šå‘ç°å®ƒæ‹¥æœ‰å¾ˆå¤šå·¥å…·ï¼ˆutilï¼‰å‡½æ•°ï¼Œè¿™äº›éƒ½æ˜¯ä¸ºäº†è®©å¼€å‘è€…çš„ç”Ÿæ´»å˜å¾—æ›´åŠ æ–¹ä¾¿ã€‚<code>util.types.isSharedArrayBuffer(value)</code>å°±æ˜¯å…¶ä¸­ä¹‹ä¸€ï¼Œåœ¨ Node.js v21.7.1 ç‰ˆæœ¬ä¸­ä»ç„¶å¯ç”¨ã€‚è¿™ä¸ªå‡½æ•°çš„ä½œç”¨æ˜¯å¸®åŠ©ä½ åˆ¤æ–­ä¸€ä¸ªå€¼æ˜¯å¦ä¸ºä¸€ä¸ªâ€œSharedArrayBufferâ€ã€‚é‚£ä¹ˆï¼Œæˆ‘ä»¬é¦–å…ˆè¦ç†è§£ä¸¤ä¸ªå…³é”®è¯ï¼šâ€œSharedArrayBufferâ€å’Œâ€œutil.typesâ€ã€‚</p><h3 id="sharedarraybuffer-ç®€ä»‹" tabindex="-1"><a class="header-anchor" href="#sharedarraybuffer-ç®€ä»‹"><span>SharedArrayBuffer ç®€ä»‹</span></a></h3><p>åœ¨ JavaScript ä¸­ï¼Œ<code>SharedArrayBuffer</code>æ˜¯ä¸€ç§æ•°æ®ç»“æ„ï¼Œå®ƒå…è®¸ä¸åŒçš„å·¥ä½œçº¿ç¨‹ï¼ˆå¦‚ Web Workers åœ¨æµè§ˆå™¨ç¯å¢ƒæˆ– Worker Threads åœ¨ Node.js ç¯å¢ƒï¼‰ä¹‹é—´å…±äº«å†…å­˜æ•°æ®ã€‚è¿™æ„å‘³ç€ï¼Œä¸åŒçš„çº¿ç¨‹å¯ä»¥è¯»å†™åŒä¸€å—å†…å­˜åŒºåŸŸä¸­çš„æ•°æ®ï¼Œè€Œæ— éœ€å¤åˆ¶è¿™äº›æ•°æ®æˆ–é€šè¿‡å…¶ä»–æ–¹å¼æ¥è¿›è¡Œçº¿ç¨‹é—´é€šä¿¡ã€‚</p><h3 id="util-types-çš„ä½œç”¨" tabindex="-1"><a class="header-anchor" href="#util-types-çš„ä½œç”¨"><span>util.types çš„ä½œç”¨</span></a></h3><p><code>util</code>æ¨¡å—çš„<code>types</code>å¯¹è±¡æ”¶é›†äº†å„ç§åˆ¤æ–­ JavaScript å€¼ç±»å‹çš„å‡½æ•°ï¼Œæ¯”å¦‚æˆ‘ä»¬è¿™é‡Œæåˆ°çš„<code>isSharedArrayBuffer</code>ã€‚ä½¿ç”¨å®ƒä»¬ï¼Œå¯ä»¥æ›´å®¹æ˜“åœ°å¯¹æ•°æ®ç±»å‹è¿›è¡Œæ£€æŸ¥ï¼Œè€Œä¸éœ€è¦å†™å¤æ‚çš„é€»è¾‘åˆ¤æ–­ã€‚</p><h3 id="util-types-issharedarraybuffer-value-çš„ä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#util-types-issharedarraybuffer-value-çš„ä½¿ç”¨"><span>util.types.isSharedArrayBuffer(value)çš„ä½¿ç”¨</span></a></h3><p>å‡è®¾ä½ ç°åœ¨æ­£åœ¨ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°éœ€è¦å¤„ç†å¤šç§ç±»å‹çš„è¾“å…¥æ•°æ®ï¼Œå¹¶ä¸”ä½ æƒ³ç‰¹åˆ«ä¸º<code>SharedArrayBuffer</code>ç±»å‹çš„æ•°æ®æ‰§è¡Œä¸€äº›æ“ä½œã€‚æ­¤æ—¶ï¼Œ<code>util.types.isSharedArrayBuffer(value)</code>å°±æ´¾ä¸Šç”¨åœºäº†ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">function</span><span style="color:#88C0D0;"> processData</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">data</span><span style="color:#ECEFF4;">)</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isSharedArrayBuffer</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">data</span><span style="color:#D8DEE9FF;">)) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Data is a SharedArrayBuffer.</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#616E88;">    // è¿™é‡Œå¯ä»¥æ”¾ç½®ä¸€äº›åªå¯¹SharedArrayBufferæ‰§è¡Œçš„é€»è¾‘</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span><span style="color:#81A1C1;"> else</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Data is not a SharedArrayBuffer.</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#616E88;">    // å¤„ç†å…¶ä»–ç±»å‹çš„æ•°æ®</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// åˆ›å»ºä¸€ä¸ªSharedArrayBufferå®ä¾‹</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> sab</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> SharedArrayBuffer</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">1024</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// æµ‹è¯•å‡½æ•°</span></span>
<span class="line"><span style="color:#88C0D0;">processData</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">sab</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡ºï¼šData is a SharedArrayBuffer.</span></span>
<span class="line"><span style="color:#88C0D0;">processData</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">{}</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡ºï¼šData is not a SharedArrayBuffer.</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="å®é™…è¿ç”¨ä¾‹å­-13" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨ä¾‹å­-13"><span>å®é™…è¿ç”¨ä¾‹å­</span></a></h3><ol><li><p><strong>å¤šçº¿ç¨‹æ•°æ®å…±äº«ï¼š</strong> åœ¨ Node.js ä¸­ï¼Œå¦‚æœä½ æ­£åœ¨ä½¿ç”¨å·¥ä½œçº¿ç¨‹ï¼ˆworker threadsï¼‰æ¥å¤„ç†å¹¶è¡Œä»»åŠ¡ï¼Œå¯èƒ½éœ€è¦åœ¨è¿™äº›çº¿ç¨‹é—´å…±äº«æŸäº›æ•°æ®ã€‚<code>SharedArrayBuffer</code>èƒ½å¤Ÿè®©è¿™äº›çº¿ç¨‹ç›´æ¥å…±äº«å†…å­˜æ•°æ®ï¼Œè€Œ<code>util.types.isSharedArrayBuffer(value)</code>åˆ™å¯ä»¥å¸®ä½ ç¡®è®¤ä¼ é€’ç»™çº¿ç¨‹çš„æ•°æ®ç¡®å®æ˜¯å¯å…±äº«çš„ã€‚</p></li><li><p><strong>æ€§èƒ½ä¼˜åŒ–ï¼š</strong> åœ¨å¤„ç†å¤§é‡æ•°æ®æˆ–é«˜é¢‘ç‡æ•°æ®äº¤æ¢çš„åº”ç”¨ä¸­ï¼Œé€šè¿‡å…±äº«å†…å­˜æ¥å‡å°‘æ•°æ®å¤åˆ¶çš„å¼€é”€å¯èƒ½æ˜¯ä¸€ç§æœ‰æ•ˆçš„ä¼˜åŒ–æ‰‹æ®µã€‚ä½¿ç”¨<code>SharedArrayBuffer</code>å¯ä»¥è¾¾åˆ°è¿™ä¸€ç›®çš„ï¼Œè€Œ<code>util.types.isSharedArrayBuffer(value)</code>å¯ä»¥ç¡®ä¿æ•°æ®ç±»å‹æ­£ç¡®ï¼Œä»è€Œé¿å…ç¨‹åºé”™è¯¯ã€‚</p></li></ol><p>æ€»çš„æ¥è¯´ï¼Œ<code>util.types.isSharedArrayBuffer(value)</code>æ˜¯ä¸€ä¸ªéå¸¸å®ç”¨çš„åŠŸèƒ½ï¼Œå®ƒåœ¨ä½ éœ€è¦å¤„ç†å¹¶ç¡®è®¤ SharedArrayBuffer ç±»å‹çš„æ•°æ®æ—¶éå¸¸æœ‰ç”¨ï¼Œå°¤å…¶æ˜¯åœ¨æ¶‰åŠåˆ°å¤šçº¿ç¨‹ç¼–ç¨‹å’Œæ€§èƒ½ä¼˜åŒ–çš„åœºæ™¯ä¸­ã€‚</p><h3 id="util-types-isstringobject-value" tabindex="-1"><a class="header-anchor" href="#util-types-isstringobject-value"><span><a href="https://nodejs.org/docs/latest/api/util.html#utiltypesisstringobjectvalue" target="_blank" rel="noopener noreferrer">util.types.isStringObject(value)</a></span></a></h3><p>Node.js æ˜¯ä¸€ä¸ªéå¸¸å¼ºå¤§çš„ JavaScript è¿è¡Œç¯å¢ƒï¼Œå®ƒä½¿å¾—å¼€å‘è€…å¯ä»¥ä½¿ç”¨ JavaScript ç¼–å†™æœåŠ¡å™¨ç«¯ä»£ç ã€‚äº†è§£ Node.js ä¸­å„ç§å†…å»ºæ¨¡å—å’Œå‡½æ•°å¯¹äºæœ‰æ•ˆåœ°åˆ©ç”¨è¿™ä¸ªå¹³å°éå¸¸é‡è¦ã€‚å…¶ä¸­<code>util.types.isStringObject(value)</code>æ˜¯<code>util</code>æ¨¡å—æä¾›çš„ä¸€ä¸ªå®ç”¨å‡½æ•°ï¼Œæˆ‘ä»¬å°†æ·±å…¥æ¢è®¨å®ƒçš„ç”¨é€”å’Œä½œç”¨ã€‚</p><h3 id="è§£é‡Š-util-types-isstringobject-value" tabindex="-1"><a class="header-anchor" href="#è§£é‡Š-util-types-isstringobject-value"><span>è§£é‡Š <code>util.types.isStringObject(value)</code></span></a></h3><p>åœ¨ JavaScript ä¸­ï¼Œæ•°æ®ç±»å‹åˆ†ä¸ºåŸå§‹ç±»å‹ï¼ˆå¦‚ï¼šstringï¼Œnumberï¼Œboolean ç­‰ï¼‰å’Œå¯¹è±¡ç±»å‹ã€‚åŸå§‹ç±»å‹çš„å€¼ç›´æ¥åŒ…å«äº†å€¼æœ¬èº«ï¼Œè€Œå¯¹è±¡ç±»å‹çš„å€¼åˆ™æ˜¯å¯¹ä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨ã€‚æœ‰æ—¶å€™ï¼Œåœ¨ç¼–ç¨‹æ—¶éœ€è¦åŒºåˆ†ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯ä½œä¸ºåŸå§‹ç±»å‹çš„å­—ç¬¦ä¸²å­˜åœ¨ï¼Œè¿˜æ˜¯ä½œä¸ºä¸€ä¸ª String å¯¹è±¡å­˜åœ¨ã€‚è¿™å°±æ˜¯<code>util.types.isStringObject(value)</code>çš„ç”¨å¤„æ‰€åœ¨ã€‚</p><ul><li><code>value</code>: è¿™é‡ŒæŒ‡ä½ è¦æ£€æŸ¥çš„å˜é‡ã€‚</li></ul><p>å¦‚æœ<code>value</code>æ˜¯ä¸€ä¸ª String å¯¹è±¡ï¼ˆå³é€šè¿‡<code>new String(&quot;example&quot;)</code>åˆ›å»ºçš„ï¼‰ï¼Œ<code>util.types.isStringObject(value)</code>ä¼šè¿”å›<code>true</code>ã€‚å¦‚æœ<code>value</code>æ˜¯å…¶ä»–ä»»ä½•ç±»å‹çš„å€¼ï¼ŒåŒ…æ‹¬åŸå§‹ç±»å‹çš„å­—ç¬¦ä¸²ï¼ˆå³ç›´æ¥ä½¿ç”¨åŒå¼•å·æˆ–å•å¼•å·å®šä¹‰çš„å­—ç¬¦ä¸²ï¼‰ï¼Œå®ƒä¼šè¿”å›<code>false</code>ã€‚</p><h3 id="å®é™…è¿ç”¨ä¾‹å­-14" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨ä¾‹å­-14"><span>å®é™…è¿ç”¨ä¾‹å­</span></a></h3><ol><li><strong>éªŒè¯è¾“å…¥ç±»å‹</strong></li></ol><p>å‡è®¾ä½ æ­£åœ¨ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°éœ€è¦å¤„ç†ç”¨æˆ·è¾“å…¥ã€‚å‡ºäºæŸäº›åŸå› ï¼Œä½ å¸Œæœ›ç¡®ä¿ä¼ ç»™å‡½æ•°çš„æ˜¯ä¸€ä¸ª String å¯¹è±¡ï¼Œè€Œä¸æ˜¯åŸå§‹ç±»å‹çš„å­—ç¬¦ä¸²ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œ<code>util.types.isStringObject(value)</code>å°±æ˜¾å¾—éå¸¸æœ‰ç”¨ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">function</span><span style="color:#88C0D0;"> processInput</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">input</span><span style="color:#ECEFF4;">)</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isStringObject</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">input</span><span style="color:#D8DEE9FF;">)) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">è¾“å…¥æ˜¯ä¸€ä¸ªStringå¯¹è±¡</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#616E88;">    // å¤„ç†Stringå¯¹è±¡...</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span><span style="color:#81A1C1;"> else</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">è¾“å…¥ä¸æ˜¯ä¸€ä¸ªStringå¯¹è±¡</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#616E88;">    // å¯èƒ½éœ€è¦è½¬æ¢æˆ–è€…æ‹’ç»å¤„ç†...</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88C0D0;">processInput</span><span style="color:#D8DEE9FF;">(</span><span style="color:#81A1C1;">new</span><span style="color:#88C0D0;"> String</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Hello, World!</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å…¥æ˜¯ä¸€ä¸ªStringå¯¹è±¡</span></span>
<span class="line"><span style="color:#88C0D0;">processInput</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Hello, World!</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å…¥ä¸æ˜¯ä¸€ä¸ªStringå¯¹è±¡</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li><strong>æ•°æ®æ¸…æ´—</strong></li></ol><p>åœ¨å¤„ç†æ¥è‡ªä¸åŒæ¥æºçš„æ•°æ®æ—¶ï¼Œå°¤å…¶æ˜¯åœ¨æ•°æ®å¯èƒ½ä»¥å¤šç§å½¢å¼å­˜åœ¨æ—¶ï¼ˆä¾‹å¦‚ï¼Œæ¥è‡ªç¬¬ä¸‰æ–¹ APIã€ç”¨æˆ·è¾“å…¥æˆ–å…¶ä»–ç³»ç»Ÿçš„æ•°æ®ï¼‰ï¼Œä½ å¯èƒ½éœ€è¦åŸºäºæ•°æ®ç±»å‹é‡‡å–ä¸åŒçš„æ¸…æ´—å’Œæ ‡å‡†åŒ–ç­–ç•¥ã€‚<code>util.types.isStringObject(value)</code>å¯ä»¥å¸®åŠ©ä½ ç¡®å®šä¸€ä¸ªå€¼æ˜¯å¦ä¸º String å¯¹è±¡ï¼Œä»è€Œå†³å®šæ˜¯å¦éœ€è¦å°†å…¶è½¬æ¢ä¸ºåŸå§‹ç±»å‹çš„å­—ç¬¦ä¸²ä»¥ä¿æŒæ•°æ®çš„ä¸€è‡´æ€§ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> dataFromExternalSource</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> String</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Some external data</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isStringObject</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">dataFromExternalSource</span><span style="color:#D8DEE9FF;">)) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#616E88;">  // å°†Stringå¯¹è±¡è½¬æ¢ä¸ºåŸå§‹ç±»å‹çš„å­—ç¬¦ä¸²</span></span>
<span class="line"><span style="color:#D8DEE9;">  dataFromExternalSource</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> dataFromExternalSource</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">valueOf</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// ç°åœ¨dataFromExternalSourceæ˜¯ä¸€ä¸ªåŸå§‹ç±»å‹çš„å­—ç¬¦ä¸²ï¼Œå¯ä»¥ä¸å…¶ä»–å­—ç¬¦ä¸²ä¸€è‡´åœ°å¤„ç†ã€‚</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#81A1C1;">typeof</span><span style="color:#D8DEE9;"> dataFromExternalSource</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // &quot;string&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æ€»ç»“-16" tabindex="-1"><a class="header-anchor" href="#æ€»ç»“-16"><span>æ€»ç»“</span></a></h3><p><code>util.types.isStringObject(value)</code>æ˜¯ Node.js ä¸­<code>util</code>æ¨¡å—æä¾›çš„ä¸€ä¸ªå®ç”¨å‡½æ•°ï¼Œç”¨äºåˆ¤æ–­ç»™å®šçš„å€¼æ˜¯å¦ä¸º String å¯¹è±¡ã€‚äº†è§£å¹¶æ­£ç¡®ä½¿ç”¨è¿™ä¸ªå‡½æ•°å¯ä»¥å¸®åŠ©ä½ æ›´æœ‰æ•ˆåœ°å¤„ç†å’ŒåŒºåˆ† JavaScript ä¸­çš„æ•°æ®ç±»å‹ï¼Œç‰¹åˆ«æ˜¯åœ¨éœ€è¦ç²¾ç¡®æ§åˆ¶æ•°æ®ç±»å‹çš„åœºæ™¯ä¸­ã€‚</p><h3 id="util-types-issymbolobject-value" tabindex="-1"><a class="header-anchor" href="#util-types-issymbolobject-value"><span><a href="https://nodejs.org/docs/latest/api/util.html#utiltypesissymbolobjectvalue" target="_blank" rel="noopener noreferrer">util.types.isSymbolObject(value)</a></span></a></h3><p>åœ¨ Node.js ä¸­ï¼Œ<code>util.types.isSymbolObject(value)</code>æ˜¯ä¸€ä¸ªéå¸¸å…·ä½“çš„æ–¹æ³•ï¼Œç”¨äºæ£€æŸ¥ä¼ å…¥çš„å€¼æ˜¯å¦æ˜¯ä¸€ä¸ª Symbol å¯¹è±¡ã€‚é¦–å…ˆï¼Œè®©æˆ‘ä»¬åˆ†è§£ä¸€ä¸‹è¿™ä¸ªæ¦‚å¿µï¼Œä»¥ä¾¿æ›´å¥½åœ°ç†è§£ã€‚</p><h3 id="ä»€ä¹ˆæ˜¯-symbol" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯-symbol"><span>ä»€ä¹ˆæ˜¯ Symbolï¼Ÿ</span></a></h3><p>åœ¨ JavaScript ä¸­ï¼Œ<code>Symbol</code>æ˜¯ä¸€ç§åŸºæœ¬æ•°æ®ç±»å‹ï¼Œå®ƒæä¾›äº†ä¸€ç§æ–¹å¼æ¥åˆ›å»ºå”¯ä¸€çš„æ ‡è¯†ç¬¦ã€‚Symbols æ˜¯ä¸å¯å˜çš„ï¼ˆimmutableï¼‰ä¸”æ˜¯å”¯ä¸€çš„ã€‚è¿™æ„å‘³ç€å³ä½¿ä¸¤ä¸ª Symbols æœ‰ç›¸åŒçš„æè¿°ï¼Œå®ƒä»¬ä¹Ÿè¢«è®¤ä¸ºæ˜¯ä¸åŒçš„ã€‚è¿™ä½¿å¾— Symbols æˆä¸ºæ·»åŠ ç§æœ‰å±æ€§åˆ°å¯¹è±¡æˆ–è€…ç”¨ä½œå¯¹è±¡å±æ€§é”®çš„ç‹¬ç‰¹æ ‡è¯†ç¬¦çš„ç†æƒ³é€‰æ‹©ï¼Œå› ä¸ºå®ƒä»¬ä¸ä¼šä¸å…¶ä»–å±æ€§é”®å†²çªã€‚</p><h3 id="util-types-issymbolobject-value-1" tabindex="-1"><a class="header-anchor" href="#util-types-issymbolobject-value-1"><span>util.types.isSymbolObject(value)</span></a></h3><p>å½“ä½ æƒ³ç¡®è®¤ä¸€ä¸ªå˜é‡æ˜¯å¦ç¡®å®æ˜¯ä¸€ä¸ªä»¥ Symbol å½¢å¼åŒ…è£…çš„å¯¹è±¡æ—¶ï¼Œä½ å°±å¯ä»¥ä½¿ç”¨<code>util.types.isSymbolObject(value)</code>è¿™ä¸ªæ–¹æ³•ã€‚è¿™é‡Œéœ€è¦åŒºåˆ†çš„æ˜¯ï¼Œä¸€ä¸ªç›´æ¥çš„ Symbolï¼ˆä¾‹å¦‚é€šè¿‡ <code>Symbol()</code> å‡½æ•°åˆ›å»ºçš„ï¼‰å’Œä¸€ä¸ª Symbol å¯¹è±¡ï¼ˆé€šè¿‡ <code>Object(Symbol())</code> åˆ›å»ºçš„ï¼‰ä¹‹é—´çš„å·®å¼‚ã€‚å‰è€…æ˜¯ç›´æ¥çš„ Symbol å€¼ï¼Œè€Œåè€…æ˜¯ Symbol å€¼çš„åŒ…è£…å¯¹è±¡ã€‚</p><h3 id="å®é™…ä¾‹å­-7" tabindex="-1"><a class="header-anchor" href="#å®é™…ä¾‹å­-7"><span>å®é™…ä¾‹å­</span></a></h3><p>å‡è®¾ä½ åœ¨å¼€å‘ä¸€ä¸ªåº”ç”¨ç¨‹åºï¼Œè¿™ä¸ªåº”ç”¨ç¨‹åºéœ€è¦å¤„ç†å¤§é‡çš„æ ‡è¯†ç¬¦ï¼Œå¹¶ä¸”ç¡®ä¿è¿™äº›æ ‡è¯†ç¬¦çš„å”¯ä¸€æ€§ã€‚æ­¤å¤–ï¼Œå‡ºäºæŸäº›åŸå› ï¼Œè¿™äº›æ ‡è¯†ç¬¦éœ€è¦ä»¥å¯¹è±¡çš„å½¢å¼å­˜åœ¨ï¼ˆå¯èƒ½æ˜¯å› ä¸ºéœ€è¦é™„åŠ å…ƒæ•°æ®æˆ–å…¶ä»–ï¼‰ã€‚è¿™é‡Œå°±å¯ä»¥ç”¨åˆ° Symbol å’Œ<code>util.types.isSymbolObject(value)</code>äº†ã€‚</p><p><strong>ç¤ºä¾‹ 1ï¼šæ£€æŸ¥å˜é‡æ˜¯å¦ä¸º Symbol å¯¹è±¡</strong></p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> symbol</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> Symbol</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">uniqueIdentifier</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> symbolObject</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> Object</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">symbol</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isSymbolObject</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">symbol</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // false</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isSymbolObject</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">symbolObject</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // true</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆå¯¼å…¥äº† Node.js çš„<code>util</code>æ¨¡å—ï¼Œç„¶ååˆ›å»ºäº†ä¸€ä¸ª Symbol å’Œä¸€ä¸ª Symbol å¯¹è±¡ã€‚ä½¿ç”¨<code>util.types.isSymbolObject(value)</code>æ–¹æ³•æ£€æŸ¥è¿™ä¸¤ä¸ªå˜é‡ï¼Œå¯ä»¥çœ‹åˆ°ç›´æ¥åˆ›å»ºçš„ Symbol è¿”å›äº†<code>false</code>ï¼Œè€Œ Symbol å¯¹è±¡åˆ™è¿”å›äº†<code>true</code>ã€‚</p><p><strong>ç¤ºä¾‹ 2ï¼šåœ¨å‡½æ•°ä¸­ä½¿ç”¨æ£€æŸ¥</strong></p><p>è€ƒè™‘ä½ æ­£åœ¨å†™ä¸€ä¸ªéœ€è¦å¤„ç†å¤šç§ç±»å‹æ•°æ®çš„å‡½æ•°ï¼Œç¡®ä¿å¦‚æœä¼ å…¥çš„æ˜¯ Symbol å¯¹è±¡ï¼Œåˆ™è¿›è¡Œç‰¹å®šå¤„ç†ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">function</span><span style="color:#88C0D0;"> handleData</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">data</span><span style="color:#ECEFF4;">)</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isSymbolObject</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">data</span><span style="color:#D8DEE9FF;">)) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">å¤„ç†Symbolå¯¹è±¡</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#616E88;">    // è¿™é‡Œå¯ä»¥æ”¾ç½®å¤„ç†Symbolå¯¹è±¡çš„é€»è¾‘</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span><span style="color:#81A1C1;"> else</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">å¤„ç†å…¶ä»–ç±»å‹æ•°æ®</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#616E88;">    // å¤„ç†å…¶ä»–ç±»å‹æ•°æ®çš„é€»è¾‘</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> symbolObject</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> Object</span><span style="color:#D8DEE9FF;">(</span><span style="color:#88C0D0;">Symbol</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">uniqueIdentifier</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#88C0D0;">handleData</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">symbolObject</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡º: å¤„ç†Symbolå¯¹è±¡</span></span>
<span class="line"><span style="color:#88C0D0;">handleData</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">123</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡º: å¤„ç†å…¶ä»–ç±»å‹æ•°æ®</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<code>handleData</code>å‡½æ•°ä½¿ç”¨<code>util.types.isSymbolObject(value)</code>æ¥åˆ¤æ–­ä¼ å…¥çš„æ•°æ®æ˜¯å¦æ˜¯ Symbol å¯¹è±¡ï¼Œå¹¶æ ¹æ®ç»“æœæ‰§è¡Œä¸åŒçš„é€»è¾‘ã€‚</p><h3 id="æ€»ç»“-17" tabindex="-1"><a class="header-anchor" href="#æ€»ç»“-17"><span>æ€»ç»“</span></a></h3><p><code>util.types.isSymbolObject(value)</code>åœ¨ Node.js ä¸­æä¾›äº†ä¸€ç§ç®€ä¾¿çš„æ–¹æ³•æ¥æ£€æµ‹ä¸€ä¸ªå€¼æ˜¯å¦ä¸º Symbol å¯¹è±¡ã€‚è¿™åœ¨å¤„ç†æ¶‰åŠ Symbol å’Œéœ€è¦ç¡®ä¿æ•°æ®å”¯ä¸€æ€§çš„åº”ç”¨ç¨‹åºæ—¶ç‰¹åˆ«æœ‰ç”¨ã€‚é€šè¿‡ä¸Šè¿°ç¤ºä¾‹ï¼Œä½ åº”è¯¥èƒ½å¤Ÿçœ‹åˆ°å¦‚ä½•åœ¨å®é™…æƒ…å†µä¸­åº”ç”¨è¿™ä¸ªæ–¹æ³•ï¼Œå¹¶ç†è§£å…¶é‡è¦æ€§ã€‚</p><h3 id="util-types-istypedarray-value" tabindex="-1"><a class="header-anchor" href="#util-types-istypedarray-value"><span><a href="https://nodejs.org/docs/latest/api/util.html#utiltypesistypedarrayvalue" target="_blank" rel="noopener noreferrer">util.types.isTypedArray(value)</a></span></a></h3><p>å½“ä½ åˆšå¼€å§‹å­¦ä¹ ç¼–ç¨‹æ—¶ï¼Œäº†è§£ä¸åŒçš„æ•°æ®ç±»å‹åŠå…¶æ£€æµ‹æ–¹æ³•éå¸¸é‡è¦ã€‚åœ¨ Node.js ä¸­ï¼Œæœ‰ä¸€ä¸ªæ¨¡å—å«åš<code>util</code>ï¼Œå®ƒæä¾›äº†ä¸€å †å®ç”¨åŠŸèƒ½ï¼Œå¸®åŠ©å¼€å‘è€…è¿›è¡Œæ›´é«˜æ•ˆçš„ç¼–ç ã€‚å…¶ä¸­ï¼Œ<code>util.types.isTypedArray(value)</code>æ˜¯ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„å‡½æ•°ï¼Œå®ƒå¸®åŠ©æˆ‘ä»¬è¯†åˆ«ä¸€ä¸ªå€¼æ˜¯å¦æ˜¯â€œç±»å‹åŒ–æ•°ç»„ï¼ˆTyped Arrayï¼‰â€ã€‚</p><h3 id="ä»€ä¹ˆæ˜¯ç±»å‹åŒ–æ•°ç»„" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯ç±»å‹åŒ–æ•°ç»„"><span>ä»€ä¹ˆæ˜¯ç±»å‹åŒ–æ•°ç»„ï¼Ÿ</span></a></h3><p>é¦–å…ˆï¼Œè®©æˆ‘ä»¬ç†è§£ä¸€ä¸‹ä»€ä¹ˆæ˜¯ç±»å‹åŒ–æ•°ç»„ã€‚åœ¨ JavaScript ä¸­ï¼Œç±»å‹åŒ–æ•°ç»„æ˜¯ä¸€ç§ç”¨äºå¤„ç†äºŒè¿›åˆ¶æ•°æ®çš„ç‰¹æ®Šæ•°ç»„ã€‚ä¸æ™®é€šçš„æ•°ç»„ç›¸æ¯”ï¼Œç±»å‹åŒ–æ•°ç»„åœ¨å­˜å‚¨å’Œæ“ä½œæ—¶æ›´ä¸ºé«˜æ•ˆï¼Œå› ä¸ºå®ƒä»¬ç›´æ¥æ“ä½œå†…å­˜ã€‚ç±»å‹åŒ–æ•°ç»„å¸¸ç”¨äºéœ€è¦é«˜æ€§èƒ½è®¡ç®—å’Œå¤§é‡äºŒè¿›åˆ¶æ•°æ®å¤„ç†çš„åœºæ™¯ï¼Œæ¯”å¦‚éŸ³é¢‘å¤„ç†ã€å›¾åƒå¤„ç†ã€ç½‘ç»œé€šä¿¡ç­‰ã€‚</p><h3 id="util-types-istypedarray-value-1" tabindex="-1"><a class="header-anchor" href="#util-types-istypedarray-value-1"><span>util.types.isTypedArray(value)</span></a></h3><p>æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬è¯¦ç»†äº†è§£ä¸€ä¸‹<code>util.types.isTypedArray(value)</code>è¿™ä¸ªå‡½æ•°ã€‚è¿™ä¸ªå‡½æ•°çš„ä½œç”¨å¾ˆç®€å•â€”â€”æ£€æŸ¥ä¼ å…¥çš„å€¼<code>value</code>æ˜¯å¦ä¸ºä¸€ä¸ªç±»å‹åŒ–æ•°ç»„ã€‚å¦‚æœæ˜¯ï¼Œå®ƒä¼šè¿”å›<code>true</code>ï¼›å¦‚æœä¸æ˜¯ï¼Œå°±è¿”å›<code>false</code>ã€‚</p><h4 id="å‚æ•°-5" tabindex="-1"><a class="header-anchor" href="#å‚æ•°-5"><span>å‚æ•°</span></a></h4><ul><li><code>value</code>ï¼šè¿™æ˜¯ä½ æƒ³è¦æ£€æŸ¥çš„å€¼ã€‚å¯ä»¥æ˜¯ä»»ä½• JavaScript ä¸­çš„æ•°æ®ç±»å‹ã€‚</li></ul><h4 id="è¿”å›å€¼-1" tabindex="-1"><a class="header-anchor" href="#è¿”å›å€¼-1"><span>è¿”å›å€¼</span></a></h4><ul><li>è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼ˆ<code>true</code>æˆ–<code>false</code>ï¼‰ï¼Œè¡¨ç¤º<code>value</code>æ˜¯å¦ä¸ºç±»å‹åŒ–æ•°ç»„ã€‚</li></ul><h3 id="å®é™…è¿ç”¨ä¾‹å­-15" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨ä¾‹å­-15"><span>å®é™…è¿ç”¨ä¾‹å­</span></a></h3><p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬é€šè¿‡ä¸€äº›ä¾‹å­æ¥çœ‹çœ‹å¦‚ä½•åœ¨å®é™…ä¸­ä½¿ç”¨<code>util.types.isTypedArray(value)</code>ã€‚</p><ol><li><p><strong>åˆ¤æ–­ä¸€ä¸ªå˜é‡æ˜¯å¦ä¸ºç±»å‹åŒ–æ•°ç»„</strong></p><p>å‡è®¾ä½ æ­£åœ¨å¤„ç†ä¸€äº›æ¥è‡ªç½‘ç»œçš„äºŒè¿›åˆ¶æ•°æ®ï¼Œå¹¶ä¸”ä½ æƒ³ç¡®è®¤ä½ æ¥æ”¶åˆ°çš„æ•°æ®æ˜¯ä¸æ˜¯ç±»å‹åŒ–æ•°ç»„ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> bufferData</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> Uint8Array</span><span style="color:#D8DEE9FF;">([</span><span style="color:#B48EAD;">1</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 2</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 3</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 4</span><span style="color:#D8DEE9FF;">])</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // åˆ›å»ºä¸€ä¸ªç±»å‹åŒ–æ•°ç»„</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isTypedArray</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">bufferData</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡ºï¼štrue</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> normalArray</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9FF;"> [</span><span style="color:#B48EAD;">1</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 2</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 3</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 4</span><span style="color:#D8DEE9FF;">]</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isTypedArray</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">normalArray</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡ºï¼šfalse</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆåˆ›å»ºäº†ä¸€ä¸ª<code>Uint8Array</code>ç±»å‹çš„ç±»å‹åŒ–æ•°ç»„<code>bufferData</code>ï¼Œç„¶åä½¿ç”¨<code>util.types.isTypedArray(bufferData)</code>æ£€æŸ¥å®ƒï¼Œç»“æœæ˜¾ç¤º<code>true</code>ï¼Œè¯æ˜å®ƒæ˜¯ä¸€ä¸ªç±»å‹åŒ–æ•°ç»„ã€‚ç›¸åï¼Œå¯¹äºä¸€ä¸ªæ™®é€šçš„æ•°ç»„<code>normalArray</code>ï¼ŒåŒæ ·çš„æ£€æŸ¥è¿”å›äº†<code>false</code>ï¼Œè¡¨æ˜å®ƒä¸æ˜¯ç±»å‹åŒ–æ•°ç»„ã€‚</p></li><li><p><strong>å‡½æ•°å‚æ•°æ ¡éªŒ</strong></p><p>å¦‚æœä½ æ­£åœ¨ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°ä¸“é—¨å¤„ç†ç±»å‹åŒ–æ•°ç»„çš„æ•°æ®ï¼Œé‚£ä¹ˆä½ å¯èƒ½éœ€è¦ç¡®è®¤ä¼ é€’ç»™è¯¥å‡½æ•°çš„å‚æ•°ç¡®å®æ˜¯ç±»å‹åŒ–æ•°ç»„ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">function</span><span style="color:#88C0D0;"> processData</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">data</span><span style="color:#ECEFF4;">)</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#81A1C1;">!</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isTypedArray</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">data</span><span style="color:#D8DEE9FF;">)) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#81A1C1;">    throw</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> TypeError</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Expected a TypedArray</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span></span>
<span class="line"><span style="color:#616E88;">  // å¤„ç†ç±»å‹åŒ–æ•°ç»„æ•°æ®...</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">try</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#88C0D0;">  processData</span><span style="color:#D8DEE9FF;">(</span><span style="color:#81A1C1;">new</span><span style="color:#88C0D0;"> Uint16Array</span><span style="color:#D8DEE9FF;">([</span><span style="color:#B48EAD;">5</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 6</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 7</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 8</span><span style="color:#D8DEE9FF;">]))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // æ­£ç¡®çš„è°ƒç”¨</span></span>
<span class="line"><span style="color:#88C0D0;">  processData</span><span style="color:#D8DEE9FF;">([</span><span style="color:#B48EAD;">5</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 6</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 7</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 8</span><span style="color:#D8DEE9FF;">])</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¿™å°†æŠ›å‡ºé”™è¯¯</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;"> catch</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">error</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">error</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">error</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // æ‰“å°é”™è¯¯ä¿¡æ¯</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªåä¸º<code>processData</code>çš„å‡½æ•°ï¼Œå®ƒæœŸæœ›æ¥æ”¶ä¸€ä¸ªç±»å‹åŒ–æ•°ç»„ä½œä¸ºå‚æ•°ã€‚é€šè¿‡ä½¿ç”¨<code>util.types.isTypedArray(data)</code>è¿›è¡Œæ£€æŸ¥ï¼Œæˆ‘ä»¬èƒ½å¤Ÿç¡®ä¿åªå¤„ç†æ­£ç¡®ç±»å‹çš„æ•°æ®ï¼Œä»è€Œé¿å…åœ¨å¤„ç†éç±»å‹åŒ–æ•°ç»„æ—¶å¯èƒ½å‡ºç°çš„é”™è¯¯ã€‚</p></li></ol><p>é€šè¿‡ä»¥ä¸Šä¾‹å­ï¼Œä½ åº”è¯¥å¯¹<code>util.types.isTypedArray(value)</code>æœ‰äº†ä¸€ä¸ªæ¸…æ™°çš„ç†è§£ã€‚å®ƒæ˜¯ Node.js å·¥å…·ç®±ä¸­çš„ä¸€ä¸ªå°å·¥å…·ï¼Œä½†åœ¨å¤„ç†ç‰¹å®šç±»å‹æ•°æ®æ—¶éå¸¸æœ‰ç”¨ã€‚å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°æŒæ¡ Node.js å’Œ JavaScript çš„æ•°æ®å¤„ç†ï¼</p><h3 id="util-types-isuint8array-value" tabindex="-1"><a class="header-anchor" href="#util-types-isuint8array-value"><span><a href="https://nodejs.org/docs/latest/api/util.html#utiltypesisuint8arrayvalue" target="_blank" rel="noopener noreferrer">util.types.isUint8Array(value)</a></span></a></h3><p>å½“æˆ‘ä»¬è°ˆè®º<code>util.types.isUint8Array(value)</code>åœ¨ Node.js ä¸­ï¼Œæˆ‘ä»¬å®é™…ä¸Šæ˜¯åœ¨è®¨è®ºä¸€ä¸ªå·¥å…·å‡½æ•°ï¼Œå®ƒå¸®åŠ©æˆ‘ä»¬è¯†åˆ«ä¸€ä¸ªç‰¹å®šçš„å€¼æ˜¯å¦ä¸º<code>Uint8Array</code>ç±»å‹ã€‚è¦ç†è§£è¿™ä¸ªæ¦‚å¿µï¼Œé¦–å…ˆæˆ‘ä»¬éœ€è¦äº†è§£ä¸€äº›åŸºç¡€çŸ¥è¯†ã€‚</p><h3 id="åŸºç¡€çŸ¥è¯†-2" tabindex="-1"><a class="header-anchor" href="#åŸºç¡€çŸ¥è¯†-2"><span>åŸºç¡€çŸ¥è¯†</span></a></h3><ul><li><strong>Node.js</strong>ï¼šè¿™æ˜¯ä¸€ä¸ªåŸºäº Chrome V8 å¼•æ“çš„ JavaScript è¿è¡Œç¯å¢ƒï¼Œå®ƒå…è®¸ä½ åœ¨æœåŠ¡å™¨ç«¯è¿è¡Œ JavaScript ä»£ç ã€‚</li><li><strong>util æ¨¡å—</strong>ï¼šNode.js æ ¸å¿ƒåº“ä¹‹ä¸€ï¼Œæä¾›äº†ä¸€ç³»åˆ—å®ç”¨å‡½æ•°ï¼Œç”¨äºå¤„ç†æ•°æ®ç±»å‹æ£€æŸ¥ã€ç»§æ‰¿ç­‰å¸¸è§ä»»åŠ¡ã€‚</li><li><strong>Uint8Array</strong>ï¼šè¿™æ˜¯ JavaScript ä¸­çš„ä¸€ä¸ªç±»å‹åŒ–æ•°ç»„ï¼Œç”¨äºå¤„ç†äºŒè¿›åˆ¶æ•°æ®ã€‚æ¯ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ª 8 ä½æ— ç¬¦å·æ•´æ•°ï¼Œå–å€¼èŒƒå›´ä¸º 0 åˆ° 255ã€‚</li></ul><h3 id="util-types-isuint8array-value-1" tabindex="-1"><a class="header-anchor" href="#util-types-isuint8array-value-1"><span>util.types.isUint8Array(value)</span></a></h3><p>è¿™ä¸ªå‡½æ•°çš„ä½œç”¨æ˜¯åˆ¤æ–­ç»™å®šçš„å€¼æ˜¯å¦æ˜¯ä¸€ä¸ª<code>Uint8Array</code>å®ä¾‹ã€‚å¦‚æœæ˜¯ï¼Œå®ƒä¼šè¿”å›<code>true</code>ï¼›å¦åˆ™è¿”å›<code>false</code>ã€‚</p><h3 id="å‚æ•°-6" tabindex="-1"><a class="header-anchor" href="#å‚æ•°-6"><span>å‚æ•°</span></a></h3><ul><li><strong>value</strong>ï¼šä»»æ„å€¼ï¼Œå‡½æ•°å°†æ£€æŸ¥è¿™ä¸ªå€¼æ˜¯å¦ä¸º<code>Uint8Array</code>ç±»å‹ã€‚</li></ul><h3 id="ä½¿ç”¨åœºæ™¯ä¸¾ä¾‹-2" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨åœºæ™¯ä¸¾ä¾‹-2"><span>ä½¿ç”¨åœºæ™¯ä¸¾ä¾‹</span></a></h3><h4 id="_1-å¤„ç†äºŒè¿›åˆ¶æ•°æ®" tabindex="-1"><a class="header-anchor" href="#_1-å¤„ç†äºŒè¿›åˆ¶æ•°æ®"><span>1. å¤„ç†äºŒè¿›åˆ¶æ•°æ®</span></a></h4><p>å‡è®¾ä½ æ­£åœ¨å¼€å‘ä¸€ä¸ªåŠŸèƒ½ï¼Œéœ€è¦ä»ç½‘ç»œä¸‹è½½å›¾ç‰‡ï¼Œå¹¶åœ¨æœåŠ¡å™¨ä¸Šå¤„ç†è¿™äº›å›¾ç‰‡ã€‚å›¾ç‰‡æ•°æ®åœ¨ JavaScript ä¸­å¯ä»¥è¡¨ç¤ºä¸º<code>Uint8Array</code>ï¼Œä»¥ä¾¿äºæ“ä½œå…¶ä¸­çš„äºŒè¿›åˆ¶æ•°æ®ã€‚ä½¿ç”¨<code>util.types.isUint8Array()</code>å¯ä»¥å¸®åŠ©ä½ ç¡®è®¤æ•°æ®æ˜¯å¦å·²ç»æ­£ç¡®åœ°è¢«è½¬æ¢æˆ–æ¥æ”¶ä¸º<code>Uint8Array</code>ç±»å‹ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> https</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">https</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">https</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">get</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">https://example.com/image.png</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> (</span><span style="color:#D8DEE9;">res</span><span style="color:#ECEFF4;">)</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  const</span><span style="color:#D8DEE9;"> dataChunks</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9FF;"> []</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">  res</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">on</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">data</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> (</span><span style="color:#D8DEE9;">chunk</span><span style="color:#ECEFF4;">)</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">    dataChunks</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">push</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">chunk</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">  res</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">on</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">end</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> ()</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">    const</span><span style="color:#D8DEE9;"> imageData</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> Buffer</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">concat</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">dataChunks</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isUint8Array</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">imageData</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡ºï¼štrue æˆ– false</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-websockets-æ•°æ®é€šä¿¡" tabindex="-1"><a class="header-anchor" href="#_2-websockets-æ•°æ®é€šä¿¡"><span>2. WebSockets æ•°æ®é€šä¿¡</span></a></h4><p>åœ¨ä½¿ç”¨ WebSockets è¿›è¡Œå®æ—¶æ•°æ®é€šä¿¡æ—¶ï¼Œå‘é€å’Œæ¥æ”¶çš„æ•°æ®åŒ…é€šå¸¸æ˜¯äºŒè¿›åˆ¶æ•°æ®ã€‚æ ¡éªŒè¿™äº›æ•°æ®åŒ…æ˜¯å¦ä¸º<code>Uint8Array</code>ç±»å‹æœ‰åŠ©äºç¡®ä¿æ•°æ®çš„æ­£ç¡®å¤„ç†å’Œå®‰å…¨æ€§ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> WebSocket</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">ws</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> ws</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> WebSocket</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">ws://example.com/</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">ws</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">on</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">message</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#81A1C1;"> function</span><span style="color:#88C0D0;"> incoming</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">data</span><span style="color:#ECEFF4;">)</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isUint8Array</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">data</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡ºï¼štrue å¦‚æœæ•°æ®æ˜¯Uint8Arrayç±»å‹</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="å°ç»“-5" tabindex="-1"><a class="header-anchor" href="#å°ç»“-5"><span>å°ç»“</span></a></h3><p><code>util.types.isUint8Array(value)</code>åœ¨ Node.js ä¸­æ˜¯ä¸€ä¸ªå¾ˆå®ç”¨çš„å‡½æ•°ï¼Œå°¤å…¶æ˜¯åœ¨å¤„ç†äºŒè¿›åˆ¶æ•°æ®æ—¶ã€‚å®ƒå¸®åŠ©å¼€å‘è€…é€šè¿‡ç®€å•çš„çœŸ/å‡æ£€æŸ¥æ¥ç¡®è®¤æ•°æ®çš„ç±»å‹ï¼Œä»è€Œç¡®ä¿æ•°æ®èƒ½å¤ŸæŒ‰é¢„æœŸè¢«æ­£ç¡®å¤„ç†ã€‚ä»¥ä¸Šåªæ˜¯<code>Uint8Array</code>çš„ä¸¤ä¸ªä½¿ç”¨åœºæ™¯ï¼Œä½†å®ƒåœ¨æ–‡ä»¶å¤„ç†ã€æ•°æ®ä¼ è¾“ç­‰å¤šç§åœºåˆéƒ½éå¸¸æœ‰ç”¨ã€‚</p><h3 id="util-types-isuint8clampedarray-value" tabindex="-1"><a class="header-anchor" href="#util-types-isuint8clampedarray-value"><span><a href="https://nodejs.org/docs/latest/api/util.html#utiltypesisuint8clampedarrayvalue" target="_blank" rel="noopener noreferrer">util.types.isUint8ClampedArray(value)</a></span></a></h3><p>Node.js ä¸­çš„<code>util.types.isUint8ClampedArray(value)</code>æ–¹æ³•æ˜¯ç”¨æ¥åˆ¤æ–­ä¸€ä¸ªå€¼æ˜¯å¦ä¸º<code>Uint8ClampedArray</code>ç±»å‹ã€‚åœ¨æ·±å…¥è§£é‡Šä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆäº†è§£å‡ ä¸ªåŸºæœ¬æ¦‚å¿µã€‚</p><h3 id="åŸºæœ¬æ¦‚å¿µ-8" tabindex="-1"><a class="header-anchor" href="#åŸºæœ¬æ¦‚å¿µ-8"><span>åŸºæœ¬æ¦‚å¿µ</span></a></h3><ol><li><strong>Node.js</strong>: ä¸€ä¸ªåŸºäº Chrome V8 å¼•æ“çš„ JavaScript è¿è¡Œç¯å¢ƒï¼Œè®©ä½ å¯ä»¥åœ¨æœåŠ¡å™¨ç«¯è¿è¡Œ JavaScript ä»£ç ã€‚</li><li><strong>util æ¨¡å—</strong>: Node.js å†…ç½®çš„ä¸€ä¸ªå·¥å…·åº“ï¼Œæä¾›ä¸€ç³»åˆ—å®ç”¨å‡½æ•°ï¼Œç”¨ä»¥å¤„ç†å„ç§ä¸åŒçš„æ•°æ®ç±»å‹ç­‰ã€‚</li><li><strong>Uint8ClampedArray</strong>: è¿™æ˜¯ JavaScript ä¸­çš„ä¸€ç§ç±»å‹åŒ–æ•°ç»„ï¼Œç”¨äºå­˜å‚¨ä» 0 åˆ° 255ï¼ˆå«ï¼‰çš„æ•´æ•°åºåˆ—ã€‚ä¸æ™®é€šçš„<code>Uint8Array</code>ä¸åŒï¼Œ<code>Uint8ClampedArray</code>åœ¨èµ‹å€¼æ—¶ä¼šè‡ªåŠ¨å°†è¶…å‡ºè¿™ä¸ªèŒƒå›´çš„å€¼â€œé’³åˆ¶â€åˆ° 0 æˆ– 255ã€‚è¿™å¯¹å›¾åƒå¤„ç†ç­‰é¢†åŸŸç‰¹åˆ«æœ‰ç”¨ã€‚</li></ol><h3 id="ä»€ä¹ˆæ˜¯util-types-isuint8clampedarray-value" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯util-types-isuint8clampedarray-value"><span>ä»€ä¹ˆæ˜¯<code>util.types.isUint8ClampedArray(value)</code></span></a></h3><p>ç°åœ¨æˆ‘ä»¬çŸ¥é“äº†<code>Uint8ClampedArray</code>æ˜¯ä¸€ç§ç‰¹æ®Šçš„æ•°ç»„ï¼Œé‚£ä¹ˆ<code>util.types.isUint8ClampedArray(value)</code>æ–¹æ³•å°±æ˜¯ç”¨æ¥æ£€æµ‹ä¸€ä¸ªç»™å®šçš„å€¼æ˜¯å¦æ­£æ˜¯è¿™ç§ç±»å‹çš„æ•°ç»„ã€‚å¦‚æœæ˜¯ï¼Œåˆ™è¿”å›<code>true</code>ï¼›å¦‚æœä¸æ˜¯ï¼Œè¿”å›<code>false</code>ã€‚</p><h3 id="å®é™…åº”ç”¨çš„ä¾‹å­" tabindex="-1"><a class="header-anchor" href="#å®é™…åº”ç”¨çš„ä¾‹å­"><span>å®é™…åº”ç”¨çš„ä¾‹å­</span></a></h3><p>å‡è®¾ä½ æ­£åœ¨ç¼–å†™ä¸€ä¸ªå›¾åƒå¤„ç†çš„åº”ç”¨ï¼Œç”¨æˆ·ä¸Šä¼ äº†å›¾ç‰‡ï¼Œä½ éœ€è¦å¯¹å›¾ç‰‡çš„æ¯ä¸ªåƒç´ ç‚¹è¿›è¡Œå¤„ç†ã€‚åœ¨ JavaScript ä¸­ï¼Œå›¾åƒçš„åƒç´ æ•°æ®å¾€å¾€é€šè¿‡<code>Uint8ClampedArray</code>æ¥è¡¨ç¤ºï¼Œå› ä¸ºæ¯ä¸ªåƒç´ ç‚¹çš„é¢œè‰²åˆ†é‡ï¼ˆçº¢ã€ç»¿ã€è“å’Œé€æ˜åº¦ï¼‰éƒ½æ˜¯ 0 åˆ° 255 ä¹‹é—´çš„æ•´æ•°ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å‡è®¾æˆ‘ä»¬æœ‰ä¸€æ®µåƒç´ æ•°æ®ï¼Œæ˜¯Uint8ClampedArrayç±»å‹</span></span>
<span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> pixels</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> Uint8ClampedArray</span><span style="color:#D8DEE9FF;">([</span><span style="color:#B48EAD;">255</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 128</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 64</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 0</span><span style="color:#D8DEE9FF;">])</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// ä½¿ç”¨util.types.isUint8ClampedArray()æ£€æŸ¥</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isUint8ClampedArray</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">pixels</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡º: true</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// ç°åœ¨æˆ‘ä»¬å°è¯•æ£€æŸ¥ä¸€ä¸ªæ™®é€šæ•°ç»„</span></span>
<span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> ordinaryArray</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9FF;"> [</span><span style="color:#B48EAD;">255</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 128</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 64</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 0</span><span style="color:#D8DEE9FF;">]</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å†æ¬¡æ£€æŸ¥ï¼Œè¿™æ¬¡æ˜¯æ™®é€šæ•°ç»„</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isUint8ClampedArray</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">ordinaryArray</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡º: false</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ª<code>Uint8ClampedArray</code>ç±»å‹çš„å˜é‡<code>pixels</code>ï¼Œè¿™å¯ä»¥æ¨¡æ‹Ÿä¸€ä¸ªç®€å•çš„åƒç´ æ•°æ®ã€‚æˆ‘ä»¬ä½¿ç”¨<code>util.types.isUint8ClampedArray()</code>æ¥éªŒè¯å®ƒç¡®å®æ˜¯<code>Uint8ClampedArray</code>ç±»å‹ã€‚æ¥ç€ï¼Œæˆ‘ä»¬åˆåˆ›å»ºäº†ä¸€ä¸ªæ™®é€šçš„æ•°ç»„<code>ordinaryArray</code>å¹¶å†æ¬¡è¿›è¡ŒéªŒè¯ï¼Œç»“æœæ˜¾ç¤ºå®ƒä¸æ˜¯<code>Uint8ClampedArray</code>ã€‚</p><h3 id="æ€»ç»“-18" tabindex="-1"><a class="header-anchor" href="#æ€»ç»“-18"><span>æ€»ç»“</span></a></h3><p>é€šè¿‡ä½¿ç”¨<code>util.types.isUint8ClampedArray(value)</code>ï¼Œä½ å¯ä»¥ç¡®å®šä¸€ä¸ªå˜é‡æ˜¯å¦æ˜¯<code>Uint8ClampedArray</code>ã€‚è¿™åœ¨å¤„ç†ç‰¹å®šç±»å‹çš„æ•°æ®ï¼ˆå¦‚å›¾åƒæ•°æ®ï¼‰æ—¶éå¸¸æœ‰ç”¨ï¼Œèƒ½å¤Ÿç¡®ä¿ä½ çš„å‡½æ•°æˆ–æ–¹æ³•æ¥æ”¶åˆ°æ­£ç¡®ç±»å‹çš„å‚æ•°ã€‚</p><h3 id="util-types-isuint16array-value" tabindex="-1"><a class="header-anchor" href="#util-types-isuint16array-value"><span><a href="https://nodejs.org/docs/latest/api/util.html#utiltypesisuint16arrayvalue" target="_blank" rel="noopener noreferrer">util.types.isUint16Array(value)</a></span></a></h3><p>Node.js ä¸­çš„ <code>util.types.isUint16Array(value)</code> æ˜¯ä¸€ä¸ªå®ç”¨å‡½æ•°ï¼Œå®ƒå¸®åŠ©ä½ ç¡®å®šä¸€ä¸ªç»™å®šçš„å€¼æ˜¯å¦ä¸ºä¸€ä¸ª Uint16Arrayã€‚è¿™å¬èµ·æ¥å¯èƒ½æœ‰äº›å¤æ‚ï¼Œä½†è®©æˆ‘åˆ†æ­¥éª¤è§£é‡Šå®ƒï¼Œå¹¶é€šè¿‡ä¸€äº›ä¾‹å­æ¥å¸®åŠ©ä½ ç†è§£ã€‚</p><h3 id="ä»€ä¹ˆæ˜¯-uint16array" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯-uint16array"><span>ä»€ä¹ˆæ˜¯ Uint16Arrayï¼Ÿ</span></a></h3><p>åœ¨æ·±å…¥äº†è§£ <code>util.types.isUint16Array(value)</code> ä¹‹å‰ï¼Œé¦–å…ˆè¦ç†è§£ Uint16Array æ˜¯ä»€ä¹ˆã€‚<code>Uint16Array</code> å±äº JavaScript çš„ â€œtyped arraysâ€ (ç±»å‹åŒ–æ•°ç»„) èŒƒç•´ã€‚é¡¾åæ€ä¹‰ï¼Œå®ƒæ˜¯ä¸€ä¸ªç”¨äºå­˜å‚¨ 16 ä½æ— ç¬¦å·æ•´æ•°çš„æ•°ç»„ã€‚åœ¨è¿™ä¸ªæ•°ç»„ä¸­ï¼Œæ¯ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ª 16 ä½ï¼ˆ2 å­—èŠ‚ï¼‰çš„æ— ç¬¦å·æ•´æ•°ï¼Œå–å€¼èŒƒå›´ä» 0 åˆ° 65535ã€‚</p><h3 id="ä¸ºä»€ä¹ˆéœ€è¦-util-types-isuint16array-value" tabindex="-1"><a class="header-anchor" href="#ä¸ºä»€ä¹ˆéœ€è¦-util-types-isuint16array-value"><span>ä¸ºä»€ä¹ˆéœ€è¦ <code>util.types.isUint16Array(value)</code>ï¼Ÿ</span></a></h3><p>åœ¨ç¼–ç¨‹æ—¶ï¼Œå°¤å…¶æ˜¯å¤„ç†ä¸åŒç±»å‹æ•°æ®æ—¶ï¼Œç»å¸¸éœ€è¦åˆ¤æ–­ä¸€ä¸ªå˜é‡æˆ–å€¼çš„å…·ä½“ç±»å‹ã€‚åœ¨ Node.js ç¯å¢ƒä¸‹ï¼Œ<code>util.types.isUint16Array(value)</code> å‡½æ•°æ­£æ˜¯ç”¨äºè¿™æ ·çš„åœºæ™¯ï¼šå®ƒå¸®ä½ ç¡®è®¤æŸä¸ªå€¼æ˜¯å¦ç¡®å®æ˜¯ä¸€ä¸ª Uint16Array ç±»å‹çš„å¯¹è±¡ã€‚</p><h3 id="å¦‚ä½•ä½¿ç”¨-util-types-isuint16array-value" tabindex="-1"><a class="header-anchor" href="#å¦‚ä½•ä½¿ç”¨-util-types-isuint16array-value"><span>å¦‚ä½•ä½¿ç”¨ <code>util.types.isUint16Array(value)</code>ï¼Ÿ</span></a></h3><p>è®©æˆ‘ä»¬é€šè¿‡å‡ ä¸ªç®€å•çš„ç¤ºä¾‹æ¥çœ‹çœ‹å¦‚ä½•ä½¿ç”¨è¿™ä¸ªå‡½æ•°ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// åˆ›å»ºä¸€ä¸ª Uint16Array ç±»å‹çš„æ•°ç»„</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> myArray</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> Uint16Array</span><span style="color:#D8DEE9FF;">([</span><span style="color:#B48EAD;">10</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 20</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 30</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 40</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 50</span><span style="color:#D8DEE9FF;">])</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// ä½¿ç”¨ util.types.isUint16Array() æ£€æŸ¥ myArray æ˜¯å¦ä¸º Uint16Array</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isUint16Array</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">myArray</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡ºï¼štrue</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å¯¹æ¯”å…¶ä»–ç±»å‹</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> notTypedArray</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9FF;"> [</span><span style="color:#B48EAD;">10</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 20</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 30</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 40</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 50</span><span style="color:#D8DEE9FF;">]</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // æ™®é€šæ•°ç»„</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isUint16Array</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">notTypedArray</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡ºï¼šfalse</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> someObject</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> {}</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // ç©ºå¯¹è±¡</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isUint16Array</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">someObject</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡ºï¼šfalse</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> int8Array</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> Int8Array</span><span style="color:#D8DEE9FF;">([</span><span style="color:#B48EAD;">10</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 20</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 30</span><span style="color:#D8DEE9FF;">])</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // Int8Array ç±»å‹æ•°ç»„</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isUint16Array</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">int8Array</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡ºï¼šfalse</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="å®é™…è¿ç”¨ç¤ºä¾‹-14" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨ç¤ºä¾‹-14"><span>å®é™…è¿ç”¨ç¤ºä¾‹</span></a></h3><ol><li><p><strong>æ•°æ®å¤„ç†</strong>ï¼šå½“ä½ çš„åº”ç”¨æ¶‰åŠåˆ°å¤§é‡çš„æ•°å€¼æ•°æ®å¤„ç†æ—¶ï¼Œç‰¹åˆ«æ˜¯éœ€è¦ç²¾ç¡®æ§åˆ¶æ•°æ®å¤§å°å’Œæ€§èƒ½çš„åœºåˆï¼Œä½ å¯èƒ½ä¼šé€‰æ‹©ä½¿ç”¨ç±»å‹åŒ–æ•°ç»„ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ æ­£åœ¨å¼€å‘ä¸€ä¸ªéŸ³è§†é¢‘å¤„ç†åº”ç”¨ï¼Œé‚£ä¹ˆä½¿ç”¨ <code>Uint16Array</code> å¯èƒ½æ›´é€‚åˆå­˜å‚¨åƒç´ å€¼æˆ–è€…éŸ³é¢‘é‡‡æ ·æ•°æ®ã€‚ä½¿ç”¨ <code>util.types.isUint16Array(value)</code> å¯ä»¥å¸®åŠ©ä½ åœ¨æ•°æ®å¤„ç†å‰éªŒè¯æ•°æ®ç±»å‹ï¼Œç¡®ä¿æ•°æ®å®‰å…¨å’Œç¨‹åºçš„å¥å£®æ€§ã€‚</p></li><li><p><strong>ç½‘ç»œé€šä¿¡</strong>ï¼šåœ¨è¿›è¡Œç½‘ç»œé€šä¿¡ï¼Œç‰¹åˆ«æ˜¯ä¸ç¡¬ä»¶è®¾å¤‡äº¤äº’æ—¶ï¼Œä½ å¯èƒ½éœ€è¦ä½¿ç”¨ç‰¹å®šæ ¼å¼çš„äºŒè¿›åˆ¶æ•°æ®ã€‚<code>Uint16Array</code> åœ¨è¿™ç§åœºæ™¯ä¸‹éå¸¸æœ‰ç”¨ï¼Œå› ä¸ºå®ƒå¯ä»¥ä»£è¡¨ä¸€ç³»åˆ—çš„ 16 ä½æ•°å€¼ï¼Œéå¸¸é€‚åˆè¡¨ç¤ºä¾‹å¦‚æ¸©åº¦ä¼ æ„Ÿå™¨ã€æ¹¿åº¦ä¼ æ„Ÿå™¨ç­‰è®¾å¤‡çš„æ•°æ®ã€‚é€šè¿‡ <code>util.types.isUint16Array(value)</code> æ£€æŸ¥ï¼Œä½ å¯ä»¥ç¡®ä¿å‘é€æˆ–æ¥æ”¶çš„æ•°æ®ç¬¦åˆé¢„æœŸçš„æ ¼å¼ã€‚</p></li><li><p><strong>Web å¼€å‘</strong>ï¼šåœ¨ Web å¼€å‘ä¸­ï¼Œå¯èƒ½éœ€è¦å¤„ç†æ¥è‡ª Web API æˆ–å…¶ä»–æºçš„ç±»å‹åŒ–æ•°ç»„æ•°æ®ã€‚ä½¿ç”¨ <code>util.types.isUint16Array(value)</code> å‡½æ•°å¯ä»¥åœ¨æ•°æ®å¤„ç†ä¹‹å‰è¿›è¡Œå¿«é€Ÿæ£€æŸ¥ï¼Œé¿å…æ½œåœ¨çš„ç±»å‹é”™è¯¯å¯¼è‡´ç¨‹åºå´©æºƒã€‚</p></li></ol><h3 id="æ€»ç»“-19" tabindex="-1"><a class="header-anchor" href="#æ€»ç»“-19"><span>æ€»ç»“</span></a></h3><p><code>util.types.isUint16Array(value)</code> æ˜¯ Node.js æä¾›çš„ä¸€ä¸ªå®ç”¨å·¥å…·å‡½æ•°ï¼Œå®ƒå…è®¸å¼€å‘è€…åˆ¤æ–­ç»™å®šçš„å€¼æ˜¯å¦ä¸º Uint16Array ç±»å‹ã€‚é€šè¿‡ä½¿ç”¨è¿™ä¸ªå‡½æ•°ï¼Œå¼€å‘è€…å¯ä»¥åœ¨å¤„ç†ç±»å‹åŒ–æ•°ç»„æ—¶å¢åŠ é¢å¤–çš„ç±»å‹å®‰å…¨æ€§ï¼Œé¿å…ç±»å‹é”™è¯¯ï¼Œå¹¶ç¡®ä¿ç¨‹åºçš„ç¨³å®šè¿è¡Œã€‚</p><h3 id="util-types-isuint32array-value" tabindex="-1"><a class="header-anchor" href="#util-types-isuint32array-value"><span><a href="https://nodejs.org/docs/latest/api/util.html#utiltypesisuint32arrayvalue" target="_blank" rel="noopener noreferrer">util.types.isUint32Array(value)</a></span></a></h3><p>å½“ä½ å¼€å§‹ä½¿ç”¨ Node.jsï¼Œä½ ä¼šé‡åˆ°ä¸€ä¸ªå¼ºå¤§çš„å†…ç½®æ¨¡å—å«ä½œ<code>util</code>ã€‚è¿™ä¸ªæ¨¡å—æä¾›äº†å¾ˆå¤šå®ç”¨çš„å·¥å…·å‡½æ•°ï¼Œèƒ½å¸®åŠ©ä½ è¿›è¡Œæ•°æ®ç±»å‹æ£€æŸ¥ã€è°ƒè¯•ç­‰ä»»åŠ¡ã€‚ä»Šå¤©æˆ‘ä»¬è¦èŠçš„æ˜¯<code>util.types.isUint32Array(value)</code>è¿™ä¸ªç‰¹å®šçš„å‡½æ•°ã€‚</p><h3 id="ä»€ä¹ˆæ˜¯util-types-isuint32array-value" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯util-types-isuint32array-value"><span>ä»€ä¹ˆæ˜¯<code>util.types.isUint32Array(value)</code>ï¼Ÿ</span></a></h3><p>ç®€å•æ¥è¯´ï¼Œ<code>util.types.isUint32Array(value)</code>æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒå¯ä»¥å¸®ä½ åˆ¤æ–­ç»™å®šçš„å€¼æ˜¯å¦ä¸ºä¸€ä¸ª<code>Uint32Array</code>ã€‚<code>Uint32Array</code>æ˜¯ JavaScript ä¸­ä¸€ç§è¡¨ç¤º 32 ä½æ— ç¬¦å·æ•´å‹æ•°ç»„çš„ç±»å‹ï¼Œå±äº TypedArrayï¼ˆç±»å‹åŒ–æ•°ç»„ï¼‰çš„ä¸€ç§ã€‚ç±»å‹åŒ–æ•°ç»„å…è®¸ä½ ä»¥æ›´æ¥è¿‘åº•å±‚çš„æ–¹å¼å¤„ç†äºŒè¿›åˆ¶æ•°æ®ã€‚</p><p>åœ¨ JavaScript ä¸­ï¼Œå¤„ç†æ•°å­—å’ŒäºŒè¿›åˆ¶æ•°æ®æœ‰å¾ˆå¤šç§æ–¹å¼ï¼Œè€Œä½¿ç”¨ TypedArrays æ˜¯ä¸€ç§é«˜æ•ˆçš„æ–¹æ³•ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤„ç†åƒå›¾åƒæ•°æ®æˆ–éŸ³è§†é¢‘æµè¿™æ ·çš„å¤§é‡æ•°æ®æ—¶ã€‚</p><h3 id="ä½¿ç”¨åœºæ™¯ç¤ºä¾‹-1" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨åœºæ™¯ç¤ºä¾‹-1"><span>ä½¿ç”¨åœºæ™¯ç¤ºä¾‹</span></a></h3><h4 id="_1-å›¾åƒå¤„ç†" tabindex="-1"><a class="header-anchor" href="#_1-å›¾åƒå¤„ç†"><span>1. å›¾åƒå¤„ç†ï¼š</span></a></h4><p>å‡è®¾ä½ æ­£åœ¨ç¼–å†™ä¸€ä¸ª Node.js åº”ç”¨ï¼Œéœ€è¦å¤„ç†å›¾åƒæ•°æ®ã€‚å›¾åƒå¯ä»¥è¢«è½¬æ¢æˆä¸€ä¸ªå·¨å¤§çš„<code>Uint32Array</code>ï¼Œæ¯ä¸ªå…ƒç´ ä»£è¡¨å›¾åƒä¸­çš„ä¸€ä¸ªåƒç´ ã€‚åˆ©ç”¨<code>util.types.isUint32Array(value)</code>ï¼Œä½ å¯ä»¥éªŒè¯å¤„ç†å‡½æ•°æ¥æ”¶åˆ°çš„æ•°æ®ç¡®å®æ˜¯ä¸€ä¸ª<code>Uint32Array</code>ï¼Œä¹‹åå®‰å…¨åœ°è¿›è¡Œåƒç´ çº§æ“ä½œï¼Œæ¯”å¦‚è°ƒæ•´äº®åº¦ã€å¯¹æ¯”åº¦ç­‰ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">function</span><span style="color:#88C0D0;"> adjustBrightness</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">imageData</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> adjustment</span><span style="color:#ECEFF4;">)</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">    if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#81A1C1;">!</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isUint32Array</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">imageData</span><span style="color:#D8DEE9FF;">)) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#81A1C1;">        throw</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> TypeError</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">imageData must be a Uint32Array</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">    // å‡è®¾çš„ç®€å•äº®åº¦è°ƒæ•´é€»è¾‘</span></span>
<span class="line"><span style="color:#81A1C1;">    for</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> i</span><span style="color:#81A1C1;"> =</span><span style="color:#B48EAD;"> 0</span><span style="color:#81A1C1;">;</span><span style="color:#D8DEE9;"> i</span><span style="color:#ECEFF4;"> `</span><span style="color:#A3BE8C;">&lt;</span><span style="color:#ECEFF4;">`</span><span style="color:#D8DEE9;"> imageData</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9FF;">length</span><span style="color:#81A1C1;">;</span><span style="color:#D8DEE9;"> i</span><span style="color:#81A1C1;">++</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">        imageData</span><span style="color:#D8DEE9FF;">[</span><span style="color:#D8DEE9;">i</span><span style="color:#D8DEE9FF;">] </span><span style="color:#81A1C1;">+=</span><span style="color:#D8DEE9;"> adjustment</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">    }</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å‡è®¾çš„å›¾åƒæ•°æ®</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> someImageData</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> Uint32Array</span><span style="color:#D8DEE9FF;">([</span><span style="color:#B48EAD;">255</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 128</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 64</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 32</span><span style="color:#D8DEE9FF;">])</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">try</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#88C0D0;">    adjustBrightness</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">someImageData</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 10</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">Brightness adjusted:</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> someImageData</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;"> catch</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">e</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">error</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">e</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">message</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-éŸ³é¢‘æ•°æ®å¤„ç†" tabindex="-1"><a class="header-anchor" href="#_2-éŸ³é¢‘æ•°æ®å¤„ç†"><span>2. éŸ³é¢‘æ•°æ®å¤„ç†ï¼š</span></a></h4><p>åœ¨å¤„ç†éŸ³é¢‘æ•°æ®æ—¶ï¼Œè‹¥éŸ³é¢‘é‡‡æ ·æ•°æ®æ˜¯ä»¥<code>Uint32Array</code>æ ¼å¼å­˜å‚¨çš„ï¼Œä½ å¯èƒ½éœ€è¦ç¡®è®¤ä½ è·å¾—çš„æ•°æ®æ˜¯æ­£ç¡®çš„ç±»å‹ï¼Œç„¶åè¿›è¡ŒéŸ³é‡è°ƒæ•´ã€é™å™ªç­‰å¤„ç†ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">function</span><span style="color:#88C0D0;"> increaseVolume</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">audioData</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> factor</span><span style="color:#ECEFF4;">)</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#81A1C1;">!</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isUint32Array</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">audioData</span><span style="color:#D8DEE9FF;">)) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#81A1C1;">    throw</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> TypeError</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">audioData must be a Uint32Array</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">  // å¢åŠ éŸ³é‡çš„é€»è¾‘</span></span>
<span class="line"><span style="color:#81A1C1;">  for</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> i</span><span style="color:#81A1C1;"> =</span><span style="color:#B48EAD;"> 0</span><span style="color:#81A1C1;">;</span><span style="color:#D8DEE9;"> i</span><span style="color:#ECEFF4;"> `</span><span style="color:#A3BE8C;">&lt;</span><span style="color:#ECEFF4;">`</span><span style="color:#D8DEE9;"> audioData</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9FF;">length</span><span style="color:#81A1C1;">;</span><span style="color:#D8DEE9;"> i</span><span style="color:#81A1C1;">++</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">    audioData</span><span style="color:#D8DEE9FF;">[</span><span style="color:#D8DEE9;">i</span><span style="color:#D8DEE9FF;">] </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9;"> audioData</span><span style="color:#D8DEE9FF;">[</span><span style="color:#D8DEE9;">i</span><span style="color:#D8DEE9FF;">] </span><span style="color:#81A1C1;">*</span><span style="color:#D8DEE9;"> factor</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å‡è®¾çš„éŸ³é¢‘æ•°æ®</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> sampleAudioData</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> Uint32Array</span><span style="color:#D8DEE9FF;">([</span><span style="color:#B48EAD;">1000</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 2000</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 3000</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 4000</span><span style="color:#D8DEE9FF;">])</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">try</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#88C0D0;">  increaseVolume</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">sampleAudioData</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 1.1</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // æé«˜10%çš„éŸ³é‡</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">Volume increased:</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> sampleAudioData</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;"> catch</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">e</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">error</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">e</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">message</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ç»“è®º-3" tabindex="-1"><a class="header-anchor" href="#ç»“è®º-3"><span>ç»“è®º</span></a></h3><p><code>util.types.isUint32Array(value)</code>æ˜¯ Node.js ä¸­ä¸€ä¸ªéå¸¸å®ç”¨çš„å·¥å…·å‡½æ•°ï¼Œå°¤å…¶æ˜¯åœ¨ä½ éœ€è¦å¤„ç†ç±»å‹åŒ–æ•°ç»„æ—¶ã€‚é€šè¿‡ç¡®ä¿æ•°æ®ç±»å‹æ­£ç¡®ï¼Œå¯ä»¥é¿å…è®¸å¤šæ½œåœ¨çš„é”™è¯¯å’Œå¼‚å¸¸ï¼Œä½¿å¾—ä»£ç æ›´åŠ å¥å£®å’Œå®‰å…¨ã€‚åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå¯¹æ•°æ®ç±»å‹è¿›è¡Œæ˜ç¡®çš„æ£€æŸ¥æ˜¯ä¸€ä¸ªéå¸¸å¥½çš„ä¹ æƒ¯ã€‚</p><h3 id="util-types-isweakmap-value" tabindex="-1"><a class="header-anchor" href="#util-types-isweakmap-value"><span><a href="https://nodejs.org/docs/latest/api/util.html#utiltypesisweakmapvalue" target="_blank" rel="noopener noreferrer">util.types.isWeakMap(value)</a></span></a></h3><p>å½“ç„¶ï¼Œè®©æˆ‘ä»¬ä¸€æ­¥ä¸€æ­¥æ¥è§£æè¿™ä¸ªæ¦‚å¿µã€‚</p><p>é¦–å…ˆï¼Œè¦äº†è§£ <code>util.types.isWeakMap(value)</code> è¿™ä¸ªå‡½æ•°ï¼Œåœ¨ Node.js ä¸­çš„ä½œç”¨ï¼Œæˆ‘ä»¬éœ€è¦æ˜ç™½å‡ ä¸ªåŸºæœ¬æ¦‚å¿µï¼š<code>WeakMap</code>ã€<code>util</code> æ¨¡å—ï¼Œä»¥åŠä¸ºä»€ä¹ˆä¼šæœ‰ç±»å‹æ£€æŸ¥å‡½æ•°å¦‚ <code>isWeakMap</code>ã€‚</p><h3 id="åŸºç¡€æ¦‚å¿µ-2" tabindex="-1"><a class="header-anchor" href="#åŸºç¡€æ¦‚å¿µ-2"><span>åŸºç¡€æ¦‚å¿µ</span></a></h3><ol><li><p><strong>WeakMap</strong>:</p><ul><li><code>WeakMap</code> æ˜¯ JavaScript çš„ä¸€ç§é›†åˆç±»å‹ï¼ˆCollectionï¼‰ï¼Œä¸ Map ç±»ä¼¼ã€‚</li><li>ä¸»è¦åŒºåˆ«åœ¨äºï¼š<code>WeakMap</code> ä¸­çš„é”®æ˜¯å¼±å¼•ç”¨çš„ï¼Œæ„å‘³ç€å¦‚æœæ²¡æœ‰å…¶ä»–å¼•ç”¨æŒ‡å‘é”®å¯¹è±¡ï¼Œè¿™äº›é”®å€¼å¯¹ä¼šè¢«åƒåœ¾å›æ”¶æœºåˆ¶å›æ”¶ã€‚è¿™å¯¹ç®¡ç†å†…å­˜éå¸¸æœ‰å¸®åŠ©ã€‚</li><li>ä¸¾ä¾‹ï¼šå¦‚æœä½ æ­£åœ¨æ„å»ºä¸€ä¸ªåº”ç”¨ï¼Œéœ€è¦å°†é¢å¤–çš„ä¿¡æ¯å…³è”åˆ° DOM å…ƒç´ ä¸Šï¼Œä½†åˆä¸æƒ³é˜»æ­¢é‚£äº› DOM å…ƒç´ è¢«åƒåœ¾å›æ”¶ï¼Œä½¿ç”¨ <code>WeakMap</code> å¯ä»¥å¾ˆå¥½åœ°è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</li></ul></li><li><p><strong>util æ¨¡å—</strong>:</p><ul><li><code>util</code> æ˜¯ Node.js ä¸­çš„ä¸€ä¸ªæ ¸å¿ƒæ¨¡å—ï¼Œæä¾›äº†ä¸€ç³»åˆ—å®ç”¨åŠŸèƒ½ã€‚</li><li>å…¶ä¸­ <code>util.types</code> æ˜¯è¯¥æ¨¡å—ä¸‹çš„ä¸€ä¸ªå‘½åç©ºé—´ï¼Œä¸“é—¨ç”¨äºæä¾›å„ç§æ•°æ®ç±»å‹åˆ¤æ–­çš„æ–¹æ³•ã€‚</li></ul></li><li><p><strong>isWeakMap å‡½æ•°</strong>:</p><ul><li><code>util.types.isWeakMap(value)</code> æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºåˆ¤æ–­ç»™å®šçš„å˜é‡æ˜¯å¦æ˜¯ä¸€ä¸ª <code>WeakMap</code> ç±»å‹çš„å¯¹è±¡ã€‚</li><li>ä½œç”¨ï¼šä¸»è¦ç”¨äºç±»å‹æ£€æµ‹ï¼Œç‰¹åˆ«æ˜¯åœ¨åŠ¨æ€è¯­è¨€ JavaScript ä¸­ï¼Œç¡®å®šä¸€ä¸ªå¯¹è±¡çš„å…·ä½“ç±»å‹å¸¸å¸¸å¾ˆæœ‰å¿…è¦ã€‚</li></ul></li></ol><h3 id="å®é™…è¿ç”¨ç¤ºä¾‹-15" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨ç¤ºä¾‹-15"><span>å®é™…è¿ç”¨ç¤ºä¾‹</span></a></h3><p>å‡è®¾ä½ æ­£åœ¨å¼€å‘ä¸€ä¸ª Node.js åº”ç”¨ï¼Œéœ€è¦å¤„ç†å¤šç§ç±»å‹çš„æ•°æ®ç»“æ„ï¼Œå¹¶ä¸”åœ¨æŸäº›å‡½æ•°ä¸­ï¼Œä½ åªå¸Œæœ›æ¥å— <code>WeakMap</code> ç±»å‹çš„å‚æ•°æ¥è¿›è¡Œç‰¹å®šçš„æ“ä½œã€‚æ­¤æ—¶ï¼Œå°±å¯ä»¥åˆ©ç”¨ <code>util.types.isWeakMap(value)</code> æ¥åˆ¤æ–­ä¼ å…¥çš„å‚æ•°æ˜¯å¦ç¬¦åˆè¦æ±‚ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// åˆ›å»ºä¸€ä¸ªWeakMapå¯¹è±¡</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> wm1</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> WeakMap</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#616E88;">// åˆ›å»ºä¸€ä¸ªMapå¯¹è±¡ï¼Œç”¨ä½œå¯¹æ¯”</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> m1</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> Map</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// æ·»åŠ æµ‹è¯•æ•°æ®</span></span>
<span class="line"><span style="color:#D8DEE9;">wm1</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">set</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">{},</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">weakmapValue</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">m1</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">set</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">{},</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">mapValue</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// æ£€æŸ¥æ˜¯å¦ä¸ºWeakMapç±»å‹</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isWeakMap</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">wm1</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡º: true</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isWeakMap</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">m1</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡º: false</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">function</span><span style="color:#88C0D0;"> processWeakMap</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">wm</span><span style="color:#ECEFF4;">)</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isWeakMap</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">wm</span><span style="color:#D8DEE9FF;">)) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">This is a WeakMap. Proceed with WeakMap specific logic.</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#616E88;">    // åœ¨æ­¤å¤„ç¼–å†™å¤„ç†WeakMapçš„ç‰¹å®šé€»è¾‘</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span><span style="color:#81A1C1;"> else</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">    throw</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> TypeError</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">The provided value is not a WeakMap.</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">try</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#88C0D0;">  processWeakMap</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">wm1</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // æ­£ç¡®çš„è°ƒç”¨</span></span>
<span class="line"><span style="color:#88C0D0;">  processWeakMap</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">m1</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // æ­¤å¤„å°†æŠ›å‡ºTypeError</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;"> catch</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">e</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">error</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">e</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">message</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ª <code>WeakMap</code> å’Œä¸€ä¸ª <code>Map</code> å¯¹è±¡ï¼Œé€šè¿‡ <code>util.types.isWeakMap()</code> å‡½æ•°æ¥åˆ¤æ–­è¿™ä¸¤ä¸ªå¯¹è±¡çš„ç±»å‹ï¼Œä»è€Œè¯å®è¯¥å‡½æ•°çš„ä½œç”¨ã€‚éšåï¼Œé€šè¿‡ä¸€ä¸ªåä¸º <code>processWeakMap</code> çš„å‡½æ•°å±•ç¤ºå¦‚ä½•åœ¨å®é™…åº”ç”¨ä¸­ä½¿ç”¨è¿™ç§ç±»å‹æ£€æŸ¥æ¥ä¿è¯å‡½æ•°çš„è¾“å…¥ç±»å‹å®‰å…¨æ€§ã€‚</p><h3 id="ç»“è®º-4" tabindex="-1"><a class="header-anchor" href="#ç»“è®º-4"><span>ç»“è®º</span></a></h3><p>é€šè¿‡ä»¥ä¸Šè¯¦ç»†ä»‹ç»å’Œç¤ºä¾‹ï¼Œä½ åº”è¯¥å¯¹ <code>util.types.isWeakMap(value)</code> åœ¨ Node.js ä¸­çš„ä½œç”¨æœ‰äº†æ¸…æ™°çš„ç†è§£ã€‚å®ƒæ˜¯ä¸€ä¸ªç”¨äºç¡®ä¿å¯¹è±¡ç±»å‹ä¸º <code>WeakMap</code> çš„å®ç”¨å·¥å…·ï¼Œç‰¹åˆ«æœ‰åŠ©äºåœ¨å¤„ç†å…·æœ‰ç±»å‹é™åˆ¶çš„å‡½æ•°æˆ–æ–¹æ³•æ—¶å¢å¼ºä»£ç çš„å¥å£²æ€§å’Œå®‰å…¨æ€§ã€‚</p><h3 id="util-types-isweakset-value" tabindex="-1"><a class="header-anchor" href="#util-types-isweakset-value"><span><a href="https://nodejs.org/docs/latest/api/util.html#utiltypesisweaksetvalue" target="_blank" rel="noopener noreferrer">util.types.isWeakSet(value)</a></span></a></h3><p>å½“ç„¶ï¼Œè®©æˆ‘ä»¬ä¸€æ­¥ä¸€æ­¥æ¥äº†è§£<code>util.types.isWeakSet(value)</code>åœ¨ Node.js ä¸­çš„ç”¨é€”å’Œåº”ç”¨ã€‚</p><p>é¦–å…ˆï¼Œä¸ºäº†ç†è§£è¿™ä¸ªå‡½æ•°ï¼Œæˆ‘ä»¬éœ€è¦åˆ†è§£å¹¶ç†è§£å®ƒçš„ç»„æˆéƒ¨åˆ†ï¼š</p><ol><li><p><strong>Node.js</strong>ï¼šè¿™æ˜¯ä¸€ä¸ªå¼€æºã€è·¨å¹³å°çš„ JavaScript è¿è¡Œæ—¶ç¯å¢ƒï¼Œå…è®¸åœ¨æœåŠ¡å™¨ç«¯æ‰§è¡Œ JavaScript ä»£ç ã€‚ä¹‹å‰ï¼ŒJavaScript ä¸»è¦ç”¨äºæµè§ˆå™¨ä¸­ï¼Œä½† Node.js ä½¿å¾—å¼€å‘äººå‘˜å¯ä»¥ä½¿ç”¨ JavaScript ç¼–å†™åç«¯ä»£ç ã€‚</p></li><li><p><strong>util æ¨¡å—</strong>ï¼šè¿™æ˜¯ Node.js çš„æ ¸å¿ƒæ¨¡å—ï¼Œæä¾›äº†ä¸€ç³»åˆ—å®ç”¨åŠŸèƒ½ï¼Œä»¥å¸®åŠ©å¼€å‘äººå‘˜å¤„ç†æ—¥å¸¸ä»»åŠ¡ã€‚æ¯”å¦‚æ ¼å¼åŒ–å­—ç¬¦ä¸²ã€æ£€æŸ¥å˜é‡ç±»å‹ç­‰ã€‚ä½ ä¸éœ€è¦å®‰è£…å°±å¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚</p></li><li><p><strong>WeakSet</strong>ï¼šåœ¨ JavaScript ä¸­ï¼Œ<code>WeakSet</code>æ˜¯ä¸€ç§é›†åˆï¼ˆCollectionï¼‰ï¼Œä½†ä¸æ™®é€šçš„<code>Set</code>ä¸åŒã€‚<code>WeakSet</code>ä¸­çš„å…ƒç´ åªèƒ½æ˜¯å¯¹è±¡ï¼Œå¹¶ä¸”å®ƒä»¬æ˜¯â€œå¼±â€å¼•ç”¨çš„ã€‚è¿™æ„å‘³ç€å¦‚æœæ²¡æœ‰å…¶ä»–å¼•ç”¨æŒ‡å‘ä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆè¿™ä¸ªå¯¹è±¡å°±å¯ä»¥è¢«åƒåœ¾å›æ”¶æœºåˆ¶å›æ”¶ï¼Œå³ä½¿å®ƒè¿˜å­˜åœ¨äº<code>WeakSet</code>ä¸­ã€‚å› æ­¤ï¼Œ<code>WeakSet</code>ä¸»è¦ç”¨äºä¼˜åŒ–å†…å­˜ä½¿ç”¨å’Œç®¡ç†å¯¹è±¡é›†åˆï¼Œè€Œä¸å¿…æ‹…å¿ƒå†…å­˜æ³„æ¼ã€‚</p></li><li><p><strong>util.types.isWeakSet(value)</strong>ï¼šè¿™æ˜¯<code>util</code>æ¨¡å—ä¸­çš„ä¸€ä¸ªæ–¹æ³•ï¼Œç”¨äºæ£€æŸ¥ä¼ é€’ç»™å®ƒçš„å€¼æ˜¯å¦æ˜¯ä¸€ä¸ª<code>WeakSet</code>å¯¹è±¡ã€‚æ¢å¥è¯è¯´ï¼Œå®ƒå¸®åŠ©ä½ ç¡®å®šä¸€ä¸ªå˜é‡æˆ–è¡¨è¾¾å¼æ˜¯å¦è¡¨ç¤ºä¸€ä¸ª<code>WeakSet</code>çš„å®ä¾‹ã€‚</p></li></ol><h3 id="ä¸¾ä¾‹è¯´æ˜" tabindex="-1"><a class="header-anchor" href="#ä¸¾ä¾‹è¯´æ˜"><span>ä¸¾ä¾‹è¯´æ˜</span></a></h3><p>å‡è®¾æˆ‘ä»¬æ­£åœ¨å¼€å‘ä¸€ä¸ªåº”ç”¨ï¼Œè¯¥åº”ç”¨éœ€è¦è¿½è¸ªç”¨æˆ·åˆ›å»ºçš„å¤šä¸ªç»„ä»¶å®ä¾‹ï¼Œå¹¶ç¡®ä¿è¿™äº›ç»„ä»¶èƒ½å¤Ÿåœ¨ä¸å†è¢«éœ€è¦æ—¶è‡ªåŠ¨é‡Šæ”¾å†…å­˜ã€‚æˆ‘ä»¬å¯èƒ½ä¼šè€ƒè™‘ä½¿ç”¨<code>WeakSet</code>æ¥å­˜å‚¨è¿™äº›ç»„ä»¶å®ä¾‹çš„å¼•ç”¨ï¼Œä»¥ä¾¿è½»æ¾åœ°è¿›è¡Œåƒåœ¾å›æ”¶ã€‚</p><h4 id="ç¤ºä¾‹ä»£ç -4" tabindex="-1"><a class="header-anchor" href="#ç¤ºä¾‹ä»£ç -4"><span>ç¤ºä¾‹ä»£ç ï¼š</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> components</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> WeakSet</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">class</span><span style="color:#8FBCBB;"> Component</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  constructor</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">name</span><span style="color:#ECEFF4;">)</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">    this</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">name</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> name</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#616E88;">    // å½“åˆ›å»ºæ–°çš„Componentå®ä¾‹æ—¶ï¼Œæˆ‘ä»¬å°†å®ƒæ·»åŠ åˆ°components WeakSetä¸­</span></span>
<span class="line"><span style="color:#D8DEE9;">    components</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">add</span><span style="color:#D8DEE9FF;">(</span><span style="color:#81A1C1;">this</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> component1</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> Component</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">component1</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> component2</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> Component</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">component2</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isWeakSet</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">components</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡ºï¼štrue</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">types</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isWeakSet</span><span style="color:#D8DEE9FF;">(</span><span style="color:#81A1C1;">new</span><span style="color:#88C0D0;"> Set</span><span style="color:#D8DEE9FF;">()))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡ºï¼šfalse</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ª<code>Component</code>ç±»ï¼Œæ¯å½“åˆ›å»º<code>Component</code>çš„æ–°å®ä¾‹æ—¶ï¼Œæˆ‘ä»¬å°±å°†å…¶<code>this</code>ï¼ˆå³å½“å‰å®ä¾‹ï¼‰æ·»åŠ åˆ°<code>components</code>è¿™ä¸ª<code>WeakSet</code>ä¸­ã€‚éšåï¼Œæˆ‘ä»¬ç”¨<code>util.types.isWeakSet()</code>æ–¹æ³•æ£€æŸ¥<code>components</code>ç¡®å®æ˜¯ä¸€ä¸ª<code>WeakSet</code>å¯¹è±¡ï¼Œè€Œæ ‡å‡†çš„<code>Set</code>åˆ™ä¸æ˜¯ã€‚</p><p>è¿™æ ·ï¼Œå³ä½¿æˆ‘ä»¬å¯¹<code>Component</code>çš„å…·ä½“å®ä¾‹ä¸å†æŒæœ‰å¼•ç”¨ï¼Œåªè¦è¿™äº›å®ä¾‹ä¸å†è¢«å…¶ä»–éƒ¨åˆ†çš„ä»£ç å¼•ç”¨ï¼Œå®ƒä»¬å°±ä¼šè‡ªåŠ¨è¢«åƒåœ¾å›æ”¶æœºåˆ¶æ¸…é™¤ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬èƒ½æœ‰æ•ˆé˜²æ­¢å†…å­˜æ³„æ¼é—®é¢˜ï¼Œå°¤å…¶æ˜¯åœ¨æ¶‰åŠå¤§é‡åŠ¨æ€åˆ›å»ºå’Œé”€æ¯å¯¹è±¡çš„å¤æ‚åº”ç”¨ä¸­ã€‚</p><h3 id="æ€»ç»“-20" tabindex="-1"><a class="header-anchor" href="#æ€»ç»“-20"><span>æ€»ç»“</span></a></h3><p><code>util.types.isWeakSet(value)</code>æ˜¯ä¸€ä¸ªå®ç”¨çš„å·¥å…·å‡½æ•°ï¼Œå®ƒå…è®¸æˆ‘ä»¬ç¡®å®šæŸä¸ªå€¼æ˜¯å¦ä¸º<code>WeakSet</code>å®ä¾‹ï¼Œè¿™åœ¨å¤„ç†ä¾èµ–äºç²¾ç¡®å†…å­˜ç®¡ç†çš„åº”ç”¨ç¨‹åºæ—¶éå¸¸æœ‰ç”¨ã€‚é€šè¿‡è¯†åˆ«<code>WeakSet</code>ï¼Œæˆ‘ä»¬å¯ä»¥æ›´å¥½åœ°åˆ©ç”¨å…¶ç‰¹æ€§ï¼Œé¿å…å†…å­˜æ³„æ¼ï¼ŒåŒæ—¶ä¿æŒåº”ç”¨çš„æ€§èƒ½å’Œæ•ˆç‡ã€‚</p><h2 id="deprecated-apis" tabindex="-1"><a class="header-anchor" href="#deprecated-apis"><span><a href="https://nodejs.org/docs/latest/api/util.html#deprecated-apis" target="_blank" rel="noopener noreferrer">Deprecated APIs</a></span></a></h2><p>åœ¨ Node.js çš„ä¸–ç•Œä¸­ï¼Œ&quot;åºŸå¼ƒï¼ˆDeprecatedï¼‰&quot;æ˜¯ä¸€ä¸ªé‡è¦çš„æ¦‚å¿µã€‚å½“ APIï¼ˆåº”ç”¨ç¨‹åºç¼–ç¨‹æ¥å£ï¼‰è¢«æ ‡è®°ä¸ºâ€œåºŸå¼ƒâ€çš„æ—¶å€™ï¼Œè¿™æ„å‘³ç€å®ƒä»¬å¯èƒ½åœ¨æœªæ¥çš„ç‰ˆæœ¬ä¸­è¢«ç§»é™¤æˆ–æ›´æ”¹ï¼Œå› æ­¤å»ºè®®å¼€å‘è€…é¿å…ä½¿ç”¨è¿™äº› APIï¼Œè½¬è€Œä½¿ç”¨æ–°çš„æˆ–æ›¿ä»£çš„æ–¹æ³•ã€‚åºŸå¼ƒçš„ API ä»ç„¶å¯ä»¥åœ¨å½“å‰ç‰ˆæœ¬ä¸­ä½¿ç”¨ï¼Œä½†ä»–ä»¬çš„å­˜åœ¨æ˜¯ä¸ºäº†å‘åå…¼å®¹ï¼Œç¡®ä¿è€ä»£ç èƒ½å¤Ÿç»§ç»­å·¥ä½œã€‚</p><p>æˆªè‡³ Node.js v21.7.1ï¼Œè®©æˆ‘ä»¬è¯¦ç»†æ¢è®¨å‡ ä¸ªå·²åºŸå¼ƒçš„ APIï¼Œå¹¶é€šè¿‡å®é™…ä¾‹å­ç†è§£å®ƒä»¬åŠæ¨èçš„æ›¿ä»£æ–¹æ¡ˆï¼š</p><h3 id="_1-util-puts-util-print-å’Œ-util-debug" tabindex="-1"><a class="header-anchor" href="#_1-util-puts-util-print-å’Œ-util-debug"><span>1. <code>util.puts()</code>, <code>util.print()</code>, å’Œ <code>util.debug()</code></span></a></h3><p><strong>åºŸå¼ƒåŸå› ï¼š</strong> è¿™äº›å‡½æ•°æ˜¯æ—©æœŸ Node.js ç‰ˆæœ¬ä¸­ç”¨äºæ‰“å°ä¿¡æ¯åˆ° stdoutï¼ˆæ ‡å‡†è¾“å‡ºï¼‰æˆ– stderrï¼ˆæ ‡å‡†é”™è¯¯ï¼‰çš„ç®€ä¾¿æ–¹æ³•ã€‚éšç€ Node.js çš„å‘å±•ï¼Œ<code>console.log()</code>ã€<code>console.error()</code>ç­‰æ›´æ ‡å‡†çš„æ–¹æ³•æˆä¸ºäº†é¦–é€‰ï¼Œå› ä¸ºå®ƒä»¬æ›´åŠ çµæ´»ä¸”åŠŸèƒ½å¼ºå¤§ã€‚</p><p><strong>å®é™…ä¾‹å­ï¼š</strong></p><p><strong>æ—§æ–¹å¼</strong>:</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">puts</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Hello, world</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // åºŸå¼ƒ</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ›¿ä»£æ–¹æ¡ˆ</strong>:</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Hello, world</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>ä½¿ç”¨<code>console.log()</code>æ˜¯æ¨èçš„åšæ³•ï¼Œå› ä¸ºå®ƒæ˜¯ JavaScript æ ‡å‡†çš„ä¸€éƒ¨åˆ†ï¼Œä¹Ÿæ˜“äºç†è§£å’Œä½¿ç”¨ã€‚</p><h3 id="_2-util-extend" tabindex="-1"><a class="header-anchor" href="#_2-util-extend"><span>2. <code>util._extend()</code></span></a></h3><p><strong>åºŸå¼ƒåŸå› ï¼š</strong> è¿™æ˜¯ä¸€ä¸ªå†…éƒ¨ä½¿ç”¨çš„å·¥å…·å‡½æ•°ï¼Œç”¨äºå°†ä¸€ä¸ªå¯¹è±¡çš„å±æ€§å¤åˆ¶åˆ°å¦ä¸€ä¸ªå¯¹è±¡ã€‚ç”±äº JavaScript è¯­è¨€æœ¬èº«æä¾›äº†æ›´å¥½çš„è§£å†³æ–¹æ¡ˆï¼Œå¦‚å¯¹è±¡æ‰©å±•æ“ä½œç¬¦<code>...</code>å’Œ<code>Object.assign()</code>ï¼Œå› æ­¤<code>util._extend()</code>è¢«è®¤ä¸ºæ˜¯ä¸å¿…è¦çš„ã€‚</p><p><strong>å®é™…ä¾‹å­ï¼š</strong></p><p><strong>æ—§æ–¹å¼</strong>:</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> obj1</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> {</span><span style="color:#88C0D0;"> a</span><span style="color:#ECEFF4;">:</span><span style="color:#B48EAD;"> 1</span><span style="color:#ECEFF4;"> }</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> obj2</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> {</span><span style="color:#88C0D0;"> b</span><span style="color:#ECEFF4;">:</span><span style="color:#B48EAD;"> 2</span><span style="color:#ECEFF4;"> }</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> combined</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">_extend</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">obj1</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> obj2</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // åºŸå¼ƒ</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ›¿ä»£æ–¹æ¡ˆ</strong>:</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> obj1</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> {</span><span style="color:#88C0D0;"> a</span><span style="color:#ECEFF4;">:</span><span style="color:#B48EAD;"> 1</span><span style="color:#ECEFF4;"> }</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> obj2</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> {</span><span style="color:#88C0D0;"> b</span><span style="color:#ECEFF4;">:</span><span style="color:#B48EAD;"> 2</span><span style="color:#ECEFF4;"> }</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> combined</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> {</span><span style="color:#81A1C1;"> ...</span><span style="color:#D8DEE9;">obj1</span><span style="color:#ECEFF4;">,</span><span style="color:#81A1C1;"> ...</span><span style="color:#D8DEE9;">obj2</span><span style="color:#ECEFF4;"> }</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#616E88;">// æˆ–è€…</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> combined2</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> Object</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">assign</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">{},</span><span style="color:#D8DEE9;"> obj1</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> obj2</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä½¿ç”¨å¯¹è±¡æ‰©å±•è¿ç®—ç¬¦æˆ–<code>Object.assign()</code>éƒ½æ˜¯ç°ä»£ JavaScript çš„æ¨èåšæ³•ï¼Œè¯­ä¹‰æ¸…æ™°ä¸”åŠŸèƒ½å¼ºå¤§ã€‚</p><h3 id="ç»“è®º-5" tabindex="-1"><a class="header-anchor" href="#ç»“è®º-5"><span>ç»“è®º</span></a></h3><p>äº†è§£å“ªäº› API è¢«åºŸå¼ƒæ˜¯å¾ˆé‡è¦çš„ï¼Œå› ä¸ºè¿™æœ‰åŠ©äºå†™å‡ºæ›´ç°ä»£ã€æ›´å¯ç»´æŠ¤çš„ä»£ç ï¼Œå¹¶å‡†å¤‡å¥½è¿ç§»åˆ°æœªæ¥çš„ Node.js ç‰ˆæœ¬ã€‚è™½ç„¶åºŸå¼ƒçš„ API é€šå¸¸åœ¨ä¸€æ®µæ—¶é—´å†…ä»å¯ä½¿ç”¨ï¼Œä½†æœ€å¥½å°½æ—©é€‚åº”æ–°æ–¹æ³•å’Œæœ€ä½³å®è·µã€‚</p><h3 id="util-extend-target-source" tabindex="-1"><a class="header-anchor" href="#util-extend-target-source"><span><a href="https://nodejs.org/docs/latest/api/util.html#util_extendtarget-source" target="_blank" rel="noopener noreferrer">util._extend(target, source)</a></span></a></h3><p>åœ¨ Node.js ä¸­ï¼Œ<code>util._extend(target, source)</code> æ˜¯ä¸€ä¸ª JavaScript å‡½æ•°ï¼Œç”¨äºå°†ä¸€ä¸ªå¯¹è±¡ï¼ˆ<code>source</code>ï¼‰çš„å±æ€§å¤åˆ¶åˆ°å¦ä¸€ä¸ªå¯¹è±¡ï¼ˆ<code>target</code>ï¼‰ä¸­ã€‚ä½†é¦–å…ˆéœ€è¦æ˜ç¡®çš„æ˜¯ï¼Œ<code>util._extend</code> åœ¨å®˜æ–¹æ–‡æ¡£ä¸­å¹¶ä¸æ¨èä½¿ç”¨ï¼Œå› ä¸ºå®ƒæ˜¯ Node.js å†…éƒ¨ä½¿ç”¨çš„å‡½æ•°ï¼Œæœªæ¥å¯èƒ½ä¼šè¢«æ›´æ”¹æˆ–ç§»é™¤ã€‚å®é™…ä¸Šï¼Œè¿™ä¸ªåŠŸèƒ½å¯ä»¥é€šè¿‡å…¶ä»–æ ‡å‡†çš„ JavaScript æ–¹æ³•ï¼Œå¦‚ <code>Object.assign()</code> æˆ–å±•å¼€è¿ç®—ç¬¦ï¼ˆ<code>...</code>ï¼‰æ¥å®ç°ï¼Œè¿™äº›æ˜¯æ›´æ¨èä½¿ç”¨çš„æ–¹å¼ã€‚</p><h3 id="util-extend-target-source-1" tabindex="-1"><a class="header-anchor" href="#util-extend-target-source-1"><span><code>util._extend(target, source)</code></span></a></h3><ul><li><p><strong>å‚æ•°</strong>ï¼š</p><ul><li><code>target</code>ï¼šç›®æ ‡å¯¹è±¡ï¼Œå³è¦å¤åˆ¶å±æ€§åˆ°çš„å¯¹è±¡ã€‚</li><li><code>source</code>ï¼šæºå¯¹è±¡ï¼Œå³ä»ä¸­å¤åˆ¶å±æ€§çš„å¯¹è±¡ã€‚</li></ul></li><li><p><strong>è¿”å›å€¼</strong>ï¼šä¿®æ”¹åçš„ç›®æ ‡å¯¹è±¡ï¼ˆ<code>target</code>ï¼‰ã€‚</p></li></ul><h3 id="å®é™…åº”ç”¨ä¾‹å­-7" tabindex="-1"><a class="header-anchor" href="#å®é™…åº”ç”¨ä¾‹å­-7"><span>å®é™…åº”ç”¨ä¾‹å­</span></a></h3><p>å°½ç®¡ä¸æ¨èä½¿ç”¨ <code>util._extend</code>ï¼Œæˆ‘è¿˜æ˜¯ä¼šæ¼”ç¤ºä¸€ä¸ªç®€å•çš„ä¾‹å­è¯´æ˜å…¶å·¥ä½œåŸç†ï¼Œç„¶åç”¨æ¨èçš„æ–¹æ³•åšå¯¹æ¯”ã€‚</p><h4 id="ä½¿ç”¨-util-extend" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨-util-extend"><span>ä½¿ç”¨ <code>util._extend</code></span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> obj1</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> {</span><span style="color:#88C0D0;"> name</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">John</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;"> }</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> obj2</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> {</span><span style="color:#88C0D0;"> age</span><span style="color:#ECEFF4;">:</span><span style="color:#B48EAD;"> 30</span><span style="color:#ECEFF4;"> }</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">_extend</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">obj1</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> obj2</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">obj1</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡º: { name: &#39;John&#39;, age: 30 }</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<code>obj2</code> çš„å±æ€§ <code>age</code> è¢«å¤åˆ¶åˆ°äº† <code>obj1</code> ä¸­ï¼Œæ‰€ä»¥æœ€ç»ˆ <code>obj1</code> åŒ…å«äº† <code>name</code> å’Œ <code>age</code> ä¸¤ä¸ªå±æ€§ã€‚</p><h4 id="æ¨èçš„æ–¹æ³•" tabindex="-1"><a class="header-anchor" href="#æ¨èçš„æ–¹æ³•"><span>æ¨èçš„æ–¹æ³•</span></a></h4><h5 id="ä½¿ç”¨-object-assign" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨-object-assign"><span>ä½¿ç”¨ <code>Object.assign()</code></span></a></h5><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> obj1</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> {</span><span style="color:#88C0D0;"> name</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">John</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;"> }</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> obj2</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> {</span><span style="color:#88C0D0;"> age</span><span style="color:#ECEFF4;">:</span><span style="color:#B48EAD;"> 30</span><span style="color:#ECEFF4;"> }</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">Object</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">assign</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">obj1</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> obj2</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">obj1</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡º: { name: &#39;John&#39;, age: 30 }</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="ä½¿ç”¨å±•å¼€è¿ç®—ç¬¦-spread-operator" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨å±•å¼€è¿ç®—ç¬¦-spread-operator"><span>ä½¿ç”¨å±•å¼€è¿ç®—ç¬¦ï¼ˆSpread Operatorï¼‰</span></a></h5><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> obj1</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> {</span><span style="color:#88C0D0;"> name</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">John</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;"> }</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> obj2</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> {</span><span style="color:#88C0D0;"> age</span><span style="color:#ECEFF4;">:</span><span style="color:#B48EAD;"> 30</span><span style="color:#ECEFF4;"> }</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">obj1</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> {</span><span style="color:#81A1C1;"> ...</span><span style="color:#D8DEE9;">obj1</span><span style="color:#ECEFF4;">,</span><span style="color:#81A1C1;"> ...</span><span style="color:#D8DEE9;">obj2</span><span style="color:#ECEFF4;"> }</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">obj1</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡º: { name: &#39;John&#39;, age: 30 }</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ä¸¤ç§æ–¹æ³•éƒ½èƒ½è¾¾åˆ°ä¸ <code>util._extend</code> ç›¸åŒçš„æ•ˆæœï¼Œä¸”æ›´æ¨èä½¿ç”¨ï¼Œå› ä¸ºå®ƒä»¬æ˜¯ ECMAScript çš„æ ‡å‡†éƒ¨åˆ†ï¼Œä¸ä¾èµ–äºç‰¹å®šçš„ Node.js ç‰ˆæœ¬ï¼Œå› æ­¤æ›´åŠ ç¨³å®šå’Œå¯é ã€‚</p><h3 id="util-isarray-object" tabindex="-1"><a class="header-anchor" href="#util-isarray-object"><span><a href="https://nodejs.org/docs/latest/api/util.html#utilisarrayobject" target="_blank" rel="noopener noreferrer">util.isArray(object)</a></span></a></h3><p>Node.js æ˜¯ä¸€ä¸ªéå¸¸å¼ºå¤§çš„ JavaScript è¿è¡Œç¯å¢ƒï¼Œå®ƒè®©æˆ‘ä»¬èƒ½å¤Ÿä½¿ç”¨ JavaScript æ¥ç¼–å†™æœåŠ¡å™¨ç«¯ä»£ç ã€‚åœ¨ Node.js çš„ä¼—å¤šæ¨¡å—ä¸­ï¼Œ<code>util</code> æ¨¡å—åŒ…å«äº†ä¸€äº›å®ç”¨çš„å°å·¥å…·ï¼Œç”¨æ¥æ‰§è¡Œå„ç§ä¸ JavaScript æ•°æ®å’ŒåŠŸèƒ½ç›¸å…³çš„ä»»åŠ¡ã€‚</p><p>å½“ä½ çœ‹åˆ° <code>util.isArray(object)</code> çš„æ—¶å€™ï¼Œè¿™é‡Œæè¿°çš„æ˜¯ä¸€ä¸ªç‰¹å®šçš„å‡½æ•°ï¼š<code>isArray</code>ã€‚é¡¾åæ€ä¹‰ï¼Œ<code>isArray()</code> ç”¨äºåˆ¤æ–­ç»™å®šçš„å‚æ•°æ˜¯å¦æ˜¯ä¸€ä¸ªæ•°ç»„ã€‚ä¸è¿‡éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä» Node.js v4.0.0 å¼€å§‹ï¼Œ<code>util.isArray()</code> å·²ç»è¢«å¼ƒç”¨ï¼Œå› ä¸ºåŸç”Ÿ JavaScript æä¾›äº†ä¸€ä¸ªæ–°çš„æ–¹æ³• <code>Array.isArray()</code> æ¥å®ŒæˆåŒæ ·çš„ä»»åŠ¡ã€‚å°½ç®¡å¦‚æ­¤ï¼Œæˆ‘ä¼šè§£é‡Š <code>util.isArray()</code> çš„å·¥ä½œåŸç†ï¼ŒåŒæ—¶ä¹Ÿä¼šæåŠç°ä»£æ›¿ä»£æ–¹æ¡ˆã€‚</p><h3 id="å¦‚ä½•ä½¿ç”¨-util-isarray" tabindex="-1"><a class="header-anchor" href="#å¦‚ä½•ä½¿ç”¨-util-isarray"><span>å¦‚ä½•ä½¿ç”¨ <code>util.isArray()</code></span></a></h3><p>ç®€å•æ¥è¯´ï¼Œ<code>util.isArray(object)</code> æ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼ˆ<code>true</code> æˆ– <code>false</code>ï¼‰ï¼Œè¡¨æ˜è¿™ä¸ªå‚æ•°æ˜¯å¦æ˜¯ä¸€ä¸ªæ•°ç»„ã€‚è¿™åœ¨å¤„ç†ä¸ç¡®å®šæ•°æ®ç±»å‹çš„æƒ…å†µä¸‹ç‰¹åˆ«æœ‰ç”¨ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> testArray</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9FF;"> [</span><span style="color:#B48EAD;">1</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 2</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 3</span><span style="color:#D8DEE9FF;">]</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> testNumber</span><span style="color:#81A1C1;"> =</span><span style="color:#B48EAD;"> 123</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isArray</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">testArray</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡ºï¼štrue</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isArray</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">testNumber</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡ºï¼šfalse</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™æ®µä»£ç ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆåŠ è½½äº† Node.js çš„ <code>util</code> æ¨¡å—ã€‚ç„¶åï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªæ•°ç»„ <code>testArray</code> å’Œä¸€ä¸ªæ•°å­— <code>testNumber</code>ï¼Œå¹¶åˆ†åˆ«æ£€æŸ¥å®ƒä»¬æ˜¯å¦æ˜¯æ•°ç»„ã€‚æ­£å¦‚é¢„æœŸçš„é‚£æ ·ï¼Œ<code>testArray</code> æ˜¯æ•°ç»„ï¼Œæ‰€ä»¥ <code>util.isArray(testArray)</code> è¿”å› <code>true</code>ï¼›è€Œ <code>testNumber</code> ä¸æ˜¯æ•°ç»„ï¼Œæ‰€ä»¥ <code>util.isArray(testNumber)</code> è¿”å› <code>false</code>ã€‚</p><h3 id="å®é™…è¿ç”¨ä¾‹å­-16" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨ä¾‹å­-16"><span>å®é™…è¿ç”¨ä¾‹å­</span></a></h3><p>è™½ç„¶ <code>util.isArray()</code> è¢«å¼ƒç”¨äº†ï¼Œä½†ç†è§£å®ƒçš„å·¥ä½œæœºåˆ¶æœ‰åŠ©äºä½ æŒæ¡å¦‚ä½•å¤„ç† JavaScript ä¸­çš„æ•°æ®ç±»å‹æ£€æŸ¥é—®é¢˜ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¯èƒ½çš„åº”ç”¨åœºæ™¯ï¼š</p><ol><li><p><strong>æ•°æ®éªŒè¯</strong>ï¼šå¦‚æœä½ çš„å‡½æ•°æœŸæœ›æ¥æ”¶ä¸€ä¸ªæ•°ç»„ä½œä¸ºå‚æ•°ï¼Œä½ å¯ä»¥ä½¿ç”¨è¿™æ ·çš„ç±»å‹æ£€æŸ¥æ¥ç¡®ä¿ä¼ å…¥çš„æ•°æ®ç¬¦åˆé¢„æœŸã€‚è¿™å¯¹äºé˜²æ­¢è¿è¡Œæ—¶é”™è¯¯ç‰¹åˆ«é‡è¦ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">function</span><span style="color:#88C0D0;"> processNumbers</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">numbers</span><span style="color:#ECEFF4;">)</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#81A1C1;">!</span><span style="color:#D8DEE9;">Array</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isArray</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">numbers</span><span style="color:#D8DEE9FF;">)) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#81A1C1;">    throw</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> TypeError</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Expected an array of numbers</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span></span>
<span class="line"><span style="color:#616E88;">  // å¤„ç†æ•°å­—æ•°ç»„...</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>API å“åº”å¤„ç†</strong>ï¼šå½“ä½ ä»æŸä¸ª API è·å–æ•°æ®æ—¶ï¼Œæ ¹æ®è®¾è®¡ï¼Œä½ å¯èƒ½æœŸå¾…ä¸€ä¸ªæ•°ç»„ã€‚åœ¨å¤„ç†è¿™äº›æ•°æ®ä¹‹å‰ï¼Œæ£€æŸ¥å®ƒç¡®å®æ˜¯æ•°ç»„æ ¼å¼å¯ä»¥é¿å…è®¸å¤šæ½œåœ¨çš„é—®é¢˜ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#88C0D0;">fetch</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">https://api.example.com/data</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#ECEFF4;">  .</span><span style="color:#88C0D0;">then</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">response</span><span style="color:#ECEFF4;">)</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#D8DEE9;"> response</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">json</span><span style="color:#D8DEE9FF;">())</span></span>
<span class="line"><span style="color:#ECEFF4;">  .</span><span style="color:#88C0D0;">then</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">data</span><span style="color:#ECEFF4;">)</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">    if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">Array</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isArray</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">data</span><span style="color:#D8DEE9FF;">)) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">      console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Received an array of results:</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> data</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">    }</span><span style="color:#81A1C1;"> else</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">      console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">error</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Expected an array of results!</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">    }</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h3 id="ç°ä»£æ›¿ä»£æ–¹æ¡ˆ" tabindex="-1"><a class="header-anchor" href="#ç°ä»£æ›¿ä»£æ–¹æ¡ˆ"><span>ç°ä»£æ›¿ä»£æ–¹æ¡ˆ</span></a></h3><p>ç”±äº <code>util.isArray()</code> å·²è¢«å¼ƒç”¨ï¼Œæ¨èçš„åšæ³•æ˜¯ä½¿ç”¨å†…ç½®çš„ <code>Array.isArray()</code> æ–¹æ³•ï¼Œå®ƒæä¾›äº†ç›¸åŒçš„åŠŸèƒ½ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> testArray</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9FF;"> [</span><span style="color:#B48EAD;">1</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 2</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 3</span><span style="color:#D8DEE9FF;">]</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">Array</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isArray</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">testArray</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡ºï¼štrue</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>ç®€è€Œè¨€ä¹‹ï¼Œäº†è§£è¿™ç±»æ•°æ®ç±»å‹æ£€æŸ¥æ–¹æ³•å¯¹äºæœ‰æ•ˆåœ°ç¼–å†™å¥å£®çš„ JavaScript ä»£ç éå¸¸é‡è¦ï¼Œå³ä½¿æ˜¯åœ¨å®ƒä»¬è¢«å¼ƒç”¨æˆ–æ›¿æ¢çš„æƒ…å†µä¸‹ã€‚</p><h3 id="util-isboolean-object" tabindex="-1"><a class="header-anchor" href="#util-isboolean-object"><span><a href="https://nodejs.org/docs/latest/api/util.html#utilisbooleanobject" target="_blank" rel="noopener noreferrer">util.isBoolean(object)</a></span></a></h3><p>Node.js ä¸­çš„ <code>util.isBoolean(object)</code> æ–¹æ³•æ˜¯ç”¨æ¥æ£€æŸ¥ç»™å®šçš„å‚æ•°æ˜¯å¦æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼ˆå³ true æˆ– falseï¼‰ã€‚è¿™ä¸ªæ–¹æ³•å±äº Node.js çš„ <code>util</code> æ¨¡å—ï¼Œè¿™ä¸ªæ¨¡å—æä¾›äº†ä¸€ç³»åˆ—å®ç”¨å‡½æ•°ï¼Œæ—¨åœ¨æ”¯æŒ Node.js æ ‡å‡†åº“ä¸­å¸¸è§çš„ä»»åŠ¡ã€‚</p><h3 id="å¦‚ä½•ä½¿ç”¨-util-isboolean-object" tabindex="-1"><a class="header-anchor" href="#å¦‚ä½•ä½¿ç”¨-util-isboolean-object"><span>å¦‚ä½•ä½¿ç”¨ <code>util.isBoolean(object)</code></span></a></h3><p>é¦–å…ˆï¼Œä½ éœ€è¦åœ¨ä½ çš„ Node.js åº”ç”¨ç¨‹åºä¸­å¼•å…¥ <code>util</code> æ¨¡å—ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>æ¥ä¸‹æ¥ï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>util.isBoolean()</code> æ–¹æ³•æ¥æ£€æŸ¥æŸä¸ªå€¼æ˜¯å¦ä¸ºå¸ƒå°”ç±»å‹ã€‚æ–¹æ³•ä¼šè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼šå¦‚æœä¼ å…¥çš„å‚æ•°æ˜¯å¸ƒå°”å€¼ï¼ˆtrue æˆ– falseï¼‰ï¼Œå®ƒå°†è¿”å› <code>true</code>ï¼›å¦åˆ™ï¼Œè¿”å› <code>false</code>ã€‚</p><h3 id="å®é™…è¿ç”¨ç¤ºä¾‹-16" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨ç¤ºä¾‹-16"><span>å®é™…è¿ç”¨ç¤ºä¾‹</span></a></h3><h4 id="ç¤ºä¾‹-1-åŸºæœ¬ä½¿ç”¨-1" tabindex="-1"><a class="header-anchor" href="#ç¤ºä¾‹-1-åŸºæœ¬ä½¿ç”¨-1"><span>ç¤ºä¾‹ 1ï¼šåŸºæœ¬ä½¿ç”¨</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isBoolean</span><span style="color:#D8DEE9FF;">(</span><span style="color:#81A1C1;">true</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡ºï¼štrue</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isBoolean</span><span style="color:#D8DEE9FF;">(</span><span style="color:#81A1C1;">false</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡ºï¼štrue</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isBoolean</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">0</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡ºï¼šfalse</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isBoolean</span><span style="color:#D8DEE9FF;">(</span><span style="color:#81A1C1;">null</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡ºï¼šfalse</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æ£€æŸ¥äº†ä¸åŒç±»å‹çš„å€¼ä»¥ç¡®è®¤å“ªäº›æ˜¯å¸ƒå°”å€¼ã€‚<code>true</code> å’Œ <code>false</code> è¢«æ­£ç¡®è¯†åˆ«ä¸ºå¸ƒå°”å€¼ï¼Œè€Œåƒ <code>0</code> å’Œ <code>null</code> è¿™æ ·çš„å…¶ä»–ç±»å‹å€¼åˆ™ä¸è¢«è®¤ä¸ºæ˜¯å¸ƒå°”å€¼ã€‚</p><h4 id="ç¤ºä¾‹-2-åº”ç”¨åœ¨æ¡ä»¶åˆ¤æ–­ä¸­" tabindex="-1"><a class="header-anchor" href="#ç¤ºä¾‹-2-åº”ç”¨åœ¨æ¡ä»¶åˆ¤æ–­ä¸­"><span>ç¤ºä¾‹ 2ï¼šåº”ç”¨åœ¨æ¡ä»¶åˆ¤æ–­ä¸­</span></a></h4><p>å‡è®¾ä½ æ­£åœ¨å¼€å‘ä¸€ä¸ªç½‘ç«™åç«¯æ¥å£ï¼Œéœ€è¦æ ¹æ®æŸ¥è¯¢å‚æ•°ä¸­çš„ <code>is_active</code> å­—æ®µï¼ˆè¯¥å­—æ®µåº”ä¸ºå¸ƒå°”å€¼ï¼‰æ¥è¿‡æ»¤ç”¨æˆ·åˆ—è¡¨ã€‚åœ¨å¤„ç†ä¹‹å‰ï¼Œä½ æƒ³éªŒè¯ <code>is_active</code> æ˜¯å¦ç¡®å®æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">function</span><span style="color:#88C0D0;"> filterUsersByActiveStatus</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">queryParams</span><span style="color:#ECEFF4;">)</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#81A1C1;">!</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isBoolean</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">queryParams</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">is_active</span><span style="color:#D8DEE9FF;">)) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#81A1C1;">    throw</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> Error</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Invalid query parameter: is_active must be a boolean.</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">  // å‡è®¾è¿™é‡Œæ˜¯æ ¹æ® is_active çŠ¶æ€è¿‡æ»¤ç”¨æˆ·çš„é€»è¾‘</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">`</span><span style="color:#A3BE8C;">Filtering users by active status: </span><span style="color:#81A1C1;">${</span><span style="color:#D8DEE9;">queryParams</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">is_active</span><span style="color:#81A1C1;">}</span><span style="color:#ECEFF4;">`</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å‡è®¾çš„æŸ¥è¯¢å‚æ•°</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> queryParams</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#88C0D0;">  is_active</span><span style="color:#ECEFF4;">:</span><span style="color:#81A1C1;"> true</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88C0D0;">filterUsersByActiveStatus</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">queryParams</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // æ­£å¸¸æ‰§è¡Œ</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> invalidQueryParams</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#88C0D0;">  is_active</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">yes</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#616E88;"> // é”™è¯¯çš„ç±»å‹</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88C0D0;">filterUsersByActiveStatus</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">invalidQueryParams</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // å°†æŠ›å‡ºé”™è¯¯</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œé€šè¿‡ä½¿ç”¨ <code>util.isBoolean()</code> æ¥æ£€æŸ¥ <code>is_active</code> æ˜¯å¦ä¸ºå¸ƒå°”å€¼ï¼Œæˆ‘ä»¬èƒ½å¤Ÿé¿å…å› ç±»å‹ä¸åŒ¹é…è€Œå¯¼è‡´çš„æ½œåœ¨é—®é¢˜ï¼Œå¹¶ä¸”åœ¨ç±»å‹ä¸ç¬¦æ—¶ç»™å‡ºæ˜ç¡®çš„é”™è¯¯æç¤ºã€‚</p><p>é€šè¿‡ä¸Šé¢çš„ç¤ºä¾‹ï¼Œä½ å¯ä»¥çœ‹åˆ° <code>util.isBoolean()</code> åœ¨å®é™…ç¼–ç¨‹ä¸­æ˜¯å¦‚ä½•å¸®åŠ©ç¡®ä¿æ•°æ®ç±»å‹æ­£ç¡®æ€§çš„ï¼Œè¿™å¯¹äºç»´æŠ¤ä»£ç çš„å¥å£®æ€§å’Œå¯è¯»æ€§éå¸¸æœ‰å¸®åŠ©ã€‚</p><h3 id="util-isbuffer-object" tabindex="-1"><a class="header-anchor" href="#util-isbuffer-object"><span><a href="https://nodejs.org/docs/latest/api/util.html#utilisbufferobject" target="_blank" rel="noopener noreferrer">util.isBuffer(object)</a></span></a></h3><p>å½“æˆ‘ä»¬è°ˆè®º Node.js ä¸­çš„<code>util.isBuffer(object)</code>å‡½æ•°æ—¶ï¼Œæˆ‘ä»¬å®é™…ä¸Šæ˜¯åœ¨è®¨è®ºä¸€ä¸ªå·¥å…·ï¼ˆutilï¼‰æ¨¡å—æä¾›çš„ä¸€ä¸ªæ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•ç”¨æ¥åˆ¤æ–­ç»™å®šçš„å¯¹è±¡æ˜¯å¦æ˜¯ä¸€ä¸ª Buffer å¯¹è±¡ã€‚åœ¨ Node.js ä¸­ï¼ŒBuffer å¯¹è±¡æ˜¯ç”¨æ¥å¤„ç†äºŒè¿›åˆ¶æ•°æ®çš„ã€‚</p><h3 id="ä»€ä¹ˆæ˜¯-buffer" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯-buffer"><span>ä»€ä¹ˆæ˜¯ Bufferï¼Ÿ</span></a></h3><p>é¦–å…ˆï¼Œè®©æˆ‘ä»¬äº†è§£ä¸€ä¸‹ä»€ä¹ˆæ˜¯ Bufferã€‚åœ¨ Node.js ä¸­ï¼ŒBuffer æ˜¯ä¸€ç§å¯ä»¥å­˜å‚¨åŸå§‹æ•°æ®çš„å¯¹è±¡ï¼Œç±»ä¼¼äºæ•°ç»„ï¼Œä½†æ˜¯å®ƒä¸»è¦ç”¨æ¥æ“ä½œåƒæ–‡ä»¶æˆ–ç½‘ç»œæµç­‰è¾“å…¥/è¾“å‡ºèµ„æºçš„äºŒè¿›åˆ¶æ•°æ®ã€‚ä¾‹å¦‚ï¼Œå½“ä½ ä»ä¸€ä¸ªæ–‡ä»¶ä¸­è¯»å–æ•°æ®æ—¶ï¼Œè¿™äº›æ•°æ®ä¼šè¢«å­˜å‚¨åœ¨ Buffer å¯¹è±¡ä¸­ã€‚</p><h3 id="util-isbuffer-object-çš„ä½œç”¨" tabindex="-1"><a class="header-anchor" href="#util-isbuffer-object-çš„ä½œç”¨"><span>util.isBuffer(object)çš„ä½œç”¨</span></a></h3><p><code>util.isBuffer(object)</code>æ–¹æ³•çš„ä½œç”¨å°±æ˜¯æ£€æŸ¥ä¸€ä¸ªå¯¹è±¡æ˜¯å¦ä¸º Buffer ç±»å‹ã€‚è¿™éå¸¸æœ‰ç”¨ï¼Œå› ä¸ºåœ¨å¤„ç†ç½‘ç»œé€šä¿¡æˆ–æ–‡ä»¶æ“ä½œæ—¶ï¼Œç»å¸¸éœ€è¦ç¡®å®šæŸä¸ªå¯¹è±¡æ˜¯å¦åŒ…å«äº†äºŒè¿›åˆ¶æ•°æ®ï¼Œæˆ–è€…è¯´æ˜¯å¦æ˜¯ä¸€ä¸ª Buffer å¯¹è±¡ã€‚</p><h3 id="å‚æ•°-7" tabindex="-1"><a class="header-anchor" href="#å‚æ•°-7"><span>å‚æ•°</span></a></h3><ul><li><code>object</code>: è¿™æ˜¯ä½ æƒ³è¦æ£€æµ‹çš„å¯¹è±¡ã€‚</li></ul><h3 id="è¿”å›å€¼-2" tabindex="-1"><a class="header-anchor" href="#è¿”å›å€¼-2"><span>è¿”å›å€¼</span></a></h3><ul><li>å¦‚æœä¼ å…¥çš„å¯¹è±¡æ˜¯ Buffer å¯¹è±¡ï¼Œåˆ™è¿”å›<code>true</code>ã€‚</li><li>å¦åˆ™ï¼Œè¿”å›<code>false</code>ã€‚</li></ul><h3 id="å®é™…åº”ç”¨ç¤ºä¾‹-8" tabindex="-1"><a class="header-anchor" href="#å®é™…åº”ç”¨ç¤ºä¾‹-8"><span>å®é™…åº”ç”¨ç¤ºä¾‹</span></a></h3><p>å‡è®¾ä½ æ­£åœ¨ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°çš„ä½œç”¨æ˜¯ä¿å­˜ç”¨æˆ·ä¸Šä¼ çš„å›¾ç‰‡åˆ°æœåŠ¡å™¨ã€‚ç”¨æˆ·ä¸Šä¼ çš„å›¾ç‰‡æ•°æ®å¯èƒ½ä»¥å¤šç§å½¢å¼åˆ°è¾¾æœåŠ¡å™¨ç«¯ï¼Œä½†ä½ åªå¸Œæœ›å¤„ç†é‚£äº›å·²ç»æ˜¯ Buffer å¯¹è±¡çš„æ•°æ®ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> fs</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">fs</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å‡è®¾è¿™æ˜¯ä¸€ä¸ªä»å®¢æˆ·ç«¯æ¥æ”¶åˆ°çš„æ•°æ®å¯¹è±¡</span></span>
<span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> imageData</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> fs</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">readFileSync</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">./user-uploaded-image.png</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¿™é‡ŒreadFileSyncæ–¹æ³•å°†å›¾ç‰‡è¯»å–ä¸ºBufferå¯¹è±¡</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// æ£€æŸ¥imageDataæ˜¯å¦æ˜¯Bufferå¯¹è±¡</span></span>
<span class="line"><span style="color:#81A1C1;">if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isBuffer</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">imageData</span><span style="color:#D8DEE9FF;">)) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">è¿™æ˜¯ä¸€ä¸ªBufferå¯¹è±¡ï¼Œå¯ä»¥è¿›è¡Œè¿›ä¸€æ­¥å¤„ç†ã€‚</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#616E88;">  // è¿™é‡Œå¯ä»¥ç»§ç»­å¤„ç†imageDataï¼Œæ¯”å¦‚ä¿å­˜åˆ°æœåŠ¡å™¨çš„ç¡¬ç›˜ä¸Š</span></span>
<span class="line"><span style="color:#D8DEE9;">  fs</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">writeFileSync</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">./saved-image.png</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> imageData</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;"> else</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">ä¸Šä¼ çš„æ•°æ®ä¸æ˜¯Bufferå¯¹è±¡ï¼Œä¸èƒ½ç›´æ¥å¤„ç†ã€‚</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#616E88;">  // è¿™é‡Œå¯ä»¥å¤„ç†é”™è¯¯ï¼Œæˆ–è€…å°è¯•è½¬æ¢imageDataåˆ°Bufferå¯¹è±¡</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆé€šè¿‡ Node.js çš„æ–‡ä»¶ç³»ç»Ÿ(fs)æ¨¡å—çš„<code>readFileSync</code>æ–¹æ³•è¯»å–äº†ä¸€ä¸ªå›¾ç‰‡æ–‡ä»¶ï¼Œå¹¶å­˜æ”¾åœ¨<code>imageData</code>å˜é‡ä¸­ã€‚ç”±äº<code>readFileSync</code>é»˜è®¤è¿”å› Buffer å¯¹è±¡ï¼ˆå½“ä¸æŒ‡å®šç¼–ç æ—¶ï¼‰ï¼Œå› æ­¤è¿™é‡Œ<code>imageData</code>æ˜¯ä¸€ä¸ª Buffer å¯¹è±¡ã€‚ç„¶åï¼Œæˆ‘ä»¬ä½¿ç”¨<code>util.isBuffer</code>æ¥æ£€æŸ¥<code>imageData</code>ç¡®å®æ˜¯ä¸€ä¸ª Buffer å¯¹è±¡ã€‚æœ€åï¼Œç¡®è®¤å®ƒæ˜¯ Buffer å¯¹è±¡ä¹‹åï¼Œæˆ‘ä»¬å°†å…¶ä¿å­˜åˆ°æœåŠ¡å™¨çš„ç¡¬ç›˜ä¸Šã€‚</p><p>æ€»ä¹‹ï¼Œ<code>util.isBuffer</code>æ˜¯ä¸€ä¸ªç®€å•è€Œå®ç”¨çš„æ–¹æ³•ï¼Œå®ƒå¸®åŠ©ä½ ç¡®å®šæŸä¸ªå¯¹è±¡æ˜¯å¦ä¸ºäºŒè¿›åˆ¶æ•°æ®çš„å®¹å™¨â€”â€”Buffer å¯¹è±¡ï¼Œè¿™å¯¹å¤„ç†å„ç§ I/O æ“ä½œéå¸¸å…³é”®ã€‚</p><h3 id="util-isdate-object" tabindex="-1"><a class="header-anchor" href="#util-isdate-object"><span><a href="https://nodejs.org/docs/latest/api/util.html#utilisdateobject" target="_blank" rel="noopener noreferrer">util.isDate(object)</a></span></a></h3><p>å½“ä½ åœ¨ä½¿ç”¨ JavaScript è¿›è¡Œç¼–ç¨‹æ—¶ï¼Œå¾ˆå¤šæ—¶å€™ä½ éœ€è¦å¤„ç†æ—¥æœŸå’Œæ—¶é—´ã€‚è¿™é‡Œæˆ‘ä»¬ä¼šè®²è§£ä¸€ä¸ª Node.js çš„å·¥å…·å‡½æ•°<code>util.isDate(object)</code>ã€‚è¿™ä¸ªå‡½æ•°æ˜¯ç”¨æ¥åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦ä¸ºæ—¥æœŸå¯¹è±¡ï¼ˆDate objectï¼‰ã€‚å¦‚æœä½ ä¹‹å‰æ²¡æœ‰æ¥è§¦è¿‡ Node.js æˆ–è€…ä¸ç†Ÿæ‚‰å®ƒï¼ŒNode.js åŸºæœ¬ä¸Šæ˜¯ä¸€ä¸ªå¯ä»¥è®© JavaScript è¿è¡Œåœ¨æœåŠ¡å™¨ç«¯çš„å¹³å°ï¼Œè€Œä¸ä»…ä»…æ˜¯åœ¨ç½‘é¡µæµè§ˆå™¨é‡Œã€‚è¿™è®© JavaScript èƒ½å¤Ÿåšæ›´å¤šåç«¯çš„äº‹æƒ…ï¼Œæ¯”å¦‚æ“ä½œæ–‡ä»¶ç³»ç»Ÿã€æ•°æ®åº“äº¤äº’ç­‰ã€‚</p><h3 id="ä»€ä¹ˆæ˜¯util-isdate-object" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯util-isdate-object"><span>ä»€ä¹ˆæ˜¯<code>util.isDate(object)</code>?</span></a></h3><p><code>util.isDate(object)</code>æ˜¯ Node.js ä¸­<code>util</code>æ¨¡å—æä¾›çš„ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒçš„ä½œç”¨æ˜¯æ£€æŸ¥ä¸€ä¸ªå¯¹è±¡æ˜¯å¦ä¸ºä¸€ä¸ªæ—¥æœŸå¯¹è±¡ã€‚è¿™ä¸ªå‡½æ•°éå¸¸ç›´æ¥â€”â€”å®ƒæ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼ˆ<code>true</code>æˆ–<code>false</code>ï¼‰ã€‚</p><ul><li>å¦‚æœä¼ å…¥çš„å¯¹è±¡æ˜¯ä¸€ä¸ªæ—¥æœŸå¯¹è±¡ï¼Œå®ƒå°†è¿”å›<code>true</code>ã€‚</li><li>å¦‚æœä¼ å…¥çš„å¯¹è±¡ä¸æ˜¯æ—¥æœŸå¯¹è±¡ï¼Œå®ƒå°†è¿”å›<code>false</code>ã€‚</li></ul><h3 id="å¦‚ä½•ä½¿ç”¨util-isdate-object" tabindex="-1"><a class="header-anchor" href="#å¦‚ä½•ä½¿ç”¨util-isdate-object"><span>å¦‚ä½•ä½¿ç”¨<code>util.isDate(object)</code>?</span></a></h3><p>é¦–å…ˆï¼Œä½ éœ€è¦åœ¨ä½ çš„ Node.js ä»£ç ä¸­å¼•å…¥<code>util</code>æ¨¡å—ï¼Œå› ä¸º<code>isDate</code>å‡½æ•°æ˜¯è¿™ä¸ªæ¨¡å—çš„ä¸€éƒ¨åˆ†ã€‚ç„¶åï¼Œä½ å°±å¯ä»¥ä½¿ç”¨<code>isDate</code>æ¥æ£€æŸ¥ä»»ä½•å¯¹è±¡æ˜¯å¦ä¸ºæ—¥æœŸå¯¹è±¡äº†ã€‚</p><p>è¿™é‡Œæ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#616E88;">// å¼•å…¥utilæ¨¡å—</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// åˆ›å»ºä¸€ä¸ªæ—¥æœŸå¯¹è±¡</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> now</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> Date</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// æ£€æŸ¥è¿™ä¸ªå¯¹è±¡æ˜¯å¦ä¸ºæ—¥æœŸå¯¹è±¡</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isDate</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">now</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡ºï¼štrue</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å°è¯•æ£€æŸ¥ä¸€ä¸ªéæ—¥æœŸå¯¹è±¡</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isDate</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">{}</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡ºï¼šfalse</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="å®é™…åº”ç”¨åœºæ™¯-5" tabindex="-1"><a class="header-anchor" href="#å®é™…åº”ç”¨åœºæ™¯-5"><span>å®é™…åº”ç”¨åœºæ™¯</span></a></h3><ol><li><p><strong>è¡¨å•éªŒè¯</strong>ï¼šå½“ä½ åœ¨åšè¡¨å•å¤„ç†ï¼Œç‰¹åˆ«æ˜¯éœ€è¦ç”¨æˆ·è¾“å…¥æ—¥æœŸçš„æ—¶å€™ï¼Œ<code>util.isDate</code>å¯ä»¥å¸®åŠ©ä½ éªŒè¯ç”¨æˆ·è¾“å…¥æ˜¯å¦ä¸ºæœ‰æ•ˆçš„æ—¥æœŸæ ¼å¼ã€‚</p></li><li><p><strong>æ•°æ®å¤„ç†</strong>ï¼šåœ¨å¤„ç†æ¥è‡ªæ•°æ®åº“æˆ– API çš„æ•°æ®æ—¶ï¼Œä½ å¯èƒ½éœ€è¦åŒºåˆ†å“ªäº›å­—æ®µæ˜¯æ—¥æœŸç±»å‹ã€‚ä½¿ç”¨<code>util.isDate</code>å¯ä»¥å¸®åŠ©ä½ å¿«é€Ÿç­›é€‰å‡ºæ—¥æœŸç±»å‹çš„æ•°æ®å­—æ®µã€‚</p></li><li><p><strong>æ—¥å¿—è®°å½•</strong>ï¼šåœ¨è®°å½•ç³»ç»Ÿæ—¥å¿—æ—¶ï¼Œç¡®è®¤æŸäº›ä¿¡æ¯æ˜¯å¦ä¸ºæ—¥æœŸç±»å‹å¯èƒ½å¯¹äºåç»­çš„æ—¥å¿—åˆ†æå’Œå¤„ç†å¾ˆé‡è¦ã€‚<code>util.isDate</code>åœ¨è¿™ç§æƒ…å†µä¸‹ä¹Ÿèƒ½æ´¾ä¸Šç”¨åœºã€‚</p></li></ol><p>æ€»ç»“èµ·æ¥ï¼Œ<code>util.isDate(object)</code>æ˜¯ Node.js æä¾›çš„ä¸€ä¸ªå®ç”¨å·¥å…·å‡½æ•°ï¼Œèƒ½å¸®åŠ©å¼€å‘è€…è½»æ¾åœ°è¯†åˆ«å’Œå¤„ç†æ—¥æœŸå¯¹è±¡ã€‚æ— è®ºæ˜¯è¿›è¡Œæ•°æ®éªŒè¯ã€æ•°æ®å¤„ç†è¿˜æ˜¯æ—¥å¿—è®°å½•ï¼Œäº†è§£å¹¶æ­£ç¡®ä½¿ç”¨å®ƒéƒ½ä¼šä½¿ä½ çš„ç¼–ç¨‹å·¥ä½œå˜å¾—æ›´åŠ æ–¹ä¾¿é«˜æ•ˆã€‚</p><h3 id="util-iserror-object" tabindex="-1"><a class="header-anchor" href="#util-iserror-object"><span><a href="https://nodejs.org/docs/latest/api/util.html#utiliserrorobject" target="_blank" rel="noopener noreferrer">util.isError(object)</a></span></a></h3><p>Node.js æ˜¯ä¸€ä¸ªåŸºäº Chrome çš„ V8 JavaScript å¼•æ“è¿è¡Œçš„ JavaScript ç¯å¢ƒã€‚å®ƒå…è®¸ä½ åœ¨æœåŠ¡å™¨ç«¯æ‰§è¡Œ JavaScript ä»£ç ï¼Œè¿™åœ¨ Node.js å‡ºç°ä¹‹å‰æ˜¯ä¸å¯èƒ½çš„ï¼Œå› ä¸º JavaScript ä¸»è¦è¢«ç”¨äºç¼–å†™å®¢æˆ·ç«¯è„šæœ¬ï¼Œå³åœ¨ç”¨æˆ·çš„æµè§ˆå™¨ä¸Šè¿è¡Œçš„ä»£ç ã€‚</p><p><code>util.isError(object)</code> æ˜¯ Node.js ä¸­ <code>util</code> æ¨¡å—æä¾›çš„ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒç”¨æ¥åˆ¤æ–­ç»™å®šçš„å‚æ•°æ˜¯å¦æ˜¯ä¸€ä¸ªé”™è¯¯å¯¹è±¡ï¼ˆError objectï¼‰ã€‚åœ¨ Node.js çš„æ›´æ—©ç‰ˆæœ¬ä¸­ï¼Œè¿™ä¸ªæ–¹æ³•æ˜¯éå¸¸æœ‰ç”¨çš„ï¼Œä½†å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œåœ¨ Node.js çš„æœ€æ–°ç‰ˆæœ¬ä¸­ï¼ˆä» v14.x å¼€å§‹ï¼‰ï¼Œè¿™ä¸ªæ–¹æ³•å·²ç»è¢«åºŸå¼ƒäº†ï¼Œå› ä¸ºç°ä»£ JavaScript æä¾›äº†æ›´å¥½çš„æ–¹å¼æ¥åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯é”™è¯¯ç±»å‹ï¼Œä¾‹å¦‚ä½¿ç”¨ <code>instanceof Error</code>ã€‚</p><p>å°½ç®¡å¦‚æ­¤ï¼Œæˆ‘ä¼šè§£é‡Šä¸€ä¸‹ <code>util.isError(object)</code> æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œå¹¶ç»™å‡ºä¸€äº›å®é™…ä¾‹å­ï¼š</p><h3 id="è§£é‡Š-2" tabindex="-1"><a class="header-anchor" href="#è§£é‡Š-2"><span>è§£é‡Š</span></a></h3><ul><li><p><strong>ä»€ä¹ˆæ˜¯é”™è¯¯å¯¹è±¡ï¼Ÿ</strong><br> é”™è¯¯å¯¹è±¡ï¼ˆError objectï¼‰åœ¨ç¼–ç¨‹ä¸­ç”¨äºè¡¨ç¤ºåœ¨ç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­å‘ç”Ÿçš„å¼‚å¸¸æƒ…å†µã€‚å®ƒä»¬é€šå¸¸åŒ…å«æœ‰å…³é”™è¯¯çš„æ¶ˆæ¯å’Œå…¶ä»–ç›¸å…³ä¿¡æ¯ã€‚</p></li><li><p><strong><code>util.isError(object)</code> çš„ä½œç”¨ï¼š</strong><br> è¿™ä¸ªå‡½æ•°æ¥å—ä¸€ä¸ªå‚æ•°ï¼Œæ£€æŸ¥è¿™ä¸ªå‚æ•°æ˜¯å¦æ˜¯ä¸€ä¸ªé”™è¯¯å¯¹è±¡ã€‚å¦‚æœæ˜¯ï¼Œå®ƒè¿”å› <code>true</code>ï¼›å¦‚æœä¸æ˜¯ï¼Œå®ƒè¿”å› <code>false</code>ã€‚</p></li></ul><h3 id="å®é™…åº”ç”¨ä¾‹å­-8" tabindex="-1"><a class="header-anchor" href="#å®é™…åº”ç”¨ä¾‹å­-8"><span>å®é™…åº”ç”¨ä¾‹å­</span></a></h3><p>å‡è®¾ä½ æ­£åœ¨ç¼–å†™ä¸€ä¸ª Node.js åº”ç”¨ç¨‹åºï¼Œä½ éœ€è¦å¤„ç†ä¸åŒæ¥æºçš„æ•°æ®ï¼Œå¹¶ä¸”åœ¨å¤„ç†è¿‡ç¨‹ä¸­å¯èƒ½ä¼šé‡åˆ°é”™è¯¯ã€‚</p><h4 id="ç¤ºä¾‹-1-æ£€æŸ¥å‡½æ•°è¿”å›å€¼æ˜¯å¦ä¸ºé”™è¯¯" tabindex="-1"><a class="header-anchor" href="#ç¤ºä¾‹-1-æ£€æŸ¥å‡½æ•°è¿”å›å€¼æ˜¯å¦ä¸ºé”™è¯¯"><span>ç¤ºä¾‹ 1: æ£€æŸ¥å‡½æ•°è¿”å›å€¼æ˜¯å¦ä¸ºé”™è¯¯</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">function</span><span style="color:#88C0D0;"> fetchData</span><span style="color:#ECEFF4;">()</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#616E88;">  // å‡è®¾è¿™ä¸ªå‡½æ•°æœ‰æ—¶ä¼šå¤±è´¥å¹¶è¿”å›ä¸€ä¸ªé”™è¯¯å¯¹è±¡</span></span>
<span class="line"><span style="color:#81A1C1;">  if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">Math</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">random</span><span style="color:#D8DEE9FF;">() </span><span style="color:#ECEFF4;">`</span><span style="color:#A3BE8C;">&lt;</span><span style="color:#ECEFF4;">`</span><span style="color:#B48EAD;"> 0.5</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#81A1C1;">    return</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> Error</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">Failed to fetch data</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span><span style="color:#81A1C1;"> else</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">    return</span><span style="color:#ECEFF4;"> {</span><span style="color:#88C0D0;"> data</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &#39;</span><span style="color:#A3BE8C;">Some data</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#ECEFF4;"> }</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> result</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> fetchData</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isError</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">result</span><span style="color:#D8DEE9FF;">)) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">error</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">An error occurred:</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> result</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">message</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;"> else</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">Data fetched successfully:</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> result</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">data</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<code>fetchData</code> å‡½æ•°æ¨¡æ‹Ÿæ•°æ®è·å–ï¼Œå®ƒå¯èƒ½æˆåŠŸä¹Ÿå¯èƒ½å¤±è´¥ã€‚æˆ‘ä»¬ä½¿ç”¨ <code>util.isError(result)</code> æ¥åˆ¤æ–­å‡½æ•°çš„è¿”å›å€¼æ˜¯å¦ä¸ºä¸€ä¸ªé”™è¯¯å¯¹è±¡ï¼Œä»è€Œå†³å®šæ˜¯è®°å½•é”™è¯¯ä¿¡æ¯è¿˜æ˜¯ç»§ç»­å¤„ç†æ•°æ®ã€‚</p><h4 id="ç¤ºä¾‹-2-æ•è·å¼‚å¸¸å¹¶æ£€æŸ¥" tabindex="-1"><a class="header-anchor" href="#ç¤ºä¾‹-2-æ•è·å¼‚å¸¸å¹¶æ£€æŸ¥"><span>ç¤ºä¾‹ 2: æ•è·å¼‚å¸¸å¹¶æ£€æŸ¥</span></a></h4><p>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œæ›´å¸¸è§çš„åšæ³•æ˜¯ä½¿ç”¨ <code>try...catch</code> æ¥æ•è·å¯èƒ½å‘ç”Ÿçš„é”™è¯¯ï¼Œç„¶åå¯ä»¥ç”¨ç±»ä¼¼çš„é€»è¾‘æ¥å¤„ç†é”™è¯¯ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">try</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#616E88;">  // å°è¯•æ‰§è¡Œä¸€äº›å¯èƒ½ä¼šæŠ›å‡ºé”™è¯¯çš„æ“ä½œ</span></span>
<span class="line"><span style="color:#81A1C1;">  throw</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> Error</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Something went wrong</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;"> catch</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">error</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#81A1C1;">  if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">error</span><span style="color:#81A1C1;"> instanceof</span><span style="color:#D8DEE9FF;"> Error) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">error</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Caught an error:</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> error</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">message</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ç›´æ¥ä½¿ç”¨ <code>error instanceof Error</code> æ¥æ£€æŸ¥æ•è·åˆ°çš„å¼‚å¸¸æ˜¯å¦æ˜¯é”™è¯¯å¯¹è±¡ï¼Œè¿™æ˜¯ä¸€ç§æ›´ä¸ºç°ä»£å’Œæ¨èçš„æ–¹å¼ã€‚</p><h3 id="æ€»ç»“-21" tabindex="-1"><a class="header-anchor" href="#æ€»ç»“-21"><span>æ€»ç»“</span></a></h3><p>è™½ç„¶ <code>util.isError(object)</code> æ›¾ç»æ˜¯æ£€æŸ¥ä¸€ä¸ªå¯¹è±¡æ˜¯å¦ä¸ºé”™è¯¯å¯¹è±¡çš„æœ‰æ•ˆæ–¹æ³•ï¼Œä½†éšç€ JavaScript å‘å±•ï¼Œæ›´æ¨èä½¿ç”¨ <code>instanceof Error</code> æ¥è¿›è¡Œè¿™ç§åˆ¤æ–­ã€‚åœ¨å­¦ä¹ å’Œå¼€å‘è¿‡ç¨‹ä¸­ï¼Œäº†è§£ä¸åŒæ–¹æ³•çš„æ¼”å˜å¯¹äºæ·±å…¥ç†è§£è¯­è¨€ç‰¹æ€§éå¸¸æœ‰å¸®åŠ©ã€‚</p><h3 id="util-isfunction-object" tabindex="-1"><a class="header-anchor" href="#util-isfunction-object"><span><a href="https://nodejs.org/docs/latest/api/util.html#utilisfunctionobject" target="_blank" rel="noopener noreferrer">util.isFunction(object)</a></span></a></h3><p>Node.js çš„<code>util.isFunction(object)</code>å‡½æ•°æ˜¯ä¸€ä¸ªå®ç”¨å·¥å…·ï¼Œç”¨äºæ£€æŸ¥ä¼ é€’ç»™å®ƒçš„å¯¹è±¡æ˜¯å¦ä¸ºå‡½æ•°ã€‚åœ¨ Node.js v21.7.1 çš„æ–‡æ¡£ä¸­ï¼Œ<code>util.isFunction()</code>å¯èƒ½å¹¶ä¸ç›´æ¥å‡ºç°ï¼Œå› ä¸ºè¿™ä¸ª API åœ¨è¾ƒæ–°ç‰ˆæœ¬çš„ Node.js ä¸­å·²ç»è¢«å¼ƒç”¨æˆ–è€…æ ¹æœ¬å°±ä¸å­˜åœ¨ã€‚ä¸è¿‡ï¼Œä¸ºäº†è®©ä½ ç†è§£ç±»ä¼¼åŠŸèƒ½å’Œå¦‚ä½•æ£€æµ‹ä¸€ä¸ªå¯¹è±¡æ˜¯å¦ä¸ºå‡½æ•°çš„æ¦‚å¿µï¼Œæˆ‘å°†ä¼šåŸºäºå¸¸è§çš„ JavaScript æŠ€å·§å’Œ Node.js ç¯å¢ƒæ¥è§£é‡Šã€‚</p><p>é¦–å…ˆï¼Œè¦äº†è§£åœ¨ JavaScript ä¸­ï¼Œå‡½æ•°ä¹Ÿè¢«è§†ä¸ºå¯¹è±¡ã€‚è¿™æ„å‘³ç€å‡½æ•°å¯ä»¥åƒä»»ä½•å…¶ä»–å¯¹è±¡ä¸€æ ·è¢«èµ‹å€¼ç»™å˜é‡ã€ä½œä¸ºå‚æ•°ä¼ é€’ç»™å…¶ä»–å‡½æ•°ï¼Œä»¥åŠæ‹¥æœ‰å±æ€§å’Œæ–¹æ³•ã€‚ä½†å‡½æ•°ä¸å…¶ä»–å¯¹è±¡çš„ä¸»è¦åŒºåˆ«åœ¨äºï¼šå‡½æ•°å¯ä»¥è¢«â€œè°ƒç”¨â€ã€‚</p><p>é€šå¸¸ï¼Œåœ¨è¾ƒæ–°ç‰ˆæœ¬çš„ Node.js æˆ– JavaScript ä»£ç ä¸­ï¼Œè¦æ£€æŸ¥ä¸€ä¸ªå¯¹è±¡æ˜¯å¦ä¸ºå‡½æ•°ï¼Œä½ å¯ä»¥ä½¿ç”¨<code>typeof</code>æ“ä½œç¬¦ã€‚ä¸‹é¢æ˜¯ä¸€äº›ä½¿ç”¨<code>typeof</code>æ¥åˆ¤æ–­å¯¹è±¡æ˜¯å¦ä¸ºå‡½æ•°çš„ä¾‹å­ï¼š</p><h3 id="ç¤ºä¾‹-1-åŸºæœ¬æ£€æŸ¥" tabindex="-1"><a class="header-anchor" href="#ç¤ºä¾‹-1-åŸºæœ¬æ£€æŸ¥"><span>ç¤ºä¾‹ 1: åŸºæœ¬æ£€æŸ¥</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">function</span><span style="color:#88C0D0;"> myFunction</span><span style="color:#ECEFF4;">()</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Hello, World!</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#81A1C1;">typeof</span><span style="color:#D8DEE9;"> myFunction</span><span style="color:#81A1C1;"> ===</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">function</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">myFunction æ˜¯ä¸€ä¸ªå‡½æ•°</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;"> else</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">myFunction ä¸æ˜¯ä¸€ä¸ªå‡½æ•°</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ®µä»£ç ä¼šè¾“å‡ºï¼š&quot;myFunction æ˜¯ä¸€ä¸ªå‡½æ•°&quot;ï¼Œå› ä¸º<code>myFunction</code>ç¡®å®æ˜¯ä¸€ä¸ªå‡½æ•°ç±»å‹çš„å¯¹è±¡ã€‚</p><h3 id="ç¤ºä¾‹-2-å°†å‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’" tabindex="-1"><a class="header-anchor" href="#ç¤ºä¾‹-2-å°†å‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’"><span>ç¤ºä¾‹ 2: å°†å‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">function</span><span style="color:#88C0D0;"> executor</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">func</span><span style="color:#ECEFF4;">)</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#81A1C1;">typeof</span><span style="color:#D8DEE9;"> func</span><span style="color:#81A1C1;"> ===</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">function</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#88C0D0;">    func</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è°ƒç”¨å‡½æ•°</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span><span style="color:#81A1C1;"> else</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">æä¾›çš„å‚æ•°ä¸æ˜¯ä¸€ä¸ªå‡½æ•°</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88C0D0;">executor</span><span style="color:#D8DEE9FF;">(</span><span style="color:#81A1C1;">function</span><span style="color:#ECEFF4;"> ()</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">è¿™æ˜¯ä¸€ä¸ªåŒ¿åå‡½æ•°</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#88C0D0;">executor</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">123</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¿™å°†è¾“å‡ºï¼šâ€œæä¾›çš„å‚æ•°ä¸æ˜¯ä¸€ä¸ªå‡½æ•°â€</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<code>executor</code>å‡½æ•°æ¥å—ä¸€ä¸ªå‚æ•°ï¼Œå¹¶æ£€æŸ¥è¿™ä¸ªå‚æ•°æ˜¯å¦ä¸ºå‡½æ•°ã€‚å¦‚æœæ˜¯ï¼Œå®ƒå°±ä¼šæ‰§è¡Œè¿™ä¸ªå‡½æ•°ã€‚</p><h3 id="ç¤ºä¾‹-3-åœ¨å›è°ƒæ¨¡å¼ä¸­ä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#ç¤ºä¾‹-3-åœ¨å›è°ƒæ¨¡å¼ä¸­ä½¿ç”¨"><span>ç¤ºä¾‹ 3: åœ¨å›è°ƒæ¨¡å¼ä¸­ä½¿ç”¨</span></a></h3><p>åœ¨ Node.js çš„å¼‚æ­¥ç¼–ç¨‹æ¨¡å¼ä¸­ï¼Œå›è°ƒå‡½æ•°éå¸¸å¸¸è§ã€‚æ£€æŸ¥å›è°ƒå‚æ•°æ˜¯å¦ä¸ºåˆæ³•çš„å‡½æ•°ç±»å‹æ˜¯å¾ˆé‡è¦çš„ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">function</span><span style="color:#88C0D0;"> doSomethingAsync</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">callback</span><span style="color:#ECEFF4;">)</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#616E88;">  // å‡è®¾è¿™é‡Œæœ‰å¼‚æ­¥æ“ä½œ</span></span>
<span class="line"><span style="color:#81A1C1;">  if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#81A1C1;">typeof</span><span style="color:#D8DEE9;"> callback</span><span style="color:#81A1C1;"> ===</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">function</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#88C0D0;">    callback</span><span style="color:#D8DEE9FF;">(</span><span style="color:#81A1C1;">null</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">æ“ä½œæˆåŠŸå®Œæˆ</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span><span style="color:#81A1C1;"> else</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">error</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">é”™è¯¯: æä¾›çš„å›è°ƒä¸æ˜¯ä¸€ä¸ªå‡½æ•°</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88C0D0;">doSomethingAsync</span><span style="color:#D8DEE9FF;">(</span><span style="color:#81A1C1;">function</span><span style="color:#ECEFF4;"> (</span><span style="color:#D8DEE9;">err</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> result</span><span style="color:#ECEFF4;">)</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">err</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">error</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">err</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span><span style="color:#81A1C1;"> else</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">result</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡ºï¼šâ€œæ“ä½œæˆåŠŸå®Œæˆâ€</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88C0D0;">doSomethingAsync</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">è¿™æ˜æ˜¾ä¸æ˜¯ä¸€ä¸ªå‡½æ•°</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // é”™è¯¯: æä¾›çš„å›è°ƒä¸æ˜¯ä¸€ä¸ªå‡½æ•°</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é€šè¿‡æ£€æŸ¥ä¸€ä¸ªå¯¹è±¡æ˜¯å¦ä¸ºå‡½æ•°ï¼Œä½ èƒ½å¤Ÿç¡®ä¿ä»£ç æ­£å¸¸è¿è¡Œï¼Œé˜²æ­¢åœ¨å°è¯•è°ƒç”¨éå‡½æ•°ç±»å‹æ—¶å‡ºç°è¿è¡Œæ—¶é”™è¯¯ã€‚è™½ç„¶å…·ä½“çš„<code>util.isFunction(object)</code>å¯èƒ½ä¸åœ¨ Node.js çš„è¾ƒæ–°ç‰ˆæœ¬ä¸­ç›´æ¥æä¾›ï¼Œä½†ç†è§£å…¶èƒŒåçš„æ¦‚å¿µå¯¹äºç¼–å†™å¥å£®ä¸”æ˜“äºç»´æŠ¤çš„ Node.js åº”ç”¨ç¨‹åºæ˜¯éå¸¸æœ‰å¸®åŠ©çš„ã€‚</p><h3 id="util-isnull-object" tabindex="-1"><a class="header-anchor" href="#util-isnull-object"><span><a href="https://nodejs.org/docs/latest/api/util.html#utilisnullobject" target="_blank" rel="noopener noreferrer">util.isNull(object)</a></span></a></h3><p>Node.js çš„ <code>util.isNull(object)</code> å‡½æ•°æ˜¯ç”¨æ¥æ£€æŸ¥ä¸€ä¸ªå¯¹è±¡æ˜¯å¦ä¸º <code>null</code> çš„ä¾¿æ·æ–¹æ³•ã€‚åœ¨ç¼–ç¨‹ä¸­ï¼Œç»å¸¸éœ€è¦å¯¹å˜é‡è¿›è¡Œæ£€æŸ¥ä»¥ç¡®ä¿å®ƒä»¬ä¸æ˜¯ <code>null</code> æˆ– <code>undefined</code> ç­‰æ— æ•ˆå€¼ã€‚è¿™ç§æ£€æŸ¥ç‰¹åˆ«é‡è¦ï¼Œå› ä¸ºåœ¨å°è¯•è®¿é—®ä¸€ä¸ª <code>null</code> æˆ– <code>undefined</code> å¯¹è±¡çš„å±æ€§æ—¶ï¼ŒJavaScript ä¼šæŠ›å‡ºé”™è¯¯ã€‚</p><p>ç„¶è€Œï¼Œæˆ‘éœ€è¦æ¾„æ¸…çš„ä¸€ç‚¹æ˜¯ï¼Œæˆªè‡³æˆ‘çš„æœ€åæ›´æ–°ï¼ˆ2023 å¹´ï¼‰ï¼ŒNode.js å®˜æ–¹æ–‡æ¡£å¹¶æ²¡æœ‰ç›´æ¥æåˆ° <code>util.isNull(object)</code> è¿™ä¸ªå…·ä½“çš„å‡½æ•°ã€‚ç›¸åï¼ŒNode.js æä¾›äº† <code>util</code> æ¨¡å—ä¸­çš„å¤šç§å®ç”¨åŠŸèƒ½ï¼Œä¾‹å¦‚ç±»å‹æ£€æŸ¥çš„å‡½æ•°ï¼ˆä¾‹å¦‚ <code>util.isBoolean(value)</code>ã€<code>util.isNumber(value)</code> ç­‰ï¼‰ï¼Œä½† <code>isNull</code> ä¸æ˜¯åˆ—ä¸¾ä¸­çš„ä¸€å‘˜ã€‚ä½ å¯èƒ½æ˜¯æƒ³è¯¢é—®å¦‚ä½•åœ¨ Node.js ä¸­æ£€æŸ¥ä¸€ä¸ªå€¼æ˜¯å¦ä¸º <code>null</code>ã€‚</p><p>åœ¨ JavaScript å’Œ Node.js ä¸­ï¼Œä½ å¯ä»¥ç›´æ¥ä½¿ç”¨ä¸¥æ ¼ç­‰äºæ“ä½œç¬¦ <code>===</code> æ¥æ£€æŸ¥ä¸€ä¸ªå€¼æ˜¯å¦ä¸º <code>null</code>ã€‚è¿™æ˜¯ä¸€ä¸ªéå¸¸åŸºç¡€ä¹Ÿå¹¿æ³›åº”ç”¨çš„æ–¹æ³•ã€‚</p><h3 id="å®é™…ä¾‹å­-8" tabindex="-1"><a class="header-anchor" href="#å®é™…ä¾‹å­-8"><span>å®é™…ä¾‹å­</span></a></h3><p>å‡è®¾ä½ æ­£åœ¨å¼€å‘ä¸€ä¸ªç½‘ç«™åç«¯ï¼Œè¯¥ç½‘ç«™å…è®¸ç”¨æˆ·å¡«å†™ä¸ªäººèµ„æ–™ï¼ŒåŒ…æ‹¬ä»–ä»¬çš„åå­—ã€‚å½“è·å–ç”¨æˆ·ä¿¡æ¯ä»¥æ˜¾ç¤ºåœ¨é¡µé¢ä¸Šæ—¶ï¼Œä½ éœ€è¦ç¡®ä¿åå­—ä¸æ˜¯ <code>null</code>ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> userName</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> getUserInfo</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // å‡è®¾è¿™æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä»æ•°æ®åº“æˆ–è¯·æ±‚ä¸­è·å–ç”¨æˆ·å</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// æ£€æŸ¥ userName æ˜¯å¦ä¸º null</span></span>
<span class="line"><span style="color:#81A1C1;">if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">userName</span><span style="color:#81A1C1;"> ===</span><span style="color:#81A1C1;"> null</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">ç”¨æˆ·åæœªæä¾›</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;"> else</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">`</span><span style="color:#A3BE8C;">æ¬¢è¿å›æ¥, </span><span style="color:#81A1C1;">${</span><span style="color:#D8DEE9;">userName</span><span style="color:#81A1C1;">}</span><span style="color:#ECEFF4;">`</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå¦‚æœ <code>getUserInfo()</code> è¿”å› <code>null</code>ï¼Œè¡¨ç¤ºç”¨æˆ·åä¿¡æ¯ä¸å­˜åœ¨æˆ–æœªè¢«å¡«å†™ã€‚é€šè¿‡æ£€æŸ¥ <code>userName === null</code>ï¼Œæˆ‘ä»¬èƒ½å¤Ÿå®‰å…¨åœ°è¯†åˆ«è¿™ç§æƒ…å†µï¼Œå¹¶ç»™äºˆé€‚å½“çš„å“åº”ï¼ˆåœ¨è¿™ä¸ªä¾‹å­ä¸­æ˜¯æ‰“å°å‡ºâ€œç”¨æˆ·åæœªæä¾›â€ï¼‰ã€‚</p><h3 id="ç›´æ¥ä½¿ç”¨-null-æ£€æŸ¥" tabindex="-1"><a class="header-anchor" href="#ç›´æ¥ä½¿ç”¨-null-æ£€æŸ¥"><span>ç›´æ¥ä½¿ç”¨ <code>null</code> æ£€æŸ¥</span></a></h3><p>åœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œç›´æ¥ä½¿ç”¨ <code>=== null</code> æ¥åˆ¤æ–­ä¸€ä¸ªå˜é‡æ˜¯å¦ä¸º <code>null</code> æ˜¯æœ€ç®€å•ç›´æ¥çš„æ–¹å¼ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> someVariable</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> null;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">someVariable</span><span style="color:#81A1C1;"> ===</span><span style="color:#81A1C1;"> null</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">å˜é‡æ˜¯ null</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;"> else</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">å˜é‡ä¸æ˜¯ null</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ç§æ–¹æ³•ç®€å•ä¸”é«˜æ•ˆï¼Œé€‚ç”¨äºæ‰€æœ‰éœ€è¦åˆ¤æ–­æ˜¯å¦ä¸º <code>null</code> çš„åœºæ™¯ã€‚</p><p>æ€»ä¹‹ï¼Œè™½ç„¶ Node.js çš„ <code>util</code> æ¨¡å—æä¾›äº†å¾ˆå¤šæœ‰ç”¨çš„å·¥å…·ï¼Œå…³äºæ£€æŸ¥ <code>null</code>ï¼Œé€šå¸¸æˆ‘ä»¬ç›´æ¥ä½¿ç”¨ <code>===</code> æ“ä½œç¬¦å°±è¶³å¤Ÿäº†ã€‚å¦‚æœæ‚¨æ‰€è¯´çš„ <code>util.isNull(object)</code> å­˜åœ¨äºæŸä¸ªç‰¹å®šç‰ˆæœ¬æˆ–ç¬¬ä¸‰æ–¹åº“ä¸­ï¼Œè¯·å‚è€ƒç›¸åº”çš„æ–‡æ¡£æˆ–åº“è¯´æ˜ã€‚</p><h3 id="util-isnullorundefined-object" tabindex="-1"><a class="header-anchor" href="#util-isnullorundefined-object"><span><a href="https://nodejs.org/docs/latest/api/util.html#utilisnullorundefinedobject" target="_blank" rel="noopener noreferrer">util.isNullOrUndefined(object)</a></span></a></h3><p><code>util.isNullOrUndefined(object)</code> æ˜¯ä¸€ä¸ªæ–¹æ³•ï¼Œå®ƒç”¨äºåˆ¤æ–­ä¸€ä¸ªç»™å®šçš„å¯¹è±¡ï¼ˆæˆ–å˜é‡ï¼‰æ˜¯å¦ä¸º <code>null</code> æˆ–è€… <code>undefined</code>ã€‚åœ¨ç¼–ç¨‹ä¸­ï¼Œç»å¸¸éœ€è¦æ£€æŸ¥å˜é‡æ˜¯å¦æœ‰æœ‰æ•ˆçš„å€¼ï¼Œæˆ–è€…è¯´å˜é‡æ˜¯å¦â€œå­˜åœ¨â€ã€‚åœ¨ JavaScript ä¸­ï¼Œ<code>null</code> å’Œ <code>undefined</code> éƒ½å¯ä»¥ä»£è¡¨â€œæ²¡æœ‰å€¼â€æˆ–â€œç©ºâ€ï¼Œä½†å®ƒä»¬åˆæ˜¯ä¸¤ç§ä¸åŒçš„æ•°æ®ç±»å‹ã€‚</p><ul><li><code>null</code> é€šå¸¸è¡¨ç¤ºä¸€ä¸ªå˜é‡è¢«æ˜¾å¼åœ°è®¾ç½®ä¸ºâ€œæ— å€¼â€ã€‚</li><li><code>undefined</code> è¡¨ç¤ºå˜é‡å·²å£°æ˜ä½†æœªåˆå§‹åŒ–ï¼Œä¹Ÿå°±æ˜¯è¿˜æ²¡æœ‰è¢«èµ‹äºˆä»»ä½•å€¼ã€‚</li></ul><h3 id="å®é™…è¿ç”¨çš„ä¾‹å­-10" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨çš„ä¾‹å­-10"><span>å®é™…è¿ç”¨çš„ä¾‹å­</span></a></h3><h4 id="_1-è¡¨å•è¾“å…¥éªŒè¯" tabindex="-1"><a class="header-anchor" href="#_1-è¡¨å•è¾“å…¥éªŒè¯"><span>1. è¡¨å•è¾“å…¥éªŒè¯</span></a></h4><p>å‡è®¾ä½ æ­£åœ¨åˆ¶ä½œä¸€ä¸ªç½‘é¡µè¡¨å•ï¼Œç”¨æˆ·éœ€è¦å¡«å†™ä»–ä»¬çš„åå­—ã€‚åœ¨æäº¤ä¹‹å‰ï¼Œä½ æƒ³ç¡®ä¿è¿™ä¸ªå­—æ®µä¸æ˜¯ç©ºçš„ã€‚ä½ å¯ä»¥ä½¿ç”¨ <code>util.isNullOrUndefined()</code> æ–¹æ³•æ¥æ£€æŸ¥ç”¨æˆ·æ˜¯å¦è¾“å…¥äº†å€¼ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">function</span><span style="color:#88C0D0;"> validateFormInput</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">name</span><span style="color:#ECEFF4;">)</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isNullOrUndefined</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">name</span><span style="color:#D8DEE9FF;">)) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">é”™è¯¯ï¼šåå­—å­—æ®µä¸èƒ½ä¸ºç©ºã€‚</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span><span style="color:#81A1C1;"> else</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">åå­—æœ‰æ•ˆã€‚</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88C0D0;">validateFormInput</span><span style="color:#D8DEE9FF;">(</span><span style="color:#81A1C1;">undefined</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡ºï¼šé”™è¯¯ï¼šåå­—å­—æ®µä¸èƒ½ä¸ºç©ºã€‚</span></span>
<span class="line"><span style="color:#88C0D0;">validateFormInput</span><span style="color:#D8DEE9FF;">(</span><span style="color:#81A1C1;">null</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡ºï¼šé”™è¯¯ï¼šåå­—å­—æ®µä¸èƒ½ä¸ºç©ºã€‚</span></span>
<span class="line"><span style="color:#88C0D0;">validateFormInput</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">å¼ ä¸‰</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡ºï¼šåå­—æœ‰æ•ˆã€‚</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-é…ç½®é€‰é¡¹çš„é»˜è®¤å€¼" tabindex="-1"><a class="header-anchor" href="#_2-é…ç½®é€‰é¡¹çš„é»˜è®¤å€¼"><span>2. é…ç½®é€‰é¡¹çš„é»˜è®¤å€¼</span></a></h4><p>åœ¨å¼€å‘ä¸€ä¸ªåº”ç”¨æ—¶ï¼Œä½ å¯èƒ½ä¼šé‡åˆ°éœ€è¦æ ¹æ®ç”¨æˆ·æä¾›çš„é…ç½®æ¥æ”¹å˜è¡Œä¸ºçš„æƒ…å†µã€‚å¦‚æœç”¨æˆ·æ²¡æœ‰æŒ‡å®šæŸäº›é…ç½®é€‰é¡¹ï¼Œä½ å¯èƒ½å¸Œæœ›ä½¿ç”¨é»˜è®¤å€¼ã€‚<code>util.isNullOrUndefined()</code> æ–¹æ³•å¯ä»¥å¸®åŠ©ä½ æ£€æŸ¥å“ªäº›é€‰é¡¹æ²¡æœ‰è¢«è®¾ç½®ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">function</span><span style="color:#88C0D0;"> initializeApp</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">config</span><span style="color:#ECEFF4;">)</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  const</span><span style="color:#D8DEE9;"> defaultConfig</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#88C0D0;">    port</span><span style="color:#ECEFF4;">:</span><span style="color:#B48EAD;"> 3000</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#88C0D0;">    env</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">development</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">  if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isNullOrUndefined</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">config</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">port</span><span style="color:#D8DEE9FF;">)) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">    config</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">port</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> defaultConfig</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">port</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">  if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isNullOrUndefined</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">config</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">env</span><span style="color:#D8DEE9FF;">)) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">    config</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">env</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> defaultConfig</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">env</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">`</span><span style="color:#A3BE8C;">åº”ç”¨å¯åŠ¨åœ¨ç«¯å£ </span><span style="color:#81A1C1;">${</span><span style="color:#D8DEE9;">config</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">port</span><span style="color:#81A1C1;">}</span><span style="color:#A3BE8C;"> (</span><span style="color:#81A1C1;">${</span><span style="color:#D8DEE9;">config</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">env</span><span style="color:#81A1C1;">}</span><span style="color:#A3BE8C;">æ¨¡å¼)</span><span style="color:#ECEFF4;">`</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88C0D0;">initializeApp</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">{</span><span style="color:#88C0D0;"> port</span><span style="color:#ECEFF4;">:</span><span style="color:#B48EAD;"> 8080</span><span style="color:#ECEFF4;"> }</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // åº”ç”¨å¯åŠ¨åœ¨ç«¯å£ 8080 (developmentæ¨¡å¼)</span></span>
<span class="line"><span style="color:#88C0D0;">initializeApp</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">{}</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // åº”ç”¨å¯åŠ¨åœ¨ç«¯å£ 3000 (developmentæ¨¡å¼)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä»¥ä¸Šä¾‹å­å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ <code>util.isNullOrUndefined()</code> æ¥æ£€æŸ¥å’Œå¤„ç†ä¸ç¡®å®šçš„æˆ–ç¼ºå¤±çš„å€¼ï¼Œä»è€Œä½¿ä»£ç æ›´åŠ å¥å£¯ã€‚è¿™åœ¨å®é™…å¼€å‘ä¸­éå¸¸æœ‰ç”¨ï¼Œå°¤å…¶æ˜¯åœ¨å¤„ç†é…ç½®ã€ç”¨æˆ·è¾“å…¥ç­‰æƒ…å†µæ—¶ã€‚</p><h3 id="util-isnumber-object" tabindex="-1"><a class="header-anchor" href="#util-isnumber-object"><span><a href="https://nodejs.org/docs/latest/api/util.html#utilisnumberobject" target="_blank" rel="noopener noreferrer">util.isNumber(object)</a></span></a></h3><p>é¦–å…ˆï¼Œæˆ‘æƒ³æŒ‡å‡ºçš„æ˜¯ï¼Œæˆªè‡³æˆ‘æœ€åçš„çŸ¥è¯†æ›´æ–°ï¼ˆåœ¨ 2023 å¹´ï¼‰ï¼Œåœ¨ Node.js ä¸­å¹¶æ²¡æœ‰ç›´æ¥åä¸º<code>util.isNumber(object)</code>çš„å®˜æ–¹ APIã€‚è¿™å¯èƒ½æ˜¯ä¸€ä¸ªè¯¯è§£æˆ–è€…æ˜¯å¯¹æŸä¸ªç‰¹å®šåº“æˆ–åŠŸèƒ½çš„æ··æ·†ã€‚Node.js çš„<code>util</code>æ¨¡å—ç¡®å®æä¾›äº†è®¸å¤šè¾…åŠ©å‡½æ•°ï¼Œç”¨äºå¤„ç†å„ç§æ•°æ®ç±»å‹çš„æ£€æŸ¥å’Œè½¬æ¢ï¼Œä½†ç›´æ¥æ£€æŸ¥ä¸€ä¸ªå¯¹è±¡æ˜¯å¦ä¸ºæ•°å­—çš„å‡½æ•°ä¸æ˜¯ Node.js æ ‡å‡†åº“çš„ä¸€éƒ¨åˆ†ã€‚</p><p>ç„¶è€Œï¼Œä¸ºäº†ç»™ä½ ä¸€ä¸ªå¯¹å¦‚ä½•åœ¨ Node.js ä¸­åˆ¤æ–­ä¸€ä¸ªå€¼æ˜¯å¦ä¸ºæ•°å­—çš„æƒ³æ³•ï¼Œæˆ‘ä¼šæä¾›ä¸€ç§æ–¹æ³•ï¼Œå¹¶ä¸¾å‡ºä¸€äº›å®é™…åº”ç”¨çš„ä¾‹å­ã€‚</p><h3 id="å¦‚ä½•åœ¨-node-js-ä¸­æ£€æŸ¥ä¸€ä¸ªå€¼æ˜¯å¦ä¸ºæ•°å­—" tabindex="-1"><a class="header-anchor" href="#å¦‚ä½•åœ¨-node-js-ä¸­æ£€æŸ¥ä¸€ä¸ªå€¼æ˜¯å¦ä¸ºæ•°å­—"><span>å¦‚ä½•åœ¨ Node.js ä¸­æ£€æŸ¥ä¸€ä¸ªå€¼æ˜¯å¦ä¸ºæ•°å­—</span></a></h3><p>è™½ç„¶æ²¡æœ‰<code>util.isNumber()</code>ï¼Œä½†ä½ å¯ä»¥ä½¿ç”¨ JavaScript çš„åŸç”Ÿç±»å‹åˆ¤æ–­èƒ½åŠ›æ¥åˆ¤æ–­ä¸€ä¸ªå€¼æ˜¯å¦ä¸ºæ•°å­—ã€‚JavaScript æä¾›äº†<code>typeof</code>è¿ç®—ç¬¦ï¼Œå®ƒå¯ä»¥å¸®åŠ©ä½ æ£€æŸ¥ä¸€ä¸ªå˜é‡çš„ç±»å‹ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">function</span><span style="color:#88C0D0;"> isNumber</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">value</span><span style="color:#ECEFF4;">)</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  return</span><span style="color:#81A1C1;"> typeof</span><span style="color:#D8DEE9;"> value</span><span style="color:#81A1C1;"> ===</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">number</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;"> &amp;&amp;</span><span style="color:#81A1C1;"> !</span><span style="color:#88C0D0;">isNaN</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">value</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªå‡½æ•°ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆä½¿ç”¨<code>typeof value === &#39;number&#39;</code>æ¥æ£€æŸ¥<code>value</code>æ˜¯å¦ä¸ºæ•°å­—ç±»å‹ã€‚ç„¶åï¼Œæˆ‘ä»¬ä½¿ç”¨<code>!isNaN(value)</code>æ¥æ’é™¤é‚£äº›å€¼ä¸º<code>NaN</code>ï¼ˆNot-a-Numberï¼Œéæ•°å­—ï¼‰çš„æƒ…å†µã€‚å› ä¸ºåœ¨ JavaScript ä¸­ï¼Œ<code>NaN</code>ä¹Ÿè¢«è®¤ä¸ºæ˜¯<code>number</code>ç±»å‹ï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´æ··æ·†ã€‚</p><h3 id="å®é™…è¿ç”¨ç¤ºä¾‹-17" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨ç¤ºä¾‹-17"><span>å®é™…è¿ç”¨ç¤ºä¾‹</span></a></h3><ol><li><strong>åŸºæœ¬æ•°å€¼æ£€æŸ¥</strong> - å½“ä½ ä»ç”¨æˆ·è¾“å…¥æˆ–å¤–éƒ¨æœåŠ¡è·å–æ•°æ®æ—¶ï¼Œä½ å¯èƒ½éœ€è¦éªŒè¯è¿™äº›æ•°æ®æ˜¯å¦ä¸ºæœ‰æ•ˆçš„æ•°å­—ï¼Œä»¥ç¡®ä¿å®ƒä»¬å¯ä»¥è¢«æ­£ç¡®å¤„ç†æˆ–è®¡ç®—ã€‚</li></ol><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> userInput</span><span style="color:#81A1C1;"> =</span><span style="color:#B48EAD;"> 23</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#88C0D0;">isNumber</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">userInput</span><span style="color:#D8DEE9FF;">)) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">This is a valid number</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;"> else</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">This is not a number</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li><strong>æ•°æ®è¿‡æ»¤</strong> - å½“å¤„ç†ä¸€ä¸ªæ•°ç»„ï¼Œå¹¶åªæƒ³å¯¹å…¶ä¸­çš„æ•°å­—å…ƒç´ è¿›è¡Œæ“ä½œæ—¶ã€‚</li></ol><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> mixedArray</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9FF;"> [</span><span style="color:#B48EAD;">1</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">hello</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 2</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">world</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 3</span><span style="color:#D8DEE9FF;">]</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> numbersOnly</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> mixedArray</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">filter</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">isNumber</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">numbersOnly</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡º: [1, 2, 3]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li><strong>æ•°å€¼è®¡ç®—</strong> - åœ¨æ‰§è¡Œä»»ä½•æ•°å­¦è®¡ç®—ä¹‹å‰ï¼Œç¡®è®¤æ“ä½œæ•°éƒ½æ˜¯æ•°å­—ï¼Œå¯ä»¥é¿å…è¿ç®—é”™è¯¯ã€‚</li></ol><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> a</span><span style="color:#81A1C1;"> =</span><span style="color:#B48EAD;"> 5</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#D8DEE9;">  b</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">10</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#88C0D0;">isNumber</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">a</span><span style="color:#D8DEE9FF;">) </span><span style="color:#81A1C1;">&amp;&amp;</span><span style="color:#88C0D0;"> isNumber</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">b</span><span style="color:#D8DEE9FF;">)) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">a</span><span style="color:#81A1C1;"> +</span><span style="color:#D8DEE9;"> b</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¿™é‡Œä¸ä¼šæ‰§è¡Œï¼Œå› ä¸ºbä¸æ˜¯ä¸€ä¸ªæ•°å­—</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;"> else</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">One of the operands is not a number</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é€šè¿‡ä»¥ä¸Šç¤ºä¾‹ï¼Œä½ åº”è¯¥èƒ½å¤Ÿç†è§£åœ¨ Node.js ä¸­å¦‚ä½•æ£€æŸ¥ä¸€ä¸ªå€¼æ˜¯å¦ä¸ºæ•°å­—ï¼Œå³ä½¿æ²¡æœ‰ç›´æ¥çš„<code>util.isNumber()</code>å‡½æ•°ã€‚è¿™ç§æ–¹æ³•å¾ˆç®€å•ï¼Œä¹Ÿæ˜“äºç†è§£ï¼Œå¯¹ç¼–ç¨‹æ–°æ‰‹æ¥è¯´æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„èµ·ç‚¹ã€‚</p><h3 id="util-isobject-object" tabindex="-1"><a class="header-anchor" href="#util-isobject-object"><span><a href="https://nodejs.org/docs/latest/api/util.html#utilisobjectobject" target="_blank" rel="noopener noreferrer">util.isObject(object)</a></span></a></h3><p>é¦–å…ˆï¼Œä»ä½ æä¾›çš„é“¾æ¥æ¥çœ‹ï¼Œæˆªè‡³æˆ‘æœ€åæ›´æ–°çš„æ—¶é—´ï¼ˆ2023 å¹´ï¼‰ï¼Œ<code>util.isObject(object)</code>è¿™ä¸ªå…·ä½“å‡½æ•°å¹¶ä¸ç›´æ¥å­˜åœ¨äº Node.js çš„å®˜æ–¹æ–‡æ¡£ä¸­ã€‚Node.js çš„<code>util</code>æ¨¡å—ç¡®å®æä¾›äº†å¾ˆå¤šå®ç”¨çš„åŠŸèƒ½ï¼Œä½†<code>isObject</code>å‡½æ•°åœ¨ç›´æ¥çš„å½¢å¼ä¸Šå¯èƒ½æ˜¯ä¸å­˜åœ¨çš„ï¼Œæˆ–è€…å¯èƒ½æ˜¯ç¤¾åŒºä¸­å¸¸ç”¨çš„ä¸€ä¸ªä¹ æƒ¯æ€§å‘½åï¼Œè€Œéå®˜æ–¹ API çš„ä¸€éƒ¨åˆ†ã€‚</p><p>ä¸è¿‡ï¼Œä¸ç”¨æ‹…å¿ƒï¼æˆ‘ä»¬å¯ä»¥è®¨è®ºä¸€ä¸‹å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªå˜é‡æ˜¯å¦ä¸ºå¯¹è±¡ï¼Œä»¥åŠè¿™åœ¨å®é™…åº”ç”¨ä¸­çš„ä¸€äº›ä¾‹å­ï¼Œè¿™åŸºæœ¬ä¸Šæ¶‰åŠäº†ä½ æƒ³çŸ¥é“çš„æ ¸å¿ƒå†…å®¹ã€‚</p><p>åœ¨ JavaScript ä¸­ï¼Œå‡ ä¹â€œæ‰€æœ‰äº‹ç‰©â€éƒ½æ˜¯å¯¹è±¡ã€‚è¿™é‡Œçš„â€œå‡ ä¹â€ï¼ŒæŒ‡çš„æ˜¯é™¤äº†åŸå§‹ç±»å‹ï¼ˆæ¯”å¦‚æ•°å­—ã€å­—ç¬¦ä¸²ã€å¸ƒå°”å€¼ã€<code>null</code>ã€<code>undefined</code>å’Œåœ¨ ES6 ä¸­æ–°å¢çš„<code>Symbol</code>ï¼‰ä¹‹å¤–ã€‚ç„¶è€Œï¼Œåœ¨è®¸å¤šåœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬æ›´å…³æ³¨çš„æ˜¯é‚£äº›éåŸå§‹çš„å¼•ç”¨ç±»å‹å¯¹è±¡ï¼Œæ¯”å¦‚æ™®é€šå¯¹è±¡<code>{}</code>ã€æ•°ç»„<code>[]</code>ã€å‡½æ•°ç­‰ã€‚</p><p>ç›´è§‚åœ°æ£€æµ‹ä¸€ä¸ªå˜é‡æ˜¯å¦ä¸ºå¯¹è±¡ï¼ˆæ’é™¤å‡½æ•°å’Œæ•°ç»„ï¼‰ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šä½¿ç”¨<code>typeof</code>è¿ç®—ç¬¦ç»“åˆä¸€äº›é€»è¾‘åˆ¤æ–­ã€‚ä¸è¿‡ï¼Œè¿™å¹¶ä¸å®Œå…¨ç²¾ç¡®ï¼Œå› ä¸º<code>typeof</code>å¯¹äºå‡½æ•°ä¹Ÿä¼šè¿”å›<code>&quot;object&quot;</code>ã€‚å¯¹äºæ•°ç»„ï¼Œè™½ç„¶å®ƒä»¬åœ¨æŠ€æœ¯ä¸Šä¹Ÿæ˜¯å¯¹è±¡ï¼Œä½†æœ‰æ—¶æˆ‘ä»¬å¸Œæœ›å°†å®ƒä»¬åŒºåˆ«å¯¹å¾…ã€‚</p><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„è‡ªå®šä¹‰<code>isObject</code>å®ç°ç¤ºä¾‹ï¼Œå®ƒå°è¯•æ›´åŠ ç²¾ç¡®åœ°æ£€æµ‹ä¸€ä¸ªå˜é‡æ˜¯å¦æ˜¯ä¸€ä¸ªâ€œæ™®é€šå¯¹è±¡â€ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">function</span><span style="color:#88C0D0;"> isObject</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">value</span><span style="color:#ECEFF4;">)</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  return</span><span style="color:#D8DEE9;"> value</span><span style="color:#81A1C1;"> !==</span><span style="color:#81A1C1;"> null</span><span style="color:#81A1C1;"> &amp;&amp;</span><span style="color:#81A1C1;"> typeof</span><span style="color:#D8DEE9;"> value</span><span style="color:#81A1C1;"> ===</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">object</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;"> &amp;&amp;</span><span style="color:#81A1C1;"> !</span><span style="color:#D8DEE9;">Array</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isArray</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">value</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// ä½¿ç”¨ç¤ºä¾‹</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#88C0D0;">isObject</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">{}</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // true</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#88C0D0;">isObject</span><span style="color:#D8DEE9FF;">([]))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // false</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#88C0D0;">isObject</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">()</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {}</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // false</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#88C0D0;">isObject</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">123</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // false</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#88C0D0;">isObject</span><span style="color:#D8DEE9FF;">(</span><span style="color:#81A1C1;">null</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // false</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="å®é™…è¿ç”¨çš„ä¾‹å­-11" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨çš„ä¾‹å­-11"><span>å®é™…è¿ç”¨çš„ä¾‹å­</span></a></h3><ol><li><p><strong>é…ç½®æ–‡ä»¶è§£æ</strong>ï¼š<br> å½“ä½ ä½¿ç”¨ Node.js å¼€å‘åº”ç”¨æ—¶ï¼Œå¾€å¾€éœ€è¦åŠ è½½å’Œè§£æé…ç½®æ–‡ä»¶ï¼ˆå¦‚ JSON æ ¼å¼ï¼‰ã€‚åœ¨è¯»å–å’Œå¤„ç†è¿™äº›é…ç½®ä¿¡æ¯ä¹‹å‰ï¼Œä½ å¯èƒ½ä¼šç”¨ç±»ä¼¼<code>isObject</code>çš„å‡½æ•°æ¥ç¡®è®¤è§£æåçš„ç»“æœæ˜¯å¦ä¸ºä¸€ä¸ªåˆæ³•çš„å¯¹è±¡ï¼Œä»¥ç¡®ä¿åç»­æ“ä½œçš„å®‰å…¨æ€§ã€‚</p></li><li><p><strong>ä¸­é—´ä»¶å‚æ•°éªŒè¯</strong>ï¼š<br> å¦‚æœä½ æ­£åœ¨ç¼–å†™ä¸€ä¸ª Express.js çš„ä¸­é—´ä»¶ï¼Œè¯¥ä¸­é—´ä»¶æœŸæœ›æ¥æ”¶ä¸€ä¸ªå¯¹è±¡ä½œä¸ºé€‰é¡¹æˆ–é…ç½®å‚æ•°ï¼Œä½¿ç”¨<code>isObject</code>å¯ä»¥å¸®åŠ©ä½ éªŒè¯ä¼ å…¥çš„å‚æ•°æ˜¯å¦æ»¡è¶³è¦æ±‚ã€‚</p></li><li><p><strong>API å“åº”å¤„ç†</strong>ï¼š<br> å½“è°ƒç”¨å¤–éƒ¨ API å¹¶æ¥æ”¶åˆ°å“åº”æ—¶ï¼Œç»å¸¸éœ€è¦åˆ¤æ–­è¿”å›çš„æ•°æ®æ˜¯å¦ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œä»¥ä¾¿æ­£ç¡®åœ°å¤„ç†æ•°æ®æˆ–è°ƒæ•´é”™è¯¯å¤„ç†æµç¨‹ã€‚</p></li></ol><p>é€šè¿‡ä»¥ä¸Šä¾‹å­ï¼Œæˆ‘å¸Œæœ›èƒ½å¤Ÿå¸®åŠ©ä½ ç†è§£åœ¨ Node.js ä¸­åˆ¤å®šä¸€ä¸ªå€¼æ˜¯å¦ä¸ºå¯¹è±¡çš„æ¦‚å¿µåŠå…¶åº”ç”¨ã€‚è®°ä½ï¼Œå®é™…çš„åº”ç”¨åœºæ™¯å¯èƒ½å› å…·ä½“éœ€æ±‚è€Œå¼‚ï¼Œåˆ¤æ–­é€»è¾‘ä¹Ÿå¯èƒ½å› é¡¹ç›®çš„ä¸åŒéœ€æ±‚è€Œæœ‰æ‰€è°ƒæ•´ã€‚</p><h3 id="util-isprimitive-object" tabindex="-1"><a class="header-anchor" href="#util-isprimitive-object"><span><a href="https://nodejs.org/docs/latest/api/util.html#utilisprimitiveobject" target="_blank" rel="noopener noreferrer">util.isPrimitive(object)</a></span></a></h3><p>åœ¨äº†è§£ <code>util.isPrimitive(object)</code> çš„å…·ä½“ç”¨é€”ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥ç®€å•ç†è§£ä¸€ä¸‹ JavaScript ä¸­çš„æ•°æ®ç±»å‹ï¼Œä»¥ä¾¿æ›´å¥½åœ°æŒæ¡è¿™ä¸ªæ–¹æ³•çš„åº”ç”¨åœºæ™¯ã€‚</p><p>JavaScript æ•°æ®ç±»å‹å¤§ä½“ä¸Šå¯ä»¥åˆ†ä¸ºä¸¤ç±»ï¼š<strong>åŸå§‹ç±»å‹ï¼ˆPrimitiveï¼‰<strong>å’Œ</strong>å¯¹è±¡ç±»å‹ï¼ˆObjectï¼‰</strong>ã€‚</p><ul><li><strong>åŸå§‹ç±»å‹</strong>åŒ…æ‹¬ï¼š<code>undefined</code>ã€<code>null</code>ã€<code>boolean</code>ï¼ˆå¸ƒå°”å€¼ï¼‰ã€<code>string</code>ï¼ˆå­—ç¬¦ä¸²ï¼‰ã€<code>number</code>ï¼ˆæ•°å­—ï¼‰ã€<code>symbol</code>ï¼ˆç¬¦å·ï¼ŒES6 æ–°å¢ï¼‰ã€<code>bigint</code>ï¼ˆå¤§æ•´æ•°ï¼ŒES2020 æ–°å¢ï¼‰ã€‚</li><li><strong>å¯¹è±¡ç±»å‹</strong>åˆ™æ˜¯é™¤åŸå§‹ç±»å‹å¤–çš„æ‰€æœ‰ç±»å‹ï¼Œæ¯”å¦‚å¸¸è§çš„å¯¹è±¡å­—é¢é‡ <code>{}</code>ã€æ•°ç»„ <code>[]</code>ã€å‡½æ•° <code>function(){}</code> ç­‰ã€‚</li></ul><p><code>util.isPrimitive(object)</code> æ˜¯ Node.js ä¸­æä¾›çš„ä¸€ä¸ªå®ç”¨å·¥å…·æ–¹æ³•ï¼Œç”¨äºæ£€æŸ¥ä¸€ä¸ªå€¼æ˜¯å¦ä¸ºåŸå§‹ç±»å‹ã€‚å¦‚æœä¼ å…¥çš„å€¼å±äºåŸå§‹ç±»å‹ï¼Œåˆ™è¯¥æ–¹æ³•è¿”å› <code>true</code>ï¼›åä¹‹ï¼Œå¦‚æœä¼ å…¥çš„å€¼ä¸ºå¯¹è±¡ç±»å‹ï¼Œåˆ™è¿”å› <code>false</code>ã€‚</p><h3 id="å®é™…è¿ç”¨ç¤ºä¾‹-18" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨ç¤ºä¾‹-18"><span>å®é™…è¿ç”¨ç¤ºä¾‹</span></a></h3><ol><li><strong>éªŒè¯å˜é‡ç±»å‹</strong>ï¼šåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå¯èƒ½éœ€è¦æ ¹æ®å˜é‡çš„ç±»å‹æ‰§è¡Œä¸åŒçš„æ“ä½œæˆ–é€»è¾‘å¤„ç†ã€‚åˆ©ç”¨ <code>util.isPrimitive</code> å¯ä»¥è½»æ¾åˆ¤æ–­ä¸€ä¸ªå˜é‡æ˜¯å¦ä¸ºåŸå§‹ç±»å‹ã€‚</li></ol><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isPrimitive</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">100</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡ºï¼štrue</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isPrimitive</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">hello</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡ºï¼štrue</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isPrimitive</span><span style="color:#D8DEE9FF;">(</span><span style="color:#81A1C1;">null</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡ºï¼štrue</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isPrimitive</span><span style="color:#D8DEE9FF;">(</span><span style="color:#81A1C1;">undefined</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡ºï¼štrue</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isPrimitive</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">{}</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡ºï¼šfalse</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isPrimitive</span><span style="color:#D8DEE9FF;">([]))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡ºï¼šfalse</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isPrimitive</span><span style="color:#D8DEE9FF;">(</span><span style="color:#81A1C1;">function</span><span style="color:#ECEFF4;"> ()</span><span style="color:#ECEFF4;"> {}</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡ºï¼šfalse</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li><strong>API å‚æ•°æ ¡éªŒ</strong>ï¼šç¼–å†™ API æˆ–æ¡†æ¶æ—¶ï¼Œå‚æ•°ç±»å‹çš„æ ¡éªŒæ˜¯å¾ˆå¸¸è§çš„éœ€æ±‚ã€‚ä½¿ç”¨ <code>util.isPrimitive</code> å¯ä»¥å¸®åŠ©å¼€å‘è€…ç¡®ä¿ä¼ å…¥çš„å‚æ•°ç¬¦åˆé¢„æœŸçš„ç±»å‹è¦æ±‚ã€‚</li></ol><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">function</span><span style="color:#88C0D0;"> apiFunction</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">param</span><span style="color:#ECEFF4;">)</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#81A1C1;">!</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isPrimitive</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">param</span><span style="color:#D8DEE9FF;">)) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#81A1C1;">    throw</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> TypeError</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">å‚æ•°å¿…é¡»æ˜¯åŸå§‹ç±»å‹</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span></span>
<span class="line"><span style="color:#616E88;">  // å¤„ç†é€»è¾‘...</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">try</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#88C0D0;">  apiFunction</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">{}</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;"> catch</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">e</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">e</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">message</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡ºï¼šå‚æ•°å¿…é¡»æ˜¯åŸå§‹ç±»å‹</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li><strong>æ•°æ®åºåˆ—åŒ–å‰çš„æ£€æŸ¥</strong>ï¼šåœ¨è¿›è¡Œæ•°æ®åºåˆ—åŒ–ï¼ˆå¦‚ JSON.stringifyï¼‰ä¹‹å‰ï¼Œå¯èƒ½éœ€è¦å…ˆæ£€æŸ¥æ•°æ®æ˜¯å¦åŒ…å«éåŸå§‹ç±»å‹çš„å€¼ï¼Œå› ä¸ºæŸäº›ç‰¹æ®Šå¯¹è±¡ç±»å‹ï¼ˆä¾‹å¦‚å‡½æ•°ã€å¾ªç¯å¼•ç”¨çš„å¯¹è±¡ç­‰ï¼‰æ— æ³•è¢«ç›´æ¥åºåˆ—åŒ–ã€‚</li></ol><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> data</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#88C0D0;">  name</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">John</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#88C0D0;">  age</span><span style="color:#ECEFF4;">:</span><span style="color:#B48EAD;"> 30</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#88C0D0;">  greet</span><span style="color:#ECEFF4;">:</span><span style="color:#81A1C1;"> function</span><span style="color:#ECEFF4;"> ()</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Hello!</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  },</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">Object</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">values</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">data</span><span style="color:#D8DEE9FF;">)</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">some</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">value</span><span style="color:#ECEFF4;">)</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#81A1C1;"> !</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isPrimitive</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">value</span><span style="color:#D8DEE9FF;">))) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">æ•°æ®ä¸­åŒ…å«éåŸå§‹ç±»å‹çš„å€¼ï¼Œå¯èƒ½æ— æ³•å®Œå…¨åºåˆ—åŒ–ã€‚</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é€šè¿‡ä¸Šè¿°ç¤ºä¾‹ï¼Œä½ åº”è¯¥å¯¹ <code>util.isPrimitive(object)</code> æ–¹æ³•æœ‰äº†åŸºæœ¬çš„äº†è§£ï¼šå®ƒä¸»è¦ç”¨äºåˆ¤æ–­ç»™å®šçš„å€¼æ˜¯å¦ä¸ºåŸå§‹ç±»å‹ã€‚è¿™åœ¨å®é™…å¼€å‘ä¸­éå¸¸æœ‰ç”¨ï¼Œç‰¹åˆ«æ˜¯åœ¨éœ€è¦å¯¹æ•°æ®ç±»å‹åšç²¾ç¡®æ§åˆ¶å’Œå¤„ç†çš„åœºæ™¯ä¸­ã€‚</p><h3 id="util-isregexp-object" tabindex="-1"><a class="header-anchor" href="#util-isregexp-object"><span><a href="https://nodejs.org/docs/latest/api/util.html#utilisregexpobject" target="_blank" rel="noopener noreferrer">util.isRegExp(object)</a></span></a></h3><p>Node.js ä¸­çš„<code>util.isRegExp(object)</code>æ˜¯ä¸€ä¸ªç”¨æ¥æ£€æŸ¥ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯æ­£åˆ™è¡¨è¾¾å¼ï¼ˆRegExpï¼‰çš„æ–¹æ³•ã€‚è¿™ä¸ªåŠŸèƒ½å¾ˆå®ç”¨ï¼Œå°¤å…¶æ˜¯åœ¨éœ€è¦éªŒè¯å˜é‡ç±»å‹æˆ–è€…å¤„ç†ä¸åŒç±»å‹çš„æ•°æ®æ—¶ã€‚æˆ‘ä¼šé€šè¿‡è§£é‡Šå’Œä¾‹å­æ¥è®©ä½ æ›´å¥½åœ°ç†è§£å®ƒã€‚</p><p>é¦–å…ˆï¼Œä»€ä¹ˆæ˜¯æ­£åˆ™è¡¨è¾¾å¼ï¼ˆRegExpï¼‰ï¼Ÿç®€å•æ¥è¯´ï¼Œæ­£åˆ™è¡¨è¾¾å¼æ˜¯ä¸€ç§å¼ºå¤§çš„æ–‡æœ¬å¤„ç†å·¥å…·ï¼Œå®ƒå¯ä»¥å¸®åŠ©æˆ‘ä»¬è¿›è¡Œå¤æ‚çš„å­—ç¬¦ä¸²åŒ¹é…ã€æŸ¥æ‰¾å’Œæ›¿æ¢æ“ä½œã€‚åœ¨ JavaScript ä¸­ï¼Œæ­£åˆ™è¡¨è¾¾å¼é€šå¸¸è¢«ç”¨æ¥éªŒè¯å­—ç¬¦ä¸²æ ¼å¼ï¼Œæ¯”å¦‚é‚®ç®±ã€ç”µè¯å·ç ç­‰ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹<code>util.isRegExp(object)</code>å¦‚ä½•å·¥ä½œã€‚</p><h3 id="ä½¿ç”¨util-isregexp-object" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨util-isregexp-object"><span>ä½¿ç”¨<code>util.isRegExp(object)</code></span></a></h3><p>è¦ä½¿ç”¨<code>util.isRegExp()</code>ï¼Œé¦–å…ˆéœ€è¦å¼•å…¥ Node.js ä¸­çš„<code>util</code>æ¨¡å—ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>ä¹‹åï¼Œå°±å¯ä»¥åˆ©ç”¨<code>util.isRegExp()</code>æ¥åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯ RegExp å¯¹è±¡äº†ã€‚</p><h4 id="ä¾‹å­-1-åˆ¤æ–­å¯¹è±¡æ˜¯å¦ä¸ºæ­£åˆ™è¡¨è¾¾å¼" tabindex="-1"><a class="header-anchor" href="#ä¾‹å­-1-åˆ¤æ–­å¯¹è±¡æ˜¯å¦ä¸ºæ­£åˆ™è¡¨è¾¾å¼"><span>ä¾‹å­ 1: åˆ¤æ–­å¯¹è±¡æ˜¯å¦ä¸ºæ­£åˆ™è¡¨è¾¾å¼</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// åˆ›å»ºä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼å¯¹è±¡</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> regex</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> RegExp</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">abc</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// ä½¿ç”¨util.isRegExp()åˆ¤æ–­</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isRegExp</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">regex</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡º: true</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å¯¹æ¯”éRegExpå¯¹è±¡</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isRegExp</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">{}</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡º: false</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isRegExp</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">/abc/</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡º: false</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isRegExp</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">123</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡º: false</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆåˆ›å»ºäº†ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼å¯¹è±¡<code>regex</code>ã€‚ç„¶åï¼Œæˆ‘ä»¬ä½¿ç”¨<code>util.isRegExp()</code>æ¥åˆ¤æ–­è¿™ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯ RegExpã€‚æ­£å¦‚é¢„æœŸçš„é‚£æ ·ï¼Œå¯¹äºçœŸæ­£çš„ RegExp å¯¹è±¡ï¼Œå®ƒè¿”å›<code>true</code>ï¼›è€Œå¯¹äºå…¶ä»–ç±»å‹çš„å¯¹è±¡ï¼Œå®ƒè¿”å›<code>false</code>ã€‚</p><h4 id="å®é™…è¿ç”¨-7" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨-7"><span>å®é™…è¿ç”¨</span></a></h4><p>å‡è®¾ä½ æ­£åœ¨ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°éœ€è¦å¤„ç†ç”¨æˆ·è¾“å…¥çš„æ•°æ®ã€‚è¿™äº›æ•°æ®å¯èƒ½æ˜¯å­—ç¬¦ä¸²ã€æ•°ç»„ã€ç”šè‡³æ˜¯æ­£åˆ™è¡¨è¾¾å¼ã€‚ä½ æƒ³æ ¹æ®ä¸åŒçš„æ•°æ®ç±»å‹æ‰§è¡Œä¸åŒçš„é€»è¾‘ã€‚è¿™æ—¶å€™ï¼Œ<code>util.isRegExp()</code>å°±èƒ½æ´¾ä¸Šç”¨åœºäº†ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">function</span><span style="color:#88C0D0;"> processData</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">input</span><span style="color:#ECEFF4;">)</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isRegExp</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">input</span><span style="color:#D8DEE9FF;">)) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">è¿™æ˜¯ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ã€‚</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#616E88;">    // è¿›è¡Œæ­£åˆ™è¡¨è¾¾å¼ç›¸å…³çš„å¤„ç†...</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span><span style="color:#81A1C1;"> else</span><span style="color:#81A1C1;"> if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">Array</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isArray</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">input</span><span style="color:#D8DEE9FF;">)) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">è¿™æ˜¯ä¸€ä¸ªæ•°ç»„ã€‚</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#616E88;">    // è¿›è¡Œæ•°ç»„ç›¸å…³çš„å¤„ç†...</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span><span style="color:#81A1C1;"> else</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">è¿™æ˜¯å…¶ä»–ç±»å‹çš„æ•°æ®ã€‚</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#616E88;">    // è¿›è¡Œå…¶ä»–ç±»å‹æ•°æ®çš„å¤„ç†...</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88C0D0;">processData</span><span style="color:#D8DEE9FF;">(</span><span style="color:#81A1C1;">new</span><span style="color:#88C0D0;"> RegExp</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">abc</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡º: è¿™æ˜¯ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ã€‚</span></span>
<span class="line"><span style="color:#88C0D0;">processData</span><span style="color:#D8DEE9FF;">([</span><span style="color:#B48EAD;">1</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 2</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 3</span><span style="color:#D8DEE9FF;">])</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡º: è¿™æ˜¯ä¸€ä¸ªæ•°ç»„ã€‚</span></span>
<span class="line"><span style="color:#88C0D0;">processData</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Hello World</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡º: è¿™æ˜¯å…¶ä»–ç±»å‹çš„æ•°æ®ã€‚</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­é‡Œï¼Œ<code>processData</code>å‡½æ•°å¯ä»¥æ¥æ”¶ä¸åŒç±»å‹çš„æ•°æ®ã€‚ä½¿ç”¨<code>util.isRegExp()</code>å¸®åŠ©æˆ‘ä»¬è¯†åˆ«ä¼ å…¥çš„æ•°æ®æ˜¯å¦ä¸º RegExpï¼Œä»è€Œå†³å®šé‡‡å–å“ªç§å¤„ç†æ–¹å¼ã€‚è¿™æ ·çš„æŠ€æœ¯åœ¨å¤„ç†å…·æœ‰å¤šç§æ•°æ®ç±»å‹çš„å¤æ‚åº”ç”¨ç¨‹åºæ—¶ç‰¹åˆ«æœ‰ç”¨ã€‚</p><p>æ€»ç»“èµ·æ¥ï¼Œ<code>util.isRegExp()</code>æ˜¯ä¸€ä¸ªéå¸¸å®ç”¨çš„å·¥å…·ï¼Œå°¤å…¶å½“ä½ éœ€è¦ç¡®ä¿æŸä¸ªå˜é‡æ˜¯æ­£åˆ™è¡¨è¾¾å¼æ—¶ã€‚é€šè¿‡ä¸Šé¢çš„ä¾‹å­ï¼Œä½ åº”è¯¥å¯¹å¦‚ä½•ä½¿ç”¨å®ƒæœ‰äº†åŸºæœ¬çš„äº†è§£ã€‚</p><h3 id="util-isstring-object" tabindex="-1"><a class="header-anchor" href="#util-isstring-object"><span><a href="https://nodejs.org/docs/latest/api/util.html#utilisstringobject" target="_blank" rel="noopener noreferrer">util.isString(object)</a></span></a></h3><p>é¦–å…ˆï¼Œæ¥æ¾„æ¸…ä¸€ä¸ªå°è¯¯ä¼šï¼šæˆªè‡³æˆ‘æœ€åçš„çŸ¥è¯†æ›´æ–°ï¼ˆ2023 å¹´ï¼‰ï¼ŒNode.js çš„å®˜æ–¹æ–‡æ¡£ä¸­å¹¶æ²¡æœ‰ç›´æ¥æä¾› <code>util.isString(object)</code> è¿™ä¸ªå‡½æ•°ã€‚ä½ å¯èƒ½æ˜¯åœ¨å¯»æ‰¾å¦‚ä½•æ£€æµ‹ä¸€ä¸ªå¯¹è±¡æ˜¯å¦ä¸ºå­—ç¬¦ä¸²ç±»å‹çš„æ–¹æ³•ã€‚åœ¨ Node.js ä¸­ï¼Œè¿™é€šå¸¸å¯ä»¥é€šè¿‡å…¶ä»–æ–¹å¼å®ç°ï¼Œè€Œä¸æ˜¯ç›´æ¥è°ƒç”¨ <code>util.isString()</code>ï¼Œå› ä¸ºè¿™ä¸ªå…·ä½“çš„å‡½æ•°å¹¶ä¸å­˜åœ¨äº <code>util</code> æ¨¡å—ã€‚</p><p>ä¸è¿‡ï¼Œä¸ç”¨æ‹…å¿ƒï¼Œæˆ‘å°†ç»™ä½ ä»‹ç»å¦‚ä½•åœ¨ Node.js ä¸­æ£€æµ‹ä¸€ä¸ªå€¼æ˜¯å¦ä¸ºå­—ç¬¦ä¸²ï¼Œå¹¶ä¸”ä¸¾ä¸€äº›ä¾‹å­æ¥è¯´æ˜å…¶å®é™…åº”ç”¨ã€‚</p><h3 id="å¦‚ä½•æ£€æµ‹å­—ç¬¦ä¸²" tabindex="-1"><a class="header-anchor" href="#å¦‚ä½•æ£€æµ‹å­—ç¬¦ä¸²"><span>å¦‚ä½•æ£€æµ‹å­—ç¬¦ä¸²</span></a></h3><p>åœ¨ JavaScript å’Œ Node.js ä¸­ï¼Œæ£€æµ‹ä¸€ä¸ªå€¼æ˜¯å¦ä¸ºå­—ç¬¦ä¸²ç±»å‹ï¼Œé€šå¸¸ä½¿ç”¨ <code>typeof</code> æ“ä½œç¬¦ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªåŸºæœ¬ç¤ºä¾‹ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">function</span><span style="color:#88C0D0;"> isString</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">value</span><span style="color:#ECEFF4;">)</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  return</span><span style="color:#81A1C1;"> typeof</span><span style="color:#D8DEE9;"> value</span><span style="color:#81A1C1;"> ===</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">string</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#88C0D0;">isString</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Hello, World!</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡ºï¼štrue</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#88C0D0;">isString</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">123</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡ºï¼šfalse</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#88C0D0;">isString</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">{</span><span style="color:#88C0D0;"> text</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">Hello</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;"> }</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡ºï¼šfalse</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ä¸ªç®€å•çš„å‡½æ•° <code>isString</code> æ¥å—ä¸€ä¸ªå‚æ•° <code>value</code>ï¼Œç„¶ååˆ©ç”¨ <code>typeof</code> æ¥åˆ¤æ–­è¿™ä¸ªå€¼æ˜¯å¦ä¸ºå­—ç¬¦ä¸²ã€‚å¦‚æœæ˜¯ï¼Œè¿”å› <code>true</code>ï¼›å¦åˆ™ï¼Œè¿”å› <code>false</code>ã€‚</p><h3 id="å®é™…åº”ç”¨ä¾‹å­-9" tabindex="-1"><a class="header-anchor" href="#å®é™…åº”ç”¨ä¾‹å­-9"><span>å®é™…åº”ç”¨ä¾‹å­</span></a></h3><h4 id="_1-æ•°æ®éªŒè¯" tabindex="-1"><a class="header-anchor" href="#_1-æ•°æ®éªŒè¯"><span>1. æ•°æ®éªŒè¯</span></a></h4><p>å‡è®¾ä½ æ­£åœ¨ç¼–å†™ä¸€ä¸ª Node.js åº”ç”¨ï¼Œéœ€è¦ä»ç”¨æˆ·å¤„æ¥æ”¶æ•°æ®ã€‚åœ¨å¤„ç†è¿™äº›æ•°æ®ä¹‹å‰ï¼ŒéªŒè¯å®ƒä»¬çš„ç±»å‹æ˜¯å¾ˆé‡è¦çš„ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ è¦æ±‚ç”¨æˆ·è¾“å…¥ä»–ä»¬çš„åå­—ï¼Œä½ éœ€è¦ç¡®è®¤æ”¶åˆ°çš„æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">function</span><span style="color:#88C0D0;"> validateUserName</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">userName</span><span style="color:#ECEFF4;">)</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#81A1C1;">!</span><span style="color:#88C0D0;">isString</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">userName</span><span style="color:#D8DEE9FF;">)) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#81A1C1;">    throw</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> Error</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Username must be a string.</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span></span>
<span class="line"><span style="color:#616E88;">  // å…¶ä»–éªŒè¯é€»è¾‘...</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Username is valid.</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å‡è®¾è¿™æ˜¯ä»æŸå¤„è·å–åˆ°çš„ç”¨æˆ·å</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> userName</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">John Doe</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">try</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#88C0D0;">  validateUserName</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">userName</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;"> catch</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">error</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">error</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">error</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">message</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-æ ¼å¼åŒ–æ—¥å¿—ä¿¡æ¯" tabindex="-1"><a class="header-anchor" href="#_2-æ ¼å¼åŒ–æ—¥å¿—ä¿¡æ¯"><span>2. æ ¼å¼åŒ–æ—¥å¿—ä¿¡æ¯</span></a></h4><p>åœ¨å¤„ç†æ—¥å¿—æ—¶ï¼Œç¡®ä¿æ—¥å¿—æ¶ˆæ¯æ˜¯å­—ç¬¦ä¸²æ ¼å¼å¯ä»¥è®©è¾“å‡ºæ›´åŠ ä¸€è‡´å’Œå¯è¯»ã€‚åœ¨å°†ä¿¡æ¯å†™å…¥æ—¥å¿—æ–‡ä»¶å‰ï¼Œä½ å¯ä»¥æ£€æŸ¥æ¶ˆæ¯ç±»å‹ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">function</span><span style="color:#88C0D0;"> logMessage</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">message</span><span style="color:#ECEFF4;">)</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#81A1C1;">!</span><span style="color:#88C0D0;">isString</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">message</span><span style="color:#D8DEE9FF;">)) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#616E88;">    // å°†éå­—ç¬¦ä¸²å€¼è½¬æ¢ä¸ºå­—ç¬¦ä¸²</span></span>
<span class="line"><span style="color:#D8DEE9;">    message</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> JSON</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">stringify</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">message</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">[LOG]:</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> message</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88C0D0;">logMessage</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">This is a log message.</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // ç›´æ¥è¾“å‡ºå­—ç¬¦ä¸²</span></span>
<span class="line"><span style="color:#88C0D0;">logMessage</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">{</span><span style="color:#88C0D0;"> event</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">user_login</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#88C0D0;"> status</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">success</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;"> }</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // å¯¹è±¡è¢«è½¬æ¢ä¸ºå­—ç¬¦ä¸²å†è¾“å‡º</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ç»“è®º-6" tabindex="-1"><a class="header-anchor" href="#ç»“è®º-6"><span>ç»“è®º</span></a></h3><p>è™½ç„¶ <code>util.isString(object)</code> ä¸æ˜¯ Node.js ä¸­çš„ä¸€ä¸ªå†…ç½®å‡½æ•°ï¼Œä½†æˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>typeof</code> æ“ä½œç¬¦è½»æ¾åœ°åˆ›å»ºè‡ªå·±çš„ <code>isString</code> å‡½æ•°æ¥æ£€æµ‹å­—ç¬¦ä¸²ã€‚è¿™ç§ç±»å‹æ£€æµ‹å¯¹äºæ•°æ®éªŒè¯ã€æ—¥å¿—è®°å½•ç­‰å¤šç§åœºæ™¯éƒ½éå¸¸æœ‰ç”¨ã€‚å¸Œæœ›è¿™äº›ç¤ºä¾‹èƒ½å¸®åŠ©ä½ ç†è§£å¦‚ä½•åœ¨ Node.js ä¸­å¤„ç†å’Œæ£€æµ‹å­—ç¬¦ä¸²ç±»å‹çš„æ•°æ®ã€‚</p><h3 id="util-issymbol-object" tabindex="-1"><a class="header-anchor" href="#util-issymbol-object"><span><a href="https://nodejs.org/docs/latest/api/util.html#utilissymbolobject" target="_blank" rel="noopener noreferrer">util.isSymbol(object)</a></span></a></h3><p>Node.js æ˜¯ä¸€ä¸ªåŸºäº Chrome V8 å¼•æ“çš„ JavaScript è¿è¡Œæ—¶ç¯å¢ƒï¼Œå®ƒè®©æˆ‘ä»¬èƒ½å¤Ÿåœ¨æœåŠ¡å™¨ç«¯è¿è¡Œ JavaScript ä»£ç ã€‚ä¸€ä¸ªé‡è¦çš„éƒ¨åˆ†æ˜¯ Node.js çš„æ ‡å‡†åº“ï¼Œå…¶ä¸­åŒ…å«äº†å¤§é‡æœ‰ç”¨çš„æ¨¡å—ï¼Œæ¯”å¦‚ <code>util</code> æ¨¡å—ã€‚è¿™ä¸ªæ¨¡å—æä¾›äº†ä¸€ç³»åˆ—å®ç”¨å·¥å…·å‡½æ•°ï¼Œç”¨äºå¤„ç†å„ç§å¸¸è§ä»»åŠ¡ã€‚</p><h3 id="è§£é‡Š-util-issymbol-object" tabindex="-1"><a class="header-anchor" href="#è§£é‡Š-util-issymbol-object"><span>è§£é‡Š <code>util.isSymbol(object)</code></span></a></h3><p>åœ¨ Node.js v21.7.1 ä¸­çš„ <code>util</code> æ¨¡å—åŒ…å«äº†ä¸€ä¸ªå‡½æ•° <code>isSymbol()</code>ã€‚è¿™ä¸ªå‡½æ•°ç”¨äºæ£€æµ‹ç»™å®šçš„å‚æ•°æ˜¯å¦æ˜¯ä¸€ä¸ª Symbol ç±»å‹ã€‚åœ¨ JavaScript ä¸­ï¼ŒSymbol æ˜¯ä¸€ç§åŸºæœ¬æ•°æ®ç±»å‹ï¼Œå®ƒç”¨äºåˆ›å»ºå”¯ä¸€çš„æ ‡è¯†ç¬¦ã€‚Symbols æ˜¯ä¸å¯å˜çš„ä¸”å”¯ä¸€çš„ï¼Œå› æ­¤ï¼Œå³ä½¿ä¸¤ä¸ª Symbols å…·æœ‰ç›¸åŒçš„æè¿°ï¼Œå®ƒä»¬ä¹Ÿæ˜¯ä¸ç›¸ç­‰çš„ã€‚</p><p>ä½¿ç”¨ <code>util.isSymbol(object)</code> çš„æ–¹å¼éå¸¸ç®€å•ï¼šä½ åªéœ€è¦å°†æƒ³è¦æ£€æŸ¥çš„å¯¹è±¡ä½œä¸ºå‚æ•°ä¼ é€’ç»™è¿™ä¸ªå‡½æ•°ï¼Œå¦‚æœè¯¥å¯¹è±¡æ˜¯ä¸€ä¸ª Symbol ç±»å‹ï¼Œåˆ™è¯¥å‡½æ•°ä¼šè¿”å› <code>true</code>ï¼Œå¦åˆ™è¿”å› <code>false</code>ã€‚</p><h3 id="å®é™…åº”ç”¨ä¾‹å­-10" tabindex="-1"><a class="header-anchor" href="#å®é™…åº”ç”¨ä¾‹å­-10"><span>å®é™…åº”ç”¨ä¾‹å­</span></a></h3><h4 id="ä¾‹å­-1-æ£€æµ‹-symbol" tabindex="-1"><a class="header-anchor" href="#ä¾‹å­-1-æ£€æµ‹-symbol"><span>ä¾‹å­ 1: æ£€æµ‹ Symbol</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// åˆ›å»ºä¸€ä¸ª Symbol</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> mySymbol</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> Symbol</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">myUniqueSymbol</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// ä½¿ç”¨ util.isSymbol() æ£€æŸ¥</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isSymbol</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">mySymbol</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡º: true</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å¯¹äºé Symbol ç±»å‹</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isSymbol</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">123</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡º: false</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isSymbol</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">string</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡º: false</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="ä¾‹å­-2-åœ¨æ¡ä»¶è¯­å¥ä¸­ä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#ä¾‹å­-2-åœ¨æ¡ä»¶è¯­å¥ä¸­ä½¿ç”¨"><span>ä¾‹å­ 2: åœ¨æ¡ä»¶è¯­å¥ä¸­ä½¿ç”¨</span></a></h4><p>å‡è®¾ä½ æ­£åœ¨ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°å¯ä»¥æ¥æ”¶å¤šç§ç±»å‹çš„æ•°æ®ï¼Œå¹¶ä¸”ä½ æƒ³ç‰¹åˆ«å¤„ç† Symbol ç±»å‹çš„æ•°æ®ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">function</span><span style="color:#88C0D0;"> handleData</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">data</span><span style="color:#ECEFF4;">)</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isSymbol</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">data</span><span style="color:#D8DEE9FF;">)) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Data is a Symbol.</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span><span style="color:#81A1C1;"> else</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Data is not a Symbol.</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88C0D0;">handleData</span><span style="color:#D8DEE9FF;">(</span><span style="color:#88C0D0;">Symbol</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">test</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡º: Data is a Symbol.</span></span>
<span class="line"><span style="color:#88C0D0;">handleData</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">42</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡º: Data is not a Symbol.</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æ€»ç»“-22" tabindex="-1"><a class="header-anchor" href="#æ€»ç»“-22"><span>æ€»ç»“</span></a></h3><p><code>util.isSymbol()</code> æ˜¯ Node.js æä¾›çš„ä¸€ä¸ªä¾¿æ·å·¥å…·å‡½æ•°ï¼Œå®ƒå…è®¸å¼€å‘è€…è½»æ¾åœ°æ£€æŸ¥ä¸€ä¸ªå¯¹è±¡æ˜¯å¦ä¸º Symbol ç±»å‹ã€‚è¿™å¯¹äºç¼–å†™éœ€è¦åŒºåˆ«å¯¹å¾…ä¸åŒæ•°æ®ç±»å‹çš„ä»£ç éå¸¸æœ‰å¸®åŠ©ã€‚åœ¨å¤„ç†å¤§å‹é¡¹ç›®æˆ–è€…æ¶‰åŠå¤šç§æ•°æ®ç±»å‹çš„æƒ…å†µä¸‹ï¼Œäº†è§£å¹¶æ­£ç¡®ä½¿ç”¨è¿™äº›å·¥å…·å‡½æ•°å¯ä»¥å¸®åŠ©æé«˜ä»£ç çš„è´¨é‡å’Œå¯ç»´æŠ¤æ€§ã€‚</p><h3 id="util-isundefined-object" tabindex="-1"><a class="header-anchor" href="#util-isundefined-object"><span><a href="https://nodejs.org/docs/latest/api/util.html#utilisundefinedobject" target="_blank" rel="noopener noreferrer">util.isUndefined(object)</a></span></a></h3><p>Node.js æ˜¯ä¸€ä¸ªè®© JavaScript è¿è¡Œåœ¨æœåŠ¡å™¨ç«¯çš„å¹³å°ã€‚å®ƒå…è®¸å¼€å‘è€…ä½¿ç”¨ JavaScript æ¥ç¼–å†™æœåŠ¡å™¨ç«¯çš„ä»£ç ï¼Œå¤„ç† HTTP è¯·æ±‚ã€æ–‡ä»¶ç³»ç»Ÿæ“ä½œç­‰ã€‚<code>util.isUndefined(object)</code> æ˜¯ Node.js ä¸­çš„ä¸€ä¸ªå®ç”¨å‡½æ•°ï¼Œå±äº <code>util</code> æ¨¡å—çš„ä¸€éƒ¨åˆ†ã€‚è¿™ä¸ªå‡½æ•°ç”¨äºæ£€æŸ¥ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯ <code>undefined</code>ã€‚</p><h3 id="è§£é‡Š-util-isundefined-object" tabindex="-1"><a class="header-anchor" href="#è§£é‡Š-util-isundefined-object"><span>è§£é‡Š <code>util.isUndefined(object)</code></span></a></h3><p>åœ¨ JavaScript ä¸­ï¼Œ<code>undefined</code> è¡¨ç¤ºä¸€ä¸ªå˜é‡æ²¡æœ‰è¢«èµ‹å€¼ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ä¸ªå˜é‡è¢«å£°æ˜äº†ï¼Œä½†è¿˜æ²¡æœ‰è·å¾—å…·ä½“çš„å€¼ã€‚</p><p><code>util.isUndefined(object)</code> å‡½æ•°æ¥å—ä¸€ä¸ªå‚æ•°ï¼Œå³ä½ æƒ³è¦æ£€æŸ¥çš„å¯¹è±¡ã€‚å¦‚æœä¼ å…¥çš„å¯¹è±¡æ˜¯ <code>undefined</code>ï¼Œåˆ™æ­¤å‡½æ•°è¿”å› <code>true</code>ï¼›å¦åˆ™ï¼Œè¿”å› <code>false</code>ã€‚</p><h3 id="å¦‚ä½•ä½¿ç”¨-6" tabindex="-1"><a class="header-anchor" href="#å¦‚ä½•ä½¿ç”¨-6"><span>å¦‚ä½•ä½¿ç”¨</span></a></h3><p>é¦–å…ˆï¼Œä½ éœ€è¦å¼•å…¥ Node.js çš„ <code>util</code> æ¨¡å—ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>ç„¶åï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>util.isUndefined()</code> æ¥æ£€æŸ¥ä»»ä½•å¯¹è±¡æ˜¯å¦æ˜¯ <code>undefined</code>ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> myVariable</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isUndefined</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">myVariable</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡ºï¼štrue</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">myVariable</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">Hello, World!</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isUndefined</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">myVariable</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡ºï¼šfalse</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="å®é™…è¿ç”¨ä¾‹å­-17" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨ä¾‹å­-17"><span>å®é™…è¿ç”¨ä¾‹å­</span></a></h3><ol><li><p><strong>é…ç½®éªŒè¯</strong>ï¼šå½“ä½ ç¼–å†™ä¸€ä¸ªåº”ç”¨ç¨‹åºï¼Œå¹¶æœŸæœ›ä»å¤–éƒ¨æºï¼ˆæ¯”å¦‚ç¯å¢ƒå˜é‡æˆ–é…ç½®æ–‡ä»¶ï¼‰è·å–ä¸€äº›é…ç½®æ—¶ï¼Œä½¿ç”¨ <code>util.isUndefined()</code> å¯ä»¥å¸®åŠ©ä½ æ£€æŸ¥å¿…é¡»çš„é…ç½®é¡¹æ˜¯å¦å·²ç»è®¾ç½®ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> config</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#88C0D0;">  databaseURL</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9;"> process</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">env</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">DATABASE_URL</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#88C0D0;">  port</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9;"> process</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">env</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">PORT</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isUndefined</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">config</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">databaseURL</span><span style="color:#D8DEE9FF;">)) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">error</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">æ•°æ®åº“ URL æœªè®¾ç½®ï¼</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">  process</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">exit</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">1</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isUndefined</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">config</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">port</span><span style="color:#D8DEE9FF;">)) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">error</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">ç«¯å£å·æœªè®¾ç½®ï¼</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">  process</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">exit</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">1</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>åŠŸèƒ½æ ‡å¿—æ£€æŸ¥</strong>ï¼šåœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½ä¼šåŸºäºæŸäº›æ¡ä»¶å¯ç”¨æˆ–ç¦ç”¨ç‰¹å®šçš„åŠŸèƒ½ã€‚ä½¿ç”¨ <code>util.isUndefined()</code> å¯ä»¥å¸®åŠ©ç¡®å®šæ˜¯å¦å·²ç»ä¸ºè¿™äº›åŠŸèƒ½æ ‡å¿—æä¾›äº†å€¼ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> features</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#88C0D0;">  enableLogging</span><span style="color:#ECEFF4;">:</span><span style="color:#81A1C1;"> true</span><span style="color:#ECEFF4;">,</span><span style="color:#616E88;"> // é»˜è®¤å¯ç”¨æ—¥å¿—è®°å½•</span></span>
<span class="line"><span style="color:#88C0D0;">  enableDebugMode</span><span style="color:#ECEFF4;">:</span><span style="color:#81A1C1;"> undefined</span><span style="color:#ECEFF4;">,</span><span style="color:#616E88;"> // é»˜è®¤æœªå®šä¹‰ï¼Œè¡¨ç¤ºç¦ç”¨</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">if</span><span style="color:#D8DEE9FF;"> (</span></span>
<span class="line"><span style="color:#81A1C1;">  !</span><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">isUndefined</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">features</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">enableDebugMode</span><span style="color:#D8DEE9FF;">) </span><span style="color:#81A1C1;">&amp;&amp;</span></span>
<span class="line"><span style="color:#D8DEE9;">  features</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">enableDebugMode</span></span>
<span class="line"><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">è°ƒè¯•æ¨¡å¼å·²å¯ç”¨</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;"> else</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">è°ƒè¯•æ¨¡å¼å·²ç¦ç”¨</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><p>åœ¨ Node.js v21.7.1 çš„æ–‡æ¡£ä¸­ï¼Œ<code>util.isUndefined(object)</code> å‡½æ•°æä¾›äº†ä¸€ç§ç®€å•ç›´æ¥çš„æ–¹å¼æ¥æ£€æŸ¥å˜é‡æ˜¯å¦æ˜¯ <code>undefined</code>ã€‚è¿™åœ¨å¤„ç†ä¸ç¡®å®šçš„è¾“å…¥æˆ–é…ç½®æ—¶éå¸¸æœ‰ç”¨ã€‚ç„¶è€Œï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨æ›´å¤šç°ä»£çš„ JavaScript æˆ– Node.js ä»£ç ä¸­ï¼Œç›´æ¥ä½¿ç”¨ä¸¥æ ¼ç›¸ç­‰æ€§æ£€æŸ¥ <code>=== undefined</code> èƒ½å¤Ÿè¾¾åˆ°åŒæ ·çš„ç›®çš„ï¼Œè€Œä¸”ä¸éœ€è¦ä¾èµ– <code>util</code> æ¨¡å—ã€‚å› æ­¤ï¼Œ<code>util.isUndefined()</code> çš„ä½¿ç”¨åœºæ™¯å¯èƒ½ç›¸å¯¹è¾ƒå°‘ã€‚</p><h3 id="util-log-string" tabindex="-1"><a class="header-anchor" href="#util-log-string"><span><a href="https://nodejs.org/docs/latest/api/util.html#utillogstring" target="_blank" rel="noopener noreferrer">util.log(string)</a></span></a></h3><p>Node.js æ˜¯ä¸€ä¸ªè¿è¡Œåœ¨æœåŠ¡å™¨ç«¯çš„ JavaScript ç¯å¢ƒï¼Œå®ƒå…è®¸ä½ ä½¿ç”¨ JavaScript æ¥ç¼–å†™æœåŠ¡å™¨ç«¯ç¨‹åºã€‚<code>util.log(string)</code> æ˜¯ Node.js ä¸­ <code>util</code> æ¨¡å—æä¾›çš„ä¸€ä¸ªåŠŸèƒ½ï¼Œç”¨äºè¾“å‡ºå¸¦æœ‰æ—¶é—´æˆ³çš„ä¿¡æ¯åˆ°ç»ˆç«¯ï¼ˆæ§åˆ¶å°ï¼‰ã€‚è¿™ä¸ªæ–¹æ³•å¾ˆé€‚åˆåœ¨å¼€å‘è¿‡ç¨‹ä¸­å¯¹ç¨‹åºè¿è¡ŒçŠ¶æ€è¿›è¡Œç›‘æ§æˆ–è€…è°ƒè¯•ã€‚ä¸‹é¢æˆ‘å°†é€šè¿‡ä¸€ä¸ªç®€å•ä¾‹å­æ¥è§£é‡Šå¦‚ä½•ä½¿ç”¨ <code>util.log(string)</code>ã€‚</p><h3 id="ä»€ä¹ˆæ˜¯-util-log-string" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯-util-log-string"><span>ä»€ä¹ˆæ˜¯ <code>util.log(string)</code>ï¼Ÿ</span></a></h3><ul><li><code>util.log(string)</code> æ˜¯ Node.js çš„ <code>util</code> æ¨¡å—ä¸­çš„ä¸€ä¸ªæ–¹æ³•ã€‚</li><li>å®ƒçš„ä½œç”¨æ˜¯å°†ä¼ å…¥çš„å­—ç¬¦ä¸² <code>string</code> è¾“å‡ºåˆ°æ§åˆ¶å°ï¼Œå¹¶ä¸”åœ¨å‰é¢åŠ ä¸Šå½“å‰çš„æ—¶é—´æˆ³ã€‚</li><li>è¿™ä¸ªæ—¶é—´æˆ³ä¸ä»…ä¾¿äºè®°å½•æ—¥å¿—å‘ç”Ÿçš„ç¡®åˆ‡æ—¶é—´ï¼Œè¿˜æœ‰åŠ©äºè°ƒè¯•è¿‡ç¨‹ä¸­è¿½è¸ªäº‹ä»¶é¡ºåºã€‚</li></ul><h3 id="å¦‚ä½•ä½¿ç”¨-7" tabindex="-1"><a class="header-anchor" href="#å¦‚ä½•ä½¿ç”¨-7"><span>å¦‚ä½•ä½¿ç”¨ï¼Ÿ</span></a></h3><p>é¦–å…ˆï¼Œä½ éœ€è¦åœ¨ä½ çš„ Node.js åº”ç”¨ç¨‹åºä¸­å¼•å…¥ <code>util</code> æ¨¡å—ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>ç„¶åï¼Œå°±å¯ä»¥ä½¿ç”¨ <code>util.log()</code> æ–¹æ³•æ¥è¾“å‡ºå¸¦æ—¶é—´æˆ³çš„æ¶ˆæ¯äº†ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#D8DEE9;">util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">è¿™æ˜¯ä¸€æ¡æ—¥å¿—ä¿¡æ¯</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="å®é™…åº”ç”¨ä¾‹å­-11" tabindex="-1"><a class="header-anchor" href="#å®é™…åº”ç”¨ä¾‹å­-11"><span>å®é™…åº”ç”¨ä¾‹å­</span></a></h3><p>å‡è®¾ä½ æ­£åœ¨å¼€å‘ä¸€ä¸ªç½‘ç«™ï¼Œè¿™ä¸ªç½‘ç«™æœ‰ä¸€ä¸ªåŠŸèƒ½æ˜¯ç”¨æˆ·ä¸Šä¼ æ–‡ä»¶ã€‚åœ¨æ–‡ä»¶ä¸Šä¼ çš„è¿‡ç¨‹ä¸­ï¼Œä½ å¯èƒ½æƒ³è¦è®°å½•ä¸‹åˆ—å‡ ä¸ªå…³é”®ç‚¹çš„å‘ç”Ÿæ—¶é—´ï¼š</p><ol><li>ç”¨æˆ·å¼€å§‹ä¸Šä¼ æ–‡ä»¶ã€‚</li><li>æ–‡ä»¶ä¸Šä¼ å®Œæˆã€‚</li><li>å¤„ç†ä¸Šä¼ çš„æ–‡ä»¶ã€‚</li><li>å¤„ç†å®Œæˆã€‚</li></ol><p>ä½¿ç”¨ <code>util.log()</code> æ¥è¾¾æˆè¿™ä¸ªç›®çš„çš„ä»£ç ç‰‡æ®µå¯èƒ½æ˜¯è¿™æ ·çš„ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> util</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">util</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">function</span><span style="color:#88C0D0;"> uploadFile</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">file</span><span style="color:#ECEFF4;">)</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">  util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">ç”¨æˆ·å¼€å§‹ä¸Šä¼ æ–‡ä»¶.</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">  // å‡è®¾è¿™é‡Œæ˜¯ä¸Šä¼ æ–‡ä»¶çš„ä»£ç </span></span>
<span class="line"><span style="color:#616E88;">  // æ–‡ä»¶ä¸Šä¼ å®Œæˆ</span></span>
<span class="line"><span style="color:#D8DEE9;">  util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">æ–‡ä»¶ä¸Šä¼ å®Œæˆ.</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">  // æ¥ä¸‹æ¥å¤„ç†æ–‡ä»¶</span></span>
<span class="line"><span style="color:#D8DEE9;">  util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">å¼€å§‹å¤„ç†æ–‡ä»¶...</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">  // å‡è®¾è¿™é‡Œæ˜¯å¤„ç†æ–‡ä»¶çš„ä»£ç </span></span>
<span class="line"><span style="color:#616E88;">  // æ–‡ä»¶å¤„ç†å®Œæˆ</span></span>
<span class="line"><span style="color:#D8DEE9;">  util</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">æ–‡ä»¶å¤„ç†å®Œæˆ.</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å‡è®¾ file æ˜¯ä»æŸå¤„æ¥æ”¶åˆ°çš„æ–‡ä»¶å¯¹è±¡</span></span>
<span class="line"><span style="color:#88C0D0;">uploadFile</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">file</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ¯æ¬¡è¿è¡Œè¿™æ®µä»£ç æ—¶ï¼Œä½ éƒ½ä¼šåœ¨æ§åˆ¶å°çœ‹åˆ°ç±»ä¼¼äºä¸‹é¢çš„è¾“å‡ºï¼Œå…¶ä¸­åŒ…å«äº†æ“ä½œçš„æ—¶é—´æˆ³ï¼Œå¸®åŠ©ä½ æ›´å¥½åœ°äº†è§£äº‹ä»¶çš„é¡ºåºå’Œè€—æ—¶æƒ…å†µï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span>[Sat Mar 20 2021 10:00:00 GMT+0800 (CST)] ç”¨æˆ·å¼€å§‹ä¸Šä¼ æ–‡ä»¶.</span></span>
<span class="line"><span>[Sat Mar 20 2021 10:00:05 GMT+0800 (CST)] æ–‡ä»¶ä¸Šä¼ å®Œæˆ.</span></span>
<span class="line"><span>[Sat Mar 20 2021 10:00:05 GMT+0800 (CST)] å¼€å§‹å¤„ç†æ–‡ä»¶...</span></span>
<span class="line"><span>[Sat Mar 20 2021 10:00:10 GMT+0800 (CST)] æ–‡ä»¶å¤„ç†å®Œæˆ.</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ç§æ–¹å¼éå¸¸é€‚åˆåœ¨å¼€å‘å’Œæµ‹è¯•é˜¶æ®µä½¿ç”¨ï¼Œä»¥è¿½è¸ªå’Œè°ƒè¯•ç¨‹åºçš„æ‰§è¡Œæµç¨‹ã€‚ä½†æ˜¯ï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œä½ å¯èƒ½éœ€è¦ä½¿ç”¨æ›´ä¸“ä¸šçš„æ—¥å¿—åº“æ¥ç®¡ç†æ—¥å¿—ï¼Œä¾‹å¦‚ <code>winston</code> æˆ– <code>bunyan</code>ï¼Œå› ä¸ºå®ƒä»¬æä¾›äº†æ›´å¤šè‡ªå®šä¹‰å’Œç®¡ç†æ—¥å¿—çš„åŠŸèƒ½ã€‚</p></div><!----><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="update-time"><span class="vp-meta-label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><!----></div><div class="contributors"><span class="vp-meta-label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="vp-meta-info" title="email: kamiacgxu@gmail.com">kamishima-kaede</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><a class="route-link auto-link prev" href="/document/node-doc/URL.html" aria-label="URL"><div class="hint"><span class="arrow start"></span>ä¸Šä¸€é¡µ</div><div class="link"><!---->URL</div></a><a class="route-link auto-link next" href="/document/node-doc/V8.html" aria-label="V8"><div class="hint">ä¸‹ä¸€é¡µ<span class="arrow end"></span></div><div class="link">V8<!----></div></a></nav><!----><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper"><!----><div class="vp-copyright">Copyright Â© 2018-present hanekawa-shiki</div></footer></div><!--]--><!--]--><!--[--><!----><!----><!--]--><!--]--></div>
    <script src="/assets/js/runtime~app.be370b10.js" defer></script><script src="/assets/js/4485.e6fe7c7b.js" defer></script><script src="/assets/js/app.bf6f64e3.js" defer></script>
  </body>
</html>
