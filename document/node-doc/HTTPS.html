<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.14" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.50" />
    <style>
      html {
        background: var(--bg-color, #fff);
      }

      html[data-theme="dark"] {
        background: var(--bg-color, #1d1e1f);
      }

      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta property="og:url" content="https://hanekawa.top/document/node-doc/HTTPS.html"><meta property="og:site_name" content="hanekawa-shiki"><meta property="og:title" content="HTTPS"><meta property="og:description" content="HTTPS Node.js æ˜¯ä¸€ä¸ªåŸºäº Chrome V8 å¼•æ“çš„ JavaScript è¿è¡Œç¯å¢ƒï¼Œå®ƒè®©ä½ èƒ½å¤Ÿåœ¨æœåŠ¡å™¨ç«¯è¿è¡Œ JavaScriptã€‚è¿™ä¸€ç‰¹æ€§ä½¿å¾—å¼€å‘è€…å¯ä»¥ç”¨åŒä¸€ç§è¯­è¨€ç¼–å†™å‰åç«¯ä»£ç ï¼Œæå¤§åœ°æå‡äº†å¼€å‘æ•ˆç‡ã€‚ åœ¨ Node.js ä¸­ï¼ŒHTTPS æ¨¡å—æä¾›äº†ä¸€ç§æ–¹å¼æ¥å®ç°ä½¿ç”¨ TLS/SSL çš„ HTTP å®‰å…¨é€šä¿¡ã€‚ç®€å•æ¥è¯´ï¼ŒHTTPS æ¨¡å—..."><meta property="og:type" content="website"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2024-06-21T09:46:17.000Z"><meta property="article:author" content="hanekawa-shiki"><meta property="article:modified_time" content="2024-06-21T09:46:17.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"WebPage","name":"HTTPS","description":"HTTPS Node.js æ˜¯ä¸€ä¸ªåŸºäº Chrome V8 å¼•æ“çš„ JavaScript è¿è¡Œç¯å¢ƒï¼Œå®ƒè®©ä½ èƒ½å¤Ÿåœ¨æœåŠ¡å™¨ç«¯è¿è¡Œ JavaScriptã€‚è¿™ä¸€ç‰¹æ€§ä½¿å¾—å¼€å‘è€…å¯ä»¥ç”¨åŒä¸€ç§è¯­è¨€ç¼–å†™å‰åç«¯ä»£ç ï¼Œæå¤§åœ°æå‡äº†å¼€å‘æ•ˆç‡ã€‚ åœ¨ Node.js ä¸­ï¼ŒHTTPS æ¨¡å—æä¾›äº†ä¸€ç§æ–¹å¼æ¥å®ç°ä½¿ç”¨ TLS/SSL çš„ HTTP å®‰å…¨é€šä¿¡ã€‚ç®€å•æ¥è¯´ï¼ŒHTTPS æ¨¡å—..."}</script><meta name="keywords" content="JavaScript,HTML,CSS"><link rel="icon" href="/favicon.ico"><link rel="icon" href="/assets/icons/chrome-192.png" type="image/png" sizes="192x192"><link rel="icon" href="/assets/icons/chrome-512.png" type="image/png" sizes="512x512"><link rel="icon" href="/assets/icons/chrome-mask-192.png" type="image/png" sizes="192x192"><link rel="icon" href="/assets/icons/chrome-mask-512.png" type="image/png" sizes="512x512"><link rel="manifest" href="/manifest.webmanifest" crossorigin="use-credentials"><meta name="theme-color" content="#5c92d1"><link rel="apple-touch-icon" href="/assets/icons/apple-touch-icon.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="white"><meta name="msapplication-TileImage" content="/assets/icons/ms-icon-144.png"><meta name="msapplication-TileColor" content="#ffffff"><title>HTTPS | hanekawa-shiki</title><meta name="description" content="HTTPS Node.js æ˜¯ä¸€ä¸ªåŸºäº Chrome V8 å¼•æ“çš„ JavaScript è¿è¡Œç¯å¢ƒï¼Œå®ƒè®©ä½ èƒ½å¤Ÿåœ¨æœåŠ¡å™¨ç«¯è¿è¡Œ JavaScriptã€‚è¿™ä¸€ç‰¹æ€§ä½¿å¾—å¼€å‘è€…å¯ä»¥ç”¨åŒä¸€ç§è¯­è¨€ç¼–å†™å‰åç«¯ä»£ç ï¼Œæå¤§åœ°æå‡äº†å¼€å‘æ•ˆç‡ã€‚ åœ¨ Node.js ä¸­ï¼ŒHTTPS æ¨¡å—æä¾›äº†ä¸€ç§æ–¹å¼æ¥å®ç°ä½¿ç”¨ TLS/SSL çš„ HTTP å®‰å…¨é€šä¿¡ã€‚ç®€å•æ¥è¯´ï¼ŒHTTPS æ¨¡å—...">
    <link rel="stylesheet" href="/assets/css/styles.2fe8dfd0.css">
    <link rel="preload" href="/assets/js/runtime~app.e98858ae.js" as="script"><link rel="preload" href="/assets/css/styles.2fe8dfd0.css" as="style"><link rel="preload" href="/assets/js/9435.209d772b.js" as="script"><link rel="preload" href="/assets/js/app.604dc302.js" as="script">
    
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><!--[--><div class="theme-container external-link-icon has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><!--[--><a class="route-link vp-brand" href="/"><img class="vp-nav-logo light" src="/assets/svg/logo.svg" alt><img class="vp-nav-logo dark" src="/assets/svg/logo.svg" alt><span class="vp-site-name hide-in-pad">hanekawa-shiki</span></a><!--]--><!----></div><div class="vp-navbar-center"><!----><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/" aria-label="åšå®¢ä¸»é¡µ"><!--[--><span class="font-icon icon home" style=""></span><!--]-->åšå®¢ä¸»é¡µ<!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="å­¦ä¹ ç¬”è®°"><!--[--><span class="font-icon icon framework" style=""></span>å­¦ä¹ ç¬”è®°<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">å‰ç«¯æ¡†æ¶</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/framework_front/vue3/" aria-label="Vue3ç¬”è®°"><!--[--><span class="font-icon icon vue" style=""></span><!--]-->Vue3ç¬”è®°<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/framework_front/react/" aria-label="Reactç¬”è®°"><!--[--><span class="font-icon icon react" style=""></span><!--]-->Reactç¬”è®°<!----></a></li></ul></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="æ–‡æ¡£"><!--[--><span class="font-icon icon framework" style=""></span>æ–‡æ¡£<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">æ¬è¿</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link route-link-active auto-link" href="/document/node-doc/" aria-label="Node.jsæ–‡æ¡£"><!--[--><span class="font-icon icon circle-info" style=""></span><!--]-->Node.jsæ–‡æ¡£<!----></a></li></ul></li></ul></button></div></div></nav><!--]--><!----></div><div class="vp-navbar-end"><!----><!--[--><!----><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com/hanekawa-shiki/hanekawa-shiki.github.io" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" name="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-color-mode-switch" id="color-mode-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" name="auto" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" name="dark" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" name="light" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!----><!--]--><!----><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!----><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/" aria-label="Node.jsæ–‡æ¡£"><!--[--><span class="font-icon icon circle-info" style=""></span><!--]-->Node.jsæ–‡æ¡£<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Assert.html" aria-label="Assert"><!---->Assert<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Async%20hooks.html" aria-label="Async hooks"><!---->Async hooks<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Asynchronous%20context%20tracking.html" aria-label="Asynchronous context tracking"><!---->Asynchronous context tracking<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Buffer.html" aria-label="Buffer"><!---->Buffer<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/C__%20addons.html" aria-label="C++ addons"><!---->C++ addons<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/C__%20embedder%20API.html" aria-label="C++ embedder API"><!---->C++ embedder API<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Child%20process.html" aria-label="Child process"><!---->Child process<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Cluster.html" aria-label="Cluster"><!---->Cluster<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Command-line%20API.html" aria-label="Command-line API"><!---->Command-line API<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Console.html" aria-label="Console"><!---->Console<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Corepack.html" aria-label="Corepack"><!---->Corepack<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Crypto.html" aria-label="Crypto"><!---->Crypto<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Debugger.html" aria-label="Debugger"><!---->Debugger<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Deprecated%20APIs.html" aria-label="Deprecated APIs"><!---->Deprecated APIs<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Diagnostic%20report.html" aria-label="Diagnostic report"><!---->Diagnostic report<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Diagnostics%20Channel.html" aria-label="Diagnostics Channel"><!---->Diagnostics Channel<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/DNS.html" aria-label="DNS"><!---->DNS<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Domain.html" aria-label="Domain"><!---->Domain<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Errors.html" aria-label="Errors"><!---->Errors<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Events.html" aria-label="Events"><!---->Events<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/File%20system.html" aria-label="File system"><!---->File system<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Global%20objects.html" aria-label="Global objects"><!---->Global objects<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/HTTP.html" aria-label="HTTP"><!---->HTTP<!----></a></li><li><a class="route-link route-link-active auto-link vp-sidebar-link active" href="/document/node-doc/HTTPS.html" aria-label="HTTPS"><!---->HTTPS<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Inspector.html" aria-label="Inspector"><!---->Inspector<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Internationalization%20support.html" aria-label="Internationalization support"><!---->Internationalization support<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Modules-CommonJS%20modules.html" aria-label="Modules: CommonJS modules"><!---->Modules: CommonJS modules<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Modules-ECMAScript%20modules.html" aria-label="Modules: ECMAScript modules"><!---->Modules: ECMAScript modules<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Modules-node_module%20API.html" aria-label="Modules: node:module API"><!---->Modules: node:module API<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Modules-Packages.html" aria-label="Modules: Packages"><!---->Modules: Packages<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Net.html" aria-label="Net"><!---->Net<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Node-API.html" aria-label="Node-API"><!---->Node-API<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/OS.html" aria-label="OS"><!---->OS<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Path.html" aria-label="Path"><!---->Path<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Performance%20measurement%20APIs.html" aria-label="Performance measurement APIs"><!---->Performance measurement APIs<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Permissions.html" aria-label="Permissions"><!---->Permissions<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Process.html" aria-label="Process"><!---->Process<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Punycode.html" aria-label="Punycode"><!---->Punycode<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Query%20string.html" aria-label="Query string"><!---->Query string<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Readline.html" aria-label="Readline"><!---->Readline<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/REPL.html" aria-label="REPL"><!---->REPL<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Stream.html" aria-label="Stream"><!---->Stream<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/String%20decoder.html" aria-label="String decoder"><!---->String decoder<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Test%20runner.html" aria-label="Test runner"><!---->Test runner<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Timers.html" aria-label="Timers"><!---->Timers<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/TLS%20(SSL).html" aria-label="TLS (SSL)"><!---->TLS (SSL)<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Trace%20events.html" aria-label="Trace events"><!---->Trace events<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/TTY.html" aria-label="TTY"><!---->TTY<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/URL.html" aria-label="URL"><!---->URL<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Util.html" aria-label="Util"><!---->Util<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/V8.html" aria-label="V8"><!---->V8<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/VM%20(executing%20JavaScript).html" aria-label="VM (executing JavaScript)"><!---->VM (executing JavaScript)<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Web%20Crypto%20API.html" aria-label="Web Crypto API"><!---->Web Crypto API<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Web%20Streams%20API.html" aria-label="Web Streams API"><!---->Web Streams API<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/WebAssembly%20System%20Interface%20(WASI).html" aria-label="WebAssembly System Interface (WASI)"><!---->WebAssembly System Interface (WASI)<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Worker%20threads.html" aria-label="Worker threads"><!---->Worker threads<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Zlib.html" aria-label="Zlib"><!---->Zlib<!----></a></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->HTTPS</h1><div class="page-info"><span class="page-author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon" name="author"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://hanekawa.top" target="_blank" rel="noopener noreferrer">hanekawa-shiki</a></span><span property="author" content="hanekawa-shiki"></span></span><!----><span class="page-date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2024-06-21T09:46:17.000Z"></span><!----><!----><span class="page-reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 52 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT52M"></span><span class="page-word-info" aria-label="å­—æ•°ğŸ” " data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon word-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="word icon" name="word"><path d="M518.217 432.64V73.143A73.143 73.143 0 01603.43 1.097a512 512 0 01419.474 419.474 73.143 73.143 0 01-72.046 85.212H591.36a73.143 73.143 0 01-73.143-73.143z"></path><path d="M493.714 566.857h340.297a73.143 73.143 0 0173.143 85.577A457.143 457.143 0 11371.566 117.76a73.143 73.143 0 0185.577 73.143v339.383a36.571 36.571 0 0036.571 36.571z"></path></svg><span>çº¦ 15486 å­—</span><meta property="wordCount" content="15486"></span><!----></div><hr></div><div class="vp-toc-placeholder"><aside id="toc"><!----><div class="vp-toc-header">æ­¤é¡µå†…å®¹<button type="button" class="print-button" title="æ‰“å°"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon" name="print"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button><div class="arrow end"></div></div><div class="vp-toc-wrapper"><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä½¿ç”¨-https-æ¨¡å—">ä½¿ç”¨ HTTPS æ¨¡å—</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#åˆ›å»º-https-æœåŠ¡å™¨">åˆ›å»º HTTPS æœåŠ¡å™¨</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…åº”ç”¨ä¾‹å­">å®é™…åº”ç”¨ä¾‹å­</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#determining-if-crypto-support-is-unavailable">Determining if crypto support is unavailable</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#class-https-agent">Class: https.Agent</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ç¤ºä¾‹è§£é‡Š">ç¤ºä¾‹è§£é‡Š</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å°ç»“">å°ç»“</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#new-agent-options">new Agent([options])</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#new-agent-options-1">new Agent([options])</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…è¿ç”¨ä¾‹å­">å®é™…è¿ç”¨ä¾‹å­</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ç»“è®º">ç»“è®º</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å¦‚ä½•å·¥ä½œ">å¦‚ä½•å·¥ä½œ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…è¿ç”¨ä¾‹å­-1">å®é™…è¿ç”¨ä¾‹å­ï¼š</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#class-https-server">Class: https.Server</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å¦‚ä½•ä½¿ç”¨-https-server">å¦‚ä½•ä½¿ç”¨ https.Server?</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…ç¤ºä¾‹">å®é™…ç¤ºä¾‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#è§£é‡Š">è§£é‡Š</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#server-close-callback">server.close([callback])</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#serversymbol-asyncdispose-https-nodejs-org-docs-latest-api-https-html-serversymbolasyncdispose">[serverSymbol.asyncDispose](https://nodejs.org/docs/latest/api/https.html#serversymbolasyncdispose)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#åŸºç¡€æ¦‚å¿µ">åŸºç¡€æ¦‚å¿µ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#serversymbol-asyncdispose">serverSymbol.asyncDispose</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…è¿ç”¨çš„ä¾‹å­">å®é™…è¿ç”¨çš„ä¾‹å­</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#æ€»ç»“">æ€»ç»“</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#server-closeallconnections">server.closeAllConnections()</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#server-closeallconnections-æ¦‚è¿°">server.closeAllConnections() æ¦‚è¿°</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä¸ºä»€ä¹ˆéœ€è¦-closeallconnections">ä¸ºä»€ä¹ˆéœ€è¦ closeAllConnections()ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…åº”ç”¨ç¤ºä¾‹">å®é™…åº”ç”¨ç¤ºä¾‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#æ€»ç»“-1">æ€»ç»“</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#server-closeidleconnections">server.closeIdleConnections()</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#server-closeidleconnections-1">server.closeIdleConnections()</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…è¿ç”¨ç¤ºä¾‹">å®é™…è¿ç”¨ç¤ºä¾‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å°ç»“-1">å°ç»“</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#server-headerstimeout">server.headersTimeout</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#server-headerstimeout-1">server.headersTimeout</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…è¿ç”¨ä¾‹å­-2">å®é™…è¿ç”¨ä¾‹å­</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å¦‚ä½•è®¾ç½®-server-headerstimeout">å¦‚ä½•è®¾ç½® server.headersTimeout</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#server-listen">server.listen()</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#server-listen-1">server.listen()</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#server-maxheaderscount">server.maxHeadersCount</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä»€ä¹ˆæ˜¯-server-maxheaderscount">ä»€ä¹ˆæ˜¯ server.maxHeadersCountï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä¸ºä»€ä¹ˆéœ€è¦é™åˆ¶å¤´éƒ¨æ•°é‡">ä¸ºä»€ä¹ˆéœ€è¦é™åˆ¶å¤´éƒ¨æ•°é‡ï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å¦‚ä½•ä½¿ç”¨-server-maxheaderscount">å¦‚ä½•ä½¿ç”¨ server.maxHeadersCountï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…è¿ç”¨">å®é™…è¿ç”¨</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#server-requesttimeout">server.requestTimeout</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#server-requesttimeout-1">server.requestTimeout</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…è¿ç”¨ç¤ºä¾‹-1">å®é™…è¿ç”¨ç¤ºä¾‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#server-settimeout-msecs-callback">server.setTimeout([msecs][, callback])</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å‚æ•°è§£é‡Š">å‚æ•°è§£é‡Š</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å·¥ä½œåŸç†">å·¥ä½œåŸç†</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…è¿ç”¨ç¤ºä¾‹-2">å®é™…è¿ç”¨ç¤ºä¾‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#æ€»ç»“-2">æ€»ç»“</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#server-timeout">server.timeout</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#server-timeout-1">server.timeout</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…è¿ç”¨ç¤ºä¾‹-3">å®é™…è¿ç”¨ç¤ºä¾‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#server-keepalivetimeout">server.keepAliveTimeout</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä»€ä¹ˆæ˜¯-keep-alive">ä»€ä¹ˆæ˜¯ Keep-Aliveï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#server-keepalivetimeoutæ˜¯ä»€ä¹ˆ">server.keepAliveTimeoutæ˜¯ä»€ä¹ˆï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä¸ºä½•éœ€è¦è®¾ç½®server-keepalivetimeout">ä¸ºä½•éœ€è¦è®¾ç½®server.keepAliveTimeout?</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…è¿ç”¨ä¸¾ä¾‹">å®é™…è¿ç”¨ä¸¾ä¾‹</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#https-createserver-options-requestlistener">https.createServer([options][, requestListener])</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å‚æ•°è§£é‡Š-1">å‚æ•°è§£é‡Šï¼š</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…ä¾‹å­">å®é™…ä¾‹å­ï¼š</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#æ³¨æ„äº‹é¡¹-1">æ³¨æ„äº‹é¡¹ï¼š</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#https-get-options-callback">https.get(options[, callback])</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®ä¾‹-1-ç®€å•çš„-get-è¯·æ±‚">å®ä¾‹ 1 - ç®€å•çš„ GET è¯·æ±‚ï¼š</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®ä¾‹-2-å¸¦é€‰é¡¹çš„-get-è¯·æ±‚">å®ä¾‹ 2 - å¸¦é€‰é¡¹çš„ GET è¯·æ±‚ï¼š</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#https-get-url-options-callback">https.get(url[, options][, callback])</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#https-globalagent">https.globalAgent</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…è¿ç”¨ä¾‹å­-3">å®é™…è¿ç”¨ä¾‹å­ï¼š</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#https-request-options-callback">https.request(options[, callback])</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#åŸºæœ¬æ¦‚å¿µ">åŸºæœ¬æ¦‚å¿µ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å‚æ•°è¯¦è§£">å‚æ•°è¯¦è§£</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…è¿ç”¨ç¤ºä¾‹-4">å®é™…è¿ç”¨ç¤ºä¾‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#æ€»ç»“-3">æ€»ç»“</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#https-request-url-options-callback">https.request(url[, options][, callback])</a></li><!----><!--]--></ul><div class="vp-toc-marker" style="top:-1.7rem;"></div></div><!----></aside></div><!----><div class="theme-hope-content"><h1 id="https" tabindex="-1"><a class="header-anchor" href="#https"><span><a href="https://nodejs.org/docs/latest/api/https.html#https" target="_blank" rel="noopener noreferrer">HTTPS</a></span></a></h1><p>Node.js æ˜¯ä¸€ä¸ªåŸºäº Chrome V8 å¼•æ“çš„ JavaScript è¿è¡Œç¯å¢ƒï¼Œå®ƒè®©ä½ èƒ½å¤Ÿåœ¨æœåŠ¡å™¨ç«¯è¿è¡Œ JavaScriptã€‚è¿™ä¸€ç‰¹æ€§ä½¿å¾—å¼€å‘è€…å¯ä»¥ç”¨åŒä¸€ç§è¯­è¨€ç¼–å†™å‰åç«¯ä»£ç ï¼Œæå¤§åœ°æå‡äº†å¼€å‘æ•ˆç‡ã€‚</p><p>åœ¨ Node.js ä¸­ï¼ŒHTTPS æ¨¡å—æä¾›äº†ä¸€ç§æ–¹å¼æ¥å®ç°ä½¿ç”¨ TLS/SSL çš„ HTTP å®‰å…¨é€šä¿¡ã€‚ç®€å•æ¥è¯´ï¼ŒHTTPS æ¨¡å—å¸®åŠ©ä½ åˆ›å»ºåŠ å¯†çš„è¿æ¥ï¼Œä»¥å®‰å…¨çš„æ–¹å¼ä¼ è¾“æ•°æ®ï¼Œä¿æŠ¤æ•°æ®ä¸è¢«ä¸­é—´äººæ”»å‡»æˆ–çªƒå¬ã€‚</p><h3 id="ä½¿ç”¨-https-æ¨¡å—" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨-https-æ¨¡å—"><span>ä½¿ç”¨ HTTPS æ¨¡å—</span></a></h3><p>è¦åœ¨ Node.js åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨ HTTPS æ¨¡å—ï¼Œé¦–å…ˆéœ€è¦å¼•å…¥è¯¥æ¨¡å—ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> https</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;https&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="åˆ›å»º-https-æœåŠ¡å™¨" tabindex="-1"><a class="header-anchor" href="#åˆ›å»º-https-æœåŠ¡å™¨"><span>åˆ›å»º HTTPS æœåŠ¡å™¨</span></a></h3><p>è¦åˆ›å»º HTTPS æœåŠ¡å™¨ï¼Œä½ éœ€è¦ SSL è¯ä¹¦ã€‚å¯¹äºå­¦ä¹ å’Œå¼€å‘ç›®çš„ï¼Œä½ å¯ä»¥è‡ªå·±ç”Ÿæˆä¸€ä¸ªâ€œè‡ªç­¾åâ€çš„è¯ä¹¦ã€‚ä½†æ˜¯ï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œä½ åº”å½“ä½¿ç”¨ç”±è®¤è¯æœºæ„ï¼ˆCAï¼‰ç­¾å‘çš„è¯ä¹¦ã€‚</p><p>å‡è®¾ä½ å·²ç»æœ‰äº† SSL è¯ä¹¦æ–‡ä»¶<code>key.pem</code>ï¼ˆç§é’¥ï¼‰å’Œ<code>cert.pem</code>ï¼ˆå…¬å¼€è¯ä¹¦ï¼‰ï¼Œå¯ä»¥è¿™æ ·åˆ›å»ºä¸€ä¸ª HTTPS æœåŠ¡å™¨ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> https</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;https&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> fs</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;fs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> options</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">  key</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">fs</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">readFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;key.pem&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">  cert</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">fs</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">readFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;cert.pem&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">https</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">createServer</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">options</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">req</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">res</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    res</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">writeHead</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">200</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    res</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">end</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;hello world</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">listen</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">8000</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">console</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;Server running at https://localhost:8000/&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šé¢çš„ä»£ç ç‰‡æ®µæ¼”ç¤ºäº†å¦‚ä½•åˆ©ç”¨ HTTPS æ¨¡å—å’Œ Node.js çš„ <code>fs</code> ï¼ˆæ–‡ä»¶ç³»ç»Ÿï¼‰æ¨¡å—åŠ è½½ SSL è¯ä¹¦ï¼Œè¿›è€Œåˆ›å»ºä¸€ä¸ªç®€å•çš„ HTTPS æœåŠ¡å™¨ã€‚æœåŠ¡å™¨å¯åŠ¨åï¼Œç›‘å¬æœ¬æœºçš„ 8000 ç«¯å£ã€‚é€šè¿‡è®¿é—® <code>https://localhost:8000/</code>ï¼Œä½ å°†çœ‹åˆ°æœåŠ¡å™¨è¿”å›çš„ â€œhello worldâ€ æ¶ˆæ¯ã€‚</p><h3 id="å®é™…åº”ç”¨ä¾‹å­" tabindex="-1"><a class="header-anchor" href="#å®é™…åº”ç”¨ä¾‹å­"><span>å®é™…åº”ç”¨ä¾‹å­</span></a></h3><ol><li><p><strong>Web åº”ç”¨ä¸ API</strong>ï¼šåœ¨å¼€å‘ Web åº”ç”¨æ—¶ï¼Œä¸ºä¿æŠ¤ç”¨æˆ·ä¿¡æ¯ï¼Œæ¯”å¦‚ç™»å½•å‡­æ®ã€ä¸ªäººæ•°æ®ç­‰ï¼Œé€šå¸¸ä¼šé€šè¿‡ HTTPS æä¾›æœåŠ¡ã€‚</p></li><li><p><strong>æ”¯ä»˜ç³»ç»Ÿ</strong>ï¼šåœ¨çº¿æ”¯ä»˜ç³»ç»Ÿå¿…é¡»é€šè¿‡ HTTPS æ¥å¤„ç†äº¤æ˜“ï¼Œä»¥ç¡®ä¿äº¤æ˜“ä¿¡æ¯çš„å®‰å…¨ã€‚</p></li><li><p><strong>IoT è®¾å¤‡</strong>ï¼šç‰©è”ç½‘ï¼ˆIoTï¼‰è®¾å¤‡é—´çš„é€šä¿¡ä¹Ÿå¯èƒ½é€šè¿‡ HTTPS è¿›è¡Œï¼Œä»¥ä¿éšœæ•°æ®ä¼ è¾“è¿‡ç¨‹ä¸­çš„å®‰å…¨æ€§ã€‚</p></li><li><p><strong>ç§»åŠ¨åº”ç”¨åç«¯æœåŠ¡</strong>ï¼šç§»åŠ¨åº”ç”¨å¸¸å¸¸éœ€è¦ä¸åç«¯æœåŠ¡äº¤äº’è·å–æ•°æ®ï¼Œè¿™äº›äº¤äº’ä¹Ÿä¼šé€šè¿‡ HTTPS è¿›è¡Œï¼Œä»¥ä¿æŠ¤æ•æ„Ÿä¿¡æ¯ä¸è¢«æˆªè·ã€‚</p></li></ol><p>é€šè¿‡ä¸Šè¿°ä¾‹å­å¯è§ï¼ŒHTTPS åœ¨ç°ä»£ç½‘ç»œåº”ç”¨ä¸­èµ·ç€è‡³å…³é‡è¦çš„è§’è‰²ï¼Œæ— è®ºæ˜¯ä¿æŠ¤ä¸ªäººéšç§è¿˜æ˜¯ç¡®ä¿æ•°æ®ä¼ è¾“çš„å®‰å…¨æ€§ï¼ŒHTTPS éƒ½æ˜¯ä¸€ä¸ªä¸å¯æˆ–ç¼ºçš„å·¥å…·ã€‚è€Œ Node.js çš„ HTTPS æ¨¡å—ï¼Œåˆ™æä¾›äº†ä¸€ä¸ªé«˜æ•ˆä¸”ç›¸å¯¹ç®€å•çš„æ–¹å¼æ¥å®ç°è¿™äº›åŠŸèƒ½ã€‚</p><h2 id="determining-if-crypto-support-is-unavailable" tabindex="-1"><a class="header-anchor" href="#determining-if-crypto-support-is-unavailable"><span><a href="https://nodejs.org/docs/latest/api/https.html#determining-if-crypto-support-is-unavailable" target="_blank" rel="noopener noreferrer">Determining if crypto support is unavailable</a></span></a></h2><p>Node.js æ˜¯ä¸€ä¸ªåŸºäº Chrome V8 å¼•æ“çš„ JavaScript è¿è¡Œç¯å¢ƒï¼Œå®ƒå…è®¸ä½ åœ¨æœåŠ¡å™¨ç«¯è¿è¡Œ JavaScript ä»£ç ã€‚è¿™æ„å‘³ç€ä½ å¯ä»¥ç”¨ JavaScript æ¥ç¼–å†™æœåŠ¡å™¨é€»è¾‘ï¼Œæ¯”å¦‚å¤„ç†ç½‘é¡µè¯·æ±‚ã€ä¸æ•°æ®åº“äº¤äº’ç­‰ç­‰ã€‚</p><p>å…¶ä¸­ä¸€ä¸ªé‡è¦çš„æ¨¡å—æ˜¯ <code>crypto</code>ï¼Œå®ƒæä¾›äº†åŠ å¯†åŠŸèƒ½ï¼ŒåŒ…æ‹¬å¯¹æ•°æ®è¿›è¡ŒåŠ å¯†è§£å¯†ã€ç”Ÿæˆæ•£åˆ—ï¼ˆhashï¼‰ç­‰ç­‰ã€‚è¿™åœ¨å¤„ç†æ•æ„Ÿæ•°æ®æ—¶éå¸¸æœ‰ç”¨ï¼Œæ¯”å¦‚ç”¨æˆ·å¯†ç åŠ å¯†ã€æ•°æ®ä¼ è¾“åŠ å¯†ç­‰ã€‚</p><p>ç„¶è€Œï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„ Node.js ç¯å¢ƒéƒ½é»˜è®¤æ”¯æŒ <code>crypto</code> æ¨¡å—ã€‚åœ¨ç‰¹å®šçš„æ„å»ºè¿‡ç¨‹ä¸­ï¼Œå¯èƒ½å› ä¸ºç‰ˆæƒæˆ–å…¶ä»–åŸå› ï¼Œ<code>crypto</code> æ¨¡å—ä¼šè¢«ç¦ç”¨ã€‚è¿™å°±éœ€è¦æˆ‘ä»¬åœ¨ä»£ç ä¸­åˆ¤æ–­ <code>crypto</code> æ˜¯å¦å¯ç”¨ã€‚</p><p>ä»¥ä¸‹æ˜¯å¦‚ä½•åœ¨ Node.js v21.7.1 ä¸­åˆ¤å®š <code>crypto</code> æ”¯æŒæ˜¯å¦ä¸å¯ç”¨çš„æ–¹æ³•ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">process</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">binding</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;config&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">).</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">hasCrypto</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">  console</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;crypto support is unavailable&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">  process</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">exit</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ®µä»£ç åšäº†ä»€ä¹ˆå‘¢ï¼Ÿ</p><ul><li><code>process</code> æ˜¯ä¸€ä¸ªå…¨å±€å¯¹è±¡ï¼Œæä¾›äº†ä¸€æ‰¹å®ç”¨åŠŸèƒ½ï¼Œæ¯”å¦‚ä¸å½“å‰è¿è¡Œçš„ç¨‹åºçš„è¿›ç¨‹äº’åŠ¨ã€‚</li><li><code>process.binding(&#39;config&#39;)</code> ä¼šè¿”å›ä¸€ä¸ªåŒ…å« Node.js æ„å»ºæ—¶é…ç½®ä¿¡æ¯çš„å¯¹è±¡ã€‚</li><li><code>.hasCrypto</code> æ˜¯å…¶ä¸­çš„ä¸€ä¸ªå±æ€§ï¼Œå®ƒä¼šæ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼ˆtrue æˆ– falseï¼‰ï¼Œè¡¨æ˜å½“å‰ Node.js ç¯å¢ƒæ˜¯å¦æ”¯æŒ <code>crypto</code> æ¨¡å—ã€‚</li></ul><p>é€šè¿‡æ£€æŸ¥ <code>hasCrypto</code> çš„å€¼ï¼Œä½ å¯ä»¥çŸ¥é“ <code>crypto</code> æ˜¯å¦å¯ç”¨ã€‚å¦‚æœä¸å¯ç”¨ï¼ˆå³ <code>hasCrypto</code> ä¸º <code>false</code>ï¼‰ï¼Œä»£ç ä¼šæ‰“å°å‡ºé”™è¯¯æ¶ˆæ¯ &quot;crypto support is unavailable&quot; å¹¶é€€å‡ºç¨‹åºï¼ˆé€šè¿‡ <code>process.exit(1)</code>ï¼‰ã€‚</p><p>ä¸¾ä¸ªå®é™…åº”ç”¨çš„ä¾‹å­ï¼š</p><p>å‡è®¾ä½ æ­£åœ¨å¼€å‘ä¸€ä¸ªéœ€è¦åŠ å¯†ç”¨æˆ·å¯†ç çš„ web åº”ç”¨ã€‚åœ¨ç”¨æˆ·æ³¨å†Œæ—¶ï¼Œä½ å°†ä½¿ç”¨ <code>crypto</code> æ¨¡å—æ¥ç”Ÿæˆå¯†ç çš„æ•£åˆ—å€¼å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ï¼Œè€Œä¸æ˜¯æ˜æ–‡å­˜å‚¨å¯†ç ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> crypto</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;crypto&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> hashPassword</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">password</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">process</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">binding</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;config&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">).</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">hasCrypto</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    throw</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> Error</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;crypto support is unavailable&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> hash</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> crypto</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">createHash</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;sha256&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">  hash</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">update</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">password</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> hash</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">digest</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;hex&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">console</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">hashPassword</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;mySuperSecretPassword&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">));</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ®µä»£ç é¦–å…ˆæ£€æŸ¥ <code>crypto</code> æ˜¯å¦å¯ç”¨ï¼Œç„¶åä½¿ç”¨ <code>crypto.createHash(&#39;sha256&#39;)</code> åˆ›å»ºä¸€ä¸ª SHA-256 æ•£åˆ—ã€‚ä¹‹åï¼Œå®ƒç”¨ <code>.update(password)</code> æ–¹æ³•æ·»åŠ å¯†ç åˆ°æ•£åˆ—ä¸­ï¼Œæœ€åè°ƒç”¨ <code>.digest(&#39;hex&#39;)</code> ä»¥åå…­è¿›åˆ¶å­—ç¬¦ä¸²å½¢å¼è¿”å›æ•£åˆ—å€¼ã€‚</p><p>å¦‚æœ <code>crypto</code> ä¸å¯ç”¨ï¼Œé‚£ä¹ˆ <code>hashPassword</code> å‡½æ•°ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚è¿™æ˜¯ä¸€ä¸ªç®€å•çš„å®‰å…¨æ€§æªæ–½ï¼Œç¡®ä¿ä½ çš„åº”ç”¨åœ¨æ²¡æœ‰å¿…è¦çš„å®‰å…¨æ”¯æŒæ—¶ä¸ä¼šè¿è¡Œæ•æ„Ÿæ“ä½œã€‚</p><h2 id="class-https-agent" tabindex="-1"><a class="header-anchor" href="#class-https-agent"><span><a href="https://nodejs.org/docs/latest/api/https.html#class-httpsagent" target="_blank" rel="noopener noreferrer">Class: https.Agent</a></span></a></h2><p>Node.js æ˜¯ä¸€ä¸ªéå¸¸å¼ºå¤§çš„ JavaScript ç¯å¢ƒï¼Œå®ƒå…è®¸ä½ åœ¨æœåŠ¡å™¨ä¸Šè¿è¡Œ JavaScriptã€‚Node.js çš„ä¸€ä¸ªé‡è¦ç‰¹æ€§æ˜¯å…¶å†…ç½®æ¨¡å—ç³»ç»Ÿï¼Œè€Œ <code>https</code> æ¨¡å—å°±æ˜¯è¿™äº›å†…ç½®æ¨¡å—ä¹‹ä¸€ã€‚è¿™ä¸ªæ¨¡å—æä¾›äº†ä¸€ç§æ–¹å¼æ¥æ‰§è¡Œ HTTPS (å³ HTTP Secureï¼Œæˆ–è€…è¯´æ˜¯ HTTP åŠ å¯†ç‰ˆ) è¯·æ±‚ã€‚å®ƒæ˜¯æ„å»ºå®‰å…¨ç½‘ç»œåº”ç”¨ç¨‹åºçš„åŸºç¡€ã€‚</p><p>åœ¨ Node.js v21.7.1 ä¸­ï¼Œ<code>https.Agent</code> ç±»æ˜¯ <code>https</code> æ¨¡å—çš„ä¸€éƒ¨åˆ†ã€‚è¿™ä¸ªç±»ä¸»è¦ç”¨äºç®¡ç†å®¢æˆ·ç«¯çº§åˆ«çš„è¿æ¥æŒä¹…åŒ–å’Œé‡ç”¨ï¼Œä»¥åŠè¯·æ±‚çš„å®‰å…¨æ€§ã€‚å®é™…ä¸Šï¼Œ<code>https.Agent</code> è´Ÿè´£ç®¡ç†æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ä¹‹é—´çš„è¿æ¥æŒä¹…æ€§å’Œé‡ç”¨ï¼ŒåŒæ—¶ä¹Ÿå¤„ç† SSL/TLS åŠ å¯†ç­‰å®‰å…¨æ€§é—®é¢˜ã€‚</p><p>ç®€å•æ¥è¯´ï¼Œå½“ä½ æƒ³è¦å‘ä¸€ä¸ª HTTPS æœåŠ¡å‘èµ·è¯·æ±‚æ—¶ï¼Œæ¯”å¦‚ä»ä¸€ä¸ª API è·å–æ•°æ®æˆ–æäº¤è¡¨å•æ•°æ®ï¼Œ<code>https.Agent</code> å¯ä»¥å¸®åŠ©ä½ é«˜æ•ˆã€å®‰å…¨åœ°ç®¡ç†è¿™äº›è¿æ¥ã€‚</p><h3 id="ç¤ºä¾‹è§£é‡Š" tabindex="-1"><a class="header-anchor" href="#ç¤ºä¾‹è§£é‡Š"><span>ç¤ºä¾‹è§£é‡Š</span></a></h3><p>ä¸ºäº†ç»™ä½ æ›´å…·ä½“çš„äº†è§£ï¼Œä¸‹é¢å°†é€šè¿‡ä¸€äº›ä¾‹å­æ¥è¯´æ˜ <code>https.Agent</code> çš„ä½¿ç”¨ï¼š</p><h4 id="_1-åˆ›å»ºä¸€ä¸ª-https-agent-å®ä¾‹" tabindex="-1"><a class="header-anchor" href="#_1-åˆ›å»ºä¸€ä¸ª-https-agent-å®ä¾‹"><span>1. åˆ›å»ºä¸€ä¸ª https.Agent å®ä¾‹</span></a></h4><p>åœ¨å¼€å§‹å‘èµ· HTTPS è¯·æ±‚ä¹‹å‰ï¼Œä½ å¯èƒ½éœ€è¦è‡ªå®šä¹‰ä¸€äº› HTTPS è¿æ¥çš„é€‰é¡¹ï¼Œæ¯”å¦‚æœ€å¤§ç©ºé—²æ—¶é—´æˆ–æœ€å¤§è¯·æ±‚æ•°ç­‰ã€‚è¿™å¯ä»¥é€šè¿‡åˆ›å»ºä¸€ä¸ª <code>https.Agent</code> å®ä¾‹æ¥å®ç°ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> https</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;https&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰çš„Agentå®ä¾‹</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> agent</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> https</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Agent</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">  keepAlive</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// ä¿æŒè¿æ¥æ´»è·ƒ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">  maxSockets</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// å…è®¸çš„æœ€å¤§socketæ•°é‡</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// ä½¿ç”¨è¿™ä¸ªagentå®ä¾‹å‘èµ·è¯·æ±‚</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">https</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;https://example.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, { </span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">agent</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> }, (</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">res</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">  // å¤„ç†å“åº”</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">});</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªè‡ªå®šä¹‰çš„ <code>https.Agent</code> å®ä¾‹ï¼Œå¹¶ä¸”è®¾ç½®äº† <code>keepAlive</code> ä¸º <code>true</code> æ¥ä¿æŒè¿æ¥æ´»è·ƒï¼ŒåŒæ—¶è®¾ç½® <code>maxSockets</code> ä¸º <code>10</code> æ¥é™åˆ¶æœ€å¤§ socket æ•°é‡ã€‚ç„¶åæˆ‘ä»¬åœ¨ <code>https.get</code> æ–¹æ³•ä¸­é€šè¿‡ <code>{ agent }</code> å‚æ•°ä½¿ç”¨äº†è¿™ä¸ªè‡ªå®šä¹‰çš„ agentã€‚</p><h4 id="_2-å¤ç”¨è¿æ¥" tabindex="-1"><a class="header-anchor" href="#_2-å¤ç”¨è¿æ¥"><span>2. å¤ç”¨è¿æ¥</span></a></h4><p>å½“ <code>https.Agent</code> çš„ <code>keepAlive</code> é€‰é¡¹è¢«è®¾ç½®ä¸º <code>true</code> æ—¶ï¼Œå®ƒå…è®¸ TCP è¿æ¥åœ¨è¯·æ±‚ç»“æŸåä»ç„¶ä¿æŒæ‰“å¼€çŠ¶æ€ï¼Œä»è€Œå¯ä»¥è¢«åç»­çš„è¯·æ±‚å¤ç”¨ã€‚è¿™å‡å°‘äº†å»ºç«‹è¿æ¥çš„å¼€é”€ï¼Œæé«˜äº†æ€§èƒ½ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// ä½¿ç”¨åŒä¸€ä¸ªagentå®ä¾‹å‘èµ·å¤šä¸ªè¯·æ±‚</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">https</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;https://example.com/page1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, { </span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">agent</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> }, (</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">res</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">  // å¤„ç†ç¬¬ä¸€ä¸ªå“åº”</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">https</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;https://example.com/page2&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, { </span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">agent</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> }, (</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">res</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">  // å¤„ç†ç¬¬äºŒä¸ªå“åº”</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">});</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œä¸¤ä¸ªè¯·æ±‚éƒ½ä½¿ç”¨äº†åŒä¸€ä¸ª <code>https.Agent</code> å®ä¾‹ï¼Œç”±äº <code>keepAlive</code> è¢«è®¾ç½®ä¸º <code>true</code>ï¼Œæ‰€ä»¥è¿™ä¸¤ä¸ªè¯·æ±‚å¯ä»¥å…±äº«åŒä¸€ä¸ª TCP è¿æ¥ã€‚</p><h3 id="å°ç»“" tabindex="-1"><a class="header-anchor" href="#å°ç»“"><span>å°ç»“</span></a></h3><p><code>https.Agent</code> åœ¨ Node.js ä¸­æ‰®æ¼”ç€é‡è¦çš„è§’è‰²ï¼Œå°¤å…¶æ˜¯åœ¨éœ€è¦ç²¾ç»†æ§åˆ¶ HTTPS è¿æ¥è¡Œä¸ºï¼Œå¦‚è¿æ¥å¤ç”¨ã€åŠ å¯†ç­‰æ–¹é¢ã€‚é€šè¿‡åˆç†åˆ©ç”¨ <code>https.Agent</code>ï¼Œå¯ä»¥æé«˜ Node.js åº”ç”¨ç¨‹åºä¸ HTTPS æœåŠ¡äº¤äº‘çš„æ€§èƒ½å’Œå®‰å…¨æ€§ã€‚</p><h3 id="new-agent-options" tabindex="-1"><a class="header-anchor" href="#new-agent-options"><span><a href="https://nodejs.org/docs/latest/api/https.html#new-agentoptions" target="_blank" rel="noopener noreferrer">new Agent([options])</a></span></a></h3><p>ç†è§£ Node.js ä¸­çš„<code>new Agent([options])</code>é¦–å…ˆéœ€è¦äº†è§£ Node.js æ˜¯ä»€ä¹ˆï¼Œä»¥åŠä»€ä¹ˆæ˜¯ HTTP Agentã€‚</p><p>Node.js æ˜¯ä¸€ä¸ªåŸºäº Chrome V8 å¼•æ“çš„ JavaScript è¿è¡Œç¯å¢ƒï¼Œå®ƒä½¿å¾—å¼€å‘è€…å¯ä»¥ä½¿ç”¨ JavaScript æ¥ç¼–å†™æœåŠ¡å™¨ç«¯çš„ä»£ç ã€‚å®ƒéå¸¸é€‚åˆäºæ„å»ºé«˜æ€§èƒ½çš„ç½‘ç»œåº”ç”¨ç¨‹åºã€‚</p><p>åœ¨è®¨è®º<code>new Agent([options])</code>ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆç†è§£ Agent çš„è§’è‰²ã€‚åœ¨ Node.js ä¸­ï¼Œä¸€ä¸ª HTTP Agent è´Ÿè´£ç®¡ç† HTTP å®¢æˆ·ç«¯çš„è¿æ¥æŒä¹…æ€§å’Œé‡ç”¨ï¼Œè¿™å¯¹æé«˜ç½‘ç»œè¯·æ±‚çš„æ•ˆç‡éå¸¸å…³é”®ã€‚ç®€å•è¯´ï¼Œå½“ä½ çš„åº”ç”¨éœ€è¦å‘åŒä¸€æœåŠ¡å™¨é¢‘ç¹å‘é€å¤šä¸ªè¯·æ±‚æ—¶ï¼Œä½¿ç”¨ä¸€ä¸ª HTTP Agent å¯ä»¥å¸®åŠ©ä½ èŠ‚çœå»ºç«‹å’Œå…³é—­è¿æ¥æ‰€éœ€çš„æ—¶é—´å’Œèµ„æºã€‚</p><h3 id="new-agent-options-1" tabindex="-1"><a class="header-anchor" href="#new-agent-options-1"><span><code>new Agent([options])</code></span></a></h3><p><code>new Agent([options])</code>æ˜¯åˆ›å»ºä¸€ä¸ªæ–°çš„ HTTP(S) Agent å®ä¾‹çš„æ–¹å¼ã€‚<code>options</code>æ˜¯ä¸€ä¸ªå¯é€‰å‚æ•°ï¼Œå…è®¸ä½ è‡ªå®šä¹‰ Agent çš„è¡Œä¸ºã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥è®¾ç½®æœ€å¤§è¿æ¥æ•°ã€æ˜¯å¦ä¿æŒè¿æ¥å­˜æ´»ç­‰ã€‚</p><h3 id="å®é™…è¿ç”¨ä¾‹å­" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨ä¾‹å­"><span>å®é™…è¿ç”¨ä¾‹å­</span></a></h3><h4 id="_1-æé«˜ç½‘ç«™çˆ¬è™«æ•ˆç‡" tabindex="-1"><a class="header-anchor" href="#_1-æé«˜ç½‘ç«™çˆ¬è™«æ•ˆç‡"><span>1. æé«˜ç½‘ç«™çˆ¬è™«æ•ˆç‡</span></a></h4><p>å‡è®¾ä½ æ­£åœ¨ç¼–å†™ä¸€ä¸ªçˆ¬è™«æ¥æ”¶é›†æŸç½‘ç«™çš„æ•°æ®ã€‚å¦‚æœæ²¡æœ‰ä½¿ç”¨ HTTP Agentï¼Œæ¯æ¬¡è¯·æ±‚éƒ½ä¼šæ‰“å¼€ä¸€ä¸ªæ–°çš„è¿æ¥ç„¶åå…³é—­ï¼Œè¿™ä¸ä»…æ…¢ï¼Œè€Œä¸”å¯¹ç›®æ ‡æœåŠ¡å™¨ä¹Ÿä¸å‹å¥½ã€‚ä½¿ç”¨<code>new Agent()</code>å¯ä»¥è®©ä½ çš„çˆ¬è™«æ›´æœ‰æ•ˆç‡åœ°å·¥ä½œï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> https</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;https&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// åˆ›å»ºä¸€ä¸ªagentå®ä¾‹ï¼Œæœ€å¤§å…è®¸5ä¸ªå¹¶å‘è¿æ¥</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> agent</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> https</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Agent</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">({ </span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">keepAlive</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">maxSockets</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// ä½¿ç”¨è¿™ä¸ªagentå»è¯·æ±‚æ•°æ®</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">https</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">    hostname</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;example.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">    path</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;/data&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">    agent</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">agent</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// ä½¿ç”¨è‡ªå®šä¹‰çš„agent</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">res</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // å¤„ç†å“åº”...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-å¾®æœåŠ¡é—´çš„é«˜æ•ˆé€šä¿¡" tabindex="-1"><a class="header-anchor" href="#_2-å¾®æœåŠ¡é—´çš„é«˜æ•ˆé€šä¿¡"><span>2. å¾®æœåŠ¡é—´çš„é«˜æ•ˆé€šä¿¡</span></a></h4><p>åœ¨å¾®æœåŠ¡æ¶æ„ä¸­ï¼ŒæœåŠ¡ä¹‹é—´ç»å¸¸éœ€è¦è¿›è¡Œ HTTP é€šä¿¡ã€‚ä½¿ç”¨è‡ªå®šä¹‰ HTTP Agent å¯ä»¥ä¼˜åŒ–è¿™äº›å†…éƒ¨é€šä¿¡çš„æ€§èƒ½ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> http</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;http&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// é’ˆå¯¹å†…éƒ¨æœåŠ¡çš„agenté…ç½®</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> internalServiceAgent</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> http</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Agent</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">  keepAlive</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">  maxFreeSockets</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// å½“è°ƒç”¨å†…éƒ¨å¾®æœåŠ¡æ—¶ä½¿ç”¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">http</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">request</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">    hostname</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;internal-service.example.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">    port</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">80</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">    path</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;/&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">    method</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;GET&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">    agent</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">internalServiceAgent</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// ä½¿ç”¨ä¸“é—¨é…ç½®çš„agent</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">res</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // å¤„ç†å“åº”...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é€šè¿‡åœ¨æœåŠ¡é—´å…±äº«ä¸€ä¸ªæˆ–å¤šä¸ªç‰¹åˆ«é…ç½®çš„ Agent å®ä¾‹ï¼Œä½ å¯ä»¥æ˜¾è‘—å‡å°‘å»¶è¿Ÿå’Œç³»ç»Ÿèµ„æºæ¶ˆè€—ï¼Œæé«˜æ•´ä½“æ€§èƒ½ã€‚</p><h3 id="ç»“è®º" tabindex="-1"><a class="header-anchor" href="#ç»“è®º"><span>ç»“è®º</span></a></h3><p>é€šè¿‡ä½¿ç”¨<code>new Agent([options])</code>æ¥åˆ›å»ºå’Œé…ç½® HTTP(S) Agentï¼ŒNode.js åº”ç”¨å¯ä»¥æ›´é«˜æ•ˆåœ°è¿›è¡Œç½‘ç»œé€šä¿¡ã€‚è¿™åœ¨éœ€è¦ç®¡ç†å¤šä¸ªå¹¶å‘è¿æ¥åˆ°åŒä¸€æœåŠ¡å™¨æˆ–æœåŠ¡çš„åœºæ™¯ä¸‹å°¤å…¶æœ‰ç”¨ï¼Œå¦‚ç½‘ç«™çˆ¬è™«æˆ–å¾®æœåŠ¡æ¶æ„ä¸­çš„æœåŠ¡é—´é€šä¿¡ã€‚é€šè¿‡åˆç†é…ç½® Agent çš„é€‰é¡¹ï¼Œä¾‹å¦‚è¿æ¥æŒä¹…åŒ–ã€æœ€å¤§è¿æ¥æ•°ç­‰ï¼Œå¯ä»¥å¤§å¹…æå‡åº”ç”¨æ€§èƒ½å’Œèµ„æºåˆ©ç”¨ç‡ã€‚</p><h4 id="event-keylog" tabindex="-1"><a class="header-anchor" href="#event-keylog"><span><a href="https://nodejs.org/docs/latest/api/https.html#event-keylog" target="_blank" rel="noopener noreferrer">Event: &#39;keylog&#39;</a></span></a></h4><p>Node.js æ˜¯ä¸€ä¸ªåœ¨æœåŠ¡å™¨ç«¯è¿è¡Œ JavaScript ä»£ç çš„ç¯å¢ƒï¼Œè€Œä¸ä»…ä»…æ˜¯åœ¨æµè§ˆå™¨ä¸­ã€‚å®ƒè¢«å¹¿æ³›ç”¨äºåˆ›å»ºç½‘ç»œåº”ç”¨ç¨‹åºï¼Œå¦‚ç½‘ç«™åç«¯æœåŠ¡å’Œ APIsã€‚Node.js å…·æœ‰ä¸€ä¸ªäº‹ä»¶é©±åŠ¨çš„æ¶æ„ï¼Œèƒ½å¤Ÿå¤„ç†å¤šç§ä¸åŒç±»å‹çš„å¼‚æ­¥äº‹ä»¶ã€‚è¿™ä¸€ç‰¹æ€§ä½¿å¾— Node.js éå¸¸é€‚åˆå¤„ç† I/O å¯†é›†å‹ä»»åŠ¡ï¼Œä¾‹å¦‚ç½‘ç»œè¯·æ±‚ã€æ–‡ä»¶æ“ä½œç­‰ã€‚</p><p>å…¶ä¸­ï¼Œâ€œEvent: &#39;keylog&#39;â€æ˜¯ Node.js v21.7.1 ç‰ˆæœ¬åŠå…¶ä¹‹åç‰ˆæœ¬ä¸­ https æ¨¡å—çš„ä¸€ä¸ªäº‹ä»¶ï¼Œä¸»è¦ç”¨äº TLSï¼ˆTransport Layer Securityï¼Œä¼ è¾“å±‚å®‰å…¨åè®®ï¼‰è¿æ¥è¿‡ç¨‹ä¸­çš„å¯†é’¥æ—¥å¿—è®°å½•ã€‚è¿™ä¸ªåŠŸèƒ½å¯ä»¥è®©å¼€å‘è€…è·å–åˆ°åº•å±‚ TLS æ¡æ‰‹è¿‡ç¨‹ä¸­ç”Ÿæˆçš„å¯†é’¥ä¿¡æ¯ï¼Œè¿™å¯¹äºè°ƒè¯•å’Œåˆ†æ TLS è¿æ¥é—®é¢˜éå¸¸æœ‰ç”¨ã€‚</p><h3 id="å¦‚ä½•å·¥ä½œ" tabindex="-1"><a class="header-anchor" href="#å¦‚ä½•å·¥ä½œ"><span>å¦‚ä½•å·¥ä½œ</span></a></h3><p>æ¯å½“ TLS è¿æ¥è¿‡ç¨‹ä¸­ç”Ÿæˆæ–°çš„å¯†é’¥ææ–™æ—¶ï¼Œéƒ½ä¼šè§¦å‘<code>keylog</code>äº‹ä»¶ï¼Œå¹¶ä¸”é€šè¿‡å›è°ƒå‡½æ•°å‚æ•°ä¼ é€’åŒ…å«å¯†é’¥ä¿¡æ¯çš„<code>Buffer</code>å¯¹è±¡ã€‚è¿™æ ·ï¼Œå¼€å‘è€…å¯ä»¥ç›‘å¬è¿™ä¸ªäº‹ä»¶å¹¶è·å–è¿™äº›ä¿¡æ¯ï¼Œç„¶åæŠŠè¿™äº›ä¿¡æ¯å†™å…¥æ–‡ä»¶æˆ–è€…è¿›è¡Œå…¶ä»–å½¢å¼çš„å¤„ç†ã€‚</p><h3 id="å®é™…è¿ç”¨ä¾‹å­-1" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨ä¾‹å­-1"><span>å®é™…è¿ç”¨ä¾‹å­ï¼š</span></a></h3><h4 id="_1-è°ƒè¯•-tls-è¿æ¥" tabindex="-1"><a class="header-anchor" href="#_1-è°ƒè¯•-tls-è¿æ¥"><span>1. è°ƒè¯• TLS è¿æ¥</span></a></h4><p>å‡è®¾ä½ æ­£åœ¨å¼€å‘ä¸€ä¸ªéœ€è¦ä¸ç¬¬ä¸‰æ–¹ HTTPS æœåŠ¡è¿›è¡Œå®‰å…¨é€šä¿¡çš„åº”ç”¨ç¨‹åºï¼Œä½†é‡åˆ°äº†ä¸€äº› TLS æ¡æ‰‹é—®é¢˜ã€‚é€šè¿‡ç›‘å¬<code>keylog</code>äº‹ä»¶ï¼Œä½ å¯ä»¥è·å¾—æ¡æ‰‹è¿‡ç¨‹ä¸­ç”Ÿæˆçš„å¯†é’¥ä¿¡æ¯ï¼Œç„¶åä½¿ç”¨ Wireshark ä¹‹ç±»çš„ç½‘ç»œåˆ†æå·¥å…·æ¥åˆ†æ TLS æ¡æ‰‹çš„ç»†èŠ‚ã€‚è¿™å¯¹äºè¯Šæ–­è¿æ¥é—®é¢˜ååˆ†æœ‰å¸®åŠ©ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> https</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;https&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> fs</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;fs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// åˆ›å»ºä¸€ä¸ªæ–‡ä»¶æµå†™å…¥å¯†é’¥ä¿¡æ¯</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> keylogStream</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> fs</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">createWriteStream</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;keylog.txt&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, { </span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">flags</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;a&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> options</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">  // å®šä¹‰ä¸»æœºåã€è·¯å¾„ç­‰é€‰é¡¹...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> req</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> https</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">request</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">options</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">req</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;socket&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">socket</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">  socket</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;keylog&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">line</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    keylogStream</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">write</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">line</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    keylogStream</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">write</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">req</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">end</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-æ•™å­¦å’Œç ”ç©¶" tabindex="-1"><a class="header-anchor" href="#_2-æ•™å­¦å’Œç ”ç©¶"><span>2. æ•™å­¦å’Œç ”ç©¶</span></a></h4><p>å¦‚æœä½ æ˜¯ä¸€ä½ç½‘ç»œå®‰å…¨çš„æ•™å¸ˆæˆ–è€…å­¦è€…ï¼Œ<code>keylog</code>äº‹ä»¶å¯ä»¥è¢«ç”¨æ¥å‘å­¦ç”Ÿå±•ç¤º TLS æ¡æ‰‹è¿‡ç¨‹ä¸­å¯†é’¥æ˜¯å¦‚ä½•ç”Ÿæˆå’Œæ¼”å˜çš„ã€‚é€šè¿‡å®é™…çš„ä¾‹å­ï¼Œå­¦ç”Ÿä»¬èƒ½æ›´å¥½åœ°ç†è§£åŠ å¯†é€šä¿¡çš„åŸç†ã€‚</p><h4 id="æ³¨æ„äº‹é¡¹" tabindex="-1"><a class="header-anchor" href="#æ³¨æ„äº‹é¡¹"><span>æ³¨æ„äº‹é¡¹</span></a></h4><ul><li>ä½¿ç”¨<code>keylog</code>åŠŸèƒ½æ—¶è¦å°å¿ƒå¤„ç†äº§ç”Ÿçš„å¯†é’¥æ—¥å¿—ï¼Œå› ä¸ºè¿™äº›ä¿¡æ¯å¦‚æœè¢«æ¶æ„åˆ©ç”¨ï¼Œå¯èƒ½ä¼šå±åŠ TLS è¿æ¥çš„å®‰å…¨ã€‚</li><li>è¿™ä¸ªåŠŸèƒ½ä¸»è¦ç”¨äºè°ƒè¯•æˆ–æ•™è‚²ç›®çš„ï¼Œå¹¶ä¸æ¨èåœ¨ç”Ÿäº§ç¯å¢ƒä¸­å¯ç”¨ã€‚</li></ul><p>æ€»è€Œè¨€ä¹‹ï¼Œ<code>Event: &#39;keylog&#39;</code>æä¾›äº†ä¸€ä¸ªå¼ºå¤§çš„å·¥å…·ï¼Œä½¿å¾—å¼€å‘è€…èƒ½å¤Ÿæ·±å…¥äº†è§£å’Œè°ƒè¯• TLS è¿æ¥ï¼Œä½†åŒæ—¶ä¹Ÿéœ€è¦æ³¨æ„å®‰å…¨å’Œéšç§ä¿æŠ¤çš„ç›¸å…³æªæ–½ã€‚</p><h2 id="class-https-server" tabindex="-1"><a class="header-anchor" href="#class-https-server"><span><a href="https://nodejs.org/docs/latest/api/https.html#class-httpsserver" target="_blank" rel="noopener noreferrer">Class: https.Server</a></span></a></h2><p>Node.js æ˜¯ä¸€ä¸ªåŸºäº Chrome V8 å¼•æ“çš„ JavaScript è¿è¡Œç¯å¢ƒï¼Œå®ƒä½¿å¾— JavaScriptï¼ˆé€šå¸¸ç”¨äºç¼–å†™ç½‘é¡µå‰ç«¯ä»£ç ï¼‰èƒ½åœ¨æœåŠ¡å™¨ç«¯è¿è¡Œã€‚Node.js æœ‰ä¸€ä¸ªåä¸º <code>https</code> çš„æ¨¡å—ï¼Œè¿™ä¸ªæ¨¡å—æä¾›äº†ä¸€äº›æ„é€ å‡½æ•°ã€æ–¹æ³•å’Œäº‹ä»¶ï¼Œç”¨äºå¤„ç† HTTPS (è¶…æ–‡æœ¬ä¼ è¾“å®‰å…¨åè®®) çš„è¯·æ±‚ã€‚HTTPS æ˜¯ HTTP çš„å®‰å…¨ç‰ˆï¼Œé€šè¿‡åŠ å¯†ä¼ è¾“æ•°æ®ï¼Œä¿æŠ¤æ•°æ®å…å—ä¸­é—´äººæ”»å‡»ã€‚</p><p>åœ¨ Node.js v21.7.1 ä¸­ï¼Œ<code>https.Server</code> ç±»æ˜¯ <code>https</code> æ¨¡å—ä¸­çš„ä¸€ä¸ªæ ¸å¿ƒéƒ¨åˆ†ï¼Œå®ƒè¢«ç”¨æ¥åˆ›å»º HTTPS æœåŠ¡å™¨ã€‚ç›¸å¯¹äº HTTPï¼ŒHTTPS ä½¿ç”¨ SSL æˆ– TLS åè®®æ¥åŠ å¯†è¯·æ±‚å’Œå“åº”ï¼Œè¿™ä½¿å¾—ç”¨æˆ·çš„æ•°æ®æ›´åŠ å®‰å…¨ã€‚</p><h3 id="å¦‚ä½•ä½¿ç”¨-https-server" tabindex="-1"><a class="header-anchor" href="#å¦‚ä½•ä½¿ç”¨-https-server"><span>å¦‚ä½•ä½¿ç”¨ <code>https.Server</code>?</span></a></h3><p>è¦ä½¿ç”¨ <code>https.Server</code> ç±»ï¼Œä½ é¦–å…ˆéœ€è¦å¯¼å…¥ <code>https</code> æ¨¡å—ï¼Œå¹¶ä¸”ä½ è¿˜éœ€è¦ SSL/TLS çš„å¯†é’¥å’Œè¯ä¹¦ï¼Œä»¥ä¾¿æœåŠ¡å™¨å¯ä»¥å®‰å…¨åœ°åŠ å¯†å’Œè§£å¯†ä¼ è¾“çš„æ•°æ®ã€‚</p><p>ä¸‹é¢æ˜¯åˆ›å»ºä¸€ä¸ªç®€å•çš„ HTTPS æœåŠ¡å™¨çš„æ­¥éª¤ï¼š</p><ol><li><p><strong>ç”Ÿæˆ SSL/TLS å¯†é’¥å’Œè¯ä¹¦ï¼š</strong> åœ¨å®é™…çš„ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œä½ éœ€è¦ä»ä¸€ä¸ªå—ä¿¡ä»»çš„ CA (è¯ä¹¦é¢å‘æœºæ„) è·å–è¿™äº›ï¼Œä½†æ˜¯å¯¹äºæµ‹è¯•ç›®çš„ï¼Œä½ å¯ä»¥è‡ªå·±ç”Ÿæˆå®ƒä»¬ã€‚</p></li><li><p><strong>åˆ›å»º HTTPS æœåŠ¡å™¨ï¼š</strong> ä½¿ç”¨ <code>https</code> æ¨¡å—å’Œä½ çš„å¯†é’¥åŠè¯ä¹¦åˆ›å»ºæœåŠ¡å™¨ã€‚</p></li><li><p><strong>å®šä¹‰è¯·æ±‚å¤„ç†é€»è¾‘ï¼š</strong> å½“æœåŠ¡å™¨æ¥æ”¶åˆ°å®¢æˆ·ç«¯è¯·æ±‚æ—¶ï¼Œä½ éœ€è¦å®šä¹‰å¦‚ä½•å“åº”è¿™äº›è¯·æ±‚ã€‚</p></li><li><p><strong>å¯åŠ¨æœåŠ¡å™¨ï¼š</strong> è®©æœåŠ¡å™¨ç›‘å¬ç‰¹å®šçš„ç«¯å£ã€‚</p></li></ol><h3 id="å®é™…ç¤ºä¾‹" tabindex="-1"><a class="header-anchor" href="#å®é™…ç¤ºä¾‹"><span>å®é™…ç¤ºä¾‹</span></a></h3><p>ä¸‹é¢æ˜¯ä¸€ä¸ªåˆ›å»º HTTPS æœåŠ¡å™¨çš„ç®€å•ä¾‹å­ï¼š</p><p>é¦–å…ˆï¼Œä½ éœ€è¦å®‰è£… OpenSSL æ¥ç”Ÿæˆè‡ªç­¾åçš„è¯ä¹¦ï¼ˆç”¨äºæµ‹è¯•ï¼‰ï¼š</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">openssl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> req</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -nodes</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -new</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -x509</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -keyout</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> server.key</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -out</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> server.cert</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>ç„¶åï¼Œä½¿ç”¨ä»¥ä¸‹ Node.js ä»£ç åˆ›å»º HTTPS æœåŠ¡å™¨ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> https</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;https&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> fs</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;fs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// è¯»å–å¯†é’¥å’Œè¯ä¹¦</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> options</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">  key</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">fs</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">readFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;server.key&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">  cert</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">fs</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">readFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;server.cert&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// åˆ›å»º HTTPS æœåŠ¡å™¨</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> server</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> https</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">createServer</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">options</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">req</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">res</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">  res</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">writeHead</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">200</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">  res</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">end</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;hello world</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// ç›‘å¬ 8000 ç«¯å£</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">server</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">listen</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">8000</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">  console</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;Server is running at https://localhost:8000&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">});</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="è§£é‡Š" tabindex="-1"><a class="header-anchor" href="#è§£é‡Š"><span>è§£é‡Š</span></a></h3><ul><li>é¦–å…ˆï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>require</code> å‡½æ•°å¯¼å…¥äº†æ‰€éœ€çš„ <code>https</code> å’Œ <code>fs</code> ï¼ˆæ–‡ä»¶ç³»ç»Ÿï¼‰æ¨¡å—ã€‚</li><li>æ¥ç€ï¼Œæˆ‘ä»¬è¯»å–äº†ä¹‹å‰ç”Ÿæˆçš„å¯†é’¥ (<code>server.key</code>) å’Œè¯ä¹¦ (<code>server.cert</code>)ï¼Œè¿™äº›ç”¨äºåˆ›å»ºå®‰å…¨è¿æ¥ã€‚</li><li>æˆ‘ä»¬è°ƒç”¨ <code>https.createServer()</code> æ–¹æ³•åˆ›å»ºæœåŠ¡å™¨ï¼Œä¼ å…¥ <code>options</code> å¯¹è±¡ï¼ˆåŒ…å«æˆ‘ä»¬çš„å¯†é’¥å’Œè¯ä¹¦ï¼‰ï¼Œä»¥åŠä¸€ä¸ªå›è°ƒå‡½æ•°æ¥å¤„ç†å®¢æˆ·ç«¯è¯·æ±‚ã€‚å½“æ”¶åˆ°è¯·æ±‚æ—¶ï¼ŒæœåŠ¡å™¨ä¼šå‘é€åŒ…å« &quot;hello world\n&quot; æ–‡æœ¬çš„å“åº”ã€‚</li><li>æœ€åï¼Œæˆ‘ä»¬è®©æœåŠ¡å™¨ç›‘å¬ 8000 ç«¯å£å¹¶æ‰“å°ä¸€æ¡æ¶ˆæ¯ï¼Œè¡¨æ˜æœåŠ¡å™¨å·²ç»å¯åŠ¨ã€‚</li></ul><h3 id="server-close-callback" tabindex="-1"><a class="header-anchor" href="#server-close-callback"><span><a href="https://nodejs.org/docs/latest/api/https.html#serverclosecallback" target="_blank" rel="noopener noreferrer">server.close([callback])</a></span></a></h3><p>å¥½çš„ï¼Œæˆ‘å°†ç®€å•è§£é‡Šä¸€ä¸‹ <code>server.close([callback])</code> è¿™ä¸ªæ–¹æ³•ï¼Œå¹¶ä¸”ç»™å‡ºå‡ ä¸ªå®é™…è¿ç”¨çš„ä¾‹å­ã€‚</p><p>åœ¨ Node.js ä¸­ï¼Œ<code>server.close([callback])</code> æ˜¯ä¸€ä¸ªç”¨äºå…³é—­æœåŠ¡å™¨çš„æ–¹æ³•ã€‚å®ƒå±äº HTTP æ¨¡å—ï¼Œé€šå¸¸ç”¨äºå…³é—­ä¸€ä¸ªæ­£åœ¨ç›‘å¬ç«¯å£çš„ HTTP æœåŠ¡å™¨ã€‚è¿™æ ·åšå¯ä»¥è®©æœåŠ¡å™¨åœæ­¢æ¥æ”¶æ–°çš„è¿æ¥ï¼Œä½†å·²ç»å»ºç«‹çš„è¿æ¥ä¼šæŒç»­ç›´åˆ°å“åº”ç»“æŸã€‚</p><p>è¿™é‡Œæ˜¯å‡ ä¸ªå‚æ•°çš„è¯´æ˜ï¼š</p><ul><li><code>callback</code>ï¼ˆå¯é€‰ï¼‰ï¼šå½“æœåŠ¡å™¨å…³é—­æ—¶è¦è°ƒç”¨çš„å‡½æ•°ã€‚å¦‚æœåœ¨è°ƒç”¨ <code>server.close()</code> çš„æ—¶å€™å·²ç»æ²¡æœ‰è¿æ¥äº†ï¼Œé‚£ä¹ˆå›è°ƒä¼šè¢«ç«‹å³æ‰§è¡Œã€‚å¦‚æœæœ‰ç°å­˜è¿æ¥ï¼Œåˆ™ä¼šç­‰åˆ°æ‰€æœ‰è¿æ¥éƒ½å…³é—­åæ‰æ‰§è¡Œå›è°ƒã€‚</li></ul><p>ä¸‹é¢æ˜¯å‡ ä¸ªä½¿ç”¨ <code>server.close([callback])</code> çš„å®ä¾‹ï¼š</p><p><strong>å®ä¾‹ 1: åŸºæœ¬ç”¨æ³•</strong></p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> http</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;http&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// åˆ›å»ºä¸€ä¸ªHTTPæœåŠ¡å™¨</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> server</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> http</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">createServer</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">req</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">res</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">  res</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">writeHead</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">200</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, { </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;Content-Type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;text/plain&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">  res</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">end</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;Hello World</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// æœåŠ¡å™¨å¼€å§‹ç›‘å¬3000ç«¯å£</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">server</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">listen</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">3000</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">  console</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;Server running at http://127.0.0.1:3000/&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// ç­‰å¾…ä¸€æ®µæ—¶é—´åå…³é—­æœåŠ¡å™¨</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">setTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">  server</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">close</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    console</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;Server is now closed.&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}, </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">3000</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// åœ¨3ç§’åå…³é—­æœåŠ¡å™¨</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªç®€å•çš„ HTTP æœåŠ¡å™¨ï¼Œå®ƒåœ¨ 3000 ç«¯å£ä¸Šç›‘å¬è¯·æ±‚å¹¶è¿”å› &quot;Hello World&quot;ã€‚ç„¶åæˆ‘ä»¬è®¾ç½®äº†ä¸€ä¸ª 3 ç§’çš„å®šæ—¶å™¨ï¼Œå®šæ—¶å™¨è§¦å‘åä¼šè°ƒç”¨ <code>server.close()</code> æ–¹æ³•æ¥å…³é—­æœåŠ¡å™¨ã€‚</p><p><strong>å®ä¾‹ 2: å¤„ç†é”™è¯¯</strong></p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> http</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;http&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// åˆ›å»ºä¸€ä¸ªHTTPæœåŠ¡å™¨</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> server</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> http</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">createServer</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">req</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">res</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">  // ...å¤„ç†è¯·æ±‚...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// å¼€å§‹ç›‘å¬æŸä¸ªç«¯å£</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">server</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">listen</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">3000</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// å…³é—­æœåŠ¡å™¨æ—¶å¯èƒ½ä¼šé‡åˆ°é”™è¯¯</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">server</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">close</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    console</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;Error shutting down the server:&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    console</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;Server shut down successfully.&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">});</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬é¢å¤–æ·»åŠ äº†å¯¹å…³é—­æ—¶å¯èƒ½å‘ç”Ÿçš„é”™è¯¯çš„å¤„ç†ã€‚å½“è°ƒç”¨ <code>server.close()</code> å¹¶ä¼ å…¥ä¸€ä¸ªå›è°ƒå‡½æ•°æ—¶ï¼Œå¦‚æœé‡åˆ°é”™è¯¯ï¼Œä¾‹å¦‚å°è¯•å…³é—­ä¸€ä¸ªæ²¡æœ‰æ‰“å¼€çš„æœåŠ¡å™¨ï¼Œé”™è¯¯å¯¹è±¡ä¼šä½œä¸ºå›è°ƒå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ã€‚</p><p><strong>å®ä¾‹ 3: ç»“åˆè¿›ç¨‹ä¿¡å·</strong></p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> http</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;http&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// åˆ›å»ºHTTPæœåŠ¡å™¨</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> server</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> http</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">createServer</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">req</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">res</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">  // ...å¤„ç†è¯·æ±‚...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// å¼€å§‹ç›‘å¬ç«¯å£</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">server</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">listen</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">3000</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// ç›‘å¬ç³»ç»Ÿä¿¡å·ä»¥ä¼˜é›…åœ°å…³é—­æœåŠ¡å™¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">process</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;SIGTERM&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">  console</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;Received SIGTERM, shutting down server...&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">  server</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">close</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    console</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;Server closed.&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">});</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼ŒæœåŠ¡å™¨å¯åŠ¨ä¹‹åï¼Œæˆ‘ä»¬ç›‘å¬äº†åä¸º <code>SIGTERM</code> çš„ç³»ç»Ÿä¿¡å·ã€‚åœ¨ Unix-like ç³»ç»Ÿä¸­ï¼Œ<code>SIGTERM</code> é€šå¸¸ç”¨äºå‘Šè¯‰ç¨‹åºéœ€è¦ç»“æŸè¿è¡Œã€‚å½“æˆ‘ä»¬çš„ Node.js æœåŠ¡å™¨æ¥æ”¶åˆ°è¿™ä¸ªä¿¡å·æ—¶ï¼Œå®ƒä¼šå°è¯•å…³é—­è‡ªå·±ã€‚è¿™æ˜¯ä¼˜é›…å…³é—­æœåŠ¡å™¨çš„ä¸€ç§æ–¹å¼ï¼Œä½¿å¾—æœåŠ¡å™¨èƒ½å¤Ÿæ­£ç¡®å¤„ç†å®Œå½“å‰çš„è¯·æ±‚ï¼Œç„¶åå†é€€å‡ºã€‚</p><h3 id="serversymbol-asyncdispose-https-nodejs-org-docs-latest-api-https-html-serversymbolasyncdispose" tabindex="-1"><a class="header-anchor" href="#serversymbol-asyncdispose-https-nodejs-org-docs-latest-api-https-html-serversymbolasyncdispose"><span>[server<a href="">Symbol.asyncDispose</a>](<a href="https://nodejs.org/docs/latest/api/https.html#serversymbolasyncdispose" target="_blank" rel="noopener noreferrer">https://nodejs.org/docs/latest/api/https.html#serversymbolasyncdispose</a>)</span></a></h3><p>åœ¨è§£é‡Šè¿™ä¸ªç‰¹æ€§ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆè¦ç†è§£å‡ ä¸ªæ¦‚å¿µï¼šNode.jsã€HTTP/HTTPS æœåŠ¡å™¨ã€ä»¥åŠä»€ä¹ˆæ˜¯å¼‚æ­¥å¤„ç†ã€‚æ¥ç€ï¼Œæˆ‘ä¼šè¯¦ç»†åœ°è§£é‡Š <code>server[Symbol.asyncDispose]()</code> å¹¶ç»™å‡ºå®é™…çš„åº”ç”¨åœºæ™¯ã€‚</p><h3 id="åŸºç¡€æ¦‚å¿µ" tabindex="-1"><a class="header-anchor" href="#åŸºç¡€æ¦‚å¿µ"><span>åŸºç¡€æ¦‚å¿µ</span></a></h3><p><strong>Node.js</strong> æ˜¯ä¸€ä¸ªè®© JavaScript è¿è¡Œåœ¨æœåŠ¡å™¨ç«¯çš„å¹³å°ï¼Œå®ƒå¯ä»¥ç”¨æ¥å¼€å‘å„ç§æœåŠ¡å™¨ç«¯åº”ç”¨ç¨‹åºã€‚</p><p><strong>HTTP/HTTPS æœåŠ¡å™¨</strong> æ˜¯é€šè¿‡ HTTP(HyperText Transfer Protocol)æˆ– HTTPS(Secure HyperText Transfer Protocol)åè®®æ¥æ”¶å’Œå¤„ç†å®¢æˆ·ç«¯è¯·æ±‚çš„è½¯ä»¶ã€‚</p><p><strong>å¼‚æ­¥å¤„ç†</strong> æ„å‘³ç€åœ¨æ‰§è¡ŒæŸé¡¹ä»»åŠ¡æ—¶ï¼Œä½ ä¸éœ€è¦ç­‰å¾…å®ƒå®Œæˆå°±å¯ä»¥åŒæ—¶è¿›è¡Œå…¶ä»–ä»»åŠ¡ã€‚è¿™å¯¹äºæé«˜ç¨‹åºæ•ˆç‡ç‰¹åˆ«é‡è¦ã€‚</p><h3 id="serversymbol-asyncdispose" tabindex="-1"><a class="header-anchor" href="#serversymbol-asyncdispose"><span>server<a href="">Symbol.asyncDispose</a></span></a></h3><p>ä» Node.js v21.7.1 å¼€å§‹ï¼Œå¼•å…¥äº†ä¸€ç§æ–°çš„æœºåˆ¶æ¥ä¼˜é›…åœ°å…³é—­ HTTP/HTTPS æœåŠ¡å™¨ï¼š<code>server[Symbol.asyncDispose]()</code>ã€‚è¿™ä¸ªæ–¹æ³•ä¸ºæœåŠ¡å™¨å¯¹è±¡æä¾›äº†ä¸€ç§å¼‚æ­¥æ¸…ç†èµ„æºçš„æ–¹å¼ã€‚</p><p>å½“è°ƒç”¨è¿™ä¸ªæ–¹æ³•æ—¶ï¼ŒNode.js å°†è§¦å‘æœåŠ¡å™¨çš„ä¼˜é›…å…³é—­æµç¨‹ï¼Œå…è®¸æœåŠ¡å™¨åœ¨å®Œå…¨åœæ­¢ä¹‹å‰å®Œæˆå½“å‰æ­£åœ¨å¤„ç†çš„è¯·æ±‚ï¼Œå¹¶ä¸”æœ‰æœºä¼šè¿›è¡Œå¼‚æ­¥æ¸…ç†æ“ä½œï¼ˆå¦‚å…³é—­æ•°æ®åº“è¿æ¥ã€é‡Šæ”¾æ–‡ä»¶å¥æŸ„ç­‰ï¼‰ã€‚</p><h3 id="å®é™…è¿ç”¨çš„ä¾‹å­" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨çš„ä¾‹å­"><span>å®é™…è¿ç”¨çš„ä¾‹å­</span></a></h3><p>å‡è®¾ä½ æ­£åœ¨å¼€å‘ä¸€ä¸ª Web åº”ç”¨ï¼Œè¯¥åº”ç”¨ä¸æ•°æ®åº“ç´§å¯†äº¤äº’ï¼Œå¹¶ä¸”åœ¨æœåŠ¡å™¨ç«¯å¤„ç†ç”¨æˆ·ä¸Šä¼ çš„æ–‡ä»¶ã€‚åœ¨åº”ç”¨å‡çº§æˆ–ç»´æŠ¤æ—¶ï¼Œä½ å¯èƒ½éœ€è¦é‡å¯æœåŠ¡å™¨ã€‚åœ¨è¿™ç§åœºæ™¯ä¸­ï¼Œç›´æ¥å…³é—­æœåŠ¡å™¨å¯èƒ½ä¼šå¯¼è‡´æ­£åœ¨å¤„ç†çš„è¯·æ±‚çªç„¶ä¸­æ–­ï¼Œä¸”æœªèƒ½æ­£ç¡®å…³é—­æ•°æ®åº“è¿æ¥æˆ–åˆ é™¤ä¸´æ—¶æ–‡ä»¶ï¼Œä»è€Œé€ æˆæ•°æ®ä¸ä¸€è‡´æˆ–èµ„æºæ³„éœ²é—®é¢˜ã€‚</p><p>ä½¿ç”¨ <code>server[Symbol.asyncDispose]()</code> å¯ä»¥ä¼˜é›…åœ°è§£å†³è¿™ä¸ªé—®é¢˜ã€‚å…·ä½“åšæ³•å¦‚ä¸‹ï¼š</p><ol><li><strong>ç›‘å¬åœæ­¢ä¿¡å·</strong>ï¼šé¦–å…ˆï¼Œä½ éœ€è¦åœ¨ä½ çš„ç¨‹åºä¸­æ·»åŠ ç›‘å¬æ“ä½œç³»ç»Ÿå‘é€çš„åœæ­¢ä¿¡å·ï¼ˆå¦‚ SIGTERMï¼‰çš„é€»è¾‘ã€‚</li><li><strong>è°ƒç”¨å¼‚æ­¥æ¸…ç†</strong>ï¼šå½“æ¥æ”¶åˆ°åœæ­¢ä¿¡å·æ—¶ï¼Œè°ƒç”¨ <code>server[Symbol.asyncDispose]()</code> å¼€å§‹ä¼˜é›…å…³é—­æµç¨‹ã€‚ä½ å¯ä»¥åœ¨è¿™ä¸ªæ–¹æ³•ä¸­åŠ å…¥è‡ªå·±çš„å¼‚æ­¥æ¸…ç†é€»è¾‘ï¼Œæ¯”å¦‚ï¼š <ul><li>ç¡®ä¿æ‰€æœ‰æ–°çš„è¯·æ±‚éƒ½ä¸å†è¢«æ¥å—ã€‚</li><li>ç­‰å¾…å½“å‰æ­£åœ¨å¤„ç†çš„è¯·æ±‚å…¨éƒ¨å®Œæˆã€‚</li><li>å…³é—­æ•°æ®åº“è¿æ¥ã€‚</li><li>åˆ é™¤æˆ–ç§»åŠ¨ä¸´æ—¶æ–‡ä»¶ã€‚</li></ul></li><li><strong>å®Œå…¨å…³é—­æœåŠ¡å™¨</strong>ï¼šå½“ä¸Šè¿°å¼‚æ­¥æ“ä½œéƒ½å®Œæˆåï¼ŒæœåŠ¡å™¨å°†å®Œå…¨å…³é—­ï¼Œæ­¤æ—¶å¯ä»¥å®‰å…¨åœ°é‡å¯æˆ–ç»ˆæ­¢ä½ çš„åº”ç”¨ç¨‹åºã€‚</li></ol><h3 id="æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#æ€»ç»“"><span>æ€»ç»“</span></a></h3><p><code>server[Symbol.asyncDispose]()</code> æä¾›äº†ä¸€ä¸ªæ ‡å‡†åŒ–çš„æ–¹æ³•ï¼Œè®© Node.js ä¸­çš„ HTTP/HTTPS æœåŠ¡å™¨èƒ½å¤Ÿåœ¨å…³é—­å‰å®Œæˆå¿…è¦çš„å¼‚æ­¥æ¸…ç†æ“ä½œï¼Œä»è€Œä¼˜é›…åœ°ç®¡ç†èµ„æºå¹¶é¿å…æ½œåœ¨çš„é—®é¢˜ï¼Œå°¤å…¶æ˜¯åœ¨ç”Ÿäº§ç¯å¢ƒä¸‹éå¸¸æœ‰ç”¨ã€‚è¿™ç§æ–¹æ³•è®©å¼€å‘è€…èƒ½å¤Ÿç¼–å†™æ›´åŠ å¥å£®å’Œæ˜“äºç»´æŠ¤çš„æœåŠ¡å™¨ç«¯åº”ç”¨ã€‚</p><h3 id="server-closeallconnections" tabindex="-1"><a class="header-anchor" href="#server-closeallconnections"><span><a href="https://nodejs.org/docs/latest/api/https.html#servercloseallconnections" target="_blank" rel="noopener noreferrer">server.closeAllConnections()</a></span></a></h3><p>Node.js æ˜¯ä¸€ä¸ªåŸºäº Chrome çš„ V8 JavaScript å¼•æ“è¿è¡Œçš„ JavaScript ç¯å¢ƒï¼Œå®ƒä½¿å¾—å¼€å‘è€…å¯ä»¥ä½¿ç”¨ JavaScript æ¥ç¼–å†™æœåŠ¡å™¨ç«¯çš„ä»£ç ã€‚Node.js ä»¥å…¶éé˜»å¡ I/O å’Œäº‹ä»¶é©±åŠ¨çš„ç‰¹æ€§è€Œé—»åï¼Œè¿™è®©å®ƒåœ¨å¤„ç†å¤§é‡å¹¶å‘è¿æ¥æ—¶æ˜¾å¾—å°¤ä¸ºé«˜æ•ˆã€‚</p><h3 id="server-closeallconnections-æ¦‚è¿°" tabindex="-1"><a class="header-anchor" href="#server-closeallconnections-æ¦‚è¿°"><span>server.closeAllConnections() æ¦‚è¿°</span></a></h3><p>åœ¨ Node.js çš„ v21.7.1 ç‰ˆæœ¬ä¸­ï¼Œ<code>server.closeAllConnections()</code> æ˜¯ä¸€ä¸ªæ–°å¢åŠ çš„åŠŸèƒ½ç‚¹ï¼Œå®ƒå±äº HTTPã€HTTPSã€HTTP2 å’Œ Net æ¨¡å—ä¸­æœåŠ¡å™¨å®ä¾‹çš„æ–¹æ³•ã€‚ç®€å•æ¥è¯´ï¼Œè¿™ä¸ªå‡½æ•°çš„ä½œç”¨æ˜¯ç«‹å³å…³é—­æœåŠ¡å™¨ä¸Šçš„æ‰€æœ‰æ´»è·ƒè¿æ¥ã€‚è¿™å¹¶ä¸å½±å“å·²ç»è¢«æ¥å—ç­‰å¾…å¤„ç†çš„è¯·æ±‚ï¼Œä½†ä¼šå…³é—­æ‰€æœ‰å½“å‰æ‰“å¼€çš„å¥—æ¥å­—ï¼ˆsocketsï¼‰è¿æ¥ã€‚</p><h3 id="ä¸ºä»€ä¹ˆéœ€è¦-closeallconnections" tabindex="-1"><a class="header-anchor" href="#ä¸ºä»€ä¹ˆéœ€è¦-closeallconnections"><span>ä¸ºä»€ä¹ˆéœ€è¦ closeAllConnections()ï¼Ÿ</span></a></h3><p>åœ¨æœåŠ¡å™¨è¿ç»´æˆ–è€…ç»´æŠ¤è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½å‡ºç°éœ€è¦ä¼˜é›…å…³é—­æœåŠ¡çš„æƒ…å†µï¼Œæ¯”å¦‚è¿›è¡Œç‰ˆæœ¬å‡çº§ã€ç³»ç»Ÿç»´æŠ¤ç­‰ã€‚åœ¨è¿™äº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¸Œæœ›èƒ½å¤Ÿå…ˆå®Œæˆå¯¹å½“å‰æ­£åœ¨å¤„ç†çš„è¯·æ±‚çš„å“åº”ï¼Œç„¶åå†åœæ­¢æ¥æ”¶æ–°çš„è¯·æ±‚ï¼Œå¹¶å…³é—­æ‰€æœ‰çš„è¿æ¥ã€‚<code>server.closeAllConnections()</code> å°±æ˜¯ä¸ºäº†è§£å†³è¿™ç±»é—®é¢˜è€Œè®¾è®¡çš„ã€‚å®ƒå…è®¸åº”ç”¨ä¼˜é›…åœ°å…³é—­æ‰€æœ‰æ´»è·ƒçš„è¿æ¥ï¼Œå‡å°‘å¯¹ç”¨æˆ·çš„å½±å“ã€‚</p><h3 id="å®é™…åº”ç”¨ç¤ºä¾‹" tabindex="-1"><a class="header-anchor" href="#å®é™…åº”ç”¨ç¤ºä¾‹"><span>å®é™…åº”ç”¨ç¤ºä¾‹</span></a></h3><p>å‡è®¾ä½ æœ‰ä¸€ä¸ªè¿è¡Œç€çš„ Node.js HTTP æœåŠ¡å™¨ï¼Œå®ƒè´Ÿè´£å¤„ç†ç”¨æˆ·çš„è®¢å•è¯·æ±‚ã€‚ç°åœ¨ï¼Œä½ éœ€è¦å¯¹æœåŠ¡å™¨è¿›è¡Œç»´æŠ¤ï¼Œæ›´æ–°ä¸€äº›åŠŸèƒ½æˆ–ä¿®å¤æŸäº›é—®é¢˜ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œä½ å¸Œæœ›ç°æœ‰çš„ç”¨æˆ·è¯·æ±‚èƒ½æ­£å¸¸å®Œæˆï¼ŒåŒæ—¶ä¸å†æ¥å—æ–°çš„è¯·æ±‚ï¼Œå¹¶ä¼˜é›…åœ°å…³é—­æ‰€æœ‰æ´»è·ƒè¿æ¥ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> http</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;http&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// åˆ›å»º HTTP æœåŠ¡å™¨å®ä¾‹</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> server</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> http</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">createServer</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">req</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">res</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">  // å‡è®¾è¿™é‡Œæœ‰ä¸€äº›å¤„ç†ç”¨æˆ·è®¢å•çš„é€»è¾‘</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">  console</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;å¤„ç†ç”¨æˆ·è¯·æ±‚&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">  res</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">end</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;è®¢å•å¤„ç†å®Œæˆ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">server</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">listen</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">3000</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">  console</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;æœåŠ¡å™¨è¿è¡Œåœ¨ http://localhost:3000/&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// å‡å®šåœ¨æŸä¸ªæ—¶é—´ç‚¹ï¼Œä½ éœ€è¦å…³é—­æœåŠ¡å™¨ä¸Šçš„æ‰€æœ‰è¿æ¥</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">setTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">  // ä½¿ç”¨ server.closeAllConnections() æ¥å…³é—­æ‰€æœ‰æ´»è·ƒçš„è¿æ¥</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">  server</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">closeAllConnections</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">  console</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;æ‰€æœ‰æ´»è·ƒçš„è¿æ¥éƒ½è¢«å…³é—­äº†&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}, </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">10000</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// å»¶è¿Ÿ10ç§’é’Ÿæ‰§è¡Œ</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼ŒæœåŠ¡å™¨åˆ›å»ºåå¼€å§‹ç›‘å¬ç«¯å£ <code>3000</code>ï¼Œå¤„ç†è¿›æ¥çš„è¯·æ±‚ã€‚é€šè¿‡è®¾ç½®äº†ä¸€ä¸ªè®¡æ—¶å™¨ï¼Œæ¨¡æ‹Ÿäº†åœ¨æœåŠ¡å™¨è¿è¡Œä¸€æ®µæ—¶é—´åéœ€è¦è¿›è¡Œç»´æŠ¤çš„åœºæ™¯ã€‚å½“è°ƒç”¨ <code>server.closeAllConnections()</code> åï¼ŒæœåŠ¡å™¨å°†å…³é—­æ‰€æœ‰çš„æ´»è·ƒè¿æ¥ï¼Œä½†ä¸ä¼šç«‹åˆ»ä¸­æ–­æ­£åœ¨å¤„ç†ä¸­çš„è¯·æ±‚ï¼Œè¿™ä¸ºæ­£åœ¨å¤„ç†çš„è¯·æ±‚æä¾›äº†å®Œæˆçš„æœºä¼šï¼Œä»è€Œè¾¾åˆ°äº†ä¼˜é›…å…³é—­çš„ç›®çš„ã€‚</p><h3 id="æ€»ç»“-1" tabindex="-1"><a class="header-anchor" href="#æ€»ç»“-1"><span>æ€»ç»“</span></a></h3><p><code>server.closeAllConnections()</code> æ–¹æ³•æä¾›äº†ä¸€ç§ä¼˜é›…å…³é—­ Node.js æœåŠ¡å™¨æ´»è·ƒè¿æ¥çš„æ–¹å¼ï¼Œç‰¹åˆ«é€‚ç”¨äºæœåŠ¡å™¨ç»´æŠ¤å’Œå‡çº§çš„åœºæ™¯ã€‚è¿™ä¸ªæ–¹æ³•ä¿è¯äº†å³ä¾¿åœ¨éœ€è¦å…³é—­æœåŠ¡çš„æƒ…å†µä¸‹ï¼Œä¹Ÿèƒ½å°½é‡å‡å°‘å¯¹æ­£åœ¨è¿›è¡Œçš„æ“ä½œå’Œç”¨æˆ·ä½“éªŒçš„å½±å“ã€‚</p><h3 id="server-closeidleconnections" tabindex="-1"><a class="header-anchor" href="#server-closeidleconnections"><span><a href="https://nodejs.org/docs/latest/api/https.html#servercloseidleconnections" target="_blank" rel="noopener noreferrer">server.closeIdleConnections()</a></span></a></h3><p>ç†è§£ <code>server.closeIdleConnections()</code> æ–¹æ³•ä¹‹å‰ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦äº†è§£ä¸€äº›åŸºæœ¬æ¦‚å¿µã€‚åœ¨ Node.js ä¸­ï¼Œä¸€ä¸ªæœåŠ¡å™¨ï¼ˆå¦‚é€šè¿‡ http æˆ– https æ¨¡å—åˆ›å»ºçš„ï¼‰å¯ä»¥å¤„ç†å¤šä¸ªå®¢æˆ·ç«¯è¿æ¥ã€‚æœ‰æ—¶ï¼Œè¿™äº›è¿æ¥åœ¨å®Œæˆæ•°æ®äº¤æ¢åå¯èƒ½ä»ç„¶ä¿æŒå¼€æ”¾çŠ¶æ€ï¼Œç§°ä¸ºâ€œç©ºé—²è¿æ¥â€ã€‚é•¿æ—¶é—´çš„ç©ºé—²è¿æ¥å¯èƒ½ä¼šå ç”¨æœåŠ¡å™¨èµ„æºï¼Œå½±å“æ€§èƒ½ã€‚</p><h3 id="server-closeidleconnections-1" tabindex="-1"><a class="header-anchor" href="#server-closeidleconnections-1"><span><code>server.closeIdleConnections()</code></span></a></h3><p><code>server.closeIdleConnections()</code> æ˜¯ Node.js v21.7.1 ä¸­å¼•å…¥çš„ä¸€é¡¹ç‰¹æ€§ã€‚æ­¤æ–¹æ³•ä½¿å¾—æœåŠ¡å™¨èƒ½å¤Ÿä¸»åŠ¨å…³é—­é‚£äº›å¤„äºç©ºé—²çŠ¶æ€çš„è¿æ¥ã€‚è€Œæ‰€è°“çš„â€œç©ºé—²â€æŒ‡çš„æ˜¯ï¼Œè¿æ¥å½“å‰æ²¡æœ‰æ´»è·ƒçš„æ•°æ®ä¼ è¾“ã€‚è°ƒç”¨æ­¤æ–¹æ³•å¯ä»¥å¸®åŠ©é‡Šæ”¾æœåŠ¡å™¨èµ„æºï¼Œæé«˜æœåŠ¡è´¨é‡å’Œå®‰å…¨æ€§ã€‚</p><h3 id="å®é™…è¿ç”¨ç¤ºä¾‹" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨ç¤ºä¾‹"><span>å®é™…è¿ç”¨ç¤ºä¾‹</span></a></h3><p>å‡è®¾ä½ æ­£åœ¨è¿è¡Œä¸€ä¸ª HTTPS æœåŠ¡å™¨ï¼Œè¯¥æœåŠ¡å™¨é€šå¸¸å¤„ç†å¤§é‡çŸ­æš‚çš„è¯·æ±‚ï¼Œæ¯”å¦‚ä¸€ä¸ªæä¾›å¤©æ°”ä¿¡æ¯çš„ API æœåŠ¡ã€‚éšç€æ—¶é—´çš„æ¨è¿›ï¼Œä½ å‘ç°æœ‰äº›å®¢æˆ·ç«¯åœ¨è·å–äº†æ‰€éœ€ä¿¡æ¯åï¼Œå¹¶æ²¡æœ‰æ­£ç¡®åœ°å…³é—­è¿æ¥ï¼Œå¯¼è‡´æœåŠ¡å™¨ç»´æŠ¤äº†è®¸å¤šç©ºé—²çš„è¿æ¥ã€‚</p><h4 id="åˆ›å»º-https-æœåŠ¡å™¨-1" tabindex="-1"><a class="header-anchor" href="#åˆ›å»º-https-æœåŠ¡å™¨-1"><span>åˆ›å»º HTTPS æœåŠ¡å™¨ï¼š</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> https</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;https&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> fs</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;fs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// è¯»å–SSLè¯ä¹¦</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> options</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">  key</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">fs</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">readFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;your-server-key.pem&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">  cert</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">fs</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">readFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;your-server-cert.pem&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// åˆ›å»ºHTTPSæœåŠ¡å™¨</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> server</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> https</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">createServer</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">options</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">req</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">res</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">  res</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">writeHead</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">200</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">  res</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">end</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;Hello, world!&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">server</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">listen</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">8000</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">  console</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;HTTPS server running on port 8000&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">});</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ä¸Šè¿°çš„ HTTPS æœåŠ¡å™¨è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œä¸ºäº†é¿å…èµ„æºçš„æµªè´¹å’Œæ½œåœ¨çš„æ€§èƒ½é—®é¢˜ï¼Œä½ å¯ä»¥å®šæœŸè°ƒç”¨ <code>server.closeIdleConnections()</code> æ–¹æ³•æ¥å…³é—­é‚£äº›ç©ºé—²çš„è¿æ¥ã€‚</p><h4 id="å…³é—­ç©ºé—²è¿æ¥" tabindex="-1"><a class="header-anchor" href="#å…³é—­ç©ºé—²è¿æ¥"><span>å…³é—­ç©ºé—²è¿æ¥ï¼š</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// å‡è®¾æ¯30ç§’æ£€æŸ¥å¹¶å…³é—­ç©ºé—²è¿æ¥</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">setInterval</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">  server</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">closeIdleConnections</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">  console</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;Closed idle connections&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}, </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">30000</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ ·ï¼Œå³ä½¿å®¢æˆ·ç«¯æ²¡æœ‰æ­£ç¡®å…³é—­è¿æ¥ï¼ŒæœåŠ¡å™¨ä¹Ÿèƒ½å¤Ÿä¿æŒå¥åº·çš„èµ„æºä½¿ç”¨çŠ¶æ€ï¼Œé¿å…ä¸å¿…è¦çš„èµ„æºå ç”¨ã€‚</p><h3 id="å°ç»“-1" tabindex="-1"><a class="header-anchor" href="#å°ç»“-1"><span>å°ç»“</span></a></h3><p>é€šè¿‡ä½¿ç”¨ <code>server.closeIdleConnections()</code>ï¼ŒNode.js åº”ç”¨èƒ½æ›´æœ‰æ•ˆåœ°ç®¡ç†å…¶ TCP è¿æ¥ï¼Œå°¤å…¶æ˜¯å¯¹äºé‚£äº›é«˜æ€§èƒ½å’Œé«˜å¯ç”¨æ€§è¦æ±‚çš„åº”ç”¨ï¼Œè¿™ä¸ªæ–¹æ³•æä¾›äº†ä¸€ç§è‡ªä¸»ç®¡ç†èµ„æºçš„æ–¹å¼ï¼Œä»è€Œå¢å¼ºäº†åº”ç”¨çš„ç¨³å®šæ€§å’Œæ€§èƒ½ã€‚</p><h3 id="server-headerstimeout" tabindex="-1"><a class="header-anchor" href="#server-headerstimeout"><span><a href="https://nodejs.org/docs/latest/api/https.html#serverheaderstimeout" target="_blank" rel="noopener noreferrer">server.headersTimeout</a></span></a></h3><p><code>server.headersTimeout</code> æ˜¯ Node.js ä¸­ä¸€ä¸ªéå¸¸é‡è¦çš„è®¾ç½®é¡¹ï¼Œå…·ä½“æ¥è¯´ï¼Œå®ƒç”¨äºé…ç½® HTTP æœåŠ¡å™¨çš„å¤´éƒ¨å­—æ®µè§£æè¶…æ—¶æ—¶é—´ã€‚åœ¨è¯¦ç»†è§£é‡Šä¹‹å‰ï¼Œè®©æˆ‘ä»¬å…ˆç®€å•äº†è§£ä¸€ä¸‹ Node.js å’Œ HTTP æœåŠ¡å™¨ã€‚</p><p>Node.js æ˜¯ä¸€ä¸ªåŸºäº Chrome V8 å¼•æ“çš„ JavaScript è¿è¡Œç¯å¢ƒï¼Œå®ƒä½¿å¾—å¼€å‘è€…å¯ä»¥ä½¿ç”¨ JavaScript æ¥ç¼–å†™æœåŠ¡ç«¯ä»£ç ã€‚è¿™æ˜¯éå¸¸æœ‰å¸å¼•åŠ›çš„ï¼Œå› ä¸º JavaScript æœ¬æ¥ä¸»è¦ç”¨äºæµè§ˆå™¨ç«¯ç¼–ç¨‹ï¼ŒNode.js çš„å‡ºç°è®©å¼€å‘è€…å¯ä»¥ä½¿ç”¨åŒä¸€ç§è¯­è¨€åŒæ—¶å¤„ç†å‰ç«¯å’Œåç«¯ä¸šåŠ¡ï¼Œæå¤§åœ°æé«˜äº†å¼€å‘æ•ˆç‡ã€‚</p><p>HTTP æœåŠ¡å™¨æ˜¯ç½‘ç»œä¸­å®¢æˆ·ç«¯ï¼ˆä¾‹å¦‚ï¼Œä½ çš„æµè§ˆå™¨ï¼‰å’ŒæœåŠ¡å™¨ï¼ˆæ‰˜ç®¡ç½‘é¡µæˆ–åº”ç”¨çš„è®¡ç®—æœºç³»ç»Ÿï¼‰ä¹‹é—´é€šä¿¡çš„ä¸­ä»‹å¹³å°ã€‚å½“ä½ åœ¨æµè§ˆå™¨åœ°å€æ è¾“å…¥ä¸€ä¸ªç½‘å€æ—¶ï¼Œæµè§ˆå™¨ä¼šå‘ç›¸åº”çš„æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼ŒæœåŠ¡å™¨å¤„ç†å®Œè¿™äº›è¯·æ±‚åï¼Œä¼šè¿”å›æ•°æ®ç»™æµè§ˆå™¨ï¼Œç„¶åæµè§ˆå™¨å±•ç¤ºè¿™äº›æ•°æ®ç»™ç”¨æˆ·çœ‹ã€‚</p><h3 id="server-headerstimeout-1" tabindex="-1"><a class="header-anchor" href="#server-headerstimeout-1"><span><code>server.headersTimeout</code></span></a></h3><p>åœ¨ Node.js v21.7.1 ä¸­ï¼ŒHTTP/HTTPS æœåŠ¡å™¨å¯¹è±¡ï¼ˆé€šè¿‡è°ƒç”¨ <code>http.createServer()</code> æˆ– <code>https.createServer()</code> åˆ›å»ºï¼‰æœ‰ä¸€ä¸ªå±æ€§å«åš <code>headersTimeout</code>ã€‚è¿™ä¸ªå±æ€§ç”¨äºè®¾ç½®æœåŠ¡å™¨ç­‰å¾…æ¥æ”¶æ‰€æœ‰è¯·æ±‚å¤´çš„æœ€é•¿æ—¶é—´ã€‚å¦‚æœåœ¨æ­¤æ—¶é—´å†…æœåŠ¡å™¨æ²¡æœ‰æ¥æ”¶åˆ°å…¨éƒ¨è¯·æ±‚å¤´æ•°æ®ï¼Œåˆ™è¿æ¥å°†è¢«ç»ˆæ­¢ï¼Œå¹¶è¿”å›ä¸€ä¸ªå“åº”ï¼Œå‘ŠçŸ¥å®¢æˆ·ç«¯è¯·æ±‚å¤±è´¥ã€‚</p><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>server.headersTimeout</code> çš„å€¼è®¾ç½®ä¸º 60 ç§’ï¼ˆ60000 æ¯«ç§’ï¼‰ã€‚è¿™æ„å‘³ç€ï¼Œå¦‚æœæœåŠ¡å™¨åœ¨ 60 ç§’å†…æ²¡æœ‰æ¥æ”¶åˆ°å®¢æˆ·ç«¯å‘é€çš„æ‰€æœ‰è¯·æ±‚å¤´ä¿¡æ¯ï¼Œåˆ™è¯¥è¿æ¥ä¼šè‡ªåŠ¨å…³é—­ï¼Œé˜²æ­¢æ½œåœ¨çš„æ…¢é€Ÿæ”»å‡»æˆ–æ‹–å»¶æ”»å‡»ã€‚</p><h3 id="å®é™…è¿ç”¨ä¾‹å­-2" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨ä¾‹å­-2"><span>å®é™…è¿ç”¨ä¾‹å­</span></a></h3><ol><li><p><strong>æé«˜å®‰å…¨æ€§</strong>ï¼šæŸäº›æ¶æ„ç”¨æˆ·å¯èƒ½æ•…æ„æ…¢æ…¢å‘é€è¯·æ±‚å¤´æ•°æ®ï¼Œè¯•å›¾æ¶ˆè€—æœåŠ¡å™¨èµ„æºã€‚é€šè¿‡é€‚å½“è®¾ç½® <code>server.headersTimeout</code>ï¼ŒæœåŠ¡å™¨å¯ä»¥é™åˆ¶ç­‰å¾…æ—¶é—´ï¼Œä»è€Œé¿å…è¿™ç§æ”»å‡»ã€‚</p></li><li><p><strong>ä¼˜åŒ–æ€§èƒ½</strong>ï¼šåœ¨é«˜å¹¶å‘çš„åº”ç”¨åœºæ™¯ä¸‹ï¼ŒæœåŠ¡å™¨èµ„æºæ˜¯ååˆ†å®è´µçš„ã€‚é€šè¿‡å‡å°‘ç­‰å¾…ä¸å®Œæ•´è¯·æ±‚çš„æ—¶é—´ï¼Œå¯ä»¥æ›´å¿«åœ°é‡Šæ”¾èµ„æºï¼Œå¤„ç†æ›´å¤šçš„åˆæ³•è¯·æ±‚ã€‚</p></li><li><p><strong>å‡å°‘æ— ç”¨è¿æ¥</strong>ï¼šæœ‰æ—¶å€™ï¼Œå› ä¸ºç½‘ç»œé—®é¢˜æˆ–å®¢æˆ·ç«¯é”™è¯¯ï¼Œè¯·æ±‚å¯èƒ½ä¼šä¸­æ–­æˆ–å‘é€å¾—å¾ˆæ…¢ã€‚è®¾ç½® <code>server.headersTimeout</code> å¯ä»¥å¸®åŠ©å¿«é€Ÿè¯†åˆ«å¹¶æ–­å¼€è¿™æ ·çš„è¿æ¥ï¼Œä¿æŒæœåŠ¡å™¨çš„å¥åº·çŠ¶æ€ã€‚</p></li></ol><h3 id="å¦‚ä½•è®¾ç½®-server-headerstimeout" tabindex="-1"><a class="header-anchor" href="#å¦‚ä½•è®¾ç½®-server-headerstimeout"><span>å¦‚ä½•è®¾ç½® <code>server.headersTimeout</code></span></a></h3><p>è®¾å®š <code>server.headersTimeout</code> çš„æ–¹æ³•å¾ˆç®€å•ã€‚ä»¥ä¸‹é¢åˆ›å»ºä¸€ä¸ªç®€å•çš„ HTTP æœåŠ¡å™¨ä¸ºä¾‹ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> http</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;http&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// åˆ›å»º HTTP æœåŠ¡å™¨</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> server</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> http</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">createServer</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">req</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">res</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">  res</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">writeHead</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">200</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, { </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;Content-Type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;text/plain&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">  res</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">end</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;Hello World</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// è®¾ç½® headersTimeout ä¸º 30 ç§’</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">server</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">headersTimeout</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 30000</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// æ—¶é—´å•ä½ä¸ºæ¯«ç§’</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// ç›‘å¬ 3000 ç«¯å£</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">server</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">listen</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">3000</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">  console</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;Server running at http://127.0.0.1:3000/&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">});</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡ç›´æ¥è®¾ç½® <code>server.headersTimeout = 30000;</code> æ¥ä¿®æ”¹é»˜è®¤çš„è¶…æ—¶æ—¶é—´ã€‚ç°åœ¨ï¼Œå¦‚æœæœåŠ¡å™¨åœ¨ 30 ç§’å†…æ²¡æœ‰å®Œå…¨æ¥æ”¶åˆ°è¯·æ±‚å¤´ï¼Œå°±ä¼šè‡ªåŠ¨å…³é—­è¿æ¥ã€‚</p><p>æ€»ç»“æ¥è¯´ï¼Œ<code>server.headersTimeout</code> æ˜¯ä¸€ä¸ªéå¸¸å®ç”¨çš„é…ç½®é¡¹ï¼Œå®ƒå¯ä»¥å¸®åŠ©å¼€å‘è€…æé«˜æœåŠ¡å™¨çš„å®‰å…¨æ€§ã€ä¼˜åŒ–æ€§èƒ½ï¼Œå¹¶å‡å°‘æ— ç”¨çš„ç½‘ç»œè¿æ¥ã€‚ç†è§£å¹¶åˆç†åœ°è®¾ç½®è¿™ä¸ªå‚æ•°ï¼Œå¯¹äºæ„å»ºé«˜æ•ˆå’Œå¯é çš„ web åº”ç”¨è‡³å…³é‡è¦ã€‚</p><h3 id="server-listen" tabindex="-1"><a class="header-anchor" href="#server-listen"><span><a href="https://nodejs.org/docs/latest/api/https.html#serverlisten" target="_blank" rel="noopener noreferrer">server.listen()</a></span></a></h3><p>Node.js æ˜¯ä¸€ä¸ªéå¸¸å¼ºå¤§çš„ JavaScript è¿è¡Œç¯å¢ƒï¼Œå®ƒå…è®¸ä½ åœ¨æœåŠ¡å™¨ç«¯è¿è¡Œ JavaScript ä»£ç ã€‚è¿™æ„å‘³ç€ä½ å¯ä»¥ç”¨ JavaScript æ¥å®Œæˆå¾ˆå¤šåå°ä»»åŠ¡ï¼Œæ¯”å¦‚ä¸æ•°æ®åº“äº¤äº’ã€å¤„ç†æ–‡ä»¶ã€æˆ–è€…åˆ›å»ºè‡ªå·±çš„ç½‘ç«™å’Œ API ç­‰ã€‚</p><p>åœ¨ Node.js ä¸­ï¼Œæœ‰ä¸€ä¸ªéå¸¸æ ¸å¿ƒçš„æ¨¡å—å«åš<code>http</code>ï¼Œå®ƒå…è®¸ Node.js å¯ä»¥å¤„ç† HTTP è¯·æ±‚å’Œå“åº”ã€‚å½“ä½ æƒ³è¦åˆ›å»ºä¸€ä¸ª Web æœåŠ¡å™¨æ—¶ï¼Œè¿™ä¸ªæ¨¡å—å°±æ˜¾å¾—å°¤ä¸ºé‡è¦äº†ã€‚<code>https</code>æ˜¯<code>http</code>çš„å®‰å…¨ç‰ˆæœ¬ï¼Œå³åœ¨ HTTP ä¸ŠåŠ å…¥ SSL/TLS å±‚ï¼Œç”¨äºåŠ å¯†æ•°æ®ï¼Œä¿éšœæ•°æ®ä¼ è¾“çš„å®‰å…¨æ€§ã€‚</p><h3 id="server-listen-1" tabindex="-1"><a class="header-anchor" href="#server-listen-1"><span>server.listen()</span></a></h3><p><code>server.listen()</code>æ˜¯<code>http</code>æ¨¡å—ï¼ˆæˆ–<code>https</code>æ¨¡å—ï¼Œå¦‚æœä½ éœ€è¦å®‰å…¨è¿æ¥ï¼‰æä¾›çš„ä¸€ä¸ªæ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•çš„ä½œç”¨æ˜¯è®©æœåŠ¡å™¨å¼€å§‹ç›‘å¬å®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚ç®€è€Œè¨€ä¹‹ï¼Œè¿™ä¸ªå‡½æ•°è®©ä½ çš„æœåŠ¡å™¨å¯åŠ¨å¹¶å‡†å¤‡æ¥æ”¶æ¥è‡ªå®¢æˆ·ç«¯ï¼ˆé€šå¸¸æ˜¯æµè§ˆå™¨ï¼‰çš„è¿æ¥è¯·æ±‚ã€‚</p><h4 id="å‚æ•°è¯´æ˜" tabindex="-1"><a class="header-anchor" href="#å‚æ•°è¯´æ˜"><span>å‚æ•°è¯´æ˜</span></a></h4><p><code>server.listen()</code>æ–¹æ³•å¯ä»¥æ¥å—å‡ ç§ä¸åŒå½¢å¼çš„å‚æ•°ï¼š</p><ol><li><strong>ç«¯å£å·</strong>ï¼šæŒ‡å®šæœåŠ¡å™¨ç›‘å¬çš„ç«¯å£å·ã€‚ä¾‹å¦‚ï¼Œ<code>server.listen(8080)</code>ä¼šè®©æœåŠ¡å™¨ç›‘å¬ 8080 ç«¯å£ã€‚</li><li><strong>ä¸»æœºå</strong>ï¼šå¯é€‰å‚æ•°ï¼Œä½ å¯ä»¥æŒ‡å®šæœåŠ¡å™¨ç›‘å¬çš„ä¸»æœºåã€‚</li><li><strong>å›è°ƒå‡½æ•°</strong>ï¼šå½“æœåŠ¡å™¨å¼€å§‹ç›‘å¬æ—¶ï¼Œä¼šè°ƒç”¨æ­¤å‡½æ•°ã€‚å¯ä»¥ç”¨å®ƒæ¥ç¡®è®¤æœåŠ¡å™¨å·²ç»å¯åŠ¨ã€‚</li></ol><h4 id="å®é™…åº”ç”¨ä¾‹å­-1" tabindex="-1"><a class="header-anchor" href="#å®é™…åº”ç”¨ä¾‹å­-1"><span>å®é™…åº”ç”¨ä¾‹å­</span></a></h4><h5 id="åˆ›å»ºåŸºæœ¬çš„-web-æœåŠ¡å™¨" tabindex="-1"><a class="header-anchor" href="#åˆ›å»ºåŸºæœ¬çš„-web-æœåŠ¡å™¨"><span>åˆ›å»ºåŸºæœ¬çš„ Web æœåŠ¡å™¨</span></a></h5><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> http</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;http&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// åˆ›å»ºä¸€ä¸ªHTTPæœåŠ¡å™¨</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> server</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> http</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">createServer</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">req</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">res</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">  // å‘é€HTTPå¤´éƒ¨</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">  // HTTPçŠ¶æ€å€¼: 200 : OK</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">  // å†…å®¹ç±»å‹: text/plain</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">  res</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">writeHead</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">200</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, { </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;Content-Type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;text/plain&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">  // å‘é€å“åº”æ•°æ® &quot;Hello World&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">  res</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">end</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;Hello World</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// æœåŠ¡å™¨å¼€å§‹ç›‘å¬ç«¯å£ä¸º8080</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">server</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">listen</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">8080</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">  console</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;Server running at http://127.0.0.1:8080/&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">});</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªç®€å•çš„ Web æœåŠ¡å™¨ï¼Œå®ƒç›‘å¬ 8080 ç«¯å£ã€‚å½“ä½ é€šè¿‡æµè§ˆå™¨è®¿é—®<code>http://127.0.0.1:8080/</code>æ—¶ï¼ŒæœåŠ¡å™¨ä¼šå“åº”&quot;Hello World&quot;æ¶ˆæ¯ã€‚</p><p>è¿™ä¸ªä¾‹å­ä½“ç°äº†<code>server.listen()</code>æ–¹æ³•çš„åŸºç¡€ç”¨æ³•ã€‚é€šè¿‡ä¿®æ”¹å›è°ƒå‡½æ•°å†…çš„é€»è¾‘ï¼Œä½ å¯ä»¥å¤„ç†å„ç§ä¸åŒçš„ HTTP è¯·æ±‚ï¼Œæ¯”å¦‚ GETï¼ŒPOST è¯·æ±‚ï¼Œæˆ–è€…æ ¹æ®è¯·æ±‚çš„ URL è¿”å›ä¸åŒçš„å†…å®¹ï¼Œä»è€Œæ„å»ºæ›´å¤æ‚çš„ Web åº”ç”¨ç¨‹åºã€‚</p><p>æ€»è€Œè¨€ä¹‹ï¼Œ<code>server.listen()</code>æ˜¯ä½¿ Node.js æœåŠ¡å™¨èƒ½å¤Ÿå¼€å§‹æ¥å—è¯·æ±‚çš„å…³é”®æ­¥éª¤ï¼Œå‡ ä¹æ‰€æœ‰çš„ Node.js Web åº”ç”¨éƒ½ä¼šç”¨åˆ°å®ƒã€‚</p><h3 id="server-maxheaderscount" tabindex="-1"><a class="header-anchor" href="#server-maxheaderscount"><span><a href="https://nodejs.org/docs/latest/api/https.html#servermaxheaderscount" target="_blank" rel="noopener noreferrer">server.maxHeadersCount</a></span></a></h3><p>Node.js æ˜¯ä¸€ä¸ªå¼ºå¤§çš„ JavaScript è¿è¡Œç¯å¢ƒï¼Œå®ƒå…è®¸ä½ åœ¨æœåŠ¡å™¨ç«¯è¿è¡Œ JavaScript ä»£ç ã€‚åœ¨ Web å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦ä½¿ç”¨ HTTP(S)æœåŠ¡å™¨æ¥å¤„ç†å®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œå¤„ç† HTTP å¤´éƒ¨ï¼ˆHeadersï¼‰æ˜¯éå¸¸é‡è¦çš„ä¸€éƒ¨åˆ†ã€‚<code>server.maxHeadersCount</code>æ­£æ˜¯ä¸ HTTP å¤´éƒ¨ç›¸å…³çš„ä¸€ä¸ªé…ç½®é¡¹ã€‚</p><h3 id="ä»€ä¹ˆæ˜¯-server-maxheaderscount" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯-server-maxheaderscount"><span>ä»€ä¹ˆæ˜¯ <code>server.maxHeadersCount</code>ï¼Ÿ</span></a></h3><p>åœ¨ Node.js çš„ HTTP(S)æ¨¡å—ä¸­ï¼Œ<code>server.maxHeadersCount</code>å±æ€§ç”¨äºé™åˆ¶å¯è¢«æ¥æ”¶çš„æœ€å¤§ HTTP å¤´éƒ¨æ•°é‡ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œè¿™ä¸ªå€¼è¢«è®¾ç½®ä¸º<code>2000</code>ã€‚è¿™æ„å‘³ç€å¦‚æœä¸€ä¸ªè¯·æ±‚æˆ–å“åº”åŒ…å«è¶…è¿‡ 2000 ä¸ªå¤´éƒ¨ï¼Œåˆ™è¯¥è¯·æ±‚æˆ–å“åº”å¯èƒ½ä¼šè¢«è§†ä¸ºæ¶æ„çš„ï¼Œå¹¶ç”±äºå®‰å…¨åŸå› è€Œè¢«æ‹’ç»ã€‚</p><h3 id="ä¸ºä»€ä¹ˆéœ€è¦é™åˆ¶å¤´éƒ¨æ•°é‡" tabindex="-1"><a class="header-anchor" href="#ä¸ºä»€ä¹ˆéœ€è¦é™åˆ¶å¤´éƒ¨æ•°é‡"><span>ä¸ºä»€ä¹ˆéœ€è¦é™åˆ¶å¤´éƒ¨æ•°é‡ï¼Ÿ</span></a></h3><p>é™åˆ¶ HTTP å¤´éƒ¨çš„æ•°é‡æ˜¯å‡ºäºå®‰å…¨è€ƒè™‘ã€‚æ”»å‡»è€…å¯èƒ½ä¼šå°è¯•é€šè¿‡å‘é€å¤§é‡çš„å¤´éƒ¨æ¥è¿›è¡Œæ‹’ç»æœåŠ¡ï¼ˆDoSï¼‰æ”»å‡»ï¼Œæ„å›¾è€—å°½æœåŠ¡å™¨èµ„æºã€‚é€šè¿‡è®¾ç½®åˆç†çš„å¤´éƒ¨æ•°é‡é™åˆ¶ï¼Œå¯ä»¥å¸®åŠ©ä¿æŠ¤æœåŠ¡å™¨ä¸å—æ­¤ç±»æ”»å‡»çš„å½±å“ã€‚</p><h3 id="å¦‚ä½•ä½¿ç”¨-server-maxheaderscount" tabindex="-1"><a class="header-anchor" href="#å¦‚ä½•ä½¿ç”¨-server-maxheaderscount"><span>å¦‚ä½•ä½¿ç”¨ <code>server.maxHeadersCount</code>ï¼Ÿ</span></a></h3><p>å‡è®¾ä½ æ­£åœ¨åˆ›å»ºä¸€ä¸ª HTTPS æœåŠ¡å™¨ï¼Œå¹¶å¸Œæœ›è°ƒæ•´æœ€å¤§å¤´éƒ¨æ•°é‡çš„é™åˆ¶ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> https</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;https&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> fs</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;fs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// è¯»å–SSLè¯ä¹¦</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> options</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">  key</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">fs</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">readFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;key.pem&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">  cert</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">fs</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">readFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;cert.pem&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// åˆ›å»ºHTTPSæœåŠ¡å™¨</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> server</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> https</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">createServer</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">options</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">req</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">res</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">  res</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">writeHead</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">200</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">  res</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">end</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;hello world</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// è®¾ç½®æœ€å¤§å¤´éƒ¨æ•°é‡ä¸º1000</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">server</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">maxHeadersCount</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 1000</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// ç›‘å¬3000ç«¯å£</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">server</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">listen</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">3000</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">  console</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;Server is running on https://localhost:3000&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">});</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆå¯¼å…¥äº†<code>https</code>å’Œ<code>fs</code>æ¨¡å—ï¼Œç„¶åé€šè¿‡<code>fs</code>æ¨¡å—è¯»å–äº† SSL è¯ä¹¦ï¼ˆç”¨äº HTTPSï¼‰ã€‚éšåï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ª HTTPS æœåŠ¡å™¨ï¼Œå¹¶åœ¨åˆ›å»ºæ—¶ä¼ é€’äº† SSL è¯ä¹¦ç›¸å…³çš„é€‰é¡¹ã€‚æœåŠ¡å™¨åœ¨æ”¶åˆ°è¯·æ±‚æ—¶ï¼Œä¼šå‘å®¢æˆ·ç«¯è¿”å›&quot;hello world&quot;ã€‚</p><p>é‡ç‚¹æ¥äº†ï¼šé€šè¿‡<code>server.maxHeadersCount = 1000;</code>è¿™è¡Œä»£ç ï¼Œæˆ‘ä»¬å°†æ­¤æœåŠ¡å™¨çš„æœ€å¤§å¤´éƒ¨æ•°é‡é™åˆ¶è®¾ç½®ä¸ºäº†<code>1000</code>ã€‚è¿™æ„å‘³ç€ï¼Œå¦‚æœä¸€ä¸ªè¯·æ±‚æˆ–å“åº”åŒ…å«è¶…è¿‡ 1000 ä¸ªå¤´éƒ¨ï¼Œé‚£ä¹ˆå®ƒå°†è¢«æœåŠ¡å™¨æ‹’ç»ã€‚</p><h3 id="å®é™…è¿ç”¨" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨"><span>å®é™…è¿ç”¨</span></a></h3><ul><li><p><strong>API æœåŠ¡å™¨</strong>ï¼šå¦‚æœä½ æ­£åœ¨æ„å»ºä¸€ä¸ªæä¾› RESTful æœåŠ¡çš„ API æœåŠ¡å™¨ï¼Œå¯èƒ½éœ€è¦æ¥æ”¶æ¥è‡ªå®¢æˆ·ç«¯çš„å¤šä¸ªè¯·æ±‚å¤´ï¼Œæ¯”å¦‚è®¤è¯ä»¤ç‰Œï¼ˆAuthorizationï¼‰ã€å†…å®¹ç±»å‹ï¼ˆContent-Typeï¼‰ç­‰ã€‚é€šè¿‡è°ƒæ•´<code>maxHeadersCount</code>ï¼Œä½ å¯ä»¥æ ¹æ®å®é™…ä¸šåŠ¡éœ€æ±‚å’Œå®‰å…¨æ€§è¦æ±‚çµæ´»åœ°è®¾ç½®å¤´éƒ¨æ•°é‡é™åˆ¶ã€‚</p></li><li><p><strong>ä»£ç†æœåŠ¡å™¨</strong>ï¼šåœ¨æ„å»ºä»£ç†æœåŠ¡å™¨æ—¶ï¼Œå¯èƒ½éœ€è¦è½¬å‘å®¢æˆ·ç«¯çš„è¯·æ±‚åˆ°å…¶ä»–æœåŠ¡å™¨ã€‚åœ¨è¿™ç§åœºæ™¯ä¸‹ï¼Œé™åˆ¶å¤´éƒ¨æ•°é‡åŒæ ·é‡è¦ï¼Œä»¥é¿å…è½¬å‘æ½œåœ¨çš„æ¶æ„è¯·æ±‚ã€‚</p></li><li><p><strong>Web åº”ç”¨</strong>ï¼šå¯¹äºä»»ä½•åŸºäº Web çš„åº”ç”¨ç¨‹åºï¼Œåˆç†åœ°ç®¡ç†å’Œé™åˆ¶è¯·æ±‚/å“åº”ä¸­çš„å¤´éƒ¨æ•°é‡èƒ½å¤Ÿå¢åŠ åº”ç”¨çš„å®‰å…¨æ€§å’Œç¨³å®šæ€§ã€‚</p></li></ul><p>é€šè¿‡è°ƒæ•´<code>server.maxHeadersCount</code>ï¼Œå¼€å‘è€…å¯ä»¥åœ¨ç¡®ä¿æ€§èƒ½å’Œå®‰å…¨æ€§çš„åŒæ—¶ï¼Œçµæ´»åº”å¯¹å„ç§ç½‘ç»œé€šä¿¡åœºæ™¯ã€‚</p><h3 id="server-requesttimeout" tabindex="-1"><a class="header-anchor" href="#server-requesttimeout"><span><a href="https://nodejs.org/docs/latest/api/https.html#serverrequesttimeout" target="_blank" rel="noopener noreferrer">server.requestTimeout</a></span></a></h3><p>Node.js æ˜¯ä¸€ä¸ªéå¸¸æµè¡Œçš„ JavaScript è¿è¡Œç¯å¢ƒï¼Œå®ƒè®©å¼€å‘è€…èƒ½å¤Ÿä½¿ç”¨ JavaScript æ¥ç¼–å†™æœåŠ¡å™¨ç«¯ä»£ç ã€‚å…¶ä¸­ï¼Œ<code>http</code> å’Œ <code>https</code> æ¨¡å—ç”¨äºåˆ›å»º HTTP å’Œ HTTPS æœåŠ¡å™¨ã€‚åœ¨è¿™äº›æ¨¡å—ä¸­æœ‰å¾ˆå¤šè®¾ç½®å’Œé€‰é¡¹ï¼Œè€Œ <code>server.requestTimeout</code> æ˜¯å…¶ä¸­ä¹‹ä¸€ã€‚</p><h3 id="server-requesttimeout-1" tabindex="-1"><a class="header-anchor" href="#server-requesttimeout-1"><span>server.requestTimeout</span></a></h3><p>åœ¨ Node.js v21.7.1 ä¸­ï¼Œ<code>server.requestTimeout</code> æ˜¯ä¸€ä¸ªå±æ€§ï¼Œä½ å¯ä»¥åœ¨åˆ›å»ºçš„ HTTP æˆ– HTTPS æœåŠ¡å™¨ä¸Šè®¾ç½®å®ƒã€‚è¿™ä¸ªå±æ€§çš„ä½œç”¨æ˜¯å®šä¹‰æœåŠ¡å™¨åœ¨å…³é—­è¯·æ±‚ä¹‹å‰ç­‰å¾…è¯·æ±‚å®Œæˆçš„æœ€å¤§æ—¶é—´ï¼ˆä»¥æ¯«ç§’ä¸ºå•ä½ï¼‰ã€‚æ¢å¥è¯è¯´ï¼Œå®ƒè®¾ç½®äº†ä»æ¥æ”¶åˆ°å®Œæ•´çš„è¯·æ±‚å¤´å¼€å§‹ï¼Œç›´åˆ°æœåŠ¡å™¨è®¤ä¸ºè¯·æ±‚ä½“å·²ç»å®Œå…¨æ¥æ”¶å¹¶ä¸”å¯ä»¥å¤„ç†çš„æ—¶é—´é™åˆ¶ã€‚å¦‚æœè¿™ä¸ªæ—¶é—´è¿‡äº†ï¼Œä½†è¯·æ±‚è¿˜æ²¡æœ‰ç»“æŸï¼ˆæ¯”å¦‚å®¢æˆ·ç«¯å‘é€æ•°æ®å¾ˆæ…¢æˆ–åœæ­¢å‘é€ï¼‰ï¼ŒæœåŠ¡å™¨å°±ä¼šè‡ªåŠ¨ç»ˆæ­¢è¯¥è¯·æ±‚ã€‚</p><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œè¿™ä¸ªå€¼å¯èƒ½æ˜¯ä¸è®¾ç½®çš„ï¼Œæ„å‘³ç€æœåŠ¡å™¨ä¼šæ— é™æœŸç­‰å¾…è¯·æ±‚å®Œæˆã€‚ç„¶è€Œï¼Œåœ¨å®é™…åº”ç”¨ä¸­ï¼Œé•¿æ—¶é—´ç­‰å¾…å¯èƒ½å¯¼è‡´æœåŠ¡å™¨èµ„æºè¢«ä¸å¿…è¦åœ°å ç”¨ï¼Œå½±å“æ€§èƒ½ã€‚å› æ­¤ï¼Œé€‚å½“é…ç½® <code>requestTimeout</code> å¯ä»¥å¸®åŠ©æé«˜æœåŠ¡å™¨çš„å¥å£¯æ€§å’Œååº”é€Ÿåº¦ã€‚</p><h3 id="å®é™…è¿ç”¨ç¤ºä¾‹-1" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨ç¤ºä¾‹-1"><span>å®é™…è¿ç”¨ç¤ºä¾‹</span></a></h3><h4 id="ç¤ºä¾‹-1-åˆ›å»ºä¸€ä¸ªç®€å•çš„æœåŠ¡å™¨" tabindex="-1"><a class="header-anchor" href="#ç¤ºä¾‹-1-åˆ›å»ºä¸€ä¸ªç®€å•çš„æœåŠ¡å™¨"><span>ç¤ºä¾‹ 1ï¼šåˆ›å»ºä¸€ä¸ªç®€å•çš„æœåŠ¡å™¨</span></a></h4><p>å‡è®¾ä½ æ­£åœ¨åˆ›å»ºä¸€ä¸ªæœåŠ¡ï¼Œéœ€è¦å¤„ç†ç”¨æˆ·ä¸Šä¼ çš„å¤§æ–‡ä»¶ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> http</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;http&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> server</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> http</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">createServer</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">req</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">res</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">  // å¤„ç†è¯·æ±‚</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">  res</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">end</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;æ–‡ä»¶ä¸Šä¼ æˆåŠŸ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// è®¾ç½®è¯·æ±‚è¶…æ—¶ä¸º 1 åˆ†é’Ÿ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">server</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">requestTimeout</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 60000</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">server</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">listen</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">3000</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">  console</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;æœåŠ¡å™¨è¿è¡Œåœ¨ http://localhost:3000/&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">});</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬è®¾ç½®äº† <code>requestTimeout</code> ä¸º 60,000 æ¯«ç§’ï¼ˆå³ 1 åˆ†é’Ÿï¼‰ã€‚è¿™æ„å‘³ç€ï¼Œå¦‚æœä»æ¥æ”¶åˆ°è¯·æ±‚å¼€å§‹ï¼Œ1 åˆ†é’Ÿå†…è¯·æ±‚æ²¡æœ‰å®Œæˆï¼ˆä¾‹å¦‚ï¼Œå®¢æˆ·ç«¯ä¸Šä¼ æ–‡ä»¶å¾ˆæ…¢ï¼‰ï¼ŒæœåŠ¡å™¨å°†è‡ªåŠ¨ç»“æŸè¯¥è¯·æ±‚ï¼Œå¹¶è¿”å›ä¸€ä¸ªè¶…æ—¶çš„é”™è¯¯ç»™å®¢æˆ·ç«¯ã€‚</p><h4 id="ç¤ºä¾‹-2-å¢å¼ºç”¨æˆ·ä½“éªŒ" tabindex="-1"><a class="header-anchor" href="#ç¤ºä¾‹-2-å¢å¼ºç”¨æˆ·ä½“éªŒ"><span>ç¤ºä¾‹ 2ï¼šå¢å¼ºç”¨æˆ·ä½“éªŒ</span></a></h4><p>æƒ³è±¡ä¸€ä¸‹ä½ åœ¨ä¸ºä¸€ä¸ªåœ¨çº¿æ¸¸æˆå¼€å‘åç«¯æœåŠ¡ï¼Œç©å®¶é€šè¿‡ HTTP è¯·æ±‚æäº¤ä»–ä»¬çš„æ¸¸æˆåˆ†æ•°ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> https</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;https&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> fs</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;fs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> options</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">  key</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">fs</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">readFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;key.pem&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">  cert</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">fs</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">readFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;cert.pem&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> server</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> https</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">createServer</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">options</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">req</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">res</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">req</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">url</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> ===</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;/submit-score&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> &amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> req</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">method</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> ===</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;POST&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    let</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> body</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    req</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;data&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">chunk</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">      body</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> +=</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> chunk</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">toString</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    req</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;end&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">      // å‡è®¾æˆ‘ä»¬åœ¨è¿™é‡Œå¤„ç†å’Œä¿å­˜åˆ†æ•°</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">      console</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">body</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">      res</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">end</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;åˆ†æ•°æäº¤æˆåŠŸ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    res</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">writeHead</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">404</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    res</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">end</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// è®¾ç½®è¯·æ±‚è¶…æ—¶ä¸º 10 ç§’</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">server</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">requestTimeout</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 10000</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">  // The document is from Ying Chao Tea.Do not use for commercial purposes.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">server</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">listen</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">3001</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">  console</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;æœåŠ¡å™¨è¿è¡Œåœ¨ https://localhost:3001/&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">});</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬è®¾ç½®äº† <code>requestTimeout</code> ä¸º 10,000 æ¯«ç§’ï¼ˆå³ 10 ç§’ï¼‰ã€‚è¿™æ ·åšçš„ç›®çš„æ˜¯ç¡®ä¿æœåŠ¡å™¨èƒ½å¤ŸåŠæ—¶å¤„ç†è¯·æ±‚ï¼Œé¿å…å› ä¸ºæŸäº›è¯·æ±‚å¼‚å¸¸è€—æ—¶è€Œæ‹–å»¶å¯¹å…¶ä»–ç©å®¶è¯·æ±‚çš„å¤„ç†ã€‚è¿™æ ·æ—¢ä¿è¯äº†æœåŠ¡å™¨çš„é«˜æ•ˆè¿è¡Œï¼Œä¹Ÿä¼˜åŒ–äº†ç”¨æˆ·çš„æ¸¸æˆä½“éªŒã€‚</p><p>æ€»ä¹‹ï¼Œåˆç†åœ°è®¾ç½® <code>server.requestTimeout</code> å¯¹äºç®¡ç†æœåŠ¡å™¨èµ„æºã€é˜²æ­¢æ½œåœ¨çš„ DoS æ”»å‡»ï¼ˆé€šè¿‡åˆ¶é€ é•¿æ—¶é—´çš„è¿æ¥æ¥å°è¯•è€—å°½æœåŠ¡å™¨èµ„æºï¼‰å’Œæä¾›æ›´å¥½çš„ç”¨æˆ·ä½“éªŒéƒ½éå¸¸é‡è¦ã€‚</p><h3 id="server-settimeout-msecs-callback" tabindex="-1"><a class="header-anchor" href="#server-settimeout-msecs-callback"><span><a href="https://nodejs.org/docs/latest/api/https.html#serversettimeoutmsecs-callback" target="_blank" rel="noopener noreferrer">server.setTimeout([msecs][, callback])</a></span></a></h3><p>Node.js ä¸­çš„ <code>server.setTimeout([msecs][, callback])</code> æ˜¯ä¸€ä¸ªæ–¹æ³•ï¼Œç”¨äºè®¾ç½®æœåŠ¡å™¨çš„è¶…æ—¶æ—¶é—´ã€‚è¿™æ„å‘³ç€ï¼Œå½“æœåŠ¡å™¨ä¸å®¢æˆ·ç«¯å»ºç«‹è¿æ¥åï¼Œå¦‚æœåœ¨æŒ‡å®šçš„æ—¶é—´å†…æ²¡æœ‰æ¥æ”¶åˆ°ä»»ä½•æ•°æ®ï¼Œé‚£ä¹ˆæœåŠ¡å™¨å°†è‡ªåŠ¨ç»“æŸè¯¥è¿æ¥ã€‚è¿™ä¸ªæœºåˆ¶å¯¹äºç®¡ç†èµ„æºå’Œé˜²æ­¢æ¶æ„è¿æ¥éå¸¸æœ‰ç”¨ã€‚</p><h3 id="å‚æ•°è§£é‡Š" tabindex="-1"><a class="header-anchor" href="#å‚æ•°è§£é‡Š"><span>å‚æ•°è§£é‡Š</span></a></h3><ul><li><strong><code>msecs</code></strong>: è¿™æ˜¯ä¸€ä¸ªå¯é€‰å‚æ•°ï¼Œè¡¨ç¤ºè¶…æ—¶æ—¶é—´ï¼Œå•ä½æ˜¯æ¯«ç§’ï¼ˆmsï¼‰ã€‚å¦‚æœä½ æ²¡æœ‰æŒ‡å®šè¿™ä¸ªå‚æ•°ï¼Œæˆ–è€…å…¶å€¼ä¸º <code>0</code>ï¼Œé‚£ä¹ˆè¿æ¥å°†ä¸ä¼šå› ä¸ºè¶…æ—¶è€Œè‡ªåŠ¨å…³é—­ã€‚</li><li><strong><code>callback</code></strong>: è¿™ä¹Ÿæ˜¯ä¸€ä¸ªå¯é€‰å‚æ•°ï¼Œæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå½“è¿æ¥è¶…æ—¶å¹¶å³å°†è¢«å…³é—­æ—¶ï¼Œè¿™ä¸ªå‡½æ•°å°†è¢«è°ƒç”¨ã€‚</li></ul><h3 id="å·¥ä½œåŸç†" tabindex="-1"><a class="header-anchor" href="#å·¥ä½œåŸç†"><span>å·¥ä½œåŸç†</span></a></h3><p>å½“ä½ åœ¨ Node.js åº”ç”¨ç¨‹åºä¸­åˆ›å»ºäº†ä¸€ä¸ª HTTP æˆ– HTTPS æœåŠ¡å™¨æ—¶ï¼Œä½ å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ–¹æ³•æ¥è®¾ç½®æ¯ä¸ªè¿æ¥çš„æœ€å¤§ç©ºé—²æ—¶é—´ã€‚å¦‚æœåœ¨è§„å®šçš„æ—¶é—´å†…å®¢æˆ·ç«¯æ²¡æœ‰å‘é€ä»»ä½•è¯·æ±‚ï¼Œé‚£ä¹ˆè¿æ¥å°±ä¼šè¢«å…³é—­ï¼Œå›è°ƒå‡½æ•°ï¼ˆå¦‚æœæä¾›äº†çš„è¯ï¼‰ä¼šè¢«æ‰§è¡Œã€‚è¿™æ ·åšå¯ä»¥é˜²æ­¢æŸäº›å®¢æˆ·ç«¯å ç”¨æœåŠ¡å™¨èµ„æºè¿‡ä¹…ï¼Œæé«˜æœåŠ¡å™¨çš„æ•ˆç‡å’Œå®‰å…¨æ€§ã€‚</p><h3 id="å®é™…è¿ç”¨ç¤ºä¾‹-2" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨ç¤ºä¾‹-2"><span>å®é™…è¿ç”¨ç¤ºä¾‹</span></a></h3><h4 id="ç¤ºä¾‹-1-åŸºç¡€è®¾ç½®" tabindex="-1"><a class="header-anchor" href="#ç¤ºä¾‹-1-åŸºç¡€è®¾ç½®"><span>ç¤ºä¾‹ 1ï¼šåŸºç¡€è®¾ç½®</span></a></h4><p>å‡è®¾ä½ æ­£åœ¨åˆ›å»ºä¸€ä¸ª HTTP æœåŠ¡å™¨ï¼Œå¹¶å¸Œæœ›å¦‚æœå®¢æˆ·ç«¯åœ¨ 5 ç§’å†…æ²¡æœ‰å‘é€ä»»ä½•æ•°æ®ï¼Œåˆ™è‡ªåŠ¨å…³é—­è¿æ¥ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> http</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;http&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> server</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> http</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">createServer</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">req</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">res</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">  res</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">writeHead</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">200</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, { </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;Content-Type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;text/plain&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">  res</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">end</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;Hello World</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// è®¾ç½®è¶…æ—¶ä¸º 5000 æ¯«ç§’ï¼ˆ5 ç§’ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">server</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">setTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">5000</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">  console</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;è¿æ¥å·²è¶…æ—¶ï¼&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">server</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">listen</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">8080</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">  console</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;æœåŠ¡å™¨è¿è¡Œåœ¨ http://localhost:8080/&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">});</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼ŒæœåŠ¡å™¨è¢«è®¾ç½®ä¸ºåœ¨æ¥æ”¶åˆ°è¿æ¥è¯·æ±‚åï¼Œå¦‚æœ 5 ç§’å†…æ²¡æœ‰æ¥æ”¶åˆ°ä»»ä½•æ•°æ®ï¼Œå°±ä¼šæ‰“å°å‡ºâ€œè¿æ¥å·²è¶…æ—¶ï¼â€çš„æ¶ˆæ¯ã€‚</p><h4 id="ç¤ºä¾‹-2-å…·ä½“ä¸šåŠ¡åœºæ™¯" tabindex="-1"><a class="header-anchor" href="#ç¤ºä¾‹-2-å…·ä½“ä¸šåŠ¡åœºæ™¯"><span>ç¤ºä¾‹ 2ï¼šå…·ä½“ä¸šåŠ¡åœºæ™¯</span></a></h4><p>æƒ³è±¡ä¸€ä¸‹ä½ æ­£åœ¨å¼€å‘ä¸€ä¸ªéœ€è¦ç”¨æˆ·ç™»å½•çš„ Web åº”ç”¨ã€‚å‡ºäºå®‰å…¨è€ƒè™‘ï¼Œä½ å¯èƒ½ä¸å¸Œæœ›ç”¨æˆ·çš„è¿æ¥ä¿æŒå¼€å¯å¤ªä¹…ã€‚é€šè¿‡è®¾ç½®ä¸€ä¸ªåˆç†çš„è¶…æ—¶æ—¶é—´ï¼Œä¾‹å¦‚ 10 åˆ†é’Ÿï¼Œå¦‚æœç”¨æˆ·åœ¨è¿™æ®µæ—¶é—´å†…æ²¡æœ‰ä»»ä½•æ“ä½œï¼ˆå¦‚æ²¡æœ‰å‘é€æ–°çš„è¯·æ±‚ï¼‰ï¼Œé‚£ä¹ˆæœåŠ¡å™¨å°±ä¼šè‡ªåŠ¨æ–­å¼€è¿™ä¸ªè¿æ¥ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> http</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;http&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> server</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> http</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">createServer</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">req</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">res</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">  // å¤„ç†ç”¨æˆ·è¯·æ±‚çš„é€»è¾‘...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// è®¾ç½®è¶…æ—¶ä¸º 600000 æ¯«ç§’ï¼ˆ10 åˆ†é’Ÿï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">server</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">setTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">600000</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">server</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">listen</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">8080</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒæœåŠ¡å™¨åˆ©ç”¨è¶…æ—¶æœºåˆ¶å¢å¼ºäº†åº”ç”¨çš„å®‰å…¨æ€§ï¼Œé¿å…äº†èµ„æºçš„æ— è°“æ¶ˆè€—ã€‚</p><h3 id="æ€»ç»“-2" tabindex="-1"><a class="header-anchor" href="#æ€»ç»“-2"><span>æ€»ç»“</span></a></h3><p>é€šè¿‡ä½¿ç”¨ <code>server.setTimeout()</code> æ–¹æ³•ï¼Œä½ å¯ä»¥åœ¨ Node.js åº”ç”¨ä¸­æœ‰æ•ˆåœ°ç®¡ç†æœåŠ¡å™¨èµ„æºï¼Œä¼˜åŒ–åº”ç”¨æ€§èƒ½ï¼Œå¹¶æé«˜å®‰å…¨æ€§ã€‚æ ¹æ®ä¸åŒçš„åº”ç”¨åœºæ™¯çµæ´»è®¾ç½®è¶…æ—¶æ—¶é—´ï¼Œå¯ä»¥è®©ä½ çš„åº”ç”¨æ›´åŠ å¥å£¯å’Œå¯é ã€‚</p><h3 id="server-timeout" tabindex="-1"><a class="header-anchor" href="#server-timeout"><span><a href="https://nodejs.org/docs/latest/api/https.html#servertimeout" target="_blank" rel="noopener noreferrer">server.timeout</a></span></a></h3><p>ç†è§£<code>server.timeout</code>å±æ€§çš„æœ€å¥½æ–¹æ³•æ˜¯å°†å…¶çœ‹ä½œæ˜¯æœåŠ¡å™¨ä¸Šçš„ä¸€ä¸ªå®šæ—¶å™¨ï¼Œç”¨äºå†³å®šæœåŠ¡å™¨ç­‰å¾…æ¥è‡ªå®¢æˆ·ç«¯ï¼ˆä¾‹å¦‚æµè§ˆå™¨ï¼‰è¯·æ±‚çš„å“åº”å®Œæˆçš„æ—¶é—´ã€‚åœ¨ Node.js ä¸­ï¼Œè¿™ä¸ªè®¾ç½®ç‰¹åˆ«ç”¨äº HTTP å’Œ HTTPS æœåŠ¡å™¨ã€‚</p><p>å½“ä½ åˆ›å»ºäº†ä¸€ä¸ªæœåŠ¡å™¨åï¼Œæ¯”å¦‚ä¸€ä¸ªç½‘ç«™æˆ– API æœåŠ¡ï¼Œé€šå¸¸æƒ…å†µä¸‹ï¼Œå®¢æˆ·ç«¯ï¼ˆå¯ä»¥æ˜¯ä¸€ä¸ªæµè§ˆå™¨ã€å¦ä¸€ä¸ªæœåŠ¡å™¨æˆ–ä»»ä½•èƒ½å‘é€ HTTP è¯·æ±‚çš„ç¨‹åºï¼‰ä¼šå‘ä½ çš„æœåŠ¡å™¨å‘é€è¯·æ±‚ã€‚æœåŠ¡å™¨æ¥æ”¶åˆ°è¯·æ±‚åï¼Œä¼šå¤„ç†è¯·æ±‚å¹¶è¿”å›å“åº”ã€‚ç„¶è€Œï¼Œæœ‰äº›æƒ…å†µä¸‹ï¼Œè¯·æ±‚å¯èƒ½ä¼šå› ä¸ºå„ç§åŸå› ï¼ˆå¦‚ç½‘ç»œå»¶è¿Ÿã€å¤„ç†æ—¶é—´é•¿ç­‰ï¼‰èŠ±å¾ˆé•¿æ—¶é—´æ‰èƒ½å®Œæˆã€‚è¿™æ—¶å€™ï¼Œ<code>server.timeout</code>å±æ€§å°±æ´¾ä¸Šç”¨åœºäº†ã€‚</p><h3 id="server-timeout-1" tabindex="-1"><a class="header-anchor" href="#server-timeout-1"><span><code>server.timeout</code></span></a></h3><p>åœ¨ Node.js v21.7.1 ä¸­ï¼Œ<code>server.timeout</code>å±æ€§å…è®¸ä½ è®¾ç½®æœåŠ¡å™¨åœ¨è‡ªåŠ¨å…³é—­æœªå®Œæˆçš„è¿æ¥ä¹‹å‰ç­‰å¾…æ´»åŠ¨è¿æ¥çš„æœ€é•¿æ—¶é—´ï¼ˆä»¥æ¯«ç§’ä¸ºå•ä½ï¼‰ã€‚å¦‚æœä½ æ²¡æœ‰æ˜ç¡®è®¾ç½®è¿™ä¸ªå€¼ï¼Œé‚£ä¹ˆæœåŠ¡å™¨å°†ä½¿ç”¨ Node.js çš„é»˜è®¤å€¼ã€‚</p><h4 id="é»˜è®¤å€¼" tabindex="-1"><a class="header-anchor" href="#é»˜è®¤å€¼"><span>é»˜è®¤å€¼</span></a></h4><p>Node.js çš„å®˜æ–¹æ–‡æ¡£æŒ‡å‡ºï¼Œé»˜è®¤çš„è¶…æ—¶æ—¶é—´æ˜¯ä¸¤åˆ†é’Ÿï¼ˆ120000 æ¯«ç§’ï¼‰ã€‚è¿™æ„å‘³ç€ï¼Œå¦‚æœä¸€ä¸ªè¯·æ±‚è¶…è¿‡ä¸¤åˆ†é’Ÿè¿˜æ²¡æœ‰è·å¾—å¤„ç†ï¼ŒæœåŠ¡å™¨å°†è‡ªåŠ¨ç»ˆæ­¢è¿™ä¸ªè¿æ¥ã€‚</p><h4 id="ä¿®æ”¹server-timeout" tabindex="-1"><a class="header-anchor" href="#ä¿®æ”¹server-timeout"><span>ä¿®æ”¹<code>server.timeout</code></span></a></h4><p>ä½ å¯ä»¥æ ¹æ®éœ€è¦ä¿®æ”¹è¿™ä¸ªè¶…æ—¶æ—¶é—´ã€‚æ¯”å¦‚ï¼Œå¦‚æœä½ çŸ¥é“ä½ çš„æœåŠ¡å™¨å¤„ç†æŸäº›ç±»å‹çš„è¯·æ±‚å¯èƒ½éœ€è¦æ›´é•¿çš„æ—¶é—´ï¼Œä½ å¯ä»¥å¢åŠ è¶…æ—¶æ—¶é—´ï¼Œä»¥é˜²æœåŠ¡å™¨åœ¨è¯·æ±‚å®Œæˆä¹‹å‰å°±å…³é—­äº†è¿æ¥ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> http</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;http&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> server</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> http</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">createServer</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">req</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">res</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">  // è¯·æ±‚å¤„ç†é€»è¾‘</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// è®¾ç½®è¶…æ—¶æ—¶é—´ä¸º5åˆ†é’Ÿ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">server</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">timeout</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 300000</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">server</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">listen</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">3000</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">  console</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;Server running on port 3000&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">});</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="å®é™…è¿ç”¨ç¤ºä¾‹-3" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨ç¤ºä¾‹-3"><span>å®é™…è¿ç”¨ç¤ºä¾‹</span></a></h3><p>å‡è®¾ä½ æ­£åœ¨å¼€å‘ä¸€ä¸ªæä¾›æ•°æ®åˆ†ææœåŠ¡çš„ Web åº”ç”¨ã€‚ç”¨æˆ·å¯ä»¥ä¸Šä¼ å¤§é‡æ•°æ®ï¼Œä½ çš„æœåŠ¡å™¨éœ€è¦ä¸€å®šæ—¶é—´æ¥å¤„ç†è¿™äº›æ•°æ®å¹¶è¿”å›ç»“æœã€‚</p><p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œé»˜è®¤çš„ä¸¤åˆ†é’Ÿè¶…æ—¶æ—¶é—´å¯èƒ½ä¸å¤Ÿç”¨ã€‚æ•°æ®å¤„ç†å¯èƒ½éœ€è¦æ›´é•¿æ—¶é—´ï¼Œå°¤å…¶æ˜¯å½“å¤„ç†å¤æ‚æˆ–å¤§è§„æ¨¡æ•°æ®é›†æ—¶ã€‚ä¸ºäº†é¿å…æœåŠ¡å™¨å› è¶…æ—¶è€Œæå‰å…³é—­è¿æ¥ï¼Œå¯¼è‡´ç”¨æˆ·æ— æ³•æ”¶åˆ°å®Œæ•´çš„å“åº”ï¼Œä½ å¯ä»¥è°ƒæ•´<code>server.timeout</code>å±æ€§ï¼Œç»™äºˆè¶³å¤Ÿçš„å¤„ç†å’Œå“åº”æ—¶é—´ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> http</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;http&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> server</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> http</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">createServer</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">req</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">res</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">req</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">url</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> ===</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;/process-data&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // æ¨¡æ‹Ÿè€—æ—¶çš„æ•°æ®å¤„ç†æ“ä½œ</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">    setTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">      res</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">writeHead</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">200</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">      res</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">end</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;Data processing completed&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    }, </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">240000</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// å‡è®¾å¤„ç†éœ€è¦4åˆ†é’Ÿ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// å› ä¸ºæ•°æ®å¤„ç†å¯èƒ½éœ€è¦4åˆ†é’Ÿï¼Œæ‰€ä»¥æˆ‘ä»¬å°†è¶…æ—¶æ—¶é—´è®¾ç½®ä¸º5åˆ†é’Ÿ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">server</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">timeout</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 300000</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">server</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">listen</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">3000</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">  console</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;Server ready to process data&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">});</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ä¸ªç¤ºä¾‹å±•ç¤ºäº†å¦‚ä½•æ ¹æ®ä½ çš„åº”ç”¨éœ€æ±‚è°ƒæ•´æœåŠ¡å™¨è¶…æ—¶è®¾ç½®ã€‚é€šè¿‡åˆç†é…ç½®<code>server.timeout</code>ï¼Œä½ å¯ä»¥ç¡®ä¿æœåŠ¡å™¨æœ‰è¶³å¤Ÿçš„æ—¶é—´å¤„ç†å¤æ‚çš„è¯·æ±‚ï¼ŒåŒæ—¶ä¹Ÿä¿æŠ¤ä½ çš„æœåŠ¡å™¨å…å—å› é•¿æ—¶é—´è¿è¡Œä¸å¿…è¦çš„è¯·æ±‚è€Œé€ æˆèµ„æºæµªè´¹çš„é£é™©ã€‚</p><h3 id="server-keepalivetimeout" tabindex="-1"><a class="header-anchor" href="#server-keepalivetimeout"><span><a href="https://nodejs.org/docs/latest/api/https.html#serverkeepalivetimeout" target="_blank" rel="noopener noreferrer">server.keepAliveTimeout</a></span></a></h3><p>Node.js ä¸­çš„<code>server.keepAliveTimeout</code>æ˜¯ HTTP æœåŠ¡å™¨è®¾ç½®ä¸­ä¸€ä¸ªéå¸¸é‡è¦çš„é…ç½®é¡¹ï¼Œå®ƒå±äº Node.js çš„ HTTP æˆ– HTTPS æ¨¡å—ã€‚ä¸ºäº†æ›´å¥½åœ°ç†è§£<code>server.keepAliveTimeout</code>ï¼Œæˆ‘ä»¬å…ˆä»åŸºæœ¬æ¦‚å¿µå¼€å§‹è®²èµ·ã€‚</p><h3 id="ä»€ä¹ˆæ˜¯-keep-alive" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯-keep-alive"><span>ä»€ä¹ˆæ˜¯ Keep-Aliveï¼Ÿ</span></a></h3><p>åœ¨ HTTP1.1 åè®®ä¸­ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œæ¯æ¬¡å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´çš„é€šä¿¡éƒ½ä¼šå»ºç«‹ä¸€ä¸ªæ–°çš„ TCP è¿æ¥ï¼Œè¿™ä¸ªè¿‡ç¨‹åŒ…æ‹¬ä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹ï¼Œè¿™å¯¹äºé¢‘ç¹çš„ç½‘ç»œè¯·æ±‚æ¥è¯´ï¼Œæ˜¯ä¸€ç§èµ„æºå’Œæ—¶é—´ä¸Šçš„æµªè´¹ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒHTTP1.1 å¼•å…¥äº† Keep-Alive æœºåˆ¶ï¼Œä¹Ÿå°±æ˜¯å¤ç”¨ TCP è¿æ¥ï¼Œå³åœ¨ä¸€ä¸ª TCP è¿æ¥ä¸­å¯ä»¥å‘é€å¤šä¸ª HTTP è¯·æ±‚å’Œå“åº”ï¼Œé¿å…äº†é¢‘ç¹å»ºç«‹å’Œå…³é—­è¿æ¥çš„å¼€é”€ã€‚</p><h3 id="server-keepalivetimeoutæ˜¯ä»€ä¹ˆ" tabindex="-1"><a class="header-anchor" href="#server-keepalivetimeoutæ˜¯ä»€ä¹ˆ"><span><code>server.keepAliveTimeout</code>æ˜¯ä»€ä¹ˆï¼Ÿ</span></a></h3><p><code>server.keepAliveTimeout</code>å±æ€§å°±æ˜¯åœ¨è¿™æ ·çš„èƒŒæ™¯ä¸‹å‡ºç°çš„ã€‚å®ƒæŒ‡å®šäº†å½“ä½¿ç”¨ HTTP Keep-Alive åŠŸèƒ½æ—¶ï¼ŒæœåŠ¡å™¨åœ¨å…³é—­ç©ºé—²è¿æ¥<strong>ä¹‹å‰</strong>ç­‰å¾…ä¸‹ä¸€ä¸ªè¯·æ±‚çš„æœ€å¤§æ¯«ç§’æ•°ã€‚å¦‚æœåœ¨è¿™æ®µæ—¶é—´å†…ï¼Œæ²¡æœ‰æ–°çš„è¯·æ±‚åˆ°è¾¾æœåŠ¡å™¨ï¼Œåˆ™æœåŠ¡å™¨å°†å…³é—­è¯¥è¿æ¥ã€‚</p><p>é»˜è®¤å€¼ï¼šåœ¨ Node.js v21.7.1 ç‰ˆæœ¬ä¸­ï¼Œ<code>server.keepAliveTimeout</code>çš„é»˜è®¤å€¼ä¸º 5000 æ¯«ç§’ï¼ˆ5 ç§’ï¼‰ã€‚</p><h3 id="ä¸ºä½•éœ€è¦è®¾ç½®server-keepalivetimeout" tabindex="-1"><a class="header-anchor" href="#ä¸ºä½•éœ€è¦è®¾ç½®server-keepalivetimeout"><span>ä¸ºä½•éœ€è¦è®¾ç½®<code>server.keepAliveTimeout</code>?</span></a></h3><ul><li><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šé€šè¿‡é€‚å½“è®¾ç½®<code>keepAliveTimeout</code>ï¼Œå¯ä»¥ä½¿å¾— TCP è¿æ¥å¾—åˆ°æœ‰æ•ˆå¤ç”¨ï¼Œå‡å°‘ TCP è¿æ¥çš„å»ºç«‹å’Œå…³é—­çš„æ¬¡æ•°ï¼Œä»è€Œæé«˜æ•´ä½“çš„ç½‘ç»œé€šä¿¡æ•ˆç‡ã€‚</li><li><strong>èµ„æºç®¡ç†</strong>ï¼šæœåŠ¡å™¨èµ„æºæ˜¯æœ‰é™çš„ï¼Œå°¤å…¶æ˜¯å¹¶å‘è¿æ¥æ•°ã€‚é€šè¿‡æ§åˆ¶ç©ºé—²è¿æ¥çš„ç”Ÿå‘½å‘¨æœŸï¼Œå¯ä»¥æ›´å¥½åœ°ç®¡ç†å’Œé‡Šæ”¾æœåŠ¡å™¨èµ„æºï¼Œé˜²æ­¢å› å¤ªå¤šç©ºé—²è¿æ¥è€Œå¯¼è‡´çš„èµ„æºè€—å°½ã€‚</li></ul><h3 id="å®é™…è¿ç”¨ä¸¾ä¾‹" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨ä¸¾ä¾‹"><span>å®é™…è¿ç”¨ä¸¾ä¾‹</span></a></h3><h4 id="ç¤ºä¾‹-1-åŸºç¡€-http-æœåŠ¡å™¨è®¾ç½®" tabindex="-1"><a class="header-anchor" href="#ç¤ºä¾‹-1-åŸºç¡€-http-æœåŠ¡å™¨è®¾ç½®"><span>ç¤ºä¾‹ 1ï¼šåŸºç¡€ HTTP æœåŠ¡å™¨è®¾ç½®</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> http</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;http&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> server</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> http</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">createServer</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">req</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">res</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">  res</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">end</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;Hello World!&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// è®¾ç½®keepAliveTimeoutä¸º10ç§’</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">server</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">keepAliveTimeout</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 10000</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">server</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">listen</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">3000</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">  console</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;Server running at http://localhost:3000/&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">});</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªç®€å•çš„ HTTP æœåŠ¡å™¨ï¼Œå¹¶å°†<code>keepAliveTimeout</code>è®¾ç½®ä¸º 10000 æ¯«ç§’ï¼ˆ10 ç§’ï¼‰ã€‚è¿™æ„å‘³ç€ï¼Œå¦‚æœæœåŠ¡å™¨åœ¨å¤„ç†å®Œä¸€ä¸ªè¯·æ±‚åçš„ 10 ç§’å†…æ²¡æœ‰æ”¶åˆ°æ–°çš„è¯·æ±‚ï¼Œé‚£ä¹ˆå®ƒå°†è‡ªåŠ¨å…³é—­å½“å‰çš„ TCP è¿æ¥ã€‚</p><h4 id="ç¤ºä¾‹-2-è°ƒæ•´æ ¹æ®å®é™…è´Ÿè½½è°ƒä¼˜" tabindex="-1"><a class="header-anchor" href="#ç¤ºä¾‹-2-è°ƒæ•´æ ¹æ®å®é™…è´Ÿè½½è°ƒä¼˜"><span>ç¤ºä¾‹ 2ï¼šè°ƒæ•´æ ¹æ®å®é™…è´Ÿè½½è°ƒä¼˜</span></a></h4><p>å‡è®¾ä½ æ­£åœ¨è¿è¡Œä¸€ä¸ªé«˜æµé‡çš„ Web æœåŠ¡ï¼Œç»è¿‡ç›‘æ§ä½ å‘ç°å¤§å¤šæ•°çš„ TCP è¿æ¥åœ¨ 10 ç§’å†…éƒ½ä¼šæœ‰æ–°çš„è¯·æ±‚åˆ°æ¥ã€‚è¿™æ—¶ï¼Œä½ å¯èƒ½ä¼šè€ƒè™‘å°†<code>keepAliveTimeout</code>å¢åŠ åˆ° 30 ç§’ï¼Œä»¥å‡å°‘ TCP è¿æ¥çš„å»ºç«‹å’Œå…³é—­æ¬¡æ•°ï¼Œä»è€Œè¿›ä¸€æ­¥æé«˜æ€§èƒ½ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">server</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">keepAliveTimeout</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 30000</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// è®¾ç½®ä¸º30ç§’</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>æ€»ç»“æ¥è¯´ï¼Œåˆç†åœ°è®¾ç½®å’Œè°ƒæ•´<code>server.keepAliveTimeout</code>å¯¹äºä¼˜åŒ– HTTP æœåŠ¡çš„æ€§èƒ½éå¸¸å…³é”®ã€‚ç®¡ç†å‘˜éœ€è¦æ ¹æ®å®é™…çš„åº”ç”¨åœºæ™¯å’Œè´Ÿè½½æƒ…å†µæ¥é€‚é…å’Œè°ƒæ•´æ­¤å‚æ•°ï¼Œä»¥è¾¾åˆ°æœ€ä½³çš„æ€§èƒ½è¡¨ç°ã€‚</p><h2 id="https-createserver-options-requestlistener" tabindex="-1"><a class="header-anchor" href="#https-createserver-options-requestlistener"><span><a href="https://nodejs.org/docs/latest/api/https.html#httpscreateserveroptions-requestlistener" target="_blank" rel="noopener noreferrer">https.createServer([options][, requestListener])</a></span></a></h2><p>å½“ç„¶ï¼Œæˆ‘å¾ˆä¹æ„å¸®ä½ ç†è§£ Node.js ä¸­<code>https.createServer()</code>è¿™ä¸ªæ–¹æ³•ã€‚</p><p>åœ¨ Node.js ä¸­ï¼Œ<code>https.createServer()</code>æ˜¯ä¸€ä¸ªç”¨æ¥åˆ›å»º HTTPS æœåŠ¡å™¨çš„å‡½æ•°ã€‚HTTPS å³ HTTP over SSL/TLSï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨é€šå¸¸çš„ HTTP åè®®ä¸Šå¢åŠ äº† SSL/TLS å®‰å…¨å±‚ï¼Œç”¨äºåŠ å¯†å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´ä¼ è¾“çš„æ•°æ®ï¼Œä¿è¯ä¿¡æ¯ä¼ é€’çš„å®‰å…¨æ€§ã€‚</p><h3 id="å‚æ•°è§£é‡Š-1" tabindex="-1"><a class="header-anchor" href="#å‚æ•°è§£é‡Š-1"><span>å‚æ•°è§£é‡Šï¼š</span></a></h3><ul><li><code>options</code>ï¼šè¿™æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå…¶ä¸­åŒ…å«äº†ä¸åŒçš„é…ç½®é€‰é¡¹ï¼Œä¸»è¦ç”¨äºè®¾ç½® SSL/TLS åŠ å¯†ç›¸å…³çš„é…ç½®ï¼Œæ¯”å¦‚ï¼š <ul><li><code>key</code>ï¼šç§é’¥æ–‡ä»¶å†…å®¹ã€‚</li><li><code>cert</code>ï¼šè¯ä¹¦æ–‡ä»¶å†…å®¹ã€‚</li><li>å…¶ä»– SSL ç›¸å…³çš„é€‰é¡¹ï¼Œä¾‹å¦‚<code>ca</code>ï¼ˆè¯ä¹¦é¢å‘æœºæ„é“¾ï¼‰ã€<code>passphrase</code>ï¼ˆç”¨äºç§é’¥çš„å¯†ç ï¼‰ç­‰ã€‚</li></ul></li><li><code>requestListener</code>ï¼šè¿™æ˜¯ä¸€ä¸ªå¯é€‰å‚æ•°ï¼Œå®ƒæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå½“æœ‰æ–°çš„å®¢æˆ·ç«¯è¿æ¥æ—¶ï¼Œè¯¥å‡½æ•°ä¼šè¢«è‡ªåŠ¨è°ƒç”¨ï¼Œå…¶å‚æ•°æ˜¯<code>request</code>å’Œ<code>response</code>å¯¹è±¡ï¼Œåˆ†åˆ«ä»£è¡¨è¯·æ±‚ä¿¡æ¯å’Œå“åº”ä¿¡æ¯ã€‚</li></ul><h3 id="å®é™…ä¾‹å­" tabindex="-1"><a class="header-anchor" href="#å®é™…ä¾‹å­"><span>å®é™…ä¾‹å­ï¼š</span></a></h3><p>å‡è®¾ä½ å·²ç»æœ‰äº† SSL è¯ä¹¦å’Œç§é’¥ï¼Œé‚£ä¹ˆä¸‹é¢æ˜¯ä¸€ä¸ªåˆ›å»º HTTPS æœåŠ¡å™¨çš„åŸºæœ¬ç¤ºä¾‹ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> https</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;https&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> fs</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;fs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// é…ç½®SSLé€‰é¡¹</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> options</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">  key</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">fs</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">readFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;your-private-key.pem&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">), </span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// ç§é’¥æ–‡ä»¶è·¯å¾„</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">  cert</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">fs</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">readFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;your-certificate.pem&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">), </span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// è¯ä¹¦æ–‡ä»¶è·¯å¾„</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// åˆ›å»ºHTTPSæœåŠ¡å™¨</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> server</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> https</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">createServer</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">options</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">req</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">res</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">  res</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">writeHead</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">200</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// è®¾ç½®å“åº”å¤´çŠ¶æ€ç ä¸º200</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">  res</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">end</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;Hello Secure World!&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// å“åº”ç»“æŸï¼Œå¹¶å‘é€ä¸€äº›æ–‡æœ¬</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// ç›‘å¬443ç«¯å£ï¼ˆHTTPSé»˜è®¤ç«¯å£ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">server</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">listen</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">443</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">  console</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;HTTPS server running on port 443&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">});</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆåŠ è½½äº†<code>https</code>æ¨¡å—å’Œ<code>fs</code>æ¨¡å—ã€‚é€šè¿‡<code>fs.readFileSync</code>å‡½æ•°è¯»å–äº†å­˜å‚¨åœ¨ç£ç›˜ä¸Šçš„ç§é’¥å’Œè¯ä¹¦æ–‡ä»¶ï¼Œç„¶åæˆ‘ä»¬æŠŠè¿™äº›ä¿¡æ¯ä½œä¸º<code>options</code>ä¼ ç»™<code>https.createServer</code>å‡½æ•°ã€‚æˆ‘ä»¬è¿˜å®šä¹‰äº†ä¸€ä¸ªå¤„ç†å‡½æ•°ï¼Œå½“æ¥æ”¶åˆ°è¯·æ±‚æ—¶ï¼Œå°†è¿”å›ä¸€ä¸ªç®€å•çš„â€œHello Secure World!â€æ¶ˆæ¯ã€‚</p><h3 id="æ³¨æ„äº‹é¡¹-1" tabindex="-1"><a class="header-anchor" href="#æ³¨æ„äº‹é¡¹-1"><span>æ³¨æ„äº‹é¡¹ï¼š</span></a></h3><ol><li>åœ¨å®è·µä¸­ï¼Œä½ éœ€è¦ç¡®ä¿è·å–åˆæ³•çš„ SSL è¯ä¹¦ï¼Œå¯ä»¥ä»è¯ä¹¦é¢å‘æœºæ„ï¼ˆå¦‚ Let&#39;s Encryptï¼‰è·å¾—å…è´¹æˆ–ä»˜è´¹è¯ä¹¦ã€‚</li><li>ç§é’¥å’Œè¯ä¹¦é€šå¸¸éœ€è¦å®šæœŸæ›´æ–°ã€‚</li><li>è¯·ç¡®ä¿æŒ‰ç…§æœ€ä½³å®è·µä¿ç®¡å¥½ä½ çš„ç§é’¥ï¼Œé¿å…æ³„éœ²ã€‚</li><li>ä½¿ç”¨ HTTPS å¯ä»¥é˜²æ­¢ä¸­é—´äººæ”»å‡»ç­‰å®‰å…¨é—®é¢˜ï¼Œå› æ­¤å¯¹äºä»»ä½•æ¶‰åŠæ•æ„Ÿæ•°æ®çš„ç½‘ç«™æ¥è¯´ï¼Œéƒ½æ¨èä½¿ç”¨ HTTPSã€‚</li></ol><h2 id="https-get-options-callback" tabindex="-1"><a class="header-anchor" href="#https-get-options-callback"><span><a href="https://nodejs.org/docs/latest/api/https.html#httpsgetoptions-callback" target="_blank" rel="noopener noreferrer">https.get(options[, callback])</a></span></a></h2><p>å½“ç„¶ï¼Œå¾ˆé«˜å…´å¸®åŠ©ä½ ç†è§£<code>https.get(options[, callback])</code>è¿™ä¸ªæ–¹æ³•ã€‚</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“åœ¨ Node.js ä¸­ï¼Œ<code>https</code>æ¨¡å—æ˜¯ç”¨æ¥å¤„ç† HTTP åè®®çš„åŠ å¯†ç‰ˆæœ¬ï¼Œå³ HTTPSã€‚HTTPS ç›¸æ¯” HTTP æ›´åŠ å®‰å…¨ï¼Œå› ä¸ºå®ƒåœ¨ä¼ è¾“æ•°æ®æ—¶ä½¿ç”¨äº† SSL/TLS åè®®è¿›è¡ŒåŠ å¯†ã€‚</p><p>ç°åœ¨æ¥çœ‹<code>https.get()</code>å‡½æ•°ã€‚è¿™ä¸ªå‡½æ•°æ˜¯<code>https</code>æ¨¡å—æä¾›çš„ä¸€ä¸ªä¾¿æ·æ–¹æ³•ï¼Œç”¨äºå‘èµ·ä¸€ä¸ª GET è¯·æ±‚ã€‚GET è¯·æ±‚å¸¸ç”¨äºä»æŒ‡å®šçš„æœåŠ¡å™¨è·å–æ•°æ®ã€‚<code>https.get()</code>æ–¹æ³•æ¥å—ä¸¤ä¸ªå‚æ•°ï¼š</p><ol><li><code>options</code>ï¼šå¯ä»¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼ˆè¡¨ç¤º URLï¼‰ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥å¯¹è±¡åŒ…å«äº†å¦‚ä¸»æœºåã€è·¯å¾„ã€ç«¯å£å·ç­‰ä¿¡æ¯ä»¥åŠä¸€äº›å…¶ä»–é€‰é¡¹ã€‚</li><li><code>callback</code>ï¼šå½“è¯·æ±‚å‘é€å¹¶ä¸”æœåŠ¡å™¨å“åº”åï¼Œè¿™ä¸ªå›è°ƒå‡½æ•°å°†è¢«è°ƒç”¨ã€‚è¿™ä¸ªå‡½æ•°é€šå¸¸æ¥å—ä¸€ä¸ªå‚æ•°ï¼Œå³<code>response</code>ï¼Œå®ƒåŒ…å«äº†æœåŠ¡å™¨è¿”å›çš„ä¿¡æ¯ã€‚</li></ol><p>è®©æˆ‘ä»¬é€šè¿‡å‡ ä¸ªå®é™…çš„ä¾‹å­æ¥ç†è§£è¿™ä¸ªå‡½æ•°æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚</p><h3 id="å®ä¾‹-1-ç®€å•çš„-get-è¯·æ±‚" tabindex="-1"><a class="header-anchor" href="#å®ä¾‹-1-ç®€å•çš„-get-è¯·æ±‚"><span>å®ä¾‹ 1 - ç®€å•çš„ GET è¯·æ±‚ï¼š</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> https</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;https&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// ä½¿ç”¨https.get()æ–¹æ³•å‘&quot;https://api.github.com/users/github&quot;å‘é€GETè¯·æ±‚</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">https</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;https://api.github.com/users/github&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">resp</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    let</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> data</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // æ¥æ”¶åˆ°æ•°æ®ç‰‡æ®µ(chunk)ï¼Œåˆ™æ‹¼æ¥åˆ°dataå˜é‡</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    resp</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;data&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">chunk</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">      data</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> +=</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> chunk</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // å½“æ‰€æœ‰æ•°æ®æ¥æ”¶å®Œæ¯•æ—¶æ‰“å°å‡ºæ¥</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    resp</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;end&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">      console</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">parse</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">data</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;error&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    console</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;Error: &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> err</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">message</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  });</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬å‘ GitHub API å‘èµ·äº†ä¸€ä¸ª GET è¯·æ±‚ï¼Œæƒ³è¦è·å– GitHub ç”¨æˆ·çš„ä¿¡æ¯ã€‚æˆ‘ä»¬ç›‘å¬äº†ä¸¤ä¸ªäº‹ä»¶ï¼š<code>data</code>å’Œ<code>end</code>ã€‚<code>data</code>äº‹ä»¶æ¯å½“æ¥æ”¶åˆ°æ•°æ®ç‰‡æ®µæ—¶å°±ä¼šè§¦å‘ï¼Œè€Œ<code>end</code>äº‹ä»¶åœ¨æ‰€æœ‰æ•°æ®éƒ½æ¥æ”¶å®Œæ¯•æ—¶è§¦å‘ã€‚</p><h3 id="å®ä¾‹-2-å¸¦é€‰é¡¹çš„-get-è¯·æ±‚" tabindex="-1"><a class="header-anchor" href="#å®ä¾‹-2-å¸¦é€‰é¡¹çš„-get-è¯·æ±‚"><span>å®ä¾‹ 2 - å¸¦é€‰é¡¹çš„ GET è¯·æ±‚ï¼š</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> https</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;https&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> options</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">  hostname</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;api.github.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">  path</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;/users/github&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">  method</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;GET&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">  headers</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">    &quot;User-Agent&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;node.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// GitHub APIéœ€è¦è®¾ç½®User-Agent</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">https</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">options</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">resp</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    let</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> data</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    resp</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;data&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">chunk</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">      data</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> +=</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> chunk</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    resp</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;end&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">      console</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">parse</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">data</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;error&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    console</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;Error: &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> err</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">message</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  });</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ª<code>options</code>å¯¹è±¡æ¥æŒ‡å®šè¯·æ±‚çš„è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬ä¸»æœºåã€è·¯å¾„ã€è¯·æ±‚æ–¹æ³•ä»¥åŠå¿…è¦çš„è¯·æ±‚å¤´ã€‚è¿™æ˜¯æ›´çµæ´»çš„ç”¨æ³•ï¼Œç‰¹åˆ«æ˜¯å½“ä½ éœ€è¦è®¾ç½®é¢å¤–çš„å¤´éƒ¨æˆ–è€…å…¶ä»–é€‰é¡¹æ—¶ã€‚</p><p>é€šè¿‡è¿™äº›ä¾‹å­ï¼Œä½ åº”è¯¥èƒ½å¤Ÿç†è§£<code>https.get()</code>æ–¹æ³•çš„åŸºæœ¬ç”¨é€”å’Œå·¥ä½œæ–¹å¼ã€‚å®ƒæ˜¯ Node.js ä¸­éå¸¸å¸¸ç”¨çš„æ–¹æ³•ä¹‹ä¸€ï¼Œå°¤å…¶æ˜¯åœ¨éœ€è¦ä»å…¶ä»–æœåŠ¡å™¨è·å–æ•°æ®çš„åœºæ™¯ä¸­ã€‚</p><h2 id="https-get-url-options-callback" tabindex="-1"><a class="header-anchor" href="#https-get-url-options-callback"><span><a href="https://nodejs.org/docs/latest/api/https.html#httpsgeturl-options-callback" target="_blank" rel="noopener noreferrer">https.get(url[, options][, callback])</a></span></a></h2><p>å¥½çš„ï¼Œè®©æˆ‘å¸®ä½ ç†è§£ Node.js ä¸­çš„ <code>https.get</code> å‡½æ•°æ˜¯æ€æ ·å·¥ä½œçš„ã€‚</p><p>é¦–å…ˆï¼ŒNode.js æ˜¯ä¸€ä¸ªå¯ä»¥è®©ä½ ä½¿ç”¨ JavaScript è¿›è¡ŒæœåŠ¡å™¨ç«¯ç¼–ç¨‹çš„å¹³å°ã€‚è€Œ <code>https.get</code> æ˜¯ Node.js æä¾›çš„ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºå‘é€ä¸€ä¸ª HTTPS çš„ GET è¯·æ±‚åˆ°æŒ‡å®šçš„ URLã€‚<code>HTTPS</code> å³ <code>HTTP Secure</code>ï¼Œå®ƒæ˜¯ä¸€ä¸ªåœ¨ HTTP ä¸‹åŠ å…¥ SSL/TLS åè®®çš„å®‰å…¨ç‰ˆæœ¬ï¼Œç”¨æ¥ä¿æŠ¤ä¼ è¾“æ•°æ®çš„å®‰å…¨ã€‚</p><p>ä¸€ä¸ª GET è¯·æ±‚é€šå¸¸æ˜¯å‘æœåŠ¡å™¨ç´¢è¦æˆ–è€…æŸ¥è¯¢æŸäº›ä¿¡æ¯ã€‚ç°åœ¨æˆ‘å°†åˆ†æ­¥éª¤ä¸ºä½ è¯¦ç»†è§£é‡Š <code>https.get</code>ï¼š</p><ol><li><p><strong>åŸºæœ¬è¯­æ³•</strong></p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">https</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">url</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[, </span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">options</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">][, </span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">callback</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">])</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><code>url</code>: è¦è¯·æ±‚çš„ URL åœ°å€ã€‚</li><li><code>options</code> (å¯é€‰): ä¸€ä¸ªé…ç½®å¯¹è±¡ï¼Œå…è®¸ä½ è®¾ç½®ä¾‹å¦‚è¯·æ±‚å¤´ã€ä»£ç†ã€è¶…æ—¶æ—¶é—´ç­‰é€‰é¡¹ã€‚</li><li><code>callback</code> (å¯é€‰): å½“æ”¶åˆ°å“åº”æ—¶è°ƒç”¨çš„å›è°ƒå‡½æ•°ã€‚</li></ul></li><li><p><strong>å¦‚ä½•ä½¿ç”¨</strong><br> å½“ä½ è°ƒç”¨ <code>https.get</code> å‡½æ•°æ—¶ï¼Œä½ éœ€è¦æä¾›è‡³å°‘ä¸€ä¸ªå‚æ•°ï¼Œå³è¦è¯·æ±‚çš„ URLã€‚å¦‚æœä½ æƒ³å¤„ç†è¿”å›çš„æ•°æ®ï¼Œä½ è¿˜åº”è¯¥æä¾›ä¸€ä¸ªå›è°ƒå‡½æ•°ã€‚</p></li><li><p><strong>å›è°ƒå‡½æ•°</strong><br> å›è°ƒå‡½æ•°ä¼šæ”¶åˆ°ä¸€ä¸ª <code>IncomingMessage</code> å¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œè¿™ä¸ªå¯¹è±¡è¡¨ç¤ºå“åº”æ¶ˆæ¯ã€‚ä½ å¯ä»¥é€šè¿‡ç›‘å¬è¿™ä¸ªå¯¹è±¡çš„ &#39;data&#39; äº‹ä»¶æ¥è¯»å–ä»æœåŠ¡å™¨è¿”å›çš„æ•°æ®ã€‚</p></li><li><p><strong>ç¤ºä¾‹</strong><br> è®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªç®€å•çš„å®é™…ä½¿ç”¨ä¾‹å­ã€‚å‡è®¾ä½ æƒ³è·å– <code>https://api.github.com/users/github</code> ä¸Šçš„ GitHub ç”¨æˆ·ä¿¡æ¯ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> https</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;https&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// å¼•å…¥httpsæ¨¡å—</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// ç›®æ ‡URL</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> url</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;https://api.github.com/users/github&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// å‘é€GETè¯·æ±‚</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">https</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">url</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, { </span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">headers</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: { </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;User-Agent&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;node.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> } }, (</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">res</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    let</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> data</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // ç›‘å¬&#39;data&#39;äº‹ä»¶ï¼Œæ¯æ¬¡æ¥æ”¶ä¸€å—æ•°æ®</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    res</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;data&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">chunk</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">      data</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> +=</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> chunk</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">    // ç›‘å¬&#39;end&#39;äº‹ä»¶ï¼Œè¡¨ç¤ºæ‰€æœ‰æ•°æ®æ¥æ”¶å®Œæ¯•</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    res</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;end&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">      console</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">parse</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">data</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)); </span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// å°†æ¥æ”¶åˆ°çš„æ•°æ®è½¬æ¢æˆJSONå¯¹è±¡å¹¶æ‰“å°å‡ºæ¥</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;error&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    console</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// è¯·æ±‚å‘ç”Ÿé”™è¯¯æ—¶ï¼Œæ‰“å°é”™è¯¯ä¿¡æ¯</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  });</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ä¸Šé¢è¿™æ®µä»£ç ä¸­ï¼Œæˆ‘ä»¬ï¼š</p><ul><li>å¼•å…¥äº† <code>https</code> æ¨¡å—ã€‚</li><li>å®šä¹‰äº†è¯·æ±‚çš„ URLã€‚</li><li>é€šè¿‡ <code>https.get</code> å‘é€äº†ä¸€ä¸ª GET è¯·æ±‚ï¼Œå¹¶ä¸”å› ä¸º GitHub API éœ€è¦ User-Agent å¤´éƒ¨ï¼Œåœ¨ <code>options</code> ä¸­æ·»åŠ äº†è¿™ä¸ªå¤´éƒ¨ã€‚</li><li>è®¾ç½®äº†ä¸€ä¸ªå›è°ƒå‡½æ•°æ¥å¤„ç†å“åº”ã€‚</li><li>åœ¨å›è°ƒä¸­ï¼Œç›‘å¬ &#39;data&#39; äº‹ä»¶æ¥æ‹¼æ¥æ•°æ®ï¼Œç›‘å¬ &#39;end&#39; äº‹ä»¶æ¥å¤„ç†æœ€ç»ˆçš„æ•°æ®ã€‚</li><li>æ·»åŠ äº†ä¸€ä¸ª &#39;error&#39; äº‹ä»¶çš„ç›‘å¬å™¨æ¥å¤„ç†å¯èƒ½å‡ºç°çš„ä»»ä½•è¯·æ±‚é”™è¯¯ã€‚</li></ul></li></ol><p>ä»¥ä¸Šæ˜¯å¯¹ <code>https.get</code> æ–¹æ³•åŸºæœ¬ç”¨æ³•çš„è§£é‡Šå’Œä¸€ä¸ªç®€å•çš„ä¾‹å­ã€‚å¸Œæœ›è¿™æœ‰åŠ©äºä½ äº†è§£å¦‚ä½•åœ¨ Node.js ä¸­è¿›è¡Œ HTTPS è¯·æ±‚ï¼</p><h2 id="https-globalagent" tabindex="-1"><a class="header-anchor" href="#https-globalagent"><span><a href="https://nodejs.org/docs/latest/api/https.html#httpsglobalagent" target="_blank" rel="noopener noreferrer">https.globalAgent</a></span></a></h2><p>Node.js æ˜¯ä¸€ä¸ªè®© JavaScript è¿è¡Œåœ¨æœåŠ¡å™¨ç«¯çš„å¹³å°ï¼Œè€Œä¸ä»…ä»…æ˜¯åœ¨æµè§ˆå™¨é‡Œã€‚è¿™å°±æ„å‘³ç€ä½ å¯ä»¥ç”¨å®ƒæ¥å¼€å‘æœåŠ¡å™¨ç«¯çš„è½¯ä»¶ï¼Œä¾‹å¦‚ç½‘ç«™åç«¯ã€API æœåŠ¡æˆ–è€…å…¶ä»–ç½‘ç»œæœåŠ¡ã€‚</p><p>åœ¨ Node.js ä¸­ï¼Œ<code>https</code>æ¨¡å—æä¾›äº†ä¸€ç§æ–¹å¼æ¥å¤„ç† HTTPS åè®®ï¼Œå®ƒæ˜¯ HTTP çš„å®‰å…¨ç‰ˆæœ¬ï¼Œä½¿ç”¨ SSL/TLS åŠ å¯†æ¥ä¿æŠ¤ä¼ è¾“æ•°æ®çš„å®‰å…¨æ€§ã€‚<code>https.globalAgent</code>æ˜¯è¯¥æ¨¡å—ä¸­çš„ä¸€ä¸ªç‰¹æ®Šå¯¹è±¡ï¼Œç”¨äºè¡¨ç¤ºä¸€ä¸ªå…¨å±€çš„ HTTPS Agent å®ä¾‹ï¼Œå®ƒè´Ÿè´£ç®¡ç†å®¢æˆ·ç«¯çš„ HTTP è¿æ¥æŒä¹…åŒ–å’Œé‡ç”¨ï¼Œä»¥åŠå¯¹ HTTPS è¯·æ±‚è¿›è¡Œå¿…è¦çš„é…ç½®ã€‚</p><p>ç®€å•æ¥è¯´ï¼Œå½“ä½ åœ¨ Node.js åº”ç”¨ä¸­éœ€è¦å‘é€ HTTPS è¯·æ±‚æ—¶ï¼ˆæ¯”å¦‚ï¼Œè·å–ä¸€ä¸ªç½‘ç«™çš„å†…å®¹ï¼Œæˆ–è€…å‘ç¬¬ä¸‰æ–¹æœåŠ¡ API å‘é€è¯·æ±‚ï¼‰ï¼Œ<code>https.globalAgent</code>å¯¹è±¡å°±ä¼šæ´¾ä¸Šç”¨åœºã€‚ å®ƒä½¿å¾—ä½ ä¸å¿…æ¯æ¬¡å‘é€è¯·æ±‚æ—¶éƒ½åˆ›å»ºæ–°çš„ Agent å®ä¾‹ï¼Œä»è€Œä¼˜åŒ–äº†èµ„æºåˆ©ç”¨å’Œæé«˜äº†æ€§èƒ½ã€‚</p><h3 id="å®é™…è¿ç”¨ä¾‹å­-3" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨ä¾‹å­-3"><span>å®é™…è¿ç”¨ä¾‹å­ï¼š</span></a></h3><h4 id="_1-å‘é€-https-get-è¯·æ±‚" tabindex="-1"><a class="header-anchor" href="#_1-å‘é€-https-get-è¯·æ±‚"><span>1. å‘é€ HTTPS GET è¯·æ±‚</span></a></h4><p>å‡è®¾ä½ æƒ³è·å– GitHub API çš„ä¿¡æ¯ï¼Œå¯ä»¥ä½¿ç”¨ Node.js çš„<code>https</code>æ¨¡å—å’Œ<code>https.globalAgent</code>æ¥å®ç°ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> https</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;https&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// è®¾ç½®å…¨å±€Agentçš„é€‰é¡¹ï¼Œæ¯”å¦‚æœ€å¤§socketæ•°é‡</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">https</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">globalAgent</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">maxSockets</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 50</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">https</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">    &quot;https://api.github.com/users/github&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    { </span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">agent</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">https</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">globalAgent</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    (</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">res</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">      let</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> data</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">      // æ¥æ”¶æ•°æ®</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">      res</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;data&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">chunk</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">        data</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> +=</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> chunk</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">      });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">      // æ•°æ®æ¥æ”¶å®Œæ¯•</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">      res</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;end&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        console</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">parse</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">data</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">      });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  )</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;error&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    console</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;Error: &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> err</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">message</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  });</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ä¸ªä¾‹å­å±•ç¤ºäº†å¦‚ä½•å‘é€ä¸€ä¸ªç®€å•çš„ GET è¯·æ±‚åˆ° GitHub çš„ç”¨æˆ· APIï¼Œå¹¶æ‰“å°è¿”å›çš„ç»“æœã€‚è¿™é‡Œï¼Œæˆ‘ä»¬æ²¡æœ‰ç›´æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„ Agentï¼Œè€Œæ˜¯ä½¿ç”¨äº†<code>https.globalAgent</code>ï¼Œå¹¶ä¸”è®¾ç½®äº†æœ€å¤§ socket æ•°é‡ä¸º 50ã€‚</p><h4 id="_2-è‡ªå®šä¹‰å…¨å±€-agent" tabindex="-1"><a class="header-anchor" href="#_2-è‡ªå®šä¹‰å…¨å±€-agent"><span>2. è‡ªå®šä¹‰å…¨å±€ Agent</span></a></h4><p>åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä½ å¯èƒ½éœ€è¦æ ¹æ®å…·ä½“éœ€æ±‚è°ƒæ•´ HTTPS Agent çš„å‚æ•°ï¼Œå¦‚è¿æ¥è¶…æ—¶æ—¶é—´ã€æœ€å¤§ socket æ•°ç­‰ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> https</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;https&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// è‡ªå®šä¹‰å…¨å±€Agentçš„é…ç½®</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">https</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">globalAgent</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">keepAlive</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">https</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">globalAgent</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">keepAliveMsecs</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 10000</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// ä¿æŒè¿æ¥10ç§’</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">https</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">globalAgent</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">maxSockets</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 30</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// æœ€å¤§socketæ•°é‡</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// å…¶ä»–ä»£ç ...</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é€šè¿‡ä¸Šé¢çš„ä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å¦‚ä½•è°ƒæ•´å…¨å±€ HTTPS Agent çš„ä¸€äº›å…³é”®å‚æ•°ï¼Œä»¥é€‚åº”ä¸åŒçš„ç½‘ç»œç¯å¢ƒå’Œæå‡æ€§èƒ½ã€‚</p><p>æ€»ç»“æ¥è¯´ï¼Œ<code>https.globalAgent</code>åœ¨ Node.js ä¸­æ˜¯ä¸€ä¸ªæä¾›äº†é»˜è®¤çš„å…¨å±€ HTTPS è¿æ¥ç®¡ç†çš„å¯¹è±¡ï¼Œé€šè¿‡åˆç†é…ç½®å’Œä½¿ç”¨ï¼Œå¯ä»¥åœ¨å¼€å‘ä¸­å¸¦æ¥å¾ˆå¤šä¾¿åˆ©ï¼Œå°¤å…¶æ˜¯åœ¨éœ€è¦é¢‘ç¹å‘èµ· HTTPS è¯·æ±‚çš„åœºæ™¯ä¸‹ã€‚</p><h2 id="https-request-options-callback" tabindex="-1"><a class="header-anchor" href="#https-request-options-callback"><span><a href="https://nodejs.org/docs/latest/api/https.html#httpsrequestoptions-callback" target="_blank" rel="noopener noreferrer">https.request(options[, callback])</a></span></a></h2><p>å½“ç„¶ï¼Œè®©æˆ‘ä»¬æ·±å…¥ç†è§£ Node.js ä¸­çš„<code>https.request(options[, callback])</code>æ–¹æ³•ã€‚</p><h3 id="åŸºæœ¬æ¦‚å¿µ" tabindex="-1"><a class="header-anchor" href="#åŸºæœ¬æ¦‚å¿µ"><span>åŸºæœ¬æ¦‚å¿µ</span></a></h3><p>åœ¨ Node.js ä¸­ï¼Œ<code>https</code>æ¨¡å—æä¾›äº†ä¸€ç§æ‰§è¡Œ HTTPS è¯·æ±‚ï¼ˆå³è¶…æ–‡æœ¬ä¼ è¾“åè®®å®‰å…¨ç‰ˆï¼‰çš„æ–¹å¼ã€‚è¿™æ˜¯ Web å¼€å‘ä¸­éå¸¸å¸¸è§çš„éœ€æ±‚ï¼Œå› ä¸º HTTPS åŠ å¯†äº†å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´çš„æ•°æ®äº¤æ¢ï¼Œä¿æŠ¤äº†æ•°æ®å…å—ç¬¬ä¸‰æ–¹çš„ç›‘å¬å’Œç¯¡æ”¹ã€‚</p><p><code>https.request()</code>æ–¹æ³•å°±æ˜¯è¿™ä¸ªæ¨¡å—ä¸­ç”¨æ¥åˆ›å»ºä¸€ä¸ª HTTPS è¯·æ±‚çš„å‡½æ•°ã€‚é€šè¿‡è¿™ä¸ªæ–¹æ³•ï¼Œä½ å¯ä»¥å‘è¿œç¨‹æœåŠ¡å™¨å‘é€è¯·æ±‚å¹¶æ¥æ”¶å“åº”ã€‚</p><h3 id="å‚æ•°è¯¦è§£" tabindex="-1"><a class="header-anchor" href="#å‚æ•°è¯¦è§£"><span>å‚æ•°è¯¦è§£</span></a></h3><ul><li><strong>options</strong>: è¿™æ˜¯ä¸€ä¸ªå¯¹è±¡æˆ–å­—ç¬¦ä¸²ï¼ŒæŒ‡å®šè¯·æ±‚å‘é€çš„ç›®çš„åœ°å’Œè¯·æ±‚çš„å„ç§ç»†èŠ‚ã€‚æ¯”å¦‚ä½ æƒ³è¯·æ±‚çš„ URLã€è¯·æ±‚æ–¹æ³•ï¼ˆGETã€POST ç­‰ï¼‰ã€å¤´ä¿¡æ¯ç­‰ã€‚</li><li><strong>callback</strong>: è¿™æ˜¯ä¸€ä¸ªå¯é€‰å‚æ•°ï¼Œä¸€ä¸ªåœ¨è¯·æ±‚å¾—åˆ°å“åº”æ—¶è¢« Node.js è‡ªåŠ¨è°ƒç”¨çš„å‡½æ•°ã€‚å®ƒé€šå¸¸ç”¨äºå¤„ç†å“åº”æ•°æ®ã€‚</li></ul><h3 id="å®é™…è¿ç”¨ç¤ºä¾‹-4" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨ç¤ºä¾‹-4"><span>å®é™…è¿ç”¨ç¤ºä¾‹</span></a></h3><h4 id="ç¤ºä¾‹-1-å‘é€-get-è¯·æ±‚" tabindex="-1"><a class="header-anchor" href="#ç¤ºä¾‹-1-å‘é€-get-è¯·æ±‚"><span>ç¤ºä¾‹ 1: å‘é€ GET è¯·æ±‚</span></a></h4><p>å‡è®¾ä½ æƒ³è·å–æŸä¸ª API æä¾›çš„å¤©æ°”ä¿¡æ¯ï¼ŒAPI çš„ URL æ˜¯<code>https://api.weather.com/current?city=London</code>ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> https</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;https&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// å®šä¹‰è¯·æ±‚çš„é€‰é¡¹</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> options</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">  hostname</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;api.weather.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">  path</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;/current?city=London&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">  method</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;GET&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// å‘é€è¯·æ±‚</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> req</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> https</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">request</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">options</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">res</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">  console</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">`çŠ¶æ€ç : </span><span style="--shiki-light:#032F62;--shiki-dark:#C678DD;">${</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">res</span><span style="--shiki-light:#032F62;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">statusCode</span><span style="--shiki-light:#032F62;--shiki-dark:#C678DD;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">`</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">  res</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;data&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">d</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    process</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">stdout</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">write</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">d</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// æ‰“å°è¿”å›çš„æ•°æ®</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">req</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;error&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">  console</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// é”™è¯¯å¤„ç†</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">req</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">end</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(); </span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// ä¸è¦å¿˜è®°ç»“æŸè¯·æ±‚</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="ç¤ºä¾‹-2-å‘é€-post-è¯·æ±‚" tabindex="-1"><a class="header-anchor" href="#ç¤ºä¾‹-2-å‘é€-post-è¯·æ±‚"><span>ç¤ºä¾‹ 2: å‘é€ POST è¯·æ±‚</span></a></h4><p>ç°åœ¨ï¼Œå‡è®¾ä½ éœ€è¦å‘ä¸€ä¸ª HTTPS æœåŠ¡å‘é€ä¸€äº›æ•°æ®ï¼Œæ¯”å¦‚æ³¨å†Œä¸€ä¸ªç”¨æˆ·ã€‚ä½ éœ€è¦ä½¿ç”¨ POST æ–¹æ³•ï¼Œå¹¶ä¸”å‘é€ä¸€äº›å¿…è¦çš„æ•°æ®ï¼ˆä¾‹å¦‚ç”¨æˆ·åå’Œå¯†ç ï¼‰ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> https</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;https&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> data</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">stringify</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">  username</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;newuser&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">  password</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;userpassword123&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> options</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">  hostname</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;example.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">  path</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;/register&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">  method</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;POST&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">  headers</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">    &quot;Content-Type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;application/json&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">    &quot;Content-Length&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">data</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">length</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> req</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> https</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">request</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">options</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">res</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">  console</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">`çŠ¶æ€ç : </span><span style="--shiki-light:#032F62;--shiki-dark:#C678DD;">${</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">res</span><span style="--shiki-light:#032F62;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">statusCode</span><span style="--shiki-light:#032F62;--shiki-dark:#C678DD;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">`</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">  res</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;data&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">d</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    process</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">stdout</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">write</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">d</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">req</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;error&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">  console</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">req</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">write</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">data</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// å†™å…¥æ•°æ®åˆ°è¯·æ±‚ä½“</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">req</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">end</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æ€»ç»“-3" tabindex="-1"><a class="header-anchor" href="#æ€»ç»“-3"><span>æ€»ç»“</span></a></h3><p>é€šè¿‡<code>https.request()</code>æ–¹æ³•ï¼Œä½ å¯ä»¥åœ¨ Node.js ä¸­åˆ›å»ºå¤æ‚çš„ HTTPS è¯·æ±‚ï¼Œä¸ä¸–ç•Œä¸Šä»»ä½•æ”¯æŒ HTTPS çš„æœåŠ¡è¿›è¡Œå®‰å…¨çš„æ•°æ®äº¤æ¢ã€‚é€šè¿‡æ­£ç¡®åœ°é…ç½®<code>options</code>å¯¹è±¡å’Œåˆé€‚åœ°å¤„ç†å›è°ƒï¼Œä½ èƒ½å¤Ÿå®ç°ä»ç®€å•çš„æ•°æ®è·å–åˆ°å¤æ‚çš„ API äº¤äº’ç­‰å¤šç§ç½‘ç»œæ“ä½œã€‚</p><h2 id="https-request-url-options-callback" tabindex="-1"><a class="header-anchor" href="#https-request-url-options-callback"><span><a href="https://nodejs.org/docs/latest/api/https.html#httpsrequesturl-options-callback" target="_blank" rel="noopener noreferrer">https.request(url[, options][, callback])</a></span></a></h2><p>Node.js æ˜¯ä¸€ä¸ªåŸºäº Chrome çš„ V8 JavaScript å¼•æ“çš„ JavaScript è¿è¡Œç¯å¢ƒã€‚å®ƒè®©æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ JavaScript æ¥ç¼–å†™æœåŠ¡å™¨ç«¯çš„ä»£ç ã€‚</p><p>åœ¨ Node.js ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦ä»å…¶ä»–æœåŠ¡å™¨è¯·æ±‚æ•°æ®æˆ–èµ„æºï¼Œæ¯”å¦‚ä» API è·å–å¤©æ°”ä¿¡æ¯ã€ä»æ•°æ®åº“æœåŠ¡å™¨è·å–æ•°æ®ç­‰ã€‚è¿™æ—¶å€™æˆ‘ä»¬å°±éœ€è¦è¿›è¡Œç½‘ç»œè¯·æ±‚ã€‚Node.js æä¾›äº†å¤šç§æ–¹å¼æ¥å‘é€ç½‘ç»œè¯·æ±‚ï¼Œå…¶ä¸­ <code>https</code> æ¨¡å—ç”¨äºå¤„ç†é€šè¿‡ HTTPS åè®®å‘èµ·çš„å®‰å…¨ç½‘ç»œè¯·æ±‚ã€‚</p><p><code>https.request</code> æ–¹æ³•æ˜¯ <code>https</code> æ¨¡å—çš„ä¸€ä¸ªåŠŸèƒ½ï¼Œå®ƒç”¨äºåˆ›å»ºä¸€ä¸ª HTTPS è¯·æ±‚ã€‚ä½¿ç”¨è¿™ä¸ªæ–¹æ³•ï¼Œä½ å¯ä»¥å‘ä»»æ„ä¸€ä¸ª HTTPS æœåŠ¡å‘èµ·è¯·æ±‚ï¼Œå¹¶ä¸”å¯ä»¥å®šåˆ¶ä½ çš„è¯·æ±‚ï¼Œæ¯”å¦‚è®¾ç½®è¯·æ±‚å¤´ã€è¯·æ±‚æ–¹æ³•ã€è¯·æ±‚ä½“ç­‰ã€‚</p><p>ä¸‹é¢æ˜¯ <code>https.request</code> æ–¹æ³•çš„ä¸€èˆ¬ä½¿ç”¨å½¢å¼ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> https</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;https&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ URL å­—ç¬¦ä¸²æˆ–è€…æ˜¯ä¸€ä¸ªåŒ…å«è¯·æ±‚ç»†èŠ‚çš„å¯¹è±¡</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> options</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">  hostname</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;example.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">  port</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">443</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// é»˜è®¤çš„ HTTPS ç«¯å£æ˜¯ 443</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">  path</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;/todos&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// API è·¯å¾„</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">  method</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;GET&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// HTTP è¯·æ±‚æ–¹æ³•</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// å‘èµ·è¯·æ±‚</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;"> req</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> https</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">request</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">options</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">res</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">  console</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">`çŠ¶æ€ç : </span><span style="--shiki-light:#032F62;--shiki-dark:#C678DD;">${</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">res</span><span style="--shiki-light:#032F62;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">statusCode</span><span style="--shiki-light:#032F62;--shiki-dark:#C678DD;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">`</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">  res</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;data&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">d</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">    process</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">stdout</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">write</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">d</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// è¾“å‡ºå“åº”æ­£æ–‡æ•°æ®</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">req</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;error&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">  console</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">req</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">end</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(); </span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// å®Œæˆè¯·æ±‚çš„å‘é€</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å¯¼å…¥äº† <code>https</code> æ¨¡å—ï¼Œç„¶åå®šä¹‰äº†ä¸€ä¸ª <code>options</code> å¯¹è±¡ï¼Œè¯¥å¯¹è±¡åŒ…å«æˆ‘ä»¬æƒ³è¦è¯·æ±‚çš„æœåŠ¡çš„ç»†èŠ‚ã€‚åœ¨ <code>https.request</code> ä¸­ä¼ å…¥è¿™äº›é€‰é¡¹ä¹‹åï¼Œæä¾›äº†ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°ä¼šåœ¨æ”¶åˆ°å“åº”æ—¶è¢«è°ƒç”¨ã€‚</p><p>å“åº”å¯¹è±¡ï¼ˆ<code>res</code>ï¼‰ä¼šå‘å‡º <code>&#39;data&#39;</code> äº‹ä»¶ï¼Œè¡¨ç¤ºæœåŠ¡å™¨å‘é€äº†æ•°æ®ç‰‡æ®µç»™å®¢æˆ·ç«¯ã€‚æˆ‘ä»¬ä½¿ç”¨ <code>res.on(&#39;data&#39;, callback)</code> æ¥ç›‘å¬è¿™äº›æ•°æ®ç‰‡æ®µï¼Œå¹¶å°†å…¶è¾“å‡ºåˆ°æ§åˆ¶å°ã€‚</p><p>æœ€åï¼Œæˆ‘ä»¬ç›‘å¬äº†è¯·æ±‚ä¸Šå¯èƒ½å‡ºç°çš„ <code>&#39;error&#39;</code> äº‹ä»¶ï¼Œå¦‚æœè¯·æ±‚è¿‡ç¨‹ä¸­æœ‰ä»»ä½•é”™è¯¯å‘ç”Ÿï¼ˆæ¯”å¦‚ç½‘ç»œé—®é¢˜ï¼‰ï¼Œæˆ‘ä»¬ä¼šåœ¨æ§åˆ¶å°ä¸Šæ‰“å°å‡ºè¿™ä¸ªé”™è¯¯ã€‚</p><p><code>req.end()</code> æ–¹æ³•ç”¨äºæ ‡è®°è¯·æ±‚æ¶ˆæ¯çš„ç»“æŸï¼Œå³ä½¿æ²¡æœ‰ä»»ä½•æ•°æ®è¢«å†™å…¥è¯·æ±‚ä½“ä¹Ÿå¿…é¡»è°ƒç”¨å®ƒã€‚å¦‚æœè¯·æ±‚æœ‰è¯·æ±‚ä½“ï¼ˆæ¯”å¦‚ POST è¯·æ±‚ï¼‰ï¼Œé‚£ä¹ˆåœ¨è°ƒç”¨ <code>req.end()</code> ä¹‹å‰å¯ä»¥ä½¿ç”¨ <code>req.write(data)</code> å†™å…¥è¯·æ±‚ä½“æ•°æ®ã€‚</p><p>ä»¥ä¸Šå°±æ˜¯ <code>https.request</code> æ–¹æ³•çš„åŸºæœ¬ä½¿ç”¨è¯´æ˜ã€‚é€šè¿‡åˆé€‚çš„é…ç½®å’Œç›‘å¬ä¸åŒçš„äº‹ä»¶ï¼Œä½ å¯ä»¥æ„å»ºå¤æ‚çš„ HTTP è¯·æ±‚å¹¶å¤„ç†æ¥è‡ªæœåŠ¡å™¨çš„å“åº”ã€‚</p></div><!----><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="update-time"><span class="vp-meta-label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><!----></div><div class="contributors"><span class="vp-meta-label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="vp-meta-info" title="email: kamiacgxu@gmail.com">kamishima-kaede</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><a class="route-link auto-link prev" href="/document/node-doc/HTTP.html" aria-label="HTTP"><div class="hint"><span class="arrow start"></span>ä¸Šä¸€é¡µ</div><div class="link"><!---->HTTP</div></a><a class="route-link auto-link next" href="/document/node-doc/Inspector.html" aria-label="Inspector"><div class="hint">ä¸‹ä¸€é¡µ<span class="arrow end"></span></div><div class="link">Inspector<!----></div></a></nav><!----><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper"><!----><div class="vp-copyright">Copyright Â© 2018-present hanekawa-shiki</div></footer></div><!--]--><!--]--><!--[--><!----><!----><!--]--><!--]--></div>
    <script src="/assets/js/runtime~app.e98858ae.js" defer></script><script src="/assets/js/9435.209d772b.js" defer></script><script src="/assets/js/app.604dc302.js" defer></script>
  </body>
</html>
