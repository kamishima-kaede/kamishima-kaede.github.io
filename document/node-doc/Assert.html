<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.14" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.49" />
    <style>
      html {
        background: var(--bg-color, #fff);
      }

      html[data-theme="dark"] {
        background: var(--bg-color, #1d1e1f);
      }

      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta property="og:url" content="https://hanekawa.top/document/node-doc/Assert.html"><meta property="og:site_name" content="hanekawa-shiki"><meta property="og:title" content="Assert"><meta property="og:description" content="Assert Node.js ä¸­çš„ assert æ¨¡å—æ˜¯ä¸€ä¸ªç”¨äºè¿›è¡Œå„ç§æ–­è¨€æµ‹è¯•çš„å·¥å…·ã€‚æ–­è¨€æµ‹è¯•é€šå¸¸ç”¨äºç¼–å†™è‡ªåŠ¨åŒ–æµ‹è¯•ä»£ç ï¼Œç¡®ä¿ç¨‹åºä¸­çš„æŸä¸ªéƒ¨åˆ†å¦‚é¢„æœŸèˆ¬å·¥ä½œã€‚å¦‚æœä½ æƒ³éªŒè¯ä½ çš„å‡½æ•°æˆ–è€…ä»£ç å—è¿”å›äº†æ­£ç¡®çš„ç»“æœï¼Œæˆ–è€…æŸäº›å˜é‡åŒ…å«äº†æ­£ç¡®çš„å€¼ï¼Œé‚£ä¹ˆä½ å¯ä»¥ä½¿ç”¨ assert æ¨¡å—ã€‚ ä»¥ä¸‹æ˜¯è¯¥æ¨¡å—åœ¨ Node.js v21.7.1 ä¸­å¯ç”¨çš„ä¸€äº›æ–¹æ³•å’Œç®€å•ä¾‹å­ï¼š as..."><meta property="og:type" content="website"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2024-06-21T09:46:17.000Z"><meta property="article:author" content="hanekawa-shiki"><meta property="article:modified_time" content="2024-06-21T09:46:17.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"WebPage","name":"Assert","description":"Assert Node.js ä¸­çš„ assert æ¨¡å—æ˜¯ä¸€ä¸ªç”¨äºè¿›è¡Œå„ç§æ–­è¨€æµ‹è¯•çš„å·¥å…·ã€‚æ–­è¨€æµ‹è¯•é€šå¸¸ç”¨äºç¼–å†™è‡ªåŠ¨åŒ–æµ‹è¯•ä»£ç ï¼Œç¡®ä¿ç¨‹åºä¸­çš„æŸä¸ªéƒ¨åˆ†å¦‚é¢„æœŸèˆ¬å·¥ä½œã€‚å¦‚æœä½ æƒ³éªŒè¯ä½ çš„å‡½æ•°æˆ–è€…ä»£ç å—è¿”å›äº†æ­£ç¡®çš„ç»“æœï¼Œæˆ–è€…æŸäº›å˜é‡åŒ…å«äº†æ­£ç¡®çš„å€¼ï¼Œé‚£ä¹ˆä½ å¯ä»¥ä½¿ç”¨ assert æ¨¡å—ã€‚ ä»¥ä¸‹æ˜¯è¯¥æ¨¡å—åœ¨ Node.js v21.7.1 ä¸­å¯ç”¨çš„ä¸€äº›æ–¹æ³•å’Œç®€å•ä¾‹å­ï¼š as..."}</script><meta name="keywords" content="JavaScript,HTML,CSS"><link rel="icon" href="/favicon.ico"><link rel="icon" href="/assets/icons/chrome-192.png" type="image/png" sizes="192x192"><link rel="icon" href="/assets/icons/chrome-512.png" type="image/png" sizes="512x512"><link rel="icon" href="/assets/icons/chrome-mask-192.png" type="image/png" sizes="192x192"><link rel="icon" href="/assets/icons/chrome-mask-512.png" type="image/png" sizes="512x512"><link rel="manifest" href="/manifest.webmanifest" crossorigin="use-credentials"><meta name="theme-color" content="#5c92d1"><link rel="apple-touch-icon" href="/assets/icons/apple-touch-icon.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="white"><meta name="msapplication-TileImage" content="/assets/icons/ms-icon-144.png"><meta name="msapplication-TileColor" content="#ffffff"><title>Assert | hanekawa-shiki</title><meta name="description" content="Assert Node.js ä¸­çš„ assert æ¨¡å—æ˜¯ä¸€ä¸ªç”¨äºè¿›è¡Œå„ç§æ–­è¨€æµ‹è¯•çš„å·¥å…·ã€‚æ–­è¨€æµ‹è¯•é€šå¸¸ç”¨äºç¼–å†™è‡ªåŠ¨åŒ–æµ‹è¯•ä»£ç ï¼Œç¡®ä¿ç¨‹åºä¸­çš„æŸä¸ªéƒ¨åˆ†å¦‚é¢„æœŸèˆ¬å·¥ä½œã€‚å¦‚æœä½ æƒ³éªŒè¯ä½ çš„å‡½æ•°æˆ–è€…ä»£ç å—è¿”å›äº†æ­£ç¡®çš„ç»“æœï¼Œæˆ–è€…æŸäº›å˜é‡åŒ…å«äº†æ­£ç¡®çš„å€¼ï¼Œé‚£ä¹ˆä½ å¯ä»¥ä½¿ç”¨ assert æ¨¡å—ã€‚ ä»¥ä¸‹æ˜¯è¯¥æ¨¡å—åœ¨ Node.js v21.7.1 ä¸­å¯ç”¨çš„ä¸€äº›æ–¹æ³•å’Œç®€å•ä¾‹å­ï¼š as...">
    <link rel="stylesheet" href="/assets/css/styles.a84c0532.css">
    <link rel="preload" href="/assets/js/runtime~app.b7c0d7f2.js" as="script"><link rel="preload" href="/assets/css/styles.a84c0532.css" as="style"><link rel="preload" href="/assets/js/4485.d2710361.js" as="script"><link rel="preload" href="/assets/js/app.ed12edd2.js" as="script">
    
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><!--[--><div class="theme-container external-link-icon has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><!--[--><a class="route-link vp-brand" href="/"><img class="vp-nav-logo light" src="/assets/svg/logo.svg" alt><img class="vp-nav-logo dark" src="/assets/svg/logo.svg" alt><span class="vp-site-name hide-in-pad">hanekawa-shiki</span></a><!--]--><!----></div><div class="vp-navbar-center"><!----><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/" aria-label="åšå®¢ä¸»é¡µ"><!--[--><span class="font-icon icon home" style=""></span><!--]-->åšå®¢ä¸»é¡µ<!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="å­¦ä¹ ç¬”è®°"><!--[--><span class="font-icon icon framework" style=""></span>å­¦ä¹ ç¬”è®°<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">å‰ç«¯æ¡†æ¶</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/framework_front/vue3/" aria-label="Vue3ç¬”è®°"><!--[--><span class="font-icon icon vue" style=""></span><!--]-->Vue3ç¬”è®°<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/framework_front/react/" aria-label="Reactç¬”è®°"><!--[--><span class="font-icon icon react" style=""></span><!--]-->Reactç¬”è®°<!----></a></li></ul></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="æ–‡æ¡£"><!--[--><span class="font-icon icon framework" style=""></span>æ–‡æ¡£<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">æ¬è¿</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link route-link-active auto-link" href="/document/node-doc/" aria-label="Node.jsæ–‡æ¡£"><!--[--><span class="font-icon icon circle-info" style=""></span><!--]-->Node.jsæ–‡æ¡£<!----></a></li></ul></li></ul></button></div></div></nav><!--]--><!----></div><div class="vp-navbar-end"><!----><!--[--><!----><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com/hanekawa-shiki/hanekawa-shiki.github.io" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" name="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-color-mode-switch" id="color-mode-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" name="auto" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" name="dark" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" name="light" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!----><!--]--><!----><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!----><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/" aria-label="Node.jsæ–‡æ¡£"><!--[--><span class="font-icon icon circle-info" style=""></span><!--]-->Node.jsæ–‡æ¡£<!----></a></li><li><a class="route-link route-link-active auto-link vp-sidebar-link active" href="/document/node-doc/Assert.html" aria-label="Assert"><!---->Assert<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Async%20hooks.html" aria-label="Async hooks"><!---->Async hooks<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Asynchronous%20context%20tracking.html" aria-label="Asynchronous context tracking"><!---->Asynchronous context tracking<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Buffer.html" aria-label="Buffer"><!---->Buffer<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/C__%20addons.html" aria-label="C++ addons"><!---->C++ addons<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/C__%20embedder%20API.html" aria-label="C++ embedder API"><!---->C++ embedder API<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Child%20process.html" aria-label="Child process"><!---->Child process<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Cluster.html" aria-label="Cluster"><!---->Cluster<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Command-line%20API.html" aria-label="Command-line API"><!---->Command-line API<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Console.html" aria-label="Console"><!---->Console<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Corepack.html" aria-label="Corepack"><!---->Corepack<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Crypto.html" aria-label="Crypto"><!---->Crypto<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Debugger.html" aria-label="Debugger"><!---->Debugger<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Deprecated%20APIs.html" aria-label="Deprecated APIs"><!---->Deprecated APIs<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Diagnostic%20report.html" aria-label="Diagnostic report"><!---->Diagnostic report<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Diagnostics%20Channel.html" aria-label="Diagnostics Channel"><!---->Diagnostics Channel<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/DNS.html" aria-label="DNS"><!---->DNS<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Domain.html" aria-label="Domain"><!---->Domain<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Errors.html" aria-label="Errors"><!---->Errors<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Events.html" aria-label="Events"><!---->Events<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/File%20system.html" aria-label="File system"><!---->File system<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Global%20objects.html" aria-label="Global objects"><!---->Global objects<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/HTTP.html" aria-label="HTTP"><!---->HTTP<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/HTTPS.html" aria-label="HTTPS"><!---->HTTPS<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Inspector.html" aria-label="Inspector"><!---->Inspector<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Internationalization%20support.html" aria-label="Internationalization support"><!---->Internationalization support<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Modules_%20CommonJS%20modules.html" aria-label="Modules: CommonJS modules"><!---->Modules: CommonJS modules<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Modules_%20ECMAScript%20modules.html" aria-label="Modules: ECMAScript modules"><!---->Modules: ECMAScript modules<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Modules_%20node_module%20API.html" aria-label="Modules: node:module API"><!---->Modules: node:module API<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Modules_%20Packages.html" aria-label="Modules: Packages"><!---->Modules: Packages<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Net.html" aria-label="Net"><!---->Net<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Node-API.html" aria-label="Node-API"><!---->Node-API<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/OS.html" aria-label="OS"><!---->OS<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Path.html" aria-label="Path"><!---->Path<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Performance%20measurement%20APIs.html" aria-label="Performance measurement APIs"><!---->Performance measurement APIs<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Permissions.html" aria-label="Permissions"><!---->Permissions<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Process.html" aria-label="Process"><!---->Process<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Punycode.html" aria-label="Punycode"><!---->Punycode<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Query%20string.html" aria-label="Query string"><!---->Query string<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Readline.html" aria-label="Readline"><!---->Readline<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/REPL.html" aria-label="REPL"><!---->REPL<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Stream.html" aria-label="Stream"><!---->Stream<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/String%20decoder.html" aria-label="String decoder"><!---->String decoder<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Test%20runner.html" aria-label="Test runner"><!---->Test runner<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Timers.html" aria-label="Timers"><!---->Timers<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/TLS%20(SSL).html" aria-label="TLS (SSL)"><!---->TLS (SSL)<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Trace%20events.html" aria-label="Trace events"><!---->Trace events<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/TTY.html" aria-label="TTY"><!---->TTY<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/URL.html" aria-label="URL"><!---->URL<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Util.html" aria-label="Util"><!---->Util<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/V8.html" aria-label="V8"><!---->V8<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/VM%20(executing%20JavaScript).html" aria-label="VM (executing JavaScript)"><!---->VM (executing JavaScript)<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Web%20Crypto%20API.html" aria-label="Web Crypto API"><!---->Web Crypto API<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Web%20Streams%20API.html" aria-label="Web Streams API"><!---->Web Streams API<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/WebAssembly%20System%20Interface%20(WASI).html" aria-label="WebAssembly System Interface (WASI)"><!---->WebAssembly System Interface (WASI)<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Worker%20threads.html" aria-label="Worker threads"><!---->Worker threads<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/document/node-doc/Zlib.html" aria-label="Zlib"><!---->Zlib<!----></a></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->Assert</h1><div class="page-info"><span class="page-author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon" name="author"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://hanekawa.top" target="_blank" rel="noopener noreferrer">hanekawa-shiki</a></span><span property="author" content="hanekawa-shiki"></span></span><!----><span class="page-date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2024-06-21T09:46:17.000Z"></span><!----><!----><span class="page-reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 68 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT68M"></span><span class="page-word-info" aria-label="å­—æ•°ğŸ” " data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon word-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="word icon" name="word"><path d="M518.217 432.64V73.143A73.143 73.143 0 01603.43 1.097a512 512 0 01419.474 419.474 73.143 73.143 0 01-72.046 85.212H591.36a73.143 73.143 0 01-73.143-73.143z"></path><path d="M493.714 566.857h340.297a73.143 73.143 0 0173.143 85.577A457.143 457.143 0 11371.566 117.76a73.143 73.143 0 0185.577 73.143v339.383a36.571 36.571 0 0036.571 36.571z"></path></svg><span>çº¦ 20363 å­—</span><meta property="wordCount" content="20363"></span><!----></div><hr></div><div class="vp-toc-placeholder"><aside id="toc"><!----><div class="vp-toc-header">æ­¤é¡µå†…å®¹<button type="button" class="print-button" title="æ‰“å°"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon" name="print"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button><div class="arrow end"></div></div><div class="vp-toc-wrapper"><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#strict-assertion-mode">Strict assertion mode</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#éä¸¥æ ¼æ–­è¨€ç¤ºä¾‹">éä¸¥æ ¼æ–­è¨€ç¤ºä¾‹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä¸¥æ ¼æ–­è¨€ç¤ºä¾‹">ä¸¥æ ¼æ–­è¨€ç¤ºä¾‹</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#legacy-assertion-mode">Legacy assertion mode</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…ä¾‹å­">å®é™…ä¾‹å­</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#class-assert-assertionerror">Class: assert.AssertionError</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#new-assert-assertionerror-options">new assert.AssertionError(options)</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#class-assert-calltracker">Class: assert.CallTracker</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#new-assert-calltracker">new assert.CallTracker()</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#tracker-calls-fn-exact">tracker.calls([fn][, exact])</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#tracker-getcalls-fn">tracker.getCalls(fn)</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#tracker-report">tracker.report()</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#tracker-reset-fn">tracker.reset([fn])</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#tracker-verify">tracker.verify()</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#assert-value-message">assert(value[, message])</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#assert-deepequal-actual-expected-message">assert.deepEqual(actual, expected[, message])</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#comparison-details">Comparison details</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-strict-æ¨¡å¼">1. Strict æ¨¡å¼ï¼š</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-legacy-æ¨¡å¼">2. Legacy æ¨¡å¼ï¼š</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…è¿ç”¨ä¾‹å­">å®é™…è¿ç”¨ä¾‹å­ï¼š</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#assert-deepstrictequal-actual-expected-message">assert.deepStrictEqual(actual, expected[, message])</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å‚æ•°è§£é‡Š">å‚æ•°è§£é‡Š</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä½œç”¨">ä½œç”¨</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…è¿ç”¨çš„ä¾‹å­">å®é™…è¿ç”¨çš„ä¾‹å­</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#æ³¨æ„äº‹é¡¹">æ³¨æ„äº‹é¡¹</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#comparison-details-1">Comparison details</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-assert-strictequal-å’Œ-assert-notstrictequal">1. assert.strictEqual() å’Œ assert.notStrictEqual()</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-assert-deepequal-å’Œ-assert-notdeepequal">2. assert.deepEqual() å’Œ assert.notDeepEqual()</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3-assert-deepstrictequal-å’Œ-assert-notdeepstrictequal">3. assert.deepStrictEqual() å’Œ assert.notDeepStrictEqual()</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#assert-doesnotmatch-string-regexp-message">assert.doesNotMatch(string, regexp[, message])</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å‚æ•°è§£é‡Š-1">å‚æ•°è§£é‡Š</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä½¿ç”¨åœºæ™¯å’Œä¾‹å­">ä½¿ç”¨åœºæ™¯å’Œä¾‹å­</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#assert-doesnotreject-asyncfn-error-message">assert.doesNotReject(asyncFn[, error][, message])</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#assert-doesnotthrow-fn-error-message">assert.doesNotThrow(fn[, error][, message])</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä¾‹å­-1-ä¸€ä¸ªä¸æŠ›å‡ºé”™è¯¯çš„å‡½æ•°">ä¾‹å­ 1ï¼šä¸€ä¸ªä¸æŠ›å‡ºé”™è¯¯çš„å‡½æ•°</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä¾‹å­-2-ä¸€ä¸ªæŠ›å‡ºé”™è¯¯çš„å‡½æ•°">ä¾‹å­ 2ï¼šä¸€ä¸ªæŠ›å‡ºé”™è¯¯çš„å‡½æ•°</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä¾‹å­-3-ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ä½œä¸ºé”™è¯¯å‚æ•°">ä¾‹å­ 3ï¼šä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ä½œä¸ºé”™è¯¯å‚æ•°</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#assert-equal-actual-expected-message">assert.equal(actual, expected[, message])</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä¾‹å­-1-åŸºæœ¬ä½¿ç”¨">ä¾‹å­ 1: åŸºæœ¬ä½¿ç”¨</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä¾‹å­-2-åœ¨æ²¡æœ‰æä¾›é”™è¯¯ä¿¡æ¯çš„æƒ…å†µä¸‹ä½¿ç”¨">ä¾‹å­ 2: åœ¨æ²¡æœ‰æä¾›é”™è¯¯ä¿¡æ¯çš„æƒ…å†µä¸‹ä½¿ç”¨</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä¾‹å­-3-åœ¨å¼‚æ­¥ä»£ç ä¸­ä½¿ç”¨">ä¾‹å­ 3: åœ¨å¼‚æ­¥ä»£ç ä¸­ä½¿ç”¨</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#assert-fail-message">assert.fail([message])</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä¾‹å­-1-æµ‹è¯•é”™è¯¯å¤„ç†">ä¾‹å­ 1ï¼šæµ‹è¯•é”™è¯¯å¤„ç†</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä¾‹å­-2-ç¡®ä¿ä»£ç çš„æŸéƒ¨åˆ†ä¸è¢«æ‰§è¡Œ">ä¾‹å­ 2ï¼šç¡®ä¿ä»£ç çš„æŸéƒ¨åˆ†ä¸è¢«æ‰§è¡Œ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#æ€»ç»“">æ€»ç»“</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#assert-fail-actual-expected-message-operator-stackstartfn">assert.fail(actual, expected[, message[, operator[, stackStartFn]]])</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å‡½æ•°å‚æ•°">å‡½æ•°å‚æ•°</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä½¿ç”¨æ–¹å¼å’Œä¾‹å­">ä½¿ç”¨æ–¹å¼å’Œä¾‹å­</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#assert-iferror-value">assert.ifError(value)</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ç¤ºä¾‹-1-è¯»å–æ–‡ä»¶">ç¤ºä¾‹ 1ï¼šè¯»å–æ–‡ä»¶</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ç¤ºä¾‹-2-æ•°æ®åº“æŸ¥è¯¢">ç¤ºä¾‹ 2ï¼šæ•°æ®åº“æŸ¥è¯¢</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#æ³¨æ„äº‹é¡¹-1">æ³¨æ„äº‹é¡¹ï¼š</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#assert-match-string-regexp-message">assert.match(string, regexp[, message])</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#assert-notdeepequal-actual-expected-message">assert.notDeepEqual(actual, expected[, message])</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#assert-notdeepstrictequal-actual-expected-message">assert.notDeepStrictEqual(actual, expected[, message])</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ç¤ºä¾‹-1-æ¯”è¾ƒç®€å•çš„æ•°æ®">ç¤ºä¾‹ 1ï¼šæ¯”è¾ƒç®€å•çš„æ•°æ®</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ç¤ºä¾‹-2-æ¯”è¾ƒæ•°ç»„">ç¤ºä¾‹ 2ï¼šæ¯”è¾ƒæ•°ç»„</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ç¤ºä¾‹-3-æ¯”è¾ƒå¯¹è±¡">ç¤ºä¾‹ 3ï¼šæ¯”è¾ƒå¯¹è±¡</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ç¤ºä¾‹-4-æ¯”è¾ƒåµŒå¥—ç»“æ„">ç¤ºä¾‹ 4ï¼šæ¯”è¾ƒåµŒå¥—ç»“æ„</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#assert-notequal-actual-expected-message">assert.notEqual(actual, expected[, message])</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä¾‹å­-1-åŸºæœ¬ç”¨æ³•">ä¾‹å­ 1: åŸºæœ¬ç”¨æ³•</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä¾‹å­-2-è‡ªå®šä¹‰é”™è¯¯ä¿¡æ¯">ä¾‹å­ 2: è‡ªå®šä¹‰é”™è¯¯ä¿¡æ¯</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä¾‹å­-3-æµ‹è¯•å¯¹è±¡ä¸ç›¸ç­‰">ä¾‹å­ 3: æµ‹è¯•å¯¹è±¡ä¸ç›¸ç­‰</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#assert-notstrictequal-actual-expected-message">assert.notStrictEqual(actual, expected[, message])</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ç”¨æ³•">ç”¨æ³•ï¼š</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å®é™…ä¾‹å­-1">å®é™…ä¾‹å­ï¼š</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#assert-ok-value-message">assert.ok(value[, message])</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä¾‹å­-1-æ–­è¨€ä¸€ä¸ªå€¼ä¸ºçœŸ">ä¾‹å­ 1: æ–­è¨€ä¸€ä¸ªå€¼ä¸ºçœŸ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä¾‹å­-2-æ–­è¨€å¤±è´¥å¹¶æŠ›å‡ºè‡ªå®šä¹‰é”™è¯¯ä¿¡æ¯">ä¾‹å­ 2: æ–­è¨€å¤±è´¥å¹¶æŠ›å‡ºè‡ªå®šä¹‰é”™è¯¯ä¿¡æ¯</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#assert-rejects-asyncfn-error-message">assert.rejects(asyncFn[, error][, message])</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#assert-strictequal-actual-expected-message">assert.strictEqual(actual, expected[, message])</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#è¯¦ç»†è§£é‡Š">è¯¦ç»†è§£é‡Šï¼š</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä¸ºä»€ä¹ˆè¦ç”¨-assert-strictequal">ä¸ºä»€ä¹ˆè¦ç”¨ assert.strictEqualï¼Ÿ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä¾‹å­">ä¾‹å­ï¼š</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#æ³¨æ„äº‹é¡¹-2">æ³¨æ„äº‹é¡¹ï¼š</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#assert-throws-fn-error-message">assert.throws(fn[, error][, message])</a></li><!----><!--]--></ul><div class="vp-toc-marker" style="top:-1.7rem;"></div></div><!----></aside></div><!----><div class="theme-hope-content"><h1 id="assert" tabindex="-1"><a class="header-anchor" href="#assert"><span><a href="https://nodejs.org/docs/latest/api/assert.html#assert" target="_blank" rel="noopener noreferrer">Assert</a></span></a></h1><p>Node.js ä¸­çš„ <code>assert</code> æ¨¡å—æ˜¯ä¸€ä¸ªç”¨äºè¿›è¡Œå„ç§æ–­è¨€æµ‹è¯•çš„å·¥å…·ã€‚æ–­è¨€æµ‹è¯•é€šå¸¸ç”¨äºç¼–å†™è‡ªåŠ¨åŒ–æµ‹è¯•ä»£ç ï¼Œç¡®ä¿ç¨‹åºä¸­çš„æŸä¸ªéƒ¨åˆ†å¦‚é¢„æœŸèˆ¬å·¥ä½œã€‚å¦‚æœä½ æƒ³éªŒè¯ä½ çš„å‡½æ•°æˆ–è€…ä»£ç å—è¿”å›äº†æ­£ç¡®çš„ç»“æœï¼Œæˆ–è€…æŸäº›å˜é‡åŒ…å«äº†æ­£ç¡®çš„å€¼ï¼Œé‚£ä¹ˆä½ å¯ä»¥ä½¿ç”¨ <code>assert</code> æ¨¡å—ã€‚</p><p>ä»¥ä¸‹æ˜¯è¯¥æ¨¡å—åœ¨ Node.js v21.7.1 ä¸­å¯ç”¨çš„ä¸€äº›æ–¹æ³•å’Œç®€å•ä¾‹å­ï¼š</p><ol><li><p><code>assert(value, message)</code>ï¼šè¿™æ˜¯æœ€åŸºç¡€çš„æ–­è¨€å½¢å¼ï¼Œå®ƒæ£€æŸ¥ <code>value</code> æ˜¯å¦ä¸ºçœŸï¼Œå¦‚æœä¸ä¸ºçœŸï¼Œåˆ™æŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼ˆå¯é€‰åœ°æºå¸¦ <code>message</code> æ–‡æœ¬ï¼‰ã€‚</p><p>ä¸¾ä¾‹ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> assert</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">assert</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªå‡½æ•°checkTrueï¼Œåº”è¯¥è¿”å›true</span></span>
<span class="line"><span style="color:#81A1C1;">function</span><span style="color:#88C0D0;"> checkTrue</span><span style="color:#ECEFF4;">()</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  return</span><span style="color:#81A1C1;"> true;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// è¿™ä¼šé€šè¿‡å› ä¸ºcheckTrueè¿”å›äº†true</span></span>
<span class="line"><span style="color:#88C0D0;">assert</span><span style="color:#D8DEE9FF;">(</span><span style="color:#88C0D0;">checkTrue</span><span style="color:#D8DEE9FF;">()</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">checkTrue did not return true</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å‡å¦‚checkTrueè¿”å›äº†falseï¼Œè¿™è¡Œä»£ç å°†ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ä¿¡æ¯â€œAssertion failed: checkTrue did not return trueâ€</span></span>
<span class="line"><span style="color:#88C0D0;">assert</span><span style="color:#D8DEE9FF;">(</span><span style="color:#88C0D0;">checkTrue</span><span style="color:#D8DEE9FF;">()</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">checkTrue did not return true</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><code>assert.deepEqual(actual, expected, message)</code>ï¼šç”¨æ¥æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡çš„å†…å®¹æ˜¯å¦ç›¸ç­‰ã€‚å®ƒä¸è€ƒè™‘å¯¹è±¡çš„å¼•ç”¨æ˜¯å¦ç›¸åŒï¼Œåªå…³å¿ƒç»“æ„å’Œå€¼ã€‚</p><p>ä¸¾ä¾‹ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> assert</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">assert</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> obj1</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> {</span><span style="color:#88C0D0;"> a</span><span style="color:#ECEFF4;">:</span><span style="color:#B48EAD;"> 1</span><span style="color:#ECEFF4;">,</span><span style="color:#88C0D0;"> b</span><span style="color:#ECEFF4;">:</span><span style="color:#B48EAD;"> 2</span><span style="color:#ECEFF4;"> }</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> obj2</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> {</span><span style="color:#88C0D0;"> a</span><span style="color:#ECEFF4;">:</span><span style="color:#B48EAD;"> 1</span><span style="color:#ECEFF4;">,</span><span style="color:#88C0D0;"> b</span><span style="color:#ECEFF4;">:</span><span style="color:#B48EAD;"> 2</span><span style="color:#ECEFF4;"> }</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// è¿™ä¸ªæµ‹è¯•ä¼šé€šè¿‡ï¼Œå³ä½¿obj1å’Œobj2æ˜¯ä¸åŒçš„å¯¹è±¡å®ä¾‹ï¼Œä½†ä»–ä»¬çš„å†…å®¹æ˜¯ä¸€æ ·çš„</span></span>
<span class="line"><span style="color:#D8DEE9;">assert</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">deepEqual</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">obj1</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> obj2</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">These two objects are not equal</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><code>assert.strictEqual(actual, expected, message)</code>ï¼šç”¨æ¥æ¯”è¾ƒä¸¤ä¸ªå€¼æ˜¯å¦ä¸¥æ ¼ç›¸ç­‰ï¼ˆä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒä»¬æ˜¯ä¸æ˜¯å®Œå…¨ä¸€æ ·ï¼ŒåŒ…æ‹¬ç±»å‹å’Œå€¼ï¼‰ã€‚</p><p>ä¸¾ä¾‹ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> assert</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">assert</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// è¿™ä¸ªæµ‹è¯•ä¼šé€šè¿‡ï¼Œå› ä¸º1ä¸¥æ ¼ç­‰äº1</span></span>
<span class="line"><span style="color:#D8DEE9;">assert</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">strictEqual</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">1</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 1</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">One is not strictly equal to one</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// è¿™ä¸ªæµ‹è¯•å°†å¤±è´¥ï¼Œå¹¶æŠ›å‡ºAssertionErrorï¼Œå› ä¸º&#39;1&#39;ï¼ˆå­—ç¬¦ä¸²ï¼‰ä¸ä¸¥æ ¼ç­‰äº1ï¼ˆæ•°å­—ï¼‰</span></span>
<span class="line"><span style="color:#D8DEE9;">assert</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">strictEqual</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">1</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 1</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &#39;</span><span style="color:#A3BE8C;">&quot;1&quot; is not strictly equal to 1</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><code>assert.rejects(asyncFn, error, message)</code>ï¼šå½“ä½ è¦æµ‹è¯•ä¸€ä¸ªå¼‚æ­¥å‡½æ•°æ˜¯å¦æŒ‰é¢„æœŸæŠ›å‡ºé”™è¯¯æ—¶ï¼Œè¿™ä¸ªæ–¹æ³•éå¸¸æœ‰ç”¨ã€‚</p><p>ä¸¾ä¾‹ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> assert</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">assert</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">async</span><span style="color:#81A1C1;"> function</span><span style="color:#88C0D0;"> myFunction</span><span style="color:#ECEFF4;">()</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  throw</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> Error</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Something went wrong</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// è¿™ä¸ªæµ‹è¯•å°†é€šè¿‡ï¼Œå› ä¸ºmyFunctionæŠ›å‡ºäº†ä¸€ä¸ªé”™è¯¯</span></span>
<span class="line"><span style="color:#D8DEE9;">assert</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">rejects</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">myFunction</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">Expected an error but none was thrown</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><code>assert.ok(value, [message])</code>: æ–­è¨€æŸä¸ªå€¼æ˜¯çœŸå€¼ï¼ˆtruthyï¼‰ã€‚å¦‚æœè¯¥å€¼ä¸è½¬æ¢ä¸ºå¸ƒå°”å€¼ true åˆ™æŠ›å‡º AssertionErrorã€‚</p><p>ä¸¾ä¾‹ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> assert</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">assert</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// è¿™ä¸ªæµ‹è¯•ä¼šé€šè¿‡ï¼Œå› ä¸ºå­—ç¬¦ä¸² &quot;hello&quot; æ˜¯ä¸€ä¸ªçœŸå€¼</span></span>
<span class="line"><span style="color:#D8DEE9;">assert</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">ok</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">hello</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">This should pass</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// è¿™ä¸ªæµ‹è¯•å°†å¤±è´¥ï¼Œå¹¶æŠ›å‡º AssertionErrorï¼Œå› ä¸º0ä¸æ˜¯ä¸€ä¸ªçœŸå€¼</span></span>
<span class="line"><span style="color:#D8DEE9;">assert</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">ok</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">0</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">This will fail</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><p>Node.js çš„ <code>assert</code> æ¨¡å—è¿˜æœ‰æ›´å¤šçš„æ–¹æ³•ï¼Œä¾‹å¦‚ <code>assert.notStrictEqual</code>ã€<code>assert.ifError</code> ç­‰ï¼Œæ¯ä¸ªéƒ½æœ‰å…¶ç‰¹å®šçš„ç”¨é€”ã€‚é‡è¦çš„æ˜¯è¦ç†è§£ <code>assert</code> æ¨¡å—æä¾›çš„æ˜¯ä¸€ç§æœºåˆ¶ï¼Œç”¨äºåœ¨ä»£ç æ‰§è¡Œè¿‡ç¨‹ä¸­éªŒè¯äº‹æƒ…æ˜¯å¦ç¬¦åˆä½ çš„æœŸæœ›ã€‚å¦‚æœä¸ç¬¦åˆï¼Œé€šè¿‡æŠ›å‡ºé”™è¯¯æ¥è®©ä½ çŸ¥é“å“ªé‡Œå‡ºäº†é—®é¢˜ï¼Œè¿™æ ·ä½ å°±å¯ä»¥ä¿®æ­£å®ƒä»¥ç¡®ä¿ä»£ç çš„è´¨é‡ã€‚</p><h2 id="strict-assertion-mode" tabindex="-1"><a class="header-anchor" href="#strict-assertion-mode"><span><a href="https://nodejs.org/docs/latest/api/assert.html#strict-assertion-mode" target="_blank" rel="noopener noreferrer">Strict assertion mode</a></span></a></h2><p>Node.js ä¸­çš„â€œstrict assertion modeâ€ï¼ˆä¸¥æ ¼æ–­è¨€æ¨¡å¼ï¼‰æ˜¯æŒ‡ä½¿ç”¨ Node.js è‡ªå¸¦çš„<code>assert</code>æ¨¡å—æ—¶ï¼Œé‡‡ç”¨æ›´åŠ ä¸¥æ ¼çš„æ¯”è¾ƒæ–¹å¼ã€‚åœ¨ç¼–ç¨‹ä¸­ï¼Œ&quot;assertions&quot;ï¼ˆæ–­è¨€ï¼‰é€šå¸¸ç”¨äºæµ‹è¯•ä»£ç ï¼Œç¡®ä¿ä»£ç æŒ‰é¢„æœŸå·¥ä½œã€‚å½“è¡¨è¾¾å¼çš„ç»“æœä¸ç¬¦åˆé¢„æœŸæ—¶ï¼Œæ–­è¨€ä¼šå¼•å‘é”™è¯¯ã€‚</p><p>åœ¨ Node.js çš„æ—©æœŸç‰ˆæœ¬ä¸­ï¼Œ<code>assert</code>æ¨¡å—æä¾›äº†ä¸€äº›æ–¹æ³•æ¥è¿›è¡Œå€¼çš„æ¯”è¾ƒï¼Œä¾‹å¦‚<code>assert.equal()</code>ã€‚ä½†è¿™äº›æ–¹æ³•å¹¶ä¸æ€»æ˜¯éå¸¸ä¸¥æ ¼ï¼Œä¾‹å¦‚å®ƒä»¬å¯èƒ½ä¼šè®¤ä¸ºä¸åŒç±»å‹çš„å€¼æ˜¯ç›¸ç­‰çš„ï¼ˆæ¯”å¦‚æ•°å­—<code>1</code>å’Œå­—ç¬¦ä¸²<code>&#39;1&#39;</code>ï¼‰ï¼Œå› ä¸ºå®ƒä»¬åœ¨æ¯”è¾ƒæ—¶ä¼šè¿›è¡Œç±»å‹è½¬æ¢ã€‚</p><p>ä» Node.js 9.9.0 ç‰ˆæœ¬å¼€å§‹ï¼Œ<code>assert</code>æ¨¡å—å¢åŠ äº†ä¸€ä¸ªæ–°çš„å­æ¨¡å—<code>assert.strict</code>ï¼Œå®ƒæä¾›äº†ä¸åŸå§‹<code>assert</code>æ–¹æ³•åŒåçš„æ–¹æ³•ï¼Œä½†è¿™äº›æ–¹æ³•æ‰§è¡Œä¸¥æ ¼ç›¸ç­‰çš„æ¯”è¾ƒï¼Œä¹Ÿå°±æ˜¯è¯´ä¸å…è®¸åœ¨æ¯”è¾ƒæ—¶è¿›è¡Œç±»å‹è½¬æ¢ã€‚</p><p>ä¸‹é¢é€šè¿‡å‡ ä¸ªç¤ºä¾‹æ¥è¯´æ˜éä¸¥æ ¼æ–­è¨€å’Œä¸¥æ ¼æ–­è¨€çš„åŒºåˆ«ï¼š</p><h3 id="éä¸¥æ ¼æ–­è¨€ç¤ºä¾‹" tabindex="-1"><a class="header-anchor" href="#éä¸¥æ ¼æ–­è¨€ç¤ºä¾‹"><span>éä¸¥æ ¼æ–­è¨€ç¤ºä¾‹</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> assert</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">assert</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// è¿™å°†ä¸ä¼šæŠ›å‡ºé”™è¯¯ï¼Œå› ä¸º==è¿ç®—ç¬¦ä¼šè¿›è¡Œç±»å‹è½¬æ¢ã€‚</span></span>
<span class="line"><span style="color:#D8DEE9;">assert</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">equal</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">1</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">1</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // æ­¤å¤„ä½¿ç”¨äº†éä¸¥æ ¼ç›¸ç­‰æ¯”è¾ƒ</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// è¿™å°†ä¸ä¼šæŠ›å‡ºé”™è¯¯ï¼Œå› ä¸º1å’Œtrueè¢«è§†ä¸ºç›¸ç­‰ã€‚</span></span>
<span class="line"><span style="color:#D8DEE9;">assert</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">equal</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">1</span><span style="color:#ECEFF4;">,</span><span style="color:#81A1C1;"> true</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // å†æ¬¡ä½¿ç”¨äº†éä¸¥æ ¼ç›¸ç­‰æ¯”è¾ƒ</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ä¸¥æ ¼æ–­è¨€ç¤ºä¾‹" tabindex="-1"><a class="header-anchor" href="#ä¸¥æ ¼æ–­è¨€ç¤ºä¾‹"><span>ä¸¥æ ¼æ–­è¨€ç¤ºä¾‹</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> assert</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">assert</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">strict</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// è¿™å°†æŠ›å‡ºé”™è¯¯ï¼Œå› ä¸º===è¿ç®—ç¬¦ä¸å…è®¸ç±»å‹è½¬æ¢ã€‚</span></span>
<span class="line"><span style="color:#D8DEE9;">assert</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">equal</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">1</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">1</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // æ­¤å¤„ä½¿ç”¨äº†ä¸¥æ ¼ç›¸ç­‰æ¯”è¾ƒï¼Œä¼šæŠ›å‡ºAssertionError</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// è¿™ä¹Ÿå°†æŠ›å‡ºé”™è¯¯ï¼Œå› ä¸º1å’Œtrueä¸è¢«è§†ä¸ºä¸¥æ ¼ç›¸ç­‰ã€‚</span></span>
<span class="line"><span style="color:#D8DEE9;">assert</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">equal</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">1</span><span style="color:#ECEFF4;">,</span><span style="color:#81A1C1;"> true</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // å†æ¬¡ä½¿ç”¨äº†ä¸¥æ ¼ç›¸ç­‰æ¯”è¾ƒ</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ä¸¥æ ¼æ–­è¨€æ¨¡å¼ä¸‹ï¼Œå¦‚æœè¯•å›¾æ–­è¨€ä¸¤ä¸ªä¸åŒç±»å‹çš„å€¼ç›¸ç­‰ï¼Œæˆ–è€…ä¸¤ä¸ªå€¼è™½ç„¶çœ‹èµ·æ¥å†…å®¹ç›¸ä¼¼ä½†æ•°æ®ç±»å‹ä¸åŒï¼Œåˆ™ä¼šæŠ›å‡ºé”™è¯¯ã€‚è¿™æœ‰åŠ©äºå¼€å‘äººå‘˜æ•è·éšè—çš„ç±»å‹ç›¸å…³çš„ bugï¼Œå¹¶ç¡®ä¿ä»£ç é€»è¾‘çš„ä¸¥å¯†æ€§ã€‚</p><p>ä½¿ç”¨ä¸¥æ ¼æ¨¡å¼æ˜¯ä¸€ç§æ›´å®‰å…¨ã€æ›´å¯é çš„åšæ³•ï¼Œå°¤å…¶æ˜¯åœ¨è¿›è¡Œå•å…ƒæµ‹è¯•æ—¶ã€‚å®ƒå¯ä»¥å¸®åŠ©ä½ é¿å…ä¸€äº›å¯èƒ½åœ¨åº”ç”¨ç¨‹åºä¸­é€ æˆé—®é¢˜çš„éšè”½é”™è¯¯ã€‚</p><h2 id="legacy-assertion-mode" tabindex="-1"><a class="header-anchor" href="#legacy-assertion-mode"><span><a href="https://nodejs.org/docs/latest/api/assert.html#legacy-assertion-mode" target="_blank" rel="noopener noreferrer">Legacy assertion mode</a></span></a></h2><p>Node.js ä¸­çš„ <code>assert</code> æ¨¡å—æ˜¯ä¸€ä¸ªç”¨äºè¿›è¡Œå„ç§æ–­è¨€æµ‹è¯•çš„å·¥å…·ã€‚æ‰€è°“â€œæ–­è¨€â€ï¼ˆAssertionï¼‰ï¼Œå°±æ˜¯åœ¨ä»£ç ä¸­è®¾ç½®ä¸€äº›æ£€æŸ¥ç‚¹ï¼Œç¡®ä¿ç¨‹åºè¿è¡Œåˆ°è¿™é‡Œæ—¶ï¼ŒæŸäº›æ¡ä»¶å¿…é¡»ä¸ºçœŸã€‚å¦‚æœæ¡ä»¶ä¸æˆç«‹ï¼Œåˆ™æŠ›å‡ºé”™è¯¯å¹¶ä¸”é€šå¸¸ä¼šç»ˆæ­¢ç¨‹åºã€‚</p><p>åœ¨ Node.js çš„æ—©æœŸç‰ˆæœ¬ä¸­ï¼Œ<code>assert</code> æ¨¡å—æä¾›äº†ä¸€ç§è¢«ç§°ä¸ºâ€œLegacy assertion modeâ€çš„æ–­è¨€æ¨¡å¼ã€‚&quot;Legacy&quot; è¿™ä¸ªå•è¯åœ¨è¿™é‡Œæ„å‘³ç€â€œé—ç•™â€ï¼Œè¡¨æ˜è¿™ç§æ¨¡å¼æ˜¯ä¸€ç§è€æ—§çš„ä½¿ç”¨æ–¹å¼ï¼Œå¯èƒ½éšç€æ—¶é—´é€æ¸è¢«æ–°çš„æ–¹æ³•æ‰€å–ä»£ã€‚</p><p>é—ç•™æ–­è¨€æ¨¡å¼æ›´ç®€å•ã€æ›´æœ‰é™ï¼Œå®ƒä¸»è¦æä¾›äº†ä¸€ä¸ªå‡½æ•° <code>assert(value, message)</code>ï¼Œå…¶ä¸­ï¼š</p><ul><li><code>value</code> æ˜¯ä½ æƒ³è¦æµ‹è¯•çš„è¡¨è¾¾å¼ç»“æœã€‚</li><li><code>message</code> æ˜¯ä¸€ä¸ªå½“æ–­è¨€å¤±è´¥ï¼Œä¹Ÿå°±æ˜¯ <code>value</code> è¯„ä¼°ä¸º <code>false</code> æ—¶ï¼Œé”™è¯¯ä¸­å°†åŒ…å«çš„ä¿¡æ¯ã€‚</li></ul><p>å¦‚æœ <code>value</code> ä¸ºçœŸï¼ˆtruthyï¼‰ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒä¸æ˜¯ <code>false</code>ã€<code>0</code>ã€<code>&quot;&quot;</code>ï¼ˆç©ºå­—ç¬¦ä¸²ï¼‰ã€<code>null</code>ã€<code>undefined</code> æˆ–è€… <code>NaN</code>ï¼Œé‚£ä¹ˆç¨‹åºå°†æ­£å¸¸ç»§ç»­æ‰§è¡Œã€‚å¦‚æœ <code>value</code> ä¸ºå‡ï¼ˆfalsyï¼‰ï¼Œåˆ™ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œå¹¶ä¸”é€šå¸¸åŒ…æ‹¬ <code>message</code> æ‰€æä¾›çš„ä¿¡æ¯ã€‚</p><h3 id="å®é™…ä¾‹å­" tabindex="-1"><a class="header-anchor" href="#å®é™…ä¾‹å­"><span>å®é™…ä¾‹å­</span></a></h3><p><strong>1. é€šè¿‡æ–­è¨€éªŒè¯å˜é‡çš„å€¼</strong></p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> assert</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">assert</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> theNumber</span><span style="color:#81A1C1;"> =</span><span style="color:#B48EAD;"> 10</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// æ–­è¨€ï¼štheNumber å¿…é¡»ç­‰äº 10ï¼Œå¦åˆ™æŠ›å‡ºé”™è¯¯</span></span>
<span class="line"><span style="color:#88C0D0;">assert</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">theNumber</span><span style="color:#81A1C1;"> ===</span><span style="color:#B48EAD;"> 10</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">The number must be 10</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå¦‚æœ <code>theNumber</code> ä¸ç­‰äº 10ï¼Œé‚£ä¹ˆå°†æŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œå¹¶ä¸”é”™è¯¯ä¿¡æ¯å°†æ˜¯ <code>&#39;The number must be 10&#39;</code>ã€‚</p><p><strong>2. éªŒè¯å‡½æ•°è¿”å›ç»“æœ</strong></p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> assert</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">assert</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">function</span><span style="color:#88C0D0;"> add</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">x</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> y</span><span style="color:#ECEFF4;">)</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  return</span><span style="color:#D8DEE9;"> x</span><span style="color:#81A1C1;"> +</span><span style="color:#D8DEE9;"> y</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// è°ƒç”¨ add å‡½æ•°ï¼Œæ–­è¨€ç»“æœå¿…é¡»ä¸º 5</span></span>
<span class="line"><span style="color:#88C0D0;">assert</span><span style="color:#D8DEE9FF;">(</span><span style="color:#88C0D0;">add</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">2</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 3</span><span style="color:#D8DEE9FF;">) </span><span style="color:#81A1C1;">===</span><span style="color:#B48EAD;"> 5</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">Addition of 2 and 3 should be 5</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå¦‚æœå‡½æ•° <code>add</code> çš„è¿”å›å€¼ä¸ä¸º 5ï¼Œæˆ‘ä»¬ä¼šå¾—åˆ°ä¸€ä¸ªé”™è¯¯ï¼Œé”™è¯¯ä¿¡æ¯æ˜¯ <code>&#39;Addition of 2 and 3 should be 5&#39;</code>ã€‚</p><p>éšç€æ—¶é—´çš„æ¨ç§»ï¼ŒNode.js å¼•å…¥äº†æ›´å¤šçš„æ–­è¨€åŠŸèƒ½ï¼Œå¦‚æ·±åº¦æ¯”è¾ƒã€å¼‚æ­¥æ–­è¨€å’Œä¸¥æ ¼æ¨¡å¼ç­‰ã€‚ä½†å³ä½¿åœ¨æœ€æ–°ç‰ˆæœ¬çš„ Node.js ä¸­ï¼Œé—ç•™æ–­è¨€æ¨¡å¼ä»ç„¶å¯ä»¥ä½¿ç”¨ï¼Œåªæ˜¯å®˜æ–¹æ–‡æ¡£å»ºè®®ä½¿ç”¨æ›´å¼ºå¤§çš„æ–­è¨€æ–¹æ³•ã€‚</p><h2 id="class-assert-assertionerror" tabindex="-1"><a class="header-anchor" href="#class-assert-assertionerror"><span><a href="https://nodejs.org/docs/latest/api/assert.html#class-assertassertionerror" target="_blank" rel="noopener noreferrer">Class: assert.AssertionError</a></span></a></h2><p><code>assert.AssertionError</code>æ˜¯ Node.js ä¸­<code>assert</code>æ¨¡å—æä¾›çš„ä¸€ä¸ªç±»ï¼Œç”¨äºè¡¨ç¤ºæ–­è¨€å¤±è´¥ã€‚åœ¨ç¼–ç¨‹ä¸­ï¼Œ&quot;æ–­è¨€&quot;æ˜¯ä¸€ç§æ£€æŸ¥ä»£ç æ˜¯å¦æŒ‰é¢„æœŸå·¥ä½œçš„æ–¹å¼ã€‚å¦‚æœä½ åšå‡ºä¸€ä¸ªå‡è®¾æˆ–è€…æœŸæœ›ï¼Œåœ¨ä»£ç ä¸­é€šè¿‡æ–­è¨€æ¥ç¡®è®¤è¿™ä¸ªå‡è®¾ï¼Œå¦‚æœå‡è®¾ä¸ºçœŸï¼Œåˆ™ç¨‹åºç»§ç»­æ‰§è¡Œï¼›å¦‚æœå‡è®¾ä¸ºå‡ï¼Œåˆ™æ–­è¨€ä¼šå¤±è´¥ï¼Œé€šå¸¸ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œå¹¶ä¸”é€šå¸¸è¿™ä¸ªé”™è¯¯å°±æ˜¯<code>AssertionError</code>ç±»å‹ã€‚</p><p>åœ¨ Node.js ä¸­ï¼Œ<code>assert</code>æ¨¡å—æä¾›äº†ä¸€ç³»åˆ—çš„å‡½æ•°ï¼Œå¸®åŠ©ä½ æµ‹è¯•å’ŒéªŒè¯ä»£ç ã€‚å½“ä¸€ä¸ªæ–­è¨€å‡½æ•°çš„æ¡ä»¶ä¸æ»¡è¶³æ—¶ï¼Œå°†ä¼šæŠ›å‡º<code>AssertionError</code>ã€‚</p><p>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­æ¥æ¼”ç¤ºå¦‚ä½•ä½¿ç”¨æ–­è¨€å’Œå¤„ç†<code>AssertionError</code>ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> assert</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">assert</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">function</span><span style="color:#88C0D0;"> add</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">a</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> b</span><span style="color:#ECEFF4;">)</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  return</span><span style="color:#D8DEE9;"> a</span><span style="color:#81A1C1;"> +</span><span style="color:#D8DEE9;"> b</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">try</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#616E88;">  // å‡è®¾æˆ‘ä»¬æœŸæœ›addå‡½æ•°å°†1å’Œ2ç›¸åŠ çš„ç»“æœåº”è¯¥æ˜¯3</span></span>
<span class="line"><span style="color:#D8DEE9;">  assert</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">strictEqual</span><span style="color:#D8DEE9FF;">(</span><span style="color:#88C0D0;">add</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">1</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 2</span><span style="color:#D8DEE9FF;">)</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 3</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">1åŠ 2åº”è¯¥ç­‰äº3</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">  // å¦‚æœæˆ‘ä»¬é”™è¯¯åœ°æœŸå¾…äº†ä¸æ­£ç¡®çš„ç»“æœï¼Œæ¯”å¦‚4</span></span>
<span class="line"><span style="color:#D8DEE9;">  assert</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">strictEqual</span><span style="color:#D8DEE9FF;">(</span><span style="color:#88C0D0;">add</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">1</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 2</span><span style="color:#D8DEE9FF;">)</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 4</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">1åŠ 2åº”è¯¥ç­‰äº3</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;"> catch</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">error</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#616E88;">  // å¦‚æœä¸Šé¢çš„æ–­è¨€å¤±è´¥ï¼Œå°†ä¼šæ•è·åˆ°AssertionError</span></span>
<span class="line"><span style="color:#81A1C1;">  if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">error</span><span style="color:#81A1C1;"> instanceof</span><span style="color:#D8DEE9FF;"> assert</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9FF;">AssertionError) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">error</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">æ–­è¨€å¤±è´¥ï¼š</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> error</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">message</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#616E88;">    // è¿™é‡Œå¯ä»¥è¾“å‡ºæ›´è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯ï¼Œä¾‹å¦‚</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">error</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">å®é™…å€¼ï¼š</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> error</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">actual</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // å®é™…å¾—åˆ°çš„ç»“æœ</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">error</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">æœŸæœ›å€¼ï¼š</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> error</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">expected</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // æ–­è¨€ä¸­æœŸæœ›çš„ç»“æœ</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">error</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">æ“ä½œç¬¦ï¼š</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> error</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">operator</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // ä½¿ç”¨çš„æ¯”è¾ƒæ“ä½œç¬¦</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span><span style="color:#81A1C1;"> else</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#616E88;">    // å…¶ä»–ç±»å‹çš„é”™è¯¯å¯ä»¥åœ¨è¿™é‡Œå¤„ç†</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">error</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">æœªçŸ¥é”™è¯¯ï¼š</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> error</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œç¬¬ä¸€ä¸ª<code>assert.strictEqual</code>å°†ä¼šé€šè¿‡ï¼Œå› ä¸º<code>add(1, 2)</code>ç¡®å®è¿”å›äº† 3ã€‚è€Œç¬¬äºŒä¸ª<code>assert.strictEqual</code>åˆ™ä¼šå¤±è´¥ï¼Œå› ä¸º<code>add(1, 2)</code>è¿”å›çš„æ˜¯ 3ï¼Œä¸æ˜¯æœŸæœ›çš„ 4ï¼Œè¿™ä¼šå¯¼è‡´ä¸€ä¸ª<code>AssertionError</code>è¢«æŠ›å‡ºï¼Œç„¶ååœ¨<code>catch</code>å—ä¸­è¢«æ•è·ã€‚ä¸€æ—¦æ•è·åˆ°<code>AssertionError</code>ï¼Œæˆ‘ä»¬å°±å¯ä»¥è®¿é—®å®ƒçš„å±æ€§ï¼ˆå¦‚<code>message</code>ã€<code>actual</code>ã€<code>expected</code>å’Œ<code>operator</code>ï¼‰æ¥è·å–å¤±è´¥çš„è¯¦ç»†ä¿¡æ¯ï¼Œå¹¶æ®æ­¤è¿›è¡Œè°ƒè¯•ã€‚</p><h3 id="new-assert-assertionerror-options" tabindex="-1"><a class="header-anchor" href="#new-assert-assertionerror-options"><span><a href="https://nodejs.org/docs/latest/api/assert.html#new-assertassertionerroroptions" target="_blank" rel="noopener noreferrer">new assert.AssertionError(options)</a></span></a></h3><p><code>assert.AssertionError</code> æ˜¯ Node.js ä¸­ <code>assert</code> æ¨¡å—çš„ä¸€ä¸ªç‰¹æ®Šé”™è¯¯ç±»å‹ï¼Œå®ƒè¡¨ç¤ºå½“æŸé¡¹æ–­è¨€ï¼ˆå³ä¸€ç§é¢„æœŸï¼‰æœªèƒ½æ»¡è¶³æ—¶æŠ›å‡ºçš„é”™è¯¯ã€‚åœ¨ç¼–ç¨‹ä¸­ï¼Œæ–­è¨€æ˜¯ä¸€ç§æ£€æŸ¥ç¨‹åºçŠ¶æ€æ˜¯å¦ç¬¦åˆé¢„æœŸçš„æ–¹å¼ï¼›å¦‚æœä¸ç¬¦åˆï¼Œé€šå¸¸ä¼šæŠ›å‡ºé”™è¯¯å¹¶å¯èƒ½ç»ˆæ­¢ç¨‹åºã€‚</p><p>åœ¨ Node.js v21.7.1 ç‰ˆæœ¬ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>new assert.AssertionError(options)</code> æ¥åˆ›å»ºä¸€ä¸ª <code>AssertionError</code> çš„å®ä¾‹ã€‚è¿™é‡Œçš„ <code>options</code> æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¯ä»¥åŒ…å«ä»¥ä¸‹å±æ€§ï¼š</p><ul><li><code>message</code>ï¼šé”™è¯¯ä¿¡æ¯ï¼Œè¯´æ˜æ–­è¨€å¤±è´¥çš„åŸå› ã€‚</li><li><code>actual</code>ï¼šå®é™…å¾—åˆ°çš„ç»“æœå€¼ã€‚</li><li><code>expected</code>ï¼šæœŸæœ›å¾—åˆ°çš„ç»“æœå€¼ã€‚</li><li><code>operator</code>ï¼šç”¨äºæ¯”è¾ƒå®é™…å’ŒæœŸæœ›å€¼çš„æ“ä½œç¬¦å­—ç¬¦ä¸²ã€‚</li><li><code>stackStartFn</code>ï¼šå¦‚æœæä¾›äº†è¿™ä¸ªå‡½æ•°ï¼Œå †æ ˆè·Ÿè¸ªä¼šä»æ­¤å‡½æ•°å¼€å§‹ï¼Œæœ‰åŠ©äºå®šä½é”™è¯¯çš„æºå¤´ã€‚</li></ul><p>è®©æˆ‘ä»¬ä¸¾ä¸€ä¸ªå®é™…çš„ä¾‹å­ï¼š</p><p>å‡è®¾ä½ æ­£åœ¨å†™ä¸€ä¸ªå‡½æ•°ç”¨æ¥è®¡ç®—ä¸¤ä¸ªæ•°çš„å’Œï¼Œä¸ºäº†ç¡®ä¿ä½ çš„å‡½æ•°æ­£ç¡®æ— è¯¯ï¼Œä½ æƒ³è¦æ–­è¨€å…¶ç»“æœåº”è¯¥ç­‰äºä¸¤ä¸ªæ•°çœŸå®ç›¸åŠ çš„å’Œã€‚å¦‚æœè®¡ç®—çš„ç»“æœä¸å¯¹ï¼Œä½ å¸Œæœ›ç¨‹åºèƒ½ç»™å‡ºæç¤ºã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> assert</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">assert</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">function</span><span style="color:#88C0D0;"> add</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">a</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> b</span><span style="color:#ECEFF4;">)</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  return</span><span style="color:#D8DEE9;"> a</span><span style="color:#81A1C1;"> +</span><span style="color:#D8DEE9;"> b</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// ä½¿ç”¨addå‡½æ•°è®¡ç®—2å’Œ3çš„å’Œ</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> result</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> add</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">2</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 3</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// æ–­è¨€ç»“æœåº”è¯¥æ˜¯5</span></span>
<span class="line"><span style="color:#81A1C1;">try</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">  assert</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">strictEqual</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">result</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 5</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">ä¸¤æ•°ç›¸åŠ ç»“æœä¸æ­£ç¡®</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;"> catch</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">e</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#81A1C1;">  if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">e</span><span style="color:#81A1C1;"> instanceof</span><span style="color:#D8DEE9FF;"> assert</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9FF;">AssertionError) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">error</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">`</span><span style="color:#A3BE8C;">å‘ç”Ÿé”™è¯¯: </span><span style="color:#81A1C1;">${</span><span style="color:#D8DEE9;">e</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">message</span><span style="color:#81A1C1;">}</span><span style="color:#ECEFF4;">`</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">error</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">`</span><span style="color:#A3BE8C;">å®é™…å€¼: </span><span style="color:#81A1C1;">${</span><span style="color:#D8DEE9;">e</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">actual</span><span style="color:#81A1C1;">}</span><span style="color:#ECEFF4;">`</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">error</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">`</span><span style="color:#A3BE8C;">æœŸæœ›å€¼: </span><span style="color:#81A1C1;">${</span><span style="color:#D8DEE9;">e</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">expected</span><span style="color:#81A1C1;">}</span><span style="color:#ECEFF4;">`</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">error</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">`</span><span style="color:#A3BE8C;">æ“ä½œç¬¦: </span><span style="color:#81A1C1;">${</span><span style="color:#D8DEE9;">e</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">operator</span><span style="color:#81A1C1;">}</span><span style="color:#ECEFF4;">`</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span><span style="color:#81A1C1;"> else</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">    throw</span><span style="color:#D8DEE9;"> e</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // å¦‚æœä¸æ˜¯æ–­è¨€é”™è¯¯ï¼Œåˆ™é‡æ–°æŠ›å‡ºå¼‚å¸¸</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ä¸Šé¢è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æœŸæœ› <code>add(2, 3)</code> çš„ç»“æœæ˜¯ <code>5</code>ã€‚å¦‚æœç»“æœæ­£ç¡®ï¼Œç¨‹åºå°†ç»§ç»­è¿è¡Œã€‚å¦‚æœç»“æœä¸æ­£ç¡®ï¼Œä¼šæŠ›å‡ºä¸€ä¸ª <code>AssertionError</code>ï¼Œç„¶åè¢« <code>catch</code> å—æ•è·ï¼Œå¹¶æ‰“å°å‡ºç›¸åº”çš„é”™è¯¯ä¿¡æ¯ã€‚</p><p>å¦‚æœä½ çŠ¯äº†ä¸€ä¸ªé”™è¯¯ï¼Œæ¯”å¦‚å°† <code>add</code> å‡½æ•°å®ç°æˆäº† <code>a * b</code> è€Œä¸æ˜¯ <code>a + b</code>ï¼Œé‚£ä¹ˆ <code>assert.strictEqual(result, 5)</code> è¿™è¡Œä»£ç å°±ä¼šè§¦å‘ <code>AssertionError</code>ï¼Œå› ä¸º <code>2 * 3</code> ä¸ç­‰äº <code>5</code>ã€‚é”™è¯¯ä¿¡æ¯å’Œè¯¦ç»†æ•°æ®å°†è¢«æ‰“å°å‡ºæ¥ï¼Œå¸®åŠ©ä½ ç†è§£é—®é¢˜æ‰€åœ¨ã€‚</p><h2 id="class-assert-calltracker" tabindex="-1"><a class="header-anchor" href="#class-assert-calltracker"><span><a href="https://nodejs.org/docs/latest/api/assert.html#class-assertcalltracker" target="_blank" rel="noopener noreferrer">Class: assert.CallTracker</a></span></a></h2><p><code>assert.CallTracker</code> æ˜¯ Node.js ä¸­çš„ä¸€ä¸ªå·¥å…·ï¼Œå®ƒç”¨äºæµ‹è¯•ä»£ç ä¸­çš„å‡½æ•°è°ƒç”¨æ¬¡æ•°ã€‚è¿™å¯¹äºç¡®ä¿åœ¨æµ‹è¯•æœŸé—´æŸäº›å‡½æ•°æ˜¯å¦è¢«è°ƒç”¨äº†æ­£ç¡®æ¬¡æ•°éå¸¸æœ‰ç”¨ã€‚</p><p>é¦–å…ˆï¼Œè®©æˆ‘ä»¬äº†è§£ä¸ºä»€ä¹ˆè¦è¿½è¸ªå‡½æ•°è°ƒç”¨æ¬¡æ•°ï¼šå½“ä½ ç¼–å†™æµ‹è¯•æ—¶ï¼Œé€šå¸¸ä½ ä¼šæƒ³ç¡®è®¤æŸäº›å‡½æ•°åœ¨ç‰¹å®šæ¡ä»¶ä¸‹è¢«è°ƒç”¨äº†æŒ‡å®šçš„æ¬¡æ•°ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ æœ‰ä¸€ä¸ªäº‹ä»¶ç›‘å¬å™¨ï¼Œä½ å¯èƒ½æƒ³ç¡®è®¤å½“äº‹ä»¶è§¦å‘æ—¶ï¼Œç›‘å¬å™¨æ˜¯å¦è¢«è°ƒç”¨äº†ä¸€æ¬¡ã€‚</p><p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬æ¥çœ‹çœ‹å¦‚ä½•ä½¿ç”¨ <code>assert.CallTracker</code>ï¼š</p><ol><li>åˆ›å»ºä¸€ä¸ª <code>CallTracker</code> å¯¹è±¡ã€‚</li><li>ä½¿ç”¨ <code>calls</code> æ–¹æ³•åˆ›å»ºè·Ÿè¸ªå‡½æ•°çš„å°è£…ï¼ˆåŒ…è£…ï¼‰å‡½æ•°ã€‚</li><li>åœ¨æµ‹è¯•ç»“æŸæ—¶ï¼Œä½¿ç”¨ <code>verify</code> æ–¹æ³•æ£€æŸ¥æ‰€æœ‰çš„å°è£…å‡½æ•°æ˜¯å¦éƒ½è¢«è°ƒç”¨äº†æ­£ç¡®çš„æ¬¡æ•°ã€‚</li></ol><p>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­æ¥æ¼”ç¤ºå¦‚ä½•ä½¿ç”¨ <code>assert.CallTracker</code>ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> assert</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">assert</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// åˆ›å»ºä¸€ä¸ª CallTracker å®ä¾‹</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> tracker</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#D8DEE9;"> assert</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">CallTracker</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">function</span><span style="color:#88C0D0;"> testFunction</span><span style="color:#ECEFF4;">()</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#616E88;">  // è¿™ä¸ªå‡½æ•°å°†åœ¨ä¸‹é¢çš„ä»£ç ä¸­è¢«è°ƒç”¨</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å‘Šè¯‰ tracker æˆ‘ä»¬å¸Œæœ› testFunction è¢«è°ƒç”¨ä¸€æ¬¡</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> trackedTestFunction</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> tracker</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">calls</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">testFunction</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 1</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// ç°åœ¨è°ƒç”¨æˆ‘ä»¬çš„å°è£…å‡½æ•°</span></span>
<span class="line"><span style="color:#88C0D0;">trackedTestFunction</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// æµ‹è¯•ç»“æŸåï¼ŒéªŒè¯å‡½æ•°æ˜¯å¦è¢«è°ƒç”¨äº†æ­£ç¡®çš„æ¬¡æ•°</span></span>
<span class="line"><span style="color:#D8DEE9;">process</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">on</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">exit</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> ()</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">  tracker</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">verify</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // å¦‚æœ testFunction ä¸æ˜¯æ°å¥½è¢«è°ƒç”¨ä¸€æ¬¡ï¼Œå°†ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼š</p><ul><li>æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ª <code>CallTracker</code> å¯¹è±¡ã€‚</li><li>æˆ‘ä»¬å‘Šè¯‰ <code>CallTracker</code> æˆ‘ä»¬æœŸå¾… <code>testFunction</code> è¢«è°ƒç”¨ä¸€æ¬¡ï¼Œ<code>tracker.calls</code> è¿”å›ä¸€ä¸ªæ–°çš„å°è£…å‡½æ•° <code>trackedTestFunction</code>ã€‚</li><li>æˆ‘ä»¬è°ƒç”¨äº† <code>trackedTestFunction()</code> æ¥æ¨¡æ‹Ÿ <code>testFunction</code> çš„è°ƒç”¨ã€‚</li><li>æœ€åï¼Œåœ¨è¿›ç¨‹é€€å‡ºå‰ï¼Œæˆ‘ä»¬é€šè¿‡ <code>tracker.verify()</code> æ¥ç¡®è®¤ <code>testFunction</code> æ˜¯å¦è¢«è°ƒç”¨äº†ä¸€æ¬¡ã€‚</li></ul><p>å¦‚æœ <code>testFunction</code> è¢«è°ƒç”¨æ¬¡æ•°ä¸ç¬¦åˆé¢„æœŸï¼Œ<code>verify</code> æ–¹æ³•å°†æŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œè¿™å¯ä»¥æé†’æˆ‘ä»¬æ£€æŸ¥ä»£ç ä¸­ç›¸å…³å‡½æ•°çš„è°ƒç”¨é€»è¾‘æ˜¯å¦æœ‰é—®é¢˜ã€‚è¿™åœ¨è¿›è¡Œè‡ªåŠ¨åŒ–æµ‹è¯•æ—¶éå¸¸æœ‰ä»·å€¼ï¼Œå¯ä»¥ç¡®ä¿ä½ çš„ä»£ç æŒ‰ç…§é¢„æœŸè¿è¡Œã€‚</p><h3 id="new-assert-calltracker" tabindex="-1"><a class="header-anchor" href="#new-assert-calltracker"><span><a href="https://nodejs.org/docs/latest/api/assert.html#new-assertcalltracker" target="_blank" rel="noopener noreferrer">new assert.CallTracker()</a></span></a></h3><p><code>assert.CallTracker()</code> æ˜¯ä¸€ä¸ª Node.js ä¸­çš„å·¥å…·ï¼Œç”¨æ¥è¿½è¸ªå‡½æ•°è°ƒç”¨çš„æ¬¡æ•°ã€‚è¿™åœ¨æµ‹è¯•ä»£ç çš„æ—¶å€™éå¸¸æœ‰ç”¨ï¼Œå› ä¸ºå®ƒå¯ä»¥å¸®åŠ©ä½ ç¡®ä¿ä½ çš„å‡½æ•°åœ¨æµ‹è¯•æœŸé—´è¢«è°ƒç”¨äº†é¢„æœŸçš„æ¬¡æ•°ã€‚</p><p>å½“ä½ å†™æµ‹è¯•çš„æ—¶å€™ï¼Œä½ å¯èƒ½æƒ³è¦æ£€æŸ¥æŸä¸ªç‰¹å®šçš„å‡½æ•°æ˜¯å¦è¢«è°ƒç”¨äº†å‡†ç¡®çš„æ¬¡æ•°ã€‚å¦‚æœå‡½æ•°æ²¡æœ‰è¢«è°ƒç”¨ï¼Œæˆ–è€…è°ƒç”¨æ¬¡æ•°ä¸å¯¹ï¼Œé‚£ä¹ˆå¯èƒ½æ„å‘³ç€ä½ çš„ä»£ç ä¸­å­˜åœ¨é—®é¢˜ã€‚ä½¿ç”¨ <code>CallTracker</code> å¯ä»¥è‡ªåŠ¨åŒ–è¿™ä¸€æ£€æŸ¥è¿‡ç¨‹ã€‚</p><p>ä¸‹é¢æ˜¯å¦‚ä½•ä½¿ç”¨ <code>assert.CallTracker()</code> çš„ä¸€äº›æ­¥éª¤å’Œä¾‹å­ï¼š</p><ol><li><p>é¦–å…ˆï¼Œä½ éœ€è¦å¯¼å…¥ assert æ¨¡å—å¹¶åˆ›å»ºä¸€ä¸ª <code>CallTracker</code> å®ä¾‹ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> assert</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">assert</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// åˆ›å»ºä¸€ä¸ª CallTracker å¯¹è±¡</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> tracker</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#D8DEE9;"> assert</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">CallTracker</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>æ¥ä¸‹æ¥ï¼Œä½ å¯ä»¥é€šè¿‡ <code>tracker.calls()</code> æ–¹æ³•åˆ›å»ºä¸€ä¸ªè·Ÿè¸ªå™¨ï¼Œè¯¥è·Ÿè¸ªå™¨ä¼šè¿½è¸ªæŸä¸ªå‡½æ•°è¢«è°ƒç”¨çš„æ¬¡æ•°ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#616E88;">// è¿½è¸ªæŸä¸ªå‡½æ•°è¢«è°ƒç”¨ä¸€æ¬¡</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> callsFunc</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> tracker</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">calls</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">()</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {},</span><span style="color:#B48EAD;"> 1</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>ç„¶ååœ¨ä½ çš„ä»£ç ä¸­ï¼Œä½ éœ€è¦ä½¿ç”¨è¿™ä¸ªè¢«è·Ÿè¸ªçš„å‡½æ•°ä»£æ›¿åŸæœ¬ä½ æƒ³è¦æµ‹è¯•çš„å‡½æ•°ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">function</span><span style="color:#88C0D0;"> myFunction</span><span style="color:#ECEFF4;">()</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#616E88;">  // å‡è®¾è¿™é‡Œä¼šåœ¨æŸç§æ¡ä»¶ä¸‹è°ƒç”¨ callsFunc</span></span>
<span class="line"><span style="color:#88C0D0;">  callsFunc</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// è°ƒç”¨ myFunctionï¼Œå®ƒä¼šé—´æ¥è°ƒç”¨ callsFunc</span></span>
<span class="line"><span style="color:#88C0D0;">myFunction</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>æœ€åï¼Œåœ¨æµ‹è¯•ç»“æŸçš„æ—¶å€™ï¼Œä½ å¯ä»¥è°ƒç”¨ <code>tracker.verify()</code> æ¥ç¡®è®¤æ‰€æœ‰è¢«è·Ÿè¸ªçš„å‡½æ•°éƒ½è¢«è°ƒç”¨äº†æ­£ç¡®çš„æ¬¡æ•°ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#616E88;">// åœ¨æµ‹è¯•ç»“æŸæ—¶è°ƒç”¨ï¼ŒéªŒè¯æ‰€æœ‰è¢«è·Ÿè¸ªçš„å‡½æ•°æ˜¯å¦è¢«æ­£ç¡®è°ƒç”¨</span></span>
<span class="line"><span style="color:#81A1C1;">try</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">  tracker</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">verify</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">æ‰€æœ‰è¢«è·Ÿè¸ªçš„å‡½æ•°è°ƒç”¨æ¬¡æ•°æ­£ç¡®ï¼</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;"> catch</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">err</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">error</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">å‘ç”Ÿé”™è¯¯:</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> err</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">message</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><p>å¦‚æœ <code>callsFunc</code> æ²¡æœ‰è¢«è°ƒç”¨ï¼Œæˆ–è€…è¢«è°ƒç”¨æ¬¡æ•°ä¸æ˜¯ä¸€æ¬¡ï¼Œ<code>tracker.verify()</code> å°±ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼ŒæŒ‡æ˜å®é™…è°ƒç”¨æ¬¡æ•°ä¸é¢„æœŸä¸ç¬¦ã€‚</p><p>é€šè¿‡ä½¿ç”¨ <code>CallTracker</code>ï¼Œä½ å¯ä»¥è½»æ¾åœ°åœ¨è‡ªåŠ¨åŒ–æµ‹è¯•ä¸­è·Ÿè¸ªå’ŒéªŒè¯å‡½æ•°è°ƒç”¨æ¬¡æ•°ï¼Œå¸®åŠ©ä½ å‘ç°ä»£ç ä¸­æ½œåœ¨çš„é€»è¾‘é”™è¯¯ã€‚</p><h3 id="tracker-calls-fn-exact" tabindex="-1"><a class="header-anchor" href="#tracker-calls-fn-exact"><span><a href="https://nodejs.org/docs/latest/api/assert.html#trackercallsfn-exact" target="_blank" rel="noopener noreferrer">tracker.calls([fn][, exact])</a></span></a></h3><p><code>tracker.calls([fn][, exact])</code> æ˜¯ Node.js ä¸­ assert æ¨¡å—çš„ä¸€ä¸ªç‰¹æ€§ï¼Œå®ƒè¢«ç”¨äºè·Ÿè¸ªå’Œç¡®ä¿å‡½æ•°çš„é¢„æœŸè°ƒç”¨æ¬¡æ•°ã€‚è¿™åœ¨å•å…ƒæµ‹è¯•ä¸­éå¸¸æœ‰ç”¨ï¼Œå°¤å…¶æ˜¯å½“ä½ éœ€è¦éªŒè¯æŸä¸ªå‡½æ•°æ˜¯å¦è¢«è°ƒç”¨äº†æ­£ç¡®æ¬¡æ•°æ—¶ã€‚</p><p>é¦–å…ˆæ¥è§£é‡Šä¸€ä¸‹ assert æ¨¡å—ï¼š<br> assert æ¨¡å—æä¾›äº†ä¸€ç»„æ–­è¨€å‡½æ•°ï¼Œç”¨äºæµ‹è¯•ä»£ç ã€‚åœ¨ç¼–å†™æµ‹è¯•æ—¶ï¼Œå¦‚æœæŸä¸ªæ¡ä»¶ä¸æ»¡è¶³é¢„æœŸï¼Œassert å°†æŠ›å‡ºé”™è¯¯ï¼Œè¿™é€šå¸¸ä¼šå¯¼è‡´æµ‹è¯•å¤±è´¥ã€‚è¿™å°±å¯ä»¥è®©å¼€å‘è€…çŸ¥é“å“ªé‡Œå‡ºäº†é—®é¢˜ã€‚</p><p>ç°åœ¨è¿›å…¥æ­£é¢˜ï¼Œ<code>tracker.calls()</code> å‡½æ•°æ˜¯åœ¨ <code>assert.CallTracker</code> ç±»ä¸­ä½¿ç”¨çš„æ–¹æ³•ã€‚<code>CallTracker</code> æ˜¯ä¸€ä¸ªç”¨æ¥è¿½è¸ªä¸€ä¸ªæˆ–å¤šä¸ªå‡½æ•°è¢«è°ƒç”¨æƒ…å†µçš„å·¥å…·ã€‚å¦‚æœä¸€ä¸ªå‡½æ•°æ²¡æœ‰æŒ‰ç…§é¢„æœŸæ¬¡æ•°è¢«è°ƒç”¨ï¼Œåˆ™ä¼šç”Ÿæˆä¸€ä¸ªé”™è¯¯ã€‚</p><p>å‚æ•°è§£é‡Šï¼š</p><ul><li><code>fn</code> (å¯é€‰)ï¼šæŒ‡å®šè¦è¿½è¸ªçš„å‡½æ•°ã€‚</li><li><code>exact</code> (å¯é€‰)ï¼šæŒ‡å®šå‡½æ•°å¿…é¡»è¢«è°ƒç”¨çš„ç¡®åˆ‡æ¬¡æ•°ã€‚</li></ul><p>è¿™ä¸ªæ–¹æ³•è¿”å›ä¸€ä¸ªä»£ç†å‡½æ•°ï¼Œæ¯æ¬¡è¿™ä¸ªä»£ç†å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œå®ƒå†…éƒ¨éƒ½ä¼šè®°å½•ä¸€æ¬¡è°ƒç”¨ã€‚</p><p>å®é™…ä¾‹å­ï¼š</p><p>å‡è®¾ä½ æ­£åœ¨ç¼–å†™ä¸€ä¸ªç”µå•†å¹³å°çš„è´­ç‰©è½¦éƒ¨åˆ†ï¼Œå¹¶ä¸”ä½ æƒ³è¦ç¡®ä¿å½“ç”¨æˆ·æ·»åŠ å•†å“åˆ°è´­ç‰©è½¦æ—¶ï¼Œæ›´æ–°è´­ç‰©è½¦æ€»ä»·çš„å‡½æ•° <code>updateTotalPrice()</code> è¢«æ°å¥½è°ƒç”¨äº†ä¸€æ¬¡ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> assert</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">assert</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// è¿™æ˜¯ä½ è¦è¿½è¸ªçš„å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯ä½ æƒ³è¦éªŒè¯å®ƒæ˜¯å¦è¢«æ­£ç¡®è°ƒç”¨çš„å‡½æ•°</span></span>
<span class="line"><span style="color:#81A1C1;">function</span><span style="color:#88C0D0;"> updateTotalPrice</span><span style="color:#ECEFF4;">()</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">æ›´æ–°äº†è´­ç‰©è½¦æ€»ä»·</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// åˆ›å»º CallTracker å®ä¾‹</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> tracker</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#D8DEE9;"> assert</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">CallTracker</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å‘Šè¯‰ tracker å»è¿½è¸ª updateTotalPrice å‡½æ•°ï¼ŒæœŸæœ›å®ƒåªè¢«è°ƒç”¨ä¸€æ¬¡</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> callsUpdateTotalPrice</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> tracker</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">calls</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">updateTotalPrice</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 1</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// åœ¨æµ‹è¯•ä¸­ï¼Œä»£æ›¿çœŸå®çš„ updateTotalPrice å‡½æ•°ä½¿ç”¨æˆ‘ä»¬çš„è¿½è¸ªä»£ç†å‡½æ•°</span></span>
<span class="line"><span style="color:#88C0D0;">callsUpdateTotalPrice</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å…¶ä»–æµ‹è¯•é€»è¾‘ä»£ç ...</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// æœ€åéªŒè¯: å½“äº‹ä»¶å¾ªç¯ç»“æŸæ—¶ï¼Œç¡®è®¤ updateTotalPrice æ˜¯å¦è¢«è°ƒç”¨äº†ä¸€æ¬¡</span></span>
<span class="line"><span style="color:#D8DEE9;">process</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">on</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">exit</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> ()</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#616E88;">  // å¦‚æœè¿™ä¸ªå‡½æ•°æ²¡æœ‰è¢«è°ƒç”¨ä¸€æ¬¡ï¼Œå°†æŠ›å‡ºé”™è¯¯</span></span>
<span class="line"><span style="color:#D8DEE9;">  tracker</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">verify</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ä¸Šè¿°ä¾‹å­ä¸­ï¼Œå¦‚æœ <code>updateTotalPrice</code> å‡½æ•°æœªè¢«è°ƒç”¨ï¼Œæˆ–è€…è¢«è°ƒç”¨äº†å¤šäºä¸€æ¬¡ï¼Œé‚£ä¹ˆ <code>tracker.verify()</code> å°†ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œè¿™è¡¨ç¤ºæˆ‘ä»¬çš„æµ‹è¯•å¤±è´¥äº†ï¼Œå› ä¸ºå‡½æ•°çš„è°ƒç”¨æ¬¡æ•°ä¸é¢„æœŸä¸ç¬¦ã€‚</p><h3 id="tracker-getcalls-fn" tabindex="-1"><a class="header-anchor" href="#tracker-getcalls-fn"><span><a href="https://nodejs.org/docs/latest/api/assert.html#trackergetcallsfn" target="_blank" rel="noopener noreferrer">tracker.getCalls(fn)</a></span></a></h3><p>å¥½çš„ï¼Œè®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªç®€å•æ˜“æ‡‚çš„æ–¹å¼æ¥ç†è§£ <code>tracker.getCalls(fn)</code> è¿™ä¸ªåŠŸèƒ½ã€‚</p><p>åœ¨ Node.js ä¸­ï¼Œ<code>assert</code> æ¨¡å—æä¾›äº†ä¸€ç»„æ–­è¨€å‡½æ•°ï¼Œç”¨äºæµ‹è¯•ä»£ç ä¸­çš„å„ç§æ¡ä»¶æ˜¯å¦æ»¡è¶³é¢„æœŸã€‚åœ¨ç¼–å†™æµ‹è¯•æ—¶ï¼Œç»å¸¸éœ€è¦ç¡®ä¿æŸäº›å‡½æ•°è¢«è°ƒç”¨äº†æ­£ç¡®çš„æ¬¡æ•°ã€ä»¥æ­£ç¡®çš„å‚æ•°ç­‰ã€‚Node.js v21.7.1 ç‰ˆæœ¬å¼•å…¥äº†ä¸€ä¸ªå«åš <code>tracker</code> çš„æ–°å·¥å…·ï¼Œå®ƒå¯ä»¥å¸®åŠ©æˆ‘ä»¬è·Ÿè¸ªå’ŒéªŒè¯å‡½æ•°çš„è°ƒç”¨æƒ…å†µã€‚</p><p>ç°åœ¨ï¼Œæˆ‘ä»¬å°†èšç„¦äº <code>tracker.getCalls(fn)</code> è¿™ä¸ªæ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•çš„ä¸»è¦ä½œç”¨æ˜¯è·å–åˆ°ä¸€ä¸ªç‰¹å®šå‡½æ•° <code>fn</code> çš„æ‰€æœ‰è°ƒç”¨è®°å½•ã€‚è¿™å¯ä»¥å¸®åŠ©æˆ‘ä»¬ç¡®è®¤ <code>fn</code> æ˜¯å¦è¢«è°ƒç”¨è¿‡ï¼Œä»¥åŠè¢«è°ƒç”¨çš„æ¬¡æ•°ï¼Œè¿˜èƒ½è·å–åˆ°è°ƒç”¨æ—¶ä½¿ç”¨çš„å‚æ•°åˆ—è¡¨ã€‚</p><p>ç°åœ¨æˆ‘æ¥ä¸¾ä¸€ä¸ªå®é™…è¿ç”¨çš„ä¾‹å­ï¼š</p><p>å‡è®¾ä½ æœ‰ä¸€ä¸ªå‡½æ•° <code>sendMessage</code>ï¼Œè¿™ä¸ªå‡½æ•°è´Ÿè´£åœ¨åº”ç”¨ç¨‹åºä¸­å‘é€æ¶ˆæ¯ã€‚åœ¨ç¼–å†™æµ‹è¯•æ—¶ï¼Œä½ å¯èƒ½ä¼šæƒ³è¦ç¡®ä¿ <code>sendMessage</code> è¢«æ­£ç¡®åœ°è°ƒç”¨äº†ï¼Œå¹¶ä¸”è¦æ£€æŸ¥è°ƒç”¨å®ƒæ—¶ä¼ é€’äº†æ­£ç¡®çš„æ¶ˆæ¯å†…å®¹ã€‚</p><p>é¦–å…ˆï¼Œè®©æˆ‘ä»¬åˆ›å»º <code>sendMessage</code> å‡½æ•°å’Œä¸€ä¸ªæ¨¡æ‹Ÿå…¶è°ƒç”¨çš„åœºæ™¯ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">function</span><span style="color:#88C0D0;"> sendMessage</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">to</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> message</span><span style="color:#ECEFF4;">)</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">`</span><span style="color:#A3BE8C;">Sending message to </span><span style="color:#81A1C1;">${</span><span style="color:#D8DEE9;">to</span><span style="color:#81A1C1;">}</span><span style="color:#A3BE8C;">: </span><span style="color:#81A1C1;">${</span><span style="color:#D8DEE9;">message</span><span style="color:#81A1C1;">}</span><span style="color:#ECEFF4;">`</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#616E88;">  // å®é™…çš„å‘é€æ¶ˆæ¯é€»è¾‘ä¼šåœ¨è¿™é‡Œ</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç°åœ¨ï¼Œæˆ‘ä»¬æƒ³è¦ç¡®è®¤ <code>sendMessage</code> æ˜¯å¦è¢«è°ƒç”¨ï¼Œä»¥åŠè°ƒç”¨çš„ç»†èŠ‚ã€‚è¿™æ—¶å€™æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ <code>tracker.getCalls(fn)</code> æ–¹æ³•æ¥è·Ÿè¸ªå®ƒï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> assert</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">assert</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// åˆ›å»ºä¸€ä¸ªæ–°çš„ tracker å¯¹è±¡</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> tracker</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#D8DEE9;"> assert</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">CallTracker</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å‘Šè¯‰ tracker æˆ‘ä»¬æƒ³è¦è·Ÿè¸ª sendMessage å‡½æ•°</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> callsSendMessage</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> tracker</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">calls</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">sendMessage</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// æ¨¡æ‹Ÿä¸€äº› sendMessage çš„è°ƒç”¨</span></span>
<span class="line"><span style="color:#88C0D0;">sendMessage</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Alice</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">Hello Alice!</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#88C0D0;">sendMessage</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Bob</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">Hello Bob!</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// ä½¿ç”¨ getCalls æ–¹æ³•è·å– sendMessage å‡½æ•°çš„è°ƒç”¨è®°å½•</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> calls</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> tracker</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">getCalls</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">sendMessage</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">calls</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // æ‰“å°å‡ºè°ƒç”¨è®°å½•çš„æ•°ç»„</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// ç»“æŸæµ‹è¯•æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ tracker.verify() æ¥ç¡®è®¤æ‰€æœ‰è·Ÿè¸ªçš„å‡½æ•°éƒ½è¢«æ­£ç¡®åœ°è°ƒç”¨äº†æŒ‡å®šæ¬¡æ•°ã€‚</span></span>
<span class="line"><span style="color:#616E88;">// å¦‚æœæ²¡æœ‰ï¼Œverify æ–¹æ³•å°†æŠ›å‡ºä¸€ä¸ªé”™è¯¯</span></span>
<span class="line"><span style="color:#D8DEE9;">tracker</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">verify</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<code>calls</code> å°†åŒ…å« <code>sendMessage</code> å‡½æ•°çš„ä¸¤æ¬¡è°ƒç”¨ä¿¡æ¯ã€‚æ¯ä¸ªè°ƒç”¨éƒ½è¢«è®°å½•åœ¨ä¸€ä¸ªå¯¹è±¡ä¸­ï¼Œè¯¥å¯¹è±¡åŒ…å«äº†è°ƒç”¨æ—¶ä¼ é€’çš„å‚æ•°å’Œå…¶ä»–å…ƒæ•°æ®ã€‚</p><p><code>tracker.getCalls(fn)</code> è¿™ä¸ªæ–¹æ³•åœ¨ç¼–å†™å•å…ƒæµ‹è¯•æ—¶ç‰¹åˆ«æœ‰ç”¨ï¼Œå› ä¸ºå®ƒè®©ä½ å¯ä»¥ç²¾ç¡®åœ°éªŒè¯å‡½æ•°çš„è°ƒç”¨æƒ…å†µï¼Œç„¶åæ ¹æ®è¿™äº›ä¿¡æ¯å»åˆ¤æ–­ä½ çš„ä»£ç æ˜¯å¦å¦‚é¢„æœŸèˆ¬æ­£ç¡®å·¥ä½œã€‚</p><h3 id="tracker-report" tabindex="-1"><a class="header-anchor" href="#tracker-report"><span><a href="https://nodejs.org/docs/latest/api/assert.html#trackerreport" target="_blank" rel="noopener noreferrer">tracker.report()</a></span></a></h3><p>Node.js çš„ <code>assert</code> æ¨¡å—æä¾›äº†ä¸€ç»„ç”¨äºæµ‹è¯•å’ŒéªŒè¯ä»£ç çš„åŠŸèƒ½ã€‚åœ¨ Node.js çš„æ›´é«˜ç‰ˆæœ¬ä¸­ï¼Œç‰¹åˆ«æ˜¯ä» v14.2.0 å¼€å§‹å¼•å…¥äº†ä¸€ä¸ªæ–°çš„å®éªŒæ€§åŠŸèƒ½ï¼Œåä¸º &quot;å¼‚æ­¥èµ„æºè¿½è¸ªå™¨&quot; (<code>AsyncResource</code> ç±»)ã€‚è¿™ä¸ªåŠŸèƒ½ä½¿å¾—å¼€å‘è€…å¯ä»¥æ›´å¥½åœ°è¿½è¸ªå’Œç®¡ç†å¼‚æ­¥æ“ä½œä¸­æ¶‰åŠçš„èµ„æºã€‚</p><p>åœ¨ä½ æåˆ°çš„ Node.js v21.7.1 ä¸­ï¼Œ<code>assert</code> æ¨¡å—çš„ <code>tracker.report()</code> æ–¹æ³•æ˜¯è¿™å¥—å¼‚æ­¥èµ„æºè¿½è¸ªç³»ç»Ÿä¸­çš„ä¸€ä¸ªéƒ¨åˆ†ã€‚å®ƒçš„ä½œç”¨æ˜¯æŠ¥å‘Šé‚£äº›è¿˜æœªè¢«å…³é—­çš„å¼‚æ­¥èµ„æºã€‚ç®€å•æ¥è¯´ï¼Œå¦‚æœä½ å¯åŠ¨äº†ä¸€äº›å¼‚æ­¥æ“ä½œï¼ˆæ¯”å¦‚å®šæ—¶å™¨ã€æ–‡ä»¶è¯»å†™ã€ç½‘ç»œè¯·æ±‚ç­‰ï¼‰è€Œåœ¨æŸä¸ªæ—¶é—´ç‚¹ï¼Œä½ æƒ³è¦ç¡®ä¿æ‰€æœ‰èµ„æºéƒ½å·²ç»è¢«æ­£ç¡®æ¸…ç†ï¼ˆå³æ²¡æœ‰é—æ¼çš„æ‰“å¼€èµ„æºï¼‰ï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>tracker.report()</code> æ¥è¿›è¡Œæ£€æŸ¥ã€‚</p><p>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­æ¥è¯´æ˜å…¶ç”¨æ³•ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> assert</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">assert</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#ECEFF4;"> {</span><span style="color:#D8DEE9;"> AsyncResource</span><span style="color:#ECEFF4;"> }</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">async_hooks</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// åˆ›å»ºä¸€ä¸ªå¼‚æ­¥èµ„æºè¿½è¸ªå™¨</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> tracker</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#D8DEE9;"> assert</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">AsyncTracker</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// åˆ›å»ºä¸€ä¸ªå¼‚æ­¥èµ„æº</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> resource</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> AsyncResource</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">example_resource</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// é€šçŸ¥è¿½è¸ªå™¨æˆ‘ä»¬å¼€å§‹äº†ä¸€ä¸ªå¼‚æ­¥æ“ä½œ</span></span>
<span class="line"><span style="color:#D8DEE9;">tracker</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">init</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">resource</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">asyncId</span><span style="color:#D8DEE9FF;">())</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å‡è®¾æˆ‘ä»¬æœ‰ä¸€äº›å¼‚æ­¥é€»è¾‘</span></span>
<span class="line"><span style="color:#88C0D0;">setTimeout</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">()</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#616E88;">  // å¼‚æ­¥æ“ä½œå®Œæˆåï¼Œæˆ‘ä»¬éœ€è¦å…³é—­èµ„æº</span></span>
<span class="line"><span style="color:#D8DEE9;">  resource</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">emitDestroy</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">  tracker</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">destroy</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">resource</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">asyncId</span><span style="color:#D8DEE9FF;">())</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">  // è¿™æ—¶å€™å¯ä»¥æ£€æŸ¥æ˜¯å¦ä»ç„¶æœ‰æœªå…³é—­çš„èµ„æº</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">tracker</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">report</span><span style="color:#D8DEE9FF;">())</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // åº”è¯¥ä¸ºç©ºï¼Œå› ä¸ºæˆ‘ä»¬å…³é—­äº†èµ„æº</span></span>
<span class="line"><span style="color:#ECEFF4;">},</span><span style="color:#B48EAD;"> 100</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å¦‚æœæˆ‘ä»¬å¿˜è®°å…³é—­èµ„æºï¼Œreport() æ–¹æ³•å°†ä¼šæŠ¥å‘Šè¯¥èµ„æºä»ç„¶æ˜¯æ‰“å¼€çŠ¶æ€</span></span>
<span class="line"><span style="color:#88C0D0;">setTimeout</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">()</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">tracker</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">report</span><span style="color:#D8DEE9FF;">())</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // å°†ä¼šæ˜¾ç¤ºä¸€ä¸ªåŒ…å«äº† example_resource çš„æ•°ç»„</span></span>
<span class="line"><span style="color:#ECEFF4;">},</span><span style="color:#B48EAD;"> 200</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šè¿°ä»£ç å¤§è‡´æ¼”ç¤ºäº†å¦‚ä½•ä½¿ç”¨ <code>tracker.init()</code> æ¥åˆå§‹åŒ–ä¸€ä¸ªè¿½è¸ªå™¨ï¼Œè·Ÿè¸ªä¸€ä¸ªå¼‚æ­¥èµ„æºçš„ç”Ÿå‘½å‘¨æœŸï¼Œå¹¶ä½¿ç”¨ <code>tracker.report()</code> åœ¨ä¸åŒæ—¶é—´ç‚¹æŠ¥å‘Šè¿˜æœªå…³é—­çš„èµ„æºã€‚</p><p>è¯·æ³¨æ„ï¼Œç”±äº <code>AsyncTracker</code> æ˜¯ä¸€ä¸ªå®éªŒæ€§çš„åŠŸèƒ½ï¼Œå®ƒçš„ API å’Œè¡Œä¸ºå¯èƒ½åœ¨æœªæ¥çš„ç‰ˆæœ¬ä¸­å‘ç”Ÿå˜åŒ–ã€‚å¦å¤–ï¼Œåœ¨ä½¿ç”¨å®ƒä¹‹å‰ï¼Œä½ éœ€è¦å¯¹ Node.js ä¸­çš„å¼‚æ­¥ç¼–ç¨‹æœ‰ä¸€å®šçš„äº†è§£ï¼ŒåŒ…æ‹¬äº‹ä»¶å¾ªç¯å’Œå¼‚æ­¥é’©å­ï¼ˆ<code>async_hooks</code>ï¼‰æ¨¡å—ã€‚</p><h3 id="tracker-reset-fn" tabindex="-1"><a class="header-anchor" href="#tracker-reset-fn"><span><a href="https://nodejs.org/docs/latest/api/assert.html#trackerresetfn" target="_blank" rel="noopener noreferrer">tracker.reset([fn])</a></span></a></h3><p>å¥½çš„ï¼Œæˆ‘æ¥è§£é‡Šä¸€ä¸‹ Node.js ä¸­çš„<code>tracker.reset([fn])</code>è¿™ä¸ªæ–¹æ³•ã€‚</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“<code>tracker.reset([fn])</code>è¿™ä¸ªæ–¹æ³•æ˜¯å±äº Node.js ä¸­<code>assert</code>æ¨¡å—é‡Œé¢çš„ä¸€ä¸ªåŠŸèƒ½ï¼Œè€Œ<code>assert</code>æ¨¡å—ä¸»è¦ç”¨äºè¿›è¡Œå„ç§æ–­è¨€æ“ä½œã€‚åœ¨ç¼–ç¨‹ä¸­ï¼Œæ–­è¨€ï¼ˆAssertï¼‰æ˜¯ä¸€ç§æ£€æŸ¥ä»£ç é€»è¾‘æ˜¯å¦æ­£ç¡®çš„æ–¹å¼ã€‚å®ƒé€šå¸¸ç”¨äºæµ‹è¯•ä»£ç ï¼Œç¡®ä¿ä»£ç æŒ‰ç…§é¢„æœŸçš„æ–¹å¼è¿è¡Œã€‚</p><p><code>assert</code>æ¨¡å—é‡Œæœ‰ä¸€ä¸ªå«åš<code>AsyncResource</code>çš„ç±»ï¼Œè¿™ä¸ªç±»ä¸»è¦ç”¨æ¥è·Ÿè¸ªå¼‚æ­¥æ“ä½œçš„çŠ¶æ€ã€‚å…¶ä¸­ï¼Œ<code>tracker</code>æ˜¯<code>AsyncResource</code>å®ä¾‹åŒ–å‡ºæ¥çš„ä¸€ä¸ªå¯¹è±¡ï¼Œç”¨äºè¿½è¸ªå’Œç®¡ç†å¤šä¸ªå¼‚æ­¥æ“ä½œã€‚</p><p>åœ¨ä¸€äº›å¤æ‚çš„ç¨‹åºä¸­ï¼Œä½ å¯èƒ½ä¼šå¯åŠ¨äº†å¾ˆå¤šå¼‚æ­¥æ“ä½œï¼Œæ¯”å¦‚è¯»å†™æ–‡ä»¶ã€æ•°æ®åº“æ“ä½œç­‰ç­‰ã€‚ä½¿ç”¨<code>tracker</code>å¯ä»¥å¸®åŠ©ä½ ç¡®ä¿æ‰€æœ‰çš„è¿™äº›æ“ä½œéƒ½è¢«æ­£ç¡®åœ°å®Œæˆäº†ã€‚å¦‚æœä½ æƒ³é‡ç½®<code>tracker</code>çš„çŠ¶æ€ï¼Œå°±å¯ä»¥ç”¨åˆ°<code>tracker.reset([fn])</code>è¿™ä¸ªæ–¹æ³•ã€‚</p><p>è¿™é‡Œçš„<code>[fn]</code>æ˜¯ä¸€ä¸ªå¯é€‰çš„å›è°ƒå‡½æ•°ï¼Œå½“æ‰€æœ‰è¿½è¸ªçš„å¼‚æ­¥æ“ä½œå®Œæˆæ—¶ï¼Œè¿™ä¸ªå›è°ƒå‡½æ•°ä¼šè¢«è°ƒç”¨ã€‚</p><p>è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªç®€å•çš„ä¾‹å­æ¥ç†è§£è¿™ä¸ªæ¦‚å¿µï¼š</p><p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªç¨‹åºï¼Œå®ƒæ‰§è¡Œä¸¤ä¸ªå¼‚æ­¥æ“ä½œï¼šä¸€ä¸ªæ˜¯è¯»å–ä¸€ä¸ªæ–‡ä»¶ï¼Œå¦ä¸€ä¸ªæ˜¯ä»ç½‘ç»œè·å–ä¸€äº›æ•°æ®ã€‚æˆ‘ä»¬æƒ³è¦ç¡®ä¿è¿™ä¸¤ä¸ªæ“ä½œéƒ½å®Œæˆåå†è¿›è¡Œä¸‹ä¸€æ­¥ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> assert</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">assert</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> fs</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">fs</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> http</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">http</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// åˆ›å»ºä¸€ä¸ªæ–°çš„ AsyncResource å®ä¾‹æ¥è·Ÿè¸ªå¼‚æ­¥æ“ä½œ</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> tracker</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#D8DEE9;"> assert</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">AsyncTracker</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// ä¸€ä¸ªè¯»å–æœ¬åœ°æ–‡ä»¶çš„å¼‚æ­¥æ“ä½œ</span></span>
<span class="line"><span style="color:#D8DEE9;">tracker</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">add</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">read-file</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">fs</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">readFile</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">/path/to/file</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> (</span><span style="color:#D8DEE9;">err</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> data</span><span style="color:#ECEFF4;">)</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">err</span><span style="color:#D8DEE9FF;">) </span><span style="color:#81A1C1;">throw</span><span style="color:#D8DEE9;"> err</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">File read completed</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#616E88;">  // æ“ä½œå®Œæˆåé€šçŸ¥ tracker</span></span>
<span class="line"><span style="color:#D8DEE9;">  tracker</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">remove</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">read-file</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// ä¸€ä¸ªè¿›è¡Œç½‘ç»œè¯·æ±‚çš„å¼‚æ­¥æ“ä½œ</span></span>
<span class="line"><span style="color:#D8DEE9;">tracker</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">add</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">network-request</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">http</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">get</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">http://example.com</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> (</span><span style="color:#D8DEE9;">res</span><span style="color:#ECEFF4;">)</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Request completed</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">  res</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">on</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">data</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> ()</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {}</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">  res</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">on</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">end</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> ()</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#616E88;">    // æ“ä½œå®Œæˆåé€šçŸ¥ tracker</span></span>
<span class="line"><span style="color:#D8DEE9;">    tracker</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">remove</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">network-request</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å½“æ‰€æœ‰çš„å¼‚æ­¥æ“ä½œéƒ½å®Œæˆåï¼Œæˆ‘ä»¬å¯ä»¥é‡ç½® tracker</span></span>
<span class="line"><span style="color:#616E88;">// è¿™é‡Œå¯ä»¥ä¼ å…¥ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œåœ¨æ‰€æœ‰æ“ä½œå®Œæˆæ—¶æ‰§è¡Œ</span></span>
<span class="line"><span style="color:#D8DEE9;">tracker</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">reset</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">()</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">All asynchronous operations have been completed.</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬æ·»åŠ äº†ä¸¤ä¸ªå¼‚æ­¥æ“ä½œåˆ°<code>tracker</code>ä¸­ï¼Œå¹¶ä¸”å½“æ¯ä¸ªæ“ä½œå®Œæˆæ—¶ï¼Œè°ƒç”¨<code>remove</code>æ¥å‘Šè¯‰<code>tracker</code>è¯¥æ“ä½œå·²ç»ç»“æŸã€‚æœ€åï¼Œæˆ‘ä»¬è°ƒç”¨<code>tracker.reset()</code>æ¥é‡ç½®<code>tracker</code>çŠ¶æ€ï¼Œå¹¶ä¼ å…¥ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œè¿™ä¸ªå›è°ƒå‡½æ•°åœ¨æ‰€æœ‰è¿½è¸ªçš„å¼‚æ­¥æ“ä½œå®Œæˆæ—¶æ‰§è¡Œï¼Œå³æ‰“å°å‡º&quot;All asynchronous operations have been completed.&quot;ã€‚</p><p>è¿™æ ·ï¼Œé€šè¿‡ä½¿ç”¨<code>tracker.reset([fn])</code>ï¼Œæˆ‘ä»¬èƒ½å¤Ÿåœ¨æ‰€æœ‰å¼‚æ­¥æ“ä½œå®Œæˆåæ‰§è¡Œä¸€äº›æ¸…ç†å·¥ä½œæˆ–è€…æ˜¯è¿›å…¥ä¸‹ä¸€ä¸ªæµç¨‹ç­‰æ“ä½œã€‚</p><h3 id="tracker-verify" tabindex="-1"><a class="header-anchor" href="#tracker-verify"><span><a href="https://nodejs.org/docs/latest/api/assert.html#trackerverify" target="_blank" rel="noopener noreferrer">tracker.verify()</a></span></a></h3><p><code>tracker.verify()</code> æ˜¯ Node.js ä¸­çš„ä¸€ä¸ªæ–­è¨€å·¥å…·ï¼Œç”¨äºæµ‹è¯•ä»£ç ä¸­çš„å¼‚æ­¥æ“ä½œæ˜¯å¦å¦‚é¢„æœŸå®Œæˆã€‚è¿™ä¸ªå‡½æ•°æ˜¯ <code>assert</code> æ¨¡å—çš„ä¸€éƒ¨åˆ†ï¼Œå…¶ä¸­ <code>assert</code> æ¨¡å—æ˜¯ç”¨äºå†™æµ‹è¯•ä»£ç çš„ä¸€ä¸ªå®ç”¨å·¥å…·ã€‚åœ¨ Node.js v21.7.1 çš„æ–‡æ¡£ä¸­ï¼Œ<code>tracker.verify()</code> è¢«ç”¨æ¥ç¡®ä¿æ‰€æœ‰è¢«è¿½è¸ªçš„å¼‚æ­¥æ“ä½œéƒ½å·²ç»ç»“æŸã€‚</p><p>ä¸¾ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š</p><p>å‡è®¾ä½ æ­£åœ¨ç¼–å†™ä¸€ä¸ªç½‘ç»œåº”ç”¨ç¨‹åºï¼Œä½ æœ‰ä¸€ä¸ªå‡½æ•° <code>fetchData()</code> ç”¨äºä»äº’è”ç½‘ä¸Šè·å–æ•°æ®ï¼Œå¹¶ä¸”è¿™ä¸ªå‡½æ•°æ˜¯å¼‚æ­¥çš„ã€‚ä½ æƒ³è¦ç¡®ä¿åœ¨ä½ çš„æµ‹è¯•ä¸­ï¼Œ<code>fetchData()</code> å‡½æ•°è¢«æ­£ç¡®åœ°è°ƒç”¨å’Œå¤„ç†ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> assert</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">assert</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å‡è®¾è¿™æ˜¯ä½ çš„å¼‚æ­¥å‡½æ•°</span></span>
<span class="line"><span style="color:#81A1C1;">function</span><span style="color:#88C0D0;"> fetchData</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">callback</span><span style="color:#ECEFF4;">)</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#88C0D0;">  setTimeout</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">()</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#616E88;">    // æ¨¡æ‹Ÿæ•°æ®è·å–åçš„å›è°ƒ</span></span>
<span class="line"><span style="color:#88C0D0;">    callback</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">some data</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  },</span><span style="color:#B48EAD;"> 100</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // å»¶è¿Ÿ100æ¯«ç§’æ¨¡æ‹Ÿå¼‚æ­¥æ“ä½œ</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// åˆ›å»ºä¸€ä¸ªæ–°çš„å¼‚æ­¥èµ„æºè·Ÿè¸ªå™¨</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> tracker</span><span style="color:#81A1C1;"> =</span><span style="color:#81A1C1;"> new</span><span style="color:#D8DEE9;"> assert</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">AsyncTracker</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// é€šçŸ¥ tracker ä½ å°†è¦å¼€å§‹ä¸€ä¸ªå¼‚æ­¥æ“ä½œ</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> resource</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9;"> tracker</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">createResource</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">fetchData</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// è°ƒç”¨ä½ çš„å¼‚æ­¥å‡½æ•°</span></span>
<span class="line"><span style="color:#88C0D0;">fetchData</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">data</span><span style="color:#ECEFF4;">)</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">data</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡ºè·å–åˆ°çš„æ•°æ®</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">  // å¼‚æ­¥æ“ä½œå®Œæˆåï¼Œå‘Šè¯‰ tracker</span></span>
<span class="line"><span style="color:#D8DEE9;">  tracker</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">removeResource</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">resource</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// ä¸€äº›å…¶ä»–ä»£ç ...</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// æœ€åï¼Œåœ¨ç¨‹åºç»“æŸå‰ï¼ˆæ¯”å¦‚åœ¨æ‰€æœ‰æµ‹è¯•è¿è¡Œå®Œä¹‹åï¼‰æ£€æŸ¥æ‰€æœ‰å¼‚æ­¥æ“ä½œæ˜¯å¦å®Œæˆ</span></span>
<span class="line"><span style="color:#D8DEE9;">process</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">on</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">exit</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> ()</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  try</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">    tracker</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">verify</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¿™å°†æŠ›å‡ºé”™è¯¯å¦‚æœè¿˜æœ‰æœªå®Œæˆçš„å¼‚æ­¥æ“ä½œ</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span><span style="color:#81A1C1;"> catch</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">err</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">error</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">å­˜åœ¨æœªå®Œæˆçš„å¼‚æ­¥æ“ä½œ:</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> err</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">    process</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">exit</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">1</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // éé›¶é€€å‡ºç è¡¨ç¤ºæœ‰é”™è¯¯å‘ç”Ÿ</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº† <code>fetchData()</code> æ¥æ¨¡æ‹Ÿä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼Œå®ƒé€šè¿‡ <code>setTimeout()</code> å»¶è¿Ÿ 100 æ¯«ç§’åè¿”å›æ•°æ®ã€‚æˆ‘ä»¬ä½¿ç”¨ <code>tracker.createResource()</code> æ¥æ³¨å†Œä¸€ä¸ªæ­£åœ¨è¿›è¡Œçš„å¼‚æ­¥æ“ä½œï¼Œå¹¶ç”¨ <code>tracker.removeResource()</code> æ¥è¡¨æ˜è¿™ä¸ªç‰¹å®šçš„å¼‚æ­¥æ“ä½œå·²ç»å®Œæˆã€‚</p><p>æœ€åï¼Œåœ¨ç¨‹åºé€€å‡ºä¹‹å‰ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>tracker.verify()</code> æ¥æ£€æŸ¥æ˜¯å¦æ‰€æœ‰è¢«è·Ÿè¸ªçš„å¼‚æ­¥æ“ä½œéƒ½å·²ç»å®Œæˆã€‚å¦‚æœæœ‰ä»»ä½•æ“ä½œæœªå®Œæˆï¼Œå®ƒä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚</p><p>è¿™å°±æ˜¯ <code>tracker.verify()</code> çš„åŸºæœ¬ç”¨æ³•ï¼Œå®ƒèƒ½å¸®åŠ©å¼€å‘è€…ç¡®ä¿ä»–ä»¬çš„å¼‚æ­¥ä»£ç æŒ‰ç…§é¢„æœŸæ­£ç¡®æ‰§è¡Œï¼Œç‰¹åˆ«æ˜¯åœ¨ç¼–å†™æµ‹è¯•æ—¶éå¸¸æœ‰ç”¨ã€‚</p><h2 id="assert-value-message" tabindex="-1"><a class="header-anchor" href="#assert-value-message"><span><a href="https://nodejs.org/docs/latest/api/assert.html#assertvalue-message" target="_blank" rel="noopener noreferrer">assert(value[, message])</a></span></a></h2><p>å¥½çš„ï¼Œè®©æˆ‘æ¥è§£é‡Šä¸€ä¸‹ Node.js ä¸­çš„ <code>assert(value[, message])</code> åŠŸèƒ½ã€‚</p><p>Node.js çš„ <code>assert</code> æ˜¯ä¸€ä¸ªç”¨äºè¿›è¡Œæ–­è¨€æµ‹è¯•çš„æ¨¡å—ã€‚æ‰€è°“æ–­è¨€æµ‹è¯•ï¼Œç®€å•æ¥è¯´ï¼Œå°±æ˜¯åœ¨ä»£ç ä¸­è®¾ç½®ä¸€äº›æ£€æŸ¥ç‚¹ï¼ˆæ–­è¨€ï¼‰ï¼Œä»¥ç¡®ä¿ç¨‹åºè¿è¡Œæ—¶çš„æŸä¸ªæ¡ä»¶å¿…é¡»ä¸ºçœŸï¼ˆtrueï¼‰ã€‚å¦‚æœæ¡ä»¶ä¸ä¸ºçœŸï¼Œåˆ™ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼ˆerrorï¼‰ï¼Œè¿™é€šå¸¸è¡¨ç¤ºä½ çš„ç¨‹åºå‡ºç°äº†é€»è¾‘ä¸Šçš„é—®é¢˜ã€‚</p><p>åœ¨ Node.js v21.7.1 çš„æ–‡æ¡£ä¸­ï¼Œ<code>assert(value[, message])</code> å‡½æ•°æ˜¯ç”¨æ¥è¿›è¡ŒåŸºæœ¬çš„æ–­è¨€æµ‹è¯•çš„ã€‚è¿™ä¸ªå‡½æ•°æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼š</p><ol><li><code>value</code>ï¼šè¿™ä¸ªå‚æ•°æ˜¯ä½ æƒ³è¦æµ‹è¯•çš„è¡¨è¾¾å¼æˆ–è€…å€¼ã€‚</li><li><code>message</code>ï¼ˆå¯é€‰ï¼‰ï¼šå½“æ–­è¨€å¤±è´¥çš„æ—¶å€™ï¼Œå°†ä¼šæ˜¾ç¤ºçš„é”™è¯¯ä¿¡æ¯ã€‚</li></ol><p>å¦‚æœä¼ å…¥çš„ <code>value</code> æ˜¯çœŸå€¼ï¼ˆtruthyï¼Œå³åœ¨å¸ƒå°”ä¸Šä¸‹æ–‡ä¸­è½¬æ¢ä¸º <code>true</code> çš„å€¼ï¼‰ï¼Œé‚£ä¹ˆç¨‹åºå°†ç»§ç»­æ‰§è¡Œã€‚å¦‚æœ <code>value</code> æ˜¯å‡å€¼ï¼ˆfalsyï¼Œå³åœ¨å¸ƒå°”ä¸Šä¸‹æ–‡ä¸­è½¬æ¢ä¸º <code>false</code> çš„å€¼ï¼Œæ¯”å¦‚ <code>0</code>, <code>&#39;&#39;</code>, <code>null</code>, <code>undefined</code>, <code>NaN</code>, æˆ–è€… <code>false</code>ï¼‰ï¼Œåˆ™ä¼šæŠ›å‡ºä¸€ä¸ªå¸¦æœ‰ <code>message</code> çš„ <code>AssertionError</code>ï¼ˆæ–­è¨€é”™è¯¯ï¼‰ã€‚å¦‚æœæ²¡æœ‰æä¾› <code>message</code>ï¼Œå°±ä¼šä½¿ç”¨é»˜è®¤çš„é”™è¯¯ä¿¡æ¯ã€‚</p><p>ä¸¾ä¸ªä¾‹å­ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> assert</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">assert</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å‡è®¾ä½ æœ‰ä¸€ä¸ªå‡½æ•° isAdultï¼Œå®ƒåˆ¤æ–­ç”¨æˆ·æ˜¯å¦æˆå¹´ï¼š</span></span>
<span class="line"><span style="color:#81A1C1;">function</span><span style="color:#88C0D0;"> isAdult</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">age</span><span style="color:#ECEFF4;">)</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  return</span><span style="color:#D8DEE9;"> age</span><span style="color:#81A1C1;"> &gt;=</span><span style="color:#B48EAD;"> 18</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// ä½¿ç”¨æ–­è¨€æ¥æµ‹è¯•è¿™ä¸ªå‡½æ•°ã€‚</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> userAge</span><span style="color:#81A1C1;"> =</span><span style="color:#B48EAD;"> 20</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å¦‚æœ userAge æ˜¯æˆå¹´ï¼Œåˆ™ä¸ä¼šæœ‰ä»»ä½•è¾“å‡ºï¼Œç¨‹åºç»§ç»­æ‰§è¡Œã€‚</span></span>
<span class="line"><span style="color:#88C0D0;">assert</span><span style="color:#D8DEE9FF;">(</span><span style="color:#88C0D0;">isAdult</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">userAge</span><span style="color:#D8DEE9FF;">)</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">User must be an adult.</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å¦‚æœæˆ‘ä»¬å°† userAge æ”¹ä¸ºæœªæˆå¹´å¹´é¾„ï¼Œä¾‹å¦‚ 16ï¼š</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> anotherUserAge</span><span style="color:#81A1C1;"> =</span><span style="color:#B48EAD;"> 16</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// ç°åœ¨æ–­è¨€ä¼šå¤±è´¥ï¼Œå› ä¸º isAdult(anotherUserAge) è¿”å› falseï¼Œ</span></span>
<span class="line"><span style="color:#616E88;">// æ‰€ä»¥ assert å‡½æ•°ä¼šæŠ›å‡ºé”™è¯¯ï¼Œå¹¶é™„å¸¦æˆ‘ä»¬æä¾›çš„æ¶ˆæ¯ &#39;User must be an adult.&#39;ã€‚</span></span>
<span class="line"><span style="color:#616E88;">// å¦‚æœæˆ‘ä»¬æ²¡æœ‰æä¾›æ¶ˆæ¯ï¼Œå°±ä¼šæŠ›å‡ºä¸€ä¸ªé»˜è®¤çš„ AssertionErrorã€‚</span></span>
<span class="line"><span style="color:#88C0D0;">assert</span><span style="color:#D8DEE9FF;">(</span><span style="color:#88C0D0;">isAdult</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">anotherUserAge</span><span style="color:#D8DEE9FF;">)</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">User must be an adult.</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆå¯¼å…¥äº† Node.js çš„ <code>assert</code> æ¨¡å—ï¼Œç„¶åå®šä¹‰äº†ä¸€ä¸ª <code>isAdult</code> å‡½æ•°æ¥æ£€æµ‹å¹´é¾„æ˜¯å¦æ»¡è¶³æˆå¹´æ¡ä»¶ã€‚ä¹‹åæˆ‘ä»¬ç”¨ <code>assert</code> å‡½æ•°æµ‹è¯•äº†ä¸¤ä¸ªä¸åŒçš„å¹´é¾„ï¼Œç¬¬ä¸€ä¸ªå¹´é¾„æ»¡è¶³æ¡ä»¶è€Œé™é»˜é€šè¿‡ï¼Œç¬¬äºŒä¸ªå¹´é¾„ä¸æ»¡è¶³æ¡ä»¶æ—¶æŠ›å‡ºäº†é”™è¯¯ã€‚</p><p>æ–­è¨€æµ‹è¯•åœ¨å¼€å‘è¿‡ç¨‹ä¸­éå¸¸æœ‰ç”¨ï¼Œå°¤å…¶æ˜¯åœ¨å•å…ƒæµ‹è¯•ä¸­éªŒè¯å‡½æ•°çš„æ­£ç¡®æ€§ã€‚è¿™ç§æ–¹å¼å¯ä»¥åŠæ—©åœ°å‘ç°ç¨‹åºä¸­çš„é”™è¯¯ï¼Œé¿å…é”™è¯¯æ·±å…¥åˆ°ç³»ç»Ÿä¸­å…¶ä»–éƒ¨åˆ†ï¼ŒèŠ‚çœè°ƒè¯•çš„æ—¶é—´å’Œæˆæœ¬ã€‚</p><h2 id="assert-deepequal-actual-expected-message" tabindex="-1"><a class="header-anchor" href="#assert-deepequal-actual-expected-message"><span><a href="https://nodejs.org/docs/latest/api/assert.html#assertdeepequalactual-expected-message" target="_blank" rel="noopener noreferrer">assert.deepEqual(actual, expected[, message])</a></span></a></h2><p><code>assert.deepEqual(actual, expected[, message])</code> æ˜¯ Node.js ä¸­ <code>assert</code> æ¨¡å—æä¾›çš„ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒç”¨äºæµ‹è¯•ä¸¤ä¸ªå€¼åœ¨ç»“æ„ä¸Šæ˜¯å¦ç›¸ç­‰ã€‚è¿™é‡Œçš„â€œç»“æ„ä¸Šç›¸ç­‰â€æ„å‘³ç€å¯¹è±¡çš„å±æ€§å’Œæ•°ç»„ä¸­çš„å…ƒç´ åœ¨é€’å½’æ¯”è¾ƒæ—¶æ˜¯ä¸€è‡´çš„ï¼Œä½†å¹¶ä¸æ£€æŸ¥å…¶åŸå‹ã€ç»‘å®šçš„ç¬¦å·å±æ€§ï¼Œæˆ–è€…ä¸å¯æšä¸¾çš„å±æ€§ã€‚</p><p>ç°åœ¨æˆ‘ä»¬æ¥ä¸¾ä¸€äº›å®é™…çš„ä¾‹å­æ¥è¯´æ˜è¿™ä¸ªå‡½æ•°çš„ç”¨æ³•ï¼š</p><p>å‡è®¾ä½ æ­£åœ¨ç¼–å†™ä¸€ä¸ªç¨‹åºï¼Œéœ€è¦ç¡®ä¿ä½ å¤„ç†å¾—åˆ°çš„æ•°æ®ç»“æ„ä¸æœŸæœ›çš„ç»“æ„å®Œå…¨ä¸€è‡´ã€‚ä¾‹å¦‚ï¼Œä½ æœ‰ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒåº”è¯¥è¿”å›ä¸€ä¸ªåŒ…å«ç”¨æˆ·ä¿¡æ¯çš„å¯¹è±¡ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">function</span><span style="color:#88C0D0;"> getUser</span><span style="color:#ECEFF4;">()</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#616E88;">  // åœ¨çœŸå®çš„æƒ…å†µä¸‹ï¼Œè¿™é‡Œå¯èƒ½ä¼šæœ‰ä»æ•°æ®åº“è·å–æ•°æ®çš„ä»£ç </span></span>
<span class="line"><span style="color:#81A1C1;">  return</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#88C0D0;">    name</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">Alice</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#88C0D0;">    age</span><span style="color:#ECEFF4;">:</span><span style="color:#B48EAD;"> 25</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#88C0D0;">    hobbies</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> [</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">reading</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">gaming</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">]</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç°åœ¨ï¼Œä½ æƒ³è¦æµ‹è¯•è¿™ä¸ªå‡½æ•°è¿”å›çš„å¯¹è±¡æ˜¯å¦ä¸ä½ æ‰€æœŸæœ›çš„å¯¹è±¡ç»“æ„ç›¸åŒ¹é…ã€‚ä½ å¯ä»¥ä½¿ç”¨ <code>assert.deepEqual()</code> æ¥è¿›è¡Œæµ‹è¯•ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> assert</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">assert</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// è°ƒç”¨ä½ çš„å‡½æ•°æ¥è·å–ç»“æœ</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> actualUser</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> getUser</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å®šä¹‰ä¸€ä¸ªæœŸæœ›å¾—åˆ°çš„ç»“æœå¯¹è±¡</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> expectedUser</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#88C0D0;">  name</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">Alice</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#88C0D0;">  age</span><span style="color:#ECEFF4;">:</span><span style="color:#B48EAD;"> 25</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#88C0D0;">  hobbies</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> [</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">reading</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">gaming</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">]</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// ä½¿ç”¨assert.deepEqual()æ¥åˆ¤æ–­actualUserå’ŒexpectedUseræ˜¯å¦ç»“æ„ä¸Šç›¸ç­‰</span></span>
<span class="line"><span style="color:#D8DEE9;">assert</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">deepEqual</span><span style="color:#D8DEE9FF;">(</span></span>
<span class="line"><span style="color:#D8DEE9;">  actualUser</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#D8DEE9;">  expectedUser</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#ECEFF4;">  &quot;</span><span style="color:#A3BE8C;">The user object does not match the expected structure.</span><span style="color:#ECEFF4;">&quot;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœ <code>actualUser</code> å’Œ <code>expectedUser</code> åœ¨ç»“æ„ä¸Šç›¸ç­‰ï¼Œé‚£ä¹ˆè¿™ä¸ªæ–­è¨€é€šè¿‡ï¼Œç¨‹åºç»§ç»­æ‰§è¡Œã€‚å¦‚æœå®ƒä»¬ä¸ç›¸ç­‰ï¼Œ<code>assert.deepEqual()</code> å°†æŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œé”™è¯¯ä¿¡æ¯å°†ä¼šæ˜¯æä¾›çš„æ¶ˆæ¯ï¼ˆåœ¨è¿™ä¸ªä¾‹å­é‡Œæ˜¯ <code>&#39;The user object does not match the expected structure.&#39;</code>ï¼‰ï¼Œå¦‚æœæ²¡æœ‰æä¾›æ¶ˆæ¯ï¼Œåˆ™æ˜¾ç¤ºé»˜è®¤çš„é”™è¯¯ä¿¡æ¯ã€‚</p><p>é‡è¦çš„æ˜¯è¦æ³¨æ„ï¼Œ<code>assert.deepEqual()</code> æ–¹æ³•åœ¨ Node.js v10.0.0 å·²è¢«åºŸå¼ƒï¼Œå¹¶åœ¨åç»­ç‰ˆæœ¬ä¸­ç§»é™¤ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯ <code>assert.deepStrictEqual()</code>ã€‚æ–°çš„ <code>deepStrictEqual</code> ç‰ˆæœ¬æ›´åŠ ä¸¥æ ¼åœ°æ¯”è¾ƒå¯¹è±¡çš„ç±»å‹å’Œå€¼ã€‚å› æ­¤ï¼Œåœ¨æœ€æ–°çš„ Node.js ä»£ç ä¸­ï¼Œä½ åº”è¯¥ä½¿ç”¨ <code>assert.deepStrictEqual()</code> è€Œä¸æ˜¯ <code>assert.deepEqual()</code>ã€‚</p><p>ä¾‹å¦‚ï¼Œä½¿ç”¨ <code>assert.deepStrictEqual()</code>ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#616E88;">// ... å…¶ä»–ä»£ç ä¸å˜ ...</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// ä½¿ç”¨assert.deepStrictEqual()æ¥åˆ¤æ–­actualUserå’ŒexpectedUseræ˜¯å¦å®Œå…¨ä¸€æ ·</span></span>
<span class="line"><span style="color:#D8DEE9;">assert</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">deepStrictEqual</span><span style="color:#D8DEE9FF;">(</span></span>
<span class="line"><span style="color:#D8DEE9;">  actualUser</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#D8DEE9;">  expectedUser</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#ECEFF4;">  &quot;</span><span style="color:#A3BE8C;">The user object does not match the expected structure.</span><span style="color:#ECEFF4;">&quot;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ä¸ªè°ƒç”¨æ–¹å¼ä¸ <code>assert.deepEqual()</code> ç›¸ä¼¼ï¼Œä½†å®ƒä¼šæ£€æŸ¥æ›´å¤šçš„æ¡ä»¶ï¼Œæ¯”å¦‚å¯¹è±¡çš„ç±»å‹ã€‚æ‰€ä»¥ï¼Œå¦‚æœ <code>actualUser</code> å’Œ <code>expectedUser</code> ä¹‹é—´æœ‰ä»»ä½•ç»†å¾®çš„ä¸åŒï¼ŒåŒ…æ‹¬æ•°æ®ç±»å‹çš„ä¸åŒï¼ˆæ¯”å¦‚ä¸€ä¸ªæ˜¯æ•°å­—ç±»å‹ï¼Œå¦ä¸€ä¸ªæ˜¯å­—ç¬¦ä¸²ç±»å‹çš„æ•°å­—ï¼‰ï¼Œ<code>assert.deepStrictEqual()</code> ä¼šæŠ›å‡ºé”™è¯¯ã€‚</p><h3 id="comparison-details" tabindex="-1"><a class="header-anchor" href="#comparison-details"><span><a href="https://nodejs.org/docs/latest/api/assert.html#comparison-details" target="_blank" rel="noopener noreferrer">Comparison details</a></span></a></h3><p>å¥½çš„ï¼ŒNode.js ä¸­çš„ <code>assert</code> æ¨¡å—ä¸»è¦ç”¨äºæ‰§è¡Œæ–­è¨€æ“ä½œï¼Œå®ƒæ˜¯ä¸€ç§æ£€æŸ¥ä»£ç æ˜¯å¦æŒ‰é¢„æœŸå·¥ä½œçš„æ–¹å¼ã€‚åœ¨æµ‹è¯•ä¸­å°¤å…¶å¸¸ç”¨ï¼Œæ¯”å¦‚ä½ å¯èƒ½æƒ³ç¡®è®¤ä¸€ä¸ªå‡½æ•°è¿”å›æ­£ç¡®çš„ç»“æœæˆ–è€…ä¸€ä¸ªå¯¹è±¡å…·æœ‰æœŸæœ›çš„å±æ€§ã€‚</p><p>åœ¨ Node.js v21.7.1 çš„æ–‡æ¡£ä¸­ï¼Œå…³äº <code>Comparison details</code> ï¼ˆæ¯”è¾ƒç»†èŠ‚ï¼‰éƒ¨åˆ†è¯´æ˜äº† <code>assert</code> æ¨¡å—å¦‚ä½•å¯¹æ•°æ®è¿›è¡Œæ¯”è¾ƒï¼Œç‰¹åˆ«æ˜¯ <code>strict</code> æ¨¡å¼ä¸ <code>legacy</code> æ¨¡å¼ä¹‹é—´çš„å·®å¼‚ã€‚</p><p>ä¸‹é¢æˆ‘å°†ç®€å•è§£é‡Šè¿™ä¸¤ç§æ¨¡å¼ï¼Œå¹¶ç»™å‡ºä¸€äº›ä¾‹å­ï¼š</p><h3 id="_1-strict-æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#_1-strict-æ¨¡å¼"><span>1. Strict æ¨¡å¼ï¼š</span></a></h3><p>Strictï¼ˆä¸¥æ ¼ï¼‰æ¨¡å¼æ„å‘³ç€æ¯”è¾ƒæ—¶ä¼šé‡‡ç”¨ JavaScript çš„ <code>===</code> è¿ç®—ç¬¦ï¼Œå³æ‰€è°“çš„ &quot;ä¸¥æ ¼ç›¸ç­‰&quot;ã€‚è¿™æ„å‘³ç€ä¸ä»…å€¼éœ€è¦ç›¸ç­‰ï¼Œç±»å‹ä¹Ÿå¿…é¡»å®Œå…¨ç›¸åŒã€‚</p><p>ä¾‹å¦‚ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> assert</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">assert</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">strict</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">assert</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">strictEqual</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">5</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 5</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // OK, å› ä¸ºå€¼å’Œç±»å‹éƒ½ç›¸ç­‰ã€‚</span></span>
<span class="line"><span style="color:#D8DEE9;">assert</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">strictEqual</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">5</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">5</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // OK, åŒä¸Šã€‚</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å°†æŠ›å‡º AssertionErrorï¼Œå› ä¸ºè™½ç„¶&#39;5&#39;è½¬æ¢æˆæ•°å­—åç­‰äº5ï¼Œä½†ç±»å‹ä¸åŒã€‚</span></span>
<span class="line"><span style="color:#D8DEE9;">assert</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">strictEqual</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">5</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">5</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-legacy-æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#_2-legacy-æ¨¡å¼"><span>2. Legacy æ¨¡å¼ï¼š</span></a></h3><p>Legacyï¼ˆä¼ ç»Ÿï¼‰æ¨¡å¼æ›´åŠ å®½æ¾ï¼Œå®ƒä½¿ç”¨ <code>==</code> è¿ç®—ç¬¦ï¼Œå…è®¸ç±»å‹è½¬æ¢ã€‚</p><p>ä¾‹å¦‚ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> assert</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">assert</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// ä¸ä¼šæŠ›å‡ºé”™è¯¯ï¼Œå› ä¸º&#39;5&#39;è½¬æ¢æˆæ•°å­—åç­‰äº5ã€‚</span></span>
<span class="line"><span style="color:#D8DEE9;">assert</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">equal</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">5</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">5</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="å®é™…è¿ç”¨ä¾‹å­" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨ä¾‹å­"><span>å®é™…è¿ç”¨ä¾‹å­ï¼š</span></a></h3><h4 id="ä¾‹å­-1-æ£€æŸ¥å‡½æ•°è¿”å›å€¼" tabindex="-1"><a class="header-anchor" href="#ä¾‹å­-1-æ£€æŸ¥å‡½æ•°è¿”å›å€¼"><span>ä¾‹å­ 1ï¼šæ£€æŸ¥å‡½æ•°è¿”å›å€¼</span></a></h4><p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªå‡½æ•° <code>add</code>ï¼Œå¯ä»¥æ·»åŠ ä¸¤ä¸ªæ•°å­—ï¼Œæˆ‘ä»¬æƒ³ç¡®ä¿å®ƒèƒ½æ­£ç¡®å·¥ä½œã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">function</span><span style="color:#88C0D0;"> add</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">a</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> b</span><span style="color:#ECEFF4;">)</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  return</span><span style="color:#D8DEE9;"> a</span><span style="color:#81A1C1;"> +</span><span style="color:#D8DEE9;"> b</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// ä½¿ç”¨ strict æ¨¡å¼æ¥æµ‹è¯•</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> assert</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">assert</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">strict</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">assert</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">strictEqual</span><span style="color:#D8DEE9FF;">(</span><span style="color:#88C0D0;">add</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">2</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 3</span><span style="color:#D8DEE9FF;">)</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 5</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // æ­£ç¡®çš„è°ƒç”¨ï¼Œä¸ä¼šæŠ›å‡ºé”™è¯¯</span></span>
<span class="line"><span style="color:#D8DEE9;">assert</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">strictEqual</span><span style="color:#D8DEE9FF;">(</span><span style="color:#88C0D0;">add</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">2</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 2</span><span style="color:#D8DEE9FF;">)</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 5</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // é”™è¯¯çš„è°ƒç”¨ï¼Œä¼šæŠ›å‡º AssertionError</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="ä¾‹å­-2-æ£€æŸ¥å¯¹è±¡å±æ€§" tabindex="-1"><a class="header-anchor" href="#ä¾‹å­-2-æ£€æŸ¥å¯¹è±¡å±æ€§"><span>ä¾‹å­ 2ï¼šæ£€æŸ¥å¯¹è±¡å±æ€§</span></a></h4><p>å¦‚æœæˆ‘ä»¬æœ‰ä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶ä¸”æˆ‘ä»¬æƒ³æ£€æŸ¥å¯¹è±¡æ˜¯å¦åŒ…å«ç‰¹å®šçš„å±æ€§å’Œå€¼ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> user</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#88C0D0;">  name</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">Alice</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#88C0D0;">  age</span><span style="color:#ECEFF4;">:</span><span style="color:#B48EAD;"> 25</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// ä½¿ç”¨ strict æ¨¡å¼æ¥æµ‹è¯•</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> assert</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">assert</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">strict</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">assert</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">strictEqual</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">user</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">name</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">Alice</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // æ­£ç¡®çš„è°ƒç”¨ï¼Œä¸ä¼šæŠ›å‡ºé”™è¯¯</span></span>
<span class="line"><span style="color:#D8DEE9;">assert</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">strictEqual</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">user</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">age</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">25</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // é”™è¯¯çš„è°ƒç”¨ï¼Œä¼šå› ä¸ºç±»å‹ä¸åŒè€ŒæŠ›å‡º AssertionError</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ€»ç»“ä¸€ä¸‹ï¼Œ<code>assert</code> æ¨¡å—æä¾›äº†ä¸€ç»„ç”¨äºéªŒè¯ä»£ç æ­£ç¡®æ€§çš„å®ç”¨åŠŸèƒ½ï¼Œåœ¨è‡ªåŠ¨åŒ–æµ‹è¯•ä¸­éå¸¸æœ‰ç”¨ã€‚ç†è§£ä¸¥æ ¼æ¨¡å¼å’Œä¼ ç»Ÿæ¨¡å¼ä¹‹é—´çš„åŒºåˆ«ï¼Œå¯¹æ­£ç¡®ä½¿ç”¨è¯¥æ¨¡å—è‡³å…³é‡è¦ã€‚</p><h2 id="assert-deepstrictequal-actual-expected-message" tabindex="-1"><a class="header-anchor" href="#assert-deepstrictequal-actual-expected-message"><span><a href="https://nodejs.org/docs/latest/api/assert.html#assertdeepstrictequalactual-expected-message" target="_blank" rel="noopener noreferrer">assert.deepStrictEqual(actual, expected[, message])</a></span></a></h2><p><code>assert.deepStrictEqual</code> æ˜¯ Node.js ä¸­ <code>assert</code> æ¨¡å—æä¾›çš„ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºè¿›è¡Œæ·±åº¦ç›¸ç­‰æ€§æ£€æŸ¥ã€‚è¯¥å‡½æ•°ä¼šé€’å½’åœ°æ£€æŸ¥ä¸¤ä¸ªå¯¹è±¡çš„æ‰€æœ‰å±æ€§å’Œå±æ€§å€¼æ˜¯å¦ä¸¥æ ¼ç›¸ç­‰ï¼ˆå³ç±»å‹å’Œå€¼éƒ½ä¸€æ ·ï¼‰ã€‚</p><h3 id="å‚æ•°è§£é‡Š" tabindex="-1"><a class="header-anchor" href="#å‚æ•°è§£é‡Š"><span>å‚æ•°è§£é‡Š</span></a></h3><ul><li><code>actual</code>: è¿™æ˜¯ä½ æƒ³è¦æµ‹è¯•çš„å®é™…å€¼ã€‚</li><li><code>expected</code>: è¿™æ˜¯ä½ æœŸæœ›çš„å€¼ï¼Œç”¨æ¥å’Œå®é™…å€¼è¿›è¡Œå¯¹æ¯”ã€‚</li><li><code>message</code>: å¦‚æœæä¾›äº†è¿™ä¸ªå‚æ•°ï¼Œå¹¶ä¸”å®é™…å€¼ä¸æœŸæœ›å€¼ä¸ç¬¦ï¼Œé‚£ä¹ˆåœ¨æŠ›å‡ºé”™è¯¯æ—¶ä¼šæ˜¾ç¤ºè¿™ä¸ªæ¶ˆæ¯æ–‡æœ¬ã€‚</li></ul><h3 id="ä½œç”¨" tabindex="-1"><a class="header-anchor" href="#ä½œç”¨"><span>ä½œç”¨</span></a></h3><p>å½“ä½ åœ¨ç¼–å†™ä»£ç æ—¶ï¼Œç‰¹åˆ«æ˜¯åœ¨åšå•å…ƒæµ‹è¯•æ—¶ï¼Œä½ å¯èƒ½ä¼šæƒ³ç¡®è®¤ä½ çš„å‡½æ•°æˆ–è€…æ¨¡å—è¿”å›çš„ç»“æœæ˜¯å¦ç¬¦åˆæœŸæœ›ã€‚<code>assert.deepStrictEqual</code> å‡½æ•°å¸®åŠ©ä½ æ–­è¨€ä¸¤ä¸ªå¤æ‚å¯¹è±¡å®Œå…¨ä¸€è‡´ã€‚å¦‚æœä¸ä¸€è‡´ï¼ŒNode.js ä¼šæŠ›å‡ºä¸€ä¸ª AssertionErrorï¼Œå‘Šè¯‰ä½ å“ªé‡Œä¸ç¬¦åˆé¢„æœŸã€‚</p><h3 id="å®é™…è¿ç”¨çš„ä¾‹å­" tabindex="-1"><a class="header-anchor" href="#å®é™…è¿ç”¨çš„ä¾‹å­"><span>å®é™…è¿ç”¨çš„ä¾‹å­</span></a></h3><ol><li><strong>æ¯”è¾ƒç®€å•å¯¹è±¡</strong></li></ol><p>å‡è®¾ä½ æœ‰ä¸€ä¸ªå‡½æ•° <code>getUser</code> è¿”å›ä¸€ä¸ªç”¨æˆ·å¯¹è±¡ï¼Œä½ æƒ³éªŒè¯å®ƒè¿”å›çš„å¯¹è±¡æ˜¯å¦æ­£ç¡®ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> assert</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">assert</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">function</span><span style="color:#88C0D0;"> getUser</span><span style="color:#ECEFF4;">()</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  return</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#88C0D0;">    name</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">Alice</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#88C0D0;">    age</span><span style="color:#ECEFF4;">:</span><span style="color:#B48EAD;"> 25</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> expectedUser</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#88C0D0;">  name</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">Alice</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#88C0D0;">  age</span><span style="color:#ECEFF4;">:</span><span style="color:#B48EAD;"> 25</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">assert</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">deepStrictEqual</span><span style="color:#D8DEE9FF;">(</span></span>
<span class="line"><span style="color:#88C0D0;">  getUser</span><span style="color:#D8DEE9FF;">()</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#D8DEE9;">  expectedUser</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#ECEFF4;">  &quot;</span><span style="color:#A3BE8C;">The user object is not as expected!</span><span style="color:#ECEFF4;">&quot;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ®µä»£ç ä¸­ï¼Œå¦‚æœ <code>getUser()</code> å‡½æ•°è¿”å›çš„å¯¹è±¡ä¸ <code>expectedUser</code> å®Œå…¨ç›¸åŒï¼Œé‚£ä¹ˆç¨‹åºå°†æ­£å¸¸æ‰§è¡Œã€‚å¦‚æœæœ‰å·®å¼‚ï¼Œæ¯”å¦‚å¹´é¾„ä¸æ˜¯ 25ï¼Œå°±ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯å¹¶æ˜¾ç¤º <code>&#39;The user object is not as expected!&#39;</code>ã€‚</p><ol start="2"><li><strong>æ¯”è¾ƒæ•°ç»„</strong></li></ol><p>ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>assert.deepStrictEqual</code> æ¥æ¯”è¾ƒæ•°ç»„ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> assert</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">assert</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> actualArray</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9FF;"> [</span><span style="color:#B48EAD;">1</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 2</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 3</span><span style="color:#D8DEE9FF;">]</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> expectedArray</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9FF;"> [</span><span style="color:#B48EAD;">1</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 2</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 3</span><span style="color:#D8DEE9FF;">]</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">assert</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">deepStrictEqual</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">actualArray</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> expectedArray</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">The arrays do not match!</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li><strong>æ¯”è¾ƒåµŒå¥—å¯¹è±¡</strong></li></ol><p>åµŒå¥—å¯¹è±¡çš„æ¯”è¾ƒï¼Œæ„å‘³ç€æ¯ä¸€å±‚çš„å¯¹è±¡éƒ½ä¼šè¢«é€ä¸ªå±æ€§æ¯”è¾ƒï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> assert</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">assert</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> person</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#88C0D0;">  name</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">John</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#88C0D0;">  address</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#88C0D0;">    street</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">123 Main St</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#88C0D0;">    city</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">Anytown</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#ECEFF4;">  },</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> expectedPerson</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#88C0D0;">  name</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">John</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#88C0D0;">  address</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#88C0D0;">    street</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">123 Main St</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#88C0D0;">    city</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">Anytown</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#ECEFF4;">  },</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">assert</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">deepStrictEqual</span><span style="color:#D8DEE9FF;">(</span></span>
<span class="line"><span style="color:#D8DEE9;">  person</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#D8DEE9;">  expectedPerson</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#ECEFF4;">  &quot;</span><span style="color:#A3BE8C;">The person objects are not deeply equal!</span><span style="color:#ECEFF4;">&quot;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œå³ä½¿ <code>address</code> å±æ€§æ˜¯ä¸€ä¸ªåµŒå¥—çš„å¯¹è±¡ï¼Œ<code>deepStrictEqual</code> ä¹Ÿä¼šæ£€æŸ¥ <code>street</code> å’Œ <code>city</code> å±æ€§æ˜¯å¦åŒ¹é…ã€‚</p><h3 id="æ³¨æ„äº‹é¡¹" tabindex="-1"><a class="header-anchor" href="#æ³¨æ„äº‹é¡¹"><span>æ³¨æ„äº‹é¡¹</span></a></h3><ul><li><code>deepStrictEqual</code> ä¼šè€ƒè™‘å¯¹è±¡çš„åŸå‹ã€å¯æšä¸¾å±æ€§ä¸ä¸å¯æšä¸¾å±æ€§ç­‰å¤šä¸ªæ–¹é¢ï¼Œæ‰€ä»¥ç¡®ä¿åœ¨ä½¿ç”¨æ—¶ç†è§£å¯¹è±¡çš„è¿™äº›ç»†èŠ‚ã€‚</li><li>å½“æ¯”è¾ƒç±»å®ä¾‹æˆ–è€…å«æœ‰å¾ªç¯å¼•ç”¨çš„å¯¹è±¡æ—¶ï¼Œä¹Ÿå¿…é¡»è°¨æ…ä½¿ç”¨ã€‚</li><li>å› ä¸º <code>deepStrictEqual</code> ä¼šæ£€æŸ¥ç±»å‹ï¼Œæ‰€ä»¥æ•°å­— <code>1</code> å’Œå­—ç¬¦ä¸² <code>&#39;1&#39;</code> å°†ä¸ä¼šè¢«è®¤ä¸ºæ˜¯ç›¸ç­‰çš„ã€‚</li></ul><p>æ€»ç»“èµ·æ¥ï¼Œä½¿ç”¨ <code>assert.deepStrictEqual</code> å¯ä»¥å¸®åŠ©ä½ ç¡®è®¤ä½ çš„ä»£ç æ˜¯å¦æŒ‰ç…§ä½ çš„é¢„æœŸå·¥ä½œï¼Œå°¤å…¶æ˜¯åœ¨å¤„ç†å¤æ‚å¯¹è±¡å’Œæ•°æ®ç»“æ„æ—¶ã€‚å®ƒæ˜¯å•å…ƒæµ‹è¯•çš„é‡è¦å·¥å…·ä¹‹ä¸€ã€‚</p><h3 id="comparison-details-1" tabindex="-1"><a class="header-anchor" href="#comparison-details-1"><span><a href="https://nodejs.org/docs/latest/api/assert.html#comparison-details_1" target="_blank" rel="noopener noreferrer">Comparison details</a></span></a></h3><p>å½“ä½ é˜…è¯» Node.js çš„æ–‡æ¡£æ—¶ï¼Œå°¤å…¶æ˜¯<code>assert</code>æ¨¡å—çš„éƒ¨åˆ†ï¼Œä½ ä¼šé‡åˆ°â€œComparison detailsâ€è¿™ä¸ªç« èŠ‚ã€‚åœ¨ Node.js ä¸­ï¼Œ<code>assert</code>æ¨¡å—æä¾›äº†ä¸€ç³»åˆ—çš„æ–­è¨€æµ‹è¯•ï¼Œç”¨æ¥ç¡®ä¿ä»£ç æŒ‰ç…§ä½ çš„é¢„æœŸæ–¹å¼è¿è¡Œã€‚å¦‚æœæ–­è¨€å¤±è´¥ï¼Œé€šå¸¸æ„å‘³ç€æœ‰ä¸€ä¸ªé”™è¯¯æˆ–è€… bug å­˜åœ¨äºä½ çš„ä»£ç ä¸­ã€‚</p><p><strong>Comparison details</strong> æŒ‡çš„æ˜¯å½“ä½¿ç”¨<code>assert</code>æ¨¡å—è¿›è¡Œå€¼æ¯”è¾ƒæ—¶ï¼ŒNode.js å¦‚ä½•å†³å®šä¸¤ä¸ªå€¼æ˜¯å¦ç›¸ç­‰ã€‚åœ¨ Node.js v21.7.1 ä¸­ï¼Œè¿™äº›è¯¦æƒ…éå¸¸é‡è¦ï¼Œå› ä¸ºå®ƒä»¬å†³å®šäº†æ–­è¨€ä¼šæˆåŠŸè¿˜æ˜¯å¤±è´¥ã€‚</p><p>è®©æˆ‘ä»¬é€šè¿‡å‡ ä¸ªå®é™…ä¾‹å­æ¥ç†è§£è¿™äº›ç»†èŠ‚ï¼š</p><h3 id="_1-assert-strictequal-å’Œ-assert-notstrictequal" tabindex="-1"><a class="header-anchor" href="#_1-assert-strictequal-å’Œ-assert-notstrictequal"><span>1. <code>assert.strictEqual()</code> å’Œ <code>assert.notStrictEqual()</code></span></a></h3><p>è¿™ä¸¤ä¸ªæ–¹æ³•ç”¨æ¥æ£€æŸ¥ä¸¤ä¸ªå€¼æ˜¯å¦ä¸¥æ ¼ç›¸ç­‰ï¼ˆå³ä¸è¿›è¡Œç±»å‹è½¬æ¢ï¼‰ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> assert</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">assert</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// æ­£ç¡®ç¤ºä¾‹ï¼š1 å’Œ &#39;1&#39; ä¸ä¸¥æ ¼ç›¸ç­‰ï¼Œå› ä¸ºå®ƒä»¬ç±»å‹ä¸åŒ</span></span>
<span class="line"><span style="color:#D8DEE9;">assert</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">notStrictEqual</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">1</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">1</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // No error thrown</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// é”™è¯¯ç¤ºä¾‹ï¼š1 å’Œ 1 ä¸¥æ ¼ç›¸ç­‰</span></span>
<span class="line"><span style="color:#D8DEE9;">assert</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">notStrictEqual</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">1</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 1</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // AssertionError: 1 !== 1</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-assert-deepequal-å’Œ-assert-notdeepequal" tabindex="-1"><a class="header-anchor" href="#_2-assert-deepequal-å’Œ-assert-notdeepequal"><span>2. <code>assert.deepEqual()</code> å’Œ <code>assert.notDeepEqual()</code></span></a></h3><p>è¿™äº›æ–¹æ³•ç”¨æ¥å¯¹å¯¹è±¡å’Œæ•°ç»„è¿›è¡Œæ·±åº¦æ¯”è¾ƒï¼Œä½†ä¸è€ƒè™‘åŸå‹æˆ–è€…å±æ€§çš„å¯æšä¸¾æ€§ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> assert</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">assert</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> obj1</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> {</span><span style="color:#88C0D0;"> a</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> {</span><span style="color:#88C0D0;"> b</span><span style="color:#ECEFF4;">:</span><span style="color:#B48EAD;"> 1</span><span style="color:#ECEFF4;"> }</span><span style="color:#ECEFF4;"> }</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> obj2</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> {</span><span style="color:#88C0D0;"> a</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> {</span><span style="color:#88C0D0;"> b</span><span style="color:#ECEFF4;">:</span><span style="color:#B48EAD;"> 1</span><span style="color:#ECEFF4;"> }</span><span style="color:#ECEFF4;"> }</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> obj3</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> {</span><span style="color:#88C0D0;"> a</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> {</span><span style="color:#88C0D0;"> b</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">1</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;"> }</span><span style="color:#ECEFF4;"> }</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// æ­£ç¡®ç¤ºä¾‹ï¼šè™½ç„¶obj1å’Œobj2ä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œä½†å®ƒä»¬ç»“æ„ç›¸åŒ</span></span>
<span class="line"><span style="color:#D8DEE9;">assert</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">deepEqual</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">obj1</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> obj2</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // No error thrown</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// é”™è¯¯ç¤ºä¾‹ï¼šobj1å’Œobj3çœ‹èµ·æ¥ç±»ä¼¼ï¼Œä½†bçš„å€¼ç±»å‹ä¸åŒ</span></span>
<span class="line"><span style="color:#D8DEE9;">assert</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">deepEqual</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">obj1</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> obj3</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // AssertionError: { a: { b: 1 } } deepEqual { a: { b: &#39;1&#39; } }</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-assert-deepstrictequal-å’Œ-assert-notdeepstrictequal" tabindex="-1"><a class="header-anchor" href="#_3-assert-deepstrictequal-å’Œ-assert-notdeepstrictequal"><span>3. <code>assert.deepStrictEqual()</code> å’Œ <code>assert.notDeepStrictEqual()</code></span></a></h3><p>è¿™äº›æ–¹æ³•è·Ÿ<code>assert.deepEqual()</code>ç±»ä¼¼ï¼Œä½†æ˜¯ä¼šè€ƒè™‘åŸå‹å’Œå±æ€§çš„å¯æšä¸¾æ€§ï¼Œå¹¶è¦æ±‚æ¯”è¾ƒçš„å…ƒç´ ç±»å‹ä¹Ÿå¿…é¡»ç›¸åŒã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> assert</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">assert</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> arr1</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9FF;"> [</span><span style="color:#B48EAD;">1</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 2</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 3</span><span style="color:#D8DEE9FF;">]</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> arr2</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9FF;"> [</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">1</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">2</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">3</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">]</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// æ­£ç¡®ç¤ºä¾‹ï¼šarr1å’Œarr2å…ƒç´ çš„å€¼çœ‹ä¼¼ç›¸åŒï¼Œä½†å®é™…ä¸Šç±»å‹ä¸åŒ</span></span>
<span class="line"><span style="color:#D8DEE9;">assert</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">notDeepStrictEqual</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">arr1</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> arr2</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // No error thrown</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// é”™è¯¯ç¤ºä¾‹ï¼šarr1ä¸è‡ªå·±æ¯”è¾ƒï¼Œå®Œå…¨ç›¸åŒ</span></span>
<span class="line"><span style="color:#D8DEE9;">assert</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">notDeepStrictEqual</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">arr1</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> arr1</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // AssertionError: [1, 2, 3] notDeepStrictEqual [1, 2, 3]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ€»ç»“èµ·æ¥ï¼Œå½“ä½ ä½¿ç”¨<code>assert</code>æ¨¡å—ä¸­çš„æ¯”è¾ƒå‡½æ•°æ—¶ï¼Œä½ éœ€è¦æ¸…æ¥šåœ°çŸ¥é“ä½ æƒ³è¦çš„æ˜¯å“ªç§æ¯”è¾ƒé€»è¾‘ï¼šæ˜¯ç®€å•çš„ä¸¥æ ¼æ¯”è¾ƒ(<code>strictEqual</code>)ï¼Œè¿˜æ˜¯ä¸è€ƒè™‘ç±»å‹çš„æ·±åº¦æ¯”è¾ƒ(<code>deepEqual</code>)ï¼ŒæŠ‘æˆ–æ˜¯æ—¢è€ƒè™‘å€¼åˆè€ƒè™‘ç±»å‹çš„æ·±åº¦æ¯”è¾ƒ(<code>deepStrictEqual</code>)ã€‚æ ¹æ®ä½ çš„éœ€æ±‚é€‰æ‹©åˆé€‚çš„æ–¹æ³•ï¼Œèƒ½å¸®åŠ©ä½ æ›´å‡†ç¡®åœ°è¿›è¡Œæ–­è¨€æµ‹è¯•ã€‚</p><h2 id="assert-doesnotmatch-string-regexp-message" tabindex="-1"><a class="header-anchor" href="#assert-doesnotmatch-string-regexp-message"><span><a href="https://nodejs.org/docs/latest/api/assert.html#assertdoesnotmatchstring-regexp-message" target="_blank" rel="noopener noreferrer">assert.doesNotMatch(string, regexp[, message])</a></span></a></h2><p><code>assert.doesNotMatch(string, regexp[, message])</code> æ˜¯ Node.js ä¸­ <code>assert</code> æ¨¡å—çš„ä¸€ä¸ªæ–¹æ³•ï¼Œç”¨äºæ–­è¨€ï¼ˆå³ç¡®è®¤ï¼‰ä¸€ä¸ªå­—ç¬¦ä¸² <code>string</code> ä¸åŒ¹é…ç»™å®šçš„æ­£åˆ™è¡¨è¾¾å¼ <code>regexp</code>ã€‚å¦‚æœå­—ç¬¦ä¸²ç¡®å®ä¸ç¬¦åˆè¿™ä¸ªæ¨¡å¼ï¼Œé‚£ä¹ˆç¨‹åºå°±ä¼šç»§ç»­æ‰§è¡Œï¼›å¦‚æœå­—ç¬¦ä¸²ç¬¦åˆæ¨¡å¼ï¼Œåˆ™ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚</p><h3 id="å‚æ•°è§£é‡Š-1" tabindex="-1"><a class="header-anchor" href="#å‚æ•°è§£é‡Š-1"><span>å‚æ•°è§£é‡Š</span></a></h3><ul><li><code>string</code>: è¿™æ˜¯ä½ æƒ³è¦è¿›è¡Œæ£€æŸ¥çš„æ–‡æœ¬ã€‚</li><li><code>regexp</code>: æ­£åˆ™è¡¨è¾¾å¼ï¼Œç”¨äºå®šä¹‰å­—ç¬¦ä¸²åº”å½“éµå¾ªçš„ç‰¹å®šæ¨¡å¼æˆ–è§„åˆ™ã€‚</li><li><code>message</code>: å¦‚æœæ–­è¨€å¤±è´¥ï¼ˆå³å­—ç¬¦ä¸²åŒ¹é…äº†æ­£åˆ™è¡¨è¾¾å¼ï¼‰ï¼Œåˆ™å¯ä»¥æä¾›ä¸€ä¸ªè‡ªå®šä¹‰çš„é”™è¯¯ä¿¡æ¯ï¼Œå®ƒå°†è¢«åŒ…å«åœ¨æŠ›å‡ºçš„é”™è¯¯ä¸­ã€‚è¿™ä¸ªå‚æ•°æ˜¯å¯é€‰çš„ã€‚</li></ul><h3 id="ä½¿ç”¨åœºæ™¯å’Œä¾‹å­" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨åœºæ™¯å’Œä¾‹å­"><span>ä½¿ç”¨åœºæ™¯å’Œä¾‹å­</span></a></h3><p>å‡è®¾ä½ æ­£åœ¨å¼€å‘ä¸€ä¸ªåŠŸèƒ½ï¼Œç”¨æˆ·éœ€è¦è¾“å…¥ç”¨æˆ·åï¼Œä½†æ˜¯ä½ ä¸å¸Œæœ›ç”¨æˆ·åä¸­åŒ…å«æ•°å­—ã€‚ä½ å¯ä»¥ä½¿ç”¨ <code>assert.doesNotMatch()</code> æ¥æ£€æŸ¥ç”¨æˆ·åæ˜¯å¦ç¬¦åˆè¦æ±‚ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> assert</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">assert</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// ç”¨æˆ·åä¸åº”è¯¥åŒ…å«æ•°å­—</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> username</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">Alice123</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> pattern</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> /</span><span style="color:#EBCB8B;">\d</span><span style="color:#81A1C1;">+</span><span style="color:#ECEFF4;">/</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // æ­£åˆ™è¡¨è¾¾å¼ï¼Œç”¨äºåŒ¹é…ä»»ä½•åŒ…å«è‡³å°‘ä¸€ä¸ªæ•°å­—çš„æƒ…å†µ</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">try</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#616E88;">  // æ–­è¨€ç”¨æˆ·åä¸åº”åŒ¹é…åŒ…å«æ•°å­—çš„æ¨¡å¼</span></span>
<span class="line"><span style="color:#D8DEE9;">  assert</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">doesNotMatch</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">username</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> pattern</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">ç”¨æˆ·åä¸­ä¸èƒ½åŒ…å«æ•°å­—ï¼</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;"> catch</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">error</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">error</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">error</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">message</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#616E88;">  // å¦‚æœæ–­è¨€å¤±è´¥ï¼Œé”™è¯¯ä¿¡æ¯å°†ä¼šæ˜¯ &#39;ç”¨æˆ·åä¸­ä¸èƒ½åŒ…å«æ•°å­—ï¼&#39;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œ<code>username</code> åŒ…å«æ•°å­—ï¼Œæ‰€ä»¥ä¸æ­£åˆ™è¡¨è¾¾å¼ <code>pattern</code> åŒ¹é…ï¼Œå› æ­¤ <code>assert.doesNotMatch()</code> ä¼šæŠ›å‡ºä¸€ä¸ªå¸¦æœ‰æˆ‘ä»¬è‡ªå®šä¹‰æ¶ˆæ¯ <code>&#39;ç”¨æˆ·åä¸­ä¸èƒ½åŒ…å«æ•°å­—ï¼&#39;</code> çš„é”™è¯¯ã€‚å¦‚æœ <code>username</code> æ²¡æœ‰åŒ…å«æ•°å­—ï¼ˆä¾‹å¦‚æ˜¯ <code>&#39;Alice&#39;</code>ï¼‰ï¼Œé‚£ä¹ˆæ–­è¨€å°±ä¼šé€šè¿‡ï¼Œç¨‹åºä¼šç»§ç»­æ­£å¸¸è¿è¡Œã€‚</p><p>å†ä¸¾ä¸€ä¸ªä¾‹å­ï¼Œæ¯”å¦‚ï¼Œåœ¨å¤„ç†ç”¨æˆ·è¾“å…¥çš„ç”µå­é‚®ç®±æ—¶ï¼Œä½ è¦ç¡®ä¿è¾“å…¥çš„æ•°æ®ä¸æ˜¯ä½ ä¼ä¸šçš„ç”µå­é‚®ç®±åç¼€ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> assert</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">assert</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> email</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">user@examplecorp.com</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> corporateEmailPattern</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> /</span><span style="color:#EBCB8B;">@examplecorp\.com</span><span style="color:#81A1C1;">$</span><span style="color:#ECEFF4;">/</span><span style="color:#81A1C1;">i</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // æ£€æŸ¥ä»¥ &quot;@examplecorp.com&quot; ç»“å°¾çš„é‚®ç®±</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">try</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#616E88;">  // ç¡®è®¤ç”µå­é‚®ä»¶åœ°å€ä¸ä»¥ä¼ä¸šé‚®ç®±åç¼€ç»“å°¾</span></span>
<span class="line"><span style="color:#D8DEE9;">  assert</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">doesNotMatch</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">email</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> corporateEmailPattern</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">è¯·å‹¿ä½¿ç”¨å…¬å¸é‚®ç®±æ³¨å†Œã€‚</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;"> catch</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">error</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">error</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">error</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">message</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#616E88;">  // å¦‚æœæ–­è¨€å¤±è´¥ï¼Œé”™è¯¯ä¿¡æ¯å°†ä¼šæ˜¯ &#39;è¯·å‹¿ä½¿ç”¨å…¬å¸é‚®ç®±æ³¨å†Œã€‚&#39;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­é‡Œï¼Œå¦‚æœ <code>email</code> å˜é‡çš„å€¼ä»¥ <code>&quot;@examplecorp.com&quot;</code> ç»“å°¾ï¼Œ<code>assert.doesNotMatch()</code> å°†ä¼šæŠ›å‡ºé”™è¯¯ï¼Œå¹¶è¾“å‡ºæ¶ˆæ¯ <code>&#39;è¯·å‹¿ä½¿ç”¨å…¬å¸é‚®ç®±æ³¨å†Œã€‚&#39;</code>ã€‚å¦‚æœ <code>email</code> å€¼æ²¡æœ‰ä»¥å…¬å¸é‚®ç®±åç¼€ç»“å°¾ï¼Œæ¯”å¦‚ <code>user@gmail.com</code>ï¼Œé‚£ä¹ˆæ–­è¨€é€šè¿‡ï¼Œç¨‹åºæ­£å¸¸ç»§ç»­æ‰§è¡Œã€‚</p><h2 id="assert-doesnotreject-asyncfn-error-message" tabindex="-1"><a class="header-anchor" href="#assert-doesnotreject-asyncfn-error-message"><span><a href="https://nodejs.org/docs/latest/api/assert.html#assertdoesnotrejectasyncfn-error-message" target="_blank" rel="noopener noreferrer">assert.doesNotReject(asyncFn[, error][, message])</a></span></a></h2><p><code>assert.doesNotReject(asyncFn[, error][, message])</code>æ˜¯ Node.js ä¸­çš„ä¸€ä¸ªæ–­è¨€å‡½æ•°ï¼Œç”¨äºæµ‹è¯•ä¸€ä¸ªå¼‚æ­¥å‡½æ•°<code>asyncFn</code>ï¼ˆå®ƒé€šå¸¸è¿”å›ä¸€ä¸ª Promiseï¼‰æ˜¯å¦ä¸ä¼šè¢«æ‹’ç»ï¼ˆrejectï¼‰ã€‚å¦‚æœè¿™ä¸ªå¼‚æ­¥å‡½æ•°è¢«æ‹’ç»äº†ï¼Œå¹¶ä¸”æ‹’ç»çš„åŸå› ç¬¦åˆæŒ‡å®šçš„é”™è¯¯<code>error</code>ï¼ˆå¦‚æœæä¾›ï¼‰ï¼Œé‚£ä¹ˆ<code>assert.doesNotReject</code>å°†ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚è¿™ä¸ªé”™è¯¯å¯ä»¥é€šè¿‡<code>message</code>å‚æ•°æ¥è‡ªå®šä¹‰é”™è¯¯æ¶ˆæ¯ã€‚</p><p>åœ¨è§£é‡Šä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦ç†è§£ä»¥ä¸‹å‡ ç‚¹ï¼š</p><ul><li><strong>Async Functionï¼ˆå¼‚æ­¥å‡½æ•°ï¼‰</strong>: ä¸€ä¸ªè¿”å› Promise å¯¹è±¡çš„å‡½æ•°ï¼Œè¯¥å¯¹è±¡ä»£è¡¨äº†ä¸€ä¸ªå°†è¦å‘ç”Ÿåœ¨æœªæ¥æŸä¸ªæ—¶åˆ»çš„å®Œæˆï¼ˆfulfilledï¼‰æˆ–è€…å¤±è´¥ï¼ˆrejectedï¼‰äº‹ä»¶ã€‚</li><li><strong>Promise</strong>: æ˜¯ä¸€ä¸ªä»£è¡¨äº†å¼‚æ­¥æ“ä½œæœ€ç»ˆæˆåŠŸ(fulfillment)æˆ–å¤±è´¥(rejection)çš„å¯¹è±¡ã€‚</li><li><strong>Rejected Promise</strong>: å½“ Promise å› ä¸ºé”™è¯¯è€Œæ²¡æœ‰æˆåŠŸæ‰§è¡Œæ—¶ï¼Œå®ƒå°±ä¼šè¢«æ‹’ç»ï¼ˆrejectï¼‰ã€‚</li><li><strong>Assert æ¨¡å—</strong>: Node.js å†…ç½®çš„æ¨¡å—ï¼Œç”¨äºç¼–å†™æµ‹è¯•ä»£ç ã€‚å½“ä¸€äº›é¢„æœŸæ¡ä»¶ä¸æ»¡è¶³æ—¶ï¼Œå®ƒå¯ä»¥æŠ›å‡ºé”™è¯¯ï¼ˆAssertionErrorï¼‰ï¼Œå¸®åŠ©å¼€å‘è€…æ‰¾åˆ°é—®é¢˜ã€‚</li></ul><p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬è¯¦ç»†åœ°çœ‹çœ‹<code>assert.doesNotReject</code>å¦‚ä½•å·¥ä½œï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> assert</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">assert</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å¼‚æ­¥å‡½æ•°ï¼Œå®ƒè¿”å›ä¸€ä¸ªè§£å†³ï¼ˆfulfillï¼‰çš„Promise</span></span>
<span class="line"><span style="color:#81A1C1;">function</span><span style="color:#88C0D0;"> resolveAfter2Seconds</span><span style="color:#ECEFF4;">()</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  return</span><span style="color:#81A1C1;"> new</span><span style="color:#8FBCBB;"> Promise</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">resolve</span><span style="color:#ECEFF4;">)</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#88C0D0;">    setTimeout</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">()</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#88C0D0;">      resolve</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">resolved</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">    },</span><span style="color:#B48EAD;"> 2000</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å¼‚æ­¥å‡½æ•°ï¼Œå®ƒè¿”å›ä¸€ä¸ªè¢«æ‹’ç»ï¼ˆrejectï¼‰çš„Promise</span></span>
<span class="line"><span style="color:#81A1C1;">function</span><span style="color:#88C0D0;"> rejectAfter2Seconds</span><span style="color:#ECEFF4;">()</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  return</span><span style="color:#81A1C1;"> new</span><span style="color:#8FBCBB;"> Promise</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">resolve</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> reject</span><span style="color:#ECEFF4;">)</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#88C0D0;">    setTimeout</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">()</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#88C0D0;">      reject</span><span style="color:#D8DEE9FF;">(</span><span style="color:#81A1C1;">new</span><span style="color:#88C0D0;"> Error</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">rejected</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">))</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">    },</span><span style="color:#B48EAD;"> 2000</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// æµ‹è¯•resolveAfter2Secondså‡½æ•°ï¼ŒæœŸæœ›å®ƒä¸è¢«æ‹’ç»</span></span>
<span class="line"><span style="color:#D8DEE9;">assert</span></span>
<span class="line"><span style="color:#ECEFF4;">  .</span><span style="color:#88C0D0;">doesNotReject</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">resolveAfter2Seconds</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> Error</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">è¿™ä¸ªå¼‚æ­¥æ“ä½œåº”è¯¥æ²¡æœ‰è¢«æ‹’ç»</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#ECEFF4;">  .</span><span style="color:#88C0D0;">then</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">()</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">é€šè¿‡äº†ï¼å¼‚æ­¥æ“ä½œæ²¡æœ‰è¢«æ‹’ç»</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// æµ‹è¯•rejectAfter2Secondså‡½æ•°ï¼ŒæœŸæœ›å®ƒä¸è¢«æ‹’ç»ï¼ˆè¿™ä¼šå¤±è´¥ï¼‰</span></span>
<span class="line"><span style="color:#D8DEE9;">assert</span></span>
<span class="line"><span style="color:#ECEFF4;">  .</span><span style="color:#88C0D0;">doesNotReject</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">rejectAfter2Seconds</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> Error</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">è¿™ä¸ªå¼‚æ­¥æ“ä½œåº”è¯¥æ²¡æœ‰è¢«æ‹’ç»</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#ECEFF4;">  .</span><span style="color:#88C0D0;">then</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">()</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">é€šè¿‡äº†ï¼å¼‚æ­¥æ“ä½œæ²¡æœ‰è¢«æ‹’ç»</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#ECEFF4;">  .</span><span style="color:#88C0D0;">catch</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">error</span><span style="color:#ECEFF4;">)</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">error</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">é”™è¯¯ï¼š</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> error</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">message</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼š</p><ul><li><code>resolveAfter2Seconds</code>æ˜¯ä¸€ä¸ªå¼‚æ­¥å‡½æ•°ï¼Œå®ƒåœ¨ 2 ç§’åæˆåŠŸåœ°è§£å†³äº†å®ƒçš„ Promiseã€‚</li><li><code>rejectAfter2Seconds</code>æ˜¯ä¸€ä¸ªå¼‚æ­¥å‡½æ•°ï¼Œå®ƒåœ¨ 2 ç§’åæ‹’ç»äº†å®ƒçš„ Promiseã€‚</li></ul><p>å½“æˆ‘ä»¬ä½¿ç”¨<code>assert.doesNotReject</code>æµ‹è¯•<code>resolveAfter2Seconds</code>æ—¶ï¼Œæµ‹è¯•é€šè¿‡ï¼Œå› ä¸º Promise è¢«æˆåŠŸåœ°è§£å†³äº†ã€‚ä½†å½“æˆ‘ä»¬ç”¨åŒæ ·çš„æ–¹æ³•æ¥æµ‹è¯•<code>rejectAfter2Seconds</code>æ—¶ï¼Œæµ‹è¯•å¤±è´¥ï¼Œå› ä¸ºè¿™ä¸ªå¼‚æ­¥å‡½æ•°è¿”å›äº†ä¸€ä¸ªè¢«æ‹’ç»çš„ Promiseï¼Œä¸<code>assert.doesNotReject</code>çš„é¢„æœŸç›¸åã€‚</p><p>ä½¿ç”¨<code>assert.doesNotReject</code>ä¸»è¦æ˜¯åœ¨æµ‹è¯•ä»£ç ä¸­ï¼Œç¡®ä¿ç‰¹å®šçš„å¼‚æ­¥å‡½æ•°åœ¨è¿è¡Œæ—¶ä¸ä¼šå› ä¸ºå¼‚å¸¸æˆ–ç‰¹å®šçš„é”™è¯¯æ¡ä»¶è€Œæ‹’ç»å®ƒçš„ Promiseã€‚å¦‚æœä¸æ»¡è¶³è¿™ä¸ªæ¡ä»¶ï¼Œä½ çš„æµ‹è¯•ä»£ç å°†ä¼šæ”¶åˆ°ä¸€ä¸ªé”™è¯¯æç¤ºï¼Œä»è€Œè®©ä½ çŸ¥é“ä»£ç çš„å“ªä¸ªéƒ¨åˆ†å¯èƒ½å­˜åœ¨é—®é¢˜ã€‚</p><h2 id="assert-doesnotthrow-fn-error-message" tabindex="-1"><a class="header-anchor" href="#assert-doesnotthrow-fn-error-message"><span><a href="https://nodejs.org/docs/latest/api/assert.html#assertdoesnotthrowfn-error-message" target="_blank" rel="noopener noreferrer">assert.doesNotThrow(fn[, error][, message])</a></span></a></h2><p>Node.js ä¸­çš„ <code>assert</code> æ¨¡å—æ˜¯ç”¨æ¥è¿›è¡Œå„ç§æ–­è¨€æµ‹è¯•çš„å·¥å…·ï¼Œè¿™æ˜¯åœ¨ç¼–å†™ä»£ç æ—¶ç”¨äºç¡®ä¿ä»£ç ç¬¦åˆæœŸæœ›çš„ä¸€ç§æ–¹å¼ã€‚<code>assert.doesNotThrow(fn[, error][, message])</code> æ˜¯ <code>assert</code> æ¨¡å—ä¸­çš„ä¸€ä¸ªæ–¹æ³•ï¼Œå®ƒç”¨æ¥æµ‹è¯•ä¸€ä¸ªå‡½æ•°åœ¨æ‰§è¡Œæ—¶æ˜¯å¦ä¸ä¼šæŠ›å‡ºé”™è¯¯ã€‚</p><p>å½“ä½ ä½¿ç”¨ <code>assert.doesNotThrow()</code> æ–¹æ³•æ—¶ï¼Œä½ å®é™…ä¸Šæ˜¯åœ¨è¯´ï¼šâ€œæˆ‘è®¤ä¸ºè¿™ä¸ªå‡½æ•°åœ¨è¿è¡Œæ—¶æ˜¯ä¸åº”è¯¥æŠ›å‡ºé”™è¯¯çš„â€ã€‚å¦‚æœå‡½æ•°æ‰§è¡Œè¿‡ç¨‹ä¸­ç¡®å®æ²¡æœ‰æŠ›å‡ºä»»ä½•é”™è¯¯ï¼Œé‚£ä¹ˆç¨‹åºå°±ä¼šç»§ç»­è¿è¡Œï¼›ä½†æ˜¯å¦‚æœå‡½æ•°æ‰§è¡Œè¿‡ç¨‹ä¸­æŠ›å‡ºäº†é”™è¯¯ï¼Œ<code>assert.doesNotThrow()</code> ä¼šäº§ç”Ÿä¸€ä¸ª AssertionError å¼‚å¸¸ã€‚</p><p>ç°åœ¨è®©æˆ‘ä»¬è¯¦ç»†è§£é‡Šä¸€ä¸‹ <code>assert.doesNotThrow()</code> æ–¹æ³•çš„å„ä¸ªå‚æ•°ï¼š</p><ol><li><code>fn</code>: è¿™æ˜¯ä¸€ä¸ªå°†è¦è¢«æ‰§è¡Œçš„å‡½æ•°ï¼Œé€šå¸¸æ˜¯ä½ æƒ³æµ‹è¯•çš„é‚£éƒ¨åˆ†ä»£ç ã€‚</li><li><code>error</code> (å¯é€‰): è¿™ä¸ªå‚æ•°å¯ä»¥æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ã€æ­£åˆ™è¡¨è¾¾å¼æˆ–è€…ä¸€ä¸ªè‡ªå®šä¹‰éªŒè¯å‡½æ•°ï¼Œå®ƒç”¨æ¥æŒ‡å®šå‡½æ•° <code>fn</code> æ‰§è¡Œæ—¶æŠ›å‡ºçš„é”™è¯¯ç±»å‹ã€‚å¦‚æœå‡½æ•°æŠ›å‡ºäº†ä¸€ä¸ªä¸ä¹‹åŒ¹é…çš„é”™è¯¯ï¼Œ<code>assert.doesNotThrow()</code> å°†ä¼šæŠ›å‡º AssertionError å¼‚å¸¸ã€‚</li><li><code>message</code> (å¯é€‰): å¦‚æœæ–­è¨€å¤±è´¥ï¼ˆä¹Ÿå°±æ˜¯å‡½æ•°æŠ›å‡ºäº†é”™è¯¯ï¼‰ï¼Œè¿™ä¸ªå­—ç¬¦ä¸²ä¿¡æ¯ä¼šè¢«æ·»åŠ åˆ° AssertionError å¼‚å¸¸ä¸­ï¼Œä½¿å¾—è°ƒè¯•æ›´åŠ å®¹æ˜“ã€‚</li></ol><p>è®©æˆ‘ä»¬æ¥ä¸¾å‡ ä¸ªå®é™…è¿ç”¨çš„ä¾‹å­ï¼š</p><h3 id="ä¾‹å­-1-ä¸€ä¸ªä¸æŠ›å‡ºé”™è¯¯çš„å‡½æ•°" tabindex="-1"><a class="header-anchor" href="#ä¾‹å­-1-ä¸€ä¸ªä¸æŠ›å‡ºé”™è¯¯çš„å‡½æ•°"><span>ä¾‹å­ 1ï¼šä¸€ä¸ªä¸æŠ›å‡ºé”™è¯¯çš„å‡½æ•°</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> assert</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">assert</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">function</span><span style="color:#88C0D0;"> doesNotThrowError</span><span style="color:#ECEFF4;">()</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  return</span><span style="color:#81A1C1;"> true;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// æˆ‘ä»¬é¢„æœŸè¿™ä¸ªå‡½æ•°åœ¨æ‰§è¡Œæ—¶ä¸ä¼šæŠ›å‡ºé”™è¯¯</span></span>
<span class="line"><span style="color:#D8DEE9;">assert</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">doesNotThrow</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">doesNotThrowError</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // æ­£å¸¸æ‰§è¡Œï¼Œæ²¡æœ‰é”™è¯¯ã€‚</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œç”±äºå‡½æ•° <code>doesNotThrowError</code> åœ¨æ‰§è¡Œæ—¶æ²¡æœ‰æŠ›å‡ºä»»ä½•é”™è¯¯ï¼Œæ‰€ä»¥ <code>assert.doesNotThrow()</code> ä¸ä¼šæœ‰ä»»ä½•çš„è¾“å‡ºï¼Œç¨‹åºä¼šæ­£å¸¸ç»§ç»­è¿è¡Œã€‚</p><h3 id="ä¾‹å­-2-ä¸€ä¸ªæŠ›å‡ºé”™è¯¯çš„å‡½æ•°" tabindex="-1"><a class="header-anchor" href="#ä¾‹å­-2-ä¸€ä¸ªæŠ›å‡ºé”™è¯¯çš„å‡½æ•°"><span>ä¾‹å­ 2ï¼šä¸€ä¸ªæŠ›å‡ºé”™è¯¯çš„å‡½æ•°</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> assert</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">assert</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#616E88;">////æ¥æºï¼šdoc.cherrychat.org è¯·å‹¿å•†ç”¨</span></span>
<span class="line"><span style="color:#81A1C1;">function</span><span style="color:#88C0D0;"> throwsTypeError</span><span style="color:#ECEFF4;">()</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  throw</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> TypeError</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">This is a type error</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// æˆ‘ä»¬é¢„æœŸè¿™ä¸ªå‡½æ•°åœ¨æ‰§è¡Œæ—¶ä¸ä¼šæŠ›å‡ºç±»å‹é”™è¯¯</span></span>
<span class="line"><span style="color:#81A1C1;">try</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">  assert</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">doesNotThrow</span><span style="color:#D8DEE9FF;">(</span></span>
<span class="line"><span style="color:#D8DEE9;">    throwsTypeError</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#D8DEE9;">    TypeError</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#ECEFF4;">    &quot;</span><span style="color:#A3BE8C;">Function should not throw a TypeError</span><span style="color:#ECEFF4;">&quot;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  )</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;"> catch</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">error</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">error</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">error</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">message</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#616E88;">  // è¾“å‡º: Function should not throw a TypeError</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå› ä¸º <code>throwsTypeError</code> å‡½æ•°æŠ›å‡ºäº†ä¸€ä¸ª <code>TypeError</code>ï¼Œè¿™ä¸æˆ‘ä»¬ä½¿ç”¨ <code>assert.doesNotThrow()</code> æ–­è¨€çš„é¢„æœŸç›¸åï¼Œæ‰€ä»¥ä¼šæŠ›å‡ºä¸€ä¸ª AssertionError å¼‚å¸¸ï¼Œå¹¶ä¸”åŒ…å«æˆ‘ä»¬æä¾›çš„ <code>&#39;Function should not throw a TypeError&#39;</code> ä¿¡æ¯ã€‚</p><h3 id="ä¾‹å­-3-ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ä½œä¸ºé”™è¯¯å‚æ•°" tabindex="-1"><a class="header-anchor" href="#ä¾‹å­-3-ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ä½œä¸ºé”™è¯¯å‚æ•°"><span>ä¾‹å­ 3ï¼šä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ä½œä¸ºé”™è¯¯å‚æ•°</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> assert</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">assert</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">function</span><span style="color:#88C0D0;"> throwsErrorWithMessage</span><span style="color:#ECEFF4;">()</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  throw</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> Error</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">This will fail</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">try</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#616E88;">  // æˆ‘ä»¬é¢„æœŸè¿™ä¸ªå‡½æ•°åœ¨æ‰§è¡Œæ—¶ä¸ä¼šæŠ›å‡ºåŒ…å«ç‰¹å®šæ–‡æœ¬çš„é”™è¯¯</span></span>
<span class="line"><span style="color:#D8DEE9;">  assert</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">doesNotThrow</span><span style="color:#D8DEE9FF;">(</span></span>
<span class="line"><span style="color:#D8DEE9;">    throwsErrorWithMessage</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#ECEFF4;">    /</span><span style="color:#EBCB8B;">fail</span><span style="color:#ECEFF4;">/</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#ECEFF4;">    &#39;</span><span style="color:#A3BE8C;">Should not throw an error with &quot;fail&quot;</span><span style="color:#ECEFF4;">&#39;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  )</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;"> catch</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">error</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">error</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">error</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">message</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#616E88;">  // è¾“å‡º: Should not throw an error with &quot;fail&quot;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ <code>/fail/</code> æ¥æ£€æµ‹é”™è¯¯æ¶ˆæ¯ä¸­æ˜¯å¦åŒ…å«å•è¯ &quot;fail&quot;ã€‚ç”±äºæŠ›å‡ºçš„é”™è¯¯ä¸­ç¡®å®åŒ…å«äº† &quot;fail&quot;ï¼Œæ‰€ä»¥ <code>assert.doesNotThrow()</code> æ–­è¨€å¤±è´¥ï¼ŒæŠ›å‡ºäº† AssertionError å¼‚å¸¸ï¼Œå¹¶ä¸”åŒ…å«æˆ‘ä»¬æä¾›çš„ä¿¡æ¯ã€‚</p><p>æ€»ç»“èµ·æ¥ï¼Œ<code>assert.doesNotThrow()</code> æ˜¯ä¸€ä¸ªåœ¨æµ‹è¯•è¿‡ç¨‹ä¸­éªŒè¯ä»£ç ä¸åº”è¯¥æŠ›å‡ºé”™è¯¯çš„å·¥å…·ï¼Œé€šè¿‡æ•è·å’Œå¤„ç†å‡½æ•°æ‰§è¡Œä¸­å¯èƒ½å‘ç”Ÿçš„å¼‚å¸¸ï¼Œå®ƒå¸®åŠ©å¼€å‘è€…ç¡®ä¿ä»£ç çš„å¥å£®æ€§å’Œæ­£ç¡®æ€§ã€‚</p><h2 id="assert-equal-actual-expected-message" tabindex="-1"><a class="header-anchor" href="#assert-equal-actual-expected-message"><span><a href="https://nodejs.org/docs/latest/api/assert.html#assertequalactual-expected-message" target="_blank" rel="noopener noreferrer">assert.equal(actual, expected[, message])</a></span></a></h2><p>å½“ç„¶ï¼Œè®©æˆ‘æ¥å¸®ä½ ç†è§£ Node.js ä¸­çš„ <code>assert.equal</code> æ–¹æ³•ã€‚</p><p>åœ¨ç¼–ç¨‹ä¸­ï¼Œå°¤å…¶æ˜¯è¿›è¡Œå•å…ƒæµ‹è¯•æ—¶ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦éªŒè¯ä»£ç çš„æŸä¸ªéƒ¨åˆ†æ˜¯å¦æŒ‰ç…§é¢„æœŸå·¥ä½œã€‚è¿™å°±æ˜¯æ–­è¨€ï¼ˆassertionï¼‰çš„ç”¨æ­Œã€‚åœ¨ Node.js çš„ <code>assert</code> æ¨¡å—ä¸­ï¼Œæä¾›äº†ä¸€ç³»åˆ—çš„æ–­è¨€æµ‹è¯•æ–¹æ³•ï¼Œç”¨äºç¡®ä¿ä»£ç è¡¨ç°å‡ºé¢„æœŸçš„è¡Œä¸ºã€‚</p><p><code>assert.equal(actual, expected[, message])</code> æ˜¯å…¶ä¸­çš„ä¸€ä¸ªæ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•ç”¨äºæ£€æŸ¥ä¸¤ä¸ªå€¼æ˜¯å¦ç›¸ç­‰ã€‚å¦‚æœä¸ç›¸ç­‰ï¼Œå°†ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚è¿™é‡Œæ˜¯å®ƒæ¥æ”¶çš„å‚æ•°ï¼š</p><ul><li><code>actual</code>: è¿™æ˜¯ä½ çš„ä»£ç äº§ç”Ÿçš„å®é™…ç»“æœã€‚</li><li><code>expected</code>: è¿™æ˜¯ä½ æœŸæœ›å¾—åˆ°çš„ç»“æœã€‚</li><li><code>message</code>: å¦‚æœå®é™…ç»“æœä¸é¢„æœŸç»“æœä¸ç¬¦ï¼Œä½ å¯ä»¥æä¾›ä¸€ä¸ªè‡ªå®šä¹‰çš„é”™è¯¯ä¿¡æ¯ï¼Œè¿™ä¸ªå‚æ•°æ˜¯å¯é€‰çš„ã€‚</li></ul><p>å¦‚æœ <code>actual</code> ä¸ <code>expected</code> ä¸ç­‰ï¼Œé‚£ä¹ˆ <code>assert.equal</code> ä¼šæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ï¼Œå¹¶ä¸”ä¼šæ˜¾ç¤ºä½ æä¾›çš„ <code>message</code>ï¼ˆå¦‚æœä½ æ²¡æœ‰æä¾› <code>message</code>ï¼Œåˆ™ä¼šæ˜¾ç¤ºé»˜è®¤çš„é”™è¯¯ä¿¡æ¯ï¼‰ã€‚æ³¨æ„ï¼Œ<code>assert.equal</code> ä½¿ç”¨çš„æ˜¯ <code>==</code> æ¯”è¾ƒï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒä¼šè¿›è¡Œç±»å‹è½¬æ¢ã€‚</p><p>ä¸‹é¢æ˜¯ä¸€äº›ä½¿ç”¨ <code>assert.equal</code> çš„å®é™…ä¾‹å­ï¼š</p><h3 id="ä¾‹å­-1-åŸºæœ¬ä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#ä¾‹å­-1-åŸºæœ¬ä½¿ç”¨"><span>ä¾‹å­ 1: åŸºæœ¬ä½¿ç”¨</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> assert</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">assert</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">function</span><span style="color:#88C0D0;"> add</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">a</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> b</span><span style="color:#ECEFF4;">)</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  return</span><span style="color:#D8DEE9;"> a</span><span style="color:#81A1C1;"> +</span><span style="color:#D8DEE9;"> b</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// æµ‹è¯• add å‡½æ•°</span></span>
<span class="line"><span style="color:#D8DEE9;">assert</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">equal</span><span style="color:#D8DEE9FF;">(</span><span style="color:#88C0D0;">add</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">1</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 1</span><span style="color:#D8DEE9FF;">)</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 2</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">1 åŠ  1 åº”è¯¥ç­‰äº 2</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å¦‚æœä¸Šé¢çš„æ–­è¨€å¤±è´¥äº†ï¼Œå°†ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼š</span></span>
<span class="line"><span style="color:#616E88;">// AssertionError: 1 åŠ  1 åº”è¯¥ç­‰äº 2</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ä¾‹å­-2-åœ¨æ²¡æœ‰æä¾›é”™è¯¯ä¿¡æ¯çš„æƒ…å†µä¸‹ä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#ä¾‹å­-2-åœ¨æ²¡æœ‰æä¾›é”™è¯¯ä¿¡æ¯çš„æƒ…å†µä¸‹ä½¿ç”¨"><span>ä¾‹å­ 2: åœ¨æ²¡æœ‰æä¾›é”™è¯¯ä¿¡æ¯çš„æƒ…å†µä¸‹ä½¿ç”¨</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> assert</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">assert</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å‡è®¾æœ‰ä¸€ä¸ªå‡½æ•° supposedToReturnString è¿”å›ä¸€ä¸ªå€¼</span></span>
<span class="line"><span style="color:#81A1C1;">function</span><span style="color:#88C0D0;"> supposedToReturnString</span><span style="color:#ECEFF4;">()</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  return</span><span style="color:#B48EAD;"> 123</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // æ•…æ„å†™é”™ï¼Œåº”è¯¥è¿”å›å­—ç¬¦ä¸²</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// è¿™é‡Œæˆ‘ä»¬æœŸå¾…è¿”å›å€¼æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸² &quot;hello&quot;</span></span>
<span class="line"><span style="color:#D8DEE9;">assert</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">equal</span><span style="color:#D8DEE9FF;">(</span><span style="color:#88C0D0;">supposedToReturnString</span><span style="color:#D8DEE9FF;">()</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">hello</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// ç”±äºè¿”å›çš„æ˜¯æ•°å­— 123ï¼Œè€Œä¸æ˜¯å­—ç¬¦ä¸² &quot;hello&quot;ï¼Œ</span></span>
<span class="line"><span style="color:#616E88;">// ä¸Šé¢çš„æ–­è¨€ä¼šå¤±è´¥å¹¶æŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œä½†é”™è¯¯ä¿¡æ¯æ˜¯é»˜è®¤ç”Ÿæˆçš„ã€‚</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ä¾‹å­-3-åœ¨å¼‚æ­¥ä»£ç ä¸­ä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#ä¾‹å­-3-åœ¨å¼‚æ­¥ä»£ç ä¸­ä½¿ç”¨"><span>ä¾‹å­ 3: åœ¨å¼‚æ­¥ä»£ç ä¸­ä½¿ç”¨</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> assert</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">assert</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å‡è®¾æœ‰ä¸€ä¸ªå¼‚æ­¥å‡½æ•° fetchTitleï¼Œå®ƒä»ç½‘ç»œè·å–ä¸€ä¸ªæ ‡é¢˜</span></span>
<span class="line"><span style="color:#81A1C1;">function</span><span style="color:#88C0D0;"> fetchTitle</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">callback</span><span style="color:#ECEFF4;">)</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#88C0D0;">  setTimeout</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">()</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#88C0D0;">    callback</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Node.js Guide</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // å‡è£…è¿™æ˜¯ä»ç½‘ä¸Šè·å–çš„æ ‡é¢˜</span></span>
<span class="line"><span style="color:#ECEFF4;">  },</span><span style="color:#B48EAD;"> 100</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// æµ‹è¯• fetchTitle å‡½æ•°</span></span>
<span class="line"><span style="color:#88C0D0;">fetchTitle</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">title</span><span style="color:#ECEFF4;">)</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">  assert</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">equal</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">title</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">Node.js Guide</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">æ ‡é¢˜åº”è¯¥åŒ¹é…</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å¦‚æœ fetchTitle å‡½æ•°æ²¡æœ‰æŒ‰ç…§é¢„æœŸè¿”å› &#39;Node.js Guide&#39;ï¼Œ</span></span>
<span class="line"><span style="color:#616E88;">// é‚£ä¹ˆæ–­è¨€ä¼šå¤±è´¥ï¼Œå¹¶æŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¯·è®°ä½ï¼Œåœ¨ Node.js v14.x ç‰ˆæœ¬ä¹‹åï¼Œ<code>assert.equal</code> è¢«å¼ƒç”¨ï¼ˆdeprecatedï¼‰ï¼Œæ¨èä½¿ç”¨ <code>assert.strictEqual</code> æ–¹æ³•ï¼Œå› ä¸ºå®ƒé‡‡ç”¨ä¸¥æ ¼ç›¸ç­‰æ¯”è¾ƒï¼ˆä½¿ç”¨ <code>===</code>ï¼‰ï¼Œä¸ä¼šå‘ç”Ÿç±»å‹è½¬æ¢ï¼Œä»è€Œå‡å°‘æ½œåœ¨çš„é”™è¯¯å’Œæ··æ·†ã€‚</p><h2 id="assert-fail-message" tabindex="-1"><a class="header-anchor" href="#assert-fail-message"><span><a href="https://nodejs.org/docs/latest/api/assert.html#assertfailmessage" target="_blank" rel="noopener noreferrer">assert.fail([message])</a></span></a></h2><p><code>assert.fail([message])</code> æ˜¯ Node.js ä¸­çš„ä¸€ä¸ªæ–­è¨€å‡½æ•°ï¼Œå®ƒå±äº <code>assert</code> æ¨¡å—ã€‚åœ¨ç¼–ç¨‹ä¸­ï¼Œæ–­è¨€(assertion)é€šå¸¸ç”¨æ¥è¿›è¡Œæµ‹è¯•ï¼Œç¡®ä¿ä»£ç çš„è¡Œä¸ºç¬¦åˆé¢„æœŸã€‚å¦‚æœæ–­è¨€å¤±è´¥ï¼ˆå³æ¡ä»¶ä¸æˆç«‹ï¼‰ï¼Œé€šå¸¸ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚</p><p>åœ¨ Node.js çš„ <code>assert</code> æ¨¡å—ä¸­ï¼Œ<code>assert.fail()</code> æ–¹æ³•æ˜¯ç‰¹æ®Šçš„ï¼Œå› ä¸ºå®ƒä¼šç›´æ¥å¯¼è‡´ä¸€ä¸ªæ–­è¨€å¤±è´¥ï¼Œä¸éœ€è¦ä»»ä½•æ¡ä»¶ã€‚ä½ å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ–¹æ³•æ¥æµ‹è¯•é”™è¯¯å¤„ç†ä»£ç æˆ–è€…ç¡®ä¿æŸæ®µä»£ç ä¸è¢«æ‰§è¡Œã€‚</p><p>ä¸‹é¢æˆ‘ä»¬æ¥çœ‹å‡ ä¸ªå®é™…çš„ä¾‹å­æ¥ç†è§£ <code>assert.fail([message])</code> çš„ä½¿ç”¨ï¼š</p><h3 id="ä¾‹å­-1-æµ‹è¯•é”™è¯¯å¤„ç†" tabindex="-1"><a class="header-anchor" href="#ä¾‹å­-1-æµ‹è¯•é”™è¯¯å¤„ç†"><span>ä¾‹å­ 1ï¼šæµ‹è¯•é”™è¯¯å¤„ç†</span></a></h3><p>å‡è®¾ä½ æœ‰ä¸€ä¸ªå‡½æ•° <code>processData</code>ï¼Œå½“å¤„ç†å¤±è´¥æ—¶åº”è¯¥æŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚ä½ æƒ³æµ‹è¯•å½“å¤„ç†å¤±è´¥æ—¶è¿™ä¸ªé”™è¯¯æ˜¯å¦æ­£ç¡®åœ°è¢«æŠ›å‡ºã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> assert</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">assert</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">function</span><span style="color:#88C0D0;"> processData</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">data</span><span style="color:#ECEFF4;">)</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">data</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">invalid</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#81A1C1;">    throw</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> Error</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Invalid data!</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span></span>
<span class="line"><span style="color:#616E88;">  // ... å¤„ç†æ•°æ® ...</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">try</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#616E88;">  // å‡è®¾ä½ ä¼ é€’äº†æ— æ•ˆçš„æ•°æ®ç»™ processData</span></span>
<span class="line"><span style="color:#88C0D0;">  processData</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">{</span><span style="color:#88C0D0;"> invalid</span><span style="color:#ECEFF4;">:</span><span style="color:#81A1C1;"> true</span><span style="color:#ECEFF4;"> }</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">  // å¦‚æœ processData æ²¡æœ‰æŠ›å‡ºé”™è¯¯ï¼Œé‚£ä¹ˆä½¿ç”¨ assert.fail æŒ‡å‡ºè¿™æ˜¯ä¸€ä¸ªå¤±è´¥ã€‚</span></span>
<span class="line"><span style="color:#D8DEE9;">  assert</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">fail</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">processData should have thrown an error for invalid data</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;"> catch</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">error</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#616E88;">  // å¦‚æœæ•è·åˆ°é”™è¯¯ï¼Œæ£€æŸ¥å®ƒæ˜¯å¦æ˜¯é¢„æœŸçš„é”™è¯¯</span></span>
<span class="line"><span style="color:#D8DEE9;">  assert</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">equal</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">error</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">message</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">Invalid data!</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ä¸Šé¢è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æœŸæœ› <code>processData</code> å‡½æ•°æŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œå¦‚æœæ²¡æœ‰æŠ›å‡ºï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>assert.fail</code> æ¥è¡¨ç¤ºæµ‹è¯•æœªæŒ‰é¢„æœŸæ‰§è¡Œã€‚</p><h3 id="ä¾‹å­-2-ç¡®ä¿ä»£ç çš„æŸéƒ¨åˆ†ä¸è¢«æ‰§è¡Œ" tabindex="-1"><a class="header-anchor" href="#ä¾‹å­-2-ç¡®ä¿ä»£ç çš„æŸéƒ¨åˆ†ä¸è¢«æ‰§è¡Œ"><span>ä¾‹å­ 2ï¼šç¡®ä¿ä»£ç çš„æŸéƒ¨åˆ†ä¸è¢«æ‰§è¡Œ</span></a></h3><p>è€ƒè™‘å¦ä¸€ä¸ªåœºæ™¯ï¼Œä½ æœ‰ä¸€ä¸ªå›è°ƒå‡½æ•°åº”è¯¥åœ¨ç‰¹å®šæ¡ä»¶ä¸‹ä¸è¢«è°ƒç”¨ã€‚ä½ å¯ä»¥åœ¨å›è°ƒå‡½æ•°å†…éƒ¨ä½¿ç”¨ <code>assert.fail</code> æ¥ç¡®ä¿è¯¥å‡½æ•°æ²¡æœ‰è¢«é”™è¯¯åœ°æ‰§è¡Œã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> assert</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">assert</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">function</span><span style="color:#88C0D0;"> runCallbackUnderCondition</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">callback</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> condition</span><span style="color:#ECEFF4;">)</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#81A1C1;">!</span><span style="color:#D8DEE9;">condition</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#88C0D0;">    callback</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88C0D0;">runCallbackUnderCondition</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">()</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#616E88;">  // è¿™ä¸ªå›è°ƒä¸åº”è¯¥æ‰§è¡Œï¼Œå¦‚æœæ‰§è¡Œäº†ï¼Œå°±æ ‡è®°ä¸ºå¤±è´¥</span></span>
<span class="line"><span style="color:#D8DEE9;">  assert</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">fail</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">Callback should not have been called</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">},</span><span style="color:#81A1C1;"> false</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå¦‚æœ <code>condition</code> æ˜¯ <code>false</code>ï¼Œåˆ™ <code>callback</code> ä¸åº”è¯¥è¢«è°ƒç”¨ã€‚å¦‚æœç”±äºæŸäº›åŸå›  <code>callback</code> è¢«è°ƒç”¨äº†ï¼Œ<code>assert.fail</code> å°†ä¼šè§¦å‘ï¼Œå¹¶ä¸”æŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œå‘Šè¯‰æˆ‘ä»¬æœ‰ä¸œè¥¿å‡ºé”™äº†ã€‚</p><h3 id="æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#æ€»ç»“"><span>æ€»ç»“</span></a></h3><p><code>assert.fail([message])</code> ä¸»è¦ç”¨äºæµ‹è¯•ç›®çš„ï¼Œæ˜¯è®©ä½ èƒ½å¤Ÿæ˜ç¡®è¡¨è¾¾â€œè¿™é‡Œä¸åº”è¯¥è¢«æ‰§è¡Œåˆ°â€çš„æ„å›¾ã€‚å½“ä½ æœŸæœ›æŸä¸ªåŠ¨ä½œå¯¼è‡´é”™è¯¯æˆ–è€…æŸæ®µä»£ç ä¸åº”è¯¥è¢«è¿è¡Œæ—¶ï¼Œä½ å¯ä»¥ä½¿ç”¨è¿™ä¸ªå‡½æ•°ã€‚é€šè¿‡æä¾›å¯é€‰çš„ <code>message</code> å‚æ•°ï¼Œä½ è¿˜å¯ä»¥è¾“å‡ºä¸€ä¸ªè‡ªå®šä¹‰çš„é”™è¯¯ä¿¡æ¯ï¼Œä»¥ä¾¿æ›´æ¸…æ™°åœ°äº†è§£æµ‹è¯•å¤±è´¥çš„åŸå› ã€‚</p><h2 id="assert-fail-actual-expected-message-operator-stackstartfn" tabindex="-1"><a class="header-anchor" href="#assert-fail-actual-expected-message-operator-stackstartfn"><span><a href="https://nodejs.org/docs/latest/api/assert.html#assertfailactual-expected-message-operator-stackstartfn" target="_blank" rel="noopener noreferrer">assert.fail(actual, expected[, message[, operator[, stackStartFn]]])</a></span></a></h2><p>å¥½çš„ï¼Œè®©æˆ‘æ¥è§£é‡Šä¸€ä¸‹ Node.js ä¸­çš„ <code>assert.fail</code> å‡½æ•°ã€‚</p><p>åœ¨ç¼–ç¨‹ä¸­ï¼Œå°¤å…¶æ˜¯è¿›è¡Œå•å…ƒæµ‹è¯•çš„æ—¶å€™ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦éªŒè¯ä»£ç æ˜¯å¦æŒ‰ç…§é¢„æœŸå·¥ä½œã€‚ä¾‹å¦‚ï¼Œä½ å¯èƒ½æƒ³ç¡®è®¤ä¸€ä¸ªå‡½æ•°è¿”å›äº†æ­£ç¡®çš„ç»“æœæˆ–è€…ç¡®ä¿ä¸€ä¸ªæ¡ä»¶ä¸ºçœŸã€‚è¿™ç§æ—¶å€™ï¼Œæ–­è¨€ï¼ˆassertionsï¼‰å°±éå¸¸æœ‰ç”¨ã€‚</p><p>Node.js çš„ <code>assert</code> æ¨¡å—å°±æä¾›äº†è¿™æ ·çš„åŠŸèƒ½ï¼Œå®ƒåŒ…å«äº†ä¸€ç³»åˆ—çš„å‡½æ•°ç”¨äºæ–­è¨€ã€‚å¦‚æœæŸä¸ªæ–­è¨€å¤±è´¥äº†ï¼Œé‚£ä¹ˆé€šå¸¸ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚</p><p><code>assert.fail</code> æ˜¯ <code>assert</code> æ¨¡å—ä¸­çš„ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºæ˜ç¡®åœ°æ ‡è®°ä¸€ä¸ªæµ‹è¯•ä¸ºå¤±è´¥ã€‚å½“ä½ è°ƒç”¨è¿™ä¸ªå‡½æ•°æ—¶ï¼Œä¸ç®¡ä»€ä¹ˆæƒ…å†µï¼Œéƒ½ä¼šæŠ›å‡ºä¸€ä¸ªæ–­è¨€é”™è¯¯ã€‚</p><h3 id="å‡½æ•°å‚æ•°" tabindex="-1"><a class="header-anchor" href="#å‡½æ•°å‚æ•°"><span>å‡½æ•°å‚æ•°</span></a></h3><ul><li><code>actual</code> (å¯é€‰): å®é™…å€¼ã€‚</li><li><code>expected</code> (å¯é€‰): é¢„æœŸå€¼ã€‚</li><li><code>message</code> (å¯é€‰): é”™è¯¯ä¿¡æ¯ï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æˆ–è€…ä¸€ä¸ªå®ç°äº† <code>Error</code> æ¥å£çš„å¯¹è±¡ã€‚</li><li><code>operator</code> (å¯é€‰): ç”¨äºæŒ‡å®šå¤±è´¥çš„æ¯”è¾ƒæ“ä½œç¬¦çš„å­—ç¬¦ä¸²ï¼Œé€šå¸¸ç”¨äºæ–­è¨€åº“å†…éƒ¨ã€‚</li><li><code>stackStartFn</code> (å¯é€‰): å¦‚æœæä¾›äº†è¯¥å‚æ•°ï¼Œå®ƒä¼šè¢«ç”¨æ¥è®¡ç®—é”™è¯¯æ ˆè·Ÿè¸ªçš„èµ·å§‹ä½ç½®ã€‚</li></ul><h3 id="ä½¿ç”¨æ–¹å¼å’Œä¾‹å­" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨æ–¹å¼å’Œä¾‹å­"><span>ä½¿ç”¨æ–¹å¼å’Œä¾‹å­</span></a></h3><h4 id="ä¾‹å­-1-æ— æ¡ä»¶å¤±è´¥" tabindex="-1"><a class="header-anchor" href="#ä¾‹å­-1-æ— æ¡ä»¶å¤±è´¥"><span>ä¾‹å­ 1ï¼šæ— æ¡ä»¶å¤±è´¥</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> assert</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">assert</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// è¿™æ®µä»£ç å°†ç›´æ¥å¯¼è‡´æ–­è¨€å¤±è´¥</span></span>
<span class="line"><span style="color:#81A1C1;">try</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">  assert</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">fail</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;"> catch</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">error</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">error</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">error</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">message</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡ºï¼š&quot;Assertion failed&quot;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æ²¡æœ‰æä¾›ä»»ä½•å‚æ•°ç»™ <code>assert.fail</code>ï¼Œæ‰€ä»¥å®ƒå°†ç›´æ¥æŠ›å‡ºä¸€ä¸ªå¸¦æœ‰é»˜è®¤é”™è¯¯ä¿¡æ¯â€œAssertion failedâ€çš„é”™è¯¯ã€‚</p><h4 id="ä¾‹å­-2-æä¾›è‡ªå®šä¹‰é”™è¯¯ä¿¡æ¯" tabindex="-1"><a class="header-anchor" href="#ä¾‹å­-2-æä¾›è‡ªå®šä¹‰é”™è¯¯ä¿¡æ¯"><span>ä¾‹å­ 2ï¼šæä¾›è‡ªå®šä¹‰é”™è¯¯ä¿¡æ¯</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> assert</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">assert</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// è‡ªå®šä¹‰é”™è¯¯ä¿¡æ¯</span></span>
<span class="line"><span style="color:#81A1C1;">try</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">  assert</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">fail</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">This is a custom error message</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;"> catch</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">error</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">error</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">error</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">message</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡ºï¼š&quot;This is a custom error message&quot;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™é‡Œï¼Œæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªè‡ªå®šä¹‰çš„é”™è¯¯ä¿¡æ¯ç»™ <code>assert.fail</code>ï¼Œå½“æ–­è¨€å¤±è´¥æ—¶ï¼Œå®ƒä¼šæŠ›å‡ºä¸€ä¸ªå¸¦æœ‰è¿™ä¸ªè‡ªå®šä¹‰ä¿¡æ¯çš„é”™è¯¯ã€‚</p><h4 id="ä¾‹å­-3-ä½¿ç”¨-actual-å’Œ-expected" tabindex="-1"><a class="header-anchor" href="#ä¾‹å­-3-ä½¿ç”¨-actual-å’Œ-expected"><span>ä¾‹å­ 3ï¼šä½¿ç”¨ actual å’Œ expected</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> assert</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">assert</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// æŒ‡å®šå®é™…å€¼å’Œé¢„æœŸå€¼</span></span>
<span class="line"><span style="color:#81A1C1;">try</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  const</span><span style="color:#D8DEE9;"> actualValue</span><span style="color:#81A1C1;"> =</span><span style="color:#B48EAD;"> 10</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">  const</span><span style="color:#D8DEE9;"> expectedValue</span><span style="color:#81A1C1;"> =</span><span style="color:#B48EAD;"> 20</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">  assert</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">fail</span><span style="color:#D8DEE9FF;">(</span></span>
<span class="line"><span style="color:#D8DEE9;">    actualValue</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#D8DEE9;">    expectedValue</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#ECEFF4;">    &quot;</span><span style="color:#A3BE8C;">Actual value does not match expected value</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#ECEFF4;">    &quot;</span><span style="color:#A3BE8C;">===</span><span style="color:#ECEFF4;">&quot;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  )</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;"> catch</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">error</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">error</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">error</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">message</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#616E88;">  // è¾“å‡ºï¼š&quot;Expected values to be strictly equal:&quot;</span></span>
<span class="line"><span style="color:#616E88;">  //       &quot;+ actual - expected&quot;</span></span>
<span class="line"><span style="color:#616E88;">  //       &quot;+ 10    - 20&quot;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº† <code>actual</code>, <code>expected</code>, <code>message</code>, å’Œ <code>operator</code> å‚æ•°ã€‚<code>assert.fail</code> æŠ›å‡ºäº†ä¸€ä¸ªé”™è¯¯ï¼Œå…¶ä¸­åŒ…å«äº†å®é™…å€¼å’Œé¢„æœŸå€¼çš„æ¯”è¾ƒã€‚è¯·æ³¨æ„ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå³ä½¿å®é™…å€¼å’Œé¢„æœŸå€¼ç›¸ç­‰ï¼Œ<code>assert.fail</code> ä¾ç„¶ä¼šæŠ›å‡ºé”™è¯¯ï¼Œå› ä¸ºè¿™ä¸ªå‡½æ•°çš„ç›®çš„å°±æ˜¯æ˜ç¡®è¡¨ç¤ºä¸€ä¸ªå¤±è´¥çš„æ–­è¨€ã€‚</p><p>æ€»ç»“ä¸€ä¸‹ï¼Œ<code>assert.fail</code> å¯ä»¥ç”¨æ¥æ˜ç¡®æŒ‡å‡ºä¸€ä¸ªæµ‹è¯•åº”è¯¥å¤±è´¥ï¼Œå¹¶å…è®¸ä½ æä¾›è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯ã€‚å®ƒé€šå¸¸åœ¨æµ‹è¯•ä»£ç ä¸èƒ½è¾¾åˆ°ç‰¹å®šæ‰§è¡Œè·¯å¾„æˆ–æŸäº›æ„å¤–æƒ…å†µå‡ºç°æ—¶ä½¿ç”¨ã€‚åœ¨å®é™…çš„å•å…ƒæµ‹è¯•æ¡†æ¶ä¸­ï¼ˆå¦‚ Mocha æˆ– Jestï¼‰ï¼Œä½¿ç”¨ <code>assert.fail</code> æ¥æ ‡è®°æµ‹è¯•å¤±è´¥æ˜¯å¾ˆå¸¸è§çš„åšæ³•ã€‚</p><h2 id="assert-iferror-value" tabindex="-1"><a class="header-anchor" href="#assert-iferror-value"><span><a href="https://nodejs.org/docs/latest/api/assert.html#assertiferrorvalue" target="_blank" rel="noopener noreferrer">assert.ifError(value)</a></span></a></h2><p><code>assert.ifError(value)</code> æ˜¯ Node.js ä¸­ <code>assert</code> æ¨¡å—çš„ä¸€ä¸ªåŠŸèƒ½ã€‚åœ¨ Node.js ä¸­ï¼Œ<code>assert</code> æ¨¡å—é€šå¸¸ç”¨äºè¿›è¡Œå„ç§æ–­è¨€æµ‹è¯•ï¼Œå³éªŒè¯ä»£ç çš„æŸä¸ªç‰¹å®šéƒ¨åˆ†æ˜¯å¦å¦‚é¢„æœŸåœ°æ­£ç¡®è¿è¡Œã€‚<code>assert.ifError(value)</code> å‡½æ•°çš„ä¸»è¦ä½œç”¨æ˜¯æ£€æŸ¥å…¶å‚æ•° <code>value</code> æ˜¯å¦ä¸ºä¸€ä¸ªé”™è¯¯å¯¹è±¡ï¼ˆ<code>error</code>ï¼‰ã€‚å¦‚æœ <code>value</code> æ˜¯ä¸€ä¸ªé”™è¯¯å¯¹è±¡ï¼Œé‚£ä¹ˆ <code>assert.ifError</code> ä¼šæŠ›å‡ºè¿™ä¸ªé”™è¯¯ï¼›å¦‚æœ <code>value</code> ä¸æ˜¯é”™è¯¯å¯¹è±¡ï¼Œå³ä¸º <code>null</code> æˆ– <code>undefined</code>ï¼Œåˆ™ä¸ä¼šæœ‰ä»»ä½•ååº”ï¼Œä»£ç ç»§ç»­æ‰§è¡Œã€‚</p><p>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œä½ å¯èƒ½ä¼šåœ¨å¤„ç†å¼‚æ­¥æ“ä½œçš„å›è°ƒå‡½æ•°ä¸­é‡åˆ° <code>assert.ifError</code> çš„ç”¨ä¾‹ã€‚å½“å¼‚æ­¥æ“ä½œå®Œæˆåï¼Œå›è°ƒå‡½æ•°é€šå¸¸ä¼šæ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼šä¸€ä¸ªæ˜¯å¯èƒ½å‡ºç°çš„é”™è¯¯å¯¹è±¡<code>err</code>ï¼Œå¦ä¸€ä¸ªæ˜¯æ“ä½œç»“æœ<code>data</code>ã€‚ä½¿ç”¨ <code>assert.ifError</code> å¯ä»¥å¸®åŠ©ä½ æ£€æŸ¥æ˜¯å¦å‘ç”Ÿäº†é”™è¯¯ï¼Œå¹¶ä¸”ç«‹å³æŠ›å‡ºï¼Œè¿™æ ·å¯ä»¥åŠæ—¶å‘ç°å¹¶å¤„ç†é—®é¢˜ã€‚</p><p>ä¸‹é¢é€šè¿‡å‡ ä¸ªä¾‹å­æ¥å…·ä½“è¯´æ˜ï¼š</p><h3 id="ç¤ºä¾‹-1-è¯»å–æ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#ç¤ºä¾‹-1-è¯»å–æ–‡ä»¶"><span>ç¤ºä¾‹ 1ï¼šè¯»å–æ–‡ä»¶</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> fs</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">fs</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> assert</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">assert</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å¼‚æ­¥è¯»å–æ–‡ä»¶</span></span>
<span class="line"><span style="color:#D8DEE9;">fs</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">readFile</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">somefile.txt</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> (</span><span style="color:#D8DEE9;">err</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> data</span><span style="color:#ECEFF4;">)</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#616E88;">  // å¦‚æœè¯»å–è¿‡ç¨‹ä¸­æœ‰é”™è¯¯å‘ç”Ÿï¼ŒæŠ›å‡ºè¿™ä¸ªé”™è¯¯</span></span>
<span class="line"><span style="color:#D8DEE9;">  assert</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">ifError</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">err</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">  // å¦åˆ™ï¼Œæ­£å¸¸å¤„ç†æ–‡ä»¶å†…å®¹</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">data</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">toString</span><span style="color:#D8DEE9FF;">())</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ Node.js çš„ <code>fs</code>ï¼ˆæ–‡ä»¶ç³»ç»Ÿï¼‰æ¨¡å—æ¥å¼‚æ­¥è¯»å–ä¸€ä¸ªåä¸º <code>somefile.txt</code> çš„æ–‡ä»¶ã€‚è¯»å–æ“ä½œå®Œæˆåï¼Œä¼šè°ƒç”¨ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œå®ƒæ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼š<code>err</code> å’Œ <code>data</code>ã€‚å¦‚æœæ–‡ä»¶è¯»å–è¿‡ç¨‹ä¸­å‘ç”Ÿäº†é”™è¯¯ï¼ˆä¾‹å¦‚ï¼Œæ–‡ä»¶ä¸å­˜åœ¨ï¼‰ï¼Œ<code>err</code> å‚æ•°ä¼šåŒ…å«é”™è¯¯ä¿¡æ¯ã€‚ä½¿ç”¨ <code>assert.ifError(err)</code> ä¼šæ£€æŸ¥ <code>err</code> æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨å°±ä¼šæŠ›å‡ºé”™è¯¯ï¼Œå¦åˆ™ç¨‹åºç»§ç»­å‘ä¸‹æ‰§è¡Œå¹¶è¾“å‡ºæ–‡ä»¶å†…å®¹ã€‚</p><h3 id="ç¤ºä¾‹-2-æ•°æ®åº“æŸ¥è¯¢" tabindex="-1"><a class="header-anchor" href="#ç¤ºä¾‹-2-æ•°æ®åº“æŸ¥è¯¢"><span>ç¤ºä¾‹ 2ï¼šæ•°æ®åº“æŸ¥è¯¢</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> database</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">some-database-lib</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> assert</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">assert</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// æ‰§è¡Œæ•°æ®åº“æŸ¥è¯¢</span></span>
<span class="line"><span style="color:#D8DEE9;">database</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">query</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">SELECT * FROM users</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> (</span><span style="color:#D8DEE9;">err</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> results</span><span style="color:#ECEFF4;">)</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#616E88;">  // å¦‚æœæŸ¥è¯¢è¿‡ç¨‹ä¸­æœ‰é”™è¯¯å‘ç”Ÿï¼ŒæŠ›å‡ºè¿™ä¸ªé”™è¯¯</span></span>
<span class="line"><span style="color:#D8DEE9;">  assert</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">ifError</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">err</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">  // å¦åˆ™ï¼Œæ­£å¸¸å¤„ç†æŸ¥è¯¢ç»“æœ</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">results</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å‡è®¾æœ‰ä¸€ä¸ªæ•°æ®åº“åº“ <code>some-database-lib</code>ï¼Œç”¨äºæ‰§è¡Œ SQL æŸ¥è¯¢ã€‚æˆ‘ä»¬è¯•å›¾ä» <code>users</code> è¡¨ä¸­é€‰æ‹©æ‰€æœ‰è®°å½•ã€‚æŸ¥è¯¢ç»“æŸåï¼Œå›è°ƒå‡½æ•°è¢«è°ƒç”¨ï¼Œä¼ å…¥å¯èƒ½çš„é”™è¯¯å¯¹è±¡ <code>err</code> å’ŒæŸ¥è¯¢ç»“æœ <code>results</code>ã€‚ä½¿ç”¨ <code>assert.ifError(err)</code> æ¥æ£€æŸ¥æ˜¯å¦æœ‰é”™è¯¯å‘ç”Ÿã€‚å¦‚æœæ²¡æœ‰é”™è¯¯ï¼Œåˆ™ç»§ç»­å¤„ç†å’Œè¾“å‡ºæŸ¥è¯¢ç»“æœã€‚</p><h3 id="æ³¨æ„äº‹é¡¹-1" tabindex="-1"><a class="header-anchor" href="#æ³¨æ„äº‹é¡¹-1"><span>æ³¨æ„äº‹é¡¹ï¼š</span></a></h3><ul><li><code>assert.ifError()</code> åœ¨å‘ç°é”™è¯¯æ—¶ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œè¿™æ„å‘³ç€å¦‚æœä½ ä¸å¤„ç†è¿™ä¸ªå¼‚å¸¸ï¼ˆä¾‹å¦‚ï¼Œä½¿ç”¨ try-catchï¼‰ï¼Œé‚£ä¹ˆä½ çš„ç¨‹åºå¯èƒ½ä¼šç›´æ¥ç»ˆæ­¢ã€‚</li><li>åœ¨æœ€æ–°ç‰ˆæœ¬çš„ Node.js ä¸­ï¼Œæ¨èä½¿ç”¨æ›´ç°ä»£çš„å¼‚æ­¥å¤„ç†æ–¹å¼ï¼Œæ¯”å¦‚ Promises æˆ–è€… async/awaitï¼Œè€Œä¸æ˜¯ä¾èµ–å›è°ƒå’Œ <code>assert.ifError()</code>ã€‚</li></ul><p>ä»¥ä¸Šå°±æ˜¯ <code>assert.ifError(value)</code> çš„è¯¦ç»†è§£é‡Šå’Œä¸€äº›å®é™…ä½¿ç”¨ç¤ºä¾‹ï¼Œå¸Œæœ›èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£è¿™ä¸ªå‡½æ•°çš„ä½œç”¨å’Œç”¨æ³•ã€‚</p><h2 id="assert-match-string-regexp-message" tabindex="-1"><a class="header-anchor" href="#assert-match-string-regexp-message"><span><a href="https://nodejs.org/docs/latest/api/assert.html#assertmatchstring-regexp-message" target="_blank" rel="noopener noreferrer">assert.match(string, regexp[, message])</a></span></a></h2><p><code>assert.match(string, regexp[, message])</code> æ˜¯ Node.js ä¸­ <code>assert</code> æ¨¡å—æä¾›çš„ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºéªŒè¯ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å¦åŒ¹é…ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼è§„åˆ™ã€‚å¦‚æœå­—ç¬¦ä¸²æ²¡æœ‰ç¬¦åˆæŒ‡å®šçš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œé‚£ä¹ˆè¿™ä¸ªå‡½æ•°ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚</p><p>åœ¨è¿™é‡Œï¼Œè®©æˆ‘ä»¬åˆ†è§£ä¸€ä¸‹è¿™ä¸ªå‡½æ•°çš„å„ä¸ªéƒ¨åˆ†ï¼š</p><ul><li><code>string</code>ï¼šè¿™æ˜¯ä½ æƒ³è¦è¿›è¡Œæµ‹è¯•çš„æ–‡æœ¬ã€‚</li><li><code>regexp</code>ï¼šè¿™æ˜¯ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼å¯¹è±¡ï¼Œç”¨æ¥å®šä¹‰ä½ æœŸæœ›å­—ç¬¦ä¸²ç¬¦åˆçš„è§„åˆ™ã€‚</li><li><code>message</code>ï¼ˆå¯é€‰ï¼‰ï¼šå¦‚æœæ–­è¨€å¤±è´¥ï¼Œå¯ä»¥æä¾›ä¸€ä¸ªè‡ªå®šä¹‰çš„é”™è¯¯æ¶ˆæ¯ï¼Œè¿™ä¸ªæ¶ˆæ¯ä¼šè¢«å±•ç¤ºç»™ç”¨æˆ·ã€‚</li></ul><p>å®é™…è¿ç”¨çš„ä¾‹å­ï¼š</p><p>å‡è®¾ä½ æ­£åœ¨ç¼–å†™ä¸€ä¸ªç¨‹åºï¼Œéœ€è¦æ£€æŸ¥ç”¨æˆ·è¾“å…¥çš„æ˜¯ä¸æ˜¯æœ‰æ•ˆçš„ç”µå­é‚®ç®±åœ°å€ã€‚ä½ å¯ä»¥ä½¿ç”¨ <code>assert.match</code> æ¥ç¡®ä¿ç”¨æˆ·è¾“å…¥çš„å­—ç¬¦ä¸²ç¬¦åˆç”µå­é‚®ä»¶åœ°å€çš„é€šå¸¸æ ¼å¼ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> assert</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">assert</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// ç”µå­é‚®ä»¶æ­£åˆ™è¡¨è¾¾å¼ï¼ˆç®€åŒ–ç‰ˆæœ¬ï¼‰</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> emailRegex</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> /</span><span style="color:#81A1C1;">^</span><span style="color:#ECEFF4;">[</span><span style="color:#81A1C1;">^</span><span style="color:#EBCB8B;">\s@</span><span style="color:#ECEFF4;">]</span><span style="color:#81A1C1;">+</span><span style="color:#EBCB8B;">@</span><span style="color:#ECEFF4;">[</span><span style="color:#81A1C1;">^</span><span style="color:#EBCB8B;">\s@</span><span style="color:#ECEFF4;">]</span><span style="color:#81A1C1;">+</span><span style="color:#EBCB8B;">\.</span><span style="color:#ECEFF4;">[</span><span style="color:#81A1C1;">^</span><span style="color:#EBCB8B;">\s@</span><span style="color:#ECEFF4;">]</span><span style="color:#81A1C1;">+$</span><span style="color:#ECEFF4;">/</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">try</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#616E88;">  // æµ‹è¯•æœ‰æ•ˆçš„ç”µå­é‚®ä»¶</span></span>
<span class="line"><span style="color:#D8DEE9;">  assert</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">match</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">user@example.com</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> emailRegex</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">æœ‰æ•ˆçš„ç”µå­é‚®ä»¶åœ°å€ï¼</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;"> catch</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">error</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">error</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">ç”µå­é‚®ä»¶åœ°å€æ— æ•ˆï¼š</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> error</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">message</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">try</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#616E88;">  // æµ‹è¯•æ— æ•ˆçš„ç”µå­é‚®ä»¶</span></span>
<span class="line"><span style="color:#D8DEE9;">  assert</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">match</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">userexample.com</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> emailRegex</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;"> catch</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">error</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">error</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">ç”µå­é‚®ä»¶åœ°å€æ— æ•ˆï¼š</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> error</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">message</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ä¸Šé¢çš„ä»£ç é‡Œï¼Œæˆ‘ä»¬é¦–å…ˆå¼•å…¥äº† Node.js çš„ <code>assert</code> æ¨¡å—ã€‚æ¥ç€å®šä¹‰äº†ä¸€ä¸ªç®€å•çš„æ­£åˆ™è¡¨è¾¾å¼æ¥è¿‘ä¼¼åœ°éªŒè¯ç”µå­é‚®ä»¶åœ°å€çš„æ ¼å¼ã€‚ç„¶åï¼Œæˆ‘ä»¬ç”¨ <code>try...catch</code> ç»“æ„ä¸¤æ¬¡è°ƒç”¨ <code>assert.match</code> å‡½æ•°ï¼šç¬¬ä¸€æ¬¡ä¼ å…¥ä¸€ä¸ªæœ‰æ•ˆçš„ç”µå­é‚®ä»¶åœ°å€ï¼Œç¬¬äºŒæ¬¡ä¼ å…¥ä¸€ä¸ªæ— æ•ˆçš„å­—ç¬¦ä¸²ã€‚å½“ <code>assert.match</code> æ–­è¨€å¤±è´¥æ—¶ï¼Œä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œè¿™ä¸ªé”™è¯¯ä¼šåœ¨ <code>catch</code> å—ä¸­è¢«æ•è·ï¼Œå¹¶æ‰“å°å‡ºè‡ªå®šä¹‰çš„é”™è¯¯æ¶ˆæ¯ã€‚</p><p>å¦‚æœå­—ç¬¦ä¸²é€šè¿‡äº†æ­£åˆ™è¡¨è¾¾å¼çš„æ£€æµ‹ï¼Œç¨‹åºä¼šç»§ç»­æ‰“å°â€œæœ‰æ•ˆçš„ç”µå­é‚®ä»¶åœ°å€ï¼â€ã€‚å¦‚æœæ²¡æœ‰é€šè¿‡ï¼Œåˆ™ä¼šåœ¨æ§åˆ¶å°è¾“å‡ºä¸€æ¡é”™è¯¯æ¶ˆæ¯ï¼Œå‘ŠçŸ¥â€œç”µå­é‚®ä»¶åœ°å€æ— æ•ˆâ€ï¼Œå¹¶å±•ç¤ºå…·ä½“çš„é”™è¯¯ä¿¡æ¯ã€‚</p><p>è¿™ç§æ–¹æ³•éå¸¸æœ‰ç”¨äºåœ¨ç¨‹åºä¸­éªŒè¯æ•°æ®ï¼Œç¡®ä¿å®ƒä»¬ç¬¦åˆä½ è®¾å®šçš„é¢„æœŸæ ¼å¼å’Œè§„åˆ™ã€‚é€šè¿‡ä½¿ç”¨ <code>assert.match</code>ï¼Œä½ å¯ä»¥æ–¹ä¾¿åœ°å¯¹ç”¨æˆ·è¾“å…¥ã€é…ç½®é¡¹æˆ–ä»»ä½•å…¶ä»–å­—ç¬¦ä¸²æ•°æ®è¿›è¡Œæ ¡éªŒã€‚</p><h2 id="assert-notdeepequal-actual-expected-message" tabindex="-1"><a class="header-anchor" href="#assert-notdeepequal-actual-expected-message"><span><a href="https://nodejs.org/docs/latest/api/assert.html#assertnotdeepequalactual-expected-message" target="_blank" rel="noopener noreferrer">assert.notDeepEqual(actual, expected[, message])</a></span></a></h2><p><code>assert.notDeepEqual(actual, expected[, message])</code> æ˜¯ Node.js ä¸­çš„ä¸€ä¸ªæ–­è¨€æ–¹æ³•ï¼Œç”¨äºæµ‹è¯•ä¸¤ä¸ªå˜é‡åœ¨ç»“æ„ä¸Šæ˜¯å¦ä¸å®Œå…¨ç›¸ç­‰ã€‚æ–­è¨€ï¼ˆ<code>assert</code>ï¼‰æ˜¯ä¸€ç§æ£€æŸ¥ä»£ç è¡Œä¸ºçš„æ–¹å¼ï¼Œç¡®ä¿ä»£ç è¿è¡Œç»“æœç¬¦åˆé¢„æœŸã€‚å¦‚æœæ–­è¨€å¤±è´¥ï¼ˆå³å®é™…ç»“æœå’Œé¢„æœŸä¸ç¬¦ï¼‰ï¼Œåˆ™ä¼šæŠ›å‡ºé”™è¯¯ã€‚</p><p>è¿™é‡Œè§£é‡Šä¸€ä¸‹â€œæ·±åº¦ç›¸ç­‰â€ï¼ˆdeep equalityï¼‰çš„æ¦‚å¿µã€‚å½“æˆ‘ä»¬æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡æˆ–æ•°ç»„æ—¶ï¼Œå³ä½¿å®ƒä»¬åŒ…å«ç›¸åŒçš„æ•°æ®ï¼Œä½†å¦‚æœå®ƒä»¬åœ¨å†…å­˜ä¸­æ˜¯ä¸åŒçš„å®ä½“ï¼Œå®ƒä»¬ä¹Ÿè¢«è®¤ä¸ºæ˜¯ä¸ç›¸ç­‰çš„ã€‚è¿™å°±æ˜¯æ‰€è°“çš„â€œæµ…ç›¸ç­‰â€ï¼ˆshallow equalityï¼‰ã€‚è€Œâ€œæ·±åº¦ç›¸ç­‰â€åˆ™æ˜¯æŒ‡ä¸ä»…æ•°æ®ç›¸åŒï¼Œç»“æ„ä¹Ÿè¦å®Œå…¨ä¸€è‡´ï¼Œå³æ¯ä¸ªåµŒå¥—çš„å¯¹è±¡æˆ–æ•°ç»„éƒ½åº”å½“ç›¸ç­‰ã€‚</p><p><code>assert.notDeepEqual</code> çš„ä½œç”¨æ˜¯åˆ¤æ–­ä¸¤ä¸ªå˜é‡çš„å€¼ä»¥åŠå®ƒä»¬å†…éƒ¨ç»“æ„æ˜¯å¦ä¸ç›¸ç­‰ã€‚å¦‚æœè¿™ä¸¤ä¸ªå˜é‡åœ¨ç»“æ„å’ŒåµŒå¥—çš„æ•°æ®ä¸Šå®Œå…¨ä¸€æ ·ï¼Œé‚£ä¹ˆæ–­è¨€ä¼šå¤±è´¥ï¼Œå¹¶æŠ›å‡ºé”™è¯¯ã€‚</p><p>å‚æ•°è¯´æ˜ï¼š</p><ul><li><code>actual</code>: å®é™…å¾—åˆ°çš„ç»“æœã€‚</li><li><code>expected</code>: ä½ æœŸæœ›çš„ç»“æœã€‚</li><li><code>message</code>: å¦‚æœæ–­è¨€å¤±è´¥ï¼ŒæŠ›å‡ºçš„é”™è¯¯ä¿¡æ¯ä¸­ä¼šåŒ…å«è¿™ä¸ªæ¶ˆæ¯å­—ç¬¦ä¸²ã€‚</li></ul><p>ä¸¾å‡ ä¸ªå…·ä½“çš„ä¾‹å­ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#616E88;">// å¼•å…¥ assert æ¨¡å—</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> assert</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">assert</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// ç¤ºä¾‹ 1ï¼šä¸¤ä¸ªå¯¹è±¡å…·æœ‰ç›¸åŒçš„ç»“æ„å’Œå€¼ï¼Œæ–­è¨€å°†å¤±è´¥ï¼Œå› ä¸ºæˆ‘ä»¬æœŸæœ›å®ƒä»¬ä¸ç›¸ç­‰ã€‚</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> obj1</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> {</span><span style="color:#88C0D0;"> a</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> {</span><span style="color:#88C0D0;"> b</span><span style="color:#ECEFF4;">:</span><span style="color:#B48EAD;"> 1</span><span style="color:#ECEFF4;"> }</span><span style="color:#ECEFF4;"> }</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> obj2</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> {</span><span style="color:#88C0D0;"> a</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> {</span><span style="color:#88C0D0;"> b</span><span style="color:#ECEFF4;">:</span><span style="color:#B48EAD;"> 1</span><span style="color:#ECEFF4;"> }</span><span style="color:#ECEFF4;"> }</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">try</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">  assert</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">notDeepEqual</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">obj1</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> obj2</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;"> catch</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">err</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">error</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">err</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">message</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // æ–­è¨€é”™è¯¯ï¼šAssertionError [ERR_ASSERTION]: Input objects are identical</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// ç¤ºä¾‹ 2ï¼šä¸¤ä¸ªå¯¹è±¡åœ¨ç»“æ„ä¸Šç±»ä¼¼ï¼Œä½†å€¼ä¸åŒï¼Œæ–­è¨€å°†é€šè¿‡ï¼Œæ²¡æœ‰é”™è¯¯æŠ›å‡ºã€‚</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> obj3</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> {</span><span style="color:#88C0D0;"> a</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> {</span><span style="color:#88C0D0;"> b</span><span style="color:#ECEFF4;">:</span><span style="color:#B48EAD;"> 1</span><span style="color:#ECEFF4;"> }</span><span style="color:#ECEFF4;"> }</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> obj4</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> {</span><span style="color:#88C0D0;"> a</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> {</span><span style="color:#88C0D0;"> b</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">1</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;"> }</span><span style="color:#ECEFF4;"> }</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // æ³¨æ„ï¼šb çš„å€¼æ˜¯å­—ç¬¦ä¸²ç±»å‹çš„ &#39;1&#39;</span></span>
<span class="line"><span style="color:#D8DEE9;">assert</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">notDeepEqual</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">obj3</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> obj4</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // é€šè¿‡æ–­è¨€</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// ç¤ºä¾‹ 3ï¼šä¸¤ä¸ªæ•°ç»„çš„å…ƒç´ çœ‹èµ·æ¥ç›¸åŒï¼Œä½†æœ‰ä¸åŒçš„å¼•ç”¨ï¼Œæ–­è¨€å°†é€šè¿‡ã€‚</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> arr1</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9FF;"> [</span><span style="color:#ECEFF4;">{</span><span style="color:#88C0D0;"> a</span><span style="color:#ECEFF4;">:</span><span style="color:#B48EAD;"> 1</span><span style="color:#ECEFF4;"> },</span><span style="color:#ECEFF4;"> {</span><span style="color:#88C0D0;"> b</span><span style="color:#ECEFF4;">:</span><span style="color:#B48EAD;"> 2</span><span style="color:#ECEFF4;"> }</span><span style="color:#D8DEE9FF;">]</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> arr2</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9FF;"> [</span><span style="color:#ECEFF4;">{</span><span style="color:#88C0D0;"> a</span><span style="color:#ECEFF4;">:</span><span style="color:#B48EAD;"> 1</span><span style="color:#ECEFF4;"> },</span><span style="color:#ECEFF4;"> {</span><span style="color:#88C0D0;"> b</span><span style="color:#ECEFF4;">:</span><span style="color:#B48EAD;"> 2</span><span style="color:#ECEFF4;"> }</span><span style="color:#D8DEE9FF;">]</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">assert</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">notDeepEqual</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">arr1</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> arr2</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // é€šè¿‡æ–­è¨€</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// ç¤ºä¾‹ 4ï¼šä½¿ç”¨è‡ªå®šä¹‰ä¿¡æ¯</span></span>
<span class="line"><span style="color:#81A1C1;">try</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  const</span><span style="color:#D8DEE9;"> obj5</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> {</span><span style="color:#88C0D0;"> a</span><span style="color:#ECEFF4;">:</span><span style="color:#B48EAD;"> 1</span><span style="color:#ECEFF4;"> }</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">  const</span><span style="color:#D8DEE9;"> obj6</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> {</span><span style="color:#88C0D0;"> a</span><span style="color:#ECEFF4;">:</span><span style="color:#B48EAD;"> 1</span><span style="color:#ECEFF4;"> }</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9;">  assert</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">notDeepEqual</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">obj5</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> obj6</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">è¿™ä¸¤ä¸ªå¯¹è±¡æ˜¯ç›¸ç­‰çš„</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;"> catch</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">err</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">error</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">err</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">message</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¿™ä¸¤ä¸ªå¯¹è±¡æ˜¯ç›¸ç­‰çš„</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä»¥ä¸Šç¤ºä¾‹ä¸­ï¼Œåªæœ‰åœ¨å®é™…å€¼å’ŒæœŸæœ›å€¼ä¸æ·±åº¦ç›¸ç­‰çš„æƒ…å†µä¸‹æ–­è¨€æ‰ä¼šæˆåŠŸï¼Œå¦åˆ™ä¼šæŠ›å‡ºé”™è¯¯ã€‚å¯ä»¥çœ‹åˆ°ï¼Œåœ¨ç¬¬ä¸€ä¸ªç¤ºä¾‹ä¸­ï¼Œè™½ç„¶ <code>obj1</code> å’Œ <code>obj2</code> åœ¨å†…å­˜ä¸­æ˜¯ä¸åŒçš„å¯¹è±¡ï¼Œä½†å®ƒä»¬çš„ç»“æ„å’ŒåŒ…å«çš„æ•°æ®ç›¸åŒï¼Œå› æ­¤æ–­è¨€å¤±è´¥ï¼Œå¹¶å¾—åˆ°äº†ä¸€ä¸ªå¼‚å¸¸ã€‚å…¶ä»–ç¤ºä¾‹ä¸­ï¼Œç”±äºæ•°æ®æˆ–ç±»å‹ä¸Šçš„ç»†å¾®å·®å¼‚ï¼Œæ–­è¨€æ­£ç¡®åœ°é€šè¿‡äº†ã€‚</p><h2 id="assert-notdeepstrictequal-actual-expected-message" tabindex="-1"><a class="header-anchor" href="#assert-notdeepstrictequal-actual-expected-message"><span><a href="https://nodejs.org/docs/latest/api/assert.html#assertnotdeepstrictequalactual-expected-message" target="_blank" rel="noopener noreferrer">assert.notDeepStrictEqual(actual, expected[, message])</a></span></a></h2><p>å¥½çš„ï¼ŒNode.js ä¸­çš„ <code>assert</code> æ¨¡å—æä¾›äº†ä¸€ç³»åˆ—çš„æ–­è¨€æµ‹è¯•ï¼Œè¿™äº›æ˜¯ç”¨äºç¡®ä¿ä»£ç æŒ‰ç…§é¢„æœŸæ–¹å¼å·¥ä½œçš„å‡½æ•°ã€‚åœ¨ç¼–ç¨‹ä¸­ï¼Œâ€œæ–­è¨€â€æ˜¯æŒ‡æ£€æŸ¥ç¨‹åºæ˜¯å¦æœ‰æŸç§çŠ¶æ€ï¼Œå¦‚æœä¸æ˜¯ï¼Œåˆ™æŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚</p><p><code>assert.notDeepStrictEqual(actual, expected[, message])</code> æ˜¯ <code>assert</code> æ¨¡å—ä¸­çš„ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒç”¨äºåˆ¤æ–­ä¸¤ä¸ªå˜é‡çš„å€¼å’Œç±»å‹æ˜¯å¦ä¸ä¸¥æ ¼æ·±åº¦ç›¸ç­‰ã€‚è¿™é‡Œçš„â€œä¸ä¸¥æ ¼æ·±åº¦ç›¸ç­‰â€æ„å‘³ç€ï¼š</p><ul><li>å®ƒæ¯”è¾ƒå¯¹è±¡çš„å±æ€§å’Œæ•°ç»„çš„å…ƒç´ ï¼ŒåŒ…æ‹¬åµŒå¥—ç»“æ„ã€‚</li><li>è¯¥æ¯”è¾ƒä¸ä»…æ£€æŸ¥å€¼ï¼Œè¿˜æ£€æŸ¥å€¼çš„ç±»å‹ã€‚</li><li>ä¸åŒäº <code>==</code> æˆ–è€… <code>!=</code> è¿™æ ·çš„å®½æ¾æ¯”è¾ƒï¼ˆå®ƒä»¬åšç±»å‹è½¬æ¢ï¼‰ï¼Œè¿™é‡Œä½¿ç”¨çš„æ˜¯ç±»ä¼¼äº <code>===</code> æˆ–è€… <code>!==</code> çš„ä¸¥æ ¼æ¯”è¾ƒã€‚</li></ul><p>å¦‚æœå®é™…å€¼ (<code>actual</code>) å’Œé¢„æœŸå€¼ (<code>expected</code>) æ·±åº¦ä¸¥æ ¼ç›¸ç­‰ï¼Œåˆ™è¯¥æ–­è¨€ä¼šå¤±è´¥ï¼Œå¹¶æŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚å¯é€‰çš„ <code>message</code> å‚æ•°å¯ä»¥æä¾›è‡ªå®šä¹‰çš„é”™è¯¯ä¿¡æ¯ã€‚</p><p>è®©æˆ‘ä»¬é€šè¿‡å‡ ä¸ªä¾‹å­æ¥ç†è§£ <code>assert.notDeepStrictEqual()</code> çš„ç”¨æ³•ï¼š</p><h3 id="ç¤ºä¾‹-1-æ¯”è¾ƒç®€å•çš„æ•°æ®" tabindex="-1"><a class="header-anchor" href="#ç¤ºä¾‹-1-æ¯”è¾ƒç®€å•çš„æ•°æ®"><span>ç¤ºä¾‹ 1ï¼šæ¯”è¾ƒç®€å•çš„æ•°æ®</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> assert</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">assert</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> actual</span><span style="color:#81A1C1;"> =</span><span style="color:#B48EAD;"> 3</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> expected</span><span style="color:#81A1C1;"> =</span><span style="color:#B48EAD;"> 4</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// è¿™å°†ä¸ä¼šæŠ›å‡ºé”™è¯¯ï¼Œå› ä¸º actual !== expected</span></span>
<span class="line"><span style="color:#D8DEE9;">assert</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">notDeepStrictEqual</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">actual</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> expected</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ç¤ºä¾‹-2-æ¯”è¾ƒæ•°ç»„" tabindex="-1"><a class="header-anchor" href="#ç¤ºä¾‹-2-æ¯”è¾ƒæ•°ç»„"><span>ç¤ºä¾‹ 2ï¼šæ¯”è¾ƒæ•°ç»„</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> assert</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">assert</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> actual</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9FF;"> [</span><span style="color:#B48EAD;">1</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 2</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 3</span><span style="color:#D8DEE9FF;">]</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> expected</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9FF;"> [</span><span style="color:#B48EAD;">1</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 2</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 3</span><span style="color:#D8DEE9FF;">]</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// è¿™å°†ä¼šæŠ›å‡ºé”™è¯¯ï¼Œå› ä¸ºä¸¤ä¸ªæ•°ç»„æ˜¯æ·±åº¦ä¸¥æ ¼ç›¸ç­‰çš„</span></span>
<span class="line"><span style="color:#81A1C1;">try</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">  assert</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">notDeepStrictEqual</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">actual</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> expected</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;"> catch</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">err</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">error</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">err</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">message</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡ºè‡ªåŠ¨ç”Ÿæˆçš„é”™è¯¯ä¿¡æ¯</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ç¤ºä¾‹-3-æ¯”è¾ƒå¯¹è±¡" tabindex="-1"><a class="header-anchor" href="#ç¤ºä¾‹-3-æ¯”è¾ƒå¯¹è±¡"><span>ç¤ºä¾‹ 3ï¼šæ¯”è¾ƒå¯¹è±¡</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> assert</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">assert</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> person1</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> {</span><span style="color:#88C0D0;"> name</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">Alice</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#88C0D0;"> age</span><span style="color:#ECEFF4;">:</span><span style="color:#B48EAD;"> 25</span><span style="color:#ECEFF4;"> }</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> person2</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> {</span><span style="color:#88C0D0;"> name</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">Alice</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#88C0D0;"> age</span><span style="color:#ECEFF4;">:</span><span style="color:#B48EAD;"> 25</span><span style="color:#ECEFF4;"> }</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å°½ç®¡è¿™ä¸¤ä¸ªå¯¹è±¡çœ‹èµ·æ¥ç›¸åŒï¼Œä½†å®ƒä»¬åœ¨å†…å­˜ä¸­æ˜¯ä¸åŒçš„å®ä¾‹ã€‚</span></span>
<span class="line"><span style="color:#616E88;">// å› æ­¤ï¼Œä»¥ä¸‹æ–­è¨€å°†ä¸ä¼šæŠ›å‡ºé”™è¯¯ã€‚</span></span>
<span class="line"><span style="color:#D8DEE9;">assert</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">notDeepStrictEqual</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">person1</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> person2</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ç¤ºä¾‹-4-æ¯”è¾ƒåµŒå¥—ç»“æ„" tabindex="-1"><a class="header-anchor" href="#ç¤ºä¾‹-4-æ¯”è¾ƒåµŒå¥—ç»“æ„"><span>ç¤ºä¾‹ 4ï¼šæ¯”è¾ƒåµŒå¥—ç»“æ„</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> assert</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">assert</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> actual</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> {</span><span style="color:#88C0D0;"> a</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> {</span><span style="color:#88C0D0;"> b</span><span style="color:#ECEFF4;">:</span><span style="color:#B48EAD;"> 2</span><span style="color:#ECEFF4;"> }</span><span style="color:#ECEFF4;"> }</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> expected</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> {</span><span style="color:#88C0D0;"> a</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> {</span><span style="color:#88C0D0;"> b</span><span style="color:#ECEFF4;">:</span><span style="color:#B48EAD;"> 2</span><span style="color:#ECEFF4;"> }</span><span style="color:#ECEFF4;"> }</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// è¿™å°†ä¼šæŠ›å‡ºé”™è¯¯ï¼Œå› ä¸ºä¸¤ä¸ªå¯¹è±¡çš„ç»“æ„å’Œå€¼éƒ½æ˜¯æ·±åº¦ä¸¥æ ¼ç›¸ç­‰çš„</span></span>
<span class="line"><span style="color:#81A1C1;">try</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">  assert</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">notDeepStrictEqual</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">actual</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> expected</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;"> catch</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">err</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">error</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">err</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">message</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨å®é™…ç¼–ç¨‹ä¸­ï¼Œä½ å¯èƒ½ä¼šåœ¨å•å…ƒæµ‹è¯•æ—¶ä½¿ç”¨è¿™ä¸ªå‡½æ•°ï¼Œä»¥ç¡®ä¿ä½ çš„å‡½æ•°æˆ–æ–¹æ³•è¿”å›çš„ç»“æœä¸ä¸ä¸€ä¸ªç‰¹å®šçš„é”™è¯¯ç»“æœç›¸åŒ¹é…ã€‚ä¾‹å¦‚ï¼Œä½ å¯èƒ½æƒ³ç¡®è®¤ä¸€ä¸ªæ’åºå‡½æ•°æ²¡æœ‰è¿”å›æœªæ’åºçš„æ•°ç»„ï¼Œæˆ–è€…ä¸€ä¸ªæ•°æ®å¤„ç†å‡½æ•°æ²¡æœ‰è¿”å›ä¸€ä¸ªé”™è¯¯çš„å¯¹è±¡ç»“æ„ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œ<code>assert.notDeepStrictEqual()</code> å¯ä»¥å¸®åŠ©ä½ æ•è·æ½œåœ¨çš„é”™è¯¯å¹¶ç¡®ä¿ä»£ç çš„ç¨³å¥æ€§ã€‚</p><h2 id="assert-notequal-actual-expected-message" tabindex="-1"><a class="header-anchor" href="#assert-notequal-actual-expected-message"><span><a href="https://nodejs.org/docs/latest/api/assert.html#assertnotequalactual-expected-message" target="_blank" rel="noopener noreferrer">assert.notEqual(actual, expected[, message])</a></span></a></h2><p><code>assert.notEqual(actual, expected[, message])</code> æ˜¯ Node.js ä¸­çš„ä¸€ä¸ªæ–­è¨€å‡½æ•°ï¼Œå±äº <code>assert</code> æ¨¡å—ã€‚è¿™ä¸ªå‡½æ•°ç”¨æ¥æ£€æŸ¥ä¸¤ä¸ªå€¼æ˜¯å¦ä¸ç›¸ç­‰ã€‚å¦‚æœä¸¤ä¸ªå€¼ç›¸ç­‰ï¼Œé‚£ä¹ˆè¿™ä¸ªå‡½æ•°ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼ˆAssertionErrorï¼‰ï¼Œè¡¨ç¤ºæµ‹è¯•å¤±è´¥ã€‚å¦‚æœå®ƒä»¬ä¸ç›¸ç­‰ï¼Œè¯´æ˜è¿™ä¸ªæ£€æŸ¥é€šè¿‡äº†ï¼Œç¨‹åºåˆ™ä¼šç»§ç»­æ‰§è¡Œã€‚</p><p>åœ¨ Node.js ä¸­ï¼Œ<code>assert</code>æ¨¡å—é€šå¸¸ç”¨äºç¼–å†™æµ‹è¯•ä»£ç ï¼Œä»¥ç¡®ä¿ä½ çš„ä»£ç æŒ‰ç…§é¢„æœŸé‚£æ ·å·¥ä½œã€‚</p><p><code>actual</code> å‚æ•°æ˜¯ä½ çš„ä»£ç äº§ç”Ÿçš„å®é™…ç»“æœã€‚<br><code>expected</code> å‚æ•°æ˜¯ä½ é¢„æœŸçš„ç»“æœï¼Œä½ å¸Œæœ› <code>actual</code> ä¸è¦ç­‰äºè¿™ä¸ªå€¼ã€‚<br><code>message</code> å‚æ•°æ˜¯å¯é€‰çš„ï¼Œå®ƒæ˜¯å½“æ–­è¨€å¤±è´¥æ—¶æ˜¾ç¤ºçš„é”™è¯¯ä¿¡æ¯ã€‚</p><p>ä¸‹é¢ä¸¾å‡ ä¸ªä¾‹å­æ¥è¯´æ˜ <code>assert.notEqual</code> çš„ç”¨æ³•ï¼š</p><h3 id="ä¾‹å­-1-åŸºæœ¬ç”¨æ³•" tabindex="-1"><a class="header-anchor" href="#ä¾‹å­-1-åŸºæœ¬ç”¨æ³•"><span>ä¾‹å­ 1: åŸºæœ¬ç”¨æ³•</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> assert</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">assert</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> actualValue</span><span style="color:#81A1C1;"> =</span><span style="color:#B48EAD;"> 5</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> unexpectedValue</span><span style="color:#81A1C1;"> =</span><span style="color:#B48EAD;"> 5</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// è¿™é‡Œæˆ‘ä»¬æœŸæœ› actualValue å’Œ unexpectedValue ä¸ç›¸ç­‰ã€‚</span></span>
<span class="line"><span style="color:#616E88;">// å› ä¸ºå®ƒä»¬å®é™…ä¸Šæ˜¯ç›¸ç­‰çš„ï¼Œæ‰€ä»¥ä¼šæŠ›å‡º AssertionErrorã€‚</span></span>
<span class="line"><span style="color:#D8DEE9;">assert</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">notEqual</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">actualValue</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> unexpectedValue</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æœŸå¾… <code>actualValue</code> ï¼ˆå®é™…å€¼ï¼‰å’Œ <code>unexpectedValue</code> ï¼ˆä¸æœŸæœ›çš„å€¼ï¼‰ä¸ç›¸ç­‰ï¼Œä½†äº‹å®ä¸Šå®ƒä»¬ç›¸ç­‰ï¼Œå› æ­¤ä»£ç ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œå¹¶åœæ­¢æ‰§è¡Œã€‚</p><h3 id="ä¾‹å­-2-è‡ªå®šä¹‰é”™è¯¯ä¿¡æ¯" tabindex="-1"><a class="header-anchor" href="#ä¾‹å­-2-è‡ªå®šä¹‰é”™è¯¯ä¿¡æ¯"><span>ä¾‹å­ 2: è‡ªå®šä¹‰é”™è¯¯ä¿¡æ¯</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> assert</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">assert</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> actualValue</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">hello</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> unexpectedValue</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">hello</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">try</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#616E88;">  // å¦‚æœ actualValue å’Œ unexpectedValue ç›¸ç­‰ï¼Œåˆ™ä¼šæŠ›å‡ºé”™è¯¯ã€‚</span></span>
<span class="line"><span style="color:#616E88;">  // é”™è¯¯ä¿¡æ¯å°†è¢«è®¾ç½®ä¸º &#39;Values should not be equal&#39;</span></span>
<span class="line"><span style="color:#D8DEE9;">  assert</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">notEqual</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">actualValue</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> unexpectedValue</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">Values should not be equal</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;"> catch</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">error</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">error</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">error</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">message</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // è¾“å‡º: Values should not be equal</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä¼ é€’äº†ä¸€ä¸ªè‡ªå®šä¹‰çš„é”™è¯¯ä¿¡æ¯ã€‚å½“ <code>actualValue</code> å’Œ <code>unexpectedValue</code> ç›¸ç­‰æ—¶ï¼Œä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œå¹¶æ˜¾ç¤ºæˆ‘ä»¬æä¾›çš„é”™è¯¯ä¿¡æ¯ã€‚</p><h3 id="ä¾‹å­-3-æµ‹è¯•å¯¹è±¡ä¸ç›¸ç­‰" tabindex="-1"><a class="header-anchor" href="#ä¾‹å­-3-æµ‹è¯•å¯¹è±¡ä¸ç›¸ç­‰"><span>ä¾‹å­ 3: æµ‹è¯•å¯¹è±¡ä¸ç›¸ç­‰</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> assert</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">assert</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> actualObject</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> {</span><span style="color:#88C0D0;"> a</span><span style="color:#ECEFF4;">:</span><span style="color:#B48EAD;"> 1</span><span style="color:#ECEFF4;"> }</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9;"> unexpectedObject</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> {</span><span style="color:#88C0D0;"> a</span><span style="color:#ECEFF4;">:</span><span style="color:#B48EAD;"> 1</span><span style="color:#ECEFF4;"> }</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å°½ç®¡ä¸¤ä¸ªå¯¹è±¡å†…å®¹çœ‹èµ·æ¥ç›¸åŒï¼Œä½†å®ƒä»¬åœ¨å†…å­˜ä¸­æ˜¯ä¸¤ä¸ªä¸åŒçš„å®ä¾‹ï¼Œæ‰€ä»¥ä¸ä¼šæŠ›å‡ºé”™è¯¯ã€‚</span></span>
<span class="line"><span style="color:#D8DEE9;">assert</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">notEqual</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">actualObject</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> unexpectedObject</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå°½ç®¡ <code>actualObject</code> å’Œ <code>unexpectedObject</code> åœ¨ç»“æ„ä¸Šçœ‹èµ·æ¥ç›¸åŒï¼Œä½†åœ¨ JavaScript ä¸­ï¼Œå¯¹è±¡æ˜¯é€šè¿‡å¼•ç”¨æ¥æ¯”è¾ƒçš„ã€‚å› ä¸ºè¿™ä¸¤ä¸ªå¯¹è±¡æ˜¯åˆ†åˆ«åˆ›å»ºçš„ï¼Œå®ƒä»¬å¼•ç”¨çš„å†…å­˜åœ°å€ä¸åŒï¼Œæ‰€ä»¥ <code>assert.notEqual</code> ä¸ä¼šæŠ›å‡ºé”™è¯¯ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨ Node.js v14.x ç‰ˆæœ¬åï¼Œ<code>assert.notEqual</code> è¢«æ ‡è®°ä¸ºåºŸå¼ƒçš„ï¼Œå®˜æ–¹å»ºè®®ä½¿ç”¨ <code>assert.notStrictEqual</code> æ–¹æ³•æ›¿æ¢å®ƒï¼Œä»¥è¿›è¡Œæ›´ä¸¥æ ¼çš„æ¯”è¾ƒã€‚</p><h2 id="assert-notstrictequal-actual-expected-message" tabindex="-1"><a class="header-anchor" href="#assert-notstrictequal-actual-expected-message"><span><a href="https://nodejs.org/docs/latest/api/assert.html#assertnotstrictequalactual-expected-message" target="_blank" rel="noopener noreferrer">assert.notStrictEqual(actual, expected[, message])</a></span></a></h2><p>åœ¨ Node.js ä¸­ï¼Œ<code>assert</code> æ¨¡å—æä¾›äº†ä¸€ç»„ç”¨äºæµ‹è¯•çš„æ–­è¨€å‡½æ•°ã€‚è¿™äº›å‡½æ•°å¸¸ç”¨äºç¼–å†™æµ‹è¯•ä»£ç ï¼Œå¸®åŠ©å¼€å‘è€…éªŒè¯ä»£ç æ˜¯å¦æŒ‰ç…§é¢„æœŸè¿è¡Œã€‚</p><p><code>assert.notStrictEqual(actual, expected[, message])</code> æ˜¯ <code>assert</code> æ¨¡å—ä¸­çš„ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒç”¨æ¥æ£€æŸ¥ä¸¤ä¸ªå€¼æ˜¯å¦ä¸ä¸¥æ ¼ç›¸ç­‰ã€‚æ‰€è°“â€œä¸ä¸¥æ ¼ç›¸ç­‰â€ï¼Œæ„å‘³ç€å®ƒä»¬åœ¨å†…å­˜ä¸­çš„åœ°å€æˆ–è€…å¼•ç”¨ä¸ç›¸åŒï¼Œæˆ–è€…å®ƒä»¬çš„ç±»å‹å’Œå€¼ä¸å®Œå…¨åŒ¹é…ã€‚è¿™ä¸ <code>==</code>ï¼ˆå®½æ¾ç›¸ç­‰ï¼‰å’Œ <code>===</code>ï¼ˆä¸¥æ ¼ç›¸ç­‰ï¼‰åœ¨ JavaScript ä¸­çš„æ¯”è¾ƒæ˜¯å¯¹åº”çš„ã€‚</p><h3 id="ç”¨æ³•" tabindex="-1"><a class="header-anchor" href="#ç”¨æ³•"><span>ç”¨æ³•ï¼š</span></a></h3><ul><li><code>actual</code>ï¼šå®é™…å€¼ï¼Œå³ä½ çš„ä»£ç äº§ç”Ÿçš„ç»“æœã€‚</li><li><code>expected</code>ï¼šæœŸæœ›å€¼ï¼Œå³ä½ è®¤ä¸ºæ­£ç¡®çš„ç»“æœã€‚</li><li><code>message</code>ï¼šå½“æ–­è¨€å¤±è´¥æ—¶è¦æ˜¾ç¤ºçš„é”™è¯¯ä¿¡æ¯ï¼ˆå¯é€‰ï¼‰ã€‚</li></ul><p>å¦‚æœ <code>actual</code> å’Œ <code>expected</code> å€¼ä¸¥æ ¼ä¸ç›¸ç­‰ï¼Œä»€ä¹ˆéƒ½ä¸ä¼šå‘ç”Ÿï¼Œä½ çš„æµ‹è¯•ä¼šç»§ç»­è¿è¡Œã€‚å¦‚æœå®ƒä»¬ä¸¥æ ¼ç›¸ç­‰ï¼Œé‚£ä¹ˆä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œé€šå¸¸åŒ…å« <code>message</code> æä¾›çš„ä¿¡æ¯ï¼ˆå¦‚æœä¼ é€’äº† <code>message</code> å‚æ•°ï¼‰ã€‚</p><h3 id="å®é™…ä¾‹å­-1" tabindex="-1"><a class="header-anchor" href="#å®é™…ä¾‹å­-1"><span>å®é™…ä¾‹å­ï¼š</span></a></h3><p>å‡è®¾ä½ æ­£åœ¨ç¼–å†™ä¸€ä¸ªç®€å•çš„ç¨‹åºï¼Œè¯¥ç¨‹åºåŒ…æ‹¬ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°åº”è¿”å›ä¸¤ä¸ªå‚æ•°ç›¸ä¹˜çš„ç»“æœï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">function</span><span style="color:#88C0D0;"> multiply</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">a</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> b</span><span style="color:#ECEFF4;">)</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  return</span><span style="color:#D8DEE9;"> a</span><span style="color:#81A1C1;"> *</span><span style="color:#D8DEE9;"> b</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç°åœ¨ä½ æƒ³æµ‹è¯•è¿™ä¸ªå‡½æ•°ï¼Œç¡®ä¿å®ƒä¸ä¼šé”™è¯¯åœ°è¿”å›ç›¸åŠ çš„ç»“æœã€‚ä½ å¯ä»¥å†™å¦‚ä¸‹æµ‹è¯•ä»£ç ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> assert</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">assert</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">function</span><span style="color:#88C0D0;"> multiply</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">a</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> b</span><span style="color:#ECEFF4;">)</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  return</span><span style="color:#D8DEE9;"> a</span><span style="color:#81A1C1;"> *</span><span style="color:#D8DEE9;"> b</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // æ­£ç¡®çš„å®ç°</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// æµ‹è¯•ç”¨ä¾‹</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> result</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> multiply</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">2</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 3</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// æ£€æŸ¥multiplyå‡½æ•°çš„è¾“å‡ºä¸æ˜¯ç›¸åŠ çš„ç»“æœ</span></span>
<span class="line"><span style="color:#D8DEE9;">assert</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">notStrictEqual</span><span style="color:#D8DEE9FF;">(</span></span>
<span class="line"><span style="color:#D8DEE9;">  result</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#B48EAD;">  2</span><span style="color:#81A1C1;"> +</span><span style="color:#B48EAD;"> 3</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#ECEFF4;">  &quot;</span><span style="color:#A3BE8C;">Multiply should not return the sum of the arguments</span><span style="color:#ECEFF4;">&quot;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœ <code>multiply</code> å‡½æ•°æ­£å¸¸å·¥ä½œï¼Œå¹¶è¿”å›äº† <code>6</code>ï¼ˆ2 ä¹˜ä»¥ 3 çš„ç»“æœï¼‰ï¼Œ<code>assert.notStrictEqual</code> å°†é€šè¿‡ï¼Œå› ä¸º <code>6</code> ï¼ˆä¹˜æ³•ç»“æœï¼‰ä¸ç­‰äº <code>5</code>ï¼ˆåŠ æ³•ç»“æœï¼‰ã€‚</p><p>ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬çš„å‡½æ•°æœ‰é”™è¯¯ï¼Œæ¯”å¦‚å®ƒé”™è¯¯åœ°è¿”å›äº†ç›¸åŠ çš„ç»“æœï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">function</span><span style="color:#88C0D0;"> multiply</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">a</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> b</span><span style="color:#ECEFF4;">)</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  return</span><span style="color:#D8DEE9;"> a</span><span style="color:#81A1C1;"> +</span><span style="color:#D8DEE9;"> b</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // é”™è¯¯çš„å®ç°</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ­¤æ—¶ï¼Œ<code>assert.notStrictEqual</code> å°†ä¼šå¤±è´¥ï¼Œå› ä¸º <code>multiply(2, 3)</code> å°†è¿”å› <code>5</code>ï¼Œè¿™æ°å·§ç­‰äº <code>2 + 3</code>ï¼Œè¿åäº†æˆ‘ä»¬çš„æµ‹è¯•æœŸæœ›ï¼Œå³ â€œä¹˜æ³•ç»“æœä¸åº”è¯¥ç­‰äºåŠ æ³•ç»“æœâ€ã€‚ æ–­è¨€å¤±è´¥æ—¶ï¼Œå®ƒä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œé”™è¯¯ä¿¡æ¯å°†æ˜¯ï¼šâ€œMultiply should not return the sum of the argumentsâ€ã€‚</p><p>ä½¿ç”¨ <code>assert.notStrictEqual</code> å¯ä»¥å¸®åŠ©ä½ æ•è·ä¸€äº›å¯èƒ½ç”±äºç²—å¿ƒå¯¼è‡´çš„ç¼–ç¨‹é”™è¯¯ï¼Œæˆ–è€…ç¡®ä¿ä»£ç çš„å˜æ›´æ²¡æœ‰ç ´ååŸæœ‰çš„åŠŸèƒ½ã€‚åœ¨è‡ªåŠ¨åŒ–æµ‹è¯•ä¸­ï¼Œå®ƒæ˜¯ç¡®ä¿ä»£ç è´¨é‡å’Œç¨³å®šæ€§çš„å…³é”®å·¥å…·ä¹‹ä¸€ã€‚</p><h2 id="assert-ok-value-message" tabindex="-1"><a class="header-anchor" href="#assert-ok-value-message"><span><a href="https://nodejs.org/docs/latest/api/assert.html#assertokvalue-message" target="_blank" rel="noopener noreferrer">assert.ok(value[, message])</a></span></a></h2><p><code>assert.ok(value[, message])</code> æ˜¯ Node.js ä¸­ <code>assert</code> æ¨¡å—æä¾›çš„ä¸€ä¸ªåŸºæœ¬å‡½æ•°ï¼Œç”¨äºæ–­è¨€æµ‹è¯•ã€‚è¿™ä¸ªå‡½æ•°çš„ä½œç”¨æ˜¯éªŒè¯ä¸€ä¸ªå€¼æ˜¯å¦ä¸ºçœŸï¼ˆtruthyï¼‰ï¼Œå³åœ¨é€»è¾‘ä¸Šè¯¥å€¼ä¸æ˜¯å‡ï¼ˆfalseï¼‰ã€0ã€ç©ºå­—ç¬¦ä¸²(&#39;&#39;)ã€nullã€undefined æˆ–è€… NaN ç­‰ã€‚</p><p>å¦‚æœä¼ é€’ç»™ <code>assert.ok()</code> çš„å€¼ä¸æ»¡è¶³ä»¥ä¸Šæ¡ä»¶ï¼ˆå³å®ƒä¸ºçœŸï¼‰ï¼Œé‚£ä¹ˆç¨‹åºä¼šç»§ç»­æ‰§è¡Œï¼Œæ²¡æœ‰ä»»ä½•ååº”ã€‚ä½†å¦‚æœå€¼ä¸ºå‡ï¼Œé‚£ä¹ˆå°±ä¼šæŠ›å‡ºä¸€ä¸ª <code>AssertionError</code>ã€‚å¦‚æœä½ æä¾›äº†ç¬¬äºŒä¸ªå‚æ•° <code>message</code>ï¼Œé‚£ä¹ˆå½“æ–­è¨€å¤±è´¥æ—¶ï¼Œè¿™ä¸ªæ¶ˆæ¯å°†ä½œä¸ºé”™è¯¯ä¿¡æ¯çš„ä¸€éƒ¨åˆ†è¢«è¾“å‡ºï¼Œå¸®åŠ©ä½ å¿«é€Ÿå®šä½é—®é¢˜ã€‚</p><p>ä¸‹é¢ä¸¾å‡ ä¸ªä¾‹å­æ¥è¯´æ˜è¿™ä¸ªå‡½æ•°æ˜¯å¦‚ä½•å·¥ä½œçš„:</p><h3 id="ä¾‹å­-1-æ–­è¨€ä¸€ä¸ªå€¼ä¸ºçœŸ" tabindex="-1"><a class="header-anchor" href="#ä¾‹å­-1-æ–­è¨€ä¸€ä¸ªå€¼ä¸ºçœŸ"><span>ä¾‹å­ 1: æ–­è¨€ä¸€ä¸ªå€¼ä¸ºçœŸ</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> assert</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">assert</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªå‡½æ•°ï¼Œè¿”å›ç”¨æˆ·æ˜¯å¦å·²ç™»å½•</span></span>
<span class="line"><span style="color:#81A1C1;">function</span><span style="color:#88C0D0;"> isLoggedIn</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">user</span><span style="color:#ECEFF4;">)</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#616E88;">  // è¿™é‡Œåªæ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼Œå®é™…æƒ…å†µå¯èƒ½éœ€è¦æ£€æŸ¥ç”¨æˆ·çš„ç™»å½•çŠ¶æ€</span></span>
<span class="line"><span style="color:#81A1C1;">  return</span><span style="color:#D8DEE9;"> user</span><span style="color:#81A1C1;"> &amp;&amp;</span><span style="color:#D8DEE9;"> user</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">loggedIn</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// ç”¨æˆ·ä¿¡æ¯ç¤ºä¾‹</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> user</span><span style="color:#81A1C1;"> =</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#88C0D0;">  name</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">Alice</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#88C0D0;">  loggedIn</span><span style="color:#ECEFF4;">:</span><span style="color:#81A1C1;"> true</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// ä½¿ç”¨ assert.ok() æ–­è¨€ç”¨æˆ·å·²ç™»å½•</span></span>
<span class="line"><span style="color:#D8DEE9;">assert</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">ok</span><span style="color:#D8DEE9FF;">(</span><span style="color:#88C0D0;">isLoggedIn</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">user</span><span style="color:#D8DEE9FF;">)</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">ç”¨æˆ·æœªç™»å½•</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // ç”±äºç”¨æˆ·å·²ç™»å½•ï¼Œæ‰€ä»¥è¿™é‡Œä¸ä¼šæŠ›å‡ºå¼‚å¸¸</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå¦‚æœ <code>isLoggedIn(user)</code> è¿”å› <code>false</code>ï¼Œåˆ™ä¼šæŠ›å‡ºé”™è¯¯ï¼Œé”™è¯¯ä¿¡æ¯ä¸º &quot;ç”¨æˆ·æœªç™»å½•&quot;ã€‚</p><h3 id="ä¾‹å­-2-æ–­è¨€å¤±è´¥å¹¶æŠ›å‡ºè‡ªå®šä¹‰é”™è¯¯ä¿¡æ¯" tabindex="-1"><a class="header-anchor" href="#ä¾‹å­-2-æ–­è¨€å¤±è´¥å¹¶æŠ›å‡ºè‡ªå®šä¹‰é”™è¯¯ä¿¡æ¯"><span>ä¾‹å­ 2: æ–­è¨€å¤±è´¥å¹¶æŠ›å‡ºè‡ªå®šä¹‰é”™è¯¯ä¿¡æ¯</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> assert</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">assert</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å‡è®¾æœ‰ä¸€ä¸ªå‡½æ•°è®¡ç®—è´­ç‰©è½¦ä¸­å•†å“çš„æ€»ä»·</span></span>
<span class="line"><span style="color:#81A1C1;">function</span><span style="color:#88C0D0;"> calculateTotal</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">items</span><span style="color:#ECEFF4;">)</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#616E88;">  // ç¤ºä¾‹è®¡ç®—æ€»ä»·ï¼Œå®é™…ä¸­éœ€è¦å¯¹ items æ•°ç»„è¿›è¡Œå¤„ç†</span></span>
<span class="line"><span style="color:#81A1C1;">  return</span><span style="color:#D8DEE9;"> items</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">reduce</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">total</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> item</span><span style="color:#ECEFF4;">)</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#D8DEE9;"> total</span><span style="color:#81A1C1;"> +</span><span style="color:#D8DEE9;"> item</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">price</span><span style="color:#81A1C1;"> *</span><span style="color:#D8DEE9;"> item</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">quantity</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 0</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// è´­ç‰©è½¦å•†å“ç¤ºä¾‹</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> cartItems</span><span style="color:#81A1C1;"> =</span><span style="color:#D8DEE9FF;"> [</span></span>
<span class="line"><span style="color:#ECEFF4;">  {</span><span style="color:#88C0D0;"> name</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">ç¬”</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#88C0D0;"> price</span><span style="color:#ECEFF4;">:</span><span style="color:#B48EAD;"> 1.5</span><span style="color:#ECEFF4;">,</span><span style="color:#88C0D0;"> quantity</span><span style="color:#ECEFF4;">:</span><span style="color:#B48EAD;"> 2</span><span style="color:#ECEFF4;"> },</span></span>
<span class="line"><span style="color:#ECEFF4;">  {</span><span style="color:#88C0D0;"> name</span><span style="color:#ECEFF4;">:</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">çº¸</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#ECEFF4;">,</span><span style="color:#88C0D0;"> price</span><span style="color:#ECEFF4;">:</span><span style="color:#B48EAD;"> 2.0</span><span style="color:#ECEFF4;">,</span><span style="color:#88C0D0;"> quantity</span><span style="color:#ECEFF4;">:</span><span style="color:#B48EAD;"> 1</span><span style="color:#ECEFF4;"> },</span></span>
<span class="line"><span style="color:#D8DEE9FF;">]</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// è®¡ç®—æ€»ä»·</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> total</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> calculateTotal</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">cartItems</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// ä½¿ç”¨ assert.ok() æ–­è¨€æ€»ä»·å¤§äº 0</span></span>
<span class="line"><span style="color:#D8DEE9;">assert</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">ok</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">total</span><span style="color:#81A1C1;"> &gt;</span><span style="color:#B48EAD;"> 0</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">è´­ç‰©è½¦çš„æ€»ä»·åº”è¯¥å¤§äº 0</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // å¦‚æœ total ä¸å¤§äº 0ï¼Œä¼šæŠ›å‡º &quot;è´­ç‰©è½¦çš„æ€»ä»·åº”è¯¥å¤§äº 0&quot; é”™è¯¯</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå¦‚æœ <code>calculateTotal(cartItems)</code> çš„ç»“æœå°äºæˆ–ç­‰äº 0ï¼Œåˆ™ <code>assert.ok()</code> ä¼šæŠ›å‡ºä¸€ä¸ªå¸¦æœ‰ &quot;è´­ç‰©è½¦çš„æ€»ä»·åº”è¯¥å¤§äº 0&quot; çš„é”™è¯¯ä¿¡æ¯ã€‚</p><p>ä½¿ç”¨ <code>assert.ok()</code> æœ€å¸¸è§çš„åœºæ™¯æ˜¯åœ¨å•å…ƒæµ‹è¯•ä¸­ã€‚å¼€å‘è€…ä¼šç”¨å®ƒæ¥ç¡®ä¿ä»£ç çš„æŸä¸ªéƒ¨åˆ†ï¼ˆæ¯”å¦‚ä¸€ä¸ªå‡½æ•°çš„è¾“å‡ºï¼‰ç¬¦åˆé¢„æœŸã€‚å¦‚æœä¸ç¬¦åˆé¢„æœŸï¼Œå³æ–­è¨€å¤±è´¥ï¼Œæµ‹è¯•æ¡†æ¶å°±èƒ½å¤Ÿæ•è·é”™è¯¯ï¼Œå¹¶æŠ¥å‘Šæµ‹è¯•æœªé€šè¿‡ã€‚</p><p>æ³¨æ„ï¼šåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨æ–­è¨€è¦éå¸¸å°å¿ƒï¼Œå› ä¸ºæ–­è¨€å¤±è´¥ä¼šå¯¼è‡´ç¨‹åºå´©æºƒã€‚é€šå¸¸æ–­è¨€ä¸»è¦ç”¨äºå¼€å‘å’Œæµ‹è¯•é˜¶æ®µã€‚</p><h2 id="assert-rejects-asyncfn-error-message" tabindex="-1"><a class="header-anchor" href="#assert-rejects-asyncfn-error-message"><span><a href="https://nodejs.org/docs/latest/api/assert.html#assertrejectsasyncfn-error-message" target="_blank" rel="noopener noreferrer">assert.rejects(asyncFn[, error][, message])</a></span></a></h2><p><code>assert.rejects()</code> æ˜¯ Node.js ä¸­ <code>assert</code> æ¨¡å—çš„ä¸€ä¸ªæ–¹æ³•ï¼Œè¯¥æ¨¡å—ç”¨äºç¼–å†™æµ‹è¯•ä»£ç ã€‚åœ¨ç¼–ç¨‹ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦ç¡®ä¿æˆ‘ä»¬çš„ç¨‹åºè¡¨ç°å‡ºé¢„æœŸçš„è¡Œä¸ºï¼Œå°¤å…¶æ˜¯å½“é‡åˆ°é”™è¯¯æˆ–å¼‚å¸¸æƒ…å†µæ—¶ã€‚å¯¹æ­¤ï¼Œæˆ‘ä»¬ç¼–å†™æµ‹è¯•æ¥éªŒè¯è¿™äº›è¡Œä¸ºï¼Œå¹¶ä½¿ç”¨æ–­è¨€(assert)æ¥å£°æ˜æŸäº›æ¡ä»¶å¿…é¡»ä¸ºçœŸã€‚</p><p><code>assert.rejects()</code> æ–¹æ³•ä¸“é—¨ç”¨æ¥æµ‹è¯•å¼‚æ­¥å‡½æ•°æ˜¯å¦åƒé¢„æœŸé‚£æ ·è¢«æ‹’ç»(rejected)ã€‚åœ¨ JavaScript çš„ä¸–ç•Œé‡Œï¼Œå¼‚æ­¥æ“ä½œé€šå¸¸é€šè¿‡ Promise æ¥å¤„ç†ï¼Œè€Œä¸€ä¸ª Promise å¯ä»¥è¢«è§£å†³(resolved)ä¹Ÿå¯ä»¥è¢«æ‹’ç»(rejected)ã€‚å¦‚æœä¸€ä¸ªå¼‚æ­¥æ“ä½œå¤±è´¥äº†ï¼Œæˆ‘ä»¬å°±æœŸæœ›å®ƒè¿”å›ä¸€ä¸ªè¢«æ‹’ç»çš„ Promiseã€‚</p><p>ä»¥ä¸‹æ˜¯ <code>assert.rejects()</code> æ–¹æ³•çš„åŸºæœ¬ä½¿ç”¨æ–¹æ³•ï¼š</p><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" data-title="js" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> assert</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">assert</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// å¼‚æ­¥å‡½æ•°ï¼Œè¿”å›ä¸€ä¸ªä¼šè¢«æ‹’ç»çš„ Promise</span></span>
<span class="line"><span style="color:#81A1C1;">async</span><span style="color:#81A1C1;"> function</span><span style="color:#88C0D0;"> myAsyncFunction</span><span style="color:#ECEFF4;">()</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  throw</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> Error</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">å‡ºé”™å•¦ï¼</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// æµ‹è¯•è¯¥å¼‚æ­¥å‡½æ•°æ˜¯å¦å¦‚é¢„æœŸä¸€æ ·è¢«æ‹’ç»</span></span>
<span class="line"><span style="color:#D8DEE9;">assert</span></span>
<span class="line"><span style="color:#ECEFF4;">  .</span><span style="color:#88C0D0;">rejects</span><span style="color:#D8DEE9FF;">(</span></span>
<span class="line"><span style="color:#D8DEE9;">    myAsyncFunction</span><span style="color:#ECEFF4;">,</span><span style="color:#616E88;"> // æˆ‘ä»¬è¦æµ‹è¯•çš„å¼‚æ­¥å‡½æ•°</span></span>
<span class="line"><span style="color:#D8DEE9;">    Error</span><span style="color:#ECEFF4;">,</span><span style="color:#616E88;"> // é¢„æœŸçš„é”™è¯¯ç±»å‹</span></span>
<span class="line"><span style="color:#ECEFF4;">    &quot;</span><span style="color:#A3BE8C;">myAsyncFunction åº”è¯¥æŠ›å‡ºä¸€ä¸ªé”™è¯¯</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#616E88;"> // å¦‚æœæ–­è¨€å¤±è´¥äº†ï¼ŒæŠ›å‡ºçš„é”™è¯¯æ¶ˆæ¯</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  )</span></span>
<span class="line"><span style="color:#ECEFF4;">  .</span><span style="color:#88C0D0;">then</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">()</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">æµ‹è¯•é€šè¿‡ï¼Œå‡½æ•°è¢«æ­£ç¡®åœ°æ‹’ç»</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œ<code>myAsyncFunction</code> æ˜¯ä¸€ä¸ªä¼šæŠ›å‡ºé”™è¯¯çš„å¼‚æ­¥å‡½æ•°ã€‚æˆ‘ä»¬æœŸæœ›è¿™ä¸ªå‡½æ•°æ‰§è¡Œåè¿”å›çš„ Promise è¢«æ‹’ç»ï¼Œå¹¶å¸¦æœ‰ä¸€ä¸ªé”™è¯¯ã€‚</p><p><code>assert.rejects()</code> æ¥å—ä¸‰ä¸ªå‚æ•°ï¼š</p><ol><li><code>asyncFn</code>: ä¸€ä¸ªè¿”å› Promise çš„å¼‚æ­¥å‡½æ•°æˆ–è€…ç›´æ¥å°±æ˜¯ä¸€ä¸ª Promiseã€‚</li><li><code>error</code> (å¯é€‰): è¿™ä¸ªå‚æ•°æè¿°äº†é¢„æœŸçš„é”™è¯¯åº”è¯¥æ˜¯ä»€ä¹ˆæ ·çš„ï¼Œå®ƒå¯ä»¥æ˜¯ï¼š <ul><li>ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œä¾‹å¦‚ <code>Error</code>ï¼Œè¡¨ç¤ºé¢„æœŸé”™è¯¯åº”è¯¥æ˜¯è¿™ä¸ªç±»çš„å®ä¾‹ã€‚</li><li>ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ï¼Œç”¨æ¥åŒ¹é…é”™è¯¯ä¿¡æ¯ä¸­çš„æ–‡æœ¬ã€‚</li><li>ä¸€ä¸ªå…·ä½“çš„å¯¹è±¡ï¼Œè¡¨ç¤ºé¢„æœŸé”™è¯¯å¯¹è±¡åº”è¯¥ä¸å®ƒæ·±åº¦ç›¸ç­‰ã€‚</li><li>ä¸€ä¸ªæ–­è¨€å‡½æ•°ï¼Œè‡ªå®šä¹‰æ£€æŸ¥é”™è¯¯å¯¹è±¡çš„é€»è¾‘ã€‚</li></ul></li><li><code>message</code> (å¯é€‰): å¦‚æœæ–­è¨€å¤±è´¥ï¼Œå°†æŠ›å‡ºçš„é”™è¯¯æ¶ˆæ¯ï¼Œå¸®åŠ©å¼€å‘è€…å¿«é€Ÿå®šä½é—®é¢˜ã€‚</li></ol><p>è®©æˆ‘ä»¬çœ‹å¦ä¸€ä¸ªä¾‹å­ï¼Œè¿™æ¬¡æˆ‘ä»¬æœŸæœ›é”™è¯¯ä¿¡æ¯ä¸­åŒ…å«ç‰¹å®šçš„æ–‡æœ¬ï¼š</p><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" data-title="js" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> assert</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">assert</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">async</span><span style="color:#81A1C1;"> function</span><span style="color:#88C0D0;"> anotherAsyncFunction</span><span style="color:#ECEFF4;">()</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  throw</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> Error</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">ç½‘ç»œè¯·æ±‚å¤±è´¥</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">assert</span></span>
<span class="line"><span style="color:#ECEFF4;">  .</span><span style="color:#88C0D0;">rejects</span><span style="color:#D8DEE9FF;">(</span></span>
<span class="line"><span style="color:#D8DEE9;">    anotherAsyncFunction</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#ECEFF4;">    /</span><span style="color:#EBCB8B;">ç½‘ç»œè¯·æ±‚å¤±è´¥</span><span style="color:#ECEFF4;">/</span><span style="color:#ECEFF4;">,</span><span style="color:#616E88;"> // ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ¥åŒ¹é…é”™è¯¯ä¿¡æ¯</span></span>
<span class="line"><span style="color:#ECEFF4;">    &quot;</span><span style="color:#A3BE8C;">anotherAsyncFunction åº”è¯¥æŠ›å‡ºåŒ…å«ç‰¹å®šä¿¡æ¯çš„é”™è¯¯</span><span style="color:#ECEFF4;">&quot;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  )</span></span>
<span class="line"><span style="color:#ECEFF4;">  .</span><span style="color:#88C0D0;">then</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">()</span><span style="color:#81A1C1;"> =&gt;</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">    console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">æµ‹è¯•é€šè¿‡ï¼Œå‡½æ•°æŠ›å‡ºäº†åŒ…å«ç‰¹å®šæ–‡æœ¬çš„é”™è¯¯</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">  }</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬é¢„æœŸ <code>anotherAsyncFunction</code> å‡½æ•°æŠ›å‡ºçš„é”™è¯¯ä¿¡æ¯ä¸­åŒ…å« &quot;ç½‘ç»œè¯·æ±‚å¤±è´¥&quot; è¿™æ®µæ–‡æœ¬ã€‚</p><p>æ€»ä¹‹ï¼Œ<code>assert.rejects()</code> æ˜¯ Node.js ä¸­ä¸€ä¸ªååˆ†æœ‰ç”¨çš„å·¥å…·ï¼Œå®ƒèƒ½å¸®åŠ©ä½ éªŒè¯å¼‚æ­¥ä»£ç åœ¨é‡åˆ°é”™è¯¯æ—¶æ˜¯å¦æŒ‰ç…§é¢„æœŸå·¥ä½œã€‚é€šè¿‡æ­£ç¡®ä½¿ç”¨å®ƒï¼Œä½ å¯ä»¥æé«˜ä»£ç çš„å¥å£®æ€§å’Œå¯é æ€§ã€‚</p><h2 id="assert-strictequal-actual-expected-message" tabindex="-1"><a class="header-anchor" href="#assert-strictequal-actual-expected-message"><span><a href="https://nodejs.org/docs/latest/api/assert.html#assertstrictequalactual-expected-message" target="_blank" rel="noopener noreferrer">assert.strictEqual(actual, expected[, message])</a></span></a></h2><p><code>assert.strictEqual(actual, expected[, message])</code> æ˜¯ Node.js ä¸­çš„ä¸€ä¸ªæ–­è¨€å‡½æ•°ï¼Œå®ƒç”¨æ¥æµ‹è¯•ä»£ç ã€‚è¿™ä¸ªå‡½æ•°æ˜¯ <code>assert</code> æ¨¡å—ä¸­çš„ä¸€ä¸ªæ–¹æ³•ï¼Œ<code>assert</code> æ¨¡å—æä¾›äº†ä¸€ç³»åˆ—ç”¨äºæµ‹è¯•å’ŒéªŒè¯ä»£ç åŠŸèƒ½æ˜¯å¦æ­£ç¡®çš„å‡½æ•°ã€‚</p><p>åœ¨ä½¿ç”¨ <code>assert.strictEqual</code> æ–¹æ³•æ—¶ï¼Œä½ éœ€è¦ç»™å®ƒä¼ é€’ä¸¤ä¸ªå‚æ•°ï¼š<code>actual</code> å’Œ <code>expected</code>ã€‚è¿™ä¸¤ä¸ªå‚æ•°åˆ†åˆ«ä»£è¡¨å®é™…å€¼å’ŒæœŸæœ›å€¼ã€‚å¦‚æœè¿™ä¸¤ä¸ªå€¼ä¸¥æ ¼ç›¸ç­‰ï¼ˆå³å®ƒä»¬çš„ç±»å‹å’Œå€¼éƒ½ç›¸åŒï¼‰ï¼Œé‚£ä¹ˆè¯¥å‡½æ•°ä¸ä¼šæœ‰ä»»ä½•è¾“å‡ºï¼›å¦‚æœä¸ç›¸ç­‰ï¼Œåˆ™ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚å¯é€‰çš„ç¬¬ä¸‰ä¸ªå‚æ•° <code>message</code> æ˜¯å½“æ–­è¨€å¤±è´¥æ—¶è¦æ˜¾ç¤ºçš„é”™è¯¯ä¿¡æ¯ã€‚</p><h3 id="è¯¦ç»†è§£é‡Š" tabindex="-1"><a class="header-anchor" href="#è¯¦ç»†è§£é‡Š"><span>è¯¦ç»†è§£é‡Šï¼š</span></a></h3><ul><li><code>actual</code>: å®é™…å¾—åˆ°çš„ç»“æœã€‚</li><li><code>expected</code>: ä½ æœŸæœ›å¾—åˆ°çš„ç»“æœã€‚</li><li><code>message</code>: å½“å®é™…ç»“æœä¸é¢„æœŸç»“æœä¸ä¸¥æ ¼ç›¸ç­‰æ—¶ï¼Œå°†æŠ›å‡ºä¸€ä¸ªåŒ…å«è¿™ä¸ªæ¶ˆæ¯çš„é”™è¯¯ã€‚</li></ul><h3 id="ä¸ºä»€ä¹ˆè¦ç”¨-assert-strictequal" tabindex="-1"><a class="header-anchor" href="#ä¸ºä»€ä¹ˆè¦ç”¨-assert-strictequal"><span>ä¸ºä»€ä¹ˆè¦ç”¨ <code>assert.strictEqual</code>ï¼Ÿ</span></a></h3><p>åœ¨ç¼–å†™ä»£ç æ—¶ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šå†™å•å…ƒæµ‹è¯•æ¥ç¡®ä¿ä»£ç è¡Œä¸ºç¬¦åˆé¢„æœŸã€‚<code>assert.strictEqual</code> å°±æ˜¯ç”¨äºè¿™ç§æµ‹è¯•çš„ä¸€ä¸ªå·¥å…·ã€‚é€šè¿‡æ¯”è¾ƒå®é™…å€¼å’ŒæœŸæœ›å€¼æ˜¯å¦å®Œå…¨ç›¸ç­‰ï¼Œå®ƒå¸®åŠ©å¼€å‘è€…æ•æ‰é”™è¯¯å’Œé—®é¢˜ã€‚</p><h3 id="ä¾‹å­" tabindex="-1"><a class="header-anchor" href="#ä¾‹å­"><span>ä¾‹å­ï¼š</span></a></h3><p>å‡è®¾ä½ æ­£åœ¨ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°ç”¨äºè®¡ç®—ä¸¤ä¸ªæ•°å­—çš„å’Œã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">function</span><span style="color:#88C0D0;"> add</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">a</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> b</span><span style="color:#ECEFF4;">)</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  return</span><span style="color:#D8DEE9;"> a</span><span style="color:#81A1C1;"> +</span><span style="color:#D8DEE9;"> b</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç°åœ¨ï¼Œä½ æƒ³æµ‹è¯•è¿™ä¸ªå‡½æ•°æ˜¯å¦å¦‚ä½ æ‰€æœŸæœ›çš„é‚£æ ·å·¥ä½œã€‚ä½ å¯ä»¥å†™ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> assert</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">assert</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// æµ‹è¯• add å‡½æ•°</span></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> result</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> add</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">2</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 3</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // å®é™…è°ƒç”¨å‡½æ•°</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">// ä½¿ç”¨ assert.strictEqual æ£€æŸ¥å‡½æ•°è¾“å‡ºæ˜¯å¦ä¸º 5</span></span>
<span class="line"><span style="color:#D8DEE9;">assert</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">strictEqual</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">result</span><span style="color:#ECEFF4;">,</span><span style="color:#B48EAD;"> 5</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">2 + 3 åº”è¯¥ç­‰äº 5</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œå¦‚æœ <code>add</code> å‡½æ•°æ­£ç¡®åœ°è¿”å›äº† <code>5</code>ï¼Œåˆ™ <code>assert.strictEqual</code> ä¸ä¼šæœ‰ä»»ä½•è¾“å‡ºã€‚ä½†å¦‚æœ <code>add</code> å‡½æ•°è¿”å›çš„ä¸æ˜¯ <code>5</code>ï¼Œä¾‹å¦‚ç”±äºæŸäº›é”™è¯¯è€Œè¿”å›äº† <code>4</code>ï¼Œé‚£ä¹ˆ <code>assert.strictEqual</code> ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œå¹¶æ˜¾ç¤ºæä¾›çš„é”™è¯¯ä¿¡æ¯ <code>&#39;2 + 3 åº”è¯¥ç­‰äº 5&#39;</code>ã€‚</p><h3 id="æ³¨æ„äº‹é¡¹-2" tabindex="-1"><a class="header-anchor" href="#æ³¨æ„äº‹é¡¹-2"><span>æ³¨æ„äº‹é¡¹ï¼š</span></a></h3><ul><li>&quot;ä¸¥æ ¼ç›¸ç­‰&quot;æ„å‘³ç€å®ƒä¸ä¼šåœ¨æ¯”è¾ƒæ—¶è¿›è¡Œç±»å‹è½¬æ¢ã€‚ä¾‹å¦‚ï¼Œå­—ç¬¦ä¸² <code>&#39;5&#39;</code> å’Œæ•°å­— <code>5</code> åœ¨ä¸¥æ ¼ç›¸ç­‰çš„æ„ä¹‰ä¸Šæ˜¯ä¸ç›¸ç­‰çš„ã€‚</li><li>å¦‚æœä½ åªå…³å¿ƒå€¼è€Œä¸å…³å¿ƒç±»å‹ï¼Œå¯ä»¥ä½¿ç”¨ <code>assert.equal</code> æ–¹æ³•ï¼Œå®ƒå…è®¸åœ¨æ¯”è¾ƒæ—¶è¿›è¡Œç±»å‹è½¬æ¢ã€‚</li></ul><p>ä½¿ç”¨ <code>assert.strictEqual</code> åŠå…¶ä»–æ–­è¨€æ–¹æ³•å¯ä»¥å¸®åŠ©ä½ ç¡®ä¿ä»£ç çš„å¯é æ€§ï¼Œå¹¶åŠæ—¶å‘ç°æ½œåœ¨çš„é”™è¯¯ã€‚</p><h2 id="assert-throws-fn-error-message" tabindex="-1"><a class="header-anchor" href="#assert-throws-fn-error-message"><span><a href="https://nodejs.org/docs/latest/api/assert.html#assertthrowsfn-error-message" target="_blank" rel="noopener noreferrer">assert.throws(fn[, error][, message])</a></span></a></h2><p>Node.js ä¸­çš„ <code>assert</code> æ˜¯ä¸€ä¸ªç”¨äºè¿›è¡Œå„ç§æ–­è¨€æµ‹è¯•çš„æ¨¡å—ã€‚å…¶ä¸­ <code>assert.throws()</code> æ–¹æ³•æ˜¯ç”¨æ¥æµ‹è¯•ä¸€ä¸ªå‡½æ•° <code>fn</code> æ˜¯å¦ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚å¦‚æœå‡½æ•°æ²¡æœ‰æŠ›å‡ºé”™è¯¯ï¼Œæˆ–è€…æŠ›å‡ºçš„é”™è¯¯ä¸é¢„æœŸä¸ç¬¦ï¼Œ<code>assert.throws()</code> å°†ä¼šæŠ›å‡ºä¸€ä¸ª AssertionErrorï¼ˆæ–­è¨€é”™è¯¯ï¼‰ã€‚</p><p>å‚æ•°è§£é‡Šï¼š</p><ul><li><code>fn</code>ï¼šè¿™ä¸ªå‚æ•°æ˜¯ä½ æƒ³è¦æµ‹è¯•çš„å‡½æ•°ï¼Œå®ƒåº”å½“åœ¨æ‰§è¡Œæ—¶æŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚</li><li><code>error</code>ï¼šè¿™æ˜¯å¯é€‰å‚æ•°ã€‚å®ƒå¯ä»¥æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ã€æ­£åˆ™è¡¨è¾¾å¼ã€é”™è¯¯æ¶ˆæ¯æˆ–è€…éªŒè¯å‡½æ•°ï¼Œç”¨äºæ£€æŸ¥æŠ›å‡ºçš„é”™è¯¯æ˜¯å¦æ»¡è¶³ç‰¹å®šçš„æ¡ä»¶ã€‚</li><li><code>message</code>ï¼šè¿™ä¹Ÿæ˜¯ä¸€ä¸ªå¯é€‰å‚æ•°ã€‚å¦‚æœæä¾›äº†è¿™ä¸ªå‚æ•°ï¼Œåœ¨æ–­è¨€å¤±è´¥æ—¶ä¼šæ˜¾ç¤ºè¿™ä¸ªè‡ªå®šä¹‰é”™è¯¯æ¶ˆæ¯ï¼Œè€Œä¸æ˜¯é»˜è®¤çš„é”™è¯¯æ¶ˆæ¯ã€‚</li></ul><p>ä¸¾å‡ ä¸ªå®é™…çš„ä¾‹å­æ¥è¯´æ˜è¿™ä¸ªæ–¹æ³•çš„ä½¿ç”¨ï¼š</p><p><strong>ä¾‹å­ 1ï¼šåŸºæœ¬ä½¿ç”¨</strong></p><p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªå‡½æ•° <code>myFunction</code>ï¼Œå®ƒåœ¨é‡åˆ°é”™è¯¯æƒ…å†µæ—¶åº”è¯¥æŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼š</p><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" data-title="js" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">function</span><span style="color:#88C0D0;"> myFunction</span><span style="color:#ECEFF4;">()</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  throw</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> Error</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">å‡ºé—®é¢˜äº†ï¼</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬æƒ³è¦æµ‹è¯• <code>myFunction</code> æ˜¯å¦çœŸçš„æŠ›å‡ºäº†é”™è¯¯ï¼š</p><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" data-title="js" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> assert</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">assert</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">try</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">  assert</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">throws</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">myFunction</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // æµ‹è¯• myFunction æ˜¯å¦æŠ›å‡ºé”™è¯¯</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">myFunction æ­£ç¡®åœ°æŠ›å‡ºäº†ä¸€ä¸ªé”™è¯¯ã€‚</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;"> catch</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">err</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">error</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">myFunction æ²¡æœ‰æŠ›å‡ºé”™è¯¯ï¼Œæˆ–è€…æŠ›å‡ºçš„é”™è¯¯ç±»å‹ä¸æ­£ç¡®ã€‚</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>ä¾‹å­ 2ï¼šä½¿ç”¨é”™è¯¯ç±»å‹è¿›è¡Œæµ‹è¯•</strong></p><p>ç°åœ¨æˆ‘ä»¬æƒ³è¿›ä¸€æ­¥ç¡®è®¤ <code>myFunction</code> æŠ›å‡ºçš„é”™è¯¯æ˜¯ç‰¹å®šç±»å‹çš„ã€‚æ¯”å¦‚æˆ‘ä»¬é¢„æœŸå®ƒåº”è¯¥æŠ›å‡ºä¸€ä¸ª <code>TypeError</code>ï¼š</p><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" data-title="js" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">function</span><span style="color:#88C0D0;"> myFunction</span><span style="color:#ECEFF4;">()</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  throw</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> TypeError</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">è¿™æ˜¯ä¸€ä¸ªç±»å‹é”™è¯¯ï¼</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> assert</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">assert</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">try</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">  assert</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">throws</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">myFunction</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> TypeError</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span><span style="color:#616E88;"> // æµ‹è¯• myFunction æŠ›å‡ºçš„æ˜¯å¦ä¸º TypeError ç±»å‹çš„é”™è¯¯</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">myFunction æ­£ç¡®åœ°æŠ›å‡ºäº† TypeError é”™è¯¯ã€‚</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;"> catch</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">err</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">error</span><span style="color:#D8DEE9FF;">(</span></span>
<span class="line"><span style="color:#ECEFF4;">    &quot;</span><span style="color:#A3BE8C;">myFunction æ²¡æœ‰æŠ›å‡º TypeError é”™è¯¯ï¼Œæˆ–è€…æŠ›å‡ºçš„é”™è¯¯ç±»å‹ä¸æ­£ç¡®ã€‚</span><span style="color:#ECEFF4;">&quot;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  )</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>ä¾‹å­ 3ï¼šä½¿ç”¨è‡ªå®šä¹‰é”™è¯¯ä¿¡æ¯</strong></p><p>å¯èƒ½æˆ‘ä»¬è¿˜å¸Œæœ›å®šåˆ¶ AssertionError çš„é”™è¯¯æ¶ˆæ¯ï¼Œä½¿å…¶æ›´åŠ æ¸…æ™°æ˜“æ‡‚ï¼š</p><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" data-title="js" style="background-color:#2e3440ff;color:#d8dee9ff;"><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#81A1C1;">function</span><span style="color:#88C0D0;"> myFunction</span><span style="color:#ECEFF4;">()</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#81A1C1;">  throw</span><span style="color:#81A1C1;"> new</span><span style="color:#88C0D0;"> Error</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">é”™è¯¯å‘ç”Ÿäº†ï¼</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9;"> assert</span><span style="color:#81A1C1;"> =</span><span style="color:#88C0D0;"> require</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#A3BE8C;">assert</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">try</span><span style="color:#ECEFF4;"> {</span></span>
<span class="line"><span style="color:#D8DEE9;">  assert</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">throws</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">myFunction</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9;"> TypeError</span><span style="color:#ECEFF4;">,</span><span style="color:#ECEFF4;"> &quot;</span><span style="color:#A3BE8C;">myFunction åº”è¯¥æŠ›å‡º TypeError!</span><span style="color:#ECEFF4;">&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#81A1C1;"> catch</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">err</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9;">  console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">error</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">err</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">message</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#616E88;">  // è¾“å‡º &quot;myFunction åº”è¯¥æŠ›å‡º TypeError!&quot; è€Œä¸æ˜¯ assert é»˜è®¤çš„é”™è¯¯ä¿¡æ¯</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ€»ç»“ä¸€ä¸‹ï¼Œ<code>assert.throws()</code> æ–¹æ³•æ˜¯ç”¨æ¥æµ‹è¯•ä¸€ä¸ªå‡½æ•°æ˜¯å¦æŒ‰ç…§é¢„æœŸæŠ›å‡ºäº†é”™è¯¯ã€‚å¦‚æœå‡½æ•°è¿è¡Œç»“æœä¸é¢„æœŸï¼ˆä¸æŠ›å‡ºé”™è¯¯ï¼Œæˆ–è€…æŠ›å‡ºäº†ä¸åŒç±»å‹çš„é”™è¯¯ï¼‰ä¸ä¸€è‡´ï¼Œå®ƒä¼šå¸®åŠ©ä½ å¿«é€Ÿåœ°æ‰¾åˆ°é—®é¢˜æ‰€åœ¨ï¼Œå¹¶é€šè¿‡æŠ›å‡º AssertionError æ¥é€šçŸ¥ä½ æµ‹è¯•æœªé€šè¿‡ã€‚</p></div><!----><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="update-time"><span class="vp-meta-label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><!----></div><div class="contributors"><span class="vp-meta-label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="vp-meta-info" title="email: kamiacgxu@gmail.com">kamishima-kaede</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><a class="route-link route-link-active auto-link prev" href="/document/node-doc/" aria-label="Node.jsæ–‡æ¡£"><div class="hint"><span class="arrow start"></span>ä¸Šä¸€é¡µ</div><div class="link"><span class="font-icon icon circle-info" style=""></span>Node.jsæ–‡æ¡£</div></a><a class="route-link auto-link next" href="/document/node-doc/Async%20hooks.html" aria-label="Async hooks"><div class="hint">ä¸‹ä¸€é¡µ<span class="arrow end"></span></div><div class="link">Async hooks<!----></div></a></nav><!----><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper"><!----><div class="vp-copyright">Copyright Â© 2018-present hanekawa-shiki</div></footer></div><!--]--><!--]--><!--[--><!----><!----><!--]--><!--]--></div>
    <script src="/assets/js/runtime~app.b7c0d7f2.js" defer></script><script src="/assets/js/4485.d2710361.js" defer></script><script src="/assets/js/app.ed12edd2.js" defer></script>
  </body>
</html>
